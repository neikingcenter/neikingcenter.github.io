(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function ym(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ry={exports:{}},_d={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function QN(){if(Mx)return _d;Mx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,s,o){var r=null;if(o!==void 0&&(r=""+o),s.key!==void 0&&(r=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:e,type:i,key:r,ref:s!==void 0?s:null,props:o}}return _d.Fragment=t,_d.jsx=n,_d.jsxs=n,_d}var Ix;function XN(){return Ix||(Ix=1,ry.exports=QN()),ry.exports}var D=XN(),ay={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function ZN(){if(_x)return $e;_x=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(G,Z,le){this.props=G,this.context=Z,this.refs=E,this.updater=le||w}x.prototype.isReactComponent={},x.prototype.setState=function(G,Z){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Z,"setState")},x.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function P(){}P.prototype=x.prototype;function M(G,Z,le){this.props=G,this.context=Z,this.refs=E,this.updater=le||w}var I=M.prototype=new P;I.constructor=M,S(I,x.prototype),I.isPureReactComponent=!0;var U=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function _(G,Z,le,te,me,Te){return le=Te.ref,{$$typeof:e,type:G,key:Z,ref:le!==void 0?le:null,props:Te}}function F(G,Z){return _(G.type,Z,void 0,void 0,void 0,G.props)}function k(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function O(G){var Z={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(le){return Z[le]})}var N=/\/+/g;function H(G,Z){return typeof G=="object"&&G!==null&&G.key!=null?O(""+G.key):Z.toString(36)}function V(){}function ve(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(V,V):(G.status="pending",G.then(function(Z){G.status==="pending"&&(G.status="fulfilled",G.value=Z)},function(Z){G.status==="pending"&&(G.status="rejected",G.reason=Z)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function pe(G,Z,le,te,me){var Te=typeof G;(Te==="undefined"||Te==="boolean")&&(G=null);var xe=!1;if(G===null)xe=!0;else switch(Te){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(G.$$typeof){case e:case t:xe=!0;break;case f:return xe=G._init,pe(xe(G._payload),Z,le,te,me)}}if(xe)return me=me(G),xe=te===""?"."+H(G,0):te,U(me)?(le="",xe!=null&&(le=xe.replace(N,"$&/")+"/"),pe(me,Z,le,"",function(We){return We})):me!=null&&(k(me)&&(me=F(me,le+(me.key==null||G&&G.key===me.key?"":(""+me.key).replace(N,"$&/")+"/")+xe)),Z.push(me)),1;xe=0;var st=te===""?".":te+":";if(U(G))for(var et=0;et<G.length;et++)te=G[et],Te=st+H(te,et),xe+=pe(te,Z,le,Te,me);else if(et=m(G),typeof et=="function")for(G=et.call(G),et=0;!(te=G.next()).done;)te=te.value,Te=st+H(te,et++),xe+=pe(te,Z,le,Te,me);else if(Te==="object"){if(typeof G.then=="function")return pe(ve(G),Z,le,te,me);throw Z=String(G),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return xe}function q(G,Z,le){if(G==null)return G;var te=[],me=0;return pe(G,te,"","",function(Te){return Z.call(le,Te,me++)}),te}function ie(G){if(G._status===-1){var Z=G._result;Z=Z(),Z.then(function(le){(G._status===0||G._status===-1)&&(G._status=1,G._result=le)},function(le){(G._status===0||G._status===-1)&&(G._status=2,G._result=le)}),G._status===-1&&(G._status=0,G._result=Z)}if(G._status===1)return G._result.default;throw G._result}var se=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function be(){}return $e.Children={map:q,forEach:function(G,Z,le){q(G,function(){Z.apply(this,arguments)},le)},count:function(G){var Z=0;return q(G,function(){Z++}),Z},toArray:function(G){return q(G,function(Z){return Z})||[]},only:function(G){if(!k(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},$e.Component=x,$e.Fragment=n,$e.Profiler=s,$e.PureComponent=M,$e.StrictMode=i,$e.Suspense=u,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,$e.__COMPILER_RUNTIME={__proto__:null,c:function(G){return z.H.useMemoCache(G)}},$e.cache=function(G){return function(){return G.apply(null,arguments)}},$e.cloneElement=function(G,Z,le){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var te=S({},G.props),me=G.key,Te=void 0;if(Z!=null)for(xe in Z.ref!==void 0&&(Te=void 0),Z.key!==void 0&&(me=""+Z.key),Z)!W.call(Z,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&Z.ref===void 0||(te[xe]=Z[xe]);var xe=arguments.length-2;if(xe===1)te.children=le;else if(1<xe){for(var st=Array(xe),et=0;et<xe;et++)st[et]=arguments[et+2];te.children=st}return _(G.type,me,void 0,void 0,Te,te)},$e.createContext=function(G){return G={$$typeof:r,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},$e.createElement=function(G,Z,le){var te,me={},Te=null;if(Z!=null)for(te in Z.key!==void 0&&(Te=""+Z.key),Z)W.call(Z,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(me[te]=Z[te]);var xe=arguments.length-2;if(xe===1)me.children=le;else if(1<xe){for(var st=Array(xe),et=0;et<xe;et++)st[et]=arguments[et+2];me.children=st}if(G&&G.defaultProps)for(te in xe=G.defaultProps,xe)me[te]===void 0&&(me[te]=xe[te]);return _(G,Te,void 0,void 0,null,me)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(G){return{$$typeof:c,render:G}},$e.isValidElement=k,$e.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:ie}},$e.memo=function(G,Z){return{$$typeof:h,type:G,compare:Z===void 0?null:Z}},$e.startTransition=function(G){var Z=z.T,le={};z.T=le;try{var te=G(),me=z.S;me!==null&&me(le,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(be,se)}catch(Te){se(Te)}finally{z.T=Z}},$e.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},$e.use=function(G){return z.H.use(G)},$e.useActionState=function(G,Z,le){return z.H.useActionState(G,Z,le)},$e.useCallback=function(G,Z){return z.H.useCallback(G,Z)},$e.useContext=function(G){return z.H.useContext(G)},$e.useDebugValue=function(){},$e.useDeferredValue=function(G,Z){return z.H.useDeferredValue(G,Z)},$e.useEffect=function(G,Z,le){var te=z.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(G,Z)},$e.useId=function(){return z.H.useId()},$e.useImperativeHandle=function(G,Z,le){return z.H.useImperativeHandle(G,Z,le)},$e.useInsertionEffect=function(G,Z){return z.H.useInsertionEffect(G,Z)},$e.useLayoutEffect=function(G,Z){return z.H.useLayoutEffect(G,Z)},$e.useMemo=function(G,Z){return z.H.useMemo(G,Z)},$e.useOptimistic=function(G,Z){return z.H.useOptimistic(G,Z)},$e.useReducer=function(G,Z,le){return z.H.useReducer(G,Z,le)},$e.useRef=function(G){return z.H.useRef(G)},$e.useState=function(G){return z.H.useState(G)},$e.useSyncExternalStore=function(G,Z,le){return z.H.useSyncExternalStore(G,Z,le)},$e.useTransition=function(){return z.H.useTransition()},$e.version="19.1.1",$e}var kx;function ib(){return kx||(kx=1,ay.exports=ZN()),ay.exports}var R=ib();const oe=ym(R);var ly={exports:{}},kd={},cy={exports:{}},uy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function JN(){return Lx||(Lx=1,function(e){function t(q,ie){var se=q.length;q.push(ie);e:for(;0<se;){var be=se-1>>>1,G=q[be];if(0<s(G,ie))q[be]=ie,q[se]=G,se=be;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ie=q[0],se=q.pop();if(se!==ie){q[0]=se;e:for(var be=0,G=q.length,Z=G>>>1;be<Z;){var le=2*(be+1)-1,te=q[le],me=le+1,Te=q[me];if(0>s(te,se))me<G&&0>s(Te,te)?(q[be]=Te,q[me]=se,be=me):(q[be]=te,q[le]=se,be=le);else if(me<G&&0>s(Te,se))q[be]=Te,q[me]=se,be=me;else break e}}return ie}function s(q,ie){var se=q.sortIndex-ie.sortIndex;return se!==0?se:q.id-ie.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var r=Date,c=r.now();e.unstable_now=function(){return r.now()-c}}var u=[],h=[],f=1,p=null,m=3,w=!1,S=!1,E=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function U(q){for(var ie=n(h);ie!==null;){if(ie.callback===null)i(h);else if(ie.startTime<=q)i(h),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(h)}}function z(q){if(E=!1,U(q),!S)if(n(u)!==null)S=!0,W||(W=!0,H());else{var ie=n(h);ie!==null&&pe(z,ie.startTime-q)}}var W=!1,_=-1,F=5,k=-1;function O(){return x?!0:!(e.unstable_now()-k<F)}function N(){if(x=!1,W){var q=e.unstable_now();k=q;var ie=!0;try{e:{S=!1,E&&(E=!1,M(_),_=-1),w=!0;var se=m;try{t:{for(U(q),p=n(u);p!==null&&!(p.expirationTime>q&&O());){var be=p.callback;if(typeof be=="function"){p.callback=null,m=p.priorityLevel;var G=be(p.expirationTime<=q);if(q=e.unstable_now(),typeof G=="function"){p.callback=G,U(q),ie=!0;break t}p===n(u)&&i(u),U(q)}else i(u);p=n(u)}if(p!==null)ie=!0;else{var Z=n(h);Z!==null&&pe(z,Z.startTime-q),ie=!1}}break e}finally{p=null,m=se,w=!1}ie=void 0}}finally{ie?H():W=!1}}}var H;if(typeof I=="function")H=function(){I(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ve=V.port2;V.port1.onmessage=N,H=function(){ve.postMessage(null)}}else H=function(){P(N,0)};function pe(q,ie){_=P(function(){q(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var se=m;m=ie;try{return q()}finally{m=se}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(q,ie){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=m;m=q;try{return ie()}finally{m=se}},e.unstable_scheduleCallback=function(q,ie,se){var be=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?be+se:be):se=be,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=se+G,q={id:f++,callback:ie,priorityLevel:q,startTime:se,expirationTime:G,sortIndex:-1},se>be?(q.sortIndex=se,t(h,q),n(u)===null&&q===n(h)&&(E?(M(_),_=-1):E=!0,pe(z,se-be))):(q.sortIndex=G,t(u,q),S||w||(S=!0,W||(W=!0,H()))),q},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(q){var ie=m;return function(){var se=m;m=ie;try{return q.apply(this,arguments)}finally{m=se}}}}(uy)),uy}var Ox;function e2(){return Ox||(Ox=1,cy.exports=JN()),cy.exports}var dy={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function t2(){if(Vx)return qn;Vx=1;var e=ib();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(u,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:u,containerInfo:h,implementation:f}}var r=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(u,h,null,f)},qn.flushSync=function(u){var h=r.T,f=i.p;try{if(r.T=null,i.p=2,u)return u()}finally{r.T=h,i.p=f,i.d.f()}},qn.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},qn.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},qn.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:w}):f==="script"&&i.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qn.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},qn.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin);i.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qn.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},qn.requestFormReset=function(u){i.d.r(u)},qn.unstable_batchedUpdates=function(u,h){return u(h)},qn.useFormState=function(u,h,f){return r.H.useFormState(u,h,f)},qn.useFormStatus=function(){return r.H.useHostTransitionStatus()},qn.version="19.1.1",qn}var Nx;function jP(){if(Nx)return dy.exports;Nx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dy.exports=t2(),dy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function n2(){if(Bx)return kd;Bx=1;var e=e2(),t=ib(),n=jP();function i(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function r(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(o(a)!==a)throw Error(i(188))}function u(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(i(188));return l!==a?null:a}for(var d=a,g=l;;){var v=d.return;if(v===null)break;var y=v.alternate;if(y===null){if(g=v.return,g!==null){d=g;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===d)return c(v),a;if(y===g)return c(v),l;y=y.sibling}throw Error(i(188))}if(d.return!==g.return)d=v,g=y;else{for(var A=!1,L=v.child;L;){if(L===d){A=!0,d=v,g=y;break}if(L===g){A=!0,g=v,d=y;break}L=L.sibling}if(!A){for(L=y.child;L;){if(L===d){A=!0,d=y,g=v;break}if(L===g){A=!0,g=y,d=v;break}L=L.sibling}if(!A)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?a:l}function h(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=h(a),l!==null)return l;a=a.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function H(a){return a===null||typeof a!="object"?null:(a=N&&a[N]||a["@@iterator"],typeof a=="function"?a:null)}var V=Symbol.for("react.client.reference");function ve(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===V?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList";case k:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case I:return(a.displayName||"Context")+".Provider";case M:return(a._context.displayName||"Context")+".Consumer";case U:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case _:return l=a.displayName||null,l!==null?l:ve(a.type)||"Memo";case F:l=a._payload,a=a._init;try{return ve(a(l))}catch{}}return null}var pe=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},be=[],G=-1;function Z(a){return{current:a}}function le(a){0>G||(a.current=be[G],be[G]=null,G--)}function te(a,l){G++,be[G]=a.current,a.current=l}var me=Z(null),Te=Z(null),xe=Z(null),st=Z(null);function et(a,l){switch(te(xe,l),te(Te,a),te(me,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?ox(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=ox(l),a=rx(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}le(me),te(me,a)}function We(){le(me),le(Te),le(xe)}function zt(a){a.memoizedState!==null&&te(st,a);var l=me.current,d=rx(l,a.type);l!==d&&(te(Te,a),te(me,d))}function gt(a){Te.current===a&&(le(me),le(Te)),st.current===a&&(le(st),Ad._currentValue=se)}var kt=Object.prototype.hasOwnProperty,Zt=e.unstable_scheduleCallback,Fe=e.unstable_cancelCallback,Ie=e.unstable_shouldYield,ut=e.unstable_requestPaint,ht=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,Et=e.unstable_ImmediatePriority,Lt=e.unstable_UserBlockingPriority,Mt=e.unstable_NormalPriority,Kt=e.unstable_LowPriority,Tn=e.unstable_IdlePriority,ci=e.log,eo=e.unstable_setDisableYieldValue,_e=null,Ke=null;function qe(a){if(typeof ci=="function"&&eo(a),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(_e,a)}catch{}}var pt=Math.clz32?Math.clz32:ta,Dl=Math.log,lC=Math.LN2;function ta(a){return a>>>=0,a===0?32:31-(Dl(a)/lC|0)|0}var na=256,ia=4194304;function os(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Al(a,l,d){var g=a.pendingLanes;if(g===0)return 0;var v=0,y=a.suspendedLanes,A=a.pingedLanes;a=a.warmLanes;var L=g&134217727;return L!==0?(g=L&~y,g!==0?v=os(g):(A&=L,A!==0?v=os(A):d||(d=L&~a,d!==0&&(v=os(d))))):(L=g&~y,L!==0?v=os(L):A!==0?v=os(A):d||(d=g&~a,d!==0&&(v=os(d)))),v===0?0:l!==0&&l!==v&&(l&y)===0&&(y=v&-v,d=l&-l,y>=d||y===32&&(d&4194048)!==0)?l:v}function sa(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Au(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fu(){var a=na;return na<<=1,(na&4194048)===0&&(na=256),a}function Pu(){var a=ia;return ia<<=1,(ia&62914560)===0&&(ia=4194304),a}function to(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function no(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Mu(a,l,d,g,v,y){var A=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var L=a.entanglements,j=a.expirationTimes,X=a.hiddenUpdates;for(d=A&~d;0<d;){var ce=31-pt(d),he=1<<ce;L[ce]=0,j[ce]=-1;var ee=X[ce];if(ee!==null)for(X[ce]=null,ce=0;ce<ee.length;ce++){var ne=ee[ce];ne!==null&&(ne.lane&=-536870913)}d&=~he}g!==0&&Cs(a,g,0),y!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=y&~(A&~l))}function Cs(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-pt(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|d&4194090}function Iu(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-pt(d),v=1<<g;v&l|a[g]&l&&(a[g]|=l),d&=~v}}function Ko(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Fl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Yo(){var a=ie.p;return a!==0?a:(a=window.event,a===void 0?32:Tx(a.type))}function df(a,l){var d=ie.p;try{return ie.p=a,l()}finally{ie.p=d}}var Bt=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Bt,ln="__reactProps$"+Bt,Li="__reactContainer$"+Bt,_u="__reactEvents$"+Bt,cC="__reactListeners$"+Bt,Qo="__reactHandles$"+Bt,hf="__reactResources$"+Bt,oa="__reactMarker$"+Bt;function Xo(a){delete a[Cn],delete a[ln],delete a[_u],delete a[cC],delete a[Qo]}function io(a){var l=a[Cn];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Li]||d[Cn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=ux(a);a!==null;){if(d=a[Cn])return d;a=ux(a)}return l}a=d,d=a.parentNode}return null}function vs(a){if(a=a[Cn]||a[Li]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function ys(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(i(33))}function ei(a){var l=a[hf];return l||(l=a[hf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Jt(a){a[oa]=!0}var ku=new Set,Pl={};function rs(a,l){so(a,l),so(a+"Capture",l)}function so(a,l){for(Pl[a]=l,a=0;a<l.length;a++)ku.add(l[a])}var ff=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gf={},ra={};function pf(a){return kt.call(ra,a)?!0:kt.call(gf,a)?!1:ff.test(a)?ra[a]=!0:(gf[a]=!0,!1)}function Zo(a,l,d){if(pf(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function ws(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function kn(a,l,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+g)}}var aa,mf;function oo(a){if(aa===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);aa=l&&l[1]||"",mf=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+aa+a+mf}var Ml=!1;function Il(a,l){if(!a||Ml)return"";Ml=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var ee=ne}Reflect.construct(a,[],he)}else{try{he.call()}catch(ne){ee=ne}a.call(he.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=g.DetermineComponentFrameRoot(),A=y[0],L=y[1];if(A&&L){var j=A.split(`
`),X=L.split(`
`);for(v=g=0;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;for(;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;if(g===j.length||v===X.length)for(g=j.length-1,v=X.length-1;1<=g&&0<=v&&j[g]!==X[v];)v--;for(;1<=g&&0<=v;g--,v--)if(j[g]!==X[v]){if(g!==1||v!==1)do if(g--,v--,0>v||j[g]!==X[v]){var ce=`
`+j[g].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=g&&0<=v);break}}}finally{Ml=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?oo(d):""}function Lu(a){switch(a.tag){case 26:case 27:case 5:return oo(a.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 15:return Il(a.type,!1);case 11:return Il(a.type.render,!1);case 1:return Il(a.type,!0);case 31:return oo("Activity");default:return""}}function _l(a){try{var l="";do l+=Lu(a),a=a.return;while(a);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function ti(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ou(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function uC(a){var l=Ou(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,y=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(A){g=""+A,y.call(this,A)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function kl(a){a._valueTracker||(a._valueTracker=uC(a))}function Vu(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=Ou(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function la(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var dC=/[\n"\\]/g;function cn(a){return a.replace(dC,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Si(a,l,d,g,v,y,A,L){a.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?a.type=A:a.removeAttribute("type"),l!=null?A==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+ti(l)):a.value!==""+ti(l)&&(a.value=""+ti(l)):A!=="submit"&&A!=="reset"||a.removeAttribute("value"),l!=null?Jo(a,A,ti(l)):d!=null?Jo(a,A,ti(d)):g!=null&&a.removeAttribute("value"),v==null&&y!=null&&(a.defaultChecked=!!y),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?a.name=""+ti(L):a.removeAttribute("name")}function ca(a,l,d,g,v,y,A,L){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),l!=null||d!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;d=d!=null?""+ti(d):"",l=l!=null?""+ti(l):d,L||l===a.value||(a.value=l),a.defaultValue=l}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=L?a.checked:!!g,a.defaultChecked=!!g,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.name=A)}function Jo(a,l,d){l==="number"&&la(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function ro(a,l,d,g){if(a=a.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<a.length;d++)v=l.hasOwnProperty("$"+a[d].value),a[d].selected!==v&&(a[d].selected=v),v&&g&&(a[d].defaultSelected=!0)}else{for(d=""+ti(d),l=null,v=0;v<a.length;v++){if(a[v].value===d){a[v].selected=!0,g&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function Tt(a,l,d){if(l!=null&&(l=""+ti(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+ti(d):""}function ua(a,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(i(92));if(pe(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=ti(l),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g)}function Oi(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var da=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cf(a,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,d):typeof d!="number"||d===0||da.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function Nu(a,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var v in l)g=l[v],l.hasOwnProperty(v)&&d[v]!==g&&Cf(a,v,g)}else for(var y in l)l.hasOwnProperty(y)&&Cf(a,y,l[y])}function Bu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(a){return fC.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ao=null;function Vi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var lo=null,co=null;function Gu(a){var l=vs(a);if(l&&(a=l.stateNode)){var d=a[ln]||null;e:switch(a=l.stateNode,l.type){case"input":if(Si(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+cn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var v=g[ln]||null;if(!v)throw Error(i(90));Si(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===a.form&&Vu(g)}break e;case"textarea":Tt(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&ro(a,!!d.multiple,l,!1)}}}var Ss=!1;function vf(a,l,d){if(Ss)return a(l,d);Ss=!0;try{var g=a(l);return g}finally{if(Ss=!1,(lo!==null||co!==null)&&(dg(),lo&&(l=lo,a=co,co=lo=null,Gu(l),a)))for(l=0;l<a.length;l++)Gu(a[l])}}function ha(a,l){var d=a.stateNode;if(d===null)return null;var g=d[ln]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ni=!1;if(as)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{Ni=!1}var bs=null,er=null,uo=null;function Hu(){if(uo)return uo;var a,l=er,d=l.length,g,v="value"in bs?bs.value:bs.textContent,y=v.length;for(a=0;a<d&&l[a]===v[a];a++);var A=d-a;for(g=1;g<=A&&l[d-g]===v[y-g];g++);return uo=v.slice(a,1<g?1-g:void 0)}function Rs(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Es(){return!0}function zu(){return!1}function xn(a){function l(d,g,v,y,A){this._reactName=d,this._targetInst=v,this.type=g,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var L in a)a.hasOwnProperty(L)&&(d=a[L],this[L]=d?d(y):y[L]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Es:zu,this.isPropagationStopped=zu,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),l}var mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=xn(mt),ga=f({},mt,{view:0,detail:0}),yf=xn(ga),Vl,Nl,Ts,pa=f({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ts&&(Ts&&a.type==="mousemove"?(Vl=a.screenX-Ts.screenX,Nl=a.screenY-Ts.screenY):Nl=Vl=0,Ts=a),Vl)},movementY:function(a){return"movementY"in a?a.movementY:Nl}}),Bi=xn(pa),wf=f({},pa,{dataTransfer:0}),gC=xn(wf),ma=f({},ga,{relatedTarget:0}),Bl=xn(ma),Uu=f({},mt,{animationName:0,elapsedTime:0,pseudoElement:0}),Gl=xn(Uu),Sf=f({},mt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Hl=xn(Sf),pC=f({},mt,{data:0}),Wu=xn(pC),Ca={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Rf[a])?!!l[a]:!1}function va(){return ju}var Ef=f({},ga,{key:function(a){if(a.key){var l=Ca[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Rs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bf[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(a){return a.type==="keypress"?Rs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Rs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),zl=xn(Ef),Tf=f({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=xn(Tf),ho=f({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),xf=xn(ho),Df=f({},mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Af=xn(Df),Ff=f({},pa,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ul=xn(Ff),ni=f({},mt,{newState:0,oldState:0}),Pf=xn(ni),Mf=[9,13,27,32],xs=as&&"CompositionEvent"in window,C=null;as&&"documentMode"in document&&(C=document.documentMode);var b=as&&"TextEvent"in window&&!C,T=as&&(!xs||C&&8<C&&11>=C),B=" ",Y=!1;function ae(a,l){switch(a){case"keyup":return Mf.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ot=!1;function vn(a,l){switch(a){case"compositionend":return ye(l);case"keypress":return l.which!==32?null:(Y=!0,B);case"textInput":return a=l.data,a===B&&Y?null:a;default:return null}}function rt(a,l){if(ot)return a==="compositionend"||!xs&&ae(a,l)?(a=Hu(),uo=er=bs=null,ot=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return T&&l.locale!=="ko"?null:l.data;default:return null}}var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yn(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Dn[a.type]:l==="textarea"}function fo(a,l,d,g){lo?co?co.push(g):co=[g]:lo=g,l=Cg(l,"onChange"),0<l.length&&(d=new Ol("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var Ln=null,Ds=null;function qu(a){ex(a,0)}function If(a){var l=ys(a);if(Vu(l))return a}function SE(a,l){if(a==="change")return l}var bE=!1;if(as){var mC;if(as){var CC="oninput"in document;if(!CC){var RE=document.createElement("div");RE.setAttribute("oninput","return;"),CC=typeof RE.oninput=="function"}mC=CC}else mC=!1;bE=mC&&(!document.documentMode||9<document.documentMode)}function EE(){Ln&&(Ln.detachEvent("onpropertychange",TE),Ds=Ln=null)}function TE(a){if(a.propertyName==="value"&&If(Ds)){var l=[];fo(l,Ds,a,Vi(a)),vf(qu,l)}}function xV(a,l,d){a==="focusin"?(EE(),Ln=l,Ds=d,Ln.attachEvent("onpropertychange",TE)):a==="focusout"&&EE()}function DV(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return If(Ds)}function AV(a,l){if(a==="click")return If(l)}function FV(a,l){if(a==="input"||a==="change")return If(l)}function PV(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var bi=typeof Object.is=="function"?Object.is:PV;function Ku(a,l){if(bi(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var v=d[g];if(!kt.call(l,v)||!bi(a[v],l[v]))return!1}return!0}function xE(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function DE(a,l){var d=xE(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=xE(d)}}function AE(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?AE(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function FE(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=la(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=la(a.document)}return l}function vC(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var MV=as&&"documentMode"in document&&11>=document.documentMode,Wl=null,yC=null,Yu=null,wC=!1;function PE(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wC||Wl==null||Wl!==la(g)||(g=Wl,"selectionStart"in g&&vC(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Yu&&Ku(Yu,g)||(Yu=g,g=Cg(yC,"onSelect"),0<g.length&&(l=new Ol("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Wl)))}function ya(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var jl={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},SC={},ME={};as&&(ME=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function wa(a){if(SC[a])return SC[a];if(!jl[a])return a;var l=jl[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in ME)return SC[a]=l[d];return a}var IE=wa("animationend"),_E=wa("animationiteration"),kE=wa("animationstart"),IV=wa("transitionrun"),_V=wa("transitionstart"),kV=wa("transitioncancel"),LE=wa("transitionend"),OE=new Map,bC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bC.push("scrollEnd");function ls(a,l){OE.set(a,l),rs(l,[a])}var VE=new WeakMap;function Gi(a,l){if(typeof a=="object"&&a!==null){var d=VE.get(a);return d!==void 0?d:(l={value:a,source:l,stack:_l(l)},VE.set(a,l),l)}return{value:a,source:l,stack:_l(l)}}var Hi=[],$l=0,RC=0;function _f(){for(var a=$l,l=RC=$l=0;l<a;){var d=Hi[l];Hi[l++]=null;var g=Hi[l];Hi[l++]=null;var v=Hi[l];Hi[l++]=null;var y=Hi[l];if(Hi[l++]=null,g!==null&&v!==null){var A=g.pending;A===null?v.next=v:(v.next=A.next,A.next=v),g.pending=v}y!==0&&NE(d,v,y)}}function kf(a,l,d,g){Hi[$l++]=a,Hi[$l++]=l,Hi[$l++]=d,Hi[$l++]=g,RC|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function EC(a,l,d,g){return kf(a,l,d,g),Lf(a)}function ql(a,l){return kf(a,null,null,l),Lf(a)}function NE(a,l,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var v=!1,y=a.return;y!==null;)y.childLanes|=d,g=y.alternate,g!==null&&(g.childLanes|=d),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(v=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,v&&l!==null&&(v=31-pt(d),a=y.hiddenUpdates,g=a[v],g===null?a[v]=[l]:g.push(l),l.lane=d|536870912),y):null}function Lf(a){if(50<wd)throw wd=0,Pv=null,Error(i(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Kl={};function LV(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(a,l,d,g){return new LV(a,l,d,g)}function TC(a){return a=a.prototype,!(!a||!a.isReactComponent)}function go(a,l){var d=a.alternate;return d===null?(d=Ri(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function BE(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Of(a,l,d,g,v,y){var A=0;if(g=a,typeof a=="function")TC(a)&&(A=1);else if(typeof a=="string")A=VN(a,d,me.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case k:return a=Ri(31,d,l,v),a.elementType=k,a.lanes=y,a;case S:return Sa(d.children,v,y,l);case E:A=8,v|=24;break;case x:return a=Ri(12,d,l,v|2),a.elementType=x,a.lanes=y,a;case z:return a=Ri(13,d,l,v),a.elementType=z,a.lanes=y,a;case W:return a=Ri(19,d,l,v),a.elementType=W,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case I:A=10;break e;case M:A=9;break e;case U:A=11;break e;case _:A=14;break e;case F:A=16,g=null;break e}A=29,d=Error(i(130,a===null?"null":typeof a,"")),g=null}return l=Ri(A,d,l,v),l.elementType=a,l.type=g,l.lanes=y,l}function Sa(a,l,d,g){return a=Ri(7,a,g,l),a.lanes=d,a}function xC(a,l,d){return a=Ri(6,a,null,l),a.lanes=d,a}function DC(a,l,d){return l=Ri(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Yl=[],Ql=0,Vf=null,Nf=0,zi=[],Ui=0,ba=null,po=1,mo="";function Ra(a,l){Yl[Ql++]=Nf,Yl[Ql++]=Vf,Vf=a,Nf=l}function GE(a,l,d){zi[Ui++]=po,zi[Ui++]=mo,zi[Ui++]=ba,ba=a;var g=po;a=mo;var v=32-pt(g)-1;g&=~(1<<v),d+=1;var y=32-pt(l)+v;if(30<y){var A=v-v%5;y=(g&(1<<A)-1).toString(32),g>>=A,v-=A,po=1<<32-pt(l)+v|d<<v|g,mo=y+a}else po=1<<y|d<<v|g,mo=a}function AC(a){a.return!==null&&(Ra(a,1),GE(a,1,0))}function FC(a){for(;a===Vf;)Vf=Yl[--Ql],Yl[Ql]=null,Nf=Yl[--Ql],Yl[Ql]=null;for(;a===ba;)ba=zi[--Ui],zi[Ui]=null,mo=zi[--Ui],zi[Ui]=null,po=zi[--Ui],zi[Ui]=null}var ii=null,Yt=null,ft=!1,Ea=null,As=!1,PC=Error(i(519));function Ta(a){var l=Error(i(418,""));throw Zu(Gi(l,a)),PC}function HE(a){var l=a.stateNode,d=a.type,g=a.memoizedProps;switch(l[Cn]=a,l[ln]=g,d){case"dialog":Je("cancel",l),Je("close",l);break;case"iframe":case"object":case"embed":Je("load",l);break;case"video":case"audio":for(d=0;d<bd.length;d++)Je(bd[d],l);break;case"source":Je("error",l);break;case"img":case"image":case"link":Je("error",l),Je("load",l);break;case"details":Je("toggle",l);break;case"input":Je("invalid",l),ca(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),kl(l);break;case"select":Je("invalid",l);break;case"textarea":Je("invalid",l),ua(l,g.value,g.defaultValue,g.children),kl(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||sx(l.textContent,d)?(g.popover!=null&&(Je("beforetoggle",l),Je("toggle",l)),g.onScroll!=null&&Je("scroll",l),g.onScrollEnd!=null&&Je("scrollend",l),g.onClick!=null&&(l.onclick=vg),l=!0):l=!1,l||Ta(a)}function zE(a){for(ii=a.return;ii;)switch(ii.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:ii=ii.return}}function Qu(a){if(a!==ii)return!1;if(!ft)return zE(a),ft=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||$v(a.type,a.memoizedProps)),d=!d),d&&Yt&&Ta(a),zE(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(l===0){Yt=us(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;a=a.nextSibling}Yt=null}}else l===27?(l=Yt,mr(a.type)?(a=Qv,Qv=null,Yt=a):Yt=l):Yt=ii?us(a.stateNode.nextSibling):null;return!0}function Xu(){Yt=ii=null,ft=!1}function UE(){var a=Ea;return a!==null&&(hi===null?hi=a:hi.push.apply(hi,a),Ea=null),a}function Zu(a){Ea===null?Ea=[a]:Ea.push(a)}var MC=Z(null),xa=null,Co=null;function tr(a,l,d){te(MC,l._currentValue),l._currentValue=d}function vo(a){a._currentValue=MC.current,le(MC)}function IC(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function _C(a,l,d,g){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var y=v.dependencies;if(y!==null){var A=v.child;y=y.firstContext;e:for(;y!==null;){var L=y;y=v;for(var j=0;j<l.length;j++)if(L.context===l[j]){y.lanes|=d,L=y.alternate,L!==null&&(L.lanes|=d),IC(y.return,d,a),g||(A=null);break e}y=L.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(i(341));A.lanes|=d,y=A.alternate,y!==null&&(y.lanes|=d),IC(A,d,a),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===a){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function Ju(a,l,d,g){a=null;for(var v=l,y=!1;v!==null;){if(!y){if((v.flags&524288)!==0)y=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var L=v.type;bi(v.pendingProps.value,A.value)||(a!==null?a.push(L):a=[L])}}else if(v===st.current){if(A=v.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Ad):a=[Ad])}v=v.return}a!==null&&_C(l,a,d,g),l.flags|=262144}function Bf(a){for(a=a.firstContext;a!==null;){if(!bi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Da(a){xa=a,Co=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function $n(a){return WE(xa,a)}function Gf(a,l){return xa===null&&Da(a),WE(a,l)}function WE(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Co===null){if(a===null)throw Error(i(308));Co=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Co=Co.next=l;return d}var OV=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},VV=e.unstable_scheduleCallback,NV=e.unstable_NormalPriority,wn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kC(){return{controller:new OV,data:new Map,refCount:0}}function ed(a){a.refCount--,a.refCount===0&&VV(NV,function(){a.controller.abort()})}var td=null,LC=0,Xl=0,Zl=null;function BV(a,l){if(td===null){var d=td=[];LC=0,Xl=Vv(),Zl={status:"pending",value:void 0,then:function(g){d.push(g)}}}return LC++,l.then(jE,jE),l}function jE(){if(--LC===0&&td!==null){Zl!==null&&(Zl.status="fulfilled");var a=td;td=null,Xl=0,Zl=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function GV(a,l){var d=[],g={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var v=0;v<d.length;v++)(0,d[v])(l)},function(v){for(g.status="rejected",g.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),g}var $E=q.S;q.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&BV(a,l),$E!==null&&$E(a,l)};var Aa=Z(null);function OC(){var a=Aa.current;return a!==null?a:It.pooledCache}function Hf(a,l){l===null?te(Aa,Aa.current):te(Aa,l.pool)}function qE(){var a=OC();return a===null?null:{parent:wn._currentValue,pool:a}}var nd=Error(i(460)),KE=Error(i(474)),zf=Error(i(542)),VC={then:function(){}};function YE(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Uf(){}function QE(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Uf,Uf),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,ZE(a),a;default:if(typeof l.status=="string")l.then(Uf,Uf);else{if(a=It,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=g}},function(g){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,ZE(a),a}throw id=l,nd}}var id=null;function XE(){if(id===null)throw Error(i(459));var a=id;return id=null,a}function ZE(a){if(a===nd||a===zf)throw Error(i(483))}var nr=!1;function NC(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function BC(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ir(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function sr(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(wt&2)!==0){var v=g.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),g.pending=l,l=Lf(a),NE(a,null,d),l}return kf(a,g,l,d),Lf(a)}function sd(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Iu(a,d)}}function GC(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var v=null,y=null;if(d=d.firstBaseUpdate,d!==null){do{var A={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};y===null?v=y=A:y=y.next=A,d=d.next}while(d!==null);y===null?v=y=l:y=y.next=l}else v=y=l;d={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var HC=!1;function od(){if(HC){var a=Zl;if(a!==null)throw a}}function rd(a,l,d,g){HC=!1;var v=a.updateQueue;nr=!1;var y=v.firstBaseUpdate,A=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var j=L,X=j.next;j.next=null,A===null?y=X:A.next=X,A=j;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,L=ce.lastBaseUpdate,L!==A&&(L===null?ce.firstBaseUpdate=X:L.next=X,ce.lastBaseUpdate=j))}if(y!==null){var he=v.baseState;A=0,ce=X=j=null,L=y;do{var ee=L.lane&-536870913,ne=ee!==L.lane;if(ne?(at&ee)===ee:(g&ee)===ee){ee!==0&&ee===Xl&&(HC=!0),ce!==null&&(ce=ce.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Be=a,Le=L;ee=l;var At=d;switch(Le.tag){case 1:if(Be=Le.payload,typeof Be=="function"){he=Be.call(At,he,ee);break e}he=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Le.payload,ee=typeof Be=="function"?Be.call(At,he,ee):Be,ee==null)break e;he=f({},he,ee);break e;case 2:nr=!0}}ee=L.callback,ee!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ce===null?(X=ce=ne,j=he):ce=ce.next=ne,A|=ee;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;ne=L,L=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);ce===null&&(j=he),v.baseState=j,v.firstBaseUpdate=X,v.lastBaseUpdate=ce,y===null&&(v.shared.lanes=0),hr|=A,a.lanes=A,a.memoizedState=he}}function JE(a,l){if(typeof a!="function")throw Error(i(191,a));a.call(l)}function e0(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)JE(d[a],l)}var Jl=Z(null),Wf=Z(0);function t0(a,l){a=To,te(Wf,a),te(Jl,l),To=a|l.baseLanes}function zC(){te(Wf,To),te(Jl,Jl.current)}function UC(){To=Wf.current,le(Jl),le(Wf)}var or=0,Ye=null,xt=null,un=null,jf=!1,ec=!1,Fa=!1,$f=0,ad=0,tc=null,HV=0;function en(){throw Error(i(321))}function WC(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!bi(a[d],l[d]))return!1;return!0}function jC(a,l,d,g,v,y){return or=y,Ye=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=a===null||a.memoizedState===null?N0:B0,Fa=!1,y=d(g,v),Fa=!1,ec&&(y=i0(l,d,g,v)),n0(a),y}function n0(a){q.H=Zf;var l=xt!==null&&xt.next!==null;if(or=0,un=xt=Ye=null,jf=!1,ad=0,tc=null,l)throw Error(i(300));a===null||An||(a=a.dependencies,a!==null&&Bf(a)&&(An=!0))}function i0(a,l,d,g){Ye=a;var v=0;do{if(ec&&(tc=null),ad=0,ec=!1,25<=v)throw Error(i(301));if(v+=1,un=xt=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=KV,y=l(d,g)}while(ec);return y}function zV(){var a=q.H,l=a.useState()[0];return l=typeof l.then=="function"?ld(l):l,a=a.useState()[0],(xt!==null?xt.memoizedState:null)!==a&&(Ye.flags|=1024),l}function $C(){var a=$f!==0;return $f=0,a}function qC(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function KC(a){if(jf){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}jf=!1}or=0,un=xt=Ye=null,ec=!1,ad=$f=0,tc=null}function ui(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Ye.memoizedState=un=a:un=un.next=a,un}function dn(){if(xt===null){var a=Ye.alternate;a=a!==null?a.memoizedState:null}else a=xt.next;var l=un===null?Ye.memoizedState:un.next;if(l!==null)un=l,xt=a;else{if(a===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));xt=a,a={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},un===null?Ye.memoizedState=un=a:un=un.next=a}return un}function YC(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ld(a){var l=ad;return ad+=1,tc===null&&(tc=[]),a=QE(tc,a,l),l=Ye,(un===null?l.memoizedState:un.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?N0:B0),a}function qf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ld(a);if(a.$$typeof===I)return $n(a)}throw Error(i(438,String(a)))}function QC(a){var l=null,d=Ye.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=Ye.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=YC(),Ye.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),g=0;g<a;g++)d[g]=O;return l.index++,d}function yo(a,l){return typeof l=="function"?l(a):l}function Kf(a){var l=dn();return XC(l,xt,a)}function XC(a,l,d){var g=a.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var v=a.baseQueue,y=g.pending;if(y!==null){if(v!==null){var A=v.next;v.next=y.next,y.next=A}l.baseQueue=v=y,g.pending=null}if(y=a.baseState,v===null)a.memoizedState=y;else{l=v.next;var L=A=null,j=null,X=l,ce=!1;do{var he=X.lane&-536870913;if(he!==X.lane?(at&he)===he:(or&he)===he){var ee=X.revertLane;if(ee===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),he===Xl&&(ce=!0);else if((or&ee)===ee){X=X.next,ee===Xl&&(ce=!0);continue}else he={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(L=j=he,A=y):j=j.next=he,Ye.lanes|=ee,hr|=ee;he=X.action,Fa&&d(y,he),y=X.hasEagerState?X.eagerState:d(y,he)}else ee={lane:he,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(L=j=ee,A=y):j=j.next=ee,Ye.lanes|=he,hr|=he;X=X.next}while(X!==null&&X!==l);if(j===null?A=y:j.next=L,!bi(y,a.memoizedState)&&(An=!0,ce&&(d=Zl,d!==null)))throw d;a.memoizedState=y,a.baseState=A,a.baseQueue=j,g.lastRenderedState=y}return v===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function ZC(a){var l=dn(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=a;var g=d.dispatch,v=d.pending,y=l.memoizedState;if(v!==null){d.pending=null;var A=v=v.next;do y=a(y,A.action),A=A.next;while(A!==v);bi(y,l.memoizedState)||(An=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),d.lastRenderedState=y}return[y,g]}function s0(a,l,d){var g=Ye,v=dn(),y=ft;if(y){if(d===void 0)throw Error(i(407));d=d()}else d=l();var A=!bi((xt||v).memoizedState,d);A&&(v.memoizedState=d,An=!0),v=v.queue;var L=a0.bind(null,g,v,a);if(cd(2048,8,L,[a]),v.getSnapshot!==l||A||un!==null&&un.memoizedState.tag&1){if(g.flags|=2048,nc(9,Yf(),r0.bind(null,g,v,d,l),null),It===null)throw Error(i(349));y||(or&124)!==0||o0(g,l,d)}return d}function o0(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Ye.updateQueue,l===null?(l=YC(),Ye.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function r0(a,l,d,g){l.value=d,l.getSnapshot=g,l0(l)&&c0(a)}function a0(a,l,d){return d(function(){l0(l)&&c0(a)})}function l0(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!bi(a,d)}catch{return!0}}function c0(a){var l=ql(a,2);l!==null&&Ai(l,a,2)}function JC(a){var l=ui();if(typeof a=="function"){var d=a;if(a=d(),Fa){qe(!0);try{d()}finally{qe(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:a},l}function u0(a,l,d,g){return a.baseState=d,XC(a,xt,typeof g=="function"?g:yo)}function UV(a,l,d,g,v){if(Xf(a))throw Error(i(485));if(a=l.action,a!==null){var y={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};q.T!==null?d(!0):y.isTransition=!1,g(y),d=l.pending,d===null?(y.next=l.pending=y,d0(l,y)):(y.next=d.next,l.pending=d.next=y)}}function d0(a,l){var d=l.action,g=l.payload,v=a.state;if(l.isTransition){var y=q.T,A={};q.T=A;try{var L=d(v,g),j=q.S;j!==null&&j(A,L),h0(a,l,L)}catch(X){ev(a,l,X)}finally{q.T=y}}else try{y=d(v,g),h0(a,l,y)}catch(X){ev(a,l,X)}}function h0(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){f0(a,l,g)},function(g){return ev(a,l,g)}):f0(a,l,d)}function f0(a,l,d){l.status="fulfilled",l.value=d,g0(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,d0(a,d)))}function ev(a,l,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,g0(l),l=l.next;while(l!==g)}a.action=null}function g0(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function p0(a,l){return l}function m0(a,l){if(ft){var d=It.formState;if(d!==null){e:{var g=Ye;if(ft){if(Yt){t:{for(var v=Yt,y=As;v.nodeType!==8;){if(!y){v=null;break t}if(v=us(v.nextSibling),v===null){v=null;break t}}y=v.data,v=y==="F!"||y==="F"?v:null}if(v){Yt=us(v.nextSibling),g=v.data==="F!";break e}}Ta(g)}g=!1}g&&(l=d[0])}}return d=ui(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p0,lastRenderedState:l},d.queue=g,d=L0.bind(null,Ye,g),g.dispatch=d,g=JC(!1),y=ov.bind(null,Ye,!1,g.queue),g=ui(),v={state:l,dispatch:null,action:a,pending:null},g.queue=v,d=UV.bind(null,Ye,v,y,d),v.dispatch=d,g.memoizedState=a,[l,d,!1]}function C0(a){var l=dn();return v0(l,xt,a)}function v0(a,l,d){if(l=XC(a,l,p0)[0],a=Kf(yo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=ld(l)}catch(A){throw A===nd?zf:A}else g=l;l=dn();var v=l.queue,y=v.dispatch;return d!==l.memoizedState&&(Ye.flags|=2048,nc(9,Yf(),WV.bind(null,v,d),null)),[g,y,a]}function WV(a,l){a.action=l}function y0(a){var l=dn(),d=xt;if(d!==null)return v0(l,d,a);dn(),l=l.memoizedState,d=dn();var g=d.queue.dispatch;return d.memoizedState=a,[l,g,!1]}function nc(a,l,d,g){return a={tag:a,create:d,deps:g,inst:l,next:null},l=Ye.updateQueue,l===null&&(l=YC(),Ye.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a),a}function Yf(){return{destroy:void 0,resource:void 0}}function w0(){return dn().memoizedState}function Qf(a,l,d,g){var v=ui();g=g===void 0?null:g,Ye.flags|=a,v.memoizedState=nc(1|l,Yf(),d,g)}function cd(a,l,d,g){var v=dn();g=g===void 0?null:g;var y=v.memoizedState.inst;xt!==null&&g!==null&&WC(g,xt.memoizedState.deps)?v.memoizedState=nc(l,y,d,g):(Ye.flags|=a,v.memoizedState=nc(1|l,y,d,g))}function S0(a,l){Qf(8390656,8,a,l)}function b0(a,l){cd(2048,8,a,l)}function R0(a,l){return cd(4,2,a,l)}function E0(a,l){return cd(4,4,a,l)}function T0(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function x0(a,l,d){d=d!=null?d.concat([a]):null,cd(4,4,T0.bind(null,l,a),d)}function tv(){}function D0(a,l){var d=dn();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&WC(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function A0(a,l){var d=dn();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&WC(l,g[1]))return g[0];if(g=a(),Fa){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[g,l],g}function nv(a,l,d){return d===void 0||(or&1073741824)!==0?a.memoizedState=l:(a.memoizedState=d,a=MT(),Ye.lanes|=a,hr|=a,d)}function F0(a,l,d,g){return bi(d,l)?d:Jl.current!==null?(a=nv(a,d,g),bi(a,l)||(An=!0),a):(or&42)===0?(An=!0,a.memoizedState=d):(a=MT(),Ye.lanes|=a,hr|=a,l)}function P0(a,l,d,g,v){var y=ie.p;ie.p=y!==0&&8>y?y:8;var A=q.T,L={};q.T=L,ov(a,!1,l,d);try{var j=v(),X=q.S;if(X!==null&&X(L,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ce=GV(j,g);ud(a,l,ce,Di(a))}else ud(a,l,g,Di(a))}catch(he){ud(a,l,{then:function(){},status:"rejected",reason:he},Di())}finally{ie.p=y,q.T=A}}function jV(){}function iv(a,l,d,g){if(a.tag!==5)throw Error(i(476));var v=M0(a).queue;P0(a,v,l,se,d===null?jV:function(){return I0(a),d(g)})}function M0(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:se},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function I0(a){var l=M0(a).next.queue;ud(a,l,{},Di())}function sv(){return $n(Ad)}function _0(){return dn().memoizedState}function k0(){return dn().memoizedState}function $V(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=Di();a=ir(d);var g=sr(l,a,d);g!==null&&(Ai(g,l,d),sd(g,l,d)),l={cache:kC()},a.payload=l;return}l=l.return}}function qV(a,l,d){var g=Di();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Xf(a)?O0(l,d):(d=EC(a,l,d,g),d!==null&&(Ai(d,a,g),V0(d,l,g)))}function L0(a,l,d){var g=Di();ud(a,l,d,g)}function ud(a,l,d,g){var v={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Xf(a))O0(l,v);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var A=l.lastRenderedState,L=y(A,d);if(v.hasEagerState=!0,v.eagerState=L,bi(L,A))return kf(a,l,v,0),It===null&&_f(),!1}catch{}finally{}if(d=EC(a,l,v,g),d!==null)return Ai(d,a,g),V0(d,l,g),!0}return!1}function ov(a,l,d,g){if(g={lane:2,revertLane:Vv(),action:g,hasEagerState:!1,eagerState:null,next:null},Xf(a)){if(l)throw Error(i(479))}else l=EC(a,d,g,2),l!==null&&Ai(l,a,2)}function Xf(a){var l=a.alternate;return a===Ye||l!==null&&l===Ye}function O0(a,l){ec=jf=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function V0(a,l,d){if((d&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Iu(a,d)}}var Zf={readContext:$n,use:qf,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en},N0={readContext:$n,use:qf,useCallback:function(a,l){return ui().memoizedState=[a,l===void 0?null:l],a},useContext:$n,useEffect:S0,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,Qf(4194308,4,T0.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Qf(4194308,4,a,l)},useInsertionEffect:function(a,l){Qf(4,2,a,l)},useMemo:function(a,l){var d=ui();l=l===void 0?null:l;var g=a();if(Fa){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[g,l],g},useReducer:function(a,l,d){var g=ui();if(d!==void 0){var v=d(l);if(Fa){qe(!0);try{d(l)}finally{qe(!1)}}}else v=l;return g.memoizedState=g.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},g.queue=a,a=a.dispatch=qV.bind(null,Ye,a),[g.memoizedState,a]},useRef:function(a){var l=ui();return a={current:a},l.memoizedState=a},useState:function(a){a=JC(a);var l=a.queue,d=L0.bind(null,Ye,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:tv,useDeferredValue:function(a,l){var d=ui();return nv(d,a,l)},useTransition:function(){var a=JC(!1);return a=P0.bind(null,Ye,a.queue,!0,!1),ui().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var g=Ye,v=ui();if(ft){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),It===null)throw Error(i(349));(at&124)!==0||o0(g,l,d)}v.memoizedState=d;var y={value:d,getSnapshot:l};return v.queue=y,S0(a0.bind(null,g,y,a),[a]),g.flags|=2048,nc(9,Yf(),r0.bind(null,g,y,d,l),null),d},useId:function(){var a=ui(),l=It.identifierPrefix;if(ft){var d=mo,g=po;d=(g&~(1<<32-pt(g)-1)).toString(32)+d,l=""+l+"R"+d,d=$f++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=HV++,l=""+l+"r"+d.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:sv,useFormState:m0,useActionState:m0,useOptimistic:function(a){var l=ui();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=ov.bind(null,Ye,!0,d),d.dispatch=l,[a,l]},useMemoCache:QC,useCacheRefresh:function(){return ui().memoizedState=$V.bind(null,Ye)}},B0={readContext:$n,use:qf,useCallback:D0,useContext:$n,useEffect:b0,useImperativeHandle:x0,useInsertionEffect:R0,useLayoutEffect:E0,useMemo:A0,useReducer:Kf,useRef:w0,useState:function(){return Kf(yo)},useDebugValue:tv,useDeferredValue:function(a,l){var d=dn();return F0(d,xt.memoizedState,a,l)},useTransition:function(){var a=Kf(yo)[0],l=dn().memoizedState;return[typeof a=="boolean"?a:ld(a),l]},useSyncExternalStore:s0,useId:_0,useHostTransitionStatus:sv,useFormState:C0,useActionState:C0,useOptimistic:function(a,l){var d=dn();return u0(d,xt,a,l)},useMemoCache:QC,useCacheRefresh:k0},KV={readContext:$n,use:qf,useCallback:D0,useContext:$n,useEffect:b0,useImperativeHandle:x0,useInsertionEffect:R0,useLayoutEffect:E0,useMemo:A0,useReducer:ZC,useRef:w0,useState:function(){return ZC(yo)},useDebugValue:tv,useDeferredValue:function(a,l){var d=dn();return xt===null?nv(d,a,l):F0(d,xt.memoizedState,a,l)},useTransition:function(){var a=ZC(yo)[0],l=dn().memoizedState;return[typeof a=="boolean"?a:ld(a),l]},useSyncExternalStore:s0,useId:_0,useHostTransitionStatus:sv,useFormState:y0,useActionState:y0,useOptimistic:function(a,l){var d=dn();return xt!==null?u0(d,xt,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:QC,useCacheRefresh:k0},ic=null,dd=0;function Jf(a){var l=dd;return dd+=1,ic===null&&(ic=[]),QE(ic,a,l)}function hd(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function eg(a,l){throw l.$$typeof===p?Error(i(525)):(a=Object.prototype.toString.call(l),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function G0(a){var l=a._init;return l(a._payload)}function H0(a){function l(K,$){if(a){var Q=K.deletions;Q===null?(K.deletions=[$],K.flags|=16):Q.push($)}}function d(K,$){if(!a)return null;for(;$!==null;)l(K,$),$=$.sibling;return null}function g(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function v(K,$){return K=go(K,$),K.index=0,K.sibling=null,K}function y(K,$,Q){return K.index=Q,a?(Q=K.alternate,Q!==null?(Q=Q.index,Q<$?(K.flags|=67108866,$):Q):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function A(K){return a&&K.alternate===null&&(K.flags|=67108866),K}function L(K,$,Q,ue){return $===null||$.tag!==6?($=xC(Q,K.mode,ue),$.return=K,$):($=v($,Q),$.return=K,$)}function j(K,$,Q,ue){var De=Q.type;return De===S?ce(K,$,Q.props.children,ue,Q.key):$!==null&&($.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===F&&G0(De)===$.type)?($=v($,Q.props),hd($,Q),$.return=K,$):($=Of(Q.type,Q.key,Q.props,null,K.mode,ue),hd($,Q),$.return=K,$)}function X(K,$,Q,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=DC(Q,K.mode,ue),$.return=K,$):($=v($,Q.children||[]),$.return=K,$)}function ce(K,$,Q,ue,De){return $===null||$.tag!==7?($=Sa(Q,K.mode,ue,De),$.return=K,$):($=v($,Q),$.return=K,$)}function he(K,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=xC(""+$,K.mode,Q),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case m:return Q=Of($.type,$.key,$.props,null,K.mode,Q),hd(Q,$),Q.return=K,Q;case w:return $=DC($,K.mode,Q),$.return=K,$;case F:var ue=$._init;return $=ue($._payload),he(K,$,Q)}if(pe($)||H($))return $=Sa($,K.mode,Q,null),$.return=K,$;if(typeof $.then=="function")return he(K,Jf($),Q);if($.$$typeof===I)return he(K,Gf(K,$),Q);eg(K,$)}return null}function ee(K,$,Q,ue){var De=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return De!==null?null:L(K,$,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return Q.key===De?j(K,$,Q,ue):null;case w:return Q.key===De?X(K,$,Q,ue):null;case F:return De=Q._init,Q=De(Q._payload),ee(K,$,Q,ue)}if(pe(Q)||H(Q))return De!==null?null:ce(K,$,Q,ue,null);if(typeof Q.then=="function")return ee(K,$,Jf(Q),ue);if(Q.$$typeof===I)return ee(K,$,Gf(K,Q),ue);eg(K,Q)}return null}function ne(K,$,Q,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(Q)||null,L($,K,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case m:return K=K.get(ue.key===null?Q:ue.key)||null,j($,K,ue,De);case w:return K=K.get(ue.key===null?Q:ue.key)||null,X($,K,ue,De);case F:var Xe=ue._init;return ue=Xe(ue._payload),ne(K,$,Q,ue,De)}if(pe(ue)||H(ue))return K=K.get(Q)||null,ce($,K,ue,De,null);if(typeof ue.then=="function")return ne(K,$,Q,Jf(ue),De);if(ue.$$typeof===I)return ne(K,$,Q,Gf($,ue),De);eg($,ue)}return null}function Be(K,$,Q,ue){for(var De=null,Xe=null,Pe=$,Oe=$=0,Pn=null;Pe!==null&&Oe<Q.length;Oe++){Pe.index>Oe?(Pn=Pe,Pe=null):Pn=Pe.sibling;var dt=ee(K,Pe,Q[Oe],ue);if(dt===null){Pe===null&&(Pe=Pn);break}a&&Pe&&dt.alternate===null&&l(K,Pe),$=y(dt,$,Oe),Xe===null?De=dt:Xe.sibling=dt,Xe=dt,Pe=Pn}if(Oe===Q.length)return d(K,Pe),ft&&Ra(K,Oe),De;if(Pe===null){for(;Oe<Q.length;Oe++)Pe=he(K,Q[Oe],ue),Pe!==null&&($=y(Pe,$,Oe),Xe===null?De=Pe:Xe.sibling=Pe,Xe=Pe);return ft&&Ra(K,Oe),De}for(Pe=g(Pe);Oe<Q.length;Oe++)Pn=ne(Pe,K,Oe,Q[Oe],ue),Pn!==null&&(a&&Pn.alternate!==null&&Pe.delete(Pn.key===null?Oe:Pn.key),$=y(Pn,$,Oe),Xe===null?De=Pn:Xe.sibling=Pn,Xe=Pn);return a&&Pe.forEach(function(Sr){return l(K,Sr)}),ft&&Ra(K,Oe),De}function Le(K,$,Q,ue){if(Q==null)throw Error(i(151));for(var De=null,Xe=null,Pe=$,Oe=$=0,Pn=null,dt=Q.next();Pe!==null&&!dt.done;Oe++,dt=Q.next()){Pe.index>Oe?(Pn=Pe,Pe=null):Pn=Pe.sibling;var Sr=ee(K,Pe,dt.value,ue);if(Sr===null){Pe===null&&(Pe=Pn);break}a&&Pe&&Sr.alternate===null&&l(K,Pe),$=y(Sr,$,Oe),Xe===null?De=Sr:Xe.sibling=Sr,Xe=Sr,Pe=Pn}if(dt.done)return d(K,Pe),ft&&Ra(K,Oe),De;if(Pe===null){for(;!dt.done;Oe++,dt=Q.next())dt=he(K,dt.value,ue),dt!==null&&($=y(dt,$,Oe),Xe===null?De=dt:Xe.sibling=dt,Xe=dt);return ft&&Ra(K,Oe),De}for(Pe=g(Pe);!dt.done;Oe++,dt=Q.next())dt=ne(Pe,K,Oe,dt.value,ue),dt!==null&&(a&&dt.alternate!==null&&Pe.delete(dt.key===null?Oe:dt.key),$=y(dt,$,Oe),Xe===null?De=dt:Xe.sibling=dt,Xe=dt);return a&&Pe.forEach(function(YN){return l(K,YN)}),ft&&Ra(K,Oe),De}function At(K,$,Q,ue){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:e:{for(var De=Q.key;$!==null;){if($.key===De){if(De=Q.type,De===S){if($.tag===7){d(K,$.sibling),ue=v($,Q.props.children),ue.return=K,K=ue;break e}}else if($.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===F&&G0(De)===$.type){d(K,$.sibling),ue=v($,Q.props),hd(ue,Q),ue.return=K,K=ue;break e}d(K,$);break}else l(K,$);$=$.sibling}Q.type===S?(ue=Sa(Q.props.children,K.mode,ue,Q.key),ue.return=K,K=ue):(ue=Of(Q.type,Q.key,Q.props,null,K.mode,ue),hd(ue,Q),ue.return=K,K=ue)}return A(K);case w:e:{for(De=Q.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){d(K,$.sibling),ue=v($,Q.children||[]),ue.return=K,K=ue;break e}else{d(K,$);break}else l(K,$);$=$.sibling}ue=DC(Q,K.mode,ue),ue.return=K,K=ue}return A(K);case F:return De=Q._init,Q=De(Q._payload),At(K,$,Q,ue)}if(pe(Q))return Be(K,$,Q,ue);if(H(Q)){if(De=H(Q),typeof De!="function")throw Error(i(150));return Q=De.call(Q),Le(K,$,Q,ue)}if(typeof Q.then=="function")return At(K,$,Jf(Q),ue);if(Q.$$typeof===I)return At(K,$,Gf(K,Q),ue);eg(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(d(K,$.sibling),ue=v($,Q),ue.return=K,K=ue):(d(K,$),ue=xC(Q,K.mode,ue),ue.return=K,K=ue),A(K)):d(K,$)}return function(K,$,Q,ue){try{dd=0;var De=At(K,$,Q,ue);return ic=null,De}catch(Pe){if(Pe===nd||Pe===zf)throw Pe;var Xe=Ri(29,Pe,null,K.mode);return Xe.lanes=ue,Xe.return=K,Xe}finally{}}}var sc=H0(!0),z0=H0(!1),Wi=Z(null),Fs=null;function rr(a){var l=a.alternate;te(Sn,Sn.current&1),te(Wi,a),Fs===null&&(l===null||Jl.current!==null||l.memoizedState!==null)&&(Fs=a)}function U0(a){if(a.tag===22){if(te(Sn,Sn.current),te(Wi,a),Fs===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(Fs=a)}}else ar()}function ar(){te(Sn,Sn.current),te(Wi,Wi.current)}function wo(a){le(Wi),Fs===a&&(Fs=null),le(Sn)}var Sn=Z(0);function tg(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Yv(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function rv(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:f({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var av={enqueueSetState:function(a,l,d){a=a._reactInternals;var g=Di(),v=ir(g);v.payload=l,d!=null&&(v.callback=d),l=sr(a,v,g),l!==null&&(Ai(l,a,g),sd(l,a,g))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=Di(),v=ir(g);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=sr(a,v,g),l!==null&&(Ai(l,a,g),sd(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Di(),g=ir(d);g.tag=2,l!=null&&(g.callback=l),l=sr(a,g,d),l!==null&&(Ai(l,a,d),sd(l,a,d))}};function W0(a,l,d,g,v,y,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,y,A):l.prototype&&l.prototype.isPureReactComponent?!Ku(d,g)||!Ku(v,y):!0}function j0(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&av.enqueueReplaceState(l,l.state,null)}function Pa(a,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(a=a.defaultProps){d===l&&(d=f({},d));for(var v in a)d[v]===void 0&&(d[v]=a[v])}return d}var ng=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function $0(a){ng(a)}function q0(a){console.error(a)}function K0(a){ng(a)}function ig(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function Y0(a,l,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function lv(a,l,d){return d=ir(d),d.tag=3,d.payload={element:null},d.callback=function(){ig(a,l)},d}function Q0(a){return a=ir(a),a.tag=3,a}function X0(a,l,d,g){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var y=g.value;a.payload=function(){return v(y)},a.callback=function(){Y0(l,d,g)}}var A=d.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(a.callback=function(){Y0(l,d,g),typeof v!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var L=g.stack;this.componentDidCatch(g.value,{componentStack:L!==null?L:""})})}function YV(a,l,d,g,v){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&Ju(l,d,v,!0),d=Wi.current,d!==null){switch(d.tag){case 13:return Fs===null?Iv():d.alternate===null&&Qt===0&&(Qt=3),d.flags&=-257,d.flags|=65536,d.lanes=v,g===VC?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),kv(a,g,v)),!1;case 22:return d.flags|=65536,g===VC?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),kv(a,g,v)),!1}throw Error(i(435,d.tag))}return kv(a,g,v),Iv(),!1}if(ft)return l=Wi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,g!==PC&&(a=Error(i(422),{cause:g}),Zu(Gi(a,d)))):(g!==PC&&(l=Error(i(423),{cause:g}),Zu(Gi(l,d))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,g=Gi(g,d),v=lv(a.stateNode,g,v),GC(a,v),Qt!==4&&(Qt=2)),!1;var y=Error(i(520),{cause:g});if(y=Gi(y,d),yd===null?yd=[y]:yd.push(y),Qt!==4&&(Qt=2),l===null)return!0;g=Gi(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=v&-v,d.lanes|=a,a=lv(d.stateNode,g,a),GC(d,a),!1;case 1:if(l=d.type,y=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fr===null||!fr.has(y))))return d.flags|=65536,v&=-v,d.lanes|=v,v=Q0(v),X0(v,a,d,g),GC(d,v),!1}d=d.return}while(d!==null);return!1}var Z0=Error(i(461)),An=!1;function On(a,l,d,g){l.child=a===null?z0(l,null,d,g):sc(l,a.child,d,g)}function J0(a,l,d,g,v){d=d.render;var y=l.ref;if("ref"in g){var A={};for(var L in g)L!=="ref"&&(A[L]=g[L])}else A=g;return Da(l),g=jC(a,l,d,A,y,v),L=$C(),a!==null&&!An?(qC(a,l,v),So(a,l,v)):(ft&&L&&AC(l),l.flags|=1,On(a,l,g,v),l.child)}function eT(a,l,d,g,v){if(a===null){var y=d.type;return typeof y=="function"&&!TC(y)&&y.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=y,tT(a,l,y,g,v)):(a=Of(d.type,null,g,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(y=a.child,!mv(a,v)){var A=y.memoizedProps;if(d=d.compare,d=d!==null?d:Ku,d(A,g)&&a.ref===l.ref)return So(a,l,v)}return l.flags|=1,a=go(y,g),a.ref=l.ref,a.return=l,l.child=a}function tT(a,l,d,g,v){if(a!==null){var y=a.memoizedProps;if(Ku(y,g)&&a.ref===l.ref)if(An=!1,l.pendingProps=g=y,mv(a,v))(a.flags&131072)!==0&&(An=!0);else return l.lanes=a.lanes,So(a,l,v)}return cv(a,l,d,g,v)}function nT(a,l,d){var g=l.pendingProps,v=g.children,y=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=y!==null?y.baseLanes|d:d,a!==null){for(v=l.child=a.child,y=0;v!==null;)y=y|v.lanes|v.childLanes,v=v.sibling;l.childLanes=y&~g}else l.childLanes=0,l.child=null;return iT(a,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Hf(l,y!==null?y.cachePool:null),y!==null?t0(l,y):zC(),U0(l);else return l.lanes=l.childLanes=536870912,iT(a,l,y!==null?y.baseLanes|d:d,d)}else y!==null?(Hf(l,y.cachePool),t0(l,y),ar(),l.memoizedState=null):(a!==null&&Hf(l,null),zC(),ar());return On(a,l,v,d),l.child}function iT(a,l,d,g){var v=OC();return v=v===null?null:{parent:wn._currentValue,pool:v},l.memoizedState={baseLanes:d,cachePool:v},a!==null&&Hf(l,null),zC(),U0(l),a!==null&&Ju(a,l,g,!0),null}function sg(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function cv(a,l,d,g,v){return Da(l),d=jC(a,l,d,g,void 0,v),g=$C(),a!==null&&!An?(qC(a,l,v),So(a,l,v)):(ft&&g&&AC(l),l.flags|=1,On(a,l,d,v),l.child)}function sT(a,l,d,g,v,y){return Da(l),l.updateQueue=null,d=i0(l,g,d,v),n0(a),g=$C(),a!==null&&!An?(qC(a,l,y),So(a,l,y)):(ft&&g&&AC(l),l.flags|=1,On(a,l,d,y),l.child)}function oT(a,l,d,g,v){if(Da(l),l.stateNode===null){var y=Kl,A=d.contextType;typeof A=="object"&&A!==null&&(y=$n(A)),y=new d(g,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=av,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=g,y.state=l.memoizedState,y.refs={},NC(l),A=d.contextType,y.context=typeof A=="object"&&A!==null?$n(A):Kl,y.state=l.memoizedState,A=d.getDerivedStateFromProps,typeof A=="function"&&(rv(l,d,A,g),y.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&av.enqueueReplaceState(y,y.state,null),rd(l,g,y,v),od(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){y=l.stateNode;var L=l.memoizedProps,j=Pa(d,L);y.props=j;var X=y.context,ce=d.contextType;A=Kl,typeof ce=="object"&&ce!==null&&(A=$n(ce));var he=d.getDerivedStateFromProps;ce=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,ce||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(L||X!==A)&&j0(l,y,g,A),nr=!1;var ee=l.memoizedState;y.state=ee,rd(l,g,y,v),od(),X=l.memoizedState,L||ee!==X||nr?(typeof he=="function"&&(rv(l,d,he,g),X=l.memoizedState),(j=nr||W0(l,d,j,g,ee,X,A))?(ce||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=X),y.props=g,y.state=X,y.context=A,g=j):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{y=l.stateNode,BC(a,l),A=l.memoizedProps,ce=Pa(d,A),y.props=ce,he=l.pendingProps,ee=y.context,X=d.contextType,j=Kl,typeof X=="object"&&X!==null&&(j=$n(X)),L=d.getDerivedStateFromProps,(X=typeof L=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==he||ee!==j)&&j0(l,y,g,j),nr=!1,ee=l.memoizedState,y.state=ee,rd(l,g,y,v),od();var ne=l.memoizedState;A!==he||ee!==ne||nr||a!==null&&a.dependencies!==null&&Bf(a.dependencies)?(typeof L=="function"&&(rv(l,d,L,g),ne=l.memoizedState),(ce=nr||W0(l,d,ce,g,ee,ne,j)||a!==null&&a.dependencies!==null&&Bf(a.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(g,ne,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(g,ne,j)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===a.memoizedProps&&ee===a.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&ee===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ne),y.props=g,y.state=ne,y.context=j,g=ce):(typeof y.componentDidUpdate!="function"||A===a.memoizedProps&&ee===a.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&ee===a.memoizedState||(l.flags|=1024),g=!1)}return y=g,sg(a,l),g=(l.flags&128)!==0,y||g?(y=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,a!==null&&g?(l.child=sc(l,a.child,null,v),l.child=sc(l,null,d,v)):On(a,l,d,v),l.memoizedState=y.state,a=l.child):a=So(a,l,v),a}function rT(a,l,d,g){return Xu(),l.flags|=256,On(a,l,d,g),l.child}var uv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dv(a){return{baseLanes:a,cachePool:qE()}}function hv(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=ji),a}function aT(a,l,d){var g=l.pendingProps,v=!1,y=(l.flags&128)!==0,A;if((A=y)||(A=a!==null&&a.memoizedState===null?!1:(Sn.current&2)!==0),A&&(v=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,a===null){if(ft){if(v?rr(l):ar(),ft){var L=Yt,j;if(j=L){e:{for(j=L,L=As;j.nodeType!==8;){if(!L){L=null;break e}if(j=us(j.nextSibling),j===null){L=null;break e}}L=j}L!==null?(l.memoizedState={dehydrated:L,treeContext:ba!==null?{id:po,overflow:mo}:null,retryLane:536870912,hydrationErrors:null},j=Ri(18,null,null,0),j.stateNode=L,j.return=l,l.child=j,ii=l,Yt=null,j=!0):j=!1}j||Ta(l)}if(L=l.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return Yv(L)?l.lanes=32:l.lanes=536870912,null;wo(l)}return L=g.children,g=g.fallback,v?(ar(),v=l.mode,L=og({mode:"hidden",children:L},v),g=Sa(g,v,d,null),L.return=l,g.return=l,L.sibling=g,l.child=L,v=l.child,v.memoizedState=dv(d),v.childLanes=hv(a,A,d),l.memoizedState=uv,g):(rr(l),fv(l,L))}if(j=a.memoizedState,j!==null&&(L=j.dehydrated,L!==null)){if(y)l.flags&256?(rr(l),l.flags&=-257,l=gv(a,l,d)):l.memoizedState!==null?(ar(),l.child=a.child,l.flags|=128,l=null):(ar(),v=g.fallback,L=l.mode,g=og({mode:"visible",children:g.children},L),v=Sa(v,L,d,null),v.flags|=2,g.return=l,v.return=l,g.sibling=v,l.child=g,sc(l,a.child,null,d),g=l.child,g.memoizedState=dv(d),g.childLanes=hv(a,A,d),l.memoizedState=uv,l=v);else if(rr(l),Yv(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var X=A.dgst;A=X,g=Error(i(419)),g.stack="",g.digest=A,Zu({value:g,source:null,stack:null}),l=gv(a,l,d)}else if(An||Ju(a,l,d,!1),A=(d&a.childLanes)!==0,An||A){if(A=It,A!==null&&(g=d&-d,g=(g&42)!==0?1:Ko(g),g=(g&(A.suspendedLanes|d))!==0?0:g,g!==0&&g!==j.retryLane))throw j.retryLane=g,ql(a,g),Ai(A,a,g),Z0;L.data==="$?"||Iv(),l=gv(a,l,d)}else L.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=j.treeContext,Yt=us(L.nextSibling),ii=l,ft=!0,Ea=null,As=!1,a!==null&&(zi[Ui++]=po,zi[Ui++]=mo,zi[Ui++]=ba,po=a.id,mo=a.overflow,ba=l),l=fv(l,g.children),l.flags|=4096);return l}return v?(ar(),v=g.fallback,L=l.mode,j=a.child,X=j.sibling,g=go(j,{mode:"hidden",children:g.children}),g.subtreeFlags=j.subtreeFlags&65011712,X!==null?v=go(X,v):(v=Sa(v,L,d,null),v.flags|=2),v.return=l,g.return=l,g.sibling=v,l.child=g,g=v,v=l.child,L=a.child.memoizedState,L===null?L=dv(d):(j=L.cachePool,j!==null?(X=wn._currentValue,j=j.parent!==X?{parent:X,pool:X}:j):j=qE(),L={baseLanes:L.baseLanes|d,cachePool:j}),v.memoizedState=L,v.childLanes=hv(a,A,d),l.memoizedState=uv,g):(rr(l),d=a.child,a=d.sibling,d=go(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,a!==null&&(A=l.deletions,A===null?(l.deletions=[a],l.flags|=16):A.push(a)),l.child=d,l.memoizedState=null,d)}function fv(a,l){return l=og({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function og(a,l){return a=Ri(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function gv(a,l,d){return sc(l,a.child,null,d),a=fv(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function lT(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),IC(a.return,l,d)}function pv(a,l,d,g,v){var y=a.memoizedState;y===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:v}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=g,y.tail=d,y.tailMode=v)}function cT(a,l,d){var g=l.pendingProps,v=g.revealOrder,y=g.tail;if(On(a,l,g.children,d),g=Sn.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&lT(a,d,l);else if(a.tag===19)lT(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(te(Sn,g),v){case"forwards":for(d=l.child,v=null;d!==null;)a=d.alternate,a!==null&&tg(a)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),pv(l,!1,v,d,y);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&tg(a)===null){l.child=v;break}a=v.sibling,v.sibling=d,d=v,v=a}pv(l,!0,d,null,y);break;case"together":pv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function So(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),hr|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(Ju(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(i(153));if(l.child!==null){for(a=l.child,d=go(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=go(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function mv(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Bf(a)))}function QV(a,l,d){switch(l.tag){case 3:et(l,l.stateNode.containerInfo),tr(l,wn,a.memoizedState.cache),Xu();break;case 27:case 5:zt(l);break;case 4:et(l,l.stateNode.containerInfo);break;case 10:tr(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(rr(l),l.flags|=128,null):(d&l.child.childLanes)!==0?aT(a,l,d):(rr(l),a=So(a,l,d),a!==null?a.sibling:null);rr(l);break;case 19:var v=(a.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(Ju(a,l,d,!1),g=(d&l.childLanes)!==0),v){if(g)return cT(a,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te(Sn,Sn.current),g)break;return null;case 22:case 23:return l.lanes=0,nT(a,l,d);case 24:tr(l,wn,a.memoizedState.cache)}return So(a,l,d)}function uT(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)An=!0;else{if(!mv(a,d)&&(l.flags&128)===0)return An=!1,QV(a,l,d);An=(a.flags&131072)!==0}else An=!1,ft&&(l.flags&1048576)!==0&&GE(l,Nf,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var g=l.elementType,v=g._init;if(g=v(g._payload),l.type=g,typeof g=="function")TC(g)?(a=Pa(g,a),l.tag=1,l=oT(null,l,g,a,d)):(l.tag=0,l=cv(null,l,g,a,d));else{if(g!=null){if(v=g.$$typeof,v===U){l.tag=11,l=J0(null,l,g,a,d);break e}else if(v===_){l.tag=14,l=eT(null,l,g,a,d);break e}}throw l=ve(g)||g,Error(i(306,l,""))}}return l;case 0:return cv(a,l,l.type,l.pendingProps,d);case 1:return g=l.type,v=Pa(g,l.pendingProps),oT(a,l,g,v,d);case 3:e:{if(et(l,l.stateNode.containerInfo),a===null)throw Error(i(387));g=l.pendingProps;var y=l.memoizedState;v=y.element,BC(a,l),rd(l,g,null,d);var A=l.memoizedState;if(g=A.cache,tr(l,wn,g),g!==y.cache&&_C(l,[wn],d,!0),od(),g=A.element,y.isDehydrated)if(y={element:g,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=rT(a,l,g,d);break e}else if(g!==v){v=Gi(Error(i(424)),l),Zu(v),l=rT(a,l,g,d);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Yt=us(a.firstChild),ii=l,ft=!0,Ea=null,As=!0,d=z0(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Xu(),g===v){l=So(a,l,d);break e}On(a,l,g,d)}l=l.child}return l;case 26:return sg(a,l),a===null?(d=gx(l.type,null,l.pendingProps,null))?l.memoizedState=d:ft||(d=l.type,a=l.pendingProps,g=yg(xe.current).createElement(d),g[Cn]=l,g[ln]=a,Nn(g,d,a),Jt(g),l.stateNode=g):l.memoizedState=gx(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return zt(l),a===null&&ft&&(g=l.stateNode=dx(l.type,l.pendingProps,xe.current),ii=l,As=!0,v=Yt,mr(l.type)?(Qv=v,Yt=us(g.firstChild)):Yt=v),On(a,l,l.pendingProps.children,d),sg(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&ft&&((v=g=Yt)&&(g=EN(g,l.type,l.pendingProps,As),g!==null?(l.stateNode=g,ii=l,Yt=us(g.firstChild),As=!1,v=!0):v=!1),v||Ta(l)),zt(l),v=l.type,y=l.pendingProps,A=a!==null?a.memoizedProps:null,g=y.children,$v(v,y)?g=null:A!==null&&$v(v,A)&&(l.flags|=32),l.memoizedState!==null&&(v=jC(a,l,zV,null,null,d),Ad._currentValue=v),sg(a,l),On(a,l,g,d),l.child;case 6:return a===null&&ft&&((a=d=Yt)&&(d=TN(d,l.pendingProps,As),d!==null?(l.stateNode=d,ii=l,Yt=null,a=!0):a=!1),a||Ta(l)),null;case 13:return aT(a,l,d);case 4:return et(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=sc(l,null,g,d):On(a,l,g,d),l.child;case 11:return J0(a,l,l.type,l.pendingProps,d);case 7:return On(a,l,l.pendingProps,d),l.child;case 8:return On(a,l,l.pendingProps.children,d),l.child;case 12:return On(a,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,tr(l,l.type,g.value),On(a,l,g.children,d),l.child;case 9:return v=l.type._context,g=l.pendingProps.children,Da(l),v=$n(v),g=g(v),l.flags|=1,On(a,l,g,d),l.child;case 14:return eT(a,l,l.type,l.pendingProps,d);case 15:return tT(a,l,l.type,l.pendingProps,d);case 19:return cT(a,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},a===null?(d=og(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=go(a.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return nT(a,l,d);case 24:return Da(l),g=$n(wn),a===null?(v=OC(),v===null&&(v=It,y=kC(),v.pooledCache=y,y.refCount++,y!==null&&(v.pooledCacheLanes|=d),v=y),l.memoizedState={parent:g,cache:v},NC(l),tr(l,wn,v)):((a.lanes&d)!==0&&(BC(a,l),rd(l,null,null,d),od()),v=a.memoizedState,y=l.memoizedState,v.parent!==g?(v={parent:g,cache:g},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),tr(l,wn,g)):(g=y.cache,tr(l,wn,g),g!==v.cache&&_C(l,[wn],d,!0))),On(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function bo(a){a.flags|=4}function dT(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!yx(l)){if(l=Wi.current,l!==null&&((at&4194048)===at?Fs!==null:(at&62914560)!==at&&(at&536870912)===0||l!==Fs))throw id=VC,KE;a.flags|=8192}}function rg(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Pu():536870912,a.lanes|=l,lc|=l)}function fd(a,l){if(!ft)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ut(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var v=a.child;v!==null;)d|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)d|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function XV(a,l,d){var g=l.pendingProps;switch(FC(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(l),null;case 1:return Ut(l),null;case 3:return d=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),vo(wn),We(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Qu(l)?bo(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,UE())),Ut(l),null;case 26:return d=l.memoizedState,a===null?(bo(l),d!==null?(Ut(l),dT(l,d)):(Ut(l),l.flags&=-16777217)):d?d!==a.memoizedState?(bo(l),Ut(l),dT(l,d)):(Ut(l),l.flags&=-16777217):(a.memoizedProps!==g&&bo(l),Ut(l),l.flags&=-16777217),null;case 27:gt(l),d=xe.current;var v=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==g&&bo(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return Ut(l),null}a=me.current,Qu(l)?HE(l):(a=dx(v,g,d),l.stateNode=a,bo(l))}return Ut(l),null;case 5:if(gt(l),d=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&bo(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return Ut(l),null}if(a=me.current,Qu(l))HE(l);else{switch(v=yg(xe.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?v.createElement(d,{is:g.is}):v.createElement(d)}}a[Cn]=l,a[ln]=g;e:for(v=l.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break e;for(;v.sibling===null;){if(v.return===null||v.return===l)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}l.stateNode=a;e:switch(Nn(a,d,g),d){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&bo(l)}}return Ut(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&bo(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(i(166));if(a=xe.current,Qu(l)){if(a=l.stateNode,d=l.memoizedProps,g=null,v=ii,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}a[Cn]=l,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||sx(a.nodeValue,d)),a||Ta(l)}else a=yg(a).createTextNode(g),a[Cn]=l,l.stateNode=a}return Ut(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Qu(l),g!==null&&g.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Cn]=l}else Xu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ut(l),v=!1}else v=UE(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(wo(l),l):(wo(l),null)}if(wo(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,a=a!==null&&a.memoizedState!==null,d){g=l.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var y=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(y=g.memoizedState.cachePool.pool),y!==v&&(g.flags|=2048)}return d!==a&&d&&(l.child.flags|=8192),rg(l,l.updateQueue),Ut(l),null;case 4:return We(),a===null&&Hv(l.stateNode.containerInfo),Ut(l),null;case 10:return vo(l.type),Ut(l),null;case 19:if(le(Sn),v=l.memoizedState,v===null)return Ut(l),null;if(g=(l.flags&128)!==0,y=v.rendering,y===null)if(g)fd(v,!1);else{if(Qt!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(y=tg(a),y!==null){for(l.flags|=128,fd(v,!1),a=y.updateQueue,l.updateQueue=a,rg(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)BE(d,a),d=d.sibling;return te(Sn,Sn.current&1|2),l.child}a=a.sibling}v.tail!==null&&ht()>cg&&(l.flags|=128,g=!0,fd(v,!1),l.lanes=4194304)}else{if(!g)if(a=tg(y),a!==null){if(l.flags|=128,g=!0,a=a.updateQueue,l.updateQueue=a,rg(l,a),fd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!y.alternate&&!ft)return Ut(l),null}else 2*ht()-v.renderingStartTime>cg&&d!==536870912&&(l.flags|=128,g=!0,fd(v,!1),l.lanes=4194304);v.isBackwards?(y.sibling=l.child,l.child=y):(a=v.last,a!==null?a.sibling=y:l.child=y,v.last=y)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=ht(),l.sibling=null,a=Sn.current,te(Sn,g?a&1|2:a&1),l):(Ut(l),null);case 22:case 23:return wo(l),UC(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(Ut(l),l.subtreeFlags&6&&(l.flags|=8192)):Ut(l),d=l.updateQueue,d!==null&&rg(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),a!==null&&le(Aa),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),vo(wn),Ut(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function ZV(a,l){switch(FC(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return vo(wn),We(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return gt(l),null;case 13:if(wo(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Xu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return le(Sn),null;case 4:return We(),null;case 10:return vo(l.type),null;case 22:case 23:return wo(l),UC(),a!==null&&le(Aa),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return vo(wn),null;case 25:return null;default:return null}}function hT(a,l){switch(FC(l),l.tag){case 3:vo(wn),We();break;case 26:case 27:case 5:gt(l);break;case 4:We();break;case 13:wo(l);break;case 19:le(Sn);break;case 10:vo(l.type);break;case 22:case 23:wo(l),UC(),a!==null&&le(Aa);break;case 24:vo(wn)}}function gd(a,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&a)===a){g=void 0;var y=d.create,A=d.inst;g=y(),A.destroy=g}d=d.next}while(d!==v)}}catch(L){Pt(l,l.return,L)}}function lr(a,l,d){try{var g=l.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var y=v.next;g=y;do{if((g.tag&a)===a){var A=g.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,v=l;var j=d,X=L;try{X()}catch(ce){Pt(v,j,ce)}}}g=g.next}while(g!==y)}}catch(ce){Pt(l,l.return,ce)}}function fT(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{e0(l,d)}catch(g){Pt(a,a.return,g)}}}function gT(a,l,d){d.props=Pa(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){Pt(a,l,g)}}function pd(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(v){Pt(a,l,v)}}function Ps(a,l){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(v){Pt(a,l,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Pt(a,l,v)}else d.current=null}function pT(a){var l=a.type,d=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(v){Pt(a,a.return,v)}}function Cv(a,l,d){try{var g=a.stateNode;yN(g,a.type,d,l),g[ln]=l}catch(v){Pt(a,a.return,v)}}function mT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&mr(a.type)||a.tag===4}function vv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||mT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&mr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function yv(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=vg));else if(g!==4&&(g===27&&mr(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(yv(a,l,d),a=a.sibling;a!==null;)yv(a,l,d),a=a.sibling}function ag(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(g===27&&mr(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(ag(a,l,d),a=a.sibling;a!==null;)ag(a,l,d),a=a.sibling}function CT(a){var l=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);Nn(l,g,d),l[Cn]=a,l[ln]=d}catch(y){Pt(a,a.return,y)}}var Ro=!1,tn=!1,wv=!1,vT=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function JV(a,l){if(a=a.containerInfo,Wv=Tg,a=FE(a),vC(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var v=g.anchorOffset,y=g.focusNode;g=g.focusOffset;try{d.nodeType,y.nodeType}catch{d=null;break e}var A=0,L=-1,j=-1,X=0,ce=0,he=a,ee=null;t:for(;;){for(var ne;he!==d||v!==0&&he.nodeType!==3||(L=A+v),he!==y||g!==0&&he.nodeType!==3||(j=A+g),he.nodeType===3&&(A+=he.nodeValue.length),(ne=he.firstChild)!==null;)ee=he,he=ne;for(;;){if(he===a)break t;if(ee===d&&++X===v&&(L=A),ee===y&&++ce===g&&(j=A),(ne=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ne}d=L===-1||j===-1?null:{start:L,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for(jv={focusedElem:a,selectionRange:d},Tg=!1,Fn=l;Fn!==null;)if(l=Fn,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,Fn=a;else for(;Fn!==null;){switch(l=Fn,y=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,d=l,v=y.memoizedProps,y=y.memoizedState,g=d.stateNode;try{var Be=Pa(d.type,v,d.elementType===d.type);a=g.getSnapshotBeforeUpdate(Be,y),g.__reactInternalSnapshotBeforeUpdate=a}catch(Le){Pt(d,d.return,Le)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)Kv(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Kv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=l.sibling,a!==null){a.return=l.return,Fn=a;break}Fn=l.return}}function yT(a,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:cr(a,d),g&4&&gd(5,d);break;case 1:if(cr(a,d),g&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(A){Pt(d,d.return,A)}else{var v=Pa(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(v,l,a.__reactInternalSnapshotBeforeUpdate)}catch(A){Pt(d,d.return,A)}}g&64&&fT(d),g&512&&pd(d,d.return);break;case 3:if(cr(a,d),g&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{e0(a,l)}catch(A){Pt(d,d.return,A)}}break;case 27:l===null&&g&4&&CT(d);case 26:case 5:cr(a,d),l===null&&g&4&&pT(d),g&512&&pd(d,d.return);break;case 12:cr(a,d);break;case 13:cr(a,d),g&4&&bT(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=lN.bind(null,d),xN(a,d))));break;case 22:if(g=d.memoizedState!==null||Ro,!g){l=l!==null&&l.memoizedState!==null||tn,v=Ro;var y=tn;Ro=g,(tn=l)&&!y?ur(a,d,(d.subtreeFlags&8772)!==0):cr(a,d),Ro=v,tn=y}break;case 30:break;default:cr(a,d)}}function wT(a){var l=a.alternate;l!==null&&(a.alternate=null,wT(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Xo(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Gt=null,di=!1;function Eo(a,l,d){for(d=d.child;d!==null;)ST(a,l,d),d=d.sibling}function ST(a,l,d){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(_e,d)}catch{}switch(d.tag){case 26:tn||Ps(d,l),Eo(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:tn||Ps(d,l);var g=Gt,v=di;mr(d.type)&&(Gt=d.stateNode,di=!1),Eo(a,l,d),Ed(d.stateNode),Gt=g,di=v;break;case 5:tn||Ps(d,l);case 6:if(g=Gt,v=di,Gt=null,Eo(a,l,d),Gt=g,di=v,Gt!==null)if(di)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(d.stateNode)}catch(y){Pt(d,l,y)}else try{Gt.removeChild(d.stateNode)}catch(y){Pt(d,l,y)}break;case 18:Gt!==null&&(di?(a=Gt,cx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Id(a)):cx(Gt,d.stateNode));break;case 4:g=Gt,v=di,Gt=d.stateNode.containerInfo,di=!0,Eo(a,l,d),Gt=g,di=v;break;case 0:case 11:case 14:case 15:tn||lr(2,d,l),tn||lr(4,d,l),Eo(a,l,d);break;case 1:tn||(Ps(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&gT(d,l,g)),Eo(a,l,d);break;case 21:Eo(a,l,d);break;case 22:tn=(g=tn)||d.memoizedState!==null,Eo(a,l,d),tn=g;break;default:Eo(a,l,d)}}function bT(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Id(a)}catch(d){Pt(l,l.return,d)}}function eN(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new vT),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new vT),l;default:throw Error(i(435,a.tag))}}function Sv(a,l){var d=eN(a);l.forEach(function(g){var v=cN.bind(null,a,g);d.has(g)||(d.add(g),g.then(v,v))})}function Ei(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var v=d[g],y=a,A=l,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(mr(L.type)){Gt=L.stateNode,di=!1;break e}break;case 5:Gt=L.stateNode,di=!1;break e;case 3:case 4:Gt=L.stateNode.containerInfo,di=!0;break e}L=L.return}if(Gt===null)throw Error(i(160));ST(y,A,v),Gt=null,di=!1,y=v.alternate,y!==null&&(y.return=null),v.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)RT(l,a),l=l.sibling}var cs=null;function RT(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ei(l,a),Ti(a),g&4&&(lr(3,a,a.return),gd(3,a),lr(5,a,a.return));break;case 1:Ei(l,a),Ti(a),g&512&&(tn||d===null||Ps(d,d.return)),g&64&&Ro&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var v=cs;if(Ei(l,a),Ti(a),g&512&&(tn||d===null||Ps(d,d.return)),g&4){var y=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){e:{g=a.type,d=a.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":y=v.getElementsByTagName("title")[0],(!y||y[oa]||y[Cn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=v.createElement(g),v.head.insertBefore(y,v.querySelector("head > title"))),Nn(y,g,d),y[Cn]=a,Jt(y),g=y;break e;case"link":var A=Cx("link","href",v).get(g+(d.href||""));if(A){for(var L=0;L<A.length;L++)if(y=A[L],y.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&y.getAttribute("rel")===(d.rel==null?null:d.rel)&&y.getAttribute("title")===(d.title==null?null:d.title)&&y.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){A.splice(L,1);break t}}y=v.createElement(g),Nn(y,g,d),v.head.appendChild(y);break;case"meta":if(A=Cx("meta","content",v).get(g+(d.content||""))){for(L=0;L<A.length;L++)if(y=A[L],y.getAttribute("content")===(d.content==null?null:""+d.content)&&y.getAttribute("name")===(d.name==null?null:d.name)&&y.getAttribute("property")===(d.property==null?null:d.property)&&y.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&y.getAttribute("charset")===(d.charSet==null?null:d.charSet)){A.splice(L,1);break t}}y=v.createElement(g),Nn(y,g,d),v.head.appendChild(y);break;default:throw Error(i(468,g))}y[Cn]=a,Jt(y),g=y}a.stateNode=g}else vx(v,a.type,a.stateNode);else a.stateNode=mx(v,g,a.memoizedProps);else y!==g?(y===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):y.count--,g===null?vx(v,a.type,a.stateNode):mx(v,g,a.memoizedProps)):g===null&&a.stateNode!==null&&Cv(a,a.memoizedProps,d.memoizedProps)}break;case 27:Ei(l,a),Ti(a),g&512&&(tn||d===null||Ps(d,d.return)),d!==null&&g&4&&Cv(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Ei(l,a),Ti(a),g&512&&(tn||d===null||Ps(d,d.return)),a.flags&32){v=a.stateNode;try{Oi(v,"")}catch(ne){Pt(a,a.return,ne)}}g&4&&a.stateNode!=null&&(v=a.memoizedProps,Cv(a,v,d!==null?d.memoizedProps:v)),g&1024&&(wv=!0);break;case 6:if(Ei(l,a),Ti(a),g&4){if(a.stateNode===null)throw Error(i(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(ne){Pt(a,a.return,ne)}}break;case 3:if(bg=null,v=cs,cs=wg(l.containerInfo),Ei(l,a),cs=v,Ti(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Id(l.containerInfo)}catch(ne){Pt(a,a.return,ne)}wv&&(wv=!1,ET(a));break;case 4:g=cs,cs=wg(a.stateNode.containerInfo),Ei(l,a),Ti(a),cs=g;break;case 12:Ei(l,a),Ti(a);break;case 13:Ei(l,a),Ti(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Dv=ht()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Sv(a,g)));break;case 22:v=a.memoizedState!==null;var j=d!==null&&d.memoizedState!==null,X=Ro,ce=tn;if(Ro=X||v,tn=ce||j,Ei(l,a),tn=ce,Ro=X,Ti(a),g&8192)e:for(l=a.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(d===null||j||Ro||tn||Ma(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){j=d=l;try{if(y=j.stateNode,v)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=j.stateNode;var he=j.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;L.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ne){Pt(j,j.return,ne)}}}else if(l.tag===6){if(d===null){j=l;try{j.stateNode.nodeValue=v?"":j.memoizedProps}catch(ne){Pt(j,j.return,ne)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Sv(a,d))));break;case 19:Ei(l,a),Ti(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Sv(a,g)));break;case 30:break;case 21:break;default:Ei(l,a),Ti(a)}}function Ti(a){var l=a.flags;if(l&2){try{for(var d,g=a.return;g!==null;){if(mT(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var v=d.stateNode,y=vv(a);ag(a,y,v);break;case 5:var A=d.stateNode;d.flags&32&&(Oi(A,""),d.flags&=-33);var L=vv(a);ag(a,L,A);break;case 3:case 4:var j=d.stateNode.containerInfo,X=vv(a);yv(a,X,j);break;default:throw Error(i(161))}}catch(ce){Pt(a,a.return,ce)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function ET(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;ET(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function cr(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)yT(a,l.alternate,l),l=l.sibling}function Ma(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:lr(4,l,l.return),Ma(l);break;case 1:Ps(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&gT(l,l.return,d),Ma(l);break;case 27:Ed(l.stateNode);case 26:case 5:Ps(l,l.return),Ma(l);break;case 22:l.memoizedState===null&&Ma(l);break;case 30:Ma(l);break;default:Ma(l)}a=a.sibling}}function ur(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,v=a,y=l,A=y.flags;switch(y.tag){case 0:case 11:case 15:ur(v,y,d),gd(4,y);break;case 1:if(ur(v,y,d),g=y,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(X){Pt(g,g.return,X)}if(g=y,v=g.updateQueue,v!==null){var L=g.stateNode;try{var j=v.shared.hiddenCallbacks;if(j!==null)for(v.shared.hiddenCallbacks=null,v=0;v<j.length;v++)JE(j[v],L)}catch(X){Pt(g,g.return,X)}}d&&A&64&&fT(y),pd(y,y.return);break;case 27:CT(y);case 26:case 5:ur(v,y,d),d&&g===null&&A&4&&pT(y),pd(y,y.return);break;case 12:ur(v,y,d);break;case 13:ur(v,y,d),d&&A&4&&bT(v,y);break;case 22:y.memoizedState===null&&ur(v,y,d),pd(y,y.return);break;case 30:break;default:ur(v,y,d)}l=l.sibling}}function bv(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&ed(d))}function Rv(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&ed(a))}function Ms(a,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)TT(a,l,d,g),l=l.sibling}function TT(a,l,d,g){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Ms(a,l,d,g),v&2048&&gd(9,l);break;case 1:Ms(a,l,d,g);break;case 3:Ms(a,l,d,g),v&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&ed(a)));break;case 12:if(v&2048){Ms(a,l,d,g),a=l.stateNode;try{var y=l.memoizedProps,A=y.id,L=y.onPostCommit;typeof L=="function"&&L(A,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(j){Pt(l,l.return,j)}}else Ms(a,l,d,g);break;case 13:Ms(a,l,d,g);break;case 23:break;case 22:y=l.stateNode,A=l.alternate,l.memoizedState!==null?y._visibility&2?Ms(a,l,d,g):md(a,l):y._visibility&2?Ms(a,l,d,g):(y._visibility|=2,oc(a,l,d,g,(l.subtreeFlags&10256)!==0)),v&2048&&bv(A,l);break;case 24:Ms(a,l,d,g),v&2048&&Rv(l.alternate,l);break;default:Ms(a,l,d,g)}}function oc(a,l,d,g,v){for(v=v&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=a,A=l,L=d,j=g,X=A.flags;switch(A.tag){case 0:case 11:case 15:oc(y,A,L,j,v),gd(8,A);break;case 23:break;case 22:var ce=A.stateNode;A.memoizedState!==null?ce._visibility&2?oc(y,A,L,j,v):md(y,A):(ce._visibility|=2,oc(y,A,L,j,v)),v&&X&2048&&bv(A.alternate,A);break;case 24:oc(y,A,L,j,v),v&&X&2048&&Rv(A.alternate,A);break;default:oc(y,A,L,j,v)}l=l.sibling}}function md(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,g=l,v=g.flags;switch(g.tag){case 22:md(d,g),v&2048&&bv(g.alternate,g);break;case 24:md(d,g),v&2048&&Rv(g.alternate,g);break;default:md(d,g)}l=l.sibling}}var Cd=8192;function rc(a){if(a.subtreeFlags&Cd)for(a=a.child;a!==null;)xT(a),a=a.sibling}function xT(a){switch(a.tag){case 26:rc(a),a.flags&Cd&&a.memoizedState!==null&&BN(cs,a.memoizedState,a.memoizedProps);break;case 5:rc(a);break;case 3:case 4:var l=cs;cs=wg(a.stateNode.containerInfo),rc(a),cs=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Cd,Cd=16777216,rc(a),Cd=l):rc(a));break;default:rc(a)}}function DT(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function vd(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Fn=g,FT(g,a)}DT(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)AT(a),a=a.sibling}function AT(a){switch(a.tag){case 0:case 11:case 15:vd(a),a.flags&2048&&lr(9,a,a.return);break;case 3:vd(a);break;case 12:vd(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,lg(a)):vd(a);break;default:vd(a)}}function lg(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Fn=g,FT(g,a)}DT(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:lr(8,l,l.return),lg(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,lg(l));break;default:lg(l)}a=a.sibling}}function FT(a,l){for(;Fn!==null;){var d=Fn;switch(d.tag){case 0:case 11:case 15:lr(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:ed(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Fn=g;else e:for(d=a;Fn!==null;){g=Fn;var v=g.sibling,y=g.return;if(wT(g),g===d){Fn=null;break e}if(v!==null){v.return=y,Fn=v;break e}Fn=y}}}var tN={getCacheForType:function(a){var l=$n(wn),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d}},nN=typeof WeakMap=="function"?WeakMap:Map,wt=0,It=null,Ze=null,at=0,St=0,xi=null,dr=!1,ac=!1,Ev=!1,To=0,Qt=0,hr=0,Ia=0,Tv=0,ji=0,lc=0,yd=null,hi=null,xv=!1,Dv=0,cg=1/0,ug=null,fr=null,Vn=0,gr=null,cc=null,uc=0,Av=0,Fv=null,PT=null,wd=0,Pv=null;function Di(){if((wt&2)!==0&&at!==0)return at&-at;if(q.T!==null){var a=Xl;return a!==0?a:Vv()}return Yo()}function MT(){ji===0&&(ji=(at&536870912)===0||ft?Fu():536870912);var a=Wi.current;return a!==null&&(a.flags|=32),ji}function Ai(a,l,d){(a===It&&(St===2||St===9)||a.cancelPendingCommit!==null)&&(dc(a,0),pr(a,at,ji,!1)),no(a,d),((wt&2)===0||a!==It)&&(a===It&&((wt&2)===0&&(Ia|=d),Qt===4&&pr(a,at,ji,!1)),Is(a))}function IT(a,l,d){if((wt&6)!==0)throw Error(i(327));var g=!d&&(l&124)===0&&(l&a.expiredLanes)===0||sa(a,l),v=g?oN(a,l):_v(a,l,!0),y=g;do{if(v===0){ac&&!g&&pr(a,l,0,!1);break}else{if(d=a.current.alternate,y&&!iN(d)){v=_v(a,l,!1),y=!1;continue}if(v===2){if(y=l,a.errorRecoveryDisabledLanes&y)var A=0;else A=a.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var L=a;v=yd;var j=L.current.memoizedState.isDehydrated;if(j&&(dc(L,A).flags|=256),A=_v(L,A,!1),A!==2){if(Ev&&!j){L.errorRecoveryDisabledLanes|=y,Ia|=y,v=4;break e}y=hi,hi=v,y!==null&&(hi===null?hi=y:hi.push.apply(hi,y))}v=A}if(y=!1,v!==2)continue}}if(v===1){dc(a,0),pr(a,l,0,!0);break}e:{switch(g=a,y=v,y){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:pr(g,l,ji,!dr);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(v=Dv+300-ht(),10<v)){if(pr(g,l,ji,!dr),Al(g,0,!0)!==0)break e;g.timeoutHandle=ax(_T.bind(null,g,d,hi,ug,xv,l,ji,Ia,lc,dr,y,2,-0,0),v);break e}_T(g,d,hi,ug,xv,l,ji,Ia,lc,dr,y,0,-0,0)}}break}while(!0);Is(a)}function _T(a,l,d,g,v,y,A,L,j,X,ce,he,ee,ne){if(a.timeoutHandle=-1,he=l.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Dd={stylesheets:null,count:0,unsuspend:NN},xT(l),he=GN(),he!==null)){a.cancelPendingCommit=he(GT.bind(null,a,l,y,d,g,v,A,L,j,ce,1,ee,ne)),pr(a,y,A,!X);return}GT(a,l,y,d,g,v,A,L,j)}function iN(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var v=d[g],y=v.getSnapshot;v=v.value;try{if(!bi(y(),v))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function pr(a,l,d,g){l&=~Tv,l&=~Ia,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var v=l;0<v;){var y=31-pt(v),A=1<<y;g[y]=-1,v&=~A}d!==0&&Cs(a,d,l)}function dg(){return(wt&6)===0?(Sd(0),!1):!0}function Mv(){if(Ze!==null){if(St===0)var a=Ze.return;else a=Ze,Co=xa=null,KC(a),ic=null,dd=0,a=Ze;for(;a!==null;)hT(a.alternate,a),a=a.return;Ze=null}}function dc(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,SN(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),Mv(),It=a,Ze=d=go(a.current,null),at=l,St=0,xi=null,dr=!1,ac=sa(a,l),Ev=!1,lc=ji=Tv=Ia=hr=Qt=0,hi=yd=null,xv=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var v=31-pt(g),y=1<<v;l|=a[v],g&=~y}return To=l,_f(),d}function kT(a,l){Ye=null,q.H=Zf,l===nd||l===zf?(l=XE(),St=3):l===KE?(l=XE(),St=4):St=l===Z0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,xi=l,Ze===null&&(Qt=1,ig(a,Gi(l,a.current)))}function LT(){var a=q.H;return q.H=Zf,a===null?Zf:a}function OT(){var a=q.A;return q.A=tN,a}function Iv(){Qt=4,dr||(at&4194048)!==at&&Wi.current!==null||(ac=!0),(hr&134217727)===0&&(Ia&134217727)===0||It===null||pr(It,at,ji,!1)}function _v(a,l,d){var g=wt;wt|=2;var v=LT(),y=OT();(It!==a||at!==l)&&(ug=null,dc(a,l)),l=!1;var A=Qt;e:do try{if(St!==0&&Ze!==null){var L=Ze,j=xi;switch(St){case 8:Mv(),A=6;break e;case 3:case 2:case 9:case 6:Wi.current===null&&(l=!0);var X=St;if(St=0,xi=null,hc(a,L,j,X),d&&ac){A=0;break e}break;default:X=St,St=0,xi=null,hc(a,L,j,X)}}sN(),A=Qt;break}catch(ce){kT(a,ce)}while(!0);return l&&a.shellSuspendCounter++,Co=xa=null,wt=g,q.H=v,q.A=y,Ze===null&&(It=null,at=0,_f()),A}function sN(){for(;Ze!==null;)VT(Ze)}function oN(a,l){var d=wt;wt|=2;var g=LT(),v=OT();It!==a||at!==l?(ug=null,cg=ht()+500,dc(a,l)):ac=sa(a,l);e:do try{if(St!==0&&Ze!==null){l=Ze;var y=xi;t:switch(St){case 1:St=0,xi=null,hc(a,l,y,1);break;case 2:case 9:if(YE(y)){St=0,xi=null,NT(l);break}l=function(){St!==2&&St!==9||It!==a||(St=7),Is(a)},y.then(l,l);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:YE(y)?(St=0,xi=null,NT(l)):(St=0,xi=null,hc(a,l,y,7));break;case 5:var A=null;switch(Ze.tag){case 26:A=Ze.memoizedState;case 5:case 27:var L=Ze;if(!A||yx(A)){St=0,xi=null;var j=L.sibling;if(j!==null)Ze=j;else{var X=L.return;X!==null?(Ze=X,hg(X)):Ze=null}break t}}St=0,xi=null,hc(a,l,y,5);break;case 6:St=0,xi=null,hc(a,l,y,6);break;case 8:Mv(),Qt=6;break e;default:throw Error(i(462))}}rN();break}catch(ce){kT(a,ce)}while(!0);return Co=xa=null,q.H=g,q.A=v,wt=d,Ze!==null?0:(It=null,at=0,_f(),Qt)}function rN(){for(;Ze!==null&&!Ie();)VT(Ze)}function VT(a){var l=uT(a.alternate,a,To);a.memoizedProps=a.pendingProps,l===null?hg(a):Ze=l}function NT(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=sT(d,l,l.pendingProps,l.type,void 0,at);break;case 11:l=sT(d,l,l.pendingProps,l.type.render,l.ref,at);break;case 5:KC(l);default:hT(d,l),l=Ze=BE(l,To),l=uT(d,l,To)}a.memoizedProps=a.pendingProps,l===null?hg(a):Ze=l}function hc(a,l,d,g){Co=xa=null,KC(l),ic=null,dd=0;var v=l.return;try{if(YV(a,v,l,d,at)){Qt=1,ig(a,Gi(d,a.current)),Ze=null;return}}catch(y){if(v!==null)throw Ze=v,y;Qt=1,ig(a,Gi(d,a.current)),Ze=null;return}l.flags&32768?(ft||g===1?a=!0:ac||(at&536870912)!==0?a=!1:(dr=a=!0,(g===2||g===9||g===3||g===6)&&(g=Wi.current,g!==null&&g.tag===13&&(g.flags|=16384))),BT(l,a)):hg(l)}function hg(a){var l=a;do{if((l.flags&32768)!==0){BT(l,dr);return}a=l.return;var d=XV(l.alternate,l,To);if(d!==null){Ze=d;return}if(l=l.sibling,l!==null){Ze=l;return}Ze=l=a}while(l!==null);Qt===0&&(Qt=5)}function BT(a,l){do{var d=ZV(a.alternate,a);if(d!==null){d.flags&=32767,Ze=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){Ze=a;return}Ze=a=d}while(a!==null);Qt=6,Ze=null}function GT(a,l,d,g,v,y,A,L,j){a.cancelPendingCommit=null;do fg();while(Vn!==0);if((wt&6)!==0)throw Error(i(327));if(l!==null){if(l===a.current)throw Error(i(177));if(y=l.lanes|l.childLanes,y|=RC,Mu(a,d,y,A,L,j),a===It&&(Ze=It=null,at=0),cc=l,gr=a,uc=d,Av=y,Fv=v,PT=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,uN(Mt,function(){return jT(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=q.T,q.T=null,v=ie.p,ie.p=2,A=wt,wt|=4;try{JV(a,l,d)}finally{wt=A,ie.p=v,q.T=g}}Vn=1,HT(),zT(),UT()}}function HT(){if(Vn===1){Vn=0;var a=gr,l=cc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=q.T,q.T=null;var g=ie.p;ie.p=2;var v=wt;wt|=4;try{RT(l,a);var y=jv,A=FE(a.containerInfo),L=y.focusedElem,j=y.selectionRange;if(A!==L&&L&&L.ownerDocument&&AE(L.ownerDocument.documentElement,L)){if(j!==null&&vC(L)){var X=j.start,ce=j.end;if(ce===void 0&&(ce=X),"selectionStart"in L)L.selectionStart=X,L.selectionEnd=Math.min(ce,L.value.length);else{var he=L.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Be=L.textContent.length,Le=Math.min(j.start,Be),At=j.end===void 0?Le:Math.min(j.end,Be);!ne.extend&&Le>At&&(A=At,At=Le,Le=A);var K=DE(L,Le),$=DE(L,At);if(K&&$&&(ne.rangeCount!==1||ne.anchorNode!==K.node||ne.anchorOffset!==K.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var Q=he.createRange();Q.setStart(K.node,K.offset),ne.removeAllRanges(),Le>At?(ne.addRange(Q),ne.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),ne.addRange(Q))}}}}for(he=[],ne=L;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<he.length;L++){var ue=he[L];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Tg=!!Wv,jv=Wv=null}finally{wt=v,ie.p=g,q.T=d}}a.current=l,Vn=2}}function zT(){if(Vn===2){Vn=0;var a=gr,l=cc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=q.T,q.T=null;var g=ie.p;ie.p=2;var v=wt;wt|=4;try{yT(a,l.alternate,l)}finally{wt=v,ie.p=g,q.T=d}}Vn=3}}function UT(){if(Vn===4||Vn===3){Vn=0,ut();var a=gr,l=cc,d=uc,g=PT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Vn=5:(Vn=0,cc=gr=null,WT(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(fr=null),Fl(d),l=l.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(_e,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=q.T,v=ie.p,ie.p=2,q.T=null;try{for(var y=a.onRecoverableError,A=0;A<g.length;A++){var L=g[A];y(L.value,{componentStack:L.stack})}}finally{q.T=l,ie.p=v}}(uc&3)!==0&&fg(),Is(a),v=a.pendingLanes,(d&4194090)!==0&&(v&42)!==0?a===Pv?wd++:(wd=0,Pv=a):wd=0,Sd(0)}}function WT(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,ed(l)))}function fg(a){return HT(),zT(),UT(),jT()}function jT(){if(Vn!==5)return!1;var a=gr,l=Av;Av=0;var d=Fl(uc),g=q.T,v=ie.p;try{ie.p=32>d?32:d,q.T=null,d=Fv,Fv=null;var y=gr,A=uc;if(Vn=0,cc=gr=null,uc=0,(wt&6)!==0)throw Error(i(331));var L=wt;if(wt|=4,AT(y.current),TT(y,y.current,A,d),wt=L,Sd(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(_e,y)}catch{}return!0}finally{ie.p=v,q.T=g,WT(a,l)}}function $T(a,l,d){l=Gi(d,l),l=lv(a.stateNode,l,2),a=sr(a,l,2),a!==null&&(no(a,2),Is(a))}function Pt(a,l,d){if(a.tag===3)$T(a,a,d);else for(;l!==null;){if(l.tag===3){$T(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(fr===null||!fr.has(g))){a=Gi(d,a),d=Q0(2),g=sr(l,d,2),g!==null&&(X0(d,g,l,a),no(g,2),Is(g));break}}l=l.return}}function kv(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new nN;var v=new Set;g.set(l,v)}else v=g.get(l),v===void 0&&(v=new Set,g.set(l,v));v.has(d)||(Ev=!0,v.add(d),a=aN.bind(null,a,l,d),l.then(a,a))}function aN(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,It===a&&(at&d)===d&&(Qt===4||Qt===3&&(at&62914560)===at&&300>ht()-Dv?(wt&2)===0&&dc(a,0):Tv|=d,lc===at&&(lc=0)),Is(a)}function qT(a,l){l===0&&(l=Pu()),a=ql(a,l),a!==null&&(no(a,l),Is(a))}function lN(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),qT(a,d)}function cN(a,l){var d=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(d=v.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(l),qT(a,d)}function uN(a,l){return Zt(a,l)}var gg=null,fc=null,Lv=!1,pg=!1,Ov=!1,_a=0;function Is(a){a!==fc&&a.next===null&&(fc===null?gg=fc=a:fc=fc.next=a),pg=!0,Lv||(Lv=!0,hN())}function Sd(a,l){if(!Ov&&pg){Ov=!0;do for(var d=!1,g=gg;g!==null;){if(a!==0){var v=g.pendingLanes;if(v===0)var y=0;else{var A=g.suspendedLanes,L=g.pingedLanes;y=(1<<31-pt(42|a)+1)-1,y&=v&~(A&~L),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(d=!0,XT(g,y))}else y=at,y=Al(g,g===It?y:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(y&3)===0||sa(g,y)||(d=!0,XT(g,y));g=g.next}while(d);Ov=!1}}function dN(){KT()}function KT(){pg=Lv=!1;var a=0;_a!==0&&(wN()&&(a=_a),_a=0);for(var l=ht(),d=null,g=gg;g!==null;){var v=g.next,y=YT(g,l);y===0?(g.next=null,d===null?gg=v:d.next=v,v===null&&(fc=d)):(d=g,(a!==0||(y&3)!==0)&&(pg=!0)),g=v}Sd(a)}function YT(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,v=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var A=31-pt(y),L=1<<A,j=v[A];j===-1?((L&d)===0||(L&g)!==0)&&(v[A]=Au(L,l)):j<=l&&(a.expiredLanes|=L),y&=~L}if(l=It,d=at,d=Al(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===l&&(St===2||St===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||sa(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(g!==null&&Fe(g),Fl(d)){case 2:case 8:d=Lt;break;case 32:d=Mt;break;case 268435456:d=Tn;break;default:d=Mt}return g=QT.bind(null,a),d=Zt(d,g),a.callbackPriority=l,a.callbackNode=d,l}return g!==null&&g!==null&&Fe(g),a.callbackPriority=2,a.callbackNode=null,2}function QT(a,l){if(Vn!==0&&Vn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(fg()&&a.callbackNode!==d)return null;var g=at;return g=Al(a,a===It?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(IT(a,g,l),YT(a,ht()),a.callbackNode!=null&&a.callbackNode===d?QT.bind(null,a):null)}function XT(a,l){if(fg())return null;IT(a,l,!0)}function hN(){bN(function(){(wt&6)!==0?Zt(Et,dN):KT()})}function Vv(){return _a===0&&(_a=Fu()),_a}function ZT(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ll(""+a)}function JT(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function fN(a,l,d,g,v){if(l==="submit"&&d&&d.stateNode===v){var y=ZT((v[ln]||null).action),A=g.submitter;A&&(l=(l=A[ln]||null)?ZT(l.formAction):A.getAttribute("formAction"),l!==null&&(y=l,A=null));var L=new Ol("action","action",null,g,v);a.push({event:L,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(_a!==0){var j=A?JT(v,A):new FormData(v);iv(d,{pending:!0,data:j,method:v.method,action:y},null,j)}}else typeof y=="function"&&(L.preventDefault(),j=A?JT(v,A):new FormData(v),iv(d,{pending:!0,data:j,method:v.method,action:y},y,j))},currentTarget:v}]})}}for(var Nv=0;Nv<bC.length;Nv++){var Bv=bC[Nv],gN=Bv.toLowerCase(),pN=Bv[0].toUpperCase()+Bv.slice(1);ls(gN,"on"+pN)}ls(IE,"onAnimationEnd"),ls(_E,"onAnimationIteration"),ls(kE,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(IV,"onTransitionRun"),ls(_V,"onTransitionStart"),ls(kV,"onTransitionCancel"),ls(LE,"onTransitionEnd"),so("onMouseEnter",["mouseout","mouseover"]),so("onMouseLeave",["mouseout","mouseover"]),so("onPointerEnter",["pointerout","pointerover"]),so("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bd));function ex(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],v=g.event;g=g.listeners;e:{var y=void 0;if(l)for(var A=g.length-1;0<=A;A--){var L=g[A],j=L.instance,X=L.currentTarget;if(L=L.listener,j!==y&&v.isPropagationStopped())break e;y=L,v.currentTarget=X;try{y(v)}catch(ce){ng(ce)}v.currentTarget=null,y=j}else for(A=0;A<g.length;A++){if(L=g[A],j=L.instance,X=L.currentTarget,L=L.listener,j!==y&&v.isPropagationStopped())break e;y=L,v.currentTarget=X;try{y(v)}catch(ce){ng(ce)}v.currentTarget=null,y=j}}}}function Je(a,l){var d=l[_u];d===void 0&&(d=l[_u]=new Set);var g=a+"__bubble";d.has(g)||(tx(l,a,2,!1),d.add(g))}function Gv(a,l,d){var g=0;l&&(g|=4),tx(d,a,g,l)}var mg="_reactListening"+Math.random().toString(36).slice(2);function Hv(a){if(!a[mg]){a[mg]=!0,ku.forEach(function(d){d!=="selectionchange"&&(mN.has(d)||Gv(d,!1,a),Gv(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[mg]||(l[mg]=!0,Gv("selectionchange",!1,l))}}function tx(a,l,d,g){switch(Tx(l)){case 2:var v=UN;break;case 8:v=WN;break;default:v=ty}d=v.bind(null,l,d,a),v=void 0,!Ni||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),g?v!==void 0?a.addEventListener(l,d,{capture:!0,passive:v}):a.addEventListener(l,d,!0):v!==void 0?a.addEventListener(l,d,{passive:v}):a.addEventListener(l,d,!1)}function zv(a,l,d,g,v){var y=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var L=g.stateNode.containerInfo;if(L===v)break;if(A===4)for(A=g.return;A!==null;){var j=A.tag;if((j===3||j===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;L!==null;){if(A=io(L),A===null)return;if(j=A.tag,j===5||j===6||j===26||j===27){g=y=A;continue e}L=L.parentNode}}g=g.return}vf(function(){var X=y,ce=Vi(d),he=[];e:{var ee=OE.get(a);if(ee!==void 0){var ne=Ol,Be=a;switch(a){case"keypress":if(Rs(d)===0)break e;case"keydown":case"keyup":ne=zl;break;case"focusin":Be="focus",ne=Bl;break;case"focusout":Be="blur",ne=Bl;break;case"beforeblur":case"afterblur":ne=Bl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=gC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=xf;break;case IE:case _E:case kE:ne=Gl;break;case LE:ne=Af;break;case"scroll":case"scrollend":ne=yf;break;case"wheel":ne=Ul;break;case"copy":case"cut":case"paste":ne=Hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=$u;break;case"toggle":case"beforetoggle":ne=Pf}var Le=(l&4)!==0,At=!Le&&(a==="scroll"||a==="scrollend"),K=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var $=X,Q;$!==null;){var ue=$;if(Q=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Q===null||K===null||(ue=ha($,K),ue!=null&&Le.push(Rd($,ue,Q))),At)break;$=$.return}0<Le.length&&(ee=new ne(ee,Be,null,d,ce),he.push({event:ee,listeners:Le}))}}if((l&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",ee&&d!==ao&&(Be=d.relatedTarget||d.fromElement)&&(io(Be)||Be[Li]))break e;if((ne||ee)&&(ee=ce.window===ce?ce:(ee=ce.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Be=d.relatedTarget||d.toElement,ne=X,Be=Be?io(Be):null,Be!==null&&(At=o(Be),Le=Be.tag,Be!==At||Le!==5&&Le!==27&&Le!==6)&&(Be=null)):(ne=null,Be=X),ne!==Be)){if(Le=Bi,ue="onMouseLeave",K="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Le=$u,ue="onPointerLeave",K="onPointerEnter",$="pointer"),At=ne==null?ee:ys(ne),Q=Be==null?ee:ys(Be),ee=new Le(ue,$+"leave",ne,d,ce),ee.target=At,ee.relatedTarget=Q,ue=null,io(ce)===X&&(Le=new Le(K,$+"enter",Be,d,ce),Le.target=Q,Le.relatedTarget=At,ue=Le),At=ue,ne&&Be)t:{for(Le=ne,K=Be,$=0,Q=Le;Q;Q=gc(Q))$++;for(Q=0,ue=K;ue;ue=gc(ue))Q++;for(;0<$-Q;)Le=gc(Le),$--;for(;0<Q-$;)K=gc(K),Q--;for(;$--;){if(Le===K||K!==null&&Le===K.alternate)break t;Le=gc(Le),K=gc(K)}Le=null}else Le=null;ne!==null&&nx(he,ee,ne,Le,!1),Be!==null&&At!==null&&nx(he,At,Be,Le,!0)}}e:{if(ee=X?ys(X):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var De=SE;else if(yn(ee))if(bE)De=FV;else{De=DV;var Xe=xV}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?X&&Bu(X.elementType)&&(De=SE):De=AV;if(De&&(De=De(a,X))){fo(he,De,d,ce);break e}Xe&&Xe(a,ee,X),a==="focusout"&&X&&ee.type==="number"&&X.memoizedProps.value!=null&&Jo(ee,"number",ee.value)}switch(Xe=X?ys(X):window,a){case"focusin":(yn(Xe)||Xe.contentEditable==="true")&&(Wl=Xe,yC=X,Yu=null);break;case"focusout":Yu=yC=Wl=null;break;case"mousedown":wC=!0;break;case"contextmenu":case"mouseup":case"dragend":wC=!1,PE(he,d,ce);break;case"selectionchange":if(MV)break;case"keydown":case"keyup":PE(he,d,ce)}var Pe;if(xs)e:{switch(a){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ot?ae(a,d)&&(Oe="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Oe="onCompositionStart");Oe&&(T&&d.locale!=="ko"&&(ot||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ot&&(Pe=Hu()):(bs=ce,er="value"in bs?bs.value:bs.textContent,ot=!0)),Xe=Cg(X,Oe),0<Xe.length&&(Oe=new Wu(Oe,a,null,d,ce),he.push({event:Oe,listeners:Xe}),Pe?Oe.data=Pe:(Pe=ye(d),Pe!==null&&(Oe.data=Pe)))),(Pe=b?vn(a,d):rt(a,d))&&(Oe=Cg(X,"onBeforeInput"),0<Oe.length&&(Xe=new Wu("onBeforeInput","beforeinput",null,d,ce),he.push({event:Xe,listeners:Oe}),Xe.data=Pe)),fN(he,a,X,d,ce)}ex(he,l)})}function Rd(a,l,d){return{instance:a,listener:l,currentTarget:d}}function Cg(a,l){for(var d=l+"Capture",g=[];a!==null;){var v=a,y=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||y===null||(v=ha(a,d),v!=null&&g.unshift(Rd(a,v,y)),v=ha(a,l),v!=null&&g.push(Rd(a,v,y))),a.tag===3)return g;a=a.return}return[]}function gc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function nx(a,l,d,g,v){for(var y=l._reactName,A=[];d!==null&&d!==g;){var L=d,j=L.alternate,X=L.stateNode;if(L=L.tag,j!==null&&j===g)break;L!==5&&L!==26&&L!==27||X===null||(j=X,v?(X=ha(d,y),X!=null&&A.unshift(Rd(d,X,j))):v||(X=ha(d,y),X!=null&&A.push(Rd(d,X,j)))),d=d.return}A.length!==0&&a.push({event:l,listeners:A})}var CN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function ix(a){return(typeof a=="string"?a:""+a).replace(CN,`
`).replace(vN,"")}function sx(a,l){return l=ix(l),ix(a)===l}function vg(){}function Dt(a,l,d,g,v,y){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Oi(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Oi(a,""+g);break;case"className":ws(a,"class",g);break;case"tabIndex":ws(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(a,d,g);break;case"style":Nu(a,g,y);break;case"data":if(l!=="object"){ws(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=Ll(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(d==="formAction"?(l!=="input"&&Dt(a,l,"name",v.name,v,null),Dt(a,l,"formEncType",v.formEncType,v,null),Dt(a,l,"formMethod",v.formMethod,v,null),Dt(a,l,"formTarget",v.formTarget,v,null)):(Dt(a,l,"encType",v.encType,v,null),Dt(a,l,"method",v.method,v,null),Dt(a,l,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=Ll(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=vg);break;case"onScroll":g!=null&&Je("scroll",a);break;case"onScrollEnd":g!=null&&Je("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=Ll(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":Je("beforetoggle",a),Je("toggle",a),Zo(a,"popover",g);break;case"xlinkActuate":kn(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":kn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":kn(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":kn(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":kn(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":kn(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":kn(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":kn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":kn(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Zo(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=hC.get(d)||d,Zo(a,d,g))}}function Uv(a,l,d,g,v,y){switch(d){case"style":Nu(a,g,y);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=d}}break;case"children":typeof g=="string"?Oi(a,g):(typeof g=="number"||typeof g=="bigint")&&Oi(a,""+g);break;case"onScroll":g!=null&&Je("scroll",a);break;case"onScrollEnd":g!=null&&Je("scrollend",a);break;case"onClick":g!=null&&(a.onclick=vg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pl.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),l=d.slice(2,v?d.length-7:void 0),y=a[ln]||null,y=y!=null?y[d]:null,typeof y=="function"&&a.removeEventListener(l,y,v),typeof g=="function")){typeof y!="function"&&y!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,g,v);break e}d in a?a[d]=g:g===!0?a.setAttribute(d,""):Zo(a,d,g)}}}function Nn(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",a),Je("load",a);var g=!1,v=!1,y;for(y in d)if(d.hasOwnProperty(y)){var A=d[y];if(A!=null)switch(y){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Dt(a,l,y,A,d,null)}}v&&Dt(a,l,"srcSet",d.srcSet,d,null),g&&Dt(a,l,"src",d.src,d,null);return;case"input":Je("invalid",a);var L=y=A=v=null,j=null,X=null;for(g in d)if(d.hasOwnProperty(g)){var ce=d[g];if(ce!=null)switch(g){case"name":v=ce;break;case"type":A=ce;break;case"checked":j=ce;break;case"defaultChecked":X=ce;break;case"value":y=ce;break;case"defaultValue":L=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,l));break;default:Dt(a,l,g,ce,d,null)}}ca(a,y,L,j,X,A,v,!1),kl(a);return;case"select":Je("invalid",a),g=A=y=null;for(v in d)if(d.hasOwnProperty(v)&&(L=d[v],L!=null))switch(v){case"value":y=L;break;case"defaultValue":A=L;break;case"multiple":g=L;default:Dt(a,l,v,L,d,null)}l=y,d=A,a.multiple=!!g,l!=null?ro(a,!!g,l,!1):d!=null&&ro(a,!!g,d,!0);return;case"textarea":Je("invalid",a),y=v=g=null;for(A in d)if(d.hasOwnProperty(A)&&(L=d[A],L!=null))switch(A){case"value":g=L;break;case"defaultValue":v=L;break;case"children":y=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:Dt(a,l,A,L,d,null)}ua(a,g,v,y),kl(a);return;case"option":for(j in d)if(d.hasOwnProperty(j)&&(g=d[j],g!=null))switch(j){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Dt(a,l,j,g,d,null)}return;case"dialog":Je("beforetoggle",a),Je("toggle",a),Je("cancel",a),Je("close",a);break;case"iframe":case"object":Je("load",a);break;case"video":case"audio":for(g=0;g<bd.length;g++)Je(bd[g],a);break;case"image":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"embed":case"source":case"link":Je("error",a),Je("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in d)if(d.hasOwnProperty(X)&&(g=d[X],g!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Dt(a,l,X,g,d,null)}return;default:if(Bu(l)){for(ce in d)d.hasOwnProperty(ce)&&(g=d[ce],g!==void 0&&Uv(a,l,ce,g,d,void 0));return}}for(L in d)d.hasOwnProperty(L)&&(g=d[L],g!=null&&Dt(a,l,L,g,d,null))}function yN(a,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,y=null,A=null,L=null,j=null,X=null,ce=null;for(ne in d){var he=d[ne];if(d.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=he;default:g.hasOwnProperty(ne)||Dt(a,l,ne,null,g,he)}}for(var ee in g){var ne=g[ee];if(he=d[ee],g.hasOwnProperty(ee)&&(ne!=null||he!=null))switch(ee){case"type":y=ne;break;case"name":v=ne;break;case"checked":X=ne;break;case"defaultChecked":ce=ne;break;case"value":A=ne;break;case"defaultValue":L=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,l));break;default:ne!==he&&Dt(a,l,ee,ne,g,he)}}Si(a,A,L,j,X,ce,y,v);return;case"select":ne=A=L=ee=null;for(y in d)if(j=d[y],d.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":ne=j;default:g.hasOwnProperty(y)||Dt(a,l,y,null,g,j)}for(v in g)if(y=g[v],j=d[v],g.hasOwnProperty(v)&&(y!=null||j!=null))switch(v){case"value":ee=y;break;case"defaultValue":L=y;break;case"multiple":A=y;default:y!==j&&Dt(a,l,v,y,g,j)}l=L,d=A,g=ne,ee!=null?ro(a,!!d,ee,!1):!!g!=!!d&&(l!=null?ro(a,!!d,l,!0):ro(a,!!d,d?[]:"",!1));return;case"textarea":ne=ee=null;for(L in d)if(v=d[L],d.hasOwnProperty(L)&&v!=null&&!g.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Dt(a,l,L,null,g,v)}for(A in g)if(v=g[A],y=d[A],g.hasOwnProperty(A)&&(v!=null||y!=null))switch(A){case"value":ee=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==y&&Dt(a,l,A,v,g,y)}Tt(a,ee,ne);return;case"option":for(var Be in d)if(ee=d[Be],d.hasOwnProperty(Be)&&ee!=null&&!g.hasOwnProperty(Be))switch(Be){case"selected":a.selected=!1;break;default:Dt(a,l,Be,null,g,ee)}for(j in g)if(ee=g[j],ne=d[j],g.hasOwnProperty(j)&&ee!==ne&&(ee!=null||ne!=null))switch(j){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Dt(a,l,j,ee,g,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in d)ee=d[Le],d.hasOwnProperty(Le)&&ee!=null&&!g.hasOwnProperty(Le)&&Dt(a,l,Le,null,g,ee);for(X in g)if(ee=g[X],ne=d[X],g.hasOwnProperty(X)&&ee!==ne&&(ee!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,l));break;default:Dt(a,l,X,ee,g,ne)}return;default:if(Bu(l)){for(var At in d)ee=d[At],d.hasOwnProperty(At)&&ee!==void 0&&!g.hasOwnProperty(At)&&Uv(a,l,At,void 0,g,ee);for(ce in g)ee=g[ce],ne=d[ce],!g.hasOwnProperty(ce)||ee===ne||ee===void 0&&ne===void 0||Uv(a,l,ce,ee,g,ne);return}}for(var K in d)ee=d[K],d.hasOwnProperty(K)&&ee!=null&&!g.hasOwnProperty(K)&&Dt(a,l,K,null,g,ee);for(he in g)ee=g[he],ne=d[he],!g.hasOwnProperty(he)||ee===ne||ee==null&&ne==null||Dt(a,l,he,ee,g,ne)}var Wv=null,jv=null;function yg(a){return a.nodeType===9?a:a.ownerDocument}function ox(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rx(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function $v(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var qv=null;function wN(){var a=window.event;return a&&a.type==="popstate"?a===qv?!1:(qv=a,!0):(qv=null,!1)}var ax=typeof setTimeout=="function"?setTimeout:void 0,SN=typeof clearTimeout=="function"?clearTimeout:void 0,lx=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof lx<"u"?function(a){return lx.resolve(null).then(a).catch(RN)}:ax;function RN(a){setTimeout(function(){throw a})}function mr(a){return a==="head"}function cx(a,l){var d=l,g=0,v=0;do{var y=d.nextSibling;if(a.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(0<g&&8>g){d=g;var A=a.ownerDocument;if(d&1&&Ed(A.documentElement),d&2&&Ed(A.body),d&4)for(d=A.head,Ed(d),A=d.firstChild;A;){var L=A.nextSibling,j=A.nodeName;A[oa]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&A.rel.toLowerCase()==="stylesheet"||d.removeChild(A),A=L}}if(v===0){a.removeChild(y),Id(l);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:g=d.charCodeAt(0)-48;else g=0;d=y}while(d);Id(l)}function Kv(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Kv(d),Xo(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function EN(a,l,d,g){for(;a.nodeType===1;){var v=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[oa])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var y=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=us(a.nextSibling),a===null)break}return null}function TN(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=us(a.nextSibling),a===null))return null;return a}function Yv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function xN(a,l){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function us(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var Qv=null;function ux(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}function dx(a,l,d){switch(l=yg(d),a){case"html":if(a=l.documentElement,!a)throw Error(i(452));return a;case"head":if(a=l.head,!a)throw Error(i(453));return a;case"body":if(a=l.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Ed(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Xo(a)}var $i=new Map,hx=new Set;function wg(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var xo=ie.d;ie.d={f:DN,r:AN,D:FN,C:PN,L:MN,m:IN,X:kN,S:_N,M:LN};function DN(){var a=xo.f(),l=dg();return a||l}function AN(a){var l=vs(a);l!==null&&l.tag===5&&l.type==="form"?I0(l):xo.r(a)}var pc=typeof document>"u"?null:document;function fx(a,l,d){var g=pc;if(g&&typeof l=="string"&&l){var v=cn(l);v='link[rel="'+a+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),hx.has(v)||(hx.add(v),a={rel:a,crossOrigin:d,href:l},g.querySelector(v)===null&&(l=g.createElement("link"),Nn(l,"link",a),Jt(l),g.head.appendChild(l)))}}function FN(a){xo.D(a),fx("dns-prefetch",a,null)}function PN(a,l){xo.C(a,l),fx("preconnect",a,l)}function MN(a,l,d){xo.L(a,l,d);var g=pc;if(g&&a&&l){var v='link[rel="preload"][as="'+cn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+cn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+cn(d.imageSizes)+'"]')):v+='[href="'+cn(a)+'"]';var y=v;switch(l){case"style":y=mc(a);break;case"script":y=Cc(a)}$i.has(y)||(a=f({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),$i.set(y,a),g.querySelector(v)!==null||l==="style"&&g.querySelector(Td(y))||l==="script"&&g.querySelector(xd(y))||(l=g.createElement("link"),Nn(l,"link",a),Jt(l),g.head.appendChild(l)))}}function IN(a,l){xo.m(a,l);var d=pc;if(d&&a){var g=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+cn(g)+'"][href="'+cn(a)+'"]',y=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Cc(a)}if(!$i.has(y)&&(a=f({rel:"modulepreload",href:a},l),$i.set(y,a),d.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(xd(y)))return}g=d.createElement("link"),Nn(g,"link",a),Jt(g),d.head.appendChild(g)}}}function _N(a,l,d){xo.S(a,l,d);var g=pc;if(g&&a){var v=ei(g).hoistableStyles,y=mc(a);l=l||"default";var A=v.get(y);if(!A){var L={loading:0,preload:null};if(A=g.querySelector(Td(y)))L.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":l},d),(d=$i.get(y))&&Xv(a,d);var j=A=g.createElement("link");Jt(j),Nn(j,"link",a),j._p=new Promise(function(X,ce){j.onload=X,j.onerror=ce}),j.addEventListener("load",function(){L.loading|=1}),j.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Sg(A,l,g)}A={type:"stylesheet",instance:A,count:1,state:L},v.set(y,A)}}}function kN(a,l){xo.X(a,l);var d=pc;if(d&&a){var g=ei(d).hoistableScripts,v=Cc(a),y=g.get(v);y||(y=d.querySelector(xd(v)),y||(a=f({src:a,async:!0},l),(l=$i.get(v))&&Zv(a,l),y=d.createElement("script"),Jt(y),Nn(y,"link",a),d.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(v,y))}}function LN(a,l){xo.M(a,l);var d=pc;if(d&&a){var g=ei(d).hoistableScripts,v=Cc(a),y=g.get(v);y||(y=d.querySelector(xd(v)),y||(a=f({src:a,async:!0,type:"module"},l),(l=$i.get(v))&&Zv(a,l),y=d.createElement("script"),Jt(y),Nn(y,"link",a),d.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(v,y))}}function gx(a,l,d,g){var v=(v=xe.current)?wg(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=mc(d.href),d=ei(v).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=mc(d.href);var y=ei(v).hoistableStyles,A=y.get(a);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,A),(y=v.querySelector(Td(a)))&&!y._p&&(A.instance=y,A.state.loading=5),$i.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},$i.set(a,d),y||ON(v,a,d,A.state))),l&&g===null)throw Error(i(528,""));return A}if(l&&g!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Cc(d),d=ei(v).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function mc(a){return'href="'+cn(a)+'"'}function Td(a){return'link[rel="stylesheet"]['+a+"]"}function px(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function ON(a,l,d,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Nn(l,"link",d),Jt(l),a.head.appendChild(l))}function Cc(a){return'[src="'+cn(a)+'"]'}function xd(a){return"script[async]"+a}function mx(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+cn(d.href)+'"]');if(g)return l.instance=g,Jt(g),g;var v=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Jt(g),Nn(g,"style",v),Sg(g,d.precedence,a),l.instance=g;case"stylesheet":v=mc(d.href);var y=a.querySelector(Td(v));if(y)return l.state.loading|=4,l.instance=y,Jt(y),y;g=px(d),(v=$i.get(v))&&Xv(g,v),y=(a.ownerDocument||a).createElement("link"),Jt(y);var A=y;return A._p=new Promise(function(L,j){A.onload=L,A.onerror=j}),Nn(y,"link",g),l.state.loading|=4,Sg(y,d.precedence,a),l.instance=y;case"script":return y=Cc(d.src),(v=a.querySelector(xd(y)))?(l.instance=v,Jt(v),v):(g=d,(v=$i.get(y))&&(g=f({},d),Zv(g,v)),a=a.ownerDocument||a,v=a.createElement("script"),Jt(v),Nn(v,"link",g),a.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,Sg(g,d.precedence,a));return l.instance}function Sg(a,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,y=v,A=0;A<g.length;A++){var L=g[A];if(L.dataset.precedence===l)y=L;else if(y!==v)break}y?y.parentNode.insertBefore(a,y.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function Xv(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function Zv(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var bg=null;function Cx(a,l,d){if(bg===null){var g=new Map,v=bg=new Map;v.set(d,g)}else v=bg,g=v.get(d),g||(g=new Map,v.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),v=0;v<d.length;v++){var y=d[v];if(!(y[oa]||y[Cn]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(l)||"";A=a+A;var L=g.get(A);L?L.push(y):g.set(A,[y])}}return g}function vx(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function VN(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function yx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Dd=null;function NN(){}function BN(a,l,d){if(Dd===null)throw Error(i(475));var g=Dd;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=mc(d.href),y=a.querySelector(Td(v));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=Rg.bind(g),a.then(g,g)),l.state.loading|=4,l.instance=y,Jt(y);return}y=a.ownerDocument||a,d=px(d),(v=$i.get(v))&&Xv(d,v),y=y.createElement("link"),Jt(y);var A=y;A._p=new Promise(function(L,j){A.onload=L,A.onerror=j}),Nn(y,"link",d),l.instance=y}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=Rg.bind(g),a.addEventListener("load",l),a.addEventListener("error",l))}}function GN(){if(Dd===null)throw Error(i(475));var a=Dd;return a.stylesheets&&a.count===0&&Jv(a,a.stylesheets),0<a.count?function(l){var d=setTimeout(function(){if(a.stylesheets&&Jv(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Rg(){if(this.count--,this.count===0){if(this.stylesheets)Jv(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Eg=null;function Jv(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Eg=new Map,l.forEach(HN,a),Eg=null,Rg.call(a))}function HN(a,l){if(!(l.state.loading&4)){var d=Eg.get(a);if(d)var g=d.get(null);else{d=new Map,Eg.set(a,d);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<v.length;y++){var A=v[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(d.set(A.dataset.precedence,A),g=A)}g&&d.set(null,g)}v=l.instance,A=v.getAttribute("data-precedence"),y=d.get(A)||g,y===g&&d.set(null,v),d.set(A,v),this.count++,g=Rg.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),y?y.parentNode.insertBefore(v,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),l.state.loading|=4}}var Ad={$$typeof:I,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function zN(a,l,d,g,v,y,A,L){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=to(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.hiddenUpdates=to(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function wx(a,l,d,g,v,y,A,L,j,X,ce,he){return a=new zN(a,l,d,A,L,j,X,he),l=1,y===!0&&(l|=24),y=Ri(3,null,null,l),a.current=y,y.stateNode=a,l=kC(),l.refCount++,a.pooledCache=l,l.refCount++,y.memoizedState={element:g,isDehydrated:d,cache:l},NC(y),a}function Sx(a){return a?(a=Kl,a):Kl}function bx(a,l,d,g,v,y){v=Sx(v),g.context===null?g.context=v:g.pendingContext=v,g=ir(l),g.payload={element:d},y=y===void 0?null:y,y!==null&&(g.callback=y),d=sr(a,g,l),d!==null&&(Ai(d,a,l),sd(d,a,l))}function Rx(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function ey(a,l){Rx(a,l),(a=a.alternate)&&Rx(a,l)}function Ex(a){if(a.tag===13){var l=ql(a,67108864);l!==null&&Ai(l,a,67108864),ey(a,67108864)}}var Tg=!0;function UN(a,l,d,g){var v=q.T;q.T=null;var y=ie.p;try{ie.p=2,ty(a,l,d,g)}finally{ie.p=y,q.T=v}}function WN(a,l,d,g){var v=q.T;q.T=null;var y=ie.p;try{ie.p=8,ty(a,l,d,g)}finally{ie.p=y,q.T=v}}function ty(a,l,d,g){if(Tg){var v=ny(g);if(v===null)zv(a,l,g,xg,d),xx(a,g);else if($N(v,a,l,d,g))g.stopPropagation();else if(xx(a,g),l&4&&-1<jN.indexOf(a)){for(;v!==null;){var y=vs(v);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=os(y.pendingLanes);if(A!==0){var L=y;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var j=1<<31-pt(A);L.entanglements[1]|=j,A&=~j}Is(y),(wt&6)===0&&(cg=ht()+500,Sd(0))}}break;case 13:L=ql(y,2),L!==null&&Ai(L,y,2),dg(),ey(y,2)}if(y=ny(g),y===null&&zv(a,l,g,xg,d),y===v)break;v=y}v!==null&&g.stopPropagation()}else zv(a,l,g,null,d)}}function ny(a){return a=Vi(a),iy(a)}var xg=null;function iy(a){if(xg=null,a=io(a),a!==null){var l=o(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=r(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return xg=a,null}function Tx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case Et:return 2;case Lt:return 8;case Mt:case Kt:return 32;case Tn:return 268435456;default:return 32}default:return 32}}var sy=!1,Cr=null,vr=null,yr=null,Fd=new Map,Pd=new Map,wr=[],jN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xx(a,l){switch(a){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Fd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(l.pointerId)}}function Md(a,l,d,g,v,y){return a===null||a.nativeEvent!==y?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:y,targetContainers:[v]},l!==null&&(l=vs(l),l!==null&&Ex(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function $N(a,l,d,g,v){switch(l){case"focusin":return Cr=Md(Cr,a,l,d,g,v),!0;case"dragenter":return vr=Md(vr,a,l,d,g,v),!0;case"mouseover":return yr=Md(yr,a,l,d,g,v),!0;case"pointerover":var y=v.pointerId;return Fd.set(y,Md(Fd.get(y)||null,a,l,d,g,v)),!0;case"gotpointercapture":return y=v.pointerId,Pd.set(y,Md(Pd.get(y)||null,a,l,d,g,v)),!0}return!1}function Dx(a){var l=io(a.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=r(d),l!==null){a.blockedOn=l,df(a.priority,function(){if(d.tag===13){var g=Di();g=Ko(g);var v=ql(d,g);v!==null&&Ai(v,d,g),ey(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dg(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=ny(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);ao=g,d.target.dispatchEvent(g),ao=null}else return l=vs(d),l!==null&&Ex(l),a.blockedOn=d,!1;l.shift()}return!0}function Ax(a,l,d){Dg(a)&&d.delete(l)}function qN(){sy=!1,Cr!==null&&Dg(Cr)&&(Cr=null),vr!==null&&Dg(vr)&&(vr=null),yr!==null&&Dg(yr)&&(yr=null),Fd.forEach(Ax),Pd.forEach(Ax)}function Ag(a,l){a.blockedOn===l&&(a.blockedOn=null,sy||(sy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qN)))}var Fg=null;function Fx(a){Fg!==a&&(Fg=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Fg===a&&(Fg=null);for(var l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],v=a[l+2];if(typeof g!="function"){if(iy(g||d)===null)continue;break}var y=vs(d);y!==null&&(a.splice(l,3),l-=3,iv(y,{pending:!0,data:v,method:d.method,action:g},g,v))}}))}function Id(a){function l(j){return Ag(j,a)}Cr!==null&&Ag(Cr,a),vr!==null&&Ag(vr,a),yr!==null&&Ag(yr,a),Fd.forEach(l),Pd.forEach(l);for(var d=0;d<wr.length;d++){var g=wr[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<wr.length&&(d=wr[0],d.blockedOn===null);)Dx(d),d.blockedOn===null&&wr.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var v=d[g],y=d[g+1],A=v[ln]||null;if(typeof y=="function")A||Fx(d);else if(A){var L=null;if(y&&y.hasAttribute("formAction")){if(v=y,A=y[ln]||null)L=A.formAction;else if(iy(v)!==null)continue}else L=A.action;typeof L=="function"?d[g+1]=L:(d.splice(g,3),g-=3),Fx(d)}}}function oy(a){this._internalRoot=a}Pg.prototype.render=oy.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,g=Di();bx(d,g,a,l,null,null)},Pg.prototype.unmount=oy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;bx(a.current,2,null,a,null,null),dg(),l[Li]=null}};function Pg(a){this._internalRoot=a}Pg.prototype.unstable_scheduleHydration=function(a){if(a){var l=Yo();a={blockedOn:null,target:a,priority:l};for(var d=0;d<wr.length&&l!==0&&l<wr[d].priority;d++);wr.splice(d,0,a),d===0&&Dx(a)}};var Px=t.version;if(Px!=="19.1.1")throw Error(i(527,Px,"19.1.1"));ie.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=u(l),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var KN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{_e=Mg.inject(KN),Ke=Mg}catch{}}return kd.createRoot=function(a,l){if(!s(a))throw Error(i(299));var d=!1,g="",v=$0,y=q0,A=K0,L=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks)),l=wx(a,1,!1,null,null,d,g,v,y,A,L,null),a[Li]=l.current,Hv(a),new oy(l)},kd.hydrateRoot=function(a,l,d){if(!s(a))throw Error(i(299));var g=!1,v="",y=$0,A=q0,L=K0,j=null,X=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(y=d.onUncaughtError),d.onCaughtError!==void 0&&(A=d.onCaughtError),d.onRecoverableError!==void 0&&(L=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks),d.formState!==void 0&&(X=d.formState)),l=wx(a,1,!0,l,d??null,g,v,y,A,L,j,X),l.context=Sx(null),d=l.current,g=Di(),g=Ko(g),v=ir(g),v.callback=null,sr(d,v,g),d=g,l.current.lanes=d,no(l,d),Is(l),a[Li]=l.current,Hv(a),new Pg(l)},kd.version="19.1.1",kd}var Gx;function i2(){if(Gx)return ly.exports;Gx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ly.exports=n2(),ly.exports}var s2=i2();function $P(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=$P(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Ka(){for(var e,t,n=0,i="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=$P(e))&&(i&&(i+=" "),i+=t);return i}function o2(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}o2(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var zh=e=>typeof e=="number"&&!isNaN(e),rl=e=>typeof e=="string",Lo=e=>typeof e=="function",r2=e=>rl(e)||zh(e),Ew=e=>rl(e)||Lo(e)?e:null,a2=(e,t)=>e===!1||zh(e)&&e>0?e:t,Tw=e=>R.isValidElement(e)||rl(e)||Lo(e)||zh(e);function l2(e,t,n=300){let{scrollHeight:i,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=i+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)})})}function c2({enter:e,exit:t,appendPosition:n=!1,collapse:i=!0,collapseDuration:s=300}){return function({children:o,position:r,preventExitTransition:c,done:u,nodeRef:h,isIn:f,playToast:p}){let m=n?`${e}--${r}`:e,w=n?`${t}--${r}`:t,S=R.useRef(0);return R.useLayoutEffect(()=>{let E=h.current,x=m.split(" "),P=M=>{M.target===h.current&&(p(),E.removeEventListener("animationend",P),E.removeEventListener("animationcancel",P),S.current===0&&M.type!=="animationcancel"&&E.classList.remove(...x))};E.classList.add(...x),E.addEventListener("animationend",P),E.addEventListener("animationcancel",P)},[]),R.useEffect(()=>{let E=h.current,x=()=>{E.removeEventListener("animationend",x),i?l2(E,u,s):u()};f||(c?x():(S.current=1,E.className+=` ${w}`,E.addEventListener("animationend",x)))},[f]),oe.createElement(oe.Fragment,null,o)}}function Hx(e,t){return{content:qP(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function qP(e,t,n=!1){return R.isValidElement(e)&&!rl(e.type)?R.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):Lo(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function u2({closeToast:e,theme:t,ariaLabel:n="close"}){return oe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(!0)},"aria-label":n},oe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},oe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function d2({delay:e,isRunning:t,closeToast:n,type:i="default",hide:s,className:o,controlledProgress:r,progress:c,rtl:u,isIn:h,theme:f}){let p=s||r&&c===0,m={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};r&&(m.transform=`scaleX(${c})`);let w=Ka("Toastify__progress-bar",r?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),S=Lo(o)?o({rtl:u,type:i,defaultClassName:w}):Ka(w,o),E={[r&&c>=1?"onTransitionEnd":"onAnimationEnd"]:r&&c<1?null:()=>{h&&n()}};return oe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},oe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),oe.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:S,style:m,...E}))}var h2=1,KP=()=>`${h2++}`;function f2(e,t,n){let i=1,s=0,o=[],r=[],c=t,u=new Map,h=new Set,f=M=>(h.add(M),()=>h.delete(M)),p=()=>{r=Array.from(u.values()),h.forEach(M=>M())},m=({containerId:M,toastId:I,updateId:U})=>{let z=M?M!==e:e!==1,W=u.has(I)&&U==null;return z||W},w=(M,I)=>{u.forEach(U=>{var z;(I==null||I===U.props.toastId)&&((z=U.toggle)==null||z.call(U,M))})},S=M=>{var I,U;(U=(I=M.props)==null?void 0:I.onClose)==null||U.call(I,M.removalReason),M.isActive=!1},E=M=>{if(M==null)u.forEach(S);else{let I=u.get(M);I&&S(I)}p()},x=()=>{s-=o.length,o=[]},P=M=>{var I,U;let{toastId:z,updateId:W}=M.props,_=W==null;M.staleId&&u.delete(M.staleId),M.isActive=!0,u.set(z,M),p(),n(Hx(M,_?"added":"updated")),_&&((U=(I=M.props).onOpen)==null||U.call(I))};return{id:e,props:c,observe:f,toggle:w,removeToast:E,toasts:u,clearQueue:x,buildToast:(M,I)=>{if(m(I))return;let{toastId:U,updateId:z,data:W,staleId:_,delay:F}=I,k=z==null;k&&s++;let O={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(I).filter(([H,V])=>V!=null)),toastId:U,updateId:z,data:W,isIn:!1,className:Ew(I.className||c.toastClassName),progressClassName:Ew(I.progressClassName||c.progressClassName),autoClose:I.isLoading?!1:a2(I.autoClose,c.autoClose),closeToast(H){u.get(U).removalReason=H,E(U)},deleteToast(){let H=u.get(U);if(H!=null){if(n(Hx(H,"removed")),u.delete(U),s--,s<0&&(s=0),o.length>0){P(o.shift());return}p()}}};O.closeButton=c.closeButton,I.closeButton===!1||Tw(I.closeButton)?O.closeButton=I.closeButton:I.closeButton===!0&&(O.closeButton=Tw(c.closeButton)?c.closeButton:!0);let N={content:M,props:O,staleId:_};c.limit&&c.limit>0&&s>c.limit&&k?o.push(N):zh(F)?setTimeout(()=>{P(N)},F):P(N)},setProps(M){c=M},setToggle:(M,I)=>{let U=u.get(M);U&&(U.toggle=I)},isToastActive:M=>{var I;return(I=u.get(M))==null?void 0:I.isActive},getSnapshot:()=>r}}var oi=new Map,hh=[],xw=new Set,g2=e=>xw.forEach(t=>t(e)),YP=()=>oi.size>0;function p2(){hh.forEach(e=>XP(e.content,e.options)),hh=[]}var m2=(e,{containerId:t})=>{var n;return(n=oi.get(t||1))==null?void 0:n.toasts.get(e)};function QP(e,t){var n;if(t)return!!((n=oi.get(t))!=null&&n.isToastActive(e));let i=!1;return oi.forEach(s=>{s.isToastActive(e)&&(i=!0)}),i}function C2(e){if(!YP()){hh=hh.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||r2(e))oi.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=oi.get(e.containerId);t?t.removeToast(e.id):oi.forEach(n=>{n.removeToast(e.id)})}}var v2=(e={})=>{oi.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function XP(e,t){Tw(e)&&(YP()||hh.push({content:e,options:t}),oi.forEach(n=>{n.buildToast(e,t)}))}function y2(e){var t;(t=oi.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function ZP(e,t){oi.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function w2(e){let t=e.containerId||1;return{subscribe(n){let i=f2(t,e,g2);oi.set(t,i);let s=i.observe(n);return p2(),()=>{s(),oi.delete(t)}},setProps(n){var i;(i=oi.get(t))==null||i.setProps(n)},getSnapshot(){var n;return(n=oi.get(t))==null?void 0:n.getSnapshot()}}}function S2(e){return xw.add(e),()=>{xw.delete(e)}}function b2(e){return e&&(rl(e.toastId)||zh(e.toastId))?e.toastId:KP()}function Uh(e,t){return XP(e,t),t.toastId}function wm(e,t){return{...t,type:t&&t.type||e,toastId:b2(t)}}function Sm(e){return(t,n)=>Uh(t,wm(e,n))}function Rt(e,t){return Uh(e,wm("default",t))}Rt.loading=(e,t)=>Uh(e,wm("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function R2(e,{pending:t,error:n,success:i},s){let o;t&&(o=rl(t)?Rt.loading(t,s):Rt.loading(t.render,{...s,...t}));let r={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(h,f,p)=>{if(f==null){Rt.dismiss(o);return}let m={type:h,...r,...s,data:p},w=rl(f)?{render:f}:f;return o?Rt.update(o,{...m,...w}):Rt(w.render,{...m,...w}),p},u=Lo(e)?e():e;return u.then(h=>c("success",i,h)).catch(h=>c("error",n,h)),u}Rt.promise=R2;Rt.success=Sm("success");Rt.info=Sm("info");Rt.error=Sm("error");Rt.warning=Sm("warning");Rt.warn=Rt.warning;Rt.dark=(e,t)=>Uh(e,wm("default",{theme:"dark",...t}));function E2(e){C2(e)}Rt.dismiss=E2;Rt.clearWaitingQueue=v2;Rt.isActive=QP;Rt.update=(e,t={})=>{let n=m2(e,t);if(n){let{props:i,content:s}=n,o={delay:100,...i,...t,toastId:t.toastId||e,updateId:KP()};o.toastId!==e&&(o.staleId=e);let r=o.render||s;delete o.render,Uh(r,o)}};Rt.done=e=>{Rt.update(e,{progress:1})};Rt.onChange=S2;Rt.play=e=>ZP(!0,e);Rt.pause=e=>ZP(!1,e);function T2(e){var t;let{subscribe:n,getSnapshot:i,setProps:s}=R.useRef(w2(e)).current;s(e);let o=(t=R.useSyncExternalStore(n,i,i))==null?void 0:t.slice();function r(c){if(!o)return[];let u=new Map;return e.newestOnTop&&o.reverse(),o.forEach(h=>{let{position:f}=h.props;u.has(f)||u.set(f,[]),u.get(f).push(h)}),Array.from(u,h=>c(h[0],h[1]))}return{getToastToRender:r,isToastActive:QP,count:o?.length}}function x2(e){let[t,n]=R.useState(!1),[i,s]=R.useState(!1),o=R.useRef(null),r=R.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:u,closeToast:h,onClick:f,closeOnClick:p}=e;y2({id:e.toastId,containerId:e.containerId,fn:n}),R.useEffect(()=>{if(e.pauseOnFocusLoss)return m(),()=>{w()}},[e.pauseOnFocusLoss]);function m(){document.hasFocus()||P(),window.addEventListener("focus",x),window.addEventListener("blur",P)}function w(){window.removeEventListener("focus",x),window.removeEventListener("blur",P)}function S(_){if(e.draggable===!0||e.draggable===_.pointerType){M();let F=o.current;r.canCloseOnClick=!0,r.canDrag=!0,F.style.transition="none",e.draggableDirection==="x"?(r.start=_.clientX,r.removalDistance=F.offsetWidth*(e.draggablePercent/100)):(r.start=_.clientY,r.removalDistance=F.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function E(_){let{top:F,bottom:k,left:O,right:N}=o.current.getBoundingClientRect();_.nativeEvent.type!=="touchend"&&e.pauseOnHover&&_.clientX>=O&&_.clientX<=N&&_.clientY>=F&&_.clientY<=k?P():x()}function x(){n(!0)}function P(){n(!1)}function M(){r.didMove=!1,document.addEventListener("pointermove",U),document.addEventListener("pointerup",z)}function I(){document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",z)}function U(_){let F=o.current;if(r.canDrag&&F){r.didMove=!0,t&&P(),e.draggableDirection==="x"?r.delta=_.clientX-r.start:r.delta=_.clientY-r.start,r.start!==_.clientX&&(r.canCloseOnClick=!1);let k=e.draggableDirection==="x"?`${r.delta}px, var(--y)`:`0, calc(${r.delta}px + var(--y))`;F.style.transform=`translate3d(${k},0)`,F.style.opacity=`${1-Math.abs(r.delta/r.removalDistance)}`}}function z(){I();let _=o.current;if(r.canDrag&&r.didMove&&_){if(r.canDrag=!1,Math.abs(r.delta)>r.removalDistance){s(!0),e.closeToast(!0),e.collapseAll();return}_.style.transition="transform 0.2s, opacity 0.2s",_.style.removeProperty("transform"),_.style.removeProperty("opacity")}}let W={onPointerDown:S,onPointerUp:E};return c&&u&&(W.onMouseEnter=P,e.stacked||(W.onMouseLeave=x)),p&&(W.onClick=_=>{f&&f(_),r.canCloseOnClick&&h(!0)}),{playToast:x,pauseToast:P,isRunning:t,preventExitTransition:i,toastRef:o,eventHandlers:W}}var D2=typeof window<"u"?R.useLayoutEffect:R.useEffect,bm=({theme:e,type:t,isLoading:n,...i})=>oe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function A2(e){return oe.createElement(bm,{...e},oe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function F2(e){return oe.createElement(bm,{...e},oe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function P2(e){return oe.createElement(bm,{...e},oe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function M2(e){return oe.createElement(bm,{...e},oe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function I2(){return oe.createElement("div",{className:"Toastify__spinner"})}var Dw={info:F2,warning:A2,success:P2,error:M2,spinner:I2},_2=e=>e in Dw;function k2({theme:e,type:t,isLoading:n,icon:i}){let s=null,o={theme:e,type:t};return i===!1||(Lo(i)?s=i({...o,isLoading:n}):R.isValidElement(i)?s=R.cloneElement(i,o):n?s=Dw.spinner():_2(t)&&(s=Dw[t](o))),s}var L2=e=>{let{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:s,playToast:o}=x2(e),{closeButton:r,children:c,autoClose:u,onClick:h,type:f,hideProgressBar:p,closeToast:m,transition:w,position:S,className:E,style:x,progressClassName:P,updateId:M,role:I,progress:U,rtl:z,toastId:W,deleteToast:_,isIn:F,isLoading:k,closeOnClick:O,theme:N,ariaLabel:H}=e,V=Ka("Toastify__toast",`Toastify__toast-theme--${N}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":z},{"Toastify__toast--close-on-click":O}),ve=Lo(E)?E({rtl:z,position:S,type:f,defaultClassName:V}):Ka(V,E),pe=k2(e),q=!!U||!u,ie={closeToast:m,type:f,theme:N},se=null;return r===!1||(Lo(r)?se=r(ie):R.isValidElement(r)?se=R.cloneElement(r,ie):se=u2(ie)),oe.createElement(w,{isIn:F,done:_,position:S,preventExitTransition:n,nodeRef:i,playToast:o},oe.createElement("div",{id:W,tabIndex:0,onClick:h,"data-in":F,className:ve,...s,style:x,ref:i,...F&&{role:I,"aria-label":H}},pe!=null&&oe.createElement("div",{className:Ka("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!k})},pe),qP(c,e,!t),se,!e.customProgressBar&&oe.createElement(d2,{...M&&!q?{key:`p-${M}`}:{},rtl:z,theme:N,delay:u,isRunning:t,isIn:F,closeToast:m,hide:p,type:f,className:P,controlledProgress:q,progress:U||0})))},O2=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),V2=c2(O2("bounce",!0)),N2={position:"top-right",transition:V2,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function B2(e){let t={...N2,...e},n=e.stacked,[i,s]=R.useState(!0),o=R.useRef(null),{getToastToRender:r,isToastActive:c,count:u}=T2(t),{className:h,style:f,rtl:p,containerId:m,hotKeys:w}=t;function S(x){let P=Ka("Toastify__toast-container",`Toastify__toast-container--${x}`,{"Toastify__toast-container--rtl":p});return Lo(h)?h({position:x,rtl:p,defaultClassName:P}):Ka(P,Ew(h))}function E(){n&&(s(!0),Rt.play())}return D2(()=>{var x;if(n){let P=o.current.querySelectorAll('[data-in="true"]'),M=12,I=(x=t.position)==null?void 0:x.includes("top"),U=0,z=0;Array.from(P).reverse().forEach((W,_)=>{let F=W;F.classList.add("Toastify__toast--stacked"),_>0&&(F.dataset.collapsed=`${i}`),F.dataset.pos||(F.dataset.pos=I?"top":"bot");let k=U*(i?.2:1)+(i?0:M*_);F.style.setProperty("--y",`${I?k:k*-1}px`),F.style.setProperty("--g",`${M}`),F.style.setProperty("--s",`${1-(i?z:0)}`),U+=F.offsetHeight,z+=.025})}},[i,u,n]),R.useEffect(()=>{function x(P){var M;let I=o.current;w(P)&&((M=I.querySelector('[tabIndex="0"]'))==null||M.focus(),s(!1),Rt.pause()),P.key==="Escape"&&(document.activeElement===I||I!=null&&I.contains(document.activeElement))&&(s(!0),Rt.play())}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[w]),oe.createElement("section",{ref:o,className:"Toastify",id:m,onMouseEnter:()=>{n&&(s(!1),Rt.pause())},onMouseLeave:E,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},r((x,P)=>{let M=P.length?{...f}:{...f,pointerEvents:"none"};return oe.createElement("div",{tabIndex:-1,className:S(x),"data-stacked":n,style:M,key:`c-${x}`},P.map(({content:I,props:U})=>oe.createElement(L2,{...U,stacked:n,collapseAll:E,isIn:c(U.toastId,U.containerId),key:`t-${U.key}`},I)))}))}var hy={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var zx;function G2(){return zx||(zx=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",r=0;r<arguments.length;r++){var c=arguments[r];c&&(o=s(o,i(c)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var r="";for(var c in o)t.call(o,c)&&o[c]&&(r=s(r,c));return r}function s(o,r){return r?o?o+" "+r:o+r:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(hy)),hy.exports}var H2=G2();const He=ym(H2);function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Aw.apply(null,arguments)}function JP(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Ux(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function z2(e){var t=U2(e,"string");return typeof t=="symbol"?t:String(t)}function U2(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function W2(e,t,n){var i=R.useRef(e!==void 0),s=R.useState(t),o=s[0],r=s[1],c=e!==void 0,u=i.current;return i.current=c,!c&&u&&o!==t&&r(t),[c?e:o,R.useCallback(function(h){for(var f=arguments.length,p=new Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];n&&n.apply(void 0,[h].concat(p)),r(h)},[n])]}function j2(e,t){return Object.keys(t).reduce(function(n,i){var s,o=n,r=o[Ux(i)],c=o[i],u=JP(o,[Ux(i),i].map(z2)),h=t[i],f=W2(c,r,e[h]),p=f[0],m=f[1];return Aw({},u,(s={},s[i]=p,s[h]=m,s))},e)}function Fw(e,t){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Fw(e,t)}function $2(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Fw(e,t)}const q2=["xxl","xl","lg","md","sm","xs"],K2="xs",Wh=R.createContext({prefixes:{},breakpoints:q2,minBreakpoint:K2}),{Consumer:jre,Provider:$re}=Wh;function Qe(e,t){const{prefixes:n}=R.useContext(Wh);return e||n[t]||t}function eM(){const{breakpoints:e}=R.useContext(Wh);return e}function tM(){const{minBreakpoint:e}=R.useContext(Wh);return e}function Y2(){const{dir:e}=R.useContext(Wh);return e==="rtl"}function Rm(e){return e&&e.ownerDocument||document}function Q2(e){var t=Rm(e);return t&&t.defaultView||window}function X2(e,t){return Q2(e).getComputedStyle(e,t)}var Z2=/([A-Z])/g;function J2(e){return e.replace(Z2,"-$1").toLowerCase()}var eB=/^ms-/;function Ig(e){return J2(e).replace(eB,"-ms-")}var tB=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function nB(e){return!!(e&&tB.test(e))}function Ya(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(Ig(t))||X2(e).getPropertyValue(Ig(t));Object.keys(t).forEach(function(s){var o=t[s];!o&&o!==0?e.style.removeProperty(Ig(s)):nB(s)?i+=s+"("+o+") ":n+=Ig(s)+": "+o+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}var fy={exports:{}},gy,Wx;function iB(){if(Wx)return gy;Wx=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gy=e,gy}var py,jx;function sB(){if(jx)return py;jx=1;var e=iB();function t(){}function n(){}return n.resetWarningCache=t,py=function(){function i(r,c,u,h,f,p){if(p!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function s(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},py}var $x;function oB(){return $x||($x=1,fy.exports=sB()()),fy.exports}var rB=oB();const Po=ym(rB);var sb=jP();const za=ym(sb),qx={disabled:!1},nM=oe.createContext(null);var aB=function(t){return t.scrollTop},Gd="unmounted",La="exited",xr="entering",Ga="entered",Pw="exiting",jo=function(e){$2(t,e);function t(i,s){var o;o=e.call(this,i,s)||this;var r=s,c=r&&!r.isMounting?i.enter:i.appear,u;return o.appearStatus=null,i.in?c?(u=La,o.appearStatus=xr):u=Ga:i.unmountOnExit||i.mountOnEnter?u=Gd:u=La,o.state={status:u},o.nextCallback=null,o}t.getDerivedStateFromProps=function(s,o){var r=s.in;return r&&o.status===Gd?{status:La}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var r=this.state.status;this.props.in?r!==xr&&r!==Ga&&(o=xr):(r===xr||r===Ga)&&(o=Pw)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,r,c;return o=r=c=s,s!=null&&typeof s!="number"&&(o=s.exit,r=s.enter,c=s.appear!==void 0?s.appear:r),{exit:o,enter:r,appear:c}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===xr){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:za.findDOMNode(this);r&&aB(r)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===La&&this.setState({status:Gd})},n.performEnter=function(s){var o=this,r=this.props.enter,c=this.context?this.context.isMounting:s,u=this.props.nodeRef?[c]:[za.findDOMNode(this),c],h=u[0],f=u[1],p=this.getTimeouts(),m=c?p.appear:p.enter;if(!s&&!r||qx.disabled){this.safeSetState({status:Ga},function(){o.props.onEntered(h)});return}this.props.onEnter(h,f),this.safeSetState({status:xr},function(){o.props.onEntering(h,f),o.onTransitionEnd(m,function(){o.safeSetState({status:Ga},function(){o.props.onEntered(h,f)})})})},n.performExit=function(){var s=this,o=this.props.exit,r=this.getTimeouts(),c=this.props.nodeRef?void 0:za.findDOMNode(this);if(!o||qx.disabled){this.safeSetState({status:La},function(){s.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Pw},function(){s.props.onExiting(c),s.onTransitionEnd(r.exit,function(){s.safeSetState({status:La},function(){s.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,r=!0;return this.nextCallback=function(c){r&&(r=!1,o.nextCallback=null,s(c))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var r=this.props.nodeRef?this.props.nodeRef.current:za.findDOMNode(this),c=s==null&&!this.props.addEndListener;if(!r||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],h=u[0],f=u[1];this.props.addEndListener(h,f)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Gd)return null;var o=this.props,r=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=JP(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return oe.createElement(nM.Provider,{value:null},typeof r=="function"?r(s,c):oe.cloneElement(oe.Children.only(r),c))},t}(oe.Component);jo.contextType=nM;jo.propTypes={};function vc(){}jo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vc,onEntering:vc,onEntered:vc,onExit:vc,onExiting:vc,onExited:vc};jo.UNMOUNTED=Gd;jo.EXITED=La;jo.ENTERING=xr;jo.ENTERED=Ga;jo.EXITING=Pw;function lB(e){return e.code==="Escape"||e.keyCode===27}function cB(){const e=R.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Em(e){if(!e||typeof e=="function")return null;const{major:t}=cB();return t>=19?e.props.ref:e.ref}const hu=!!(typeof window<"u"&&window.document&&window.document.createElement);var Mw=!1,Iw=!1;try{var my={get passive(){return Mw=!0},get once(){return Iw=Mw=!0}};hu&&(window.addEventListener("test",my,my),window.removeEventListener("test",my,!0))}catch{}function iM(e,t,n,i){if(i&&typeof i!="boolean"&&!Iw){var s=i.once,o=i.capture,r=n;!Iw&&s&&(r=n.__once||function c(u){this.removeEventListener(t,c,o),n.call(this,u)},n.__once=r),e.addEventListener(t,r,Mw?i:o)}e.addEventListener(t,n,i)}function _w(e,t,n,i){var s=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}function Rp(e,t,n,i){return iM(e,t,n,i),function(){_w(e,t,n,i)}}function uB(e,t,n,i){if(i===void 0&&(i=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,n,i),e.dispatchEvent(s)}}function dB(e){var t=Ya(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function hB(e,t,n){n===void 0&&(n=5);var i=!1,s=setTimeout(function(){i||uB(e,"transitionend",!0)},t+n),o=Rp(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),o()}}function sM(e,t,n,i){n==null&&(n=dB(e)||0);var s=hB(e,n,i),o=Rp(e,"transitionend",t);return function(){s(),o()}}function Kx(e,t){const n=Ya(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function fB(e,t){const n=Kx(e,"transitionDuration"),i=Kx(e,"transitionDelay"),s=sM(e,o=>{o.target===e&&(s(),t(o))},n+i)}function gB(e){e.offsetHeight}const Yx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function pB(e,t){const n=Yx(e),i=Yx(t);return s=>{n&&n(s),i&&i(s)}}function oM(e,t){return R.useMemo(()=>pB(e,t),[e,t])}function mB(e){return e&&"setState"in e?za.findDOMNode(e):e??null}const rM=oe.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:s,onExited:o,addEndListener:r,children:c,childRef:u,...h},f)=>{const p=R.useRef(null),m=oM(p,u),w=W=>{m(mB(W))},S=W=>_=>{W&&p.current&&W(p.current,_)},E=R.useCallback(S(e),[e]),x=R.useCallback(S(t),[t]),P=R.useCallback(S(n),[n]),M=R.useCallback(S(i),[i]),I=R.useCallback(S(s),[s]),U=R.useCallback(S(o),[o]),z=R.useCallback(S(r),[r]);return D.jsx(jo,{ref:f,...h,onEnter:E,onEntered:P,onEntering:x,onExit:M,onExited:U,onExiting:I,addEndListener:z,nodeRef:p,children:typeof c=="function"?(W,_)=>c(W,{..._,ref:w}):oe.cloneElement(c,{ref:w})})});rM.displayName="TransitionWrapper";function CB(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e},[e]),t}function Ep(e){const t=CB(e);return R.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const Tm=e=>R.forwardRef((t,n)=>D.jsx("div",{...t,ref:n,className:He(t.className,e)})),aM=Tm("h4");aM.displayName="DivStyledAsH4";const lM=R.forwardRef(({className:e,bsPrefix:t,as:n=aM,...i},s)=>(t=Qe(t,"alert-heading"),D.jsx(n,{ref:s,className:He(e,t),...i})));lM.displayName="AlertHeading";function vB(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e},[e]),t}function Fr(e){const t=vB(e);return R.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function yB(){const e=R.useRef(!0),t=R.useRef(()=>e.current);return R.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function wB(e){const t=R.useRef(null);return R.useEffect(()=>{t.current=e}),t.current}const SB=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",bB=typeof document<"u",Qx=bB||SB?R.useLayoutEffect:R.useEffect,RB=["as","disabled"];function EB(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function TB(e){return!e||e.trim()==="#"}function ob({tagName:e,disabled:t,href:n,target:i,rel:s,role:o,onClick:r,tabIndex:c=0,type:u}){e||(n!=null||i!=null||s!=null?e="a":e="button");const h={tagName:e};if(e==="button")return[{type:u||"button",disabled:t},h];const f=m=>{if((t||e==="a"&&TB(n))&&m.preventDefault(),t){m.stopPropagation();return}r?.(m)},p=m=>{m.key===" "&&(m.preventDefault(),f(m))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:c,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?s:void 0,onClick:f,onKeyDown:p},h]}const xB=R.forwardRef((e,t)=>{let{as:n,disabled:i}=e,s=EB(e,RB);const[o,{tagName:r}]=ob(Object.assign({tagName:n,disabled:i},s));return D.jsx(r,Object.assign({},s,o,{ref:t}))});xB.displayName="Button";const DB=["onKeyDown"];function AB(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function FB(e){return!e||e.trim()==="#"}const cM=R.forwardRef((e,t)=>{let{onKeyDown:n}=e,i=AB(e,DB);const[s]=ob(Object.assign({tagName:"a"},i)),o=Fr(r=>{s.onKeyDown(r),n?.(r)});return FB(i.href)||i.role==="button"?D.jsx("a",Object.assign({ref:t},i,s,{onKeyDown:o})):D.jsx("a",Object.assign({ref:t},i,{onKeyDown:n}))});cM.displayName="Anchor";const uM=R.forwardRef(({className:e,bsPrefix:t,as:n=cM,...i},s)=>(t=Qe(t,"alert-link"),D.jsx(n,{ref:s,className:He(e,t),...i})));uM.displayName="AlertLink";const PB={[xr]:"show",[Ga]:"show"},fh=R.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...s},o)=>{const r={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},c=R.useCallback((u,h)=>{gB(u),i?.(u,h)},[i]);return D.jsx(rM,{ref:o,addEndListener:fB,...r,onEnter:c,childRef:Em(t),children:(u,h)=>R.cloneElement(t,{...h,className:He("fade",e,t.props.className,PB[u],n[u])})})});fh.displayName="Fade";const MB={"aria-label":Po.string,onClick:Po.func,variant:Po.oneOf(["white"])},xm=R.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},s)=>D.jsx("button",{ref:s,type:"button",className:He("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));xm.displayName="CloseButton";xm.propTypes=MB;const dM=R.forwardRef((e,t)=>{const{bsPrefix:n,show:i=!0,closeLabel:s="Close alert",closeVariant:o,className:r,children:c,variant:u="primary",onClose:h,dismissible:f,transition:p=fh,...m}=j2(e,{show:"onClose"}),w=Qe(n,"alert"),S=Ep(P=>{h&&h(!1,P)}),E=p===!0?fh:p,x=D.jsxs("div",{role:"alert",...E?void 0:m,ref:t,className:He(r,w,u&&`${w}-${u}`,f&&`${w}-dismissible`),children:[f&&D.jsx(xm,{onClick:S,"aria-label":s,variant:o}),c]});return E?D.jsx(E,{unmountOnExit:!0,...m,ref:void 0,in:i,children:x}):i?x:null});dM.displayName="Alert";const hM=Object.assign(dM,{Link:uM,Heading:lM}),al=R.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:i,className:s,as:o="span",...r},c)=>{const u=Qe(e,"badge");return D.jsx(o,{ref:c,...r,className:He(s,u,n&&"rounded-pill",i&&`text-${i}`,t&&`bg-${t}`)})});al.displayName="Badge";const Rn=R.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:s=!1,disabled:o=!1,className:r,...c},u)=>{const h=Qe(t,"btn"),[f,{tagName:p}]=ob({tagName:e,disabled:o,...c}),m=p;return D.jsx(m,{...f,...c,ref:u,disabled:o,className:He(r,h,s&&"active",n&&`${h}-${n}`,i&&`${h}-${i}`,c.href&&o&&"disabled")})});Rn.displayName="Button";const rb=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Qe(t,"card-body"),D.jsx(n,{ref:s,className:He(e,t),...i})));rb.displayName="CardBody";const fM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Qe(t,"card-footer"),D.jsx(n,{ref:s,className:He(e,t),...i})));fM.displayName="CardFooter";const gM=R.createContext(null);gM.displayName="CardHeaderContext";const pM=R.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},s)=>{const o=Qe(e,"card-header"),r=R.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return D.jsx(gM.Provider,{value:r,children:D.jsx(n,{ref:s,...i,className:He(t,o)})})});pM.displayName="CardHeader";const mM=R.forwardRef(({bsPrefix:e,className:t,variant:n,as:i="img",...s},o)=>{const r=Qe(e,"card-img");return D.jsx(i,{ref:o,className:He(n?`${r}-${n}`:r,t),...s})});mM.displayName="CardImg";const CM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Qe(t,"card-img-overlay"),D.jsx(n,{ref:s,className:He(e,t),...i})));CM.displayName="CardImgOverlay";const vM=R.forwardRef(({className:e,bsPrefix:t,as:n="a",...i},s)=>(t=Qe(t,"card-link"),D.jsx(n,{ref:s,className:He(e,t),...i})));vM.displayName="CardLink";const IB=Tm("h6"),yM=R.forwardRef(({className:e,bsPrefix:t,as:n=IB,...i},s)=>(t=Qe(t,"card-subtitle"),D.jsx(n,{ref:s,className:He(e,t),...i})));yM.displayName="CardSubtitle";const wM=R.forwardRef(({className:e,bsPrefix:t,as:n="p",...i},s)=>(t=Qe(t,"card-text"),D.jsx(n,{ref:s,className:He(e,t),...i})));wM.displayName="CardText";const _B=Tm("h5"),SM=R.forwardRef(({className:e,bsPrefix:t,as:n=_B,...i},s)=>(t=Qe(t,"card-title"),D.jsx(n,{ref:s,className:He(e,t),...i})));SM.displayName="CardTitle";const bM=R.forwardRef(({bsPrefix:e,className:t,bg:n,text:i,border:s,body:o=!1,children:r,as:c="div",...u},h)=>{const f=Qe(e,"card");return D.jsx(c,{ref:h,...u,className:He(t,f,n&&`bg-${n}`,i&&`text-${i}`,s&&`border-${s}`),children:o?D.jsx(rb,{children:r}):r})});bM.displayName="Card";const ri=Object.assign(bM,{Img:mM,Title:SM,Subtitle:yM,Body:rb,Link:vM,Text:wM,Header:pM,Footer:fM,ImgOverlay:CM});function kB(e){const t=R.useRef(e);return t.current=e,t}function LB(e){const t=kB(e);R.useEffect(()=>()=>t.current(),[])}function OB(e,t){let n=0;return R.Children.map(e,i=>R.isValidElement(i)?t(i,n++):i)}function VB(e,t){return R.Children.toArray(e).some(n=>R.isValidElement(n)&&n.type===t)}function NB({as:e,bsPrefix:t,className:n,...i}){t=Qe(t,"col");const s=eM(),o=tM(),r=[],c=[];return s.forEach(u=>{const h=i[u];delete i[u];let f,p,m;typeof h=="object"&&h!=null?{span:f,offset:p,order:m}=h:f=h;const w=u!==o?`-${u}`:"";f&&r.push(f===!0?`${t}${w}`:`${t}${w}-${f}`),m!=null&&c.push(`order${w}-${m}`),p!=null&&c.push(`offset${w}-${p}`)}),[{...i,className:He(n,...r,...c)},{as:e,bsPrefix:t,spans:r}]}const bt=R.forwardRef((e,t)=>{const[{className:n,...i},{as:s="div",bsPrefix:o,spans:r}]=NB(e);return D.jsx(s,{...i,ref:t,className:He(n,!r.length&&o)})});bt.displayName="Col";const RM=R.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:i,...s},o)=>{const r=Qe(e,"container"),c=typeof t=="string"?`-${t}`:"-fluid";return D.jsx(n,{ref:o,...s,className:He(i,t?`${r}${c}`:r)})});RM.displayName="Container";var BB=Function.prototype.bind.call(Function.prototype.call,[].slice);function yc(e,t){return BB(e.querySelectorAll(t))}function Xx(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const GB="data-rr-ui-";function HB(e){return`${GB}${e}`}const EM=R.createContext(hu?window:void 0);EM.Provider;function ab(){return R.useContext(EM)}const TM=R.createContext(null);TM.displayName="InputGroupContext";const zB={type:Po.string,tooltip:Po.bool,as:Po.elementType},Dm=R.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...s},o)=>D.jsx(e,{...s,ref:o,className:He(t,`${n}-${i?"tooltip":"feedback"}`)}));Dm.displayName="Feedback";Dm.propTypes=zB;const Oo=R.createContext({}),jh=R.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:s=!1,isInvalid:o=!1,as:r="input",...c},u)=>{const{controlId:h}=R.useContext(Oo);return t=Qe(t,"form-check-input"),D.jsx(r,{...c,ref:u,type:i,id:e||h,className:He(n,t,s&&"is-valid",o&&"is-invalid")})});jh.displayName="FormCheckInput";const Tp=R.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},s)=>{const{controlId:o}=R.useContext(Oo);return e=Qe(e,"form-check-label"),D.jsx("label",{...i,ref:s,htmlFor:n||o,className:He(t,e)})});Tp.displayName="FormCheckLabel";const xM=R.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:s=!1,disabled:o=!1,isValid:r=!1,isInvalid:c=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:f,className:p,style:m,title:w="",type:S="checkbox",label:E,children:x,as:P="input",...M},I)=>{t=Qe(t,"form-check"),n=Qe(n,"form-switch");const{controlId:U}=R.useContext(Oo),z=R.useMemo(()=>({controlId:e||U}),[U,e]),W=!x&&E!=null&&E!==!1||VB(x,Tp),_=D.jsx(jh,{...M,type:S==="switch"?"checkbox":S,ref:I,isValid:r,isInvalid:c,disabled:o,as:P});return D.jsx(Oo.Provider,{value:z,children:D.jsx("div",{style:m,className:He(p,W&&t,i&&`${t}-inline`,s&&`${t}-reverse`,S==="switch"&&n),children:x||D.jsxs(D.Fragment,{children:[_,W&&D.jsx(Tp,{title:w,children:E}),h&&D.jsx(Dm,{type:f,tooltip:u,children:h})]})})})});xM.displayName="FormCheck";const xp=Object.assign(xM,{Input:jh,Label:Tp}),DM=R.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:s,className:o,isValid:r=!1,isInvalid:c=!1,plaintext:u,readOnly:h,as:f="input",...p},m)=>{const{controlId:w}=R.useContext(Oo);return e=Qe(e,"form-control"),D.jsx(f,{...p,type:t,size:i,ref:m,readOnly:h,id:s||w,className:He(o,u?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,r&&"is-valid",c&&"is-invalid")})});DM.displayName="FormControl";const UB=Object.assign(DM,{Feedback:Dm}),AM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Qe(t,"form-floating"),D.jsx(n,{ref:s,className:He(e,t),...i})));AM.displayName="FormFloating";const lb=R.forwardRef(({controlId:e,as:t="div",...n},i)=>{const s=R.useMemo(()=>({controlId:e}),[e]);return D.jsx(Oo.Provider,{value:s,children:D.jsx(t,{...n,ref:i})})});lb.displayName="FormGroup";const FM=R.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:s,htmlFor:o,...r},c)=>{const{controlId:u}=R.useContext(Oo);t=Qe(t,"form-label");let h="col-form-label";typeof n=="string"&&(h=`${h} ${h}-${n}`);const f=He(s,t,i&&"visually-hidden",n&&h);return o=o||u,n?D.jsx(bt,{ref:c,as:"label",className:f,htmlFor:o,...r}):D.jsx(e,{ref:c,className:f,htmlFor:o,...r})});FM.displayName="FormLabel";const PM=R.forwardRef(({bsPrefix:e,className:t,id:n,...i},s)=>{const{controlId:o}=R.useContext(Oo);return e=Qe(e,"form-range"),D.jsx("input",{...i,type:"range",ref:s,className:He(t,e),id:n||o})});PM.displayName="FormRange";const MM=R.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:s=!1,isInvalid:o=!1,id:r,...c},u)=>{const{controlId:h}=R.useContext(Oo);return e=Qe(e,"form-select"),D.jsx("select",{...c,size:n,ref:u,className:He(i,e,t&&`${e}-${t}`,s&&"is-valid",o&&"is-invalid"),id:r||h})});MM.displayName="FormSelect";const IM=R.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...s},o)=>(e=Qe(e,"form-text"),D.jsx(n,{...s,ref:o,className:He(t,e,i&&"text-muted")})));IM.displayName="FormText";const _M=R.forwardRef((e,t)=>D.jsx(xp,{...e,ref:t,type:"switch"}));_M.displayName="Switch";const WB=Object.assign(_M,{Input:xp.Input,Label:xp.Label}),kM=R.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:s,...o},r)=>(e=Qe(e,"form-floating"),D.jsxs(lb,{ref:r,className:He(t,e),controlId:i,...o,children:[n,D.jsx("label",{htmlFor:i,children:s})]})));kM.displayName="FloatingLabel";const jB={_ref:Po.any,validated:Po.bool,as:Po.elementType},cb=R.forwardRef(({className:e,validated:t,as:n="form",...i},s)=>D.jsx(n,{...i,ref:s,className:He(e,t&&"was-validated")}));cb.displayName="Form";cb.propTypes=jB;const we=Object.assign(cb,{Group:lb,Control:UB,Floating:AM,Check:xp,Switch:WB,Label:FM,Text:IM,Range:PM,Select:MM,FloatingLabel:kM}),Am=R.forwardRef(({className:e,bsPrefix:t,as:n="span",...i},s)=>(t=Qe(t,"input-group-text"),D.jsx(n,{ref:s,className:He(e,t),...i})));Am.displayName="InputGroupText";const $B=e=>D.jsx(Am,{children:D.jsx(jh,{type:"checkbox",...e})}),qB=e=>D.jsx(Am,{children:D.jsx(jh,{type:"radio",...e})}),LM=R.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:i,as:s="div",...o},r)=>{e=Qe(e,"input-group");const c=R.useMemo(()=>({}),[]);return D.jsx(TM.Provider,{value:c,children:D.jsx(s,{ref:r,...o,className:He(i,e,t&&`${e}-${t}`,n&&"has-validation")})})});LM.displayName="InputGroup";const Dr=Object.assign(LM,{Text:Am,Radio:qB,Checkbox:$B}),Zx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function KB(e,t){const n=Zx(e),i=Zx(t);return s=>{n&&n(s),i&&i(s)}}function ub(e,t){return R.useMemo(()=>KB(e,t),[e,t])}var _g;function Jx(e){if((!_g&&_g!==0||e)&&hu){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),_g=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return _g}function YB(){return R.useState(null)}function Cy(e){e===void 0&&(e=Rm());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function QB(e){const t=R.useRef(e);return t.current=e,t}function XB(e){const t=QB(e);R.useEffect(()=>()=>t.current(),[])}function ZB(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const eD=HB("modal-open");class db{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return ZB(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[i]:s.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(Ya(s,i)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(eD,""),Ya(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(eD),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const vy=(e,t)=>hu?e==null?(t||Rm()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function JB(e,t){const n=ab(),[i,s]=R.useState(()=>vy(e,n?.document));if(!i){const o=vy(e);o&&s(o)}return R.useEffect(()=>{},[t,i]),R.useEffect(()=>{const o=vy(e);o!==i&&s(o)},[e,i]),i}function eG({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:s}){const o=R.useRef(null),r=R.useRef(t),c=Fr(n);R.useEffect(()=>{t?r.current=!0:c(o.current)},[t,c]);const u=ub(o,Em(e)),h=R.cloneElement(e,{ref:u});return t?h:s||!r.current&&i?null:h}const tG=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function nG(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function iG(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:s,onExiting:o,onExited:r,addEndListener:c,children:u}=e,h=nG(e,tG);const f=R.useRef(null),p=ub(f,Em(u)),m=U=>z=>{U&&f.current&&U(f.current,z)},w=R.useCallback(m(t),[t]),S=R.useCallback(m(n),[n]),E=R.useCallback(m(i),[i]),x=R.useCallback(m(s),[s]),P=R.useCallback(m(o),[o]),M=R.useCallback(m(r),[r]),I=R.useCallback(m(c),[c]);return Object.assign({},h,{nodeRef:f},t&&{onEnter:w},n&&{onEntering:S},i&&{onEntered:E},s&&{onExit:x},o&&{onExiting:P},r&&{onExited:M},c&&{addEndListener:I},{children:typeof u=="function"?(U,z)=>u(U,Object.assign({},z,{ref:p})):R.cloneElement(u,{ref:p})})}const sG=["component"];function oG(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}const rG=R.forwardRef((e,t)=>{let{component:n}=e,i=oG(e,sG);const s=iG(i);return D.jsx(n,Object.assign({ref:t},s))});function aG({in:e,onTransition:t}){const n=R.useRef(null),i=R.useRef(!0),s=Fr(t);return Qx(()=>{if(!n.current)return;let o=!1;return s({in:e,element:n.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[e,s]),Qx(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function lG({children:e,in:t,onExited:n,onEntered:i,transition:s}){const[o,r]=R.useState(!t);t&&o&&r(!1);const c=aG({in:!!t,onTransition:h=>{const f=()=>{h.isStale()||(h.in?i?.(h.element,h.initial):(r(!0),n?.(h.element)))};Promise.resolve(s(h)).then(f,p=>{throw h.in||r(!0),p})}}),u=ub(c,Em(e));return o&&!t?null:R.cloneElement(e,{ref:u})}function tD(e,t,n){return e?D.jsx(rG,Object.assign({},n,{component:e})):t?D.jsx(lG,Object.assign({},n,{transition:t})):D.jsx(eG,Object.assign({},n))}const cG=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function uG(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}let yy;function dG(e){return yy||(yy=new db({ownerDocument:e?.document})),yy}function hG(e){const t=ab(),n=e||dG(t),i=R.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:R.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:R.useCallback(s=>{i.current.backdrop=s},[])})}const OM=R.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:s,style:o,children:r,backdrop:c=!0,keyboard:u=!0,onBackdropClick:h,onEscapeKeyDown:f,transition:p,runTransition:m,backdropTransition:w,runBackdropTransition:S,autoFocus:E=!0,enforceFocus:x=!0,restoreFocus:P=!0,restoreFocusOptions:M,renderDialog:I,renderBackdrop:U=Ie=>D.jsx("div",Object.assign({},Ie)),manager:z,container:W,onShow:_,onHide:F=()=>{},onExit:k,onExited:O,onExiting:N,onEnter:H,onEntering:V,onEntered:ve}=e,pe=uG(e,cG);const q=ab(),ie=JB(W),se=hG(z),be=yB(),G=wB(n),[Z,le]=R.useState(!n),te=R.useRef(null);R.useImperativeHandle(t,()=>se,[se]),hu&&!G&&n&&(te.current=Cy(q?.document)),n&&Z&&le(!1);const me=Fr(()=>{if(se.add(),zt.current=Rp(document,"keydown",et),We.current=Rp(document,"focus",()=>setTimeout(xe),!0),_&&_(),E){var Ie,ut;const ht=Cy((Ie=(ut=se.dialog)==null?void 0:ut.ownerDocument)!=null?Ie:q?.document);se.dialog&&ht&&!Xx(se.dialog,ht)&&(te.current=ht,se.dialog.focus())}}),Te=Fr(()=>{if(se.remove(),zt.current==null||zt.current(),We.current==null||We.current(),P){var Ie;(Ie=te.current)==null||Ie.focus==null||Ie.focus(M),te.current=null}});R.useEffect(()=>{!n||!ie||me()},[n,ie,me]),R.useEffect(()=>{Z&&Te()},[Z,Te]),XB(()=>{Te()});const xe=Fr(()=>{if(!x||!be()||!se.isTopModal())return;const Ie=Cy(q?.document);se.dialog&&Ie&&!Xx(se.dialog,Ie)&&se.dialog.focus()}),st=Fr(Ie=>{Ie.target===Ie.currentTarget&&(h?.(Ie),c===!0&&F())}),et=Fr(Ie=>{u&&lB(Ie)&&se.isTopModal()&&(f?.(Ie),Ie.defaultPrevented||F())}),We=R.useRef(),zt=R.useRef(),gt=(...Ie)=>{le(!0),O?.(...Ie)};if(!ie)return null;const kt=Object.assign({role:i,ref:se.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},pe,{style:o,className:s,tabIndex:-1});let Zt=I?I(kt):D.jsx("div",Object.assign({},kt,{children:R.cloneElement(r,{role:"document"})}));Zt=tD(p,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:k,onExiting:N,onExited:gt,onEnter:H,onEntering:V,onEntered:ve,children:Zt});let Fe=null;return c&&(Fe=U({ref:se.setBackdropRef,onClick:st}),Fe=tD(w,S,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Fe})),D.jsx(D.Fragment,{children:za.createPortal(D.jsxs(D.Fragment,{children:[Fe,Zt]}),ie)})});OM.displayName="Modal";const fG=Object.assign(OM,{Manager:db});function gG(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function pG(e,t){e.classList?e.classList.add(t):gG(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function nD(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function mG(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=nD(e.className,t):e.setAttribute("class",nD(e.className&&e.className.baseVal||"",t))}const wc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class CG extends db{adjustAndStore(t,n,i){const s=n.style[t];n.dataset[t]=s,Ya(n,{[t]:`${parseFloat(Ya(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],Ya(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(pG(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";yc(n,wc.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth)),yc(n,wc.STICKY_CONTENT).forEach(o=>this.adjustAndStore(s,o,-t.scrollBarWidth)),yc(n,wc.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(s,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();mG(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";yc(n,wc.FIXED_CONTENT).forEach(o=>this.restore(i,o)),yc(n,wc.STICKY_CONTENT).forEach(o=>this.restore(s,o)),yc(n,wc.NAVBAR_TOGGLER).forEach(o=>this.restore(s,o))}}let wy;function vG(e){return wy||(wy=new CG(e)),wy}const VM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Qe(t,"modal-body"),D.jsx(n,{ref:s,className:He(e,t),...i})));VM.displayName="ModalBody";const NM=R.createContext({onHide(){}}),hb=R.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:s,fullscreen:o,children:r,scrollable:c,...u},h)=>{e=Qe(e,"modal");const f=`${e}-dialog`,p=typeof o=="string"?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return D.jsx("div",{...u,ref:h,className:He(f,t,s&&`${e}-${s}`,i&&`${f}-centered`,c&&`${f}-scrollable`,o&&p),children:D.jsx("div",{className:He(`${e}-content`,n),children:r})})});hb.displayName="ModalDialog";const BM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Qe(t,"modal-footer"),D.jsx(n,{ref:s,className:He(e,t),...i})));BM.displayName="ModalFooter";const GM=R.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:s,...o},r)=>{const c=R.useContext(NM),u=Ep(()=>{c?.onHide(),i?.()});return D.jsxs("div",{ref:r,...o,children:[s,n&&D.jsx(xm,{"aria-label":e,variant:t,onClick:u})]})});GM.displayName="AbstractModalHeader";const HM=R.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...s},o)=>(e=Qe(e,"modal-header"),D.jsx(GM,{ref:o,...s,className:He(t,e),closeLabel:n,closeButton:i})));HM.displayName="ModalHeader";const yG=Tm("h4"),zM=R.forwardRef(({className:e,bsPrefix:t,as:n=yG,...i},s)=>(t=Qe(t,"modal-title"),D.jsx(n,{ref:s,className:He(e,t),...i})));zM.displayName="ModalTitle";function wG(e){return D.jsx(fh,{...e,timeout:null})}function SG(e){return D.jsx(fh,{...e,timeout:null})}const UM=R.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:s,children:o,dialogAs:r=hb,"data-bs-theme":c,"aria-labelledby":u,"aria-describedby":h,"aria-label":f,show:p=!1,animation:m=!0,backdrop:w=!0,keyboard:S=!0,onEscapeKeyDown:E,onShow:x,onHide:P,container:M,autoFocus:I=!0,enforceFocus:U=!0,restoreFocus:z=!0,restoreFocusOptions:W,onEntered:_,onExit:F,onExiting:k,onEnter:O,onEntering:N,onExited:H,backdropClassName:V,manager:ve,...pe},q)=>{const[ie,se]=R.useState({}),[be,G]=R.useState(!1),Z=R.useRef(!1),le=R.useRef(!1),te=R.useRef(null),[me,Te]=YB(),xe=oM(q,Te),st=Ep(P),et=Y2();e=Qe(e,"modal");const We=R.useMemo(()=>({onHide:st}),[st]);function zt(){return ve||vG({isRTL:et})}function gt(_e){if(!hu)return;const Ke=zt().getScrollbarWidth()>0,qe=_e.scrollHeight>Rm(_e).documentElement.clientHeight;se({paddingRight:Ke&&!qe?Jx():void 0,paddingLeft:!Ke&&qe?Jx():void 0})}const kt=Ep(()=>{me&&gt(me.dialog)});LB(()=>{_w(window,"resize",kt),te.current==null||te.current()});const Zt=()=>{Z.current=!0},Fe=_e=>{Z.current&&me&&_e.target===me.dialog&&(le.current=!0),Z.current=!1},Ie=()=>{G(!0),te.current=sM(me.dialog,()=>{G(!1)})},ut=_e=>{_e.target===_e.currentTarget&&Ie()},ht=_e=>{if(w==="static"){ut(_e);return}if(le.current||_e.target!==_e.currentTarget){le.current=!1;return}P?.()},je=_e=>{S?E?.(_e):(_e.preventDefault(),w==="static"&&Ie())},Et=(_e,Ke)=>{_e&&gt(_e),O?.(_e,Ke)},Lt=_e=>{te.current==null||te.current(),F?.(_e)},Mt=(_e,Ke)=>{N?.(_e,Ke),iM(window,"resize",kt)},Kt=_e=>{_e&&(_e.style.display=""),H?.(_e),_w(window,"resize",kt)},Tn=R.useCallback(_e=>D.jsx("div",{..._e,className:He(`${e}-backdrop`,V,!m&&"show")}),[m,V,e]),ci={...n,...ie};ci.display="block";const eo=_e=>D.jsx("div",{role:"dialog",..._e,style:ci,className:He(t,e,be&&`${e}-static`,!m&&"show"),onClick:w?ht:void 0,onMouseUp:Fe,"data-bs-theme":c,"aria-label":f,"aria-labelledby":u,"aria-describedby":h,children:D.jsx(r,{...pe,onMouseDown:Zt,className:i,contentClassName:s,children:o})});return D.jsx(NM.Provider,{value:We,children:D.jsx(fG,{show:p,ref:xe,backdrop:w,container:M,keyboard:!0,autoFocus:I,enforceFocus:U,restoreFocus:z,restoreFocusOptions:W,onEscapeKeyDown:je,onShow:x,onHide:P,onEnter:Et,onEntering:Mt,onEntered:_,onExit:Lt,onExiting:k,onExited:Kt,manager:zt(),transition:m?wG:void 0,backdropTransition:m?SG:void 0,renderBackdrop:Tn,renderDialog:eo})})});UM.displayName="Modal";const pi=Object.assign(UM,{Body:VM,Header:HM,Title:zM,Footer:BM,Dialog:hb,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),iD=1e3;function bG(e,t,n){const i=(e-t)/(n-t)*100;return Math.round(i*iD)/iD}function sD({min:e,now:t,max:n,label:i,visuallyHidden:s,striped:o,animated:r,className:c,style:u,variant:h,bsPrefix:f,...p},m){return D.jsx("div",{ref:m,...p,role:"progressbar",className:He(c,`${f}-bar`,{[`bg-${h}`]:h,[`${f}-bar-animated`]:r,[`${f}-bar-striped`]:r||o}),style:{width:`${bG(t,e,n)}%`,...u},"aria-valuenow":t,"aria-valuemin":e,"aria-valuemax":n,children:s?D.jsx("span",{className:"visually-hidden",children:i}):i})}const WM=R.forwardRef(({isChild:e=!1,...t},n)=>{const i={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...t};if(i.bsPrefix=Qe(i.bsPrefix,"progress"),e)return sD(i,n);const{min:s,now:o,max:r,label:c,visuallyHidden:u,striped:h,animated:f,bsPrefix:p,variant:m,className:w,children:S,...E}=i;return D.jsx("div",{ref:n,...E,className:He(w,p),children:S?OB(S,x=>R.cloneElement(x,{isChild:!0})):sD({min:s,now:o,max:r,label:c,visuallyHidden:u,striped:h,animated:f,bsPrefix:p,variant:m},n)})});WM.displayName="ProgressBar";const mi=R.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},s)=>{const o=Qe(e,"row"),r=eM(),c=tM(),u=`${o}-cols`,h=[];return r.forEach(f=>{const p=i[f];delete i[f];let m;p!=null&&typeof p=="object"?{cols:m}=p:m=p;const w=f!==c?`-${f}`:"";m!=null&&h.push(`${u}${w}-${m}`)}),D.jsx(n,{ref:s,...i,className:He(t,o,...h)})});mi.displayName="Row";const Fm=R.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:i,as:s="div",className:o,...r},c)=>{e=Qe(e,"spinner");const u=`${e}-${n}`;return D.jsx(s,{ref:c,...r,className:He(o,u,i&&`${u}-${i}`,t&&`text-${t}`)})});Fm.displayName="Spinner";const fb=R.createContext({});function gb(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const pb=typeof window<"u",jM=pb?R.useLayoutEffect:R.useEffect,Pm=R.createContext(null);function mb(e,t){e.indexOf(t)===-1&&e.push(t)}function Cb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Vo=(e,t,n)=>n>t?t:n<e?e:n;let vb=()=>{};const No={},$M=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function qM(e){return typeof e=="object"&&e!==null}const KM=e=>/^0[^.\s]+$/u.test(e);function yb(e){let t;return()=>(t===void 0&&(t=e()),t)}const ns=e=>e,RG=(e,t)=>n=>t(e(n)),$h=(...e)=>e.reduce(RG),gh=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class wb{constructor(){this.subscriptions=[]}add(t){return mb(this.subscriptions,t),()=>Cb(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let o=0;o<s;o++){const r=this.subscriptions[o];r&&r(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bs=e=>e*1e3,Gs=e=>e/1e3;function YM(e,t){return t?e*(1e3/t):0}const QM=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,EG=1e-7,TG=12;function xG(e,t,n,i,s){let o,r,c=0;do r=t+(n-t)/2,o=QM(r,i,s)-e,o>0?n=r:t=r;while(Math.abs(o)>EG&&++c<TG);return r}function qh(e,t,n,i){if(e===t&&n===i)return ns;const s=o=>xG(o,0,1,e,n);return o=>o===0||o===1?o:QM(s(o),t,i)}const XM=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ZM=e=>t=>1-e(1-t),JM=qh(.33,1.53,.69,.99),Sb=ZM(JM),e1=XM(Sb),t1=e=>(e*=2)<1?.5*Sb(e):.5*(2-Math.pow(2,-10*(e-1))),bb=e=>1-Math.sin(Math.acos(e)),n1=ZM(bb),i1=XM(bb),DG=qh(.42,0,1,1),AG=qh(0,0,.58,1),s1=qh(.42,0,.58,1),FG=e=>Array.isArray(e)&&typeof e[0]!="number",o1=e=>Array.isArray(e)&&typeof e[0]=="number",PG={linear:ns,easeIn:DG,easeInOut:s1,easeOut:AG,circIn:bb,circInOut:i1,circOut:n1,backIn:Sb,backInOut:e1,backOut:JM,anticipate:t1},MG=e=>typeof e=="string",oD=e=>{if(o1(e)){vb(e.length===4);const[t,n,i,s]=e;return qh(t,n,i,s)}else if(MG(e))return PG[e];return e},kg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function IG(e,t){let n=new Set,i=new Set,s=!1,o=!1;const r=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(f){r.has(f)&&(h.schedule(f),e()),f(c)}const h={schedule:(f,p=!1,m=!1)=>{const S=m&&s?n:i;return p&&r.add(f),S.has(f)||S.add(f),f},cancel:f=>{i.delete(f),r.delete(f)},process:f=>{if(c=f,s){o=!0;return}s=!0,[n,i]=[i,n],n.forEach(u),n.clear(),s=!1,o&&(o=!1,h.process(f))}};return h}const _G=40;function r1(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,r=kg.reduce((I,U)=>(I[U]=IG(o),I),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:f,update:p,preRender:m,render:w,postRender:S}=r,E=()=>{const I=No.useManualTiming?s.timestamp:performance.now();n=!1,No.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(I-s.timestamp,_G),1)),s.timestamp=I,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),f.process(s),p.process(s),m.process(s),w.process(s),S.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(E))},x=()=>{n=!0,i=!0,s.isProcessing||e(E)};return{schedule:kg.reduce((I,U)=>{const z=r[U];return I[U]=(W,_=!1,F=!1)=>(n||x(),z.schedule(W,_,F)),I},{}),cancel:I=>{for(let U=0;U<kg.length;U++)r[kg[U]].cancel(I)},state:s,steps:r}}const{schedule:Ht,cancel:Nr,state:Gn,steps:Sy}=r1(typeof requestAnimationFrame<"u"?requestAnimationFrame:ns,!0);let tp;function kG(){tp=void 0}const yi={now:()=>(tp===void 0&&yi.set(Gn.isProcessing||No.useManualTiming?Gn.timestamp:performance.now()),tp),set:e=>{tp=e,queueMicrotask(kG)}},a1=e=>t=>typeof t=="string"&&t.startsWith(e),Rb=a1("--"),LG=a1("var(--"),Eb=e=>LG(e)?OG.test(e.split("/*")[0].trim()):!1,OG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ph={...fu,transform:e=>Vo(0,1,e)},Lg={...fu,default:1},Yd=e=>Math.round(e*1e5)/1e5,Tb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VG(e){return e==null}const NG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xb=(e,t)=>n=>!!(typeof n=="string"&&NG.test(n)&&n.startsWith(e)||t&&!VG(n)&&Object.prototype.hasOwnProperty.call(n,t)),l1=(e,t,n)=>i=>{if(typeof i!="string")return i;const[s,o,r,c]=i.match(Tb);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(r),alpha:c!==void 0?parseFloat(c):1}},BG=e=>Vo(0,255,e),by={...fu,transform:e=>Math.round(BG(e))},Ua={test:xb("rgb","red"),parse:l1("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+by.transform(e)+", "+by.transform(t)+", "+by.transform(n)+", "+Yd(ph.transform(i))+")"};function GG(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const kw={test:xb("#"),parse:GG,transform:Ua.transform},Kh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Tr=Kh("deg"),Hs=Kh("%"),Ge=Kh("px"),HG=Kh("vh"),zG=Kh("vw"),rD={...Hs,parse:e=>Hs.parse(e)/100,transform:e=>Hs.transform(e*100)},Mc={test:xb("hsl","hue"),parse:l1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Hs.transform(Yd(t))+", "+Hs.transform(Yd(n))+", "+Yd(ph.transform(i))+")"},fn={test:e=>Ua.test(e)||kw.test(e)||Mc.test(e),parse:e=>Ua.test(e)?Ua.parse(e):Mc.test(e)?Mc.parse(e):kw.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ua.transform(e):Mc.transform(e),getAnimatableNone:e=>{const t=fn.parse(e);return t.alpha=0,fn.transform(t)}},UG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WG(e){return isNaN(e)&&typeof e=="string"&&(e.match(Tb)?.length||0)+(e.match(UG)?.length||0)>0}const c1="number",u1="color",jG="var",$G="var(",aD="${}",qG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mh(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let o=0;const c=t.replace(qG,u=>(fn.test(u)?(i.color.push(o),s.push(u1),n.push(fn.parse(u))):u.startsWith($G)?(i.var.push(o),s.push(jG),n.push(u)):(i.number.push(o),s.push(c1),n.push(parseFloat(u))),++o,aD)).split(aD);return{values:n,split:c,indexes:i,types:s}}function d1(e){return mh(e).values}function h1(e){const{split:t,types:n}=mh(e),i=t.length;return s=>{let o="";for(let r=0;r<i;r++)if(o+=t[r],s[r]!==void 0){const c=n[r];c===c1?o+=Yd(s[r]):c===u1?o+=fn.transform(s[r]):o+=s[r]}return o}}const KG=e=>typeof e=="number"?0:fn.test(e)?fn.getAnimatableNone(e):e;function YG(e){const t=d1(e);return h1(e)(t.map(KG))}const Br={test:WG,parse:d1,createTransformer:h1,getAnimatableNone:YG};function Ry(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function QG({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,o=0,r=0;if(!t)s=o=r=n;else{const c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;s=Ry(u,c,e+1/3),o=Ry(u,c,e),r=Ry(u,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(r*255),alpha:i}}function Dp(e,t){return n=>n>0?t:e}const jt=(e,t,n)=>e+(t-e)*n,Ey=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},XG=[kw,Ua,Mc],ZG=e=>XG.find(t=>t.test(e));function lD(e){const t=ZG(e);if(!t)return!1;let n=t.parse(e);return t===Mc&&(n=QG(n)),n}const cD=(e,t)=>{const n=lD(e),i=lD(t);if(!n||!i)return Dp(e,t);const s={...n};return o=>(s.red=Ey(n.red,i.red,o),s.green=Ey(n.green,i.green,o),s.blue=Ey(n.blue,i.blue,o),s.alpha=jt(n.alpha,i.alpha,o),Ua.transform(s))},Lw=new Set(["none","hidden"]);function JG(e,t){return Lw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function eH(e,t){return n=>jt(e,t,n)}function Db(e){return typeof e=="number"?eH:typeof e=="string"?Eb(e)?Dp:fn.test(e)?cD:iH:Array.isArray(e)?f1:typeof e=="object"?fn.test(e)?cD:tH:Dp}function f1(e,t){const n=[...e],i=n.length,s=e.map((o,r)=>Db(o)(o,t[r]));return o=>{for(let r=0;r<i;r++)n[r]=s[r](o);return n}}function tH(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=Db(e[s])(e[s],t[s]));return s=>{for(const o in i)n[o]=i[o](s);return n}}function nH(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],r=e.indexes[o][i[o]],c=e.values[r]??0;n[s]=c,i[o]++}return n}const iH=(e,t)=>{const n=Br.createTransformer(t),i=mh(e),s=mh(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Lw.has(e)&&!s.values.length||Lw.has(t)&&!i.values.length?JG(e,t):$h(f1(nH(i,s),s.values),n):Dp(e,t)};function g1(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?jt(e,t,n):Db(e)(e,t)}const sH=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Ht.update(t,n),stop:()=>Nr(t),now:()=>Gn.isProcessing?Gn.timestamp:yi.now()}},p1=(e,t,n=10)=>{let i="";const s=Math.max(Math.round(t/n),2);for(let o=0;o<s;o++)i+=Math.round(e(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Ap=2e4;function Ab(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Ap;)t+=n,i=e.next(t);return t>=Ap?1/0:t}function oH(e,t=100,n){const i=n({...e,keyframes:[0,t]}),s=Math.min(Ab(i),Ap);return{type:"keyframes",ease:o=>i.next(s*o).value/t,duration:Gs(s)}}const rH=5;function m1(e,t,n){const i=Math.max(t-rH,0);return YM(n-e(i),t-i)}const Xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ty=.001;function aH({duration:e=Xt.duration,bounce:t=Xt.bounce,velocity:n=Xt.velocity,mass:i=Xt.mass}){let s,o,r=1-t;r=Vo(Xt.minDamping,Xt.maxDamping,r),e=Vo(Xt.minDuration,Xt.maxDuration,Gs(e)),r<1?(s=h=>{const f=h*r,p=f*e,m=f-n,w=Ow(h,r),S=Math.exp(-p);return Ty-m/w*S},o=h=>{const p=h*r*e,m=p*n+n,w=Math.pow(r,2)*Math.pow(h,2)*e,S=Math.exp(-p),E=Ow(Math.pow(h,2),r);return(-s(h)+Ty>0?-1:1)*((m-w)*S)/E}):(s=h=>{const f=Math.exp(-h*e),p=(h-n)*e+1;return-Ty+f*p},o=h=>{const f=Math.exp(-h*e),p=(n-h)*(e*e);return f*p});const c=5/e,u=cH(s,o,c);if(e=Bs(e),isNaN(u))return{stiffness:Xt.stiffness,damping:Xt.damping,duration:e};{const h=Math.pow(u,2)*i;return{stiffness:h,damping:r*2*Math.sqrt(i*h),duration:e}}}const lH=12;function cH(e,t,n){let i=n;for(let s=1;s<lH;s++)i=i-e(i)/t(i);return i}function Ow(e,t){return e*Math.sqrt(1-t*t)}const uH=["duration","bounce"],dH=["stiffness","damping","mass"];function uD(e,t){return t.some(n=>e[n]!==void 0)}function hH(e){let t={velocity:Xt.velocity,stiffness:Xt.stiffness,damping:Xt.damping,mass:Xt.mass,isResolvedFromDuration:!1,...e};if(!uD(e,dH)&&uD(e,uH))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,o=2*Vo(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Xt.mass,stiffness:s,damping:o}}else{const n=aH(e);t={...t,...n,mass:Xt.mass},t.isResolvedFromDuration=!0}return t}function Fp(e=Xt.visualDuration,t=Xt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const o=n.keyframes[0],r=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:u,damping:h,mass:f,duration:p,velocity:m,isResolvedFromDuration:w}=hH({...n,velocity:-Gs(n.velocity||0)}),S=m||0,E=h/(2*Math.sqrt(u*f)),x=r-o,P=Gs(Math.sqrt(u/f)),M=Math.abs(x)<5;i||(i=M?Xt.restSpeed.granular:Xt.restSpeed.default),s||(s=M?Xt.restDelta.granular:Xt.restDelta.default);let I;if(E<1){const z=Ow(P,E);I=W=>{const _=Math.exp(-E*P*W);return r-_*((S+E*P*x)/z*Math.sin(z*W)+x*Math.cos(z*W))}}else if(E===1)I=z=>r-Math.exp(-P*z)*(x+(S+P*x)*z);else{const z=P*Math.sqrt(E*E-1);I=W=>{const _=Math.exp(-E*P*W),F=Math.min(z*W,300);return r-_*((S+E*P*x)*Math.sinh(F)+z*x*Math.cosh(F))/z}}const U={calculatedDuration:w&&p||null,next:z=>{const W=I(z);if(w)c.done=z>=p;else{let _=z===0?S:0;E<1&&(_=z===0?Bs(S):m1(I,z,W));const F=Math.abs(_)<=i,k=Math.abs(r-W)<=s;c.done=F&&k}return c.value=c.done?r:W,c},toString:()=>{const z=Math.min(Ab(U),Ap),W=p1(_=>U.next(z*_).value,z,30);return z+"ms "+W},toTransition:()=>{}};return U}Fp.applyToOptions=e=>{const t=oH(e,100,Fp);return e.ease=t.ease,e.duration=Bs(t.duration),e.type="keyframes",e};function Vw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:r,min:c,max:u,restDelta:h=.5,restSpeed:f}){const p=e[0],m={done:!1,value:p},w=F=>c!==void 0&&F<c||u!==void 0&&F>u,S=F=>c===void 0?u:u===void 0||Math.abs(c-F)<Math.abs(u-F)?c:u;let E=n*t;const x=p+E,P=r===void 0?x:r(x);P!==x&&(E=P-p);const M=F=>-E*Math.exp(-F/i),I=F=>P+M(F),U=F=>{const k=M(F),O=I(F);m.done=Math.abs(k)<=h,m.value=m.done?P:O};let z,W;const _=F=>{w(m.value)&&(z=F,W=Fp({keyframes:[m.value,S(m.value)],velocity:m1(I,F,m.value),damping:s,stiffness:o,restDelta:h,restSpeed:f}))};return _(0),{calculatedDuration:null,next:F=>{let k=!1;return!W&&z===void 0&&(k=!0,U(F),_(F)),z!==void 0&&F>=z?W.next(F-z):(!k&&U(F),m)}}}function fH(e,t,n){const i=[],s=n||No.mix||g1,o=e.length-1;for(let r=0;r<o;r++){let c=s(e[r],e[r+1]);if(t){const u=Array.isArray(t)?t[r]||ns:t;c=$h(u,c)}i.push(c)}return i}function gH(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const o=e.length;if(vb(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const r=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=fH(t,i,s),u=c.length,h=f=>{if(r&&f<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(f<e[p+1]);p++);const m=gh(e[p],e[p+1],f);return c[p](m)};return n?f=>h(Vo(e[0],e[o-1],f)):h}function pH(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=gh(0,t,i);e.push(jt(n,1,s))}}function mH(e){const t=[0];return pH(t,e.length-1),t}function CH(e,t){return e.map(n=>n*t)}function vH(e,t){return e.map(()=>t||s1).splice(0,e.length-1)}function Qd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=FG(i)?i.map(oD):oD(i),o={done:!1,value:t[0]},r=CH(n&&n.length===t.length?n:mH(t),e),c=gH(r,t,{ease:Array.isArray(s)?s:vH(t,s)});return{calculatedDuration:e,next:u=>(o.value=c(u),o.done=u>=e,o)}}const yH=e=>e!==null;function Fb(e,{repeat:t,repeatType:n="loop"},i,s=1){const o=e.filter(yH),c=s<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!c||i===void 0?o[c]:i}const wH={decay:Vw,inertia:Vw,tween:Qd,keyframes:Qd,spring:Fp};function C1(e){typeof e.type=="string"&&(e.type=wH[e.type])}class Pb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const SH=e=>e/100;class Mb extends Pb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==yi.now()&&this.tick(yi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;C1(t);const{type:n=Qd,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:r=0}=t;let{keyframes:c}=t;const u=n||Qd;u!==Qd&&typeof c[0]!="number"&&(this.mixKeyframes=$h(SH,g1(c[0],c[1])),c=[0,100]);const h=u({...t,keyframes:c});o==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-r})),h.calculatedDuration===null&&(h.calculatedDuration=Ab(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:r,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:w,type:S,onUpdate:E,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const P=this.currentTime-h*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?P<0:P>s;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let I=this.currentTime,U=i;if(p){const F=Math.min(this.currentTime,s)/c;let k=Math.floor(F),O=F%1;!O&&F>=1&&(O=1),O===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(m==="reverse"?(O=1-O,w&&(O-=w/c)):m==="mirror"&&(U=r)),I=Vo(0,1,O)*c}const z=M?{done:!1,value:f[0]}:U.next(I);o&&(z.value=o(z.value));let{done:W}=z;!M&&u!==null&&(W=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return _&&S!==Vw&&(z.value=Fb(f,this.options,x,this.speed)),E&&E(z.value),_&&this.finish(),z}then(t,n){return this.finished.then(t,n)}get duration(){return Gs(this.calculatedDuration)}get time(){return Gs(this.currentTime)}set time(t){t=Bs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(yi.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Gs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=sH,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(yi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function bH(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Wa=e=>e*180/Math.PI,Nw=e=>{const t=Wa(Math.atan2(e[1],e[0]));return Bw(t)},RH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Nw,rotateZ:Nw,skewX:e=>Wa(Math.atan(e[1])),skewY:e=>Wa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Bw=e=>(e=e%360,e<0&&(e+=360),e),dD=Nw,hD=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),fD=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),EH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hD,scaleY:fD,scale:e=>(hD(e)+fD(e))/2,rotateX:e=>Bw(Wa(Math.atan2(e[6],e[5]))),rotateY:e=>Bw(Wa(Math.atan2(-e[2],e[0]))),rotateZ:dD,rotate:dD,skewX:e=>Wa(Math.atan(e[4])),skewY:e=>Wa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Gw(e){return e.includes("scale")?1:0}function Hw(e,t){if(!e||e==="none")return Gw(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=EH,s=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=RH,s=c}if(!s)return Gw(t);const o=i[t],r=s[1].split(",").map(xH);return typeof o=="function"?o(r):r[o]}const TH=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Hw(n,t)};function xH(e){return parseFloat(e.trim())}const gu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pu=new Set(gu),gD=e=>e===fu||e===Ge,DH=new Set(["x","y","z"]),AH=gu.filter(e=>!DH.has(e));function FH(e){const t=[];return AH.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Qa={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Hw(t,"x"),y:(e,{transform:t})=>Hw(t,"y")};Qa.translateX=Qa.x;Qa.translateY=Qa.y;const Xa=new Set;let zw=!1,Uw=!1,Ww=!1;function v1(){if(Uw){const e=Array.from(Xa).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const s=FH(i);s.length&&(n.set(i,s),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([o,r])=>{i.getValue(o)?.set(r)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Uw=!1,zw=!1,Xa.forEach(e=>e.complete(Ww)),Xa.clear()}function y1(){Xa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Uw=!0)})}function PH(){Ww=!0,y1(),v1(),Ww=!1}class Ib{constructor(t,n,i,s,o,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=s,this.element=o,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(Xa.add(this),zw||(zw=!0,Ht.read(y1),Ht.resolveKeyframes(v1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:s}=this;if(t[0]===null){const o=s?.get(),r=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&n){const c=i.readValue(n,r);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=r),s&&o===void 0&&s.set(t[0])}bH(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Xa.delete(this)}cancel(){this.state==="scheduled"&&(Xa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const MH=e=>e.startsWith("--");function IH(e,t,n){MH(t)?e.style.setProperty(t,n):e.style[t]=n}const _H=yb(()=>window.ScrollTimeline!==void 0),kH={};function LH(e,t){const n=yb(e);return()=>kH[t]??n()}const w1=LH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hd=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,pD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hd([0,.65,.55,1]),circOut:Hd([.55,0,1,.45]),backIn:Hd([.31,.01,.66,-.59]),backOut:Hd([.33,1.53,.69,.99])};function S1(e,t){if(e)return typeof e=="function"?w1()?p1(e,t):"ease-out":o1(e)?Hd(e):Array.isArray(e)?e.map(n=>S1(n,t)||pD.easeOut):pD[e]}function OH(e,t,n,{delay:i=0,duration:s=300,repeat:o=0,repeatType:r="loop",ease:c="easeOut",times:u}={},h=void 0){const f={[t]:n};u&&(f.offset=u);const p=S1(c,s);Array.isArray(p)&&(f.easing=p);const m={delay:i,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:r==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),e.animate(f,m)}function b1(e){return typeof e=="function"&&"applyToOptions"in e}function VH({type:e,...t}){return b1(e)&&w1()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NH extends Pb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:s,pseudoElement:o,allowFlatten:r=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!o,this.allowFlatten=r,this.options=t,vb(typeof t.type!="string");const h=VH(t);this.animation=OH(n,i,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const f=Fb(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):IH(n,i,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Gs(Number(t))}get time(){return Gs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Bs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&_H()?(this.animation.timeline=t,ns):n(this)}}const R1={anticipate:t1,backInOut:e1,circInOut:i1};function BH(e){return e in R1}function GH(e){typeof e.ease=="string"&&BH(e.ease)&&(e.ease=R1[e.ease])}const mD=10;class HH extends NH{constructor(t){GH(t),C1(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:s,element:o,...r}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new Mb({...r,autoplay:!1}),u=Bs(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-mD).value,c.sample(u).value,mD),c.stop()}}const CD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Br.test(e)||e==="0")&&!e.startsWith("url("));function zH(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function UH(e,t,n,i){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],r=CD(s,t),c=CD(o,t);return!r||!c?!1:zH(e)||(n==="spring"||b1(n))&&i}function jw(e){e.duration=0,e.type}const WH=new Set(["opacity","clipPath","filter","transform"]),jH=yb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function $H(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:o,type:r}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return jH()&&n&&WH.has(n)&&(n!=="transform"||!h)&&!u&&!i&&s!=="mirror"&&o!==0&&r!=="inertia"}const qH=40;class KH extends Pb{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:r="loop",keyframes:c,name:u,motionValue:h,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=yi.now();const m={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:o,repeatType:r,name:u,motionValue:h,element:f,...p},w=f?.KeyframeResolver||Ib;this.keyframeResolver=new w(c,(S,E,x)=>this.onKeyframesResolved(S,E,m,!x),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,i,s){this.keyframeResolver=void 0;const{name:o,type:r,velocity:c,delay:u,isHandoff:h,onUpdate:f}=i;this.resolvedAt=yi.now(),UH(t,o,r,c)||((No.instantAnimations||!u)&&f?.(Fb(t,i,n)),t[0]=t[t.length-1],jw(i),i.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>qH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},w=!h&&$H(m)?new HH({...m,element:m.motionValue.owner.current}):new Mb(m);w.finished.then(()=>this.notifyFinished()).catch(ns),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),PH()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function QH(e){const t=YH.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}function E1(e,t,n=1){const[i,s]=QH(e);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const r=o.trim();return $M(r)?parseFloat(r):r}return Eb(s)?E1(s,t,n+1):s}function _b(e,t){return e?.[t]??e?.default??e}const T1=new Set(["width","height","top","left","right","bottom",...gu]),XH={test:e=>e==="auto",parse:e=>e},x1=e=>t=>t.test(e),D1=[fu,Ge,Hs,Tr,zG,HG,XH],vD=e=>D1.find(x1(e));function ZH(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||KM(e):!0}const JH=new Set(["brightness","contrast","saturate","opacity"]);function ez(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Tb)||[];if(!i)return e;const s=n.replace(i,"");let o=JH.has(t)?1:0;return i!==n&&(o*=100),t+"("+o+s+")"}const tz=/\b([a-z-]*)\(.*?\)/gu,$w={...Br,getAnimatableNone:e=>{const t=e.match(tz);return t?t.map(ez).join(" "):e}},yD={...fu,transform:Math.round},nz={rotate:Tr,rotateX:Tr,rotateY:Tr,rotateZ:Tr,scale:Lg,scaleX:Lg,scaleY:Lg,scaleZ:Lg,skew:Tr,skewX:Tr,skewY:Tr,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:ph,originX:rD,originY:rD,originZ:Ge},kb={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...nz,zIndex:yD,fillOpacity:ph,strokeOpacity:ph,numOctaves:yD},iz={...kb,color:fn,backgroundColor:fn,outlineColor:fn,fill:fn,stroke:fn,borderColor:fn,borderTopColor:fn,borderRightColor:fn,borderBottomColor:fn,borderLeftColor:fn,filter:$w,WebkitFilter:$w},A1=e=>iz[e];function F1(e,t){let n=A1(e);return n!==$w&&(n=Br),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const sz=new Set(["auto","none","0"]);function oz(e,t,n){let i=0,s;for(;i<e.length&&!s;){const o=e[i];typeof o=="string"&&!sz.has(o)&&mh(o).values.length&&(s=e[i]),i++}if(s&&n)for(const o of t)e[o]=F1(n,s)}class rz extends Ib{constructor(t,n,i,s,o){super(t,n,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),Eb(h))){const f=E1(h,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!T1.has(i)||t.length!==2)return;const[s,o]=t,r=vD(s),c=vD(o);if(r!==c)if(gD(r)&&gD(c))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else Qa[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||ZH(t[s]))&&i.push(s);i.length&&oz(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qa[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,r=i[o];i[o]=Qa[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function az(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const s=n?.[e]??i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const P1=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function M1(e){return qM(e)&&"offsetHeight"in e}const wD=30,lz=e=>!isNaN(parseFloat(e));class cz{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=yi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=yi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=lz(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new wb);const i=this.events[t].add(n);return t==="change"?()=>{i(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>wD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wD);return YM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zc(e,t){return new cz(e,t)}const{schedule:Lb}=r1(queueMicrotask,!1),ds={x:!1,y:!1};function I1(){return ds.x||ds.y}function uz(e){return e==="x"||e==="y"?ds[e]?null:(ds[e]=!0,()=>{ds[e]=!1}):ds.x||ds.y?null:(ds.x=ds.y=!0,()=>{ds.x=ds.y=!1})}function _1(e,t){const n=az(e),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[n,s,()=>i.abort()]}function SD(e){return!(e.pointerType==="touch"||I1())}function dz(e,t,n={}){const[i,s,o]=_1(e,n),r=c=>{if(!SD(c))return;const{target:u}=c,h=t(u,c);if(typeof h!="function"||!u)return;const f=p=>{SD(p)&&(h(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,s)};return i.forEach(c=>{c.addEventListener("pointerenter",r,s)}),o}const k1=(e,t)=>t?e===t?!0:k1(e,t.parentElement):!1,Ob=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,hz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fz(e){return hz.has(e.tagName)||e.tabIndex!==-1}const np=new WeakSet;function bD(e){return t=>{t.key==="Enter"&&e(t)}}function xy(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const gz=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=bD(()=>{if(np.has(n))return;xy(n,"down");const s=bD(()=>{xy(n,"up")}),o=()=>xy(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function RD(e){return Ob(e)&&!I1()}function pz(e,t,n={}){const[i,s,o]=_1(e,n),r=c=>{const u=c.currentTarget;if(!RD(c))return;np.add(u);const h=t(u,c),f=(w,S)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),np.has(u)&&np.delete(u),RD(w)&&typeof h=="function"&&h(w,{success:S})},p=w=>{f(w,u===window||u===document||n.useGlobalTarget||k1(u,w.target))},m=w=>{f(w,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",r,s),M1(c)&&(c.addEventListener("focus",h=>gz(h,s)),!fz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function L1(e){return qM(e)&&"ownerSVGElement"in e}function mz(e){return L1(e)&&e.tagName==="svg"}const Zn=e=>!!(e&&e.getVelocity),Cz=[...D1,fn,Br],vz=e=>Cz.find(x1(e)),Vb=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class yz extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=M1(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wz({children:e,isPresent:t,anchorX:n,root:i}){const s=R.useId(),o=R.useRef(null),r=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=R.useContext(Vb);return R.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:p,right:m}=r.current;if(t||!o.current||!u||!h)return;const w=n==="left"?`left: ${p}`:`right: ${m}`;o.current.dataset.motionPopId=s;const S=document.createElement("style");c&&(S.nonce=c);const E=i??document.head;return E.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{E.contains(S)&&E.removeChild(S)}},[t]),D.jsx(yz,{isPresent:t,childRef:o,sizeRef:r,children:R.cloneElement(e,{ref:o})})}const Sz=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:r,anchorX:c,root:u})=>{const h=gb(bz),f=R.useId();let p=!0,m=R.useMemo(()=>(p=!1,{id:f,initial:t,isPresent:n,custom:s,onExitComplete:w=>{h.set(w,!0);for(const S of h.values())if(!S)return;i&&i()},register:w=>(h.set(w,!1),()=>h.delete(w))}),[n,h,i]);return o&&p&&(m={...m}),R.useMemo(()=>{h.forEach((w,S)=>h.set(S,!1))},[n]),R.useEffect(()=>{!n&&!h.size&&i&&i()},[n]),r==="popLayout"&&(e=D.jsx(wz,{isPresent:n,anchorX:c,root:u,children:e})),D.jsx(Pm.Provider,{value:m,children:e})};function bz(){return new Map}function O1(e=!0){const t=R.useContext(Pm);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,o=R.useId();R.useEffect(()=>{if(e)return s(o)},[e]);const r=R.useCallback(()=>e&&i&&i(o),[o,i,e]);return!n&&i?[!1,r]:[!0]}const Og=e=>e.key||"";function ED(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const Fo=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:r=!1,anchorX:c="left",root:u})=>{const[h,f]=O1(r),p=R.useMemo(()=>ED(e),[e]),m=r&&!h?[]:p.map(Og),w=R.useRef(!0),S=R.useRef(p),E=gb(()=>new Map),[x,P]=R.useState(p),[M,I]=R.useState(p);jM(()=>{w.current=!1,S.current=p;for(let W=0;W<M.length;W++){const _=Og(M[W]);m.includes(_)?E.delete(_):E.get(_)!==!0&&E.set(_,!1)}},[M,m.length,m.join("-")]);const U=[];if(p!==x){let W=[...p];for(let _=0;_<M.length;_++){const F=M[_],k=Og(F);m.includes(k)||(W.splice(_,0,F),U.push(F))}return o==="wait"&&U.length&&(W=U),I(ED(W)),P(p),null}const{forceRender:z}=R.useContext(fb);return D.jsx(D.Fragment,{children:M.map(W=>{const _=Og(W),F=r&&!h?!1:p===M||m.includes(_),k=()=>{if(E.has(_))E.set(_,!0);else return;let O=!0;E.forEach(N=>{N||(O=!1)}),O&&(z?.(),I(S.current),r&&f?.(),i&&i())};return D.jsx(Sz,{isPresent:F,initial:!w.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:o,root:u,onExitComplete:F?void 0:k,anchorX:c,children:W},_)})})},V1=R.createContext({strict:!1}),TD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jc={};for(const e in TD)Jc[e]={isEnabled:t=>TD[e].some(n=>!!t[n])};function Rz(e){for(const t in e)Jc[t]={...Jc[t],...e[t]}}const Ez=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ez.has(e)}let N1=e=>!Pp(e);function Tz(e){typeof e=="function"&&(N1=t=>t.startsWith("on")?!Pp(t):e(t))}try{Tz(require("@emotion/is-prop-valid").default)}catch{}function xz(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(N1(s)||n===!0&&Pp(s)||!t&&!Pp(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}const Mm=R.createContext({});function Im(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ch(e){return typeof e=="string"||Array.isArray(e)}const Nb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bb=["initial",...Nb];function _m(e){return Im(e.animate)||Bb.some(t=>Ch(e[t]))}function B1(e){return!!(_m(e)||e.variants)}function Dz(e,t){if(_m(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Ch(n)?n:void 0,animate:Ch(i)?i:void 0}}return e.inherit!==!1?t:{}}function Az(e){const{initial:t,animate:n}=Dz(e,R.useContext(Mm));return R.useMemo(()=>({initial:t,animate:n}),[xD(t),xD(n)])}function xD(e){return Array.isArray(e)?e.join(" "):e}const vh={};function Fz(e){for(const t in e)vh[t]=e[t],Rb(t)&&(vh[t].isCSSVariable=!0)}function G1(e,{layout:t,layoutId:n}){return pu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!vh[e]||e==="opacity")}const Pz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mz=gu.length;function Iz(e,t,n){let i="",s=!0;for(let o=0;o<Mz;o++){const r=gu[o],c=e[r];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(r.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=P1(c,kb[r]);if(!u){s=!1;const f=Pz[r]||r;i+=`${f}(${h}) `}n&&(t[r]=h)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}function Gb(e,t,n){const{style:i,vars:s,transformOrigin:o}=e;let r=!1,c=!1;for(const u in t){const h=t[u];if(pu.has(u)){r=!0;continue}else if(Rb(u)){s[u]=h;continue}else{const f=P1(h,kb[u]);u.startsWith("origin")?(c=!0,o[u]=f):i[u]=f}}if(t.transform||(r||n?i.transform=Iz(t,e.transform,n):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=o;i.transformOrigin=`${u} ${h} ${f}`}}const Hb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function H1(e,t,n){for(const i in t)!Zn(t[i])&&!G1(i,n)&&(e[i]=t[i])}function _z({transformTemplate:e},t){return R.useMemo(()=>{const n=Hb();return Gb(n,t,e),Object.assign({},n.vars,n.style)},[t])}function kz(e,t){const n=e.style||{},i={};return H1(i,n,e),Object.assign(i,_z(e,t)),i}function Lz(e,t){const n={},i=kz(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const Oz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vz={offset:"strokeDashoffset",array:"strokeDasharray"};function Nz(e,t,n=1,i=0,s=!0){e.pathLength=1;const o=s?Oz:Vz;e[o.offset]=Ge.transform(-i);const r=Ge.transform(t),c=Ge.transform(n);e[o.array]=`${r} ${c}`}function z1(e,{attrX:t,attrY:n,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:r=0,...c},u,h,f){if(Gb(e,c,h),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:m}=e;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),s!==void 0&&Nz(p,s,o,r,!1)}const U1=()=>({...Hb(),attrs:{}}),W1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Bz(e,t,n,i){const s=R.useMemo(()=>{const o=U1();return z1(o,t,W1(i),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};H1(o,e.style,e),s.style={...o,...s.style}}return s}const Gz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zb(e){return typeof e!="string"||e.includes("-")?!1:!!(Gz.indexOf(e)>-1||/[A-Z]/u.test(e))}function Hz(e,t,n,{latestValues:i},s,o=!1){const c=(zb(e)?Bz:Lz)(t,i,s,e),u=xz(t,typeof e=="string",o),h=e!==R.Fragment?{...u,...c,ref:n}:{},{children:f}=t,p=R.useMemo(()=>Zn(f)?f.get():f,[f]);return R.createElement(e,{...h,children:p})}function DD(e){const t=[{},{}];return e?.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Ub(e,t,n,i){if(typeof t=="function"){const[s,o]=DD(i);t=t(n!==void 0?n:e.custom,s,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,o]=DD(i);t=t(n!==void 0?n:e.custom,s,o)}return t}function ip(e){return Zn(e)?e.get():e}function zz({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,s){return{latestValues:Uz(n,i,s,e),renderState:t()}}function Uz(e,t,n,i){const s={},o=i(e,{});for(const m in o)s[m]=ip(o[m]);let{initial:r,animate:c}=e;const u=_m(e),h=B1(e);t&&h&&!u&&e.inherit!==!1&&(r===void 0&&(r=t.initial),c===void 0&&(c=t.animate));let f=n?n.initial===!1:!1;f=f||r===!1;const p=f?c:r;if(p&&typeof p!="boolean"&&!Im(p)){const m=Array.isArray(p)?p:[p];for(let w=0;w<m.length;w++){const S=Ub(e,m[w]);if(S){const{transitionEnd:E,transition:x,...P}=S;for(const M in P){let I=P[M];if(Array.isArray(I)){const U=f?I.length-1:0;I=I[U]}I!==null&&(s[M]=I)}for(const M in E)s[M]=E[M]}}}return s}const j1=e=>(t,n)=>{const i=R.useContext(Mm),s=R.useContext(Pm),o=()=>zz(e,t,i,s);return n?o():gb(o)};function Wb(e,t,n){const{style:i}=e,s={};for(const o in i)(Zn(i[o])||t.style&&Zn(t.style[o])||G1(o,e)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const Wz=j1({scrapeMotionValuesFromProps:Wb,createRenderState:Hb});function $1(e,t,n){const i=Wb(e,t,n);for(const s in e)if(Zn(e[s])||Zn(t[s])){const o=gu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=e[s]}return i}const jz=j1({scrapeMotionValuesFromProps:$1,createRenderState:U1}),$z=Symbol.for("motionComponentSymbol");function Ic(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function qz(e,t,n){return R.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Ic(n)&&(n.current=i))},[t])}const jb=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kz="framerAppearId",q1="data-"+jb(Kz),K1=R.createContext({});function Yz(e,t,n,i,s){const{visualElement:o}=R.useContext(Mm),r=R.useContext(V1),c=R.useContext(Pm),u=R.useContext(Vb).reducedMotion,h=R.useRef(null);i=i||r.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=R.useContext(K1);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Qz(h.current,n,s,p);const m=R.useRef(!1);R.useInsertionEffect(()=>{f&&m.current&&f.update(n,c)});const w=n[q1],S=R.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return jM(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),S.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!S.current&&f.animationState&&f.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),S.current=!1),f.enteringChildren=void 0)}),f}function Qz(e,t,n,i){const{layoutId:s,layout:o,drag:r,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Y1(e.parent)),e.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!r||c&&Ic(c),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:f,layoutScroll:u,layoutRoot:h})}function Y1(e){if(e)return e.options.allowProjection!==!1?e.projection:Y1(e.parent)}function Dy(e,{forwardMotionProps:t=!1}={},n,i){n&&Rz(n);const s=zb(e)?jz:Wz;function o(c,u){let h;const f={...R.useContext(Vb),...c,layoutId:Xz(c)},{isStatic:p}=f,m=Az(c),w=s(c,p);if(!p&&pb){Zz();const S=Jz(f);h=S.MeasureLayout,m.visualElement=Yz(e,w,f,i,S.ProjectionNode)}return D.jsxs(Mm.Provider,{value:m,children:[h&&m.visualElement?D.jsx(h,{visualElement:m.visualElement,...f}):null,Hz(e,c,qz(w,m.visualElement,u),w,p,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const r=R.forwardRef(o);return r[$z]=e,r}function Xz({layoutId:e}){const t=R.useContext(fb).id;return t&&e!==void 0?t+"-"+e:e}function Zz(e,t){R.useContext(V1).strict}function Jz(e){const{drag:t,layout:n}=Jc;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function e3(e,t){if(typeof Proxy>"u")return Dy;const n=new Map,i=(o,r)=>Dy(o,r,e,t),s=(o,r)=>i(o,r);return new Proxy(s,{get:(o,r)=>r==="create"?i:(n.has(r)||n.set(r,Dy(r,void 0,e,t)),n.get(r))})}function Q1({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function t3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function n3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Ay(e){return e===void 0||e===1}function qw({scale:e,scaleX:t,scaleY:n}){return!Ay(e)||!Ay(t)||!Ay(n)}function Oa(e){return qw(e)||X1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function X1(e){return AD(e.x)||AD(e.y)}function AD(e){return e&&e!=="0%"}function Mp(e,t,n){const i=e-n,s=t*i;return n+s}function FD(e,t,n,i,s){return s!==void 0&&(e=Mp(e,s,i)),Mp(e,n,i)+t}function Kw(e,t=0,n=1,i,s){e.min=FD(e.min,t,n,i,s),e.max=FD(e.max,t,n,i,s)}function Z1(e,{x:t,y:n}){Kw(e.x,t.translate,t.scale,t.originPoint),Kw(e.y,n.translate,n.scale,n.originPoint)}const PD=.999999999999,MD=1.0000000000001;function i3(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let o,r;for(let c=0;c<s;c++){o=n[c],r=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&kc(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),r&&(t.x*=r.x.scale,t.y*=r.y.scale,Z1(e,r)),i&&Oa(o.latestValues)&&kc(e,o.latestValues))}t.x<MD&&t.x>PD&&(t.x=1),t.y<MD&&t.y>PD&&(t.y=1)}function _c(e,t){e.min=e.min+t,e.max=e.max+t}function ID(e,t,n,i,s=.5){const o=jt(e.min,e.max,s);Kw(e,t,n,o,i)}function kc(e,t){ID(e.x,t.x,t.scaleX,t.scale,t.originX),ID(e.y,t.y,t.scaleY,t.scale,t.originY)}function J1(e,t){return Q1(n3(e.getBoundingClientRect(),t))}function s3(e,t,n){const i=J1(e,n),{scroll:s}=t;return s&&(_c(i.x,s.offset.x),_c(i.y,s.offset.y)),i}const _D=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lc=()=>({x:_D(),y:_D()}),kD=()=>({min:0,max:0}),nn=()=>({x:kD(),y:kD()}),Yw={current:null},eI={current:!1};function o3(){if(eI.current=!0,!!pb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Yw.current=e.matches;e.addEventListener("change",t),t()}else Yw.current=!1}const r3=new WeakMap;function a3(e,t,n){for(const i in t){const s=t[i],o=n[i];if(Zn(s))e.addValue(i,s);else if(Zn(o))e.addValue(i,Zc(s,{owner:e}));else if(o!==s)if(e.hasValue(i)){const r=e.getValue(i);r.liveStyle===!0?r.jump(s):r.hasAnimated||r.set(s)}else{const r=e.getStaticValue(i);e.addValue(i,Zc(r!==void 0?r:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const LD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class l3{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:r},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ib,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=yi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ht.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=r;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=_m(n),this.isVariantNode=B1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const w=p[m];u[m]!==void 0&&Zn(w)&&w.set(u[m])}}mount(t){this.current=t,r3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),eI.current||o3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Nr(this.notifyUpdate),Nr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=pu.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Jc){const n=Jc[t];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<LD.length;i++){const s=LD[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,r=t[o];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=a3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Zc(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&($M(i)||KM(i))?i=parseFloat(i):!vz(i)&&Br.test(n)&&(i=F1(t,n)),this.setBaseTarget(t,Zn(i)?i.get():i)),Zn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=Ub(this.props,n,this.presenceContext?.custom);o&&(i=o[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Zn(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new wb),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Lb.render(this.render)}}class tI extends l3{constructor(){super(...arguments),this.KeyframeResolver=rz}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nI(e,{style:t,vars:n},i,s){const o=e.style;let r;for(r in t)o[r]=t[r];s?.applyProjectionStyles(o,i);for(r in n)o.setProperty(r,n[r])}function c3(e){return window.getComputedStyle(e)}class u3 extends tI{constructor(){super(...arguments),this.type="html",this.renderInstance=nI}readValueFromInstance(t,n){if(pu.has(n))return this.projection?.isProjecting?Gw(n):TH(t,n);{const i=c3(t),s=(Rb(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return J1(t,n)}build(t,n,i){Gb(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Wb(t,n,i)}}const iI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function d3(e,t,n,i){nI(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(iI.has(s)?s:jb(s),t.attrs[s])}class h3 extends tI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(pu.has(n)){const i=A1(n);return i&&i.default||0}return n=iI.has(n)?n:jb(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return $1(t,n,i)}build(t,n,i){z1(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,s){d3(t,n,i,s)}mount(t){this.isSVGTag=W1(t.tagName),super.mount(t)}}const f3=(e,t)=>zb(e)?new h3(t):new u3(t,{allowProjection:e!==R.Fragment});function Vc(e,t,n){const i=e.getProps();return Ub(i,t,n!==void 0?n:i.custom,e)}const Qw=e=>Array.isArray(e);function g3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Zc(n))}function p3(e){return Qw(e)?e[e.length-1]||0:e}function m3(e,t){const n=Vc(e,t);let{transitionEnd:i={},transition:s={},...o}=n||{};o={...o,...i};for(const r in o){const c=p3(o[r]);g3(e,r,c)}}function C3(e){return!!(Zn(e)&&e.add)}function Xw(e,t){const n=e.getValue("willChange");if(C3(n))return n.add(t);if(!n&&No.WillChange){const i=new No.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function sI(e){return e.props[q1]}const v3=e=>e!==null;function y3(e,{repeat:t,repeatType:n="loop"},i){const s=e.filter(v3),o=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[o]}const w3={type:"spring",stiffness:500,damping:25,restSpeed:10},S3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),b3={type:"keyframes",duration:.8},R3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},E3=(e,{keyframes:t})=>t.length>2?b3:pu.has(e)?e.startsWith("scale")?S3(t[1]):w3:R3;function T3({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:r,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const $b=(e,t,n,i={},s,o)=>r=>{const c=_b(i,e)||{},u=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-Bs(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:m=>{t.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{r(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:o?void 0:s};T3(c)||Object.assign(f,E3(e,f)),f.duration&&(f.duration=Bs(f.duration)),f.repeatDelay&&(f.repeatDelay=Bs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(jw(f),f.delay===0&&(p=!0)),(No.instantAnimations||No.skipAnimations)&&(p=!0,jw(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,p&&!o&&t.get()!==void 0){const m=y3(f.keyframes,c);if(m!==void 0){Ht.update(()=>{f.onUpdate(m),f.onComplete()});return}}return c.isSync?new Mb(f):new KH(f)};function x3({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function oI(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:r,...c}=t;i&&(o=i);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const f in c){const p=e.getValue(f,e.latestValues[f]??null),m=c[f];if(m===void 0||h&&x3(h,f))continue;const w={delay:n,..._b(o||{},f)},S=p.get();if(S!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===S&&!w.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const P=sI(e);if(P){const M=window.MotionHandoffAnimation(P,f,Ht);M!==null&&(w.startTime=M,E=!0)}}Xw(e,f),p.start($b(f,p,m,e.shouldReduceMotion&&T1.has(f)?{type:!1}:w,e,E));const x=p.animation;x&&u.push(x)}return r&&Promise.all(u).then(()=>{Ht.update(()=>{r&&m3(e,r)})}),u}function rI(e,t,n,i=0,s=1){const o=Array.from(e).sort((h,f)=>h.sortNodePosition(f)).indexOf(t),r=e.size,c=(r-1)*i;return typeof n=="function"?n(o,r):s===1?o*i:c-o*i}function Zw(e,t,n={}){const i=Vc(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(oI(e,i,n)):()=>Promise.resolve(),r=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return D3(e,t,u,h,f,p,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[u,h]=c==="beforeChildren"?[o,r]:[r,o];return u().then(()=>h())}else return Promise.all([o(),r(n.delay)])}function D3(e,t,n=0,i=0,s=0,o=1,r){const c=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),c.push(Zw(u,t,{...r,delay:n+(typeof i=="function"?0:i)+rI(e.variantChildren,u,i,s,o)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function A3(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(o=>Zw(e,o,n));i=Promise.all(s)}else if(typeof t=="string")i=Zw(e,t,n);else{const s=typeof t=="function"?Vc(e,t,n.custom):t;i=Promise.all(oI(e,s,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function aI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const F3=Bb.length;function lI(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?lI(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<F3;n++){const i=Bb[n],s=e.props[i];(Ch(s)||s===!1)&&(t[i]=s)}return t}const P3=[...Nb].reverse(),M3=Nb.length;function I3(e){return t=>Promise.all(t.map(({animation:n,options:i})=>A3(e,n,i)))}function _3(e){let t=I3(e),n=OD(),i=!0;const s=u=>(h,f)=>{const p=Vc(e,f,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:w,...S}=p;h={...h,...S,...w}}return h};function o(u){t=u(e)}function r(u){const{props:h}=e,f=lI(e.parent)||{},p=[],m=new Set;let w={},S=1/0;for(let x=0;x<M3;x++){const P=P3[x],M=n[P],I=h[P]!==void 0?h[P]:f[P],U=Ch(I),z=P===u?M.isActive:null;z===!1&&(S=x);let W=I===f[P]&&I!==h[P]&&U;if(W&&i&&e.manuallyAnimateOnMount&&(W=!1),M.protectedKeys={...w},!M.isActive&&z===null||!I&&!M.prevProp||Im(I)||typeof I=="boolean")continue;const _=k3(M.prevProp,I);let F=_||P===u&&M.isActive&&!W&&U||x>S&&U,k=!1;const O=Array.isArray(I)?I:[I];let N=O.reduce(s(P),{});z===!1&&(N={});const{prevResolvedValues:H={}}=M,V={...H,...N},ve=ie=>{F=!0,m.has(ie)&&(k=!0,m.delete(ie)),M.needsAnimating[ie]=!0;const se=e.getValue(ie);se&&(se.liveStyle=!1)};for(const ie in V){const se=N[ie],be=H[ie];if(w.hasOwnProperty(ie))continue;let G=!1;Qw(se)&&Qw(be)?G=!aI(se,be):G=se!==be,G?se!=null?ve(ie):m.add(ie):se!==void 0&&m.has(ie)?ve(ie):M.protectedKeys[ie]=!0}M.prevProp=I,M.prevResolvedValues=N,M.isActive&&(w={...w,...N}),i&&e.blockInitialAnimation&&(F=!1);const pe=W&&_;F&&(!pe||k)&&p.push(...O.map(ie=>{const se={type:P};if(typeof ie=="string"&&i&&!pe&&e.manuallyAnimateOnMount&&e.parent){const{parent:be}=e,G=Vc(be,ie);if(be.enteringChildren&&G){const{delayChildren:Z}=G.transition||{};se.delay=rI(be.enteringChildren,e,Z)}}return{animation:ie,options:se}}))}if(m.size){const x={};if(typeof h.initial!="boolean"){const P=Vc(e,Array.isArray(h.initial)?h.initial[0]:h.initial);P&&P.transition&&(x.transition=P.transition)}m.forEach(P=>{const M=e.getBaseTarget(P),I=e.getValue(P);I&&(I.liveStyle=!0),x[P]=M??null}),p.push({animation:x})}let E=!!p.length;return i&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(E=!1),i=!1,E?t(p):Promise.resolve()}function c(u,h){if(n[u].isActive===h)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,h)),n[u].isActive=h;const f=r(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:r,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=OD(),i=!0}}}function k3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!aI(t,e):!1}function ka(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OD(){return{animate:ka(!0),whileInView:ka(),whileHover:ka(),whileTap:ka(),whileDrag:ka(),whileFocus:ka(),exit:ka()}}class Yr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class L3 extends Yr{constructor(t){super(t),t.animationState||(t.animationState=_3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Im(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let O3=0;class V3 extends Yr{constructor(){super(...arguments),this.id=O3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const N3={animation:{Feature:L3},exit:{Feature:V3}};function yh(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Yh(e){return{point:{x:e.pageX,y:e.pageY}}}const B3=e=>t=>Ob(t)&&e(t,Yh(t));function Xd(e,t,n,i){return yh(e,t,B3(n),i)}const cI=1e-4,G3=1-cI,H3=1+cI,uI=.01,z3=0-uI,U3=0+uI;function ai(e){return e.max-e.min}function W3(e,t,n){return Math.abs(e-t)<=n}function VD(e,t,n,i=.5){e.origin=i,e.originPoint=jt(t.min,t.max,e.origin),e.scale=ai(n)/ai(t),e.translate=jt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=G3&&e.scale<=H3||isNaN(e.scale))&&(e.scale=1),(e.translate>=z3&&e.translate<=U3||isNaN(e.translate))&&(e.translate=0)}function Zd(e,t,n,i){VD(e.x,t.x,n.x,i?i.originX:void 0),VD(e.y,t.y,n.y,i?i.originY:void 0)}function ND(e,t,n){e.min=n.min+t.min,e.max=e.min+ai(t)}function j3(e,t,n){ND(e.x,t.x,n.x),ND(e.y,t.y,n.y)}function BD(e,t,n){e.min=t.min-n.min,e.max=e.min+ai(t)}function Jd(e,t,n){BD(e.x,t.x,n.x),BD(e.y,t.y,n.y)}function Ki(e){return[e("x"),e("y")]}const dI=({current:e})=>e?e.ownerDocument.defaultView:null,GD=(e,t)=>Math.abs(e-t);function $3(e,t){const n=GD(e.x,t.x),i=GD(e.y,t.y);return Math.sqrt(n**2+i**2)}class hI{constructor(t,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Py(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=$3(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!S)return;const{point:E}=m,{timestamp:x}=Gn;this.history.push({...E,timestamp:x});const{onStart:P,onMove:M}=this.handlers;w||(P&&P(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,m)},this.handlePointerMove=(m,w)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Fy(w,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(m,w)=>{this.end();const{onEnd:S,onSessionEnd:E,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Py(m.type==="pointercancel"?this.lastMoveEventInfo:Fy(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(m,P),E&&E(m,P)},!Ob(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=r,this.contextWindow=s||window;const c=Yh(t),u=Fy(c,this.transformPagePoint),{point:h}=u,{timestamp:f}=Gn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=n;p&&p(t,Py(u,this.history)),this.removeListeners=$h(Xd(this.contextWindow,"pointermove",this.handlePointerMove),Xd(this.contextWindow,"pointerup",this.handlePointerUp),Xd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Nr(this.updatePoint)}}function Fy(e,t){return t?{point:t(e.point)}:e}function HD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Py({point:e},t){return{point:e,delta:HD(e,fI(t)),offset:HD(e,q3(t)),velocity:K3(t,.1)}}function q3(e){return e[0]}function fI(e){return e[e.length-1]}function K3(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=fI(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>Bs(t)));)n--;if(!i)return{x:0,y:0};const o=Gs(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const r={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function Y3(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?jt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?jt(n,e,i.max):Math.min(e,n)),e}function zD(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Q3(e,{top:t,left:n,bottom:i,right:s}){return{x:zD(e.x,n,s),y:zD(e.y,t,i)}}function UD(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function X3(e,t){return{x:UD(e.x,t.x),y:UD(e.y,t.y)}}function Z3(e,t){let n=.5;const i=ai(e),s=ai(t);return s>i?n=gh(t.min,t.max-i,e.min):i>s&&(n=gh(e.min,e.max-s,t.min)),Vo(0,1,n)}function J3(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Jw=.35;function e4(e=Jw){return e===!1?e=0:e===!0&&(e=Jw),{x:WD(e,"left","right"),y:WD(e,"top","bottom")}}function WD(e,t,n){return{min:jD(e,t),max:jD(e,n)}}function jD(e,t){return typeof e=="number"?e:e[t]||0}const t4=new WeakMap;class n4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Yh(p).point)},r=(p,m)=>{const{drag:w,dragPropagation:S,onDragStart:E}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uz(w),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ki(P=>{let M=this.getAxisMotionValue(P).get()||0;if(Hs.test(M)){const{projection:I}=this.visualElement;if(I&&I.layout){const U=I.layout.layoutBox[P];U&&(M=ai(U)*(parseFloat(M)/100))}}this.originPoint[P]=M}),E&&Ht.postRender(()=>E(p,m)),Xw(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:E,onDrag:x}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:P}=m;if(S&&this.currentDirection===null){this.currentDirection=i4(P),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,P),this.updateAxis("y",m.point,P),this.visualElement.render(),x&&x(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ki(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new hI(t,{onSessionStart:o,onStart:r,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:i,contextWindow:dI(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:c}=this.getProps();c&&Ht.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!Vg(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let r=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(r=Y3(r,this.constraints[t],this.elastic[t])),o.set(r)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Ic(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Q3(i.layoutBox,t):this.constraints=!1,this.elastic=e4(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ki(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=J3(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ic(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=s3(i,s.root,this.visualElement.getTransformPagePoint());let r=X3(s.layout.layoutBox,o);if(n){const c=n(t3(r));this.hasMutatedConstraints=!!c,c&&(r=Q1(c))}return r}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:r,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Ki(f=>{if(!Vg(f,n,this.currentDirection))return;let p=u&&u[f]||{};r&&(p={min:0,max:0});const m=s?200:1e6,w=s?40:1e7,S={type:"inertia",velocity:i?t[f]:0,bounceStiffness:m,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(f,S)});return Promise.all(h).then(c)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return Xw(this.visualElement,t),i.start($b(t,i,0,n,this.visualElement,!1))}stopAnimation(){Ki(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ki(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ki(n=>{const{drag:i}=this.getProps();if(!Vg(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:r,max:c}=s.layout.layoutBox[n];o.set(t[n]-jt(r,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ic(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ki(r=>{const c=this.getAxisMotionValue(r);if(c&&this.constraints!==!1){const u=c.get();s[r]=Z3({min:u,max:u},this.constraints[r])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ki(r=>{if(!Vg(r,t,null))return;const c=this.getAxisMotionValue(r),{min:u,max:h}=this.constraints[r];c.set(jt(u,h,s[r]))})}addListeners(){if(!this.visualElement.current)return;t4.set(this.visualElement,this);const t=this.visualElement.current,n=Xd(t,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();Ic(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ht.read(i);const r=yh(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ki(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())});return()=>{r(),n(),o(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:r=Jw,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:r,dragMomentum:c}}}function Vg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function i4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class s4 extends Yr{constructor(t){super(t),this.removeGroupControls=ns,this.removeListeners=ns,this.controls=new n4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ns}unmount(){this.removeGroupControls(),this.removeListeners()}}const $D=e=>(t,n)=>{e&&Ht.postRender(()=>e(t,n))};class o4 extends Yr{constructor(){super(...arguments),this.removePointerDownListener=ns}onPointerDown(t){this.session=new hI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:$D(t),onStart:$D(n),onMove:i,onEnd:(o,r)=>{delete this.session,s&&Ht.postRender(()=>s(o,r))}}}mount(){this.removePointerDownListener=Xd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ld={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ge.test(e))e=parseFloat(e);else return e;const n=qD(e,t.target.x),i=qD(e,t.target.y);return`${n}% ${i}%`}},r4={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=Br.parse(e);if(s.length>5)return i;const o=Br.createTransformer(e),r=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,u=n.y.scale*t.y;s[0+r]/=c,s[1+r]/=u;const h=jt(c,u,.5);return typeof s[2+r]=="number"&&(s[2+r]/=h),typeof s[3+r]=="number"&&(s[3+r]/=h),o(s)}};let My=!1;class a4 extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=t;Fz(l4),o&&(n.group&&n.group.add(o),i&&i.register&&s&&i.register(o),My&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),sp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:o}=this.props,{projection:r}=i;return r&&(r.isPresent=o,My=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==o?r.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?r.promote():r.relegate()||Ht.postRender(()=>{const c=r.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Lb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;My=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gI(e){const[t,n]=O1(),i=R.useContext(fb);return D.jsx(a4,{...e,layoutGroup:i,switchLayoutGroup:R.useContext(K1),isPresent:t,safeToRemove:n})}const l4={borderRadius:{...Ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ld,borderTopRightRadius:Ld,borderBottomLeftRadius:Ld,borderBottomRightRadius:Ld,boxShadow:r4};function c4(e,t,n){const i=Zn(e)?e:Zc(e);return i.start($b("",i,t,n)),i.animation}const u4=(e,t)=>e.depth-t.depth;class d4{constructor(){this.children=[],this.isDirty=!1}add(t){mb(this.children,t),this.isDirty=!0}remove(t){Cb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(u4),this.isDirty=!1,this.children.forEach(t)}}function h4(e,t){const n=yi.now(),i=({timestamp:s})=>{const o=s-n;o>=t&&(Nr(i),e(o-t))};return Ht.setup(i,!0),()=>Nr(i)}const pI=["TopLeft","TopRight","BottomLeft","BottomRight"],f4=pI.length,KD=e=>typeof e=="string"?parseFloat(e):e,YD=e=>typeof e=="number"||Ge.test(e);function g4(e,t,n,i,s,o){s?(e.opacity=jt(0,n.opacity??1,p4(i)),e.opacityExit=jt(t.opacity??1,0,m4(i))):o&&(e.opacity=jt(t.opacity??1,n.opacity??1,i));for(let r=0;r<f4;r++){const c=`border${pI[r]}Radius`;let u=QD(t,c),h=QD(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||YD(u)===YD(h)?(e[c]=Math.max(jt(KD(u),KD(h),i),0),(Hs.test(h)||Hs.test(u))&&(e[c]+="%")):e[c]=h}(t.rotate||n.rotate)&&(e.rotate=jt(t.rotate||0,n.rotate||0,i))}function QD(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const p4=mI(0,.5,n1),m4=mI(.5,.95,ns);function mI(e,t,n){return i=>i<e?0:i>t?1:n(gh(e,t,i))}function XD(e,t){e.min=t.min,e.max=t.max}function qi(e,t){XD(e.x,t.x),XD(e.y,t.y)}function ZD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function JD(e,t,n,i,s){return e-=t,e=Mp(e,1/n,i),s!==void 0&&(e=Mp(e,1/s,i)),e}function C4(e,t=0,n=1,i=.5,s,o=e,r=e){if(Hs.test(t)&&(t=parseFloat(t),t=jt(r.min,r.max,t/100)-r.min),typeof t!="number")return;let c=jt(o.min,o.max,i);e===o&&(c-=t),e.min=JD(e.min,t,n,c,s),e.max=JD(e.max,t,n,c,s)}function eA(e,t,[n,i,s],o,r){C4(e,t[n],t[i],t[s],t.scale,o,r)}const v4=["x","scaleX","originX"],y4=["y","scaleY","originY"];function tA(e,t,n,i){eA(e.x,t,v4,n?n.x:void 0,i?i.x:void 0),eA(e.y,t,y4,n?n.y:void 0,i?i.y:void 0)}function nA(e){return e.translate===0&&e.scale===1}function CI(e){return nA(e.x)&&nA(e.y)}function iA(e,t){return e.min===t.min&&e.max===t.max}function w4(e,t){return iA(e.x,t.x)&&iA(e.y,t.y)}function sA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function vI(e,t){return sA(e.x,t.x)&&sA(e.y,t.y)}function oA(e){return ai(e.x)/ai(e.y)}function rA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class S4{constructor(){this.members=[]}add(t){mb(this.members,t),t.scheduleRender()}remove(t){if(Cb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function b4(e,t,n){let i="";const s=e.x.translate/t.x,o=e.y.translate/t.y,r=n?.z||0;if((s||o||r)&&(i=`translate3d(${s}px, ${o}px, ${r}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:m,skewX:w,skewY:S}=n;h&&(i=`perspective(${h}px) ${i}`),f&&(i+=`rotate(${f}deg) `),p&&(i+=`rotateX(${p}deg) `),m&&(i+=`rotateY(${m}deg) `),w&&(i+=`skewX(${w}deg) `),S&&(i+=`skewY(${S}deg) `)}const c=e.x.scale*t.x,u=e.y.scale*t.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const Iy=["","X","Y","Z"],R4=1e3;let E4=0;function _y(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function yI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=sI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(s||o))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&yI(i)}function wI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(r={},c=t?.()){this.id=E4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(D4),this.nodes.forEach(M4),this.nodes.forEach(I4),this.nodes.forEach(A4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new d4)}addEventListener(r,c){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new wb),this.eventHandlers.get(r).add(c)}notifyListeners(r,...c){const u=this.eventHandlers.get(r);u&&u.notify(...c)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=L1(r)&&!mz(r),this.instance=r;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),e){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{p=window.innerWidth}),e(r,()=>{const w=window.innerWidth;w!==p&&(p=w,this.root.updateBlockedByResize=!0,f&&f(),f=h4(m,250),sp.hasAnimatedSinceResize&&(sp.hasAnimatedSinceResize=!1,this.nodes.forEach(cA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||V4,{onLayoutAnimationStart:E,onLayoutAnimationComplete:x}=h.getProps(),P=!this.targetLayout||!vI(this.targetLayout,w),M=!p&&m;if(this.options.layoutRoot||this.resumeFrom||M||p&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={..._b(S,"layout"),onPlay:E,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,M)}else p||cA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_4),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(lA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(P4),this.nodes.forEach(T4),this.nodes.forEach(x4)):this.nodes.forEach(lA),this.clearAllSnapshots();const c=yi.now();Gn.delta=Vo(0,1e3/60,c-Gn.timestamp),Gn.timestamp=c,Gn.isProcessing=!0,Sy.update.process(Gn),Sy.preRender.process(Gn),Sy.render.process(Gn),Gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(F4),this.sharedNodes.forEach(k4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ai(this.snapshot.measuredBox.x)&&!ai(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(c=!1),c&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!CI(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;r&&this.instance&&(c||Oa(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return r&&(u=this.removeTransform(u)),N4(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:r}=this.options;if(!r)return nn();const c=r.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(B4))){const{scroll:h}=this.root;h&&(_c(c.x,h.offset.x),_c(c.y,h.offset.y))}return c}removeElementScroll(r){const c=nn();if(qi(c,r),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&qi(c,r),_c(c.x,f.offset.x),_c(c.y,f.offset.y))}return c}applyTransform(r,c=!1){const u=nn();qi(u,r);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&kc(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Oa(f.latestValues)&&kc(u,f.latestValues)}return Oa(this.latestValues)&&kc(u,this.latestValues),u}removeTransform(r){const c=nn();qi(c,r);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Oa(h.latestValues))continue;qw(h.latestValues)&&h.updateSnapshot();const f=nn(),p=h.measurePageBox();qi(f,p),tA(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Oa(this.latestValues)&&tA(c,this.latestValues),c}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(r||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Gn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),Jd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),qi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nn(),this.targetWithTransforms=nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),j3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qi(this.target,this.layout.layoutBox),Z1(this.target,this.targetDelta)):qi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),Jd(this.relativeTargetOrigin,this.target,m.target),qi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qw(this.parent.latestValues)||X1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const r=this.getLead(),c=!!this.resumingFrom||this!==r;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Gn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;qi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;i3(this.layoutCorrected,this.treeScale,this.path,c),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=nn());const{target:w}=r;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ZD(this.prevProjectionDelta.x,this.projectionDelta.x),ZD(this.prevProjectionDelta.y,this.projectionDelta.y)),Zd(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!rA(this.projectionDelta.x,this.prevProjectionDelta.x)||!rA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){if(this.options.visualElement?.scheduleRender(),r){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Lc(),this.projectionDelta=Lc(),this.projectionDeltaWithTransform=Lc()}setAnimationOrigin(r,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=Lc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=nn(),w=u?u.source:void 0,S=this.layout?this.layout.source:void 0,E=w!==S,x=this.getStack(),P=!x||x.members.length<=1,M=!!(E&&!P&&this.options.crossfade===!0&&!this.path.some(O4));this.animationProgress=0;let I;this.mixTargetDelta=U=>{const z=U/1e3;uA(p.x,r.x,z),uA(p.y,r.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L4(this.relativeTarget,this.relativeTargetOrigin,m,z),I&&w4(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=nn()),qi(I,this.relativeTarget)),E&&(this.animationValues=f,g4(f,h,this.latestValues,z,M,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{sp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zc(0)),this.currentAnimation=c4(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),r.onUpdate&&r.onUpdate(c)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(R4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=r;if(!(!c||!u||!h)){if(this!==r&&this.layout&&h&&SI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||nn();const p=ai(this.layout.layoutBox.x);u.x.min=r.target.x.min,u.x.max=u.x.min+p;const m=ai(this.layout.layoutBox.y);u.y.min=r.target.y.min,u.y.max=u.y.min+m}qi(c,u),kc(c,f),Zd(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(r,c){this.sharedNodes.has(r)||this.sharedNodes.set(r,new S4),this.sharedNodes.get(r).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){const{layoutId:r}=this.options;return r?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:r}=this.options;return r?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),r&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let c=!1;const{latestValues:u}=r;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&_y("z",r,h,this.animationValues);for(let f=0;f<Iy.length;f++)_y(`rotate${Iy[f]}`,r,h,this.animationValues),_y(`skew${Iy[f]}`,r,h,this.animationValues);r.render();for(const f in h)r.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);r.scheduleRender()}applyProjectionStyles(r,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=ip(c?.pointerEvents)||"",r.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=ip(c?.pointerEvents)||""),this.hasProjected&&!Oa(this.latestValues)&&(r.transform=u?u({},""):"none",this.hasProjected=!1);return}r.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=b4(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),r.transform=p;const{x:m,y:w}=this.projectionDelta;r.transformOrigin=`${m.origin*100}% ${w.origin*100}% 0`,h.animationValues?r.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:r.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in vh){if(f[S]===void 0)continue;const{correct:E,applyTo:x,isCSSVariable:P}=vh[S],M=p==="none"?f[S]:E(f[S],h);if(x){const I=x.length;for(let U=0;U<I;U++)r[x[U]]=M}else P?this.options.visualElement.renderState.vars[S]=M:r[S]=M}this.options.layoutId&&(r.pointerEvents=h===this?ip(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>r.currentAnimation?.stop()),this.root.nodes.forEach(aA),this.root.sharedNodes.clear()}}}function T4(e){e.updateLayout()}function x4(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:s}=e.options,o=t.source!==e.layout.source;s==="size"?Ki(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=ai(p);p.min=n[f].min,p.max=p.min+m}):SI(s,t.layoutBox,n)&&Ki(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=ai(n[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const r=Lc();Zd(r,n,t.layoutBox);const c=Lc();o?Zd(c,e.applyTransform(i,!0),t.measuredBox):Zd(c,n,t.layoutBox);const u=!CI(r);let h=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const w=nn();Jd(w,t.layoutBox,p.layoutBox);const S=nn();Jd(S,n,m.layoutBox),vI(w,S)||(h=!0),f.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=w,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:r,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function D4(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function A4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function F4(e){e.clearSnapshot()}function aA(e){e.clearMeasurements()}function lA(e){e.isLayoutDirty=!1}function P4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function cA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function M4(e){e.resolveTargetDelta()}function I4(e){e.calcProjection()}function _4(e){e.resetSkewAndRotation()}function k4(e){e.removeLeadSnapshot()}function uA(e,t,n){e.translate=jt(t.translate,0,n),e.scale=jt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function dA(e,t,n,i){e.min=jt(t.min,n.min,i),e.max=jt(t.max,n.max,i)}function L4(e,t,n,i){dA(e.x,t.x,n.x,i),dA(e.y,t.y,n.y,i)}function O4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const V4={duration:.45,ease:[.4,0,.1,1]},hA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),fA=hA("applewebkit/")&&!hA("chrome/")?Math.round:ns;function gA(e){e.min=fA(e.min),e.max=fA(e.max)}function N4(e){gA(e.x),gA(e.y)}function SI(e,t,n){return e==="position"||e==="preserve-aspect"&&!W3(oA(t),oA(n),.2)}function B4(e){return e!==e.root&&e.scroll?.wasRoot}const G4=wI({attachResizeListener:(e,t)=>yh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ky={current:void 0},bI=wI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ky.current){const e=new G4({});e.mount(window),e.setOptions({layoutScroll:!0}),ky.current=e}return ky.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),H4={pan:{Feature:o4},drag:{Feature:s4,ProjectionNode:bI,MeasureLayout:gI}};function pA(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=i[s];o&&Ht.postRender(()=>o(t,Yh(t)))}class z4 extends Yr{mount(){const{current:t}=this.node;t&&(this.unmount=dz(t,(n,i)=>(pA(this.node,i,"Start"),s=>pA(this.node,s,"End"))))}unmount(){}}class U4 extends Yr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$h(yh(this.node.current,"focus",()=>this.onFocus()),yh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mA(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=i[s];o&&Ht.postRender(()=>o(t,Yh(t)))}class W4 extends Yr{mount(){const{current:t}=this.node;t&&(this.unmount=pz(t,(n,i)=>(mA(this.node,i,"Start"),(s,{success:o})=>mA(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const eS=new WeakMap,Ly=new WeakMap,j4=e=>{const t=eS.get(e.target);t&&t(e)},$4=e=>{e.forEach(j4)};function q4({root:e,...t}){const n=e||document;Ly.has(n)||Ly.set(n,{});const i=Ly.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver($4,{root:e,...t})),i[s]}function K4(e,t,n){const i=q4(t);return eS.set(e,n),i.observe(e),()=>{eS.delete(e),i.unobserve(e)}}const Y4={some:0,all:1};class Q4 extends Yr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:o}=t,r={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:Y4[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=h?f:p;m&&m(u)};return K4(this.node.current,r,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(X4(t,n))&&this.startObserver()}unmount(){}}function X4({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Z4={inView:{Feature:Q4},tap:{Feature:W4},focus:{Feature:U4},hover:{Feature:z4}},J4={layout:{ProjectionNode:bI,MeasureLayout:gI}},eU={...N3,...Z4,...H4,...J4},bn=e3(eU,f3),CA=e=>{let t;const n=new Set,i=(h,f)=>{const p=typeof h=="function"?h(t):h;if(!Object.is(p,t)){const m=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(w=>w(t,m))}},s=()=>t,c={setState:i,getState:s,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=t=e(i,s,c);return c},tU=e=>e?CA(e):CA,nU=e=>e;function iU(e,t=nU){const n=oe.useSyncExternalStore(e.subscribe,oe.useCallback(()=>t(e.getState()),[e,t]),oe.useCallback(()=>t(e.getInitialState()),[e,t]));return oe.useDebugValue(n),n}const sU=e=>{const t=tU(e),n=i=>iU(t,i);return Object.assign(n,t),n},oU=e=>sU,Qr=oU()(e=>({currentDeportista:"",deportistas:[],setCurrentDeportista:t=>e({currentDeportista:t}),setDeportistas:t=>e({deportistas:t}),showModal:!1,setShowModal:t=>e({showModal:t}),editMode:!1,setEditMode:t=>e({editMode:t}),showConfirmDelete:!1,setShowConfirmDelete:t=>e({showConfirmDelete:t}),academia:"",setAcademia:t=>e({academia:t}),isLoggedIn:!1,setIsLoggedIn:t=>e({isLoggedIn:t})})),qb=()=>{const{currentDeportista:e,deportistas:t,setDeportistas:n,setCurrentDeportista:i,academia:s,setAcademia:o}=Qr();return{deportistas:t,currentDeportista:e,addDeportista:u=>{n([...t,u])},setCurrentDeportista:i,editDeportista:u=>{n(t.map(h=>h.id==u.id?u:h))},academia:s,setAcademia:o}},Sc=(e,t)=>{for(const n of t)if(e<=n)return{value:n,isTop:!1};return{value:t[t.length-1],isTop:!0}},rU=e=>e<=5?"PRINCIPIANTE":e<=12?"INTERMEDIO":"AVANZADO",aU=(e,t,n)=>{if(e<=11)return Sc(t,[28,30,32,34,36,38,40,42,44]);if(e<=13)return Sc(t,[46,48,50,52,54,56,58,60,62]);if(e<=15)return Sc(t,[48,50,52,54,56,58,60,63,66]);if(e<=17)return Sc(t,[52,54,56,58,60,63,66,69,71]);if(n==="M")return Sc(t,[51,54,57,60,63,67,71,75,80]);if(n==="F")return Sc(t,[48,50,52,54,57,60,63,66,70])},lU=async(e,t,n,i)=>{const s=rU(n),o=aU(e,t,i);let r="";return o?.isTop?r=`MS DE ${o?.value} KG`:r=`HASTA ${o?.value} KG`,{seniority:s,category:r}},RI=()=>{const[e,t]=R.useState(""),[n,i]=R.useState("");return{seniority:e,category:n,rank:async(o,r,c,u)=>{const{seniority:h,category:f}=await lU(o,r,c,u);t(h),i(f)}}},cU=()=>{};var vA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},uU=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[n++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=e[n++],r=e[n++],c=e[n++],u=((s&7)<<18|(o&63)<<12|(r&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const o=e[n++],r=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|r&63)}}return t.join("")},TI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const o=e[s],r=s+1<e.length,c=r?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,f=o>>2,p=(o&3)<<4|c>>4;let m=(c&15)<<2|h>>6,w=h&63;u||(w=64,r||(m=64)),i.push(n[f],n[p],n[m],n[w])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(EI(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):uU(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const o=n[e.charAt(s++)],c=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,o==null||c==null||h==null||p==null)throw new dU;const m=o<<2|c>>4;if(i.push(m),h!==64){const w=c<<4&240|h>>2;if(i.push(w),p!==64){const S=h<<6&192|p;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hU=function(e){const t=EI(e);return TI.encodeByteArray(t,!0)},Ip=function(e){return hU(e).replace(/\./g,"")},fU=function(e){try{return TI.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=()=>gU().__FIREBASE_DEFAULTS__,mU=()=>{if(typeof process>"u"||typeof vA>"u")return;const e=vA.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},CU=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&fU(e[1]);return t&&JSON.parse(t)},Kb=()=>{try{return cU()||pU()||mU()||CU()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vU=e=>Kb()?.emulatorHosts?.[e],yU=e=>{const t=vU(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},xI=()=>Kb()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function SU(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Ip(JSON.stringify(n)),Ip(JSON.stringify(r)),""].join(".")}const eh={};function RU(){const e={prod:[],emulator:[]};for(const t of Object.keys(eh))eh[t]?e.emulator.push(t):e.prod.push(t);return e}function EU(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let yA=!1;function TU(e,t){if(typeof window>"u"||typeof document>"u"||!Yb(window.location.host)||eh[e]===t||eh[e]||yA)return;eh[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=RU().prod.length>0;function r(){const m=document.getElementById(i);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{yA=!0,r()},m}function f(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=EU(i),w=n("text"),S=document.getElementById(w)||document.createElement("span"),E=n("learnmore"),x=document.getElementById(E)||document.createElement("a"),P=n("preprendIcon"),M=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;c(I),f(x,E);const U=h();u(M,P),I.append(M,S,x,U),document.body.appendChild(I)}o?(S.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DU(){const e=Kb()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AU(){return!DU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FU(){try{return typeof indexedDB=="object"}catch{return!1}}function PU(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="FirebaseError";class mu extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=MU,Object.setPrototypeOf(this,mu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DI.prototype.create)}}class DI{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,o=this.errors[t],r=o?IU(o,i):"Error",c=`${this.serviceName}: ${r} (${s}).`;return new mu(s,c,i)}}function IU(e,t){return e.replace(_U,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const _U=/\{\$([^}]+)}/g;function _p(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const o=e[s],r=t[s];if(wA(o)&&wA(r)){if(!_p(o,r))return!1}else if(o!==r)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function wA(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e){return e&&e._delegate?e._delegate:e}let wh=class{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new wU;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(OU(t))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=Va){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Va){return this.instances.has(t)}getOptions(t=Va){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,r]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&r.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LU(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Va){return this.component?this.component.multipleInstances?t:Va:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LU(e){return e===Va?void 0:e}function OU(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kU(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ct||(ct={}));const NU={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},BU=ct.INFO,GU={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},HU=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=GU[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class AI{constructor(t){this.name=t,this._logLevel=BU,this._logHandler=HU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?NU[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const zU=(e,t)=>t.some(n=>e instanceof n);let SA,bA;function UU(){return SA||(SA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WU(){return bA||(bA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FI=new WeakMap,tS=new WeakMap,PI=new WeakMap,Oy=new WeakMap,Qb=new WeakMap;function jU(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",o),e.removeEventListener("error",r)},o=()=>{n(Ir(e.result)),s()},r=()=>{i(e.error),s()};e.addEventListener("success",o),e.addEventListener("error",r)});return t.then(n=>{n instanceof IDBCursor&&FI.set(n,e)}).catch(()=>{}),Qb.set(t,e),t}function $U(e){if(tS.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",r),e.removeEventListener("abort",r)},o=()=>{n(),s()},r=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",o),e.addEventListener("error",r),e.addEventListener("abort",r)});tS.set(e,t)}let nS={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return tS.get(e);if(t==="objectStoreNames")return e.objectStoreNames||PI.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function qU(e){nS=e(nS)}function KU(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Vy(this),t,...n);return PI.set(i,t.sort?t.sort():[t]),Ir(i)}:WU().includes(e)?function(...t){return e.apply(Vy(this),t),Ir(FI.get(this))}:function(...t){return Ir(e.apply(Vy(this),t))}}function YU(e){return typeof e=="function"?KU(e):(e instanceof IDBTransaction&&$U(e),zU(e,UU())?new Proxy(e,nS):e)}function Ir(e){if(e instanceof IDBRequest)return jU(e);if(Oy.has(e))return Oy.get(e);const t=YU(e);return t!==e&&(Oy.set(e,t),Qb.set(t,e)),t}const Vy=e=>Qb.get(e);function QU(e,t,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const r=indexedDB.open(e,t),c=Ir(r);return i&&r.addEventListener("upgradeneeded",u=>{i(Ir(r.result),u.oldVersion,u.newVersion,Ir(r.transaction),u)}),n&&r.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const XU=["get","getKey","getAll","getAllKeys","count"],ZU=["put","add","delete","clear"],Ny=new Map;function RA(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ny.get(t))return Ny.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=ZU.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||XU.includes(n)))return;const o=async function(r,...c){const u=this.transaction(r,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Ny.set(t,o),o}qU(e=>({...e,get:(t,n,i)=>RA(t,n)||e.get(t,n,i),has:(t,n)=>!!RA(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e5(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function e5(e){return e.getComponent()?.type==="VERSION"}const iS="@firebase/app",EA="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new AI("@firebase/app"),t5="@firebase/app-compat",n5="@firebase/analytics-compat",i5="@firebase/analytics",s5="@firebase/app-check-compat",o5="@firebase/app-check",r5="@firebase/auth",a5="@firebase/auth-compat",l5="@firebase/database",c5="@firebase/data-connect",u5="@firebase/database-compat",d5="@firebase/functions",h5="@firebase/functions-compat",f5="@firebase/installations",g5="@firebase/installations-compat",p5="@firebase/messaging",m5="@firebase/messaging-compat",C5="@firebase/performance",v5="@firebase/performance-compat",y5="@firebase/remote-config",w5="@firebase/remote-config-compat",S5="@firebase/storage",b5="@firebase/storage-compat",R5="@firebase/firestore",E5="@firebase/ai",T5="@firebase/firestore-compat",x5="firebase",D5="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="[DEFAULT]",A5={[iS]:"fire-core",[t5]:"fire-core-compat",[i5]:"fire-analytics",[n5]:"fire-analytics-compat",[o5]:"fire-app-check",[s5]:"fire-app-check-compat",[r5]:"fire-auth",[a5]:"fire-auth-compat",[l5]:"fire-rtdb",[c5]:"fire-data-connect",[u5]:"fire-rtdb-compat",[d5]:"fire-fn",[h5]:"fire-fn-compat",[f5]:"fire-iid",[g5]:"fire-iid-compat",[p5]:"fire-fcm",[m5]:"fire-fcm-compat",[C5]:"fire-perf",[v5]:"fire-perf-compat",[y5]:"fire-rc",[w5]:"fire-rc-compat",[S5]:"fire-gcs",[b5]:"fire-gcs-compat",[R5]:"fire-fst",[T5]:"fire-fst-compat",[E5]:"fire-vertex","fire-js":"fire-js",[x5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=new Map,F5=new Map,oS=new Map;function TA(e,t){try{e.container.addComponent(t)}catch(n){Go.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Lp(e){const t=e.name;if(oS.has(t))return Go.debug(`There were multiple attempts to register component ${t}.`),!1;oS.set(t,e);for(const n of kp.values())TA(n,e);for(const n of F5.values())TA(n,e);return!0}function P5(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function M5(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new DI("app","Firebase",I5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=D5;function MI(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:sS,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw _r.create("bad-app-name",{appName:String(s)});if(n||(n=xI()),!n)throw _r.create("no-options");const o=kp.get(s);if(o){if(_p(n,o.options)&&_p(i,o.config))return o;throw _r.create("duplicate-app",{appName:s})}const r=new VU(s);for(const u of oS.values())r.addComponent(u);const c=new _5(n,i,r);return kp.set(s,c),c}function L5(e=sS){const t=kp.get(e);if(!t&&e===sS&&xI())return MI();if(!t)throw _r.create("no-app",{appName:e});return t}function Nc(e,t,n){let i=A5[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const r=[`Unable to register library "${i}" with version "${t}":`];s&&r.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&r.push("and"),o&&r.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Go.warn(r.join(" "));return}Lp(new wh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5="firebase-heartbeat-database",V5=1,Sh="firebase-heartbeat-store";let By=null;function II(){return By||(By=QU(O5,V5,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Sh)}catch(n){console.warn(n)}}}}).catch(e=>{throw _r.create("idb-open",{originalErrorMessage:e.message})})),By}async function N5(e){try{const n=(await II()).transaction(Sh),i=await n.objectStore(Sh).get(_I(e));return await n.done,i}catch(t){if(t instanceof mu)Go.warn(t.message);else{const n=_r.create("idb-get",{originalErrorMessage:t?.message});Go.warn(n.message)}}}async function xA(e,t){try{const i=(await II()).transaction(Sh,"readwrite");await i.objectStore(Sh).put(t,_I(e)),await i.done}catch(n){if(n instanceof mu)Go.warn(n.message);else{const i=_r.create("idb-set",{originalErrorMessage:n?.message});Go.warn(i.message)}}}function _I(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=1024,G5=30;class H5{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U5(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=DA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>G5){const s=W5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Go.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=DA(),{heartbeatsToSend:n,unsentEntries:i}=z5(this._heartbeatsCache.heartbeats),s=Ip(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Go.warn(t),""}}}function DA(){return new Date().toISOString().substring(0,10)}function z5(e,t=B5){const n=[];let i=e.slice();for(const s of e){const o=n.find(r=>r.agent===s.agent);if(o){if(o.dates.push(s.date),AA(n)>t){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),AA(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U5{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FU()?PU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return xA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return xA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function AA(e){return Ip(JSON.stringify({version:2,heartbeats:e})).length}function W5(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(e){Lp(new wh("platform-logger",t=>new JU(t),"PRIVATE")),Lp(new wh("heartbeat",t=>new H5(t),"PRIVATE")),Nc(iS,EA,e),Nc(iS,EA,"esm2020"),Nc("fire-js","")}j5("");var $5="firebase",q5="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nc($5,q5,"app");var FA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kr,kI;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(_,F){function k(){}k.prototype=F.prototype,_.D=F.prototype,_.prototype=new k,_.prototype.constructor=_,_.C=function(O,N,H){for(var V=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)V[ve-2]=arguments[ve];return F.prototype[N].apply(O,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,F,k){k||(k=0);var O=Array(16);if(typeof F=="string")for(var N=0;16>N;++N)O[N]=F.charCodeAt(k++)|F.charCodeAt(k++)<<8|F.charCodeAt(k++)<<16|F.charCodeAt(k++)<<24;else for(N=0;16>N;++N)O[N]=F[k++]|F[k++]<<8|F[k++]<<16|F[k++]<<24;F=_.g[0],k=_.g[1],N=_.g[2];var H=_.g[3],V=F+(H^k&(N^H))+O[0]+3614090360&4294967295;F=k+(V<<7&4294967295|V>>>25),V=H+(N^F&(k^N))+O[1]+3905402710&4294967295,H=F+(V<<12&4294967295|V>>>20),V=N+(k^H&(F^k))+O[2]+606105819&4294967295,N=H+(V<<17&4294967295|V>>>15),V=k+(F^N&(H^F))+O[3]+3250441966&4294967295,k=N+(V<<22&4294967295|V>>>10),V=F+(H^k&(N^H))+O[4]+4118548399&4294967295,F=k+(V<<7&4294967295|V>>>25),V=H+(N^F&(k^N))+O[5]+1200080426&4294967295,H=F+(V<<12&4294967295|V>>>20),V=N+(k^H&(F^k))+O[6]+2821735955&4294967295,N=H+(V<<17&4294967295|V>>>15),V=k+(F^N&(H^F))+O[7]+4249261313&4294967295,k=N+(V<<22&4294967295|V>>>10),V=F+(H^k&(N^H))+O[8]+1770035416&4294967295,F=k+(V<<7&4294967295|V>>>25),V=H+(N^F&(k^N))+O[9]+2336552879&4294967295,H=F+(V<<12&4294967295|V>>>20),V=N+(k^H&(F^k))+O[10]+4294925233&4294967295,N=H+(V<<17&4294967295|V>>>15),V=k+(F^N&(H^F))+O[11]+2304563134&4294967295,k=N+(V<<22&4294967295|V>>>10),V=F+(H^k&(N^H))+O[12]+1804603682&4294967295,F=k+(V<<7&4294967295|V>>>25),V=H+(N^F&(k^N))+O[13]+4254626195&4294967295,H=F+(V<<12&4294967295|V>>>20),V=N+(k^H&(F^k))+O[14]+2792965006&4294967295,N=H+(V<<17&4294967295|V>>>15),V=k+(F^N&(H^F))+O[15]+1236535329&4294967295,k=N+(V<<22&4294967295|V>>>10),V=F+(N^H&(k^N))+O[1]+4129170786&4294967295,F=k+(V<<5&4294967295|V>>>27),V=H+(k^N&(F^k))+O[6]+3225465664&4294967295,H=F+(V<<9&4294967295|V>>>23),V=N+(F^k&(H^F))+O[11]+643717713&4294967295,N=H+(V<<14&4294967295|V>>>18),V=k+(H^F&(N^H))+O[0]+3921069994&4294967295,k=N+(V<<20&4294967295|V>>>12),V=F+(N^H&(k^N))+O[5]+3593408605&4294967295,F=k+(V<<5&4294967295|V>>>27),V=H+(k^N&(F^k))+O[10]+38016083&4294967295,H=F+(V<<9&4294967295|V>>>23),V=N+(F^k&(H^F))+O[15]+3634488961&4294967295,N=H+(V<<14&4294967295|V>>>18),V=k+(H^F&(N^H))+O[4]+3889429448&4294967295,k=N+(V<<20&4294967295|V>>>12),V=F+(N^H&(k^N))+O[9]+568446438&4294967295,F=k+(V<<5&4294967295|V>>>27),V=H+(k^N&(F^k))+O[14]+3275163606&4294967295,H=F+(V<<9&4294967295|V>>>23),V=N+(F^k&(H^F))+O[3]+4107603335&4294967295,N=H+(V<<14&4294967295|V>>>18),V=k+(H^F&(N^H))+O[8]+1163531501&4294967295,k=N+(V<<20&4294967295|V>>>12),V=F+(N^H&(k^N))+O[13]+2850285829&4294967295,F=k+(V<<5&4294967295|V>>>27),V=H+(k^N&(F^k))+O[2]+4243563512&4294967295,H=F+(V<<9&4294967295|V>>>23),V=N+(F^k&(H^F))+O[7]+1735328473&4294967295,N=H+(V<<14&4294967295|V>>>18),V=k+(H^F&(N^H))+O[12]+2368359562&4294967295,k=N+(V<<20&4294967295|V>>>12),V=F+(k^N^H)+O[5]+4294588738&4294967295,F=k+(V<<4&4294967295|V>>>28),V=H+(F^k^N)+O[8]+2272392833&4294967295,H=F+(V<<11&4294967295|V>>>21),V=N+(H^F^k)+O[11]+1839030562&4294967295,N=H+(V<<16&4294967295|V>>>16),V=k+(N^H^F)+O[14]+4259657740&4294967295,k=N+(V<<23&4294967295|V>>>9),V=F+(k^N^H)+O[1]+2763975236&4294967295,F=k+(V<<4&4294967295|V>>>28),V=H+(F^k^N)+O[4]+1272893353&4294967295,H=F+(V<<11&4294967295|V>>>21),V=N+(H^F^k)+O[7]+4139469664&4294967295,N=H+(V<<16&4294967295|V>>>16),V=k+(N^H^F)+O[10]+3200236656&4294967295,k=N+(V<<23&4294967295|V>>>9),V=F+(k^N^H)+O[13]+681279174&4294967295,F=k+(V<<4&4294967295|V>>>28),V=H+(F^k^N)+O[0]+3936430074&4294967295,H=F+(V<<11&4294967295|V>>>21),V=N+(H^F^k)+O[3]+3572445317&4294967295,N=H+(V<<16&4294967295|V>>>16),V=k+(N^H^F)+O[6]+76029189&4294967295,k=N+(V<<23&4294967295|V>>>9),V=F+(k^N^H)+O[9]+3654602809&4294967295,F=k+(V<<4&4294967295|V>>>28),V=H+(F^k^N)+O[12]+3873151461&4294967295,H=F+(V<<11&4294967295|V>>>21),V=N+(H^F^k)+O[15]+530742520&4294967295,N=H+(V<<16&4294967295|V>>>16),V=k+(N^H^F)+O[2]+3299628645&4294967295,k=N+(V<<23&4294967295|V>>>9),V=F+(N^(k|~H))+O[0]+4096336452&4294967295,F=k+(V<<6&4294967295|V>>>26),V=H+(k^(F|~N))+O[7]+1126891415&4294967295,H=F+(V<<10&4294967295|V>>>22),V=N+(F^(H|~k))+O[14]+2878612391&4294967295,N=H+(V<<15&4294967295|V>>>17),V=k+(H^(N|~F))+O[5]+4237533241&4294967295,k=N+(V<<21&4294967295|V>>>11),V=F+(N^(k|~H))+O[12]+1700485571&4294967295,F=k+(V<<6&4294967295|V>>>26),V=H+(k^(F|~N))+O[3]+2399980690&4294967295,H=F+(V<<10&4294967295|V>>>22),V=N+(F^(H|~k))+O[10]+4293915773&4294967295,N=H+(V<<15&4294967295|V>>>17),V=k+(H^(N|~F))+O[1]+2240044497&4294967295,k=N+(V<<21&4294967295|V>>>11),V=F+(N^(k|~H))+O[8]+1873313359&4294967295,F=k+(V<<6&4294967295|V>>>26),V=H+(k^(F|~N))+O[15]+4264355552&4294967295,H=F+(V<<10&4294967295|V>>>22),V=N+(F^(H|~k))+O[6]+2734768916&4294967295,N=H+(V<<15&4294967295|V>>>17),V=k+(H^(N|~F))+O[13]+1309151649&4294967295,k=N+(V<<21&4294967295|V>>>11),V=F+(N^(k|~H))+O[4]+4149444226&4294967295,F=k+(V<<6&4294967295|V>>>26),V=H+(k^(F|~N))+O[11]+3174756917&4294967295,H=F+(V<<10&4294967295|V>>>22),V=N+(F^(H|~k))+O[2]+718787259&4294967295,N=H+(V<<15&4294967295|V>>>17),V=k+(H^(N|~F))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+F&4294967295,_.g[1]=_.g[1]+(N+(V<<21&4294967295|V>>>11))&4294967295,_.g[2]=_.g[2]+N&4294967295,_.g[3]=_.g[3]+H&4294967295}i.prototype.u=function(_,F){F===void 0&&(F=_.length);for(var k=F-this.blockSize,O=this.B,N=this.h,H=0;H<F;){if(N==0)for(;H<=k;)s(this,_,H),H+=this.blockSize;if(typeof _=="string"){for(;H<F;)if(O[N++]=_.charCodeAt(H++),N==this.blockSize){s(this,O),N=0;break}}else for(;H<F;)if(O[N++]=_[H++],N==this.blockSize){s(this,O),N=0;break}}this.h=N,this.o+=F},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var F=1;F<_.length-8;++F)_[F]=0;var k=8*this.o;for(F=_.length-8;F<_.length;++F)_[F]=k&255,k/=256;for(this.u(_),_=Array(16),F=k=0;4>F;++F)for(var O=0;32>O;O+=8)_[k++]=this.g[F]>>>O&255;return _};function o(_,F){var k=c;return Object.prototype.hasOwnProperty.call(k,_)?k[_]:k[_]=F(_)}function r(_,F){this.h=F;for(var k=[],O=!0,N=_.length-1;0<=N;N--){var H=_[N]|0;O&&H==F||(k[N]=H,O=!1)}this.g=k}var c={};function u(_){return-128<=_&&128>_?o(_,function(F){return new r([F|0],0>F?-1:0)}):new r([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return x(h(-_));for(var F=[],k=1,O=0;_>=k;O++)F[O]=_/k|0,k*=4294967296;return new r(F,0)}function f(_,F){if(_.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(_.charAt(0)=="-")return x(f(_.substring(1),F));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(F,8)),O=p,N=0;N<_.length;N+=8){var H=Math.min(8,_.length-N),V=parseInt(_.substring(N,N+H),F);8>H?(H=h(Math.pow(F,H)),O=O.j(H).add(h(V))):(O=O.j(k),O=O.add(h(V)))}return O}var p=u(0),m=u(1),w=u(16777216);e=r.prototype,e.m=function(){if(E(this))return-x(this).m();for(var _=0,F=1,k=0;k<this.g.length;k++){var O=this.i(k);_+=(0<=O?O:4294967296+O)*F,F*=4294967296}return _},e.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S(this))return"0";if(E(this))return"-"+x(this).toString(_);for(var F=h(Math.pow(_,6)),k=this,O="";;){var N=U(k,F).g;k=P(k,N.j(F));var H=((0<k.g.length?k.g[0]:k.h)>>>0).toString(_);if(k=N,S(k))return H+O;for(;6>H.length;)H="0"+H;O=H+O}},e.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function S(_){if(_.h!=0)return!1;for(var F=0;F<_.g.length;F++)if(_.g[F]!=0)return!1;return!0}function E(_){return _.h==-1}e.l=function(_){return _=P(this,_),E(_)?-1:S(_)?0:1};function x(_){for(var F=_.g.length,k=[],O=0;O<F;O++)k[O]=~_.g[O];return new r(k,~_.h).add(m)}e.abs=function(){return E(this)?x(this):this},e.add=function(_){for(var F=Math.max(this.g.length,_.g.length),k=[],O=0,N=0;N<=F;N++){var H=O+(this.i(N)&65535)+(_.i(N)&65535),V=(H>>>16)+(this.i(N)>>>16)+(_.i(N)>>>16);O=V>>>16,H&=65535,V&=65535,k[N]=V<<16|H}return new r(k,k[k.length-1]&-2147483648?-1:0)};function P(_,F){return _.add(x(F))}e.j=function(_){if(S(this)||S(_))return p;if(E(this))return E(_)?x(this).j(x(_)):x(x(this).j(_));if(E(_))return x(this.j(x(_)));if(0>this.l(w)&&0>_.l(w))return h(this.m()*_.m());for(var F=this.g.length+_.g.length,k=[],O=0;O<2*F;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var N=0;N<_.g.length;N++){var H=this.i(O)>>>16,V=this.i(O)&65535,ve=_.i(N)>>>16,pe=_.i(N)&65535;k[2*O+2*N]+=V*pe,M(k,2*O+2*N),k[2*O+2*N+1]+=H*pe,M(k,2*O+2*N+1),k[2*O+2*N+1]+=V*ve,M(k,2*O+2*N+1),k[2*O+2*N+2]+=H*ve,M(k,2*O+2*N+2)}for(O=0;O<F;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=F;O<2*F;O++)k[O]=0;return new r(k,0)};function M(_,F){for(;(_[F]&65535)!=_[F];)_[F+1]+=_[F]>>>16,_[F]&=65535,F++}function I(_,F){this.g=_,this.h=F}function U(_,F){if(S(F))throw Error("division by zero");if(S(_))return new I(p,p);if(E(_))return F=U(x(_),F),new I(x(F.g),x(F.h));if(E(F))return F=U(_,x(F)),new I(x(F.g),F.h);if(30<_.g.length){if(E(_)||E(F))throw Error("slowDivide_ only works with positive integers.");for(var k=m,O=F;0>=O.l(_);)k=z(k),O=z(O);var N=W(k,1),H=W(O,1);for(O=W(O,2),k=W(k,2);!S(O);){var V=H.add(O);0>=V.l(_)&&(N=N.add(k),H=V),O=W(O,1),k=W(k,1)}return F=P(_,N.j(F)),new I(N,F)}for(N=p;0<=_.l(F);){for(k=Math.max(1,Math.floor(_.m()/F.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),H=h(k),V=H.j(F);E(V)||0<V.l(_);)k-=O,H=h(k),V=H.j(F);S(H)&&(H=m),N=N.add(H),_=P(_,V)}return new I(N,_)}e.A=function(_){return U(this,_).h},e.and=function(_){for(var F=Math.max(this.g.length,_.g.length),k=[],O=0;O<F;O++)k[O]=this.i(O)&_.i(O);return new r(k,this.h&_.h)},e.or=function(_){for(var F=Math.max(this.g.length,_.g.length),k=[],O=0;O<F;O++)k[O]=this.i(O)|_.i(O);return new r(k,this.h|_.h)},e.xor=function(_){for(var F=Math.max(this.g.length,_.g.length),k=[],O=0;O<F;O++)k[O]=this.i(O)^_.i(O);return new r(k,this.h^_.h)};function z(_){for(var F=_.g.length+1,k=[],O=0;O<F;O++)k[O]=_.i(O)<<1|_.i(O-1)>>>31;return new r(k,_.h)}function W(_,F){var k=F>>5;F%=32;for(var O=_.g.length-k,N=[],H=0;H<O;H++)N[H]=0<F?_.i(H+k)>>>F|_.i(H+k+1)<<32-F:_.i(H+k);return new r(N,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,kI=i,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=h,r.fromString=f,kr=r}).apply(typeof FA<"u"?FA:typeof self<"u"?self:typeof window<"u"?window:{});var Ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LI,zd,OI,op,rS,VI,NI,BI;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,b,T){return C==Array.prototype||C==Object.prototype||(C[b]=T.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ng=="object"&&Ng];for(var b=0;b<C.length;++b){var T=C[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function s(C,b){if(b)e:{var T=i;C=C.split(".");for(var B=0;B<C.length-1;B++){var Y=C[B];if(!(Y in T))break e;T=T[Y]}C=C[C.length-1],B=T[C],b=b(B),b!=B&&b!=null&&t(T,C,{configurable:!0,writable:!0,value:b})}}function o(C,b){C instanceof String&&(C+="");var T=0,B=!1,Y={next:function(){if(!B&&T<C.length){var ae=T++;return{value:b(ae,C[ae]),done:!1}}return B=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(C){return C||function(){return o(this,function(b,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},c=this||self;function u(C){var b=typeof C;return b=b!="object"?b:C?Array.isArray(C)?"array":b:"null",b=="array"||b=="object"&&typeof C.length=="number"}function h(C){var b=typeof C;return b=="object"&&C!=null||b=="function"}function f(C,b,T){return C.call.apply(C.bind,arguments)}function p(C,b,T){if(!C)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,B),C.apply(b,Y)}}return function(){return C.apply(b,arguments)}}function m(C,b,T){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function w(C,b){var T=Array.prototype.slice.call(arguments,1);return function(){var B=T.slice();return B.push.apply(B,arguments),C.apply(this,B)}}function S(C,b){function T(){}T.prototype=b.prototype,C.aa=b.prototype,C.prototype=new T,C.prototype.constructor=C,C.Qb=function(B,Y,ae){for(var ye=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ye[ot-2]=arguments[ot];return b.prototype[Y].apply(B,ye)}}function E(C){const b=C.length;if(0<b){const T=Array(b);for(let B=0;B<b;B++)T[B]=C[B];return T}return[]}function x(C,b){for(let T=1;T<arguments.length;T++){const B=arguments[T];if(u(B)){const Y=C.length||0,ae=B.length||0;C.length=Y+ae;for(let ye=0;ye<ae;ye++)C[Y+ye]=B[ye]}else C.push(B)}}class P{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function M(C){return/^[\s\xa0]*$/.test(C)}function I(){var C=c.navigator;return C&&(C=C.userAgent)?C:""}function U(C){return U[" "](C),C}U[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function W(C,b,T){for(const B in C)b.call(T,C[B],B,C)}function _(C,b){for(const T in C)b.call(void 0,C[T],T,C)}function F(C){const b={};for(const T in C)b[T]=C[T];return b}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(C,b){let T,B;for(let Y=1;Y<arguments.length;Y++){B=arguments[Y];for(T in B)C[T]=B[T];for(let ae=0;ae<k.length;ae++)T=k[ae],Object.prototype.hasOwnProperty.call(B,T)&&(C[T]=B[T])}}function N(C){var b=1;C=C.split(":");const T=[];for(;0<b&&C.length;)T.push(C.shift()),b--;return C.length&&T.push(C.join(":")),T}function H(C){c.setTimeout(()=>{throw C},0)}function V(){var C=be;let b=null;return C.g&&(b=C.g,C.g=C.g.next,C.g||(C.h=null),b.next=null),b}class ve{constructor(){this.h=this.g=null}add(b,T){const B=pe.get();B.set(b,T),this.h?this.h.next=B:this.g=B,this.h=B}}var pe=new P(()=>new q,C=>C.reset());class q{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,se=!1,be=new ve,G=()=>{const C=c.Promise.resolve(void 0);ie=()=>{C.then(Z)}};var Z=()=>{for(var C;C=V();){try{C.h.call(C.g)}catch(T){H(T)}var b=pe;b.j(C),100>b.h&&(b.h++,C.next=b.g,b.g=C)}se=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(C,b){this.type=C,this.g=this.target=b,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var C=!1,b=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return C}();function Te(C,b){if(te.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var T=this.type=C.type,B=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=b,b=C.relatedTarget){if(z){e:{try{U(b.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(b=null)}}else T=="mouseover"?b=C.fromElement:T=="mouseout"&&(b=C.toElement);this.relatedTarget=b,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:xe[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&Te.aa.h.call(this)}}S(Te,te);var xe={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),et=0;function We(C,b,T,B,Y){this.listener=C,this.proxy=null,this.src=b,this.type=T,this.capture=!!B,this.ha=Y,this.key=++et,this.da=this.fa=!1}function zt(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function gt(C){this.src=C,this.g={},this.h=0}gt.prototype.add=function(C,b,T,B,Y){var ae=C.toString();C=this.g[ae],C||(C=this.g[ae]=[],this.h++);var ye=Zt(C,b,B,Y);return-1<ye?(b=C[ye],T||(b.fa=!1)):(b=new We(b,this.src,ae,!!B,Y),b.fa=T,C.push(b)),b};function kt(C,b){var T=b.type;if(T in C.g){var B=C.g[T],Y=Array.prototype.indexOf.call(B,b,void 0),ae;(ae=0<=Y)&&Array.prototype.splice.call(B,Y,1),ae&&(zt(b),C.g[T].length==0&&(delete C.g[T],C.h--))}}function Zt(C,b,T,B){for(var Y=0;Y<C.length;++Y){var ae=C[Y];if(!ae.da&&ae.listener==b&&ae.capture==!!T&&ae.ha==B)return Y}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),Ie={};function ut(C,b,T,B,Y){if(Array.isArray(b)){for(var ae=0;ae<b.length;ae++)ut(C,b[ae],T,B,Y);return null}return T=eo(T),C&&C[st]?C.K(b,T,h(B)?!!B.capture:!1,Y):ht(C,b,T,!1,B,Y)}function ht(C,b,T,B,Y,ae){if(!b)throw Error("Invalid event type");var ye=h(Y)?!!Y.capture:!!Y,ot=Tn(C);if(ot||(C[Fe]=ot=new gt(C)),T=ot.add(b,T,B,ye,ae),T.proxy)return T;if(B=je(),T.proxy=B,B.src=C,B.listener=T,C.addEventListener)me||(Y=ye),Y===void 0&&(Y=!1),C.addEventListener(b.toString(),B,Y);else if(C.attachEvent)C.attachEvent(Mt(b.toString()),B);else if(C.addListener&&C.removeListener)C.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return T}function je(){function C(T){return b.call(C.src,C.listener,T)}const b=Kt;return C}function Et(C,b,T,B,Y){if(Array.isArray(b))for(var ae=0;ae<b.length;ae++)Et(C,b[ae],T,B,Y);else B=h(B)?!!B.capture:!!B,T=eo(T),C&&C[st]?(C=C.i,b=String(b).toString(),b in C.g&&(ae=C.g[b],T=Zt(ae,T,B,Y),-1<T&&(zt(ae[T]),Array.prototype.splice.call(ae,T,1),ae.length==0&&(delete C.g[b],C.h--)))):C&&(C=Tn(C))&&(b=C.g[b.toString()],C=-1,b&&(C=Zt(b,T,B,Y)),(T=-1<C?b[C]:null)&&Lt(T))}function Lt(C){if(typeof C!="number"&&C&&!C.da){var b=C.src;if(b&&b[st])kt(b.i,C);else{var T=C.type,B=C.proxy;b.removeEventListener?b.removeEventListener(T,B,C.capture):b.detachEvent?b.detachEvent(Mt(T),B):b.addListener&&b.removeListener&&b.removeListener(B),(T=Tn(b))?(kt(T,C),T.h==0&&(T.src=null,b[Fe]=null)):zt(C)}}}function Mt(C){return C in Ie?Ie[C]:Ie[C]="on"+C}function Kt(C,b){if(C.da)C=!0;else{b=new Te(b,this);var T=C.listener,B=C.ha||C.src;C.fa&&Lt(C),C=T.call(B,b)}return C}function Tn(C){return C=C[Fe],C instanceof gt?C:null}var ci="__closure_events_fn_"+(1e9*Math.random()>>>0);function eo(C){return typeof C=="function"?C:(C[ci]||(C[ci]=function(b){return C.handleEvent(b)}),C[ci])}function _e(){le.call(this),this.i=new gt(this),this.M=this,this.F=null}S(_e,le),_e.prototype[st]=!0,_e.prototype.removeEventListener=function(C,b,T,B){Et(this,C,b,T,B)};function Ke(C,b){var T,B=C.F;if(B)for(T=[];B;B=B.F)T.push(B);if(C=C.M,B=b.type||b,typeof b=="string")b=new te(b,C);else if(b instanceof te)b.target=b.target||C;else{var Y=b;b=new te(B,C),O(b,Y)}if(Y=!0,T)for(var ae=T.length-1;0<=ae;ae--){var ye=b.g=T[ae];Y=qe(ye,B,!0,b)&&Y}if(ye=b.g=C,Y=qe(ye,B,!0,b)&&Y,Y=qe(ye,B,!1,b)&&Y,T)for(ae=0;ae<T.length;ae++)ye=b.g=T[ae],Y=qe(ye,B,!1,b)&&Y}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var C=this.i,b;for(b in C.g){for(var T=C.g[b],B=0;B<T.length;B++)zt(T[B]);delete C.g[b],C.h--}}this.F=null},_e.prototype.K=function(C,b,T,B){return this.i.add(String(C),b,!1,T,B)},_e.prototype.L=function(C,b,T,B){return this.i.add(String(C),b,!0,T,B)};function qe(C,b,T,B){if(b=C.i.g[String(b)],!b)return!0;b=b.concat();for(var Y=!0,ae=0;ae<b.length;++ae){var ye=b[ae];if(ye&&!ye.da&&ye.capture==T){var ot=ye.listener,vn=ye.ha||ye.src;ye.fa&&kt(C.i,ye),Y=ot.call(vn,B)!==!1&&Y}}return Y&&!B.defaultPrevented}function pt(C,b,T){if(typeof C=="function")T&&(C=m(C,T));else if(C&&typeof C.handleEvent=="function")C=m(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:c.setTimeout(C,b||0)}function Dl(C){C.g=pt(()=>{C.g=null,C.i&&(C.i=!1,Dl(C))},C.l);const b=C.h;C.h=null,C.m.apply(null,b)}class lC extends le{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Dl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(C){le.call(this),this.h=C,this.g={}}S(ta,le);var na=[];function ia(C){W(C.g,function(b,T){this.g.hasOwnProperty(T)&&Lt(b)},C),C.g={}}ta.prototype.N=function(){ta.aa.N.call(this),ia(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var os=c.JSON.stringify,Al=c.JSON.parse,sa=class{stringify(C){return c.JSON.stringify(C,void 0)}parse(C){return c.JSON.parse(C,void 0)}};function Au(){}Au.prototype.h=null;function Fu(C){return C.h||(C.h=C.i())}function Pu(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function no(){te.call(this,"d")}S(no,te);function Mu(){te.call(this,"c")}S(Mu,te);var Cs={},Iu=null;function Ko(){return Iu=Iu||new _e}Cs.La="serverreachability";function Fl(C){te.call(this,Cs.La,C)}S(Fl,te);function Yo(C){const b=Ko();Ke(b,new Fl(b))}Cs.STAT_EVENT="statevent";function df(C,b){te.call(this,Cs.STAT_EVENT,C),this.stat=b}S(df,te);function Bt(C){const b=Ko();Ke(b,new df(b,C))}Cs.Ma="timingevent";function Cn(C,b){te.call(this,Cs.Ma,C),this.size=b}S(Cn,te);function ln(C,b){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){C()},b)}function Li(){this.g=!0}Li.prototype.xa=function(){this.g=!1};function _u(C,b,T,B,Y,ae){C.info(function(){if(C.g)if(ae)for(var ye="",ot=ae.split("&"),vn=0;vn<ot.length;vn++){var rt=ot[vn].split("=");if(1<rt.length){var Dn=rt[0];rt=rt[1];var yn=Dn.split("_");ye=2<=yn.length&&yn[1]=="type"?ye+(Dn+"="+rt+"&"):ye+(Dn+"=redacted&")}}else ye=null;else ye=ae;return"XMLHTTP REQ ("+B+") [attempt "+Y+"]: "+b+`
`+T+`
`+ye})}function cC(C,b,T,B,Y,ae,ye){C.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+Y+"]: "+b+`
`+T+`
`+ae+" "+ye})}function Qo(C,b,T,B){C.info(function(){return"XMLHTTP TEXT ("+b+"): "+oa(C,T)+(B?" "+B:"")})}function hf(C,b){C.info(function(){return"TIMEOUT: "+b})}Li.prototype.info=function(){};function oa(C,b){if(!C.g)return b;if(!b)return null;try{var T=JSON.parse(b);if(T){for(C=0;C<T.length;C++)if(Array.isArray(T[C])){var B=T[C];if(!(2>B.length)){var Y=B[1];if(Array.isArray(Y)&&!(1>Y.length)){var ae=Y[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var ye=1;ye<Y.length;ye++)Y[ye]=""}}}}return os(T)}catch{return b}}var Xo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},io={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vs;function ys(){}S(ys,Au),ys.prototype.g=function(){return new XMLHttpRequest},ys.prototype.i=function(){return{}},vs=new ys;function ei(C,b,T,B){this.j=C,this.i=b,this.l=T,this.R=B||1,this.U=new ta(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jt}function Jt(){this.i=null,this.g="",this.h=!1}var ku={},Pl={};function rs(C,b,T){C.L=1,C.v=ua(Si(b)),C.m=T,C.P=!0,so(C,null)}function so(C,b){C.F=Date.now(),ra(C),C.A=Si(C.v);var T=C.A,B=C.R;Array.isArray(B)||(B=[String(B)]),Gu(T.i,"t",B),C.C=0,T=C.j.J,C.h=new Jt,C.g=Af(C.j,T?b:null,!C.m),0<C.O&&(C.M=new lC(m(C.Y,C,C.g),C.O)),b=C.U,T=C.g,B=C.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(na[0]=Y.toString()),Y=na);for(var ae=0;ae<Y.length;ae++){var ye=ut(T,Y[ae],B||b.handleEvent,!1,b.h||b);if(!ye)break;b.g[ye.key]=ye}b=C.H?F(C.H):{},C.m?(C.u||(C.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,b)):(C.u="GET",C.g.ea(C.A,C.u,null,b)),Yo(),_u(C.i,C.u,C.A,C.l,C.R,C.m)}ei.prototype.ca=function(C){C=C.target;const b=this.M;b&&Bi(C)==3?b.j():this.Y(C)},ei.prototype.Y=function(C){try{if(C==this.g)e:{const yn=Bi(this.g);var b=this.g.Ba();const fo=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||wf(this.g)))){this.J||yn!=4||b==7||(b==8||0>=fo?Yo(3):Yo(2)),Zo(this);var T=this.g.Z();this.X=T;t:if(ff(this)){var B=wf(this.g);C="";var Y=B.length,ae=Bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),ws(this);var ye="";break t}this.h.i=new c.TextDecoder}for(b=0;b<Y;b++)this.h.h=!0,C+=this.h.i.decode(B[b],{stream:!(ae&&b==Y-1)});B.length=0,this.h.g+=C,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=T==200,cC(this.i,this.u,this.A,this.l,this.R,yn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,vn=this.g;if((ot=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ot)){var rt=ot;break t}}rt=null}if(T=rt)Qo(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,T);else{this.o=!1,this.s=3,Bt(12),kn(this),ws(this);break e}}if(this.P){T=!0;let Ln;for(;!this.J&&this.C<ye.length;)if(Ln=gf(this,ye),Ln==Pl){yn==4&&(this.s=4,Bt(14),T=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==ku){this.s=4,Bt(15),Qo(this.i,this.l,ye,"[Invalid Chunk]"),T=!1;break}else Qo(this.i,this.l,Ln,null),aa(this,Ln);if(ff(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||ye.length!=0||this.h.h||(this.s=1,Bt(16),T=!1),this.o=this.o&&T,!T)Qo(this.i,this.l,ye,"[Invalid Chunked Response]"),kn(this),ws(this);else if(0<ye.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),va(Dn),Dn.M=!0,Bt(11))}}else Qo(this.i,this.l,ye,null),aa(this,ye);yn==4&&kn(this),this.o&&!this.J&&(yn==4?Tf(this.j,this):(this.o=!1,ra(this)))}else gC(this.g),T==400&&0<ye.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),kn(this),ws(this)}}}catch{}finally{}};function ff(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function gf(C,b){var T=C.C,B=b.indexOf(`
`,T);return B==-1?Pl:(T=Number(b.substring(T,B)),isNaN(T)?ku:(B+=1,B+T>b.length?Pl:(b=b.slice(B,B+T),C.C=B+T,b)))}ei.prototype.cancel=function(){this.J=!0,kn(this)};function ra(C){C.S=Date.now()+C.I,pf(C,C.I)}function pf(C,b){if(C.B!=null)throw Error("WatchDog timer not null");C.B=ln(m(C.ba,C),b)}function Zo(C){C.B&&(c.clearTimeout(C.B),C.B=null)}ei.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(hf(this.i,this.A),this.L!=2&&(Yo(),Bt(17)),kn(this),this.s=2,ws(this)):pf(this,this.S-C)};function ws(C){C.j.G==0||C.J||Tf(C.j,C)}function kn(C){Zo(C);var b=C.M;b&&typeof b.ma=="function"&&b.ma(),C.M=null,ia(C.U),C.g&&(b=C.g,C.g=null,b.abort(),b.ma())}function aa(C,b){try{var T=C.j;if(T.G!=0&&(T.g==C||Lu(T.h,C))){if(!C.K&&Lu(T.h,C)&&T.G==3){try{var B=T.Da.g.parse(b)}catch{B=null}if(Array.isArray(B)&&B.length==3){var Y=B;if(Y[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<C.F)zl(T),Gl(T);else break e;ju(T),Bt(18)}}else T.za=Y[1],0<T.za-T.T&&37500>Y[2]&&T.F&&T.v==0&&!T.C&&(T.C=ln(m(T.Za,T),6e3));if(1>=Il(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ho(T,11)}else if((C.K||T.g==C)&&zl(T),!M(b))for(Y=T.Da.g.parse(b),b=0;b<Y.length;b++){let rt=Y[b];if(T.T=rt[0],rt=rt[1],T.G==2)if(rt[0]=="c"){T.K=rt[1],T.ia=rt[2];const Dn=rt[3];Dn!=null&&(T.la=Dn,T.j.info("VER="+T.la));const yn=rt[4];yn!=null&&(T.Aa=yn,T.j.info("SVER="+T.Aa));const fo=rt[5];fo!=null&&typeof fo=="number"&&0<fo&&(B=1.5*fo,T.L=B,T.j.info("backChannelRequestTimeoutMs_="+B)),B=T;const Ln=C.g;if(Ln){const Ds=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var ae=B.h;ae.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(_l(ae,ae.h),ae.h=null))}if(B.D){const qu=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;qu&&(B.ya=qu,Tt(B.I,B.D,qu))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-C.F,T.j.info("Handshake RTT: "+T.R+"ms")),B=T;var ye=C;if(B.qa=Df(B,B.J?B.ia:null,B.W),ye.K){ti(B.h,ye);var ot=ye,vn=B.L;vn&&(ot.I=vn),ot.B&&(Zo(ot),ra(ot)),B.g=ye}else Rf(B);0<T.i.length&&Hl(T)}else rt[0]!="stop"&&rt[0]!="close"||ho(T,7);else T.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?ho(T,7):Uu(T):rt[0]!="noop"&&T.l&&T.l.ta(rt),T.v=0)}}Yo(4)}catch{}}var mf=class{constructor(C,b){this.g=C,this.map=b}};function oo(C){this.l=C||10,c.PerformanceNavigationTiming?(C=c.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ml(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Il(C){return C.h?1:C.g?C.g.size:0}function Lu(C,b){return C.h?C.h==b:C.g?C.g.has(b):!1}function _l(C,b){C.g?C.g.add(b):C.h=b}function ti(C,b){C.h&&C.h==b?C.h=null:C.g&&C.g.has(b)&&C.g.delete(b)}oo.prototype.cancel=function(){if(this.i=Ou(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Ou(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let b=C.i;for(const T of C.g.values())b=b.concat(T.D);return b}return E(C.i)}function uC(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(u(C)){for(var b=[],T=C.length,B=0;B<T;B++)b.push(C[B]);return b}b=[],T=0;for(B in C)b[T++]=C[B];return b}function kl(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(u(C)||typeof C=="string"){var b=[];C=C.length;for(var T=0;T<C;T++)b.push(T);return b}b=[],T=0;for(const B in C)b[T++]=B;return b}}}function Vu(C,b){if(C.forEach&&typeof C.forEach=="function")C.forEach(b,void 0);else if(u(C)||typeof C=="string")Array.prototype.forEach.call(C,b,void 0);else for(var T=kl(C),B=uC(C),Y=B.length,ae=0;ae<Y;ae++)b.call(void 0,B[ae],T&&T[ae],C)}var la=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dC(C,b){if(C){C=C.split("&");for(var T=0;T<C.length;T++){var B=C[T].indexOf("="),Y=null;if(0<=B){var ae=C[T].substring(0,B);Y=C[T].substring(B+1)}else ae=C[T];b(ae,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function cn(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof cn){this.h=C.h,ca(this,C.j),this.o=C.o,this.g=C.g,Jo(this,C.s),this.l=C.l;var b=C.i,T=new ao;T.i=b.i,b.g&&(T.g=new Map(b.g),T.h=b.h),ro(this,T),this.m=C.m}else C&&(b=String(C).match(la))?(this.h=!1,ca(this,b[1]||"",!0),this.o=Oi(b[2]||""),this.g=Oi(b[3]||"",!0),Jo(this,b[4]),this.l=Oi(b[5]||"",!0),ro(this,b[6]||"",!0),this.m=Oi(b[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}cn.prototype.toString=function(){var C=[],b=this.j;b&&C.push(da(b,Nu,!0),":");var T=this.g;return(T||b=="file")&&(C.push("//"),(b=this.o)&&C.push(da(b,Nu,!0),"@"),C.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&C.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&C.push("/"),C.push(da(T,T.charAt(0)=="/"?hC:Bu,!0))),(T=this.i.toString())&&C.push("?",T),(T=this.m)&&C.push("#",da(T,Ll)),C.join("")};function Si(C){return new cn(C)}function ca(C,b,T){C.j=T?Oi(b,!0):b,C.j&&(C.j=C.j.replace(/:$/,""))}function Jo(C,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);C.s=b}else C.s=null}function ro(C,b,T){b instanceof ao?(C.i=b,vf(C.i,C.h)):(T||(b=da(b,fC)),C.i=new ao(b,C.h))}function Tt(C,b,T){C.i.set(b,T)}function ua(C){return Tt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Oi(C,b){return C?b?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function da(C,b,T){return typeof C=="string"?(C=encodeURI(C).replace(b,Cf),T&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Cf(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Nu=/[#\/\?@]/g,Bu=/[#\?:]/g,hC=/[#\?]/g,fC=/[#\?@]/g,Ll=/#/g;function ao(C,b){this.h=this.g=null,this.i=C||null,this.j=!!b}function Vi(C){C.g||(C.g=new Map,C.h=0,C.i&&dC(C.i,function(b,T){C.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}e=ao.prototype,e.add=function(C,b){Vi(this),this.i=null,C=Ss(this,C);var T=this.g.get(C);return T||this.g.set(C,T=[]),T.push(b),this.h+=1,this};function lo(C,b){Vi(C),b=Ss(C,b),C.g.has(b)&&(C.i=null,C.h-=C.g.get(b).length,C.g.delete(b))}function co(C,b){return Vi(C),b=Ss(C,b),C.g.has(b)}e.forEach=function(C,b){Vi(this),this.g.forEach(function(T,B){T.forEach(function(Y){C.call(b,Y,B,this)},this)},this)},e.na=function(){Vi(this);const C=Array.from(this.g.values()),b=Array.from(this.g.keys()),T=[];for(let B=0;B<b.length;B++){const Y=C[B];for(let ae=0;ae<Y.length;ae++)T.push(b[B])}return T},e.V=function(C){Vi(this);let b=[];if(typeof C=="string")co(this,C)&&(b=b.concat(this.g.get(Ss(this,C))));else{C=Array.from(this.g.values());for(let T=0;T<C.length;T++)b=b.concat(C[T])}return b},e.set=function(C,b){return Vi(this),this.i=null,C=Ss(this,C),co(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[b]),this.h+=1,this},e.get=function(C,b){return C?(C=this.V(C),0<C.length?String(C[0]):b):b};function Gu(C,b,T){lo(C,b),0<T.length&&(C.i=null,C.g.set(Ss(C,b),E(T)),C.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],b=Array.from(this.g.keys());for(var T=0;T<b.length;T++){var B=b[T];const ae=encodeURIComponent(String(B)),ye=this.V(B);for(B=0;B<ye.length;B++){var Y=ae;ye[B]!==""&&(Y+="="+encodeURIComponent(String(ye[B]))),C.push(Y)}}return this.i=C.join("&")};function Ss(C,b){return b=String(b),C.j&&(b=b.toLowerCase()),b}function vf(C,b){b&&!C.j&&(Vi(C),C.i=null,C.g.forEach(function(T,B){var Y=B.toLowerCase();B!=Y&&(lo(this,B),Gu(this,Y,T))},C)),C.j=b}function ha(C,b){const T=new Li;if(c.Image){const B=new Image;B.onload=w(Ni,T,"TestLoadImage: loaded",!0,b,B),B.onerror=w(Ni,T,"TestLoadImage: error",!1,b,B),B.onabort=w(Ni,T,"TestLoadImage: abort",!1,b,B),B.ontimeout=w(Ni,T,"TestLoadImage: timeout",!1,b,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=C}else b(!1)}function as(C,b){const T=new Li,B=new AbortController,Y=setTimeout(()=>{B.abort(),Ni(T,"TestPingServer: timeout",!1,b)},1e4);fetch(C,{signal:B.signal}).then(ae=>{clearTimeout(Y),ae.ok?Ni(T,"TestPingServer: ok",!0,b):Ni(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Y),Ni(T,"TestPingServer: error",!1,b)})}function Ni(C,b,T,B,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),B(T)}catch{}}function fa(){this.g=new sa}function bs(C,b,T){const B=T||"";try{Vu(C,function(Y,ae){let ye=Y;h(Y)&&(ye=os(Y)),b.push(B+ae+"="+encodeURIComponent(ye))})}catch(Y){throw b.push(B+"type="+encodeURIComponent("_badmap")),Y}}function er(C){this.l=C.Ub||null,this.j=C.eb||!1}S(er,Au),er.prototype.g=function(){return new uo(this.l,this.j)},er.prototype.i=function(C){return function(){return C}}({});function uo(C,b){_e.call(this),this.D=C,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(uo,_e),e=uo.prototype,e.open=function(C,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=b,this.readyState=1,Es(this)},e.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(b.body=C),(this.D||c).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},e.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hu(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hu(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}e.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var b=C.value?C.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!C.done}))&&(this.response=this.responseText+=b)}C.done?Rs(this):Es(this),this.readyState==3&&Hu(this)}},e.Ra=function(C){this.g&&(this.response=this.responseText=C,Rs(this))},e.Qa=function(C){this.g&&(this.response=C,Rs(this))},e.ga=function(){this.g&&Rs(this)};function Rs(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Es(C)}e.setRequestHeader=function(C,b){this.u.append(C,b)},e.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,C.push(T[0]+": "+T[1]),T=b.next();return C.join(`\r
`)};function Es(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function zu(C){let b="";return W(C,function(T,B){b+=B,b+=":",b+=T,b+=`\r
`}),b}function xn(C,b,T){e:{for(B in T){var B=!1;break e}B=!0}B||(T=zu(T),typeof C=="string"?T!=null&&encodeURIComponent(String(T)):Tt(C,b,T))}function mt(C){_e.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(mt,_e);var Ol=/^https?$/i,ga=["POST","PUT"];e=mt.prototype,e.Ha=function(C){this.J=C},e.ea=function(C,b,T,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);b=b?b.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vs.g(),this.v=this.o?Fu(this.o):Fu(vs),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(b,String(C),!0),this.B=!1}catch(ae){yf(this,ae);return}if(C=T||"",T=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var Y in B)T.set(Y,B[Y]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ae of B.keys())T.set(ae,B.get(ae));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(T.keys()).find(ae=>ae.toLowerCase()=="content-type"),Y=c.FormData&&C instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ga,b,void 0))||B||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,ye]of T)this.g.setRequestHeader(ae,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pa(this),this.u=!0,this.g.send(C),this.u=!1}catch(ae){yf(this,ae)}};function yf(C,b){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=b,C.m=5,Vl(C),Ts(C)}function Vl(C){C.A||(C.A=!0,Ke(C,"complete"),Ke(C,"error"))}e.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ke(this,"complete"),Ke(this,"abort"),Ts(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Nl(this):this.bb())},e.bb=function(){Nl(this)};function Nl(C){if(C.h&&typeof r<"u"&&(!C.v[1]||Bi(C)!=4||C.Z()!=2)){if(C.u&&Bi(C)==4)pt(C.Ea,0,C);else if(Ke(C,"readystatechange"),Bi(C)==4){C.h=!1;try{const ye=C.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var B;if(B=ye===0){var Y=String(C.D).match(la)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),B=!Ol.test(Y?Y.toLowerCase():"")}T=B}if(T)Ke(C,"complete"),Ke(C,"success");else{C.m=6;try{var ae=2<Bi(C)?C.g.statusText:""}catch{ae=""}C.l=ae+" ["+C.Z()+"]",Vl(C)}}finally{Ts(C)}}}}function Ts(C,b){if(C.g){pa(C);const T=C.g,B=C.v[0]?()=>{}:null;C.g=null,C.v=null,b||Ke(C,"ready");try{T.onreadystatechange=B}catch{}}}function pa(C){C.I&&(c.clearTimeout(C.I),C.I=null)}e.isActive=function(){return!!this.g};function Bi(C){return C.g?C.g.readyState:0}e.Z=function(){try{return 2<Bi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(C){if(this.g){var b=this.g.responseText;return C&&b.indexOf(C)==0&&(b=b.substring(C.length)),Al(b)}};function wf(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function gC(C){const b={};C=(C.g&&2<=Bi(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<C.length;B++){if(M(C[B]))continue;var T=N(C[B]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ae=b[Y]||[];b[Y]=ae,ae.push(T)}_(b,function(B){return B.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(C,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[C]||b}function Bl(C){this.Aa=0,this.i=[],this.j=new Li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,C),this.cb=ma("retryDelaySeedMs",1e4,C),this.Wa=ma("forwardChannelMaxRetries",2,C),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new oo(C&&C.concurrentRequestLimit),this.Da=new fa,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Bl.prototype,e.la=8,e.G=1,e.connect=function(C,b,T,B){Bt(0),this.W=C,this.H=b||{},T&&B!==void 0&&(this.H.OSID=T,this.H.OAID=B),this.F=this.X,this.I=Df(this,null,this.W),Hl(this)};function Uu(C){if(Sf(C),C.G==3){var b=C.U++,T=Si(C.I);if(Tt(T,"SID",C.K),Tt(T,"RID",b),Tt(T,"TYPE","terminate"),Ca(C,T),b=new ei(C,C.j,b),b.L=2,b.v=ua(Si(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.v,T=!0),T||(b.g=Af(b.j,null),b.g.ea(b.v)),b.F=Date.now(),ra(b)}xf(C)}function Gl(C){C.g&&(va(C),C.g.cancel(),C.g=null)}function Sf(C){Gl(C),C.u&&(c.clearTimeout(C.u),C.u=null),zl(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&c.clearTimeout(C.s),C.s=null)}function Hl(C){if(!Ml(C.h)&&!C.s){C.s=!0;var b=C.Ga;ie||G(),se||(ie(),se=!0),be.add(b,C),C.B=0}}function pC(C,b){return Il(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=b.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=ln(m(C.Ga,C,b),$u(C,C.B)),C.B++,!0)}e.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Y=new ei(this,this.j,C);let ae=this.o;if(this.S&&(ae?(ae=F(ae),O(ae,this.S)):ae=this.S),this.m!==null||this.O||(Y.H=ae,ae=null),this.P)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var B=this.i[T];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(b+=B,4096<b){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=bf(this,Y,b),T=Si(this.I),Tt(T,"RID",C),Tt(T,"CVER",22),this.D&&Tt(T,"X-HTTP-Session-Id",this.D),Ca(this,T),ae&&(this.O?b="headers="+encodeURIComponent(String(zu(ae)))+"&"+b:this.m&&xn(T,this.m,ae)),_l(this.h,Y),this.Ua&&Tt(T,"TYPE","init"),this.P?(Tt(T,"$req",b),Tt(T,"SID","null"),Y.T=!0,rs(Y,T,null)):rs(Y,T,b),this.G=2}}else this.G==3&&(C?Wu(this,C):this.i.length==0||Ml(this.h)||Wu(this))};function Wu(C,b){var T;b?T=b.l:T=C.U++;const B=Si(C.I);Tt(B,"SID",C.K),Tt(B,"RID",T),Tt(B,"AID",C.T),Ca(C,B),C.m&&C.o&&xn(B,C.m,C.o),T=new ei(C,C.j,T,C.B+1),C.m===null&&(T.H=C.o),b&&(C.i=b.D.concat(C.i)),b=bf(C,T,1e3),T.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),_l(C.h,T),rs(T,B,b)}function Ca(C,b){C.H&&W(C.H,function(T,B){Tt(b,B,T)}),C.l&&Vu({},function(T,B){Tt(b,B,T)})}function bf(C,b,T){T=Math.min(C.i.length,T);var B=C.l?m(C.l.Na,C.l,C):null;e:{var Y=C.i;let ae=-1;for(;;){const ye=["count="+T];ae==-1?0<T?(ae=Y[0].g,ye.push("ofs="+ae)):ae=0:ye.push("ofs="+ae);let ot=!0;for(let vn=0;vn<T;vn++){let rt=Y[vn].g;const Dn=Y[vn].map;if(rt-=ae,0>rt)ae=Math.max(0,Y[vn].g-100),ot=!1;else try{bs(Dn,ye,"req"+rt+"_")}catch{B&&B(Dn)}}if(ot){B=ye.join("&");break e}}}return C=C.i.splice(0,T),b.D=C,B}function Rf(C){if(!C.g&&!C.u){C.Y=1;var b=C.Fa;ie||G(),se||(ie(),se=!0),be.add(b,C),C.v=0}}function ju(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=ln(m(C.Fa,C),$u(C,C.v)),C.v++,!0)}e.Fa=function(){if(this.u=null,Ef(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=ln(m(this.ab,this),C)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Gl(this),Ef(this))};function va(C){C.A!=null&&(c.clearTimeout(C.A),C.A=null)}function Ef(C){C.g=new ei(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var b=Si(C.qa);Tt(b,"RID","rpc"),Tt(b,"SID",C.K),Tt(b,"AID",C.T),Tt(b,"CI",C.F?"0":"1"),!C.F&&C.ja&&Tt(b,"TO",C.ja),Tt(b,"TYPE","xmlhttp"),Ca(C,b),C.m&&C.o&&xn(b,C.m,C.o),C.L&&(C.g.I=C.L);var T=C.g;C=C.ia,T.L=1,T.v=ua(Si(b)),T.m=null,T.P=!0,so(T,C)}e.Za=function(){this.C!=null&&(this.C=null,Gl(this),ju(this),Bt(19))};function zl(C){C.C!=null&&(c.clearTimeout(C.C),C.C=null)}function Tf(C,b){var T=null;if(C.g==b){zl(C),va(C),C.g=null;var B=2}else if(Lu(C.h,b))T=b.D,ti(C.h,b),B=1;else return;if(C.G!=0){if(b.o)if(B==1){T=b.m?b.m.length:0,b=Date.now()-b.F;var Y=C.B;B=Ko(),Ke(B,new Cn(B,T)),Hl(C)}else Rf(C);else if(Y=b.s,Y==3||Y==0&&0<b.X||!(B==1&&pC(C,b)||B==2&&ju(C)))switch(T&&0<T.length&&(b=C.h,b.i=b.i.concat(T)),Y){case 1:ho(C,5);break;case 4:ho(C,10);break;case 3:ho(C,6);break;default:ho(C,2)}}}function $u(C,b){let T=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(T*=2),T*b}function ho(C,b){if(C.j.info("Error code "+b),b==2){var T=m(C.fb,C),B=C.Xa;const Y=!B;B=new cn(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ca(B,"https"),ua(B),Y?ha(B.toString(),T):as(B.toString(),T)}else Bt(2);C.G=0,C.l&&C.l.sa(b),xf(C),Sf(C)}e.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function xf(C){if(C.G=0,C.ka=[],C.l){const b=Ou(C.h);(b.length!=0||C.i.length!=0)&&(x(C.ka,b),x(C.ka,C.i),C.h.i.length=0,E(C.i),C.i.length=0),C.l.ra()}}function Df(C,b,T){var B=T instanceof cn?Si(T):new cn(T);if(B.g!="")b&&(B.g=b+"."+B.g),Jo(B,B.s);else{var Y=c.location;B=Y.protocol,b=b?b+"."+Y.hostname:Y.hostname,Y=+Y.port;var ae=new cn(null);B&&ca(ae,B),b&&(ae.g=b),Y&&Jo(ae,Y),T&&(ae.l=T),B=ae}return T=C.D,b=C.ya,T&&b&&Tt(B,T,b),Tt(B,"VER",C.la),Ca(C,B),B}function Af(C,b,T){if(b&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=C.Ca&&!C.pa?new mt(new er({eb:T})):new mt(C.pa),b.Ha(C.J),b}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ff(){}e=Ff.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ul(){}Ul.prototype.g=function(C,b){return new ni(C,b)};function ni(C,b){_e.call(this),this.g=new Bl(b),this.l=C,this.h=b&&b.messageUrlParams||null,C=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(C?C["X-WebChannel-Content-Type"]=b.messageContentType:C={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(C?C["X-WebChannel-Client-Profile"]=b.va:C={"X-WebChannel-Client-Profile":b.va}),this.g.S=C,(C=b&&b.Sb)&&!M(C)&&(this.g.m=C),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!M(b)&&(this.g.D=b,C=this.h,C!==null&&b in C&&(C=this.h,b in C&&delete C[b])),this.j=new xs(this)}S(ni,_e),ni.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ni.prototype.close=function(){Uu(this.g)},ni.prototype.o=function(C){var b=this.g;if(typeof C=="string"){var T={};T.__data__=C,C=T}else this.u&&(T={},T.__data__=os(C),C=T);b.i.push(new mf(b.Ya++,C)),b.G==3&&Hl(b)},ni.prototype.N=function(){this.g.l=null,delete this.j,Uu(this.g),delete this.g,ni.aa.N.call(this)};function Pf(C){no.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var b=C.__sm__;if(b){e:{for(const T in b){C=T;break e}C=void 0}(this.i=C)&&(C=this.i,b=b!==null&&C in b?b[C]:void 0),this.data=b}else this.data=C}S(Pf,no);function Mf(){Mu.call(this),this.status=1}S(Mf,Mu);function xs(C){this.g=C}S(xs,Ff),xs.prototype.ua=function(){Ke(this.g,"a")},xs.prototype.ta=function(C){Ke(this.g,new Pf(C))},xs.prototype.sa=function(C){Ke(this.g,new Mf)},xs.prototype.ra=function(){Ke(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,ni.prototype.send=ni.prototype.o,ni.prototype.open=ni.prototype.m,ni.prototype.close=ni.prototype.close,BI=function(){return new Ul},NI=function(){return Ko()},VI=Cs,rS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,op=Xo,io.COMPLETE="complete",OI=io,Pu.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",_e.prototype.listen=_e.prototype.K,zd=Pu,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,LI=mt}).apply(typeof Ng<"u"?Ng:typeof self<"u"?self:typeof window<"u"?window:{});const PA="@firebase/firestore",MA="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new AI("@firebase/firestore");function Tc(){return ll.logLevel}function Ee(e,...t){if(ll.logLevel<=ct.DEBUG){const n=t.map(Xb);ll.debug(`Firestore (${Cu}): ${e}`,...n)}}function Ho(e,...t){if(ll.logLevel<=ct.ERROR){const n=t.map(Xb);ll.error(`Firestore (${Cu}): ${e}`,...n)}}function eu(e,...t){if(ll.logLevel<=ct.WARN){const n=t.map(Xb);ll.warn(`Firestore (${Cu}): ${e}`,...n)}}function Xb(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,GI(e,i,n)}function GI(e,t,n){let i=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ho(i),new Error(i)}function yt(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||GI(t,s,i)}function Ue(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends mu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class K5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Yn.UNAUTHENTICATED))}shutdown(){}}class Y5{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Q5{constructor(t){this.t=t,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let o=new Mo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mo,t.enqueueRetryable(()=>s(this.currentUser))};const r=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mo)}},0),r()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string",31837,{l:i}),new HI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new Yn(t)}}class X5{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Z5{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new X5(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J5{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,M5(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const i=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const r=o.token!==this.m;return this.m=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const s=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new IA(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new IA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=e6(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=t.charAt(s[o]%62))}return i}}function tt(e,t){return e<t?-1:e>t?1:0}function aS(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),o=t.charAt(i);if(s!==o)return Gy(s)===Gy(o)?tt(s,o):Gy(s)?1:-1}return tt(e.length,t.length)}const t6=55296,n6=57343;function Gy(e){const t=e.charCodeAt(0);return t>=t6&&t<=n6}function tu(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="__name__";class Ls{constructor(t,n,i){n===void 0?n=0:n>t.length&&Ne(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Ne(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Ls.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ls?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const o=Ls.compareSegments(t.get(s),n.get(s));if(o!==0)return o}return tt(t.length,n.length)}static compareSegments(t,n){const i=Ls.isNumericId(t),s=Ls.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Ls.extractNumericId(t).compare(Ls.extractNumericId(n)):aS(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return kr.fromString(t.substring(4,t.length-2))}}class _t extends Ls{construct(t,n,i){return new _t(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Re(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const i6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Ls{construct(t,n,i){return new zn(t,n,i)}static isValidIdentifier(t){return i6.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_A}static keyField(){return new zn([_A])}static fromServerFormat(t){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Re(de.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let r=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new Re(de.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Re(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else c==="`"?(r=!r,s++):c!=="."||r?(i+=c,s++):(o(),s++)}if(o(),r)throw new Re(de.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zn(n)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.path=t}static fromPath(t){return new ke(_t.fromString(t))}static fromName(t){return new ke(_t.fromString(t).popFirst(5))}static empty(){return new ke(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _t.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ke(new _t(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(e,t,n){if(!n)throw new Re(de.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function s6(e,t,n,i){if(t===!0&&i===!0)throw new Re(de.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function kA(e){if(!ke.isDocumentKey(e))throw new Re(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function LA(e){if(ke.isDocumentKey(e))throw new Re(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function UI(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function km(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ne(12329,{type:typeof e})}function Ks(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Re(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=km(e);throw new Re(de.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e,t){const n={typeString:e};return t&&(n.value=t),n}function Qh(e,t){if(!UI(e))throw new Re(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const r=e[i];if(s&&typeof r!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&r!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Re(de.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=-62135596800,VA=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(t){return Vt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*VA);return new Vt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Re(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<OA)throw new Re(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Re(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VA}_compareTo(t){return this.seconds===t.seconds?tt(this.nanoseconds,t.nanoseconds):tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qh(t,Vt._jsonSchema))return new Vt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-OA;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:mn("string",Vt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(t){return new ze(t)}static min(){return new ze(new Vt(0,0))}static max(){return new ze(new Vt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=-1;function o6(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(i===1e9?new Vt(n+1,0):new Vt(n,i));return new Gr(s,ke.empty(),t)}function r6(e){return new Gr(e.readTime,e.key,bh)}class Gr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Gr(ze.min(),ke.empty(),bh)}static max(){return new Gr(ze.max(),ke.empty(),bh)}}function a6(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ke.comparator(e.documentKey,t.documentKey),n!==0?n:tt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(e){if(e.code!==de.FAILED_PRECONDITION||e.message!==l6)throw e;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new fe((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):fe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):fe.reject(n)}static resolve(t){return new fe((n,i)=>{n(t)})}static reject(t){return new fe((n,i)=>{i(t)})}static waitFor(t){return new fe((n,i)=>{let s=0,o=0,r=!1;t.forEach(c=>{++s,c.next(()=>{++o,r&&o===s&&n()},u=>i(u))}),r=!0,o===s&&n()})}static or(t){let n=fe.resolve(!1);for(const i of t)n=n.next(s=>s?fe.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(t,n){return new fe((i,s)=>{const o=t.length,r=new Array(o);let c=0;for(let u=0;u<o;u++){const h=u;n(t[h]).next(f=>{r[h]=f,++c,c===o&&i(r)},f=>s(f))}})}static doWhile(t,n){return new fe((i,s)=>{const o=()=>{t()===!0?n().next(()=>{o()},s):i()};o()})}}function u6(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Lm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=-1;function Om(e){return e==null}function Op(e){return e===0&&1/e==-1/0}function d6(e){return typeof e=="number"&&Number.isInteger(e)&&!Op(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="";function h6(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=NA(t)),t=f6(e.get(n),t);return NA(t)}function f6(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const o=e.charAt(s);switch(o){case"\0":n+="";break;case WI:n+="";break;default:n+=o}}return n}function NA(e){return e+WI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,n){this.comparator=t,this.root=n||Hn.EMPTY}insert(t,n){return new $t(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(t){return new $t(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bg(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bg(this.root,t,this.comparator,!0)}}class Bg{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Hn{constructor(t,n,i,s,o){this.key=t,this.value=n,this.color=i??Hn.RED,this.left=s??Hn.EMPTY,this.right=o??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,o){return new Hn(t??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Hn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ne(27949);return t+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(t,n,i,s,o){return this}insert(t,n,i){return new Hn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.comparator=t,this.data=new $t(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new GA(this.data.getIterator())}getIteratorFrom(t){return new GA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof En)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new En(this.comparator);return n.data=t,n}}class GA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.fields=t,t.sort(zn.comparator)}static empty(){return new Fi([])}unionWith(t){let n=new En(zn.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Fi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return tu(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $I("Invalid base64 string: "+o):o}}(t);return new jn(n)}static fromUint8Array(t){const n=function(s){let o="";for(let r=0;r<s.length;++r)o+=String.fromCharCode(s[r]);return o}(t);return new jn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const g6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=g6.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:sn(e.seconds),nanos:sn(e.nanos)}}function sn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function zr(e){return typeof e=="string"?jn.fromBase64String(e):jn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="server_timestamp",KI="__type__",YI="__previous_value__",QI="__local_write_time__";function eR(e){return(e?.mapValue?.fields||{})[KI]?.stringValue===qI}function Vm(e){const t=e.mapValue.fields[YI];return eR(t)?Vm(t):t}function Rh(e){const t=Hr(e.mapValue.fields[QI].timestampValue);return new Vt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(t,n,i,s,o,r,c,u,h,f){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=r,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const Vp="(default)";class Eh{constructor(t,n){this.projectId=t,this.database=n||Vp}static empty(){return new Eh("","")}get isDefaultDatabase(){return this.database===Vp}isEqual(t){return t instanceof Eh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="__type__",m6="__max__",Gg={mapValue:{}},ZI="__vector__",Np="value";function Ur(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?eR(e)?4:v6(e)?9007199254740991:C6(e)?10:11:Ne(28295,{value:e})}function Ys(e,t){if(e===t)return!0;const n=Ur(e);if(n!==Ur(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rh(e).isEqual(Rh(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const r=Hr(s.timestampValue),c=Hr(o.timestampValue);return r.seconds===c.seconds&&r.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,o){return zr(s.bytesValue).isEqual(zr(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,o){return sn(s.geoPointValue.latitude)===sn(o.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(o.geoPointValue.longitude)}(e,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return sn(s.integerValue)===sn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const r=sn(s.doubleValue),c=sn(o.doubleValue);return r===c?Op(r)===Op(c):isNaN(r)&&isNaN(c)}return!1}(e,t);case 9:return tu(e.arrayValue.values||[],t.arrayValue.values||[],Ys);case 10:case 11:return function(s,o){const r=s.mapValue.fields||{},c=o.mapValue.fields||{};if(BA(r)!==BA(c))return!1;for(const u in r)if(r.hasOwnProperty(u)&&(c[u]===void 0||!Ys(r[u],c[u])))return!1;return!0}(e,t);default:return Ne(52216,{left:e})}}function Th(e,t){return(e.values||[]).find(n=>Ys(n,t))!==void 0}function nu(e,t){if(e===t)return 0;const n=Ur(e),i=Ur(t);if(n!==i)return tt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(e.booleanValue,t.booleanValue);case 2:return function(o,r){const c=sn(o.integerValue||o.doubleValue),u=sn(r.integerValue||r.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(e,t);case 3:return HA(e.timestampValue,t.timestampValue);case 4:return HA(Rh(e),Rh(t));case 5:return aS(e.stringValue,t.stringValue);case 6:return function(o,r){const c=zr(o),u=zr(r);return c.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(o,r){const c=o.split("/"),u=r.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=tt(c[h],u[h]);if(f!==0)return f}return tt(c.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,r){const c=tt(sn(o.latitude),sn(r.latitude));return c!==0?c:tt(sn(o.longitude),sn(r.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return zA(e.arrayValue,t.arrayValue);case 10:return function(o,r){const c=o.fields||{},u=r.fields||{},h=c[Np]?.arrayValue,f=u[Np]?.arrayValue,p=tt(h?.values?.length||0,f?.values?.length||0);return p!==0?p:zA(h,f)}(e.mapValue,t.mapValue);case 11:return function(o,r){if(o===Gg.mapValue&&r===Gg.mapValue)return 0;if(o===Gg.mapValue)return 1;if(r===Gg.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),h=r.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=aS(u[p],f[p]);if(m!==0)return m;const w=nu(c[u[p]],h[f[p]]);if(w!==0)return w}return tt(u.length,f.length)}(e.mapValue,t.mapValue);default:throw Ne(23264,{he:n})}}function HA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return tt(e,t);const n=Hr(e),i=Hr(t),s=tt(n.seconds,i.seconds);return s!==0?s:tt(n.nanos,i.nanos)}function zA(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=nu(n[s],i[s]);if(o)return o}return tt(n.length,i.length)}function iu(e){return lS(e)}function lS(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Hr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return zr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ke.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=lS(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const r of i)o?o=!1:s+=",",s+=`${r}:${lS(n.fields[r])}`;return s+"}"}(e.mapValue):Ne(61005,{value:e})}function rp(e){switch(Ur(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Vm(e);return t?16+rp(t):16;case 5:return 2*e.stringValue.length;case 6:return zr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+rp(o),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Xr(i.fields,(o,r)=>{s+=o.length+rp(r)}),s}(e.mapValue);default:throw Ne(13486,{value:e})}}function UA(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function cS(e){return!!e&&"integerValue"in e}function tR(e){return!!e&&"arrayValue"in e}function WA(e){return!!e&&"nullValue"in e}function jA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ap(e){return!!e&&"mapValue"in e}function C6(e){return(e?.mapValue?.fields||{})[XI]?.stringValue===ZI}function th(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Xr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=th(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=th(e.arrayValue.values[n]);return t}return{...e}}function v6(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===m6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t){this.value=t}static empty(){return new vi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!ap(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=th(n)}setAll(t){let n=zn.emptyPath(),i={},s=[];t.forEach((r,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=c.popLast()}r?i[c.lastSegment()]=th(r):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(t){const n=this.field(t.popLast());ap(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ys(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];ap(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Xr(n,(s,o)=>t[s]=o);for(const s of i)delete t[s]}clone(){return new vi(th(this.value))}}function JI(e){const t=[];return Xr(e.fields,(n,i)=>{const s=new zn([n]);if(ap(i)){const o=JI(i.mapValue).fields;if(o.length===0)t.push(s);else for(const r of o)t.push(s.child(r))}else t.push(s)}),new Fi(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,n,i,s,o,r,c){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=r,this.documentState=c}static newInvalidDocument(t){return new Xn(t,0,ze.min(),ze.min(),ze.min(),vi.empty(),0)}static newFoundDocument(t,n,i,s){return new Xn(t,1,n,ze.min(),i,s,0)}static newNoDocument(t,n){return new Xn(t,2,n,ze.min(),ze.min(),vi.empty(),0)}static newUnknownDocument(t,n){return new Xn(t,3,n,ze.min(),ze.min(),vi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t,n){this.position=t,this.inclusive=n}}function $A(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const o=t[s],r=e.position[s];if(o.field.isKeyField()?i=ke.comparator(ke.fromName(r.referenceValue),n.key):i=nu(r,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function qA(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ys(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,n="asc"){this.field=t,this.dir=n}}function y6(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{}class pn extends e_{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new S6(t,n,i):n==="array-contains"?new E6(t,i):n==="in"?new T6(t,i):n==="not-in"?new x6(t,i):n==="array-contains-any"?new D6(t,i):new pn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new b6(t,i):new R6(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(nu(n,this.value)):n!==null&&Ur(this.value)===Ur(n)&&this.matchesComparison(nu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends e_{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new gs(t,n)}matches(t){return t_(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function t_(e){return e.op==="and"}function n_(e){return w6(e)&&t_(e)}function w6(e){for(const t of e.filters)if(t instanceof gs)return!1;return!0}function uS(e){if(e instanceof pn)return e.field.canonicalString()+e.op.toString()+iu(e.value);if(n_(e))return e.filters.map(t=>uS(t)).join(",");{const t=e.filters.map(n=>uS(n)).join(",");return`${e.op}(${t})`}}function i_(e,t){return e instanceof pn?function(i,s){return s instanceof pn&&i.op===s.op&&i.field.isEqual(s.field)&&Ys(i.value,s.value)}(e,t):e instanceof gs?function(i,s){return s instanceof gs&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,r,c)=>o&&i_(r,s.filters[c]),!0):!1}(e,t):void Ne(19439)}function s_(e){return e instanceof pn?function(n){return`${n.field.canonicalString()} ${n.op} ${iu(n.value)}`}(e):e instanceof gs?function(n){return n.op.toString()+" {"+n.getFilters().map(s_).join(" ,")+"}"}(e):"Filter"}class S6 extends pn{constructor(t,n,i){super(t,n,i),this.key=ke.fromName(i.referenceValue)}matches(t){const n=ke.comparator(t.key,this.key);return this.matchesComparison(n)}}class b6 extends pn{constructor(t,n){super(t,"in",n),this.keys=o_("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class R6 extends pn{constructor(t,n){super(t,"not-in",n),this.keys=o_("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function o_(e,t){return(t.arrayValue?.values||[]).map(n=>ke.fromName(n.referenceValue))}class E6 extends pn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return tR(n)&&Th(n.arrayValue,this.value)}}class T6 extends pn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Th(this.value.arrayValue,n)}}class x6 extends pn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Th(this.value.arrayValue,n)}}class D6 extends pn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!tR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Th(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(t,n=null,i=[],s=[],o=null,r=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=r,this.endAt=c,this.Te=null}}function KA(e,t=null,n=[],i=[],s=null,o=null,r=null){return new A6(e,t,n,i,s,o,r)}function nR(e){const t=Ue(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>uS(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Om(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>iu(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>iu(i)).join(",")),t.Te=n}return t.Te}function iR(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!y6(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!i_(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qA(e.startAt,t.startAt)&&qA(e.endAt,t.endAt)}function dS(e){return ke.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,n=null,i=[],s=[],o=null,r="F",c=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=r,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function F6(e,t,n,i,s,o,r,c){return new Xh(e,t,n,i,s,o,r,c)}function sR(e){return new Xh(e)}function YA(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function r_(e){return e.collectionGroup!==null}function nh(e){const t=Ue(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),n.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(r){let c=new En(zn.comparator);return r.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Gp(o,i))}),n.has(zn.keyField().canonicalString())||t.Ie.push(new Gp(zn.keyField(),i))}return t.Ie}function zs(e){const t=Ue(e);return t.Ee||(t.Ee=P6(t,nh(e))),t.Ee}function P6(e,t){if(e.limitType==="F")return KA(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Gp(s.field,o)});const n=e.endAt?new Bp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Bp(e.startAt.position,e.startAt.inclusive):null;return KA(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function hS(e,t){const n=e.filters.concat([t]);return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fS(e,t,n){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nm(e,t){return iR(zs(e),zs(t))&&e.limitType===t.limitType}function a_(e){return`${nR(zs(e))}|lt:${e.limitType}`}function xc(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>s_(s)).join(", ")}]`),Om(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>iu(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>iu(s)).join(",")),`Target(${i})`}(zs(e))}; limitType=${e.limitType})`}function Bm(e,t){return t.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ke.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(e,t)&&function(i,s){for(const o of nh(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(r,c,u){const h=$A(r,c,u);return r.inclusive?h<=0:h<0}(i.startAt,nh(i),s)||i.endAt&&!function(r,c,u){const h=$A(r,c,u);return r.inclusive?h>=0:h>0}(i.endAt,nh(i),s))}(e,t)}function M6(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function l_(e){return(t,n)=>{let i=!1;for(const s of nh(e)){const o=I6(s,t,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function I6(e,t,n){const i=e.field.isKeyField()?ke.comparator(t.key,n.key):function(o,r,c){const u=r.data.field(o),h=c.data.field(o);return u!==null&&h!==null?nu(u,h):Ne(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,(n,i)=>{for(const[s,o]of i)t(s,o)})}isEmpty(){return jI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new $t(ke.comparator);function zo(){return _6}const c_=new $t(ke.comparator);function Ud(...e){let t=c_;for(const n of e)t=t.insert(n.key,n);return t}function u_(e){let t=c_;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function ja(){return ih()}function d_(){return ih()}function ih(){return new vl(e=>e.toString(),(e,t)=>e.isEqual(t))}const k6=new $t(ke.comparator),L6=new En(ke.comparator);function nt(...e){let t=L6;for(const n of e)t=t.add(n);return t}const O6=new En(tt);function V6(){return O6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Op(t)?"-0":t}}function h_(e){return{integerValue:""+e}}function N6(e,t){return d6(t)?h_(t):oR(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this._=void 0}}function B6(e,t,n){return e instanceof Hp?function(s,o){const r={fields:{[KI]:{stringValue:qI},[QI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&eR(o)&&(o=Vm(o)),o&&(r.fields[YI]=o),{mapValue:r}}(n,t):e instanceof xh?g_(e,t):e instanceof Dh?p_(e,t):function(s,o){const r=f_(s,o),c=QA(r)+QA(s.Ae);return cS(r)&&cS(s.Ae)?h_(c):oR(s.serializer,c)}(e,t)}function G6(e,t,n){return e instanceof xh?g_(e,t):e instanceof Dh?p_(e,t):n}function f_(e,t){return e instanceof zp?function(i){return cS(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class Hp extends Gm{}class xh extends Gm{constructor(t){super(),this.elements=t}}function g_(e,t){const n=m_(t);for(const i of e.elements)n.some(s=>Ys(s,i))||n.push(i);return{arrayValue:{values:n}}}class Dh extends Gm{constructor(t){super(),this.elements=t}}function p_(e,t){let n=m_(t);for(const i of e.elements)n=n.filter(s=>!Ys(s,i));return{arrayValue:{values:n}}}class zp extends Gm{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function QA(e){return sn(e.integerValue||e.doubleValue)}function m_(e){return tR(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function H6(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof xh&&s instanceof xh||i instanceof Dh&&s instanceof Dh?tu(i.elements,s.elements,Ys):i instanceof zp&&s instanceof zp?Ys(i.Ae,s.Ae):i instanceof Hp&&s instanceof Hp}(e.transform,t.transform)}class z6{constructor(t,n){this.version=t,this.transformResults=n}}class hs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new hs}static exists(t){return new hs(void 0,t)}static updateTime(t){return new hs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lp(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Hm{}function C_(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new rR(e.key,hs.none()):new Zh(e.key,e.data,hs.none());{const n=e.data,i=vi.empty();let s=new En(zn.comparator);for(let o of t.fields)if(!s.has(o)){let r=n.field(o);r===null&&o.length>1&&(o=o.popLast(),r=n.field(o)),r===null?i.delete(o):i.set(o,r),s=s.add(o)}return new Zr(e.key,i,new Fi(s.toArray()),hs.none())}}function U6(e,t,n){e instanceof Zh?function(s,o,r){const c=s.value.clone(),u=ZA(s.fieldTransforms,o,r.transformResults);c.setAll(u),o.convertToFoundDocument(r.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Zr?function(s,o,r){if(!lp(s.precondition,o))return void o.convertToUnknownDocument(r.version);const c=ZA(s.fieldTransforms,o,r.transformResults),u=o.data;u.setAll(v_(s)),u.setAll(c),o.convertToFoundDocument(r.version,u).setHasCommittedMutations()}(e,t,n):function(s,o,r){o.convertToNoDocument(r.version).setHasCommittedMutations()}(0,t,n)}function sh(e,t,n,i){return e instanceof Zh?function(o,r,c,u){if(!lp(o.precondition,r))return c;const h=o.value.clone(),f=JA(o.fieldTransforms,u,r);return h.setAll(f),r.convertToFoundDocument(r.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Zr?function(o,r,c,u){if(!lp(o.precondition,r))return c;const h=JA(o.fieldTransforms,u,r),f=r.data;return f.setAll(v_(o)),f.setAll(h),r.convertToFoundDocument(r.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(o,r,c){return lp(o.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):c}(e,t,n)}function W6(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),o=f_(i.transform,s||null);o!=null&&(n===null&&(n=vi.empty()),n.set(i.field,o))}return n||null}function XA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&tu(i,s,(o,r)=>H6(o,r))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zh extends Hm{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zr extends Hm{constructor(t,n,i,s,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function v_(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function ZA(e,t,n){const i=new Map;yt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const o=e[s],r=o.transform,c=t.data.field(o.field);i.set(o.field,G6(r,c,n[s]))}return i}function JA(e,t,n){const i=new Map;for(const s of e){const o=s.transform,r=n.data.field(s.field);i.set(s.field,B6(o,r,t))}return i}class rR extends Hm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j6 extends Hm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&U6(o,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=sh(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=sh(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=d_();return this.mutations.forEach(s=>{const o=t.get(s.key),r=o.overlayedDocument;let c=this.applyToLocalView(r,o.mutatedFields);c=n.has(s.key)?null:c;const u=C_(r,c);u!==null&&i.set(s.key,u),r.isValidDocument()||r.convertToNoDocument(ze.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&tu(this.mutations,t.mutations,(n,i)=>XA(n,i))&&tu(this.baseMutations,t.baseMutations,(n,i)=>XA(n,i))}}class aR{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){yt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return k6}();const o=t.mutations;for(let r=0;r<o.length;r++)s=s.insert(o[r].key,i[r].version);return new aR(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,lt;function Y6(e){switch(e){case de.OK:return Ne(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ne(15467,{code:e})}}function y_(e){if(e===void 0)return Ho("GRPC error has no .code"),de.UNKNOWN;switch(e){case hn.OK:return de.OK;case hn.CANCELLED:return de.CANCELLED;case hn.UNKNOWN:return de.UNKNOWN;case hn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case hn.INTERNAL:return de.INTERNAL;case hn.UNAVAILABLE:return de.UNAVAILABLE;case hn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case hn.NOT_FOUND:return de.NOT_FOUND;case hn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case hn.ABORTED:return de.ABORTED;case hn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case hn.DATA_LOSS:return de.DATA_LOSS;default:return Ne(39323,{code:e})}}(lt=hn||(hn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=new kr([4294967295,4294967295],0);function eF(e){const t=Q6().encode(e),n=new kI;return n.update(t),new Uint8Array(n.digest())}function tF(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new kr([n,i],0),new kr([s,o],0)]}class lR{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wd(`Invalid padding: ${n}`);if(i<0)throw new Wd(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Wd(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Wd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=kr.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(kr.fromNumber(i)));return s.compare(X6)===1&&(s=new kr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=eF(t),[i,s]=tF(n);for(let o=0;o<this.hashCount;o++){const r=this.ye(i,s,o);if(!this.we(r))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),r=new lR(o,s,n);return i.forEach(c=>r.insert(c)),r}insert(t){if(this.ge===0)return;const n=eF(t),[i,s]=tF(n);for(let o=0;o<this.hashCount;o++){const r=this.ye(i,s,o);this.Se(r)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Wd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n,i,s,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Jh.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new zm(ze.min(),s,new $t(tt),zo(),nt())}}class Jh{constructor(t,n,i,s,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Jh(i,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class w_{constructor(t,n){this.targetId=t,this.Ce=n}}class S_{constructor(t,n,i=jn.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class nF{constructor(){this.ve=0,this.Fe=iF(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=nt(),n=nt(),i=nt();return this.Fe.forEach((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ne(38017,{changeType:o})}}),new Jh(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=iF()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z6{constructor(t){this.Ge=t,this.ze=new Map,this.je=zo(),this.Je=Hg(),this.He=Hg(),this.Ye=new $t(tt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Ne(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const o=s.target;if(dS(o))if(i===0){const r=new ke(o.path);this.et(n,r,Xn.newNoDocument(r,ze.min()))}else yt(i===1,20013,{expectedCount:i});else{const r=this._t(n);if(r!==i){const c=this.ut(t),u=c?this.ct(c,t,r):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let r,c;try{r=zr(i).toUint8Array()}catch(u){if(u instanceof $I)return eu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new lR(r,s,o)}catch(u){return eu(u instanceof Wd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const r=this.Ge.ht(),c=`projects/${r.projectId}/databases/${r.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.et(n,o,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((o,r)=>{const c=this.ot(r);if(c){if(o.current&&dS(c.target)){const u=new ke(c.target.path);this.It(u).has(r)||this.Et(r,u)||this.et(r,u,Xn.newNoDocument(u,t))}o.Be&&(n.set(r,o.ke()),o.qe())}});let i=nt();this.He.forEach((o,r)=>{let c=!0;r.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.je.forEach((o,r)=>r.setReadTime(t));const s=new zm(t,n,this.Ye,this.je,i);return this.je=zo(),this.Je=Hg(),this.He=Hg(),this.Ye=new $t(tt),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new nF,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new En(tt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new En(tt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new nF),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Hg(){return new $t(ke.comparator)}function iF(){return new $t(ke.comparator)}const J6={asc:"ASCENDING",desc:"DESCENDING"},eW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tW={and:"AND",or:"OR"};class nW{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gS(e,t){return e.useProto3Json||Om(t)?t:{value:t}}function Up(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function b_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function iW(e,t){return Up(e,t.toTimestamp())}function Us(e){return yt(!!e,49232),ze.fromTimestamp(function(n){const i=Hr(n);return new Vt(i.seconds,i.nanos)}(e))}function cR(e,t){return pS(e,t).canonicalString()}function pS(e,t){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function R_(e){const t=_t.fromString(e);return yt(A_(t),10190,{key:t.toString()}),t}function mS(e,t){return cR(e.databaseId,t.path)}function Hy(e,t){const n=R_(t);if(n.get(1)!==e.databaseId.projectId)throw new Re(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Re(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ke(T_(n))}function E_(e,t){return cR(e.databaseId,t)}function sW(e){const t=R_(e);return t.length===4?_t.emptyPath():T_(t)}function CS(e){return new _t(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function T_(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function sF(e,t,n){return{name:mS(e,t),fields:n.value.mapValue.fields}}function oW(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(yt(f===void 0||typeof f=="string",58123),jn.fromBase64String(f||"")):(yt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),jn.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),r=t.targetChange.cause,c=r&&function(h){const f=h.code===void 0?de.UNKNOWN:y_(h.code);return new Re(f,h.message||"")}(r);n=new S_(i,s,o,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Hy(e,i.document.name),o=Us(i.document.updateTime),r=i.document.createTime?Us(i.document.createTime):ze.min(),c=new vi({mapValue:{fields:i.document.fields}}),u=Xn.newFoundDocument(s,o,r,c),h=i.targetIds||[],f=i.removedTargetIds||[];n=new cp(h,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Hy(e,i.document),o=i.readTime?Us(i.readTime):ze.min(),r=Xn.newNoDocument(s,o),c=i.removedTargetIds||[];n=new cp([],c,r.key,r)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Hy(e,i.document),o=i.removedTargetIds||[];n=new cp([],o,s,null)}else{if(!("filter"in t))return Ne(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,r=new K6(s,o),c=i.targetId;n=new w_(c,r)}}return n}function rW(e,t){let n;if(t instanceof Zh)n={update:sF(e,t.key,t.value)};else if(t instanceof rR)n={delete:mS(e,t.key)};else if(t instanceof Zr)n={update:sF(e,t.key,t.data),updateMask:pW(t.fieldMask)};else{if(!(t instanceof j6))return Ne(16599,{Vt:t.type});n={verify:mS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(o,r){const c=r.transform;if(c instanceof Hp)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xh)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dh)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zp)return{fieldPath:r.field.canonicalString(),increment:c.Ae};throw Ne(20930,{transform:r.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:iW(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne(27497)}(e,t.precondition)),n}function aW(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map(n=>function(s,o){let r=s.updateTime?Us(s.updateTime):Us(o);return r.isEqual(ze.min())&&(r=Us(o)),new z6(r,s.transformResults||[])}(n,t))):[]}function lW(e,t){return{documents:[E_(e,t.path)]}}function cW(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=E_(e,s);const o=function(h){if(h.length!==0)return D_(gs.create(h,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const r=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:Dc(m.field),direction:hW(m.dir)}}(f))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const c=gS(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function uW(e){let t=sW(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){yt(i===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let o=[];n.where&&(o=function(p){const m=x_(p);return m instanceof gs&&n_(m)?m.getFilters():[m]}(n.where));let r=[];n.orderBy&&(r=function(p){return p.map(m=>function(S){return new Gp(Ac(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Om(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,w=p.values||[];return new Bp(w,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,w=p.values||[];return new Bp(w,m)}(n.endAt)),F6(t,s,r,o,c,"F",u,h)}function dW(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function x_(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ac(n.unaryFilter.field);return pn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ac(n.unaryFilter.field);return pn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ac(n.unaryFilter.field);return pn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ac(n.unaryFilter.field);return pn.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}}(e):e.fieldFilter!==void 0?function(n){return pn.create(Ac(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gs.create(n.compositeFilter.filters.map(i=>x_(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}}(n.compositeFilter.op))}(e):Ne(30097,{filter:e})}function hW(e){return J6[e]}function fW(e){return eW[e]}function gW(e){return tW[e]}function Dc(e){return{fieldPath:e.canonicalString()}}function Ac(e){return zn.fromServerFormat(e.fieldPath)}function D_(e){return e instanceof pn?function(n){if(n.op==="=="){if(jA(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NAN"}};if(WA(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jA(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NOT_NAN"}};if(WA(n.value))return{unaryFilter:{field:Dc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(n.field),op:fW(n.op),value:n.value}}}(e):e instanceof gs?function(n){const i=n.getFilters().map(s=>D_(s));return i.length===1?i[0]:{compositeFilter:{op:gW(n.op),filters:i}}}(e):Ne(54877,{filter:e})}function pW(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function A_(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,n,i,s,o=ze.min(),r=ze.min(),c=jn.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new Mr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(t){this.yt=t}}function CW(e){const t=uW({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?fS(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(){this.Cn=new yW}addToCollectionParentIndex(t,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(t,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return fe.resolve()}deleteFieldIndex(t,n){return fe.resolve()}deleteAllFieldIndexes(t){return fe.resolve()}createTargetIndexes(t,n){return fe.resolve()}getDocumentsMatchingTarget(t,n){return fe.resolve(null)}getIndexType(t,n){return fe.resolve(0)}getFieldIndexes(t,n){return fe.resolve([])}getNextCollectionGroupToUpdate(t){return fe.resolve(null)}getMinOffset(t,n){return fe.resolve(Gr.min())}getMinOffsetFromCollectionGroup(t,n){return fe.resolve(Gr.min())}updateCollectionGroup(t,n,i){return fe.resolve()}updateIndexEntries(t,n){return fe.resolve()}}class yW{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new En(_t.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new En(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F_=41943040;class gi{static withCacheSize(t){return new gi(t,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi.DEFAULT_COLLECTION_PERCENTILE=10,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gi.DEFAULT=new gi(F_,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gi.DISABLED=new gi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new su(0)}static cr(){return new su(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="LruGarbageCollector",wW=1048576;function aF([e,t],[n,i]){const s=tt(e,n);return s===0?tt(t,i):s}class SW{constructor(t){this.Ir=t,this.buffer=new En(aF),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();aF(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bW{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Ee(rF,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yu(n)?Ee(rF,"Ignoring IndexedDB error during garbage collection: ",n):await vu(n)}await this.Vr(3e5)})}}class RW{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return fe.resolve(Lm.ce);const i=new SW(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(oF)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oF):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,o,r,c,u,h;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,r=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(i=p,c=Date.now(),this.removeTargets(t,i,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),Tc()<=ct.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${r-f}ms
	Determined least recently used ${s} in `+(c-r)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:p})))}}function EW(e,t){return new RW(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(){this.changes=new vl(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Xn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&sh(i.mutation,s,Fi.empty(),Vt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,nt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=nt()){const s=ja();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(o=>{let r=Ud();return o.forEach((c,u)=>{r=r.insert(c,u.overlayedDocument)}),r}))}getOverlayedDocuments(t,n){const i=ja();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,nt()))}populateOverlays(t,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(t,s).next(o=>{o.forEach((r,c)=>{n.set(r,c)})})}computeViews(t,n,i,s){let o=zo();const r=ih(),c=function(){return ih()}();return n.forEach((u,h)=>{const f=i.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Zr)?o=o.insert(h.key,h):f!==void 0?(r.set(h.key,f.mutation.getFieldMask()),sh(f.mutation,h,f.mutation.getFieldMask(),Vt.now())):r.set(h.key,Fi.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((h,f)=>r.set(h,f)),n.forEach((h,f)=>c.set(h,new xW(f,r.get(h)??null))),c))}recalculateAndSaveOverlays(t,n){const i=ih();let s=new $t((r,c)=>r-c),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(r=>{for(const c of r)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=i.get(u)||Fi.empty();f=c.applyToLocalView(h,f),i.set(u,f);const p=(s.get(c.batchId)||nt()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const r=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,p=d_();f.forEach(m=>{if(!o.has(m)){const w=C_(n.get(m),i.get(m));w!==null&&p.set(m,w),o=o.add(m)}}),r.push(this.documentOverlayCache.saveOverlays(t,h,p))}return fe.waitFor(r)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(r){return ke.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):r_(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(o=>{const r=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-o.size):fe.resolve(ja());let c=bh,u=o;return r.next(h=>fe.forEach(h,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(t,h,o)).next(()=>this.computeViews(t,u,h,nt())).next(f=>({batchId:c,changes:u_(f)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ke(n)).next(i=>{let s=Ud();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const o=n.collectionGroup;let r=Ud();return this.indexManager.getCollectionParents(t,o).next(c=>fe.forEach(c,u=>{const h=function(p,m){return new Xh(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(f=>{f.forEach((p,m)=>{r=r.insert(p,m)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(t,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(r=>(o=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,o,s))).next(r=>{o.forEach((u,h)=>{const f=h.getKey();r.get(f)===null&&(r=r.insert(f,Xn.newInvalidDocument(f)))});let c=Ud();return r.forEach((u,h)=>{const f=o.get(u);f!==void 0&&sh(f.mutation,h,Fi.empty(),Vt.now()),Bm(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Us(s.createTime)}}(n)),fe.resolve()}getNamedQuery(t,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:CW(s.bundledQuery),readTime:Us(s.readTime)}}(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(){this.overlays=new $t(ke.comparator),this.qr=new Map}getOverlay(t,n){return fe.resolve(this.overlays.get(n))}getOverlays(t,n){const i=ja();return fe.forEach(n,s=>this.getOverlay(t,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,o)=>{this.St(t,n,o)}),fe.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),fe.resolve()}getOverlaysForCollection(t,n,i){const s=ja(),o=n.length+1,r=new ke(n.child("")),c=this.overlays.getIteratorFrom(r);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return fe.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let o=new $t((h,f)=>h-f);const r=this.overlays.getIterator();for(;r.hasNext();){const h=r.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let f=o.get(h.largestBatchId);f===null&&(f=ja(),o=o.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=ja(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=s)););return fe.resolve(c)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const r=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,r)}this.overlays=this.overlays.insert(i.key,new q6(n,i));let o=this.qr.get(n);o===void 0&&(o=nt(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(t){return fe.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.Qr=new En(In.$r),this.Ur=new En(In.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new In(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new In(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new ke(new _t([])),i=new In(n,t),s=new In(n,t+1),o=[];return this.Ur.forEachInRange([i,s],r=>{this.Gr(r),o.push(r.key)}),o}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ke(new _t([])),i=new In(n,t),s=new In(n,t+1);let o=nt();return this.Ur.forEachInRange([i,s],r=>{o=o.add(r.key)}),o}containsKey(t){const n=new In(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class In{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ke.comparator(t.key,n.key)||tt(t.Yr,n.Yr)}static Kr(t,n){return tt(t.Yr,n.Yr)||ke.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new En(In.$r)}checkEmpty(t){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new $6(o,n,i,s);this.mutationQueue.push(r);for(const c of s)this.Zr=this.Zr.add(new In(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return fe.resolve(r)}lookupMutationBatch(t,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Jb:this.tr-1)}getAllMutationBatches(t){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new In(n,0),s=new In(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],r=>{const c=this.Xr(r.Yr);o.push(c)}),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new En(tt);return n.forEach(s=>{const o=new In(s,0),r=new In(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,r],c=>{i=i.add(c.Yr)})}),fe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let o=i;ke.isDocumentKey(o)||(o=o.child(""));const r=new In(new ke(o),0);let c=new En(tt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Yr)),!0)},r),fe.resolve(this.ti(c))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return fe.forEach(n.mutations,s=>{const o=new In(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new In(n,0),s=this.Zr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,fe.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(t){this.ri=t,this.docs=function(){return new $t(ke.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,r=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:r}),this.size+=r-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(t,n){let i=zo();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Xn.newInvalidDocument(s))}),fe.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let o=zo();const r=n.path,c=new ke(r.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!r.isPrefixOf(h.path))break;h.path.length>r.length+1||a6(r6(f),i)<=0||(s.has(f.key)||Bm(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(t,n,i,s){Ne(9500)}ii(t,n){return fe.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new _W(this)}getSize(t){return fe.resolve(this.size)}}class _W extends TW{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),fe.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(t){this.persistence=t,this.si=new vl(n=>nR(n),iR),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new uR,this.targetCount=0,this.ai=su.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),fe.resolve()}getLastRemoteSnapshotVersion(t){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return fe.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),fe.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new su(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(t,n){return this.Pr(n),fe.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(t,n,i){let s=0;const o=[];return this.si.forEach((r,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(r),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),fe.waitFor(o).next(()=>s)}getTargetCount(t){return fe.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return fe.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),fe.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(r=>{o.push(s.markPotentiallyOrphaned(t,r))}),fe.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return fe.resolve(i)}containsKey(t,n){return fe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(t,n){this.ui={},this.overlays={},this.ci=new Lm(0),this.li=!1,this.li=!0,this.hi=new PW,this.referenceDelegate=t(this),this.Pi=new kW(this),this.indexManager=new vW,this.remoteDocumentCache=function(s){return new IW(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new mW(n),this.Ii=new AW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new FW,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new MW(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){Ee("MemoryPersistence","Starting transaction:",t);const s=new LW(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(t,n){return fe.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class LW extends c6{constructor(t){super(),this.currentSequenceNumber=t}}class dR{constructor(t){this.persistence=t,this.Ri=new uR,this.Vi=null}static mi(t){return new dR(t)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),fe.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,i=>{const s=ke.fromPath(i);return this.gi(t,s).next(o=>{o||n.removeEntry(s,ze.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Wp{constructor(t,n){this.persistence=t,this.pi=new vl(i=>h6(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=EW(this,n)}static mi(t,n){return new Wp(t,n)}Ei(){}di(t){return fe.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return fe.forEach(this.pi,(i,s)=>this.br(t,i,s).next(o=>o?fe.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(t,r=>this.br(t,r,n).next(c=>{c||(i++,o.removeEntry(r,ze.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),fe.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),fe.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),fe.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),fe.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=rp(t.data.value)),n}br(t,n,i){return fe.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return fe.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=nt(),s=nt();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new hR(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return AU()?8:u6(xU())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const o={result:null};return this.ys(t,n).next(r=>{o.result=r}).next(()=>{if(!o.result)return this.ws(t,n,s,i).next(r=>{o.result=r})}).next(()=>{if(o.result)return;const r=new OW;return this.Ss(t,n,r).next(c=>{if(o.result=c,this.Vs)return this.bs(t,n,r,c.size)})}).next(()=>o.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(Tc()<=ct.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",xc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(Tc()<=ct.DEBUG&&Ee("QueryEngine","Query:",xc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Tc()<=ct.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",xc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zs(n))):fe.resolve())}ys(t,n){if(YA(n))return fe.resolve(null);let i=zs(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fS(n,null,"F"),i=zs(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const r=nt(...o);return this.ps.getDocuments(t,r).next(c=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,c);return this.Cs(n,h,r,u.readTime)?this.ys(t,fS(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return YA(n)||s.isEqual(ze.min())?fe.resolve(null):this.ps.getDocuments(t,i).next(o=>{const r=this.Ds(n,o);return this.Cs(n,r,i,s)?fe.resolve(null):(Tc()<=ct.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xc(n)),this.vs(t,r,n,o6(s,bh)).next(c=>c))})}Ds(t,n){let i=new En(l_(t));return n.forEach((s,o)=>{Bm(t,o)&&(i=i.add(o))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(t,n,i){return Tc()<=ct.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",xc(n)),this.ps.getDocumentsMatchingQuery(t,n,Gr.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(o=>(n.forEach(r=>{o=o.insert(r.key,r)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="LocalStore",NW=3e8;class BW{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new $t(tt),this.xs=new vl(o=>nR(o),iR),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new DW(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function GW(e,t,n,i){return new BW(e,t,n,i)}async function M_(e,t){const n=Ue(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const r=[],c=[];let u=nt();for(const h of s){r.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of o){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:r,addedBatchIds:c}))})})}function HW(e,t){const n=Ue(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){const p=h.batch,m=p.keys();let w=fe.resolve();return m.forEach(S=>{w=w.next(()=>f.getEntry(u,S)).next(E=>{const x=h.docVersions.get(S);yt(x!==null,48541),E.version.compareTo(x)<0&&(p.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),f.addEntry(E)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,i,t,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=nt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function I_(e){const t=Ue(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function zW(e,t){const n=Ue(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const r=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];t.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let w=m.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(p)!==null?w=w.withResumeToken(jn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,i)),s=s.insert(p,w),function(E,x,P){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=NW?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(m,w,f)&&c.push(n.Pi.updateTargetData(o,w))});let u=zo(),h=nt();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(UW(o,r,t.documentUpdates).next(f=>{u=f.ks,h=f.qs})),!i.isEqual(ze.min())){const f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(f)}return fe.waitFor(c).next(()=>r.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(n.Ms=s,o))}function UW(e,t,n){let i=nt(),s=nt();return n.forEach(o=>i=i.add(o)),t.getEntries(e,i).next(o=>{let r=zo();return n.forEach((c,u)=>{const h=o.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ze.min())?(t.removeEntry(c,u.readTime),r=r.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),r=r.insert(c,u)):Ee(fR,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ks:r,qs:s}})}function WW(e,t){const n=Ue(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Jb),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function jW(e,t){const n=Ue(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(o=>o?(s=o,fe.resolve(s)):n.Pi.allocateTargetId(i).next(r=>(s=new Mr(t,r,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function vS(e,t,n){const i=Ue(e),s=i.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,r=>i.persistence.referenceDelegate.removeTarget(r,s))}catch(r){if(!yu(r))throw r;Ee(fR,`Failed to update sequence numbers for target ${t}: ${r}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function lF(e,t,n){const i=Ue(e);let s=ze.min(),o=nt();return i.persistence.runTransaction("Execute query","readwrite",r=>function(u,h,f){const p=Ue(u),m=p.xs.get(f);return m!==void 0?fe.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)}(i,r,zs(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(r,c.targetId).next(u=>{o=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(r,t,n?s:ze.min(),n?o:nt())).next(c=>($W(i,M6(t),c),{documents:c,Qs:o})))}function $W(e,t,n){let i=e.Os.get(t)||ze.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),e.Os.set(t,i)}class cF{constructor(){this.activeTargetIds=V6()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qW{constructor(){this.Mo=new cF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new cF,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF="ConnectivityMonitor";class dF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(uF,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Ee(uF,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg=null;function yS(){return zg===null?zg=function(){return 268435456+Math.round(2147483648*Math.random())}():zg++,"0x"+zg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="RestConnection",YW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QW{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Vp?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,o){const r=yS(),c=this.zo(t,n.toUriEncodedString());Ee(zy,`Sending RPC '${t}' ${r}:`,c,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,o);const{host:h}=new URL(c),f=Yb(h);return this.Jo(t,c,u,i,f).then(p=>(Ee(zy,`Received RPC '${t}' ${r}: `,p),p),p=>{throw eu(zy,`RPC '${t}' ${r} failed with error: `,p,"url: ",c,"request:",i),p})}Ho(t,n,i,s,o,r){return this.Go(t,n,i,s,o)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}zo(t,n){const i=YW[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class ZW extends QW{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,o){const r=yS();return new Promise((c,u)=>{const h=new LI;h.setWithCredentials(!0),h.listenOnce(OI.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case op.NO_ERROR:const p=h.getResponseJson();Ee(Kn,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(p)),c(p);break;case op.TIMEOUT:Ee(Kn,`RPC '${t}' ${r} timed out`),u(new Re(de.DEADLINE_EXCEEDED,"Request time out"));break;case op.HTTP_ERROR:const m=h.getStatus();if(Ee(Kn,`RPC '${t}' ${r} failed with status:`,m,"response text:",h.getResponseText()),m>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const E=function(P){const M=P.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(M)>=0?M:de.UNKNOWN}(S.status);u(new Re(E,S.message))}else u(new Re(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Re(de.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:t,streamId:r,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ee(Kn,`RPC '${t}' ${r} completed.`)}});const f=JSON.stringify(s);Ee(Kn,`RPC '${t}' ${r} sending request:`,s),h.send(n,"POST",f,i,15)})}T_(t,n,i){const s=yS(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=BI(),c=NI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=o.join("");Ee(Kn,`Creating RPC '${t}' stream ${s}: ${f}`,u);const p=r.createWebChannel(f,u);this.I_(p);let m=!1,w=!1;const S=new XW({Yo:x=>{w?Ee(Kn,`Not sending because RPC '${t}' stream ${s} is closed:`,x):(m||(Ee(Kn,`Opening RPC '${t}' stream ${s} transport.`),p.open(),m=!0),Ee(Kn,`RPC '${t}' stream ${s} sending:`,x),p.send(x))},Zo:()=>p.close()}),E=(x,P,M)=>{x.listen(P,I=>{try{M(I)}catch(U){setTimeout(()=>{throw U},0)}})};return E(p,zd.EventType.OPEN,()=>{w||(Ee(Kn,`RPC '${t}' stream ${s} transport opened.`),S.o_())}),E(p,zd.EventType.CLOSE,()=>{w||(w=!0,Ee(Kn,`RPC '${t}' stream ${s} transport closed`),S.a_(),this.E_(p))}),E(p,zd.EventType.ERROR,x=>{w||(w=!0,eu(Kn,`RPC '${t}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.a_(new Re(de.UNAVAILABLE,"The operation could not be completed")))}),E(p,zd.EventType.MESSAGE,x=>{if(!w){const P=x.data[0];yt(!!P,16349);const M=P,I=M?.error||M[0]?.error;if(I){Ee(Kn,`RPC '${t}' stream ${s} received error:`,I);const U=I.status;let z=function(F){const k=hn[F];if(k!==void 0)return y_(k)}(U),W=I.message;z===void 0&&(z=de.INTERNAL,W="Unknown error status: "+U+" with message "+I.message),w=!0,S.a_(new Re(z,W)),p.close()}else Ee(Kn,`RPC '${t}' stream ${s} received:`,P),S.u_(P)}}),E(c,VI.STAT_EVENT,x=>{x.stat===rS.PROXY?Ee(Kn,`RPC '${t}' stream ${s} detected buffering proxy`):x.stat===rS.NOPROXY&&Ee(Kn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Uy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(e){return new nW(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t,n,i=1e3,s=1.5,o=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="PersistentStream";class k_{constructor(t,n,i,s,o,r,c,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(Ho(n.toString()),Ho("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new Re(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return Ee(hF,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(Ee(hF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JW extends k_{constructor(t,n,i,s,o,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,r),this.serializer=o}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=oW(this.serializer,t),i=function(o){if(!("targetChange"in o))return ze.min();const r=o.targetChange;return r.targetIds&&r.targetIds.length?ze.min():r.readTime?Us(r.readTime):ze.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=CS(this.serializer),n.addTarget=function(o,r){let c;const u=r.target;if(c=dS(u)?{documents:lW(o,u)}:{query:cW(o,u).ft},c.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){c.resumeToken=b_(o,r.resumeToken);const h=gS(o,r.expectedCount);h!==null&&(c.expectedCount=h)}else if(r.snapshotVersion.compareTo(ze.min())>0){c.readTime=Up(o,r.snapshotVersion.toTimestamp());const h=gS(o,r.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,t);const i=dW(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=CS(this.serializer),n.removeTarget=t,this.q_(n)}}class ej extends k_{constructor(t,n,i,s,o,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,r),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=aW(t.writeResults,t.commitTime),i=Us(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=CS(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>rW(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{}class nj extends tj{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Re(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,r])=>this.connection.Go(t,pS(n,i),s,o,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(de.UNKNOWN,o.toString())})}Ho(t,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,c])=>this.connection.Ho(t,pS(n,i),s,r,c,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Re(de.UNKNOWN,r.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ij{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ho(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="RemoteStore";class sj{constructor(t,n,i,s,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(r=>{i.enqueueAndForget(async()=>{yl(this)&&(Ee(cl,"Restarting streams for network reachability change."),await async function(u){const h=Ue(u);h.Ea.add(4),await ef(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wm(h)}(this))})}),this.Ra=new ij(i,s)}}async function Wm(e){if(yl(e))for(const t of e.da)await t(!0)}async function ef(e){for(const t of e.da)await t(!1)}function L_(e,t){const n=Ue(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),CR(n)?mR(n):wu(n).O_()&&pR(n,t))}function gR(e,t){const n=Ue(e),i=wu(n);n.Ia.delete(t),i.O_()&&O_(n,t),n.Ia.size===0&&(i.O_()?i.L_():yl(n)&&n.Ra.set("Unknown"))}function pR(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ze.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wu(e).Y_(t)}function O_(e,t){e.Va.Ue(t),wu(e).Z_(t)}function mR(e){e.Va=new Z6({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),wu(e).start(),e.Ra.ua()}function CR(e){return yl(e)&&!wu(e).x_()&&e.Ia.size>0}function yl(e){return Ue(e).Ea.size===0}function V_(e){e.Va=void 0}async function oj(e){e.Ra.set("Online")}async function rj(e){e.Ia.forEach((t,n)=>{pR(e,t)})}async function aj(e,t){V_(e),CR(e)?(e.Ra.ha(t),mR(e)):e.Ra.set("Unknown")}async function lj(e,t,n){if(e.Ra.set("Online"),t instanceof S_&&t.state===2&&t.cause)try{await async function(s,o){const r=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,r),s.Ia.delete(c),s.Va.removeTarget(c))}(e,t)}catch(i){Ee(cl,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await jp(e,i)}else if(t instanceof cp?e.Va.Ze(t):t instanceof w_?e.Va.st(t):e.Va.tt(t),!n.isEqual(ze.min()))try{const i=await I_(e.localStore);n.compareTo(i)>=0&&await function(o,r){const c=o.Va.Tt(r);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.Ia.get(h);f&&o.Ia.set(h,f.withResumeToken(u.resumeToken,r))}}),c.targetMismatches.forEach((u,h)=>{const f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(jn.EMPTY_BYTE_STRING,f.snapshotVersion)),O_(o,u);const p=new Mr(f.target,u,h,f.sequenceNumber);pR(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(e,n)}catch(i){Ee(cl,"Failed to raise snapshot:",i),await jp(e,i)}}async function jp(e,t,n){if(!yu(t))throw t;e.Ea.add(1),await ef(e),e.Ra.set("Offline"),n||(n=()=>I_(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ee(cl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Wm(e)})}function N_(e,t){return t().catch(n=>jp(e,n,t))}async function jm(e){const t=Ue(e),n=Wr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Jb;for(;cj(t);)try{const s=await WW(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,uj(t,s)}catch(s){await jp(t,s)}B_(t)&&G_(t)}function cj(e){return yl(e)&&e.Ta.length<10}function uj(e,t){e.Ta.push(t);const n=Wr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function B_(e){return yl(e)&&!Wr(e).x_()&&e.Ta.length>0}function G_(e){Wr(e).start()}async function dj(e){Wr(e).ra()}async function hj(e){const t=Wr(e);for(const n of e.Ta)t.ea(n.mutations)}async function fj(e,t,n){const i=e.Ta.shift(),s=aR.from(i,t,n);await N_(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await jm(e)}async function gj(e,t){t&&Wr(e).X_&&await async function(i,s){if(function(r){return Y6(r)&&r!==de.ABORTED}(s.code)){const o=i.Ta.shift();Wr(i).B_(),await N_(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await jm(i)}}(e,t),B_(e)&&G_(e)}async function fF(e,t){const n=Ue(e);n.asyncQueue.verifyOperationInProgress(),Ee(cl,"RemoteStore received new credentials");const i=yl(n);n.Ea.add(3),await ef(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Wm(n)}async function pj(e,t){const n=Ue(e);t?(n.Ea.delete(2),await Wm(n)):t||(n.Ea.add(2),await ef(n),n.Ra.set("Unknown"))}function wu(e){return e.ma||(e.ma=function(n,i,s){const o=Ue(n);return o.sa(),new JW(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(e.datastore,e.asyncQueue,{Xo:oj.bind(null,e),t_:rj.bind(null,e),r_:aj.bind(null,e),H_:lj.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),CR(e)?mR(e):e.Ra.set("Unknown")):(await e.ma.stop(),V_(e))})),e.ma}function Wr(e){return e.fa||(e.fa=function(n,i,s){const o=Ue(n);return o.sa(),new ej(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:dj.bind(null,e),r_:gj.bind(null,e),ta:hj.bind(null,e),na:fj.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await jm(e)):(await e.fa.stop(),e.Ta.length>0&&(Ee(cl,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,n,i,s,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,o){const r=Date.now()+i,c=new vR(t,n,r,s,o);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(de.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yR(e,t){if(Ho("AsyncQueue",`${t}: ${e}`),yu(e))return new Re(de.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{static emptySet(t){return new Bc(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||ke.comparator(n.key,i.key):(n,i)=>ke.comparator(n.key,i.key),this.keyedMap=Ud(),this.sortedSet=new $t(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bc)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Bc;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.ga=new $t(ke.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Ne(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ou{constructor(t,n,i,s,o,r,c,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=r,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,o){const r=[];return n.forEach(c=>{r.push({type:0,doc:c})}),new ou(t,n,Bc.emptySet(n),r,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Nm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Cj{constructor(){this.queries=pF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Ue(n),o=s.queries;s.queries=pF(),o.forEach((r,c)=>{for(const u of c.Sa)u.onError(i)})})(this,new Re(de.ABORTED,"Firestore shutting down"))}}function pF(){return new vl(e=>a_(e),Nm)}async function H_(e,t){const n=Ue(e);let i=3;const s=t.query;let o=n.queries.get(s);o?!o.ba()&&t.Da()&&(i=2):(o=new mj,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(r){const c=yR(r,`Initialization of query '${xc(t.query)}' failed`);return void t.onError(c)}n.queries.set(s,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&wR(n)}async function z_(e,t){const n=Ue(e),i=t.query;let s=3;const o=n.queries.get(i);if(o){const r=o.Sa.indexOf(t);r>=0&&(o.Sa.splice(r,1),o.Sa.length===0?s=t.Da()?0:1:!o.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function vj(e,t){const n=Ue(e);let i=!1;for(const s of t){const o=s.query,r=n.queries.get(o);if(r){for(const c of r.Sa)c.Fa(s)&&(i=!0);r.wa=s}}i&&wR(n)}function yj(e,t,n){const i=Ue(e),s=i.queries.get(t);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(t)}function wR(e){e.Ca.forEach(t=>{t.next()})}var wS,mF;(mF=wS||(wS={})).Ma="default",mF.Cache="cache";class U_{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new ou(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ou.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==wS.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t){this.key=t}}class j_{constructor(t){this.key=t}}class wj{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=l_(t),this.tu=new Bc(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new gF,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,r=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,p)=>{const m=s.get(f),w=Bm(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),E=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let x=!1;m&&w?m.data.isEqual(w.data)?S!==E&&(i.track({type:3,doc:w}),x=!0):this.su(m,w)||(i.track({type:2,doc:w}),x=!0,(u&&this.eu(w,u)>0||h&&this.eu(w,h)<0)&&(c=!0)):!m&&w?(i.track({type:0,doc:w}),x=!0):m&&!w&&(i.track({type:1,doc:m}),x=!0,(u||h)&&(c=!0)),x&&(w?(r=r.add(w),o=E?o.add(f):o.delete(f)):(r=r.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const f=this.query.limitType==="F"?r.last():r.first();r=r.delete(f.key),o=o.delete(f.key),i.track({type:1,doc:f})}return{tu:r,iu:i,Cs:c,mutatedKeys:o}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const r=t.iu.ya();r.sort((f,p)=>function(w,S){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:x})}};return E(w)-E(S)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(i),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,r.length!==0||h?{snapshot:new ou(this.query,t.tu,o,r,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=nt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new j_(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new W_(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=nt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ou.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const SR="SyncEngine";class Sj{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class bj{constructor(t){this.key=t,this.hu=!1}}class Rj{constructor(t,n,i,s,o,r){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=r,this.Pu={},this.Tu=new vl(c=>a_(c),Nm),this.Iu=new Map,this.Eu=new Set,this.du=new $t(ke.comparator),this.Au=new Map,this.Ru=new uR,this.Vu={},this.mu=new Map,this.fu=su.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ej(e,t,n=!0){const i=X_(e);let s;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await $_(i,t,n,!0),s}async function Tj(e,t){const n=X_(e);await $_(n,t,!0,!1)}async function $_(e,t,n,i){const s=await jW(e.localStore,zs(t)),o=s.targetId,r=e.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await xj(e,t,o,r==="current",s.resumeToken)),e.isPrimaryClient&&n&&L_(e.remoteStore,s),c}async function xj(e,t,n,i,s){e.pu=(p,m,w)=>async function(E,x,P,M){let I=x.view.ru(P);I.Cs&&(I=await lF(E.localStore,x.query,!1).then(({documents:_})=>x.view.ru(_,I)));const U=M&&M.targetChanges.get(x.targetId),z=M&&M.targetMismatches.get(x.targetId)!=null,W=x.view.applyChanges(I,E.isPrimaryClient,U,z);return vF(E,x.targetId,W.au),W.snapshot}(e,p,m,w);const o=await lF(e.localStore,t,!0),r=new wj(t,o.Qs),c=r.ru(o.documents),u=Jh.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=r.applyChanges(c,e.isPrimaryClient,u);vF(e,n,h.au);const f=new Sj(t,n,r);return e.Tu.set(t,f),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function Dj(e,t,n){const i=Ue(e),s=i.Tu.get(t),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(r=>!Nm(r,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await vS(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&gR(i.remoteStore,s.targetId),SS(i,s.targetId)}).catch(vu)):(SS(i,s.targetId),await vS(i.localStore,s.targetId,!0))}async function Aj(e,t){const n=Ue(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),gR(n.remoteStore,i.targetId))}async function Fj(e,t,n){const i=Oj(e);try{const s=await function(r,c){const u=Ue(r),h=Vt.now(),f=c.reduce((w,S)=>w.add(S.key),nt());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=zo(),E=nt();return u.Ns.getEntries(w,f).next(x=>{S=x,S.forEach((P,M)=>{M.isValidDocument()||(E=E.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(x=>{p=x;const P=[];for(const M of c){const I=W6(M,p.get(M.key).overlayedDocument);I!=null&&P.push(new Zr(M.key,I,JI(I.value.mapValue),hs.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,P,c)}).next(x=>{m=x;const P=x.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(w,x.batchId,P)})}).then(()=>({batchId:m.batchId,changes:u_(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(r,c,u){let h=r.Vu[r.currentUser.toKey()];h||(h=new $t(tt)),h=h.insert(c,u),r.Vu[r.currentUser.toKey()]=h}(i,s.batchId,n),await tf(i,s.changes),await jm(i.remoteStore)}catch(s){const o=yR(s,"Failed to persist write");n.reject(o)}}async function q_(e,t){const n=Ue(e);try{const i=await zW(n.localStore,t);t.targetChanges.forEach((s,o)=>{const r=n.Au.get(o);r&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?r.hu=!0:s.modifiedDocuments.size>0?yt(r.hu,14607):s.removedDocuments.size>0&&(yt(r.hu,42227),r.hu=!1))}),await tf(n,i,t)}catch(i){await vu(i)}}function CF(e,t,n){const i=Ue(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,r)=>{const c=r.view.va(t);c.snapshot&&s.push(c.snapshot)}),function(r,c){const u=Ue(r);u.onlineState=c;let h=!1;u.queries.forEach((f,p)=>{for(const m of p.Sa)m.va(c)&&(h=!0)}),h&&wR(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Pj(e,t,n){const i=Ue(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),o=s&&s.key;if(o){let r=new $t(ke.comparator);r=r.insert(o,Xn.newNoDocument(o,ze.min()));const c=nt().add(o),u=new zm(ze.min(),new Map,new $t(tt),r,c);await q_(i,u),i.du=i.du.remove(o),i.Au.delete(t),bR(i)}else await vS(i.localStore,t,!1).then(()=>SS(i,t,n)).catch(vu)}async function Mj(e,t){const n=Ue(e),i=t.batch.batchId;try{const s=await HW(n.localStore,t);Y_(n,i,null),K_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await tf(n,s)}catch(s){await vu(s)}}async function Ij(e,t,n){const i=Ue(e);try{const s=await function(r,c){const u=Ue(r);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(yt(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(i.localStore,t);Y_(i,t,n),K_(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await tf(i,s)}catch(s){await vu(s)}}function K_(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function Y_(e,t,n){const i=Ue(e);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(n?o.reject(n):o.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function SS(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||Q_(e,i)})}function Q_(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(gR(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),bR(e))}function vF(e,t,n){for(const i of n)i instanceof W_?(e.Ru.addReference(i.key,t),_j(e,i)):i instanceof j_?(Ee(SR,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||Q_(e,i.key)):Ne(19791,{wu:i})}function _j(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(Ee(SR,"New document in limbo: "+n),e.Eu.add(i),bR(e))}function bR(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ke(_t.fromString(t)),i=e.fu.next();e.Au.set(i,new bj(n)),e.du=e.du.insert(n,i),L_(e.remoteStore,new Mr(zs(sR(n.path)),i,"TargetPurposeLimboResolution",Lm.ce))}}async function tf(e,t,n){const i=Ue(e),s=[],o=[],r=[];i.Tu.isEmpty()||(i.Tu.forEach((c,u)=>{r.push(i.pu(u,t,n).then(h=>{if((h||n)&&i.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(u.targetId)?.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(h){s.push(h);const f=hR.As(u.targetId,h);o.push(f)}}))}),await Promise.all(r),i.Pu.H_(s),await async function(u,h){const f=Ue(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>fe.forEach(h,m=>fe.forEach(m.Es,w=>f.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>fe.forEach(m.ds,w=>f.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!yu(p))throw p;Ee(fR,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const w=f.Ms.get(m),S=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,E)}}}(i.localStore,o))}async function kj(e,t){const n=Ue(e);if(!n.currentUser.isEqual(t)){Ee(SR,"User change. New user:",t.toKey());const i=await M_(n.localStore,t);n.currentUser=t,function(o,r){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new Re(de.CANCELLED,r))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await tf(n,i.Ls)}}function Lj(e,t){const n=Ue(e),i=n.Au.get(t);if(i&&i.hu)return nt().add(i.key);{let s=nt();const o=n.Iu.get(t);if(!o)return s;for(const r of o){const c=n.Tu.get(r);s=s.unionWith(c.view.nu)}return s}}function X_(e){const t=Ue(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=q_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lj.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pj.bind(null,t),t.Pu.H_=vj.bind(null,t.eventManager),t.Pu.yu=yj.bind(null,t.eventManager),t}function Oj(e){const t=Ue(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mj.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ij.bind(null,t),t}class $p{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Um(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return GW(this.persistence,new VW,t.initialUser,this.serializer)}Cu(t){return new P_(dR.mi,this.serializer)}Du(t){return new qW}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$p.provider={build:()=>new $p};class Vj extends $p{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){yt(this.persistence.referenceDelegate instanceof Wp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new bW(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?gi.withCacheSize(this.cacheSizeBytes):gi.DEFAULT;return new P_(i=>Wp.mi(i,n),this.serializer)}}class bS{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kj.bind(null,this.syncEngine),await pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Cj}()}createDatastore(t){const n=Um(t.databaseInfo.databaseId),i=function(o){return new ZW(o)}(t.databaseInfo);return function(o,r,c,u){return new nj(o,r,c,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,o,r,c){return new sj(i,s,o,r,c)}(this.localStore,this.datastore,t.asyncQueue,n=>CF(this.syncEngine,n,0),function(){return dF.v()?new dF:new KW}())}createSyncEngine(t,n){return function(s,o,r,c,u,h,f){const p=new Rj(s,o,r,c,u,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const i=Ue(n);Ee(cl,"RemoteStore shutting down."),i.Ea.add(5),await ef(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bS.provider={build:()=>new bS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ho("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class Nj{constructor(t,n,i,s,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Yn.UNAUTHENTICATED,this.clientId=Zb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async r=>{Ee(jr,"Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Ee(jr,"Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=yR(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Wy(e,t){e.asyncQueue.verifyOperationInProgress(),Ee(jr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await M_(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function yF(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bj(e);Ee(jr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>fF(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>fF(t.remoteStore,s)),e._onlineComponents=t}async function Bj(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ee(jr,"Using user provided OfflineComponentProvider");try{await Wy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;eu("Error using user provided cache. Falling back to memory cache: "+n),await Wy(e,new $p)}}else Ee(jr,"Using default OfflineComponentProvider"),await Wy(e,new Vj(void 0));return e._offlineComponents}async function J_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ee(jr,"Using user provided OnlineComponentProvider"),await yF(e,e._uninitializedComponentsProvider._online)):(Ee(jr,"Using default OnlineComponentProvider"),await yF(e,new bS))),e._onlineComponents}function Gj(e){return J_(e).then(t=>t.syncEngine)}async function ek(e){const t=await J_(e),n=t.eventManager;return n.onListen=Ej.bind(null,t.syncEngine),n.onUnlisten=Dj.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tj.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Aj.bind(null,t.syncEngine),n}function Hj(e,t,n={}){const i=new Mo;return e.asyncQueue.enqueueAndForget(async()=>function(o,r,c,u,h){const f=new Z_({next:m=>{f.Nu(),r.enqueueAndForget(()=>z_(o,p));const w=m.docs.has(c);!w&&m.fromCache?h.reject(new Re(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?h.reject(new Re(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new U_(sR(c.path),f,{includeMetadataChanges:!0,qa:!0});return H_(o,p)}(await ek(e),e.asyncQueue,t,n,i)),i.promise}function zj(e,t,n={}){const i=new Mo;return e.asyncQueue.enqueueAndForget(async()=>function(o,r,c,u,h){const f=new Z_({next:m=>{f.Nu(),r.enqueueAndForget(()=>z_(o,p)),m.fromCache&&u.source==="server"?h.reject(new Re(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new U_(c,f,{includeMetadataChanges:!0,qa:!0});return H_(o,p)}(await ek(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firestore.googleapis.com",SF=!0;class bF{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Re(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nk,this.ssl=SF}else this.host=t.host,this.ssl=t.ssl??SF;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=F_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<wW)throw new Re(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}s6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tk(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Re(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $m{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Re(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bF(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new K5;switch(i.type){case"firstParty":return new Z5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Re(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=wF.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),wF.delete(n),i.terminate())}(this),Promise.resolve()}}function Uj(e,t,n,i={}){e=Ks(e,$m);const s=Yb(t),o=e._getSettings(),r={...o,emulatorOptions:e._getEmulatorOptions()},c=`${t}:${n}`;s&&(SU(`https://${c}`),TU("Firestore",!0)),o.host!==nk&&o.host!==c&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:c,ssl:s,emulatorOptions:i};if(!_p(u,r)&&(e._setSettings(u),i.mockUserToken)){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=Yn.MOCK_USER;else{h=bU(i.mockUserToken,e._app?.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Re(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Yn(p)}e._authCredentials=new Y5(new HI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Su(this.firestore,t,this._query)}}class rn{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rn(this.firestore,t,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Qh(n,rn._jsonSchema))return new rn(t,i||null,new ke(_t.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:mn("string",rn._jsonSchemaVersion),referencePath:mn("string")};class Lr extends Su{constructor(t,n,i){super(t,n,sR(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rn(this.firestore,null,new ke(t))}withConverter(t){return new Lr(this.firestore,t,this._path)}}function Wj(e,t,...n){if(e=Bo(e),zI("collection","path",t),e instanceof $m){const i=_t.fromString(t,...n);return LA(i),new Lr(e,null,i)}{if(!(e instanceof rn||e instanceof Lr))throw new Re(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_t.fromString(t,...n));return LA(i),new Lr(e.firestore,null,i)}}function nf(e,t,...n){if(e=Bo(e),arguments.length===1&&(t=Zb.newId()),zI("doc","path",t),e instanceof $m){const i=_t.fromString(t,...n);return kA(i),new rn(e,null,new ke(i))}{if(!(e instanceof rn||e instanceof Lr))throw new Re(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_t.fromString(t,...n));return kA(i),new rn(e.firestore,e instanceof Lr?e.converter:null,new ke(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="AsyncQueue";class EF{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __(this,"async_queue_retry"),this._c=()=>{const i=Uy();i&&Ee(RF,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Uy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Uy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!yu(t))throw t;Ee(RF,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Ho("INTERNAL UNHANDLED ERROR: ",TF(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=vR.createAndSchedule(this,t,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Ne(47125,{Pc:TF(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function TF(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class bu extends $m{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new EF,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new EF(t),this._firestoreClient=void 0,await t}}}function jj(e,t){const n=typeof e=="object"?e:L5(),i=typeof e=="string"?e:Vp,s=P5(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=yU("firestore");o&&Uj(s,...o)}return s}function RR(e){if(e._terminated)throw new Re(de.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||$j(e),e._firestoreClient}function $j(e){const t=e._freezeSettings(),n=function(s,o,r,c){return new p6(s,o,r,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,tk(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Nj(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zi(jn.fromBase64String(t))}catch(n){throw new Re(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Zi(jn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qh(t,Zi._jsonSchema))return Zi.fromBase64String(t.bytes)}}Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:mn("string",Zi._jsonSchemaVersion),bytes:mn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Re(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Re(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Re(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return tt(this._lat,t._lat)||tt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(t){if(Qh(t,Ws._jsonSchema))return new Ws(t.latitude,t.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:mn("string",Ws._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qh(t,js._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new js(t.vectorValues);throw new Re(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}js._jsonSchemaVersion="firestore/vectorValue/1.0",js._jsonSchema={type:mn("string",js._jsonSchemaVersion),vectorValues:mn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=/^__.*__$/;class Kj{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Zr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zh(t,this.data,n,this.fieldTransforms)}}class ik{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Zr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function sk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:e})}}class TR{constructor(t,n,i,s,o,r){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new TR({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return qp(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(sk(this.Ac)&&qj.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Yj{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Um(t)}Cc(t,n,i,s=!1){return new TR({Ac:t,methodName:n,Dc:i,path:zn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xR(e){const t=e._freezeSettings(),n=Um(e._databaseId);return new Yj(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qj(e,t,n,i,s,o={}){const r=e.Cc(o.merge||o.mergeFields?2:0,t,n,s);DR("Data must be an object, but it was:",r,i);const c=ok(i,r);let u,h;if(o.merge)u=new Fi(r.fieldMask),h=r.fieldTransforms;else if(o.mergeFields){const f=[];for(const p of o.mergeFields){const m=RS(t,p,n);if(!r.contains(m))throw new Re(de.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ak(f,m)||f.push(m)}u=new Fi(f),h=r.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=r.fieldTransforms;return new Kj(new vi(c),u,h)}class Km extends ER{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Km}}function Xj(e,t,n,i){const s=e.Cc(1,t,n);DR("Data must be an object, but it was:",s,i);const o=[],r=vi.empty();Xr(i,(u,h)=>{const f=AR(t,u,n);h=Bo(h);const p=s.yc(f);if(h instanceof Km)o.push(f);else{const m=sf(h,p);m!=null&&(o.push(f),r.set(f,m))}});const c=new Fi(o);return new ik(r,c,s.fieldTransforms)}function Zj(e,t,n,i,s,o){const r=e.Cc(1,t,n),c=[RS(t,i,n)],u=[s];if(o.length%2!=0)throw new Re(de.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(RS(t,o[m])),u.push(o[m+1]);const h=[],f=vi.empty();for(let m=c.length-1;m>=0;--m)if(!ak(h,c[m])){const w=c[m];let S=u[m];S=Bo(S);const E=r.yc(w);if(S instanceof Km)h.push(w);else{const x=sf(S,E);x!=null&&(h.push(w),f.set(w,x))}}const p=new Fi(h);return new ik(f,p,r.fieldTransforms)}function Jj(e,t,n,i=!1){return sf(n,e.Cc(i?4:3,t))}function sf(e,t){if(rk(e=Bo(e)))return DR("Unsupported field value:",t,e),ok(e,t);if(e instanceof ER)return function(i,s){if(!sk(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const o=[];let r=0;for(const c of i){let u=sf(c,s.wc(r));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),r++}return{arrayValue:{values:o}}}(e,t)}return function(i,s){if((i=Bo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return N6(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Vt.fromDate(i);return{timestampValue:Up(s.serializer,o)}}if(i instanceof Vt){const o=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Up(s.serializer,o)}}if(i instanceof Ws)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zi)return{bytesValue:b_(s.serializer,i._byteString)};if(i instanceof rn){const o=s.databaseId,r=i.firestore._databaseId;if(!r.isEqual(o))throw s.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cR(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof js)return function(r,c){return{mapValue:{fields:{[XI]:{stringValue:ZI},[Np]:{arrayValue:{values:r.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return oR(c.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${km(i)}`)}(e,t)}function ok(e,t){const n={};return jI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(e,(i,s)=>{const o=sf(s,t.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function rk(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Vt||e instanceof Ws||e instanceof Zi||e instanceof rn||e instanceof ER||e instanceof js)}function DR(e,t,n){if(!rk(n)||!UI(n)){const i=km(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function RS(e,t,n){if((t=Bo(t))instanceof qm)return t._internalPath;if(typeof t=="string")return AR(e,t);throw qp("Field path arguments must be of type string or ",e,!1,void 0,n)}const e9=new RegExp("[~\\*/\\[\\]]");function AR(e,t,n){if(t.search(e9)>=0)throw qp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qm(...t.split("."))._internalPath}catch{throw qp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qp(e,t,n,i,s){const o=i&&!i.isEmpty(),r=s!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||r)&&(u+=" (found",o&&(u+=` in field ${i}`),r&&(u+=` in document ${s}`),u+=")"),new Re(de.INVALID_ARGUMENT,c+e+u)}function ak(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,n,i,s,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new t9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(FR("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t9 extends lk{data(){return super.data()}}function FR(e,t){return typeof t=="string"?AR(e,t):t instanceof qm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Re(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PR{}class i9 extends PR{}function s9(e,t,...n){let i=[];t instanceof PR&&i.push(t),i=i.concat(n),function(o){const r=o.filter(u=>u instanceof MR).length,c=o.filter(u=>u instanceof Ym).length;if(r>1||r>0&&c>0)throw new Re(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Ym extends i9{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Ym(t,n,i)}_apply(t){const n=this._parse(t);return ck(t._query,n),new Su(t.firestore,t.converter,hS(t._query,n))}_parse(t){const n=xR(t.firestore);return function(o,r,c,u,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Re(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){DF(p,f);const S=[];for(const E of p)S.push(xF(u,o,E));m={arrayValue:{values:S}}}else m=xF(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||DF(p,f),m=Jj(c,r,p,f==="in"||f==="not-in");return pn.create(h,f,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function o9(e,t,n){const i=t,s=FR("where",e);return Ym._create(s,i,n)}class MR extends PR{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new MR(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gs.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,o){let r=s;const c=o.getFlattenedFilters();for(const u of c)ck(r,u),r=hS(r,u)}(t._query,n),new Su(t.firestore,t.converter,hS(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xF(e,t,n){if(typeof(n=Bo(n))=="string"){if(n==="")throw new Re(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r_(t)&&n.indexOf("/")!==-1)throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(_t.fromString(n));if(!ke.isDocumentKey(i))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return UA(e,new ke(i))}if(n instanceof rn)return UA(e,n._key);throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${km(n)}.`)}function DF(e,t){if(!Array.isArray(e)||e.length===0)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ck(e,t){const n=function(s,o){for(const r of s)for(const c of r.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Re(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Re(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class r9{convertValue(t,n="none"){switch(Ur(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ne(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Xr(t,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(t){const n=t.fields?.[Np].arrayValue?.values?.map(i=>sn(i.doubleValue));return new js(n)}convertGeoPoint(t){return new Ws(sn(t.latitude),sn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Vm(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Rh(t));default:return null}}convertTimestamp(t){const n=Hr(t);return new Vt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_t.fromString(t);yt(A_(i),9688,{name:t});const s=new Eh(i.get(1),i.get(3)),o=new ke(i.popFirst(5));return s.isEqual(n)||Ho(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(e,t,n){let i;return i=e?e.toFirestore(t):t,i}class jd{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Za extends lk{constructor(t,n,i,s,o,r){super(t,n,i,s,r),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new up(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(FR("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Za._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Za._jsonSchemaVersion="firestore/documentSnapshot/1.0",Za._jsonSchema={type:mn("string",Za._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class up extends Za{data(t={}){return super.data(t)}}class Gc{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new jd(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new up(this._firestore,this._userDataWriter,i.key,i,new jd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let r=0;return s._snapshot.docChanges.map(c=>{const u=new up(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:r++}})}{let r=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new up(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=r.indexOf(c.doc.key),r=r.delete(c.doc.key)),c.type!==1&&(r=r.add(c.doc),f=r.indexOf(c.doc.key)),{type:l9(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Gc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Zb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function l9(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(e){e=Ks(e,rn);const t=Ks(e.firestore,bu);return Hj(RR(t),e._key).then(n=>f9(t,e,n))}Gc._jsonSchemaVersion="firestore/querySnapshot/1.0",Gc._jsonSchema={type:mn("string",Gc._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};class uk extends r9{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function u9(e){e=Ks(e,Su);const t=Ks(e.firestore,bu),n=RR(t),i=new uk(t);return n9(e._query),zj(n,e._query).then(s=>new Gc(t,i,e,s))}function dk(e,t,n){e=Ks(e,rn);const i=Ks(e.firestore,bu),s=a9(e.converter,t);return IR(i,[Qj(xR(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,hs.none())])}function d9(e,t,n,...i){e=Ks(e,rn);const s=Ks(e.firestore,bu),o=xR(s);let r;return r=typeof(t=Bo(t))=="string"||t instanceof qm?Zj(o,"updateDoc",e._key,t,n,i):Xj(o,"updateDoc",e._key,t),IR(s,[r.toMutation(e._key,hs.exists(!0))])}function h9(e){return IR(Ks(e.firestore,bu),[new rR(e._key,hs.none())])}function IR(e,t){return function(i,s){const o=new Mo;return i.asyncQueue.enqueueAndForget(async()=>Fj(await Gj(i),s,o)),o.promise}(RR(e),t)}function f9(e,t,n){const i=n.docs.get(t._key),s=new uk(e);return new Za(e,s,t._key,i,new jd(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Cu=s})(k5),Lp(new wh("firestore",(i,{instanceIdentifier:s,options:o})=>{const r=i.getProvider("app").getImmediate(),c=new bu(new Q5(i.getProvider("auth-internal")),new J5(r,i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Re(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(h.options.projectId,f)}(r,s),r);return o={useFetchStreams:n,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Nc(PA,MA,t),Nc(PA,MA,"esm2020")})();const g9={apiKey:"AIzaSyCT-STfuZtyEbPftNfk7XYMapo-ICgSPsg",authDomain:"grandprix4-82e9c.firebaseapp.com",projectId:"grandprix4-82e9c",storageBucket:"grandprix4-82e9c.firebasestorage.app",messagingSenderId:"173027271796",appId:"1:173027271796:web:7d1cd9a80ddfd683ca5d21"},p9=MI(g9),Ru=jj(p9),m9=async e=>{const t=nf(Ru,"academias",e);return(await c9(t)).data()||null},C9=async(e,t)=>{await dk(nf(Ru,"academias",t),{nombre:e,dni:t})},hk=async e=>{await dk(nf(Ru,"deportistas",e.id),e)},fk=async e=>{await d9(nf(Ru,"deportistas",e.id),{...e})},v9=async e=>(await u9(s9(Wj(Ru,"deportistas"),o9("academia","==",e)))).docs.map(n=>n.data()),y9=async e=>{await h9(nf(Ru,"deportistas",e))},Bn=[];for(let e=0;e<256;++e)Bn.push((e+256).toString(16).slice(1));function w9(e,t=0){return(Bn[e[t+0]]+Bn[e[t+1]]+Bn[e[t+2]]+Bn[e[t+3]]+"-"+Bn[e[t+4]]+Bn[e[t+5]]+"-"+Bn[e[t+6]]+Bn[e[t+7]]+"-"+Bn[e[t+8]]+Bn[e[t+9]]+"-"+Bn[e[t+10]]+Bn[e[t+11]]+Bn[e[t+12]]+Bn[e[t+13]]+Bn[e[t+14]]+Bn[e[t+15]]).toLowerCase()}let jy;const S9=new Uint8Array(16);function b9(){if(!jy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jy=crypto.getRandomValues.bind(crypto)}return jy(S9)}const R9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),AF={randomUUID:R9};function gk(e,t,n){if(AF.randomUUID&&!e)return AF.randomUUID();e=e||{};const i=e.random??e.rng?.()??b9();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,w9(i)}const $y=({isComplete:e,text:t})=>D.jsxs(bn.li,{layout:!0,className:"d-flex align-items-center mb-2",children:[D.jsx(Fo,{mode:"wait",children:D.jsx(bn.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:e?D.jsx("i",{className:"bi bi-check-circle-fill text-success me-2",style:{fontSize:"1.2rem"}}):D.jsx("i",{className:"bi bi-x-circle-fill text-danger me-2",style:{fontSize:"1.2rem"}})},e?"check":"x")}),D.jsx("span",{className:e?"text-muted":"",style:{textDecoration:e?"line-through":"none"},children:t})]}),E9=()=>{const{addDeportista:e,currentDeportista:t,deportistas:n,editDeportista:i,academia:s}=qb(),{seniority:o,category:r,rank:c}=RI(),{setShowModal:u,editMode:h}=Qr(),[f,p]=R.useState(t?n.find(k=>k.id==t):{nombre:"",apellido:"",edad:0,peso:0,sexo:"M",combates:0,academia:s,telefono_deportista:"",email_deportista:"",acudiente:"",telefono_acudiente:""}),[m,w]=R.useState(!1),[S,E]=R.useState(!1),[x,P]=R.useState(!1),[M,I]=R.useState(!1),[U,z]=R.useState(!1);R.useEffect(()=>{w(f.edad>=18)},[f.edad]),R.useEffect(()=>{f.edad&&f.peso&&f.sexo&&c(f.edad,f.peso,f.combates,f.sexo)},[f.edad,f.peso,f.combates,f.sexo,c]),R.useEffect(()=>{p(t?n.find(k=>k.id==t):{nombre:"",apellido:"",edad:0,peso:0,sexo:"M",combates:0,academia:s,telefono_deportista:"",email_deportista:"",acudiente:"",telefono_acudiente:""})},[t,n,s]),R.useEffect(()=>{const{nombre:k,apellido:O,edad:N,peso:H,combates:V,telefono_deportista:ve,email_deportista:pe,acudiente:q,telefono_acudiente:ie}=f,se=k.trim()!==""&&O.trim()!==""&&N>0&&H>0&&V>=0;P(se);const be=/^\d{3} \d{3} \d{4}$/,G=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(N>=18){const Z=be.test(ve),le=G.test(pe),te=Z||le;I(te),E(se&&te)}else{const Z=(q?.trim()??"")!=="",le=be.test(ie),te=Z&&le;z(te),E(se&&te)}},[f]);const W=k=>{const{name:O,value:N}=k.target;let H=N;if(O==="telefono_deportista"||O==="telefono_acudiente"){const V=N.replace(/[^\d]/g,"");let ve="";V.length>0&&(V.length>6?ve=`${V.substring(0,3)} ${V.substring(3,6)} ${V.substring(6,10)}`:V.length>3?ve=`${V.substring(0,3)} ${V.substring(3,6)}`:ve=V),H=ve.trim()}p(V=>({...V,[O]:H}))},_=()=>{const k={...f};k.edad>=18?(k.acudiente="",k.telefono_acudiente=""):(k.telefono_deportista="",k.email_deportista="");const O={id:t||gk(),...k,nombre:k.nombre.toUpperCase(),apellido:k.apellido.toUpperCase(),peso:parseFloat(f.peso)||0,categoria:r,seniority:o};h?(i(O),fk(O)):(e(O),hk(O)),u(!1)},F={hidden:{opacity:0,y:-10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10,transition:{duration:.2}}};return D.jsx(ri,{className:"shadow-lg border-0",style:{borderRadius:"1rem",overflow:"hidden"},children:D.jsxs(mi,{className:"g-0",children:[D.jsxs(bt,{md:4,className:"p-4 bg-dark text-white d-flex flex-column justify-content-center",style:{height:"800px",maxHeight:"800px"},children:[D.jsxs("div",{className:"text-center",children:[D.jsx("div",{style:{fontSize:"6rem"},children:f.sexo==="F"?D.jsx("i",{className:"bi bi-person-standing-dress"}):D.jsx("i",{className:"bi bi-person-standing"})}),D.jsx("h3",{className:"mt-3 fw-bold",children:"Ficha del Deportista"}),D.jsx("p",{className:"text-white-50",children:"Completa el formulario para inscribir al atleta."})]}),D.jsxs("div",{className:"mt-4 text-center",children:[D.jsx(Fo,{children:o&&D.jsxs(bn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"mb-3",children:[D.jsx("span",{className:"text-uppercase fw-bold small",children:"Nivel"}),D.jsx("div",{className:"mt-1",children:D.jsx(al,{bg:"success",className:"fs-6 px-3 py-2 shadow-sm",children:o})})]})}),D.jsx(Fo,{children:r&&D.jsxs(bn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,delay:.1},children:[D.jsx("span",{className:"text-uppercase fw-bold small",children:"Categora"}),D.jsx("div",{className:"mt-1",children:D.jsx(al,{bg:"info",text:"dark",className:"fs-6 px-3 py-2 shadow-sm",children:r})})]})})]})]}),D.jsx(bt,{md:8,style:{height:"800px",maxHeight:"800px",overflow:"scroll"},children:D.jsx("div",{className:"p-sm-5 p-4",children:D.jsxs(we,{onSubmit:k=>k.preventDefault(),children:[D.jsx("h4",{className:"fw-bold",children:"Datos del deportista"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(mi,{className:"mb-3",children:[D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formNombre",children:[D.jsx(we.Label,{children:"Nombre"}),D.jsx(we.Control,{type:"text",name:"nombre",value:f.nombre,onChange:W,placeholder:"Nombre del deportista"})]}),D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formApellido",children:[D.jsx(we.Label,{children:"Apellido"}),D.jsx(we.Control,{type:"text",name:"apellido",value:f.apellido,onChange:W,placeholder:"Apellido del deportista"})]})]}),D.jsxs(mi,{className:"mb-3",children:[D.jsxs(we.Group,{as:bt,sm:"4",controlId:"formEdad",children:[D.jsx(we.Label,{children:"Edad"}),D.jsx(we.Control,{type:"number",name:"edad",value:f.edad,onChange:W,placeholder:"Edad",min:"0",max:"100"})]}),D.jsxs(we.Group,{as:bt,sm:"4",controlId:"formPeso",children:[D.jsx(we.Label,{children:"Peso (kg)"}),D.jsx(we.Control,{type:"text",name:"peso",value:f.peso,onChange:W,placeholder:"e.g. 65.50"})]}),D.jsxs(we.Group,{as:bt,sm:"4",controlId:"formCombates",children:[D.jsx(we.Label,{children:"Combates"}),D.jsx(we.Control,{type:"number",name:"combates",value:f.combates,onChange:W,placeholder:"N de combates",min:"0"})]})]}),D.jsxs(mi,{className:"mb-3",children:[D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formAcademia",children:[D.jsx(we.Label,{children:"Academia"}),D.jsx(we.Control,{readOnly:!0,disabled:!0,type:"text",name:"academia",value:f.academia,onChange:W})]}),D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formSexo",children:[D.jsx(we.Label,{children:"Sexo"}),D.jsxs(we.Select,{name:"sexo",value:f.sexo,onChange:W,children:[D.jsx("option",{value:"M",children:"MASCULINO"}),D.jsx("option",{value:"F",children:"FEMENINO"})]})]})]}),D.jsx("div",{style:{minHeight:"180px"},children:D.jsx(Fo,{mode:"wait",children:m?D.jsxs(bn.div,{variants:F,initial:"hidden",animate:"visible",exit:"exit",children:[D.jsx("h4",{className:"fw-bold mt-5",children:"Datos de Contacto del Deportista"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(mi,{className:"mb-3",children:[D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formTelefonoDeportista",children:[D.jsx(we.Label,{children:"Telfono"}),D.jsx(we.Control,{type:"tel",name:"telefono_deportista",value:f.telefono_deportista,onChange:W,placeholder:"xxx xxx xxxx"})]}),D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formEmailDeportista",children:[D.jsx(we.Label,{children:"Email"}),D.jsx(we.Control,{type:"email",name:"email_deportista",value:f.email_deportista,onChange:W,placeholder:"correo@ejemplo.com"})]})]})]},"contactoDeportista"):D.jsxs(bn.div,{variants:F,initial:"hidden",animate:"visible",exit:"exit",children:[D.jsx("h4",{className:"fw-bold mt-5",children:"Datos del Acudiente"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(mi,{children:[D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formAcudiente",children:[D.jsx(we.Label,{children:"Nombre del acudiente"}),D.jsx(we.Control,{type:"text",name:"acudiente",value:f.acudiente,onChange:W,placeholder:"Nombre completo del acudiente"})]}),D.jsxs(we.Group,{as:bt,sm:"6",controlId:"formTelefonoAcudiente",children:[D.jsx(we.Label,{children:"Telfono del acudiente"}),D.jsx(we.Control,{type:"tel",name:"telefono_acudiente",value:f.telefono_acudiente,onChange:W,placeholder:"xxx xxx xxxx"})]})]})]},"contactoAcudiente")})}),D.jsxs(mi,{className:"mt-5 align-items-center",children:[D.jsx(bt,{md:7,children:D.jsxs("ul",{className:"list-unstyled",children:[D.jsx($y,{isComplete:x,text:"Datos del deportista"}),D.jsx("div",{style:{minHeight:"30px"},children:D.jsx(Fo,{mode:"wait",children:m?D.jsx(bn.div,{variants:F,initial:"hidden",animate:"visible",exit:"exit",children:D.jsx($y,{isComplete:M,text:"Contacto del deportista (telfono o email)"})},"checkContactoDeportista"):D.jsx(bn.div,{variants:F,initial:"hidden",animate:"visible",exit:"exit",children:D.jsx($y,{isComplete:U,text:"Datos del acudiente (nombre y telfono)"})},"checkContactoAcudiente")})})]})}),D.jsxs(bt,{md:5,className:"d-flex justify-content-end",children:[D.jsx(Rn,{onClick:()=>u(!1),variant:"light",type:"button",className:"me-3 px-4",children:"Cancelar"}),D.jsx(Rn,{onClick:_,variant:"success",type:"submit",disabled:!S,className:"px-4",children:"Guardar"})]})]})]})})})]})})};var ul=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const i=t?this.allAsyncListeners:this.allSyncListeners;let s=i.get(e);return!s&&n&&(s=new Set,i.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const c=e.event;c instanceof Event&&(e.eventPath=c.composedPath())}const{frameworkOverrides:i}=this,s=c=>{const u=i?()=>i.wrapIncoming(c):c;t?this.dispatchAsync(u):u()},o=this.getListeners(n,t,!1);if((o?.size??0)>0){const c=new Set(o);for(const u of c)o?.has(u)&&s(()=>u(e))}const r=this.getGlobalListeners(t);if(r.size>0){const c=new Set(r);for(const u of c)s(()=>u(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function T9(e,t){return t}function pk(e){return e?.getLocaleTextFunc()??T9}function x9(e,t,n,i){const s=t[n];return e.getLocaleTextFunc()(n,typeof s=="function"?s(i):s,i)}function Io(e){return e==null||e===""?null:e}function Ce(e){return e!=null&&e!==""}function Nt(e){return!Ce(e)}function ES(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Ah(e,t){const n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function D9(e,t,n=!1){const i=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function o(r,c){return r>c?1:r<c?-1:0}if(typeof e!="string"||!n)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var mk=new Set(["__proto__","constructor","prototype"]);function A9(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(const n of Object.keys(e).filter(i=>!mk.has(i)))t(n,e[n])}}function li(e,t,n=!0,i=!1){Ce(t)&&A9(t,(s,o)=>{let r=e[s];r!==o&&(i&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[s]=r),FF(o)&&FF(r)&&!Array.isArray(r)?li(r,o,n,i):(n||o!==void 0)&&(e[s]=o))})}function oh(e,t,n){if(!t||!e)return;if(!n)return e[t];const i=t.split(".");let s=e;for(let o=0;o<i.length;o++){if(s==null)return;s=s[i[o]]}return s}function FF(e){return typeof e=="object"&&e!==null}var _R=class Na{static applyGlobalGridOptions(t){if(!Na.gridOptions)return{...t};let n={};return li(n,Na.gridOptions,!0,!0),Na.mergeStrategy==="deep"?li(n,t,!0,!0):n={...n,...t},Na.gridOptions.context&&(n.context=Na.gridOptions.context),t.context&&(Na.mergeStrategy==="deep"&&n.context&&li(t.context,n.context,!0,!0),n.context=t.context),n}};_R.gridOptions=void 0;_R.mergeStrategy="shallow";var Ck=_R;function F9(e){return Ck.gridOptions?.[e]}var vk={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1};function ps(e,t,n){n==null||typeof n=="string"&&n==""?yk(e,t):ms(e,t,n)}function ms(e,t,n){e.setAttribute(wk(t),n.toString())}function yk(e,t){e.removeAttribute(wk(t))}function wk(e){return`aria-${e}`}function dl(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function P9(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function M9(e){return e.getAttribute("aria-label")}function ru(e,t){ps(e,"label",t)}function Fh(e,t){ps(e,"labelledby",t)}function Sk(e,t){ps(e,"live",t)}function I9(e,t){ps(e,"atomic",t)}function _9(e,t){ps(e,"relevant",t)}function k9(e,t){ps(e,"invalid",t)}function L9(e,t){ps(e,"disabled",t)}function bk(e,t){ps(e,"hidden",t)}function TS(e,t){ms(e,"expanded",t)}function O9(e,t){ms(e,"setsize",t)}function V9(e,t){ms(e,"posinset",t)}function N9(e,t){ms(e,"rowcount",t)}function Rk(e,t){ms(e,"rowindex",t)}function B9(e,t){ms(e,"rowspan",t)}function G9(e,t){ms(e,"colcount",t)}function Ek(e,t){ms(e,"colindex",t)}function H9(e,t){ms(e,"colspan",t)}function z9(e,t){ms(e,"sort",t)}function U9(e){yk(e,"sort")}function xS(e,t){ps(e,"selected",t)}function W9(e,t){ps(e,"controls",t)}function j9(e,t){W9(e,t.id),Fh(t,e.id)}function PF(e,t){ps(e,"owns",t)}function Qm(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var qy,Ky,Yy,Qy,DS,AS,Xy;function wl(){return qy===void 0&&(qy=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),qy}function Tk(){return Ky===void 0&&(Ky=/(firefox)/i.test(navigator.userAgent)),Ky}function xk(){return Yy===void 0&&(Yy=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Yy}function Ja(){return Qy===void 0&&(Qy=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Qy}function FS(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!Tk())?null:t.toString()}function $9(){if(Xy!==void 0)return Xy;if(!document.body)return-1;let e=1e6;const t=Tk()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),Xy=e,e}function q9(){return AS==null&&Dk(),AS}function Dk(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(AS=n,DS=n===0)}function Ak(){return DS==null&&Dk(),DS}var K9="[tabindex], input, select, button, textarea, [href]",Fk="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function kR(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,Fk),o=Qs(e);return i&&!s&&o}function Wt(e,t,n={}){const{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||bk(e,!t)}function Y9(e,t,n={}){const{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||bk(e,!t)}function Ph(e,t){const n="disabled",i=t?o=>o.setAttribute(n,""):o=>o.removeAttribute(n);i(e);const s=e.querySelectorAll("input")??[];for(const o of s)i(o)}function el(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function Sl(e){const{height:t,width:n,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:o,borderLeftWidth:r,paddingTop:c,paddingRight:u,paddingBottom:h,paddingLeft:f,marginTop:p,marginRight:m,marginBottom:w,marginLeft:S,boxSizing:E}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(c||"0"),paddingRight:parseFloat(u||"0"),paddingBottom:parseFloat(h||"0"),paddingLeft:parseFloat(f||"0"),marginTop:parseFloat(p||"0"),marginRight:parseFloat(m||"0"),marginBottom:parseFloat(w||"0"),marginLeft:parseFloat(S||"0"),boxSizing:E}}function LR(e){const t=Sl(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Mh(e){const t=Sl(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function Pk(e){const{height:t,marginBottom:n,marginTop:i}=Sl(e);return Math.floor(t+n+i)}function Kp(e){const{width:t,marginLeft:n,marginRight:i}=Sl(e);return Math.floor(t+n+i)}function Mk(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:s,borderBottomWidth:o}=Sl(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(s||0),bottom:t.bottom+(o||0)}}function Yp(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function Qp(e,t,n){n&&(t*=-1),e.scrollLeft=t}function _i(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Uo(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ik(e){return!!e.offsetParent}function Qs(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!Ik(e)||window.getComputedStyle(e).visibility!=="visible")}function OR(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function dp(e){return()=>{const t=e();return t?_k(t)||kk(t):!0}}function _k(e){return e.clientWidth<e.scrollWidth}function kk(e){return e.clientHeight<e.scrollHeight}function Xp(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):$s(e,t)}function $s(e,t){t=VR(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function rh(e,t){t=VR(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function VR(e){return typeof e=="number"?`${e}px`:e}function NR(e){return e instanceof Node||e instanceof HTMLElement}function Pi(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function $o(e,t,n){const s=Wk(e).ResizeObserver,o=s?new s(n):null;return o?.observe(t),()=>o?.disconnect()}function qo(e,t){const n=Wk(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var Lk="data-ref",Zy;function MF(){return Zy??(Zy=document.createTextNode(" ")),Zy.cloneNode()}function an(e){const{attrs:t,children:n,cls:i,ref:s,role:o,tag:r}=e,c=document.createElement(r);if(i&&(c.className=i),s&&c.setAttribute(Lk,s),o&&c.setAttribute("role",o),t)for(const u of Object.keys(t))c.setAttribute(u,t[u]);if(n)if(typeof n=="string")c.textContent=n;else{let u=!0;for(const h of n)h&&(typeof h=="string"?(c.appendChild(document.createTextNode(h)),u=!1):typeof h=="function"?c.appendChild(h()):(u&&(c.appendChild(MF()),u=!1),c.append(an(h)),c.appendChild(MF())))}return c}var IF={};function BR(e,t){IF[t]||(e(),IF[t]=!0)}function hl(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function ah(e,...t){BR(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Hc(e,...t){BR(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var Q9={pending:!1,funcs:[]},X9={pending:!1,funcs:[]};function PS(e,t="setTimeout",n){const i=t==="raf"?X9:Q9;if(i.funcs.push(e),i.pending)return;i.pending=!0;const s=()=>{const o=i.funcs.slice();i.funcs.length=0,i.pending=!1,o.forEach(r=>r())};t==="raf"?qo(n,s):window.setTimeout(s,0)}function Un(e,t,n){let i;return function(...s){const o=this;window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(o,s)},n)}}function _F(e,t){let n=0;return function(...i){const s=this,o=Date.now();o-n<t||(n=o,e.apply(s,i))}}function Z9(e,t,n=100,i){const s=Date.now();let o=null,r=!1;const c=()=>{const u=Date.now()-s>n;(e()||u)&&(t(),r=!0,o!=null&&(window.clearInterval(o),o=null))};c(),r||(o=window.setInterval(c,10))}var Ok="https://www.ag-grid.com",Se="34.1.0",kF=2e3,LF=100,Vk="_version_",Nk=null,zc=`${Ok}/javascript-data-grid`;function J9(e){Nk=e}function e7(e){zc=e}function Bk(e,t,n){return Nk?.getConsoleMessage(e,t)??[s7(e,t,n)]}function GR(e,t,n,i){e(`error #${t}`,...Bk(t,n,i))}function t7(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function n7(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=t7(e)),t}function Zp(e){return e===void 0?"undefined":e===null?"null":e}function MS(e,t){return`${e}?${t.toString()}`}function i7(e,t,n){const i=Array.from(t.entries()).sort((o,r)=>r[1].length-o[1].length);let s=MS(e,t);for(const[o,r]of i){if(o===Vk)continue;const c=s.length-n;if(c<=0)break;const u="...",h=c+u.length,f=r.length-h>LF?r.slice(0,r.length-h)+u:r.slice(0,LF)+u;t.set(o,f),s=MS(e,t)}return s}function Gk(e,t){const n=new URLSearchParams;if(n.append(Vk,Se),t)for(const o of Object.keys(t))n.append(o,n7(t[o]));const i=`${zc}/errors/${e}`,s=MS(i,n);return s.length<=kF?s:i7(i,n,kF)}var s7=(e,t,n)=>{const i=Gk(e,t);return`${n?n+` 
`:""}Visit ${i}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function ge(...e){GR(ah,e[0],e[1])}function vt(...e){GR(Hc,e[0],e[1])}function $d(e,t,n){GR(Hc,e,t,n)}function o7(e,t){const n=t[0];return`error #${n} `+Bk(n,t[1],e).join(" ")}function qs(...e){return o7(void 0,e)}function Hk(e,t){return e.get("rowModelType")===t}function gn(e,t){return Hk(e,"clientSide")}function bl(e,t){return Hk(e,"serverSide")}function Wn(e,t){return e.get("domLayout")===t}function tl(e){return em(e)!==void 0}function zk(e){return typeof e.get("getRowHeight")=="function"}function r7(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function $r(e,t,n=!1,i){const{gos:s,environment:o}=e;if(i==null&&(i=o.getDefaultRowHeight()),zk(s)){if(n)return{height:i,estimated:!0};const u={node:t,data:t.data},h=s.getCallback("getRowHeight")(u);if(IS(h))return h===0&&ge(23),{height:Math.max(1,h),estimated:!1}}if(t.detail&&s.get("masterDetail"))return a7(s);const r=s.get("rowHeight");return{height:r&&IS(r)?r:i,estimated:!1}}function a7(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return IS(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function nl(e){const{environment:t,gos:n}=e,i=n.get("rowHeight");if(!i||Nt(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(ge(24),t.getDefaultRowHeight())}function IS(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Uk(e,t,n){const i=t[e.getDomDataKey()];return i?i[n]:void 0}function fl(e,t,n,i){const s=e.getDomDataKey();let o=t[s];Nt(o)&&(o={},t[s]=o),o[n]=i}function _n(e){const{gos:t,eGridDiv:n}=e;let i=null;const s=t.get("getDocument");return s&&Ce(s)?i=s():n&&(i=n.ownerDocument),i&&Ce(i)?i:document}function Wk(e){return _n(e).defaultView||window}function Ih(e){return e.eGridDiv.getRootNode()}function qt(e){return Ih(e).activeElement}function HR(e){let t=null,n=null;try{t=_n(e).fullscreenElement}catch{}finally{t||(t=Ih(e));const i=t.querySelector("body");i?n=i:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function l7(e){return HR(e)?.clientWidth??(window.innerWidth||-1)}function c7(e){return HR(e)?.clientHeight??(window.innerHeight||-1)}function u7(e,t,n){const s=e.getBoundingClientRect().height,o=l7(n)-2,r=c7(n)-2;if(!e.offsetParent)return;const u=Mk(e.offsetParent),{clientY:h,clientX:f}=t;let p=h-u.top-s/2,m=f-u.left-10;const w=_n(n),S=w.defaultView||window,E=S.pageYOffset||w.documentElement.scrollTop,x=S.pageXOffset||w.documentElement.scrollLeft;o>0&&m+e.clientWidth>o+x&&(m=o+x-e.clientWidth),m<0&&(m=0),r>0&&p+e.clientHeight>r+E&&(p=r+E-e.clientHeight),p<0&&(p=0),e.style.left=`${m}px`,e.style.top=`${p}px`}function jk(e){const t=qt(e);return t===null||t===_n(e).body}function Uc(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function $k(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Wn(e,"print"))}function Os(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function _S(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function qk(e){return e.get("grandTotalRow")}function Kk(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Yk(e,t,n){return!!t.group&&!t.footer&&Kk(e,n)}function au(e){const t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(BR(()=>ge(25,{id:i}),"getRowIdString"),i=String(i)),i}}function d7(e,t){const n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function h7(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Wc(e){return e?.checkboxes??!0}function hp(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function Jp(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function Jy(e){return e?.hideDisabledCheckboxes??!1}function f7(e){return typeof e.get("rowSelection")!="string"}function qr(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function Qk(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function g7(e){const t=Qk(e);return t===!0||t==="enableSelection"}function p7(e){const t=Qk(e);return t===!0||t==="enableDeselection"}function kS(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function em(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function tm(e){return em(e)==="multiRow"}function m7(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function nm(e){const t=e.get("rowSelection");if(typeof t=="string"){const n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function Xk(e,t=!0){const n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function _h(e){const t=nm(e);return t==="descendants"||t==="filteredDescendants"}function OF(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function C7(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Mi(e){return e.get("columnMenu")==="legacy"}function v7(e){return!Mi(e)}function y7(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function w7(e,t,n){typeof e!="object"&&(e={});const i={...e};return n.forEach(s=>{const o=t[s];typeof o<"u"&&(i[s]=o)}),i}function S7(e,t){if(!e)return;const n={};let i=!1;if(Object.keys(e).forEach(r=>{n[r]=e[r],i=!0}),!i)return;const s={type:"gridOptionsChanged",options:n};t.dispatchEvent(s);const o={type:"componentStateChanged",...n};t.dispatchEvent(o)}function Me(e,t){return e.addGridCommonParams(t)}function Zk(e){return e.get("treeData")?e.get("treeDataParentIdField")?"treeSelfRef":e.get("treeDataChildrenField")?"treeNested":"treePath":"group"}function fp(e,t){return e[t]??e.gridOptions?.[t]??F9(t)??vk[t]}var Jk="__ag_Grid_Stop_Propagation",b7=["touchstart","touchend","touchmove","touchcancel","scroll"],R7=["wheel"],ew={};function gl(e){e[Jk]=!0}function _o(e){return e[Jk]===!0}var eL=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof ew[n]=="boolean")return ew[n];const i=document.createElement(e[n]||"div");return n="on"+n,ew[n]=n in i}})();function tL(e,t,n){let i=t;for(;i;){const s=Uk(e,i,n);if(s)return s;i=i.parentElement}return null}function E7(e,t){return!t||!e?!1:x7(t).indexOf(e)>=0}function T7(e){const t=[];let n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function x7(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():T7(t)}function D7(e,t,n,i){const s=nL(n);let o;s!=null&&(o={passive:s}),e&&e.addEventListener&&e.addEventListener(t,n,i,o)}var nL=e=>{const t=b7.includes(e),n=R7.includes(e);if(t)return!0;if(n)return!1},re=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new ul),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const i of Object.keys(t)){const s=t[i];s&&n.push(this._setupListener(e,i,s))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let i;return A7(e)?(e.__addEventListener(t,n),i=()=>(e.__removeEventListener(t,n),null)):(e instanceof HTMLElement?D7(this.beans.frameworkOverrides,e,t,n):e.addEventListener(t,n),i=()=>(e.removeEventListener(t,n),null)),this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const i=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}const o={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(o)};e.forEach(s=>this.setupGridOptionListener(s,i))}getLocaleTextFunc(){return pk(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function A7(e){return e.__addEventListener!==void 0}var F7=/[&<>"']/g,P7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Eu(e){return e?.toString().toString()??null}function gp(e){return Eu(e)?.replace(F7,t=>P7[t])??null}var M7={resizable:!0,sortable:!0},I7=0;function iL(){return I7++}function Kr(e){return e instanceof Rl}var Rl=class extends re{constructor(e,t,n,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=iL(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new ul,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=gp(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:i}}=this;t?.initCol(this);const s=e.hide;s!==void 0?this.visible=!s:this.visible=!e.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(e,t,n){const i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=Ce(t)&&t.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Ce(n)&&n.indexOf(".")>=0&&!i}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,n.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const n=e.width,i=e.initialWidth;return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return Me(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??M7[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return Me(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Nt(this.sort)}isSorting(){return Ce(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return ge(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Me(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Nt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(Nt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,n){const i=this.createColumnEvent(e,t);n&&li(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Qn(e){return e instanceof pp}var pp=class extends re{constructor(e,t,n,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=iL(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)Kr(t)?e(t):Qn(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){this.children&&this.children.forEach(t=>{Kr(t)?e.push(t):Qn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const i=this.findChildrenRemovingPadding();for(let o=0,r=i.length;o<r;o++){const c=i[o];if(!c.isVisible())continue;const u=c.getColumnGroupShow();u==="open"?(e=!0,n=!0):u==="closed"?(t=!0,n=!0):(e=!0,t=!0)}const s=e&&t&&n;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{n.forEach(i=>{Qn(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},_7={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function VF(e,t,n){const i={},s=e.gos;return Object.assign(i,s.get("defaultColGroupDef")),Object.assign(i,t),s.validateColDef(i,n),i}var k7=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=ES(e);let n=0;for(;;){let i=e??t;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){const s=String(i);return e&&n>0&&ge(273,{providedId:e,usedId:s}),this.existingKeys[s]=!0,s}n++}}},im=Object.freeze([]);function Ct(e){if(e?.length)return e[e.length-1]}function El(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,s)=>n?n(i,t[s]):t[s]===i)}function Ug(e,t){if(e)for(const n of e)t(n)}function is(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function NF(e,t,n){for(let i=0;i<t.length;i++)is(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}var Xm="ag-Grid-AutoColumn",sL="ag-Grid-SelectionColumn",oL="ag-Grid-RowNumbersColumn";function rL(e){const t=[],n=i=>{for(let s=0;s<i.length;s++){const o=i[s];Kr(o)?t.push(o):Qn(o)&&n(o.getChildren())}};return n(e),t}function Do(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function sm(e,t,n){const i={};if(!t)return;ko(null,t,o=>{i[o.getInstanceId()]=o}),n&&ko(null,n,o=>{i[o.getInstanceId()]=null});const s=Object.values(i).filter(o=>o!=null);e.context.destroyBeans(s)}function zR(e){return e.getId().startsWith(Xm)}function Jr(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(sL)??!1}function Or(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(oL)??!1}function L7(e){return Jr(e)||Or(e)}function om(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function O7(e,t){return El(e,t,(n,i)=>n.getColId()===i.getColId())}function V7(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function jc(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function aL(e,t){const n=e===t,i=e.getColDef()===t,s=e.getColId()==t;return n||i||s}var N7=(e,t)=>(n,i)=>{const s={value1:void 0,value2:void 0};let o=!1;return e&&(e[n]!==void 0&&(s.value1=e[n],o=!0),Ce(i)&&e[i]!==void 0&&(s.value2=e[i],o=!0)),!o&&t&&(t[n]!==void 0&&(s.value1=t[n]),Ce(i)&&t[i]!==void 0&&(s.value2=t[i])),s};function B7(e,t=null,n,i,s){const o=new k7,{existingCols:r,existingGroups:c,existingColKeys:u}=G7(i);o.addExistingKeys(u);const h=lL(e,t,0,n,r,o,c,s),{colGroupSvc:f}=e,p=f?.findMaxDepth(h,0)??0,m=f?f.balanceColumnTree(h,0,p,o):h;return ko(null,m,(S,E)=>{Qn(S)&&S.setupExpandable(),S.originalParent=E}),{columnTree:m,treeDepth:p}}function G7(e){const t=[],n=[],i=[];return e&&ko(null,e,s=>{if(Qn(s)){const o=s;n.push(o)}else{const o=s;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}function lL(e,t,n,i,s,o,r,c){if(!t)return[];const{colGroupSvc:u}=e,h=new Array(t.length);for(let f=0;f<h.length;f++){const p=t[f];u&&$7(p)?h[f]=u.createProvidedColumnGroup(i,p,n,s,o,r,c):h[f]=H7(e,i,p,s,o,c)}return h}function H7(e,t,n,i,s,o){const r=U7(n,i);r&&i?.splice(r.idx,1);let c=r?.column;if(c){const u=LS(e,n,c.getColId());c.setColDef(u,n,o),z7(e,c,u,o)}else{const u=s.getUniqueKey(n.colId,n.field),h=LS(e,n,u);c=new Rl(h,n,u,t),e.context.createBean(c)}return e.dataTypeSvc?.addColumnListeners(c),c}function cL(e,t,n,i,s,o,r,c){const{sortSvc:u,pinnedCols:h,colFlex:f}=e;n!==void 0&&t.setVisible(!n,c),u&&(u.updateColSort(t,i,c),s!==void 0&&u.setColSortIndex(t,s)),o!==void 0&&h?.setColPinned(t,o),r!==void 0&&f?.setColFlex(t,r)}function z7(e,t,n,i){cL(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);const s=t.getFlex();if(!(s!=null&&s>0))if(n.width!=null)t.setActualWidth(n.width,i);else{const o=t.getActualWidth();t.setActualWidth(o,i)}}function U7(e,t){if(t)for(let n=0;n<t.length;n++){const i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}function LS(e,t,n,i){const{gos:s,dataTypeSvc:o}=e,r={},c=s.get("defaultColDef");li(r,c,!1,!0);const u=W7(e,r,t,n);u&&j7(e,u,r);const h=r.cellDataType;li(r,t,!1,!0),h!==void 0&&(r.cellDataType=h);const f=s.get("autoGroupColumnDef"),p=Os(s);return t.rowGroup&&f&&p&&li(r,{sort:f.sort,initialSort:f.initialSort},!1,!0),o&&(o.postProcess(r),o.validateColDef(r)),s.validateColDef(r,n,i),r}function W7(e,t,n,i){const s=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,i),o=n.type??s??t.type;return t.type=o,o?om(o):void 0}function j7(e,t,n){if(!t.length)return;const i=Object.assign({},_7),s=e.gos.get("columnTypes")||{};for(const o of Object.keys(s)){const r=s[o];o in i?ge(34,{key:o}):(r.type&&ge(35),i[o]=r)}t.forEach(o=>{const r=i[o.trim()];r?li(n,r,!1,!0):ge(36,{t:o})})}function $7(e){return e.children!==void 0}function ko(e,t,n){if(t)for(let i=0;i<t.length;i++){const s=t[i];Qn(s)&&ko(s,s.getChildren(),n),n(s,e)}}function uL(e,t){const n=[],i=[],s=[];return e.forEach(r=>{const c=r.getColDef().lockPosition;c==="right"?s.push(r):c==="left"||c===!0?n.push(r):i.push(r)}),t.get("enableRtl")?[...s,...i,...n]:[...n,...i,...s]}function dL(e,t){let n=!0;return ko(null,t,i=>{if(!Qn(i))return;const s=i,o=s.getColGroupDef();if(!(o&&o.marryChildren))return;const c=[];s.getLeafColumns().forEach(m=>{const w=e.indexOf(m);c.push(w)});const u=Math.max.apply(Math,c),h=Math.min.apply(Math,c),f=u-h,p=s.getLeafColumns().length-1;f>p&&(n=!1)}),n}function hL(e,t){if(!e||e.length==0)return;const n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}function fL(e,t,n){if(!t.length)return;const i=t.length===1?t[0]:null,s=hL(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:s??null,columns:t,column:i,source:n})}function q7(e,t,n){if(!t.length)return;const i=t.length===1?t[0]:null,s=hL(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:s,columns:t,column:i,source:n})}function K7(e,t,n,i){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function lu(e,t,n,i,s=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:n,source:i})}function fs(e,t,n){const{colModel:i,rowGroupColsSvc:s,pivotColsSvc:o,autoColSvc:r,selectionColSvc:c,colAnimation:u,visibleCols:h,pivotResultCols:f,environment:p,valueColsSvc:m,eventSvc:w,gos:S}=e,E=i.getColDefCols()??[],x=c?.getColumns();if(!E?.length&&!x?.length)return!1;if(t?.state&&!t.state.forEach)return ge(32),!1;const P=(z,W,_,F,k)=>{if(!z)return;const O=N7(W,t.defaultState),N=O("flex").value1;if(cL(e,z,O("hide").value1,O("sort").value1,O("sortIndex").value1,O("pinned").value1,N,n),N==null){const H=O("width").value1;if(H!=null){const V=z.getColDef().minWidth??p.getDefaultColumnMinWidth();V!=null&&H>=V&&z.setActualWidth(H,n)}}k||!z.isPrimary()||(m?.syncColumnWithState(z,n,O),s?.syncColumnWithState(z,n,O,_),o?.syncColumnWithState(z,n,O,F))},M=(z,W,_)=>{const F=gL(e,n),k=W.slice(),O={},N={},H=[],V=[],ve=[];let pe=0;const q=s?.columns.slice()??[],ie=o?.columns.slice()??[];z.forEach(G=>{const Z=G.colId;if(Z.startsWith(Xm)){H.push(G),ve.push(G);return}if(Jr(Z)){V.push(G),ve.push(G);return}const te=_(Z);te?(P(te,G,O,N,!1),is(k,te)):(ve.push(G),pe+=1)});const se=G=>P(G,null,O,N,!1);k.forEach(se),s?.sortColumns(BF.bind(s,O,q)),o?.sortColumns(BF.bind(o,N,ie)),i.refreshCols(!1);const be=(G,Z,le=[])=>{Z.forEach(te=>{const me=G(te.colId);is(le,me),P(me,te,null,null,!0)}),le.forEach(se)};return be(G=>r?.getColumn(G)??null,H,r?.getColumns()?.slice()),be(G=>c?.getColumn(G)??null,V,c?.getColumns()?.slice()),Q7(t,i,S),h.refresh(n),w.dispatchEvent({type:"columnEverythingChanged",source:n}),F(),{unmatchedAndAutoStates:ve,unmatchedCount:pe}};u?.start();let{unmatchedAndAutoStates:I,unmatchedCount:U}=M(t.state||[],E,z=>i.getColDefCol(z));if(I.length>0||Ce(t.defaultState)){const z=f?.getPivotResultCols()?.list??[];U=M(I,z,W=>f?.getPivotResultCol(W)??null).unmatchedCount}return u?.finish(),U===0}function Y7(e,t){const{colModel:n,autoColSvc:i,selectionColSvc:s,eventSvc:o,gos:r}=e,c=n.getColDefCols();if(!c?.length)return;const u=n.getColDefColTree(),h=rL(u),f=[];let p=1e3,m=1e3;const w=M=>{const I=pL(M);Nt(I.rowGroupIndex)&&I.rowGroup&&(I.rowGroupIndex=p++),Nt(I.pivotIndex)&&I.pivot&&(I.pivotIndex=m++),f.push(I)};i?.getColumns()?.forEach(w),s?.getColumns()?.forEach(w),h?.forEach(w),fs(e,{state:f},t);const S=i?.getColumns()??[],P=[...s?.getColumns()??[],...S,...c].map(M=>({colId:M.colId}));fs(e,{state:P,applyOrder:!0},t),o.dispatchEvent(Me(r,{type:"columnsReset",source:t}))}function gL(e,t){const{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:s,colModel:o,sortSvc:r,eventSvc:c}=e,u={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:s?.columns.slice()??[]},h=rm(e),f={};return h.forEach(p=>{f[p.colId]=p}),()=>{const p=(W,_,F,k)=>{const O=_.map(k),N=F.map(k);if(El(O,N))return;const V=new Set(_);F.forEach(pe=>{V.delete(pe)||V.add(pe)});const ve=[...V];c.dispatchEvent({type:W,columns:ve,column:ve.length===1?ve[0]:null,source:t})},m=W=>{const _=[];return o.forAllCols(F=>{const k=f[F.getColId()];k&&W(k,F)&&_.push(F)}),_},w=W=>W.getColId();p("columnRowGroupChanged",u.rowGroupColumns,n?.columns??[],w),p("columnPivotChanged",u.pivotColumns,i?.columns??[],w);const E=m((W,_)=>{const F=W.aggFunc!=null,k=F!=_.isValueActive(),O=F&&W.aggFunc!=_.getAggFunc();return k||O});E.length>0&&K7(c,"columnValueChanged",E,t),lu(c,m((W,_)=>W.width!=_.getActualWidth()),!0,t),fL(c,m((W,_)=>W.pinned!=_.getPinned()),t),q7(c,m((W,_)=>W.hide==_.isVisible()),t);const U=m((W,_)=>W.sort!=_.getSort()||W.sortIndex!=_.getSortIndex());U.length>0&&r?.dispatchSortChangedEvents(t,U);const z=rm(e);Z7(h,z,t,o,c)}}function rm(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:i}=e,s=t.getColDefCols();if(Nt(s)||!t.isAlive())return[];const o=n?.columns,r=i?.columns,c=[],u=f=>{const p=f.isRowGroupActive()&&o?o.indexOf(f):null,m=f.isPivotActive()&&r?r.indexOf(f):null,w=f.isValueActive()?f.getAggFunc():null,S=f.getSort()!=null?f.getSort():null,E=f.getSortIndex()!=null?f.getSortIndex():null;c.push({colId:f.getColId(),width:f.getActualWidth(),hide:!f.isVisible(),pinned:f.getPinned(),sort:S,sortIndex:E,aggFunc:w,rowGroup:f.isRowGroupActive(),rowGroupIndex:p,pivot:f.isPivotActive(),pivotIndex:m,flex:f.getFlex()??null})};t.forAllCols(f=>u(f));const h=new Map(t.getCols().map((f,p)=>[f.getColId(),p]));return c.sort((f,p)=>{const m=h.has(f.colId)?h.get(f.colId):-1,w=h.has(p.colId)?h.get(p.colId):-1;return m-w}),c}function pL(e){const t=(S,E)=>S??E??null,n=e.getColDef(),i=t(n.sort,n.initialSort),s=t(n.sortIndex,n.initialSortIndex),o=t(n.hide,n.initialHide),r=t(n.pinned,n.initialPinned),c=t(n.width,n.initialWidth),u=t(n.flex,n.initialFlex);let h=t(n.rowGroupIndex,n.initialRowGroupIndex),f=t(n.rowGroup,n.initialRowGroup);h==null&&(f==null||f==!1)&&(h=null,f=null);let p=t(n.pivotIndex,n.initialPivotIndex),m=t(n.pivot,n.initialPivot);p==null&&(m==null||m==!1)&&(p=null,m=null);const w=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:o,pinned:r,width:c,flex:u,rowGroup:f,rowGroupIndex:h,pivot:m,pivotIndex:p,aggFunc:w}}function Q7(e,t,n){if(!e.applyOrder||!e.state)return;const i=[];e.state.forEach(s=>{s.colId!=null&&i.push(s.colId)}),X7(t.cols,i,t,n)}function X7(e,t,n,i){if(e==null)return;let s=[];const o={};t.forEach(c=>{if(o[c])return;const u=e.map[c];u&&(s.push(u),o[c]=!0)});let r=0;if(e.list.forEach(c=>{const u=c.getColId();if(o[u]!=null)return;u.startsWith(Xm)?s.splice(r++,0,c):s.push(c)}),s=uL(s,i),!dL(s,n.getColTree())){ge(39);return}e.list=s}function Z7(e,t,n,i,s){const o={};t.forEach(f=>o[f.colId]=f);const r={};e.forEach(f=>{o[f.colId]&&(r[f.colId]=!0)});const c=e.filter(f=>r[f.colId]),u=t.filter(f=>r[f.colId]),h=[];u.forEach((f,p)=>{const m=c&&c[p];if(m&&m.colId!==f.colId){const w=i.getCol(m.colId);w&&h.push(w)}}),h.length&&s.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,finished:!0,source:n})}var BF=(e,t,n,i)=>{const s=e[n.getId()],o=e[i.getId()],r=s!=null,c=o!=null;if(r&&c)return s-o;if(r)return-1;if(c)return 1;const u=t.indexOf(n),h=t.indexOf(i),f=u>=0,p=h>=0;return f&&p?u-h:f?-1:1},J7=class extends re{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(jc(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),jc(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:s,pivotColsSvc:o,valueColsSvc:r,visibleCols:c,eventSvc:u}=t,h=this.colDefs?gL(t,e):void 0;n?.expire();const f=this.colDefCols?.list,p=this.colDefCols?.tree,m=B7(t,this.colDefs,!0,p,e);sm(t,this.colDefCols?.tree,m.columnTree);const w=m.columnTree,S=m.treeDepth,E=rL(w),x={};E.forEach(P=>x[P.getId()]=P),this.colDefCols={tree:w,treeDepth:S,list:E,map:x},s?.extractCols(e,f),o?.extractCols(e,f),r?.extractCols(e,f),this.ready=!0,this.refreshCols(!0),c.refresh(e),u.dispatchEvent({type:"columnEverythingChanged",source:e}),h&&(this.changeEventsDispatching=!0,h(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:i,rowNumbersSvc:s,quickFilter:o,pivotResultCols:r,showRowGroupCols:c,rowAutoHeight:u,visibleCols:h,colViewport:f,eventSvc:p}=this.beans,m=this.selectCols(r,this.colDefCols);this.createColumnsForService([n,i,s],m);const w=r7(this.gos,this.showingPivotResult);(!e||w)&&this.restoreColOrder(m),this.positionLockedCols(m),c?.refresh(),o?.refreshCols(),this.setColSpanActive(),u?.setAutoHeightActive(m),h.clear(),f.clear(),!El(t,this.cols.tree)&&p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const n of e)n&&(n.createColumns(t,i=>{this.lastOrder=i(this.lastOrder),this.lastPivotOrder=i(this.lastPivotOrder)}),n.addColumns(t))}selectCols(e,t){const n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;const{map:i,list:s,tree:o,treeDepth:r}=n??t;return this.cols={list:s.slice(),map:{...i},tree:o.slice(),treeDepth:r},n&&(n.list.some(u=>this.cols?.map[u.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:n}=this.beans,i=this.isPivotMode()&&!this.showingPivotResult,s=t?.isSelectionColumnEnabled(),o=n.get("rowNumbers"),r=e?.columns;return this.cols.list.filter(u=>{const h=zR(u);if(i){const f=r?.includes(u);return h||f||s&&Jr(u)||o&&Or(u)}else return h||u.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){fs(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=t.filter(p=>e.map[p.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}const i=p=>{const m=p.getOriginalParent();return m?m.getChildren().length>1?!0:i(m):!1};if(!n.some(p=>i(p))){const p=new Set(n);for(const m of e.list)p.has(m)||n.push(m);e.list=n;return}const s=new Map;for(let p=0;p<n.length;p++){const m=n[p];s.set(m,p)}const o=e.list.filter(p=>!s.has(p));if(o.length===0){e.list=n;return}const r=(p,m)=>{const w=m?m.getOriginalParent():p.getOriginalParent();if(!w)return null;let S=null,E=null;for(const x of w.getChildren())if(!(x===m||x===p)){if(x instanceof Rl){const P=s.get(x);if(P==null)continue;(S==null||S<P)&&(S=P,E=x);continue}x.forEachLeafColumn(P=>{const M=s.get(P);M!=null&&(S==null||S<M)&&(S=M,E=P)})}return E??r(p,w)},c=[],u=new Map;for(const p of o){const m=r(p,null);if(m==null){c.push(p);continue}const w=u.get(m);w===void 0?u.set(m,p):Array.isArray(w)?w.push(p):u.set(m,[w,p])}const h=new Array(e.list.length);let f=h.length-1;for(let p=c.length-1;p>=0;p--)h[f--]=c[p];for(let p=n.length-1;p>=0;p--){const m=n[p],w=u.get(m);if(w)if(Array.isArray(w))for(let S=w.length-1;S>=0;S--){const E=w[S];h[f--]=E}else h[f--]=w;h[f--]=m}e.list=h}positionLockedCols(e){e.list=uL(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);const{visibleCols:n,eventSvc:i}=this.beans;n.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=jc(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){sm(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){const{pivotResultCols:t,autoColSvc:n,selectionColSvc:i}=this.beans;Ug(this.colDefCols?.list,e),Ug(n?.columns?.list,e),Ug(i?.columns?.list,e),Ug(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;const{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let s=0;s<i.length;s++)if(aL(i[s],e))return i[s];return this.beans.autoColSvc?.getColumn(e)??this.beans.selectionColSvc?.getColumn(e)??null}},mL=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},Tu=class extends re{};function of(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var rf=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.toggleCss(s,t));return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},e8=0,Ae=null,Ft=class extends re{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=e8++,this.cssManager=new rf(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach(t=>this.beans.environment.addGlobalCSS(t,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(Lk):null}applyElementsToComponent(e,t,n,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const s=this[t];if(s===Ae)this[t]=i??e;else{const o=n&&n[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(e,t){const n=[];for(const i of e.childNodes??[])n.push(i);n.forEach(i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,o=>{const r=o.getGui();if(r)for(const c of i.attributes??[])r.setAttribute(c.name,c.value)},t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const o=Array.prototype.slice.call(i.children);s.addItems(o)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)})}createComponentFromElement(e,t,n){const i=e.nodeName,s=this.getDataRefAttribute(e),o=i.indexOf("AG-")===0,r=o?this.componentSelectors.get(i):null;let c=null;if(r){const u=n&&s?n[s]:void 0;c=new r.component(u),c.setParentComponent(this),this.createBean(c,null,t)}else if(o)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,s,n,c),c}swapComponentForNode(e,t,n){const i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(n=>n.setAttribute("tabindex",t.toString()))}setTemplate(e,t,n){let i;typeof e=="string"||e==null?i=OR(e):i=an(e),this.setTemplateFromElement(i,t,n)}setTemplateFromElement(e,t,n,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let s=0;s<t.length;s++){const o=t[s];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),NR(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){const{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(e,t){const{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;Y9(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:n}=t;Wt(this.eGui,e,{skipAriaHidden:n});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}};function CL(e){return typeof e=="object"&&!!e.component}var it=class qd{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new qd(n=>{let i=t.length;const s=new Array(i);t.forEach((o,r)=>{o.then(c=>{s[r]=c,i--,i===0&&n(s)})})}):qd.resolve()}static resolve(t=null){return new qd(n=>n(t))}then(t){return new qd(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}};function t8(e){return e?e.prototype&&"getGui"in e.prototype:!1}function vL(e,t,n,i){const{name:s}=n;let o,r,c,u,h,f;if(t){const p=t,m=p[s+"Selector"],w=m?m(i):null,S=E=>{typeof E=="string"?o=E:E!=null&&E!==!0&&(e.isFrameworkComponent(E)?c=E:r=E)};w?(S(w.component),u=w.params,h=w.popup,f=w.popupPosition):S(p[s])}return{compName:o,jsComp:r,fwComp:c,paramsFromSelector:u,popupFromSelector:h,popupPositionFromSelector:f}}var n8=class extends re{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,i=!1){return this.getCompDetails(this.gridOptions,e,t,n,i)}getCompDetails(e,t,n,i,s=!1){const{name:o,cellRenderer:r}=t;let{compName:c,jsComp:u,fwComp:h,paramsFromSelector:f,popupFromSelector:p,popupPositionFromSelector:m}=vL(this.beans.frameworkOverrides,e,t,i),w,S;const E=I=>{const U=this.registry.getUserComponent(o,I);U&&(u=U.componentFromFramework?void 0:U.component,h=U.componentFromFramework?U.component:void 0,w=U.params,S=U.processParams)};if(c!=null&&E(c),u==null&&h==null&&n!=null&&E(n),u&&r&&!t8(u)&&(u=this.agCompUtils?.adaptFunction(t,u)),!u&&!h){const{validation:I}=this.beans;s&&(c!==n||!n)?c?I?.isProvidedUserComp(c)||vt(50,{compName:c}):n?I||vt(260,{...this.gos.getModuleErrorParams(),propName:o,compName:n}):vt(216,{name:o}):n&&!I&&vt(146,{comp:n});return}const x=this.mergeParams(e,t,i,f,w,S),P=u==null,M=u??h;return{componentFromFramework:P,componentClass:M,params:x,type:t,popupFromSelector:p,popupPositionFromSelector:m,newAgStackInstance:()=>this.newAgStackInstance(M,P,x,t)}}newAgStackInstance(e,t,n,i){const s=!t;let o;s?o=new e:o=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(o);const r=o.init?.(n);return r==null?it.resolve(o):r.then(()=>o)}mergeParams(e,t,n,i=null,s,o){const r={...n,...s},c=e,u=c&&c[t.name+"Params"];if(typeof u=="function"){const h=u(n);li(r,h)}else typeof u=="object"&&li(r,u);return li(r,i),o?o(r):r}},i8={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},s8={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},o8={name:"headerComponent",optionalMethods:["refresh"]},r8={name:"innerHeaderComponent"},a8={name:"innerHeaderGroupComponent"},l8={name:"headerGroupComponent"},c8={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},u8={name:"loadingCellRenderer",cellRenderer:!0},d8={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},h8={name:"loadingOverlayComponent",optionalMethods:["refresh"]},f8={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},g8={name:"tooltipComponent"},UR={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},p8={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},m8={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},C8={name:"loadingCellRenderer",cellRenderer:!0},v8={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},y8={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function w8(e,t){return e.getCompDetailsFromGridOptions(s8,"agDragAndDropImage",t,!0)}function S8(e,t,n){return e.getCompDetails(t,o8,"agColumnHeader",n)}function b8(e,t,n){return e.getCompDetails(t,r8,void 0,n)}function R8(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,l8,"agColumnGroupHeader",t)}function E8(e,t,n){return e.getCompDetails(t,a8,void 0,n)}function T8(e,t){return e.getCompDetailsFromGridOptions(m8,void 0,t,!0)}function x8(e,t){return e.getCompDetailsFromGridOptions(C8,"agLoadingCellRenderer",t,!0)}function D8(e,t){return e.getCompDetailsFromGridOptions(v8,"agGroupRowRenderer",t,!0)}function A8(e,t){return e.getCompDetailsFromGridOptions(y8,"agDetailCellRenderer",t,!0)}function GF(e,t,n){return e.getCompDetails(t,c8,void 0,n)}function HF(e,t,n){return e.getCompDetails(t,u8,"agSkeletonCellRenderer",n,!0)}function yL(e,t,n){return e.getCompDetails(t,d8,"agCellEditor",n,!0)}function F8(e,t,n,i){const s=t.filter;return CL(s)&&(t={filter:s.component,filterParams:t.filterParams}),e.getCompDetails(t,UR,i,n,!0)}function P8(e,t,n){return e.getCompDetails(t,i8,"agDateInput",n,!0)}function M8(e,t){return e.getCompDetailsFromGridOptions(h8,"agLoadingOverlay",t,!0)}function I8(e,t){return e.getCompDetailsFromGridOptions(f8,"agNoRowsOverlay",t,!0)}function _8(e,t){return e.getCompDetails(t.colDef,g8,"agTooltipComponent",t,!0)}function k8(e,t,n,i){return e.getCompDetails(t,p8,i,n)}function wL(e,t){return vL(e,t,UR)}function tw(e,t,n){return e.mergeParams(t,UR,n)}function kh(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var SL=new Set,am={},il={},mp,bL=!1,RL=!1,L8=!1;function O8(e){const[t,n]=e.version.split(".")||[],[i,s]=mp.split(".")||[];return t===i&&n===s}function V8(e){mp||(mp=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(e.version?O8(e)||Hc(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${mp}.`)):Hc(t(`'${e.moduleName}' is incompatible.`)),e.validate){const n=e.validate();n.isValid||Hc(`${n.message}`)}}function Lh(e,t,n=!1){n||(bL=!0),V8(e);const i=e.rowModels??["all"];SL.add(e);let s;t!==void 0?(RL=!0,il[t]===void 0&&(il[t]={}),s=il[t]):s=am,i.forEach(o=>{s[o]===void 0&&(s[o]={}),s[o][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(o=>Lh(o,t,n))}function N8(e){delete il[e]}function OS(e,t,n){const i=s=>!!am[s]?.[e]||!!il[t]?.[s]?.[e];return i(n)||i("all")}function WR(){return RL}function B8(e,t){const n=il[e]??{};return[...Object.values(am.all??{}),...Object.values(n.all??{}),...Object.values(am[t]??{}),...Object.values(n[t]??{})]}function G8(){return new Set(SL)}function H8(e,t){const n=il[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function z8(){return bL}function U8(){return L8}var W8=class{static register(e){Lh(e,void 0)}static registerModules(e){e.forEach(t=>Lh(t,void 0))}},j8=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];e.beanClasses.forEach(t=>{const n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{const{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}};function $8(e){return typeof e=="object"&&!!e.getComp}var q8=class extends j8{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){super.destroy(),N8(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}},K8=class extends re{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new EL,this.rowValidations=new TL,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){const i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(this.edits.size===0)return e.data;const n=this.getEditRow(e),i=e.pinnedSibling,s=t&&i&&this.getEditRow(i);if(!n&&!s)return e.data;const o=Object.assign({},e.data),r=(c,u)=>c.forEach(({pendingValue:h},f)=>{h!==ss&&(u[f.getColId()]=h)});return n&&r(n,o),s&&r(s,o),o}getEdit(e,t){const n=this._getEdit(e);return t&&n?{...n}:n}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((n,i)=>t.set(i,new Map(n))),t}setEditMap(e){this.edits.clear(),e.forEach((t,n)=>{const i=new Map;t.forEach((s,o)=>i.set(o,{...s})),this.edits.set(n,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const n={...this._getEdit(e),...t};return this.getEditRow(e.rowNode).set(e.column,n),n}clearEditValue(e){const{rowNode:t,column:n}=e;if(t)if(n){const i=this._getEdit(e);i&&(i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed")}else this.getEditRow(t)?.forEach(i=>{i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((n,i)=>{for(const s of n.keys())t.push({rowNode:i,column:s,...n.get(s)})}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:n,column:i}=e,{withOpenEditor:s}=t;if(n){const o=this.getEditRow(n,t);return o?i?s?this.getEdit(e)?.state==="editing":o.has(i)??!1:o.size!==0?s?Array.from(o.values()).some(({state:r})=>r==="editing"):!0:!1:!1}return s?this.getEditPositions().some(({state:o})=>o==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:ss,sourceValue:this.beans.valueSvc.getValue(i,n,!0,"api"),state:"editing"}),this.edits.set(n,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},EL=class{constructor(){this.cellValidations=new Map}getCellValidation(e){const{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e||!e.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:n,column:i}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,t)}clearCellValidation(e){const{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},TL=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return!e||!e.rowNode?this.rowValidations.size>0:!!this.getRowValidation(e)}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function Y8(e){const{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}function xL(e,t){const n=e.column===t.column,i=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return n&&i&&s}function Q8(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Ce(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function X8(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function Z8(e){let t=0,n;const{pinnedRowModel:i,rowModel:s,pageBounds:o}=e;return i?.getPinnedTopRowCount()?n="top":s.getRowCount()?(n=null,t=o.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function J8(e){let t,n=null;const{pinnedRowModel:i,pageBounds:s}=e,o=i?.getPinnedBottomRowCount(),r=i?.getPinnedTopRowCount();return o?(n="bottom",t=o-1):e.rowModel.getRowCount()?(n=null,t=s.getLastRow()):r&&(n="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function Wo(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Kd(e,t){const n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;const i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function e$(e,t,n){const{rowModel:i,pinnedRowModel:s}=e;let o;return o??(o=i?.getRowNode(t)),n?o??(o=s?.getPinnedRowById(t,n)):(o??(o=s?.getPinnedRowById(t,"top")),o??(o=s?.getPinnedRowById(t,"bottom"))),o}function lm(e,t){const{rowIndex:n,rowPinned:i}=t,{pageBounds:s,pinnedRowModel:o,rowModel:r}=e;if(n===0)return i==="top"?null:i==="bottom"&&r.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:o?.isRowsToRender("top")?{rowIndex:o.getPinnedTopRowCount()-1,rowPinned:"top"}:null;const c=i?void 0:r.getRow(n);return DL(e,c,!0)??{rowIndex:n-1,rowPinned:i}}function zF(e,t){const{rowIndex:n,rowPinned:i}=t,{pageBounds:s,pinnedRowModel:o,rowModel:r}=e;if(t$(e,t))return i==="bottom"?null:i==="top"&&r.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:o?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;const c=i?void 0:r.getRow(n);return DL(e,c)??{rowIndex:n+1,rowPinned:i}}function DL(e,t,n=!1){const{gos:i,rowRenderer:s}=e;if(!t?.sticky||!$k(i))return;const o=s.getStickyTopRowCtrls(),r=s.getStickyBottomRowCtrls(),c=!r.some(p=>p.rowNode.rowIndex===t.rowIndex),u=c?o:r,h=(n?-1:1)*(c?-1:1);let f;for(let p=0;p<u.length;p++)if(u[p].rowNode.rowIndex===t.rowIndex){f=u[p+h];break}return f?{rowIndex:f.rowNode.rowIndex,rowPinned:null}:void 0}function t$(e,t){const{rowPinned:n,rowIndex:i}=t,{pinnedRowModel:s,pageBounds:o}=e;return n==="top"?(s?.getPinnedTopRowCount()??0)-1<=i:n==="bottom"?(s?.getPinnedBottomRowCount()??0)-1<=i:o.getLastRow()<=i}function jR(e,t={}){const{rowIndex:n,rowId:i,rowCtrl:s,rowPinned:o}=t;if(s)return s;const{rowModel:r,rowRenderer:c}=e;let{rowNode:u}=t;return u||(i?u=e$(e,i,o):n!=null&&(u=r.getRow(n))),c.getRowCtrls(u?[u]:[])?.[0]}function Ot(e,t={}){const{cellCtrl:n,colId:i,columnId:s,column:o}=t;if(n)return n;const r=e.colModel.getCol(i??s??VS(o)),c=t.rowCtrl??jR(e,t),u=c?.getCellCtrl(r)??void 0;if(u)return u;const h=t.rowNode??c?.rowNode;if(h)return e.rowRenderer.getCellCtrls([h],[r])?.[0]}function UF(e){const{editSvc:t}=e;t?.isBatchEditing()?$c(e):t?.stopEditing(void 0,{source:"api"})}function n$(e,t,n){const{gos:i,popupSvc:s}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;const o=r=>{const c=r.relatedTarget;if(FS(c)===null){UF(t);return}let u=n.some(h=>h.contains(c))&&BL(i,c);u||(u=!!s&&(s.getActivePopups().some(h=>h.contains(c))||s.isElementWithinCustomPopup(c))),u||UF(t)};n.forEach(r=>e.addManagedElementListeners(r,{focusout:o}))}function VS(e){if(e)return typeof e=="string"?e:e.getColId()}var ss=Symbol("unedited");function AL(e,t={}){const n=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of i){const o=s.comp?.getCellEditor();o&&n.push({ctrl:s,editor:kh(o)})}return n}var i$=(e,t={})=>AL(e,t).map(n=>n.editor);function s$(e,t,n,i,s,o){t.length===0&&n?.rowNode&&n?.column&&cu(e,n,{key:i,event:s,cellStartedEdit:o});const{valueSvc:r,editSvc:c,editModelSvc:u}=e,{rowNode:h,column:f}=n??{};for(const p of t){const{rowNode:m,column:w}=p,S=Ot(e,p);if(!S){if(m&&w){const x=r.getValue(w,m,void 0,"api"),I=(n?.rowNode===m&&n?.column===w&&i||void 0)??c?.getCellDataValue(p,!1)??r.getValueForDisplay(w,m)?.value??x??ss;u?.setEdit(p,{pendingValue:I,sourceValue:x,state:"editing"})}continue}const E=o&&h===S.rowNode&&S.column===f;cu(e,{rowNode:h,column:S.column},{key:E?i:null,event:E?s:null,cellStartedEdit:E})}}function Vr({pendingValue:e,sourceValue:t}){return e===ss&&(e=t),e!==t}function cu(e,t,n){const{key:i,event:s,cellStartedEdit:o,silent:r}=n??{},c=Ot(e,t),u=c?.comp?.getCellEditor(),h=PL(e,t,i,o),f=e.editModelSvc?.getEdit(t);let p=i?.length===1?i:h.value;if(p===void 0&&(p=f?.sourceValue),e.editModelSvc?.setEdit(t,{editorValue:p,state:"editing"}),u){u.refresh?.(h);return}const m=t.column.getColDef(),w=yL(e.userCompFactory,m,h),S=w?.popupFromSelector!=null?w.popupFromSelector:!!m.cellEditorPopup,E=w?.popupPositionFromSelector!=null?w.popupPositionFromSelector:m.cellEditorPopupPosition;ML(w.params,s),c&&(c.editCompDetails=w,c.comp?.setEditDetails(w,S,E,e.gos.get("reactiveCustomComponents")),c?.rowCtrl?.refreshRow({suppressFlash:!0}),r||e.editSvc?.dispatchCellEvent(t,s,"cellEditingStarted"))}function FL(e){const t={editorValueExists:!1};return(e.getValidationErrors?.()?.length??0)>0?t:{editorValue:e.getValue(),editorValueExists:!0}}function PL(e,t,n,i){const{valueSvc:s,gos:o,editSvc:r}=e,c=Ot(e,t),u=t.rowNode?.rowIndex??void 0,h=r?.isBatchEditing(),f=e.colModel.getCol(t.column.getId()),{rowNode:p,column:m}=t,w=c.comp?.getCellEditor(),S=r?.getCellDataValue(t,!1)??(w?FL(w)?.editorValue:void 0),E=S===ss?s.getValueForDisplay(f,p)?.value:S;return Me(o,{value:E,eventKey:n??null,column:m,colDef:m.getColDef(),rowIndex:u,node:p,data:p.data,cellStartedEdit:i??!1,onKeyDown:c?.onKeyDown.bind(c),stopEditing:x=>{r.stopEditing(t,{source:h?"ui":"api",suppressNavigateAfterEdit:x}),cm(e,t)},eGridCell:c?.eGui,parseValue:x=>s.parseValue(f,p,x,c?.value),formatValue:c?.formatValue.bind(c),validate:()=>{r?.validateEdit()}})}function NS(e,t){const{editModelSvc:n}=e;n?.getEditMap().forEach((i,s)=>{i.forEach((o,r)=>{!t&&(o.state==="editing"||o.pendingValue===ss)||!Vr(o)&&(o.state!=="editing"||t)&&n?.removeEdits({rowNode:s,column:r})})})}function o$(e,t){const n=t.comp?.getCellEditor();if(!n?.refresh)return;const{eventKey:i,cellStartedEdit:s}=t.editCompDetails.params,{column:o}=t,r=PL(e,t,i,s),c=o.getColDef(),u=yL(e.userCompFactory,c,r);n.refresh(ML(u.params,i))}function ML(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function $a(e,t){e.editModelSvc?.getEditPositions().forEach(n=>{const i=Ot(e,n);if(!i)return;const s=i.comp.getCellEditor();if(!s)return;const{editorValue:o,editorValueExists:r}=FL(s);Cp(e,n,t,o,void 0,!r)})}function Cp(e,t,n,i,s,o){const{editModelSvc:r,valueSvc:c}=e;if(!r)return;const{rowNode:u,column:h}=t;if(!(u&&h))return;const p=!!Ot(e,t)?.comp?.getCellEditor();let m=r.getEdit(t,!0);m?.sourceValue||(m=r.setEdit(t,{sourceValue:c.getValue(h,u,void 0,"api"),pendingValue:ss,state:p?"editing":"changed"})),r.setEdit(t,{editorValue:o?m.sourceValue:i,state:p?"editing":"changed"}),n&&r$(e,t)}function r$(e,t){const{editModelSvc:n}=e,i=n?.getEdit(t,!0);n?.setEdit(t,{pendingValue:i?.editorValue})}function $c(e,t,n){t||(t=e.editModelSvc?.getEditPositions()),t.forEach(i=>cm(e,i,n))}function cm(e,t,n){const{editSvc:i,editModelSvc:s}=e,{rowNode:o,column:r}=t,c=Ot(e,t);if(!c){s?.hasEdits(t)&&o&&r&&s?.setEdit(t,{state:"changed"});return}const{comp:u}=c;if(u&&!u.getCellEditor())return;const h=u?.getCellEditor()?.getValidationErrors?.(),f=s?.getCellValidationModel();h?.length?f?.setCellValidation(t,{errorMessages:h}):f?.clearCellValidation(t),s?.getEdit(t)&&s?.setEdit(t,{state:"changed"}),u?.setEditDetails(),u?.refreshEditStyles(!1,!1),c?.refreshCell({force:!0,suppressFlash:!0});const p=s?.getEdit(t);p?.state==="changed"&&!n?.silent&&i?.dispatchCellEvent(t,n?.event,"cellEditingStopped",{valueChanged:Vr(p),newValue:p?.pendingValue,oldValue:p?.sourceValue})}function pl(e){const t=AL(e),n=new EL,{ariaAnnounce:i,localeSvc:s,editModelSvc:o,gos:r}=e,c=r.get("editType")==="fullRow",h=pk(s)("ariaValidationErrorPrefix","Cell Editor Validation");for(const p of t){const{ctrl:m,editor:w}=p,{rowNode:S,column:E}=m,x=w.getValidationErrors?.()??[],P=w.getValidationElement?.(!1)||!w.isPopup?.()&&m.eGui;if(P){const M=x!=null&&x.length>0,I=M?x.join(". "):"";k9(P,M),M&&i.announceValue(`${h} ${x}`,"editorValidation"),P instanceof HTMLInputElement?P.setCustomValidity(I):P.classList.toggle("invalid",M)}x?.length>0&&n.setCellValidation({rowNode:S,column:E},{errorMessages:x})}$a(e,!1),o?.setCellValidationModel(n);const f=new Set;for(const{ctrl:p}of t)f.add(p.rowCtrl);if(c){const p=a$(e);o?.setRowValidationModel(p)}for(const p of f.values()){p.rowEditStyleFeature?.applyRowStyles();for(const m of p.getAllCellCtrls())m.tooltipFeature?.refreshTooltip(!0),m.editorTooltipFeature?.refreshTooltip(!0),m.editStyleFeature?.applyCellStyles?.()}}var a$=e=>{const t=new TL,n=e.gos.get("getFullRowEditValidationErrors"),i=e.editModelSvc?.getEditMap();if(!i)return t;for(const s of i.keys()){const o=i.get(s);if(!o)continue;const r=[],{rowIndex:c,rowPinned:u}=s;for(const f of o.keys()){const p=o.get(f);if(!p)continue;const{editorValue:m,pendingValue:w,sourceValue:S}=p,E=m??(w===ss?void 0:w)??S;r.push({column:f,colId:f.getColId(),rowIndex:c,rowPinned:u,oldValue:S,newValue:E})}const h=n?.({editorsState:r})??[];h.length>0&&t.setRowValidation({rowNode:s},{errorMessages:h})}return t};function l$(e){pl(e);const t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;const n=[];return t.forEach((i,s)=>{i.forEach(({errorMessages:o},r)=>{n.push({column:r,rowIndex:s.rowIndex,rowPinned:s.rowPinned,messages:o??null})})}),n}var c$="ag-column-first",u$="ag-column-last";function IL(e,t,n,i){return Nt(e)?[]:h$(e.headerClass,e,t,n,i)}function _L(e,t,n){e.toggleCss(c$,n.isColAtEdge(t,"first")),e.toggleCss(u$,n.isColAtEdge(t,"last"))}function d$(e,t,n,i){return Me(t,{colDef:e,column:n,columnGroup:i})}function h$(e,t,n,i,s){if(Nt(e))return[];let o;if(typeof e=="function"){const r=d$(t,n,i,s);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function af(e){return!!(e.rowPinned&&e.pinnedSibling)}function Yi(e,t,n,i){const s=t==="top";if(!n)return Yi(e,t,s?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){const u=s?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return Yi(e,t,n,s?e.getPinnedTopRow(u-1):e.getPinnedBottomRow(u-1))}let o=!1,r=!1;const c=[];return e.forEachPinnedRow(t,u=>{if(u===n&&!o){o=!0,c.push(u);return}if(o&&u===i){r=!0,c.push(u);return}o&&!r&&c.push(u)}),c}var J={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},BS=!1,um=0;function f$(e){um>0||(e.addEventListener("keydown",dm),e.addEventListener("mousedown",dm))}function g$(e){um>0||(e.removeEventListener("keydown",dm),e.removeEventListener("mousedown",dm))}function dm(e){const t=BS,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(BS=n)}function p$(e){const t=_n(e);return f$(t),um++,()=>{um--,g$(t)}}function m$(){return BS}function C$(e,t,n){t.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===J.TAB){const s=i.shiftKey;Tl(e,n,!1,s)||uu(e,s)&&i.preventDefault()}}})}function qc(e,t,n=!1){const i=K9;let s=Fk;t&&(s+=", "+t),n&&(s+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(u=>Qs(u)),r=Array.prototype.slice.apply(e.querySelectorAll(s));return r.length?((u,h)=>u.filter(f=>h.indexOf(f)===-1))(o,r):o}function ml(e,t=!1,n=!1,i=!1){const s=qc(e,i?".ag-tab-guard":null,n),o=t?Ct(s):s[0];return o?(o.focus({preventScroll:!0}),!0):!1}function Tl(e,t,n,i){const s=qc(t,n?':not([tabindex="-1"])':null),o=qt(e);let r;n?r=s.findIndex(u=>u.contains(o)):r=s.indexOf(o);const c=r+(i?-1:1);return c<0||c>=s.length?null:s[c]}function kL(e,t=5){let n=0;for(;e&&FS(e)===null&&++n<=t;)e=e.parentElement;return FS(e)===null?null:e}function v$(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function sl(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()}function Zm(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()}function uu(e,t,n=!1){const i=e.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(t)?!0:((n||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function y$(e,t,n,{rowNode:i,column:s},o){return Me(e.gos,{type:n,node:i,data:i.data,value:o,column:s,colDef:s.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function w$(e,t=!1){return e===J.DELETE?!0:!t&&e===J.BACKSPACE?xk():!1}var S$=class extends re{constructor(e,t,n,i){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case J.ENTER:this.onEnterKeyDown(e);break;case J.F2:this.onF2KeyDown(e);break;case J.ESCAPE:this.onEscapeKeyDown(e);break;case J.TAB:this.onTabKeyDown(e);break;case J.BACKSPACE:case J.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case J.DOWN:case J.UP:case J.RIGHT:case J.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){const{cellCtrl:n,beans:i}=this;if(!i.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const s=n.getFocusedCellPosition();i.navigation?.navigateToNextCell(e,t,s,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const i=t.extendLatestRangeInDirection(e);i&&(e.key===J.LEFT||e.key===J.RIGHT?n?.ensureColumnVisible(i.column):n?.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:n,beans:i,rowNode:s}=this,{gos:o,rangeSvc:r,eventSvc:c,editSvc:u}=i;if(c.dispatchEvent({type:"keyShortcutChangedCellStart"}),w$(e,o.get("enableCellEditingOnBackspace"))&&!u?.isEditing(n,{withOpenEditor:!0})){if(r&&qr(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const{column:h}=n,f=this.beans.valueSvc.getDeleteValue(h,s);s.setDataValue(h,f,"cellClear")}}else u?.isEditing(n,{withOpenEditor:!0})||i.editSvc?.startEditing(n,{startedEdit:!0,event:t});c.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:n}=this,{editSvc:i,navigation:s}=n,o=i?.isEditing(t),r=t.rowNode,c=i?.isRowEditing(r),u=h=>{i?.startEditing(h,{startedEdit:!0,event:e})&&e.preventDefault()};if(o||c){if(this.isCtrlEnter(e)){i?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(pl(n),i?.checkNavWithValidation(void 0,e)==="block-stop")return;i?.isEditing(t,{withOpenEditor:!0})?i?.stopEditing(t,{event:e}):c&&!t.isCellEditable()?i?.stopEditing({rowNode:r},{event:e}):u(t)}else if(n.gos.get("enterNavigatesVertically")){const h=e.shiftKey?J.UP:J.DOWN;s?.navigateToNextCell(null,h,t.cellPosition,!1)}else{if(i?.hasValidationErrors())return;i?.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),u(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===J.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(pl(this.beans),n?.checkNavWithValidation(void 0,e)==="block-stop")||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)==="block-stop"&&n.revertSingleCellEdit(t),n?.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){const n=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:s}=this;if(n||i?.isEditing(s,{withOpenEditor:!0}))return;if(e.key===J.SPACE)this.onSpaceKeyDown(e);else if(i?.isCellEditable(s,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(s))return;i?.startEditing(s,{startedEdit:!0,event:e,source:"api"}),!s.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&tl(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,i,"spaceKey"),e.preventDefault()}};function LL(e,t,n){if(n===0)return!1;const i=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(i,s)<=n}function WF({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var b$=class extends re{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!_o(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:n,editSvc:i,editModelSvc:s,frameworkOverrides:o}=this.beans,r=e.ctrlKey||e.metaKey,{cellCtrl:c}=this,{column:u,cellPosition:h}=c;n&&r&&n.getCellRangeCount(h)>1&&n.intersectLastRange(!0);const f=c.createEvent(e,"cellClicked");t.dispatchEvent(f);const p=u.getColDef();if(p.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{p.onCellClicked(f)})},0),s?.getState(c)!=="editing"){const m=i?.isEditing(),w=s?.getCellValidationModel().getCellValidationMap().size??0,S=s?.getRowValidationModel().getRowValidationMap().size??0;if(m&&(w>0||S>0))return;i?.shouldStartEditing(c,e)?i?.startEditing(c,{event:e}):i?.shouldStopEditing(c,e)&&i?.stopEditing(c)}}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:i}=this,{eventSvc:s,frameworkOverrides:o,editSvc:r,editModelSvc:c}=n,u=t.getColDef(),h=i.createEvent(e,"cellDoubleClicked");if(s.dispatchEvent(h),typeof u.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{u.onCellDoubleClicked(h)})},0),r?.shouldStartEditing(this.cellCtrl,e)&&this.beans.editModelSvc?.getState(this.cellCtrl)!=="editing"){const f=r?.isEditing(),p=c?.getCellValidationModel().getCellValidationMap().size??0,m=c?.getRowValidationModel().getRowValidationMap().size??0;if(f&&(p>0||m>0))return;r?.startEditing(i,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:n,shiftKey:i}=e,s=e.target,{cellCtrl:o,beans:r}=this,{eventSvc:c,rangeSvc:u,rowNumbersSvc:h,focusSvc:f,gos:p,editSvc:m}=r;if(this.isRightClickInExistingRange(e))return;const w=u&&!u.isEmpty(),S=this.containsWidget(s),{cellPosition:E,column:x}=o,P=Or(x);if(h&&P&&!h.handleMouseDownOnCell(E,e)){u&&e.preventDefault(),e.stopImmediatePropagation();return}if(!i||!w){const M=m?.isEditing(o),U=p.get("enableCellTextSelection")&&e.defaultPrevented,z=(wl()||U)&&!M&&!kR(s)&&!S;o.focusCell(z,e)}if(i&&w&&!f.isCellFocused(E)){e.preventDefault();const M=f.getFocusedCell();if(M){const{column:I,rowIndex:U,rowPinned:z}=M;m?.isEditing(M)&&m?.stopEditing(M),f.setFocusedCell({column:I,rowIndex:U,rowPinned:z,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!S){if(u){P&&e.preventDefault();const M=WF(this.beans,e)&&P;if(i)u.extendLatestRangeToCell(E);else if(!M){const I=t||n;u.setRangeToCell(E,I)}}c.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=WF(this.beans,e);if(n&&i)return!0}return!1}containsWidget(e){return el(e,"ag-selection-checkbox",3)||el(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}},R$=class extends re{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();El(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),i=[];if(n===1)i.push(e);else{let s=e;const o=e.getPinned();for(let r=0;s&&r<n&&(i.push(s),s=this.beans.visibleCols.getColAfter(s),!(!s||Nt(s)||o!==s.getPinned()));r++);}return i}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Ct(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=t.bodyWidth;return n+i+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const n=nl(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},E$="ag-cell",T$="ag-cell-auto-height",x$="ag-cell-normal-height",D$="ag-cell-focus",A$="ag-cell-first-right-pinned",F$="ag-cell-last-left-pinned",P$="ag-cell-not-inline-editing",M$="ag-cell-wrap-text",hm="cellCtrl";function OL(e,t){return tL(e,t,hm)}var I$=0,Kc=class extends re{constructor(e,t,n,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:s}=e;this.instanceId=s+"-"+I$++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:e}=this;this.positionFeature=new R$(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this,e),this.mouseListener=new b$(this,e,this.column),this.keyboardListener=new S$(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&qr(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Or(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),pl(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,i,s,o,r){this.comp=e,this.eGui=t,this.printLayout=s,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()?this.editSvc?.startEditing(this,{startedEdit:!0,source:"api"}):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(c=>c()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:s}=e,o=t.getColDef(),r=this.createCellRendererParams();r.deferRender=!0;const c=HF(n,o,r);if(i.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let u;const h=new it(f=>{u=f});return this.addManagedListeners(s,{bodyScrollEnd:()=>u()}),{loadingComp:c,onReady:h}}return{loadingComp:c,onReady:it.resolve()}}showValue(e,t){const{beans:n,column:i,rowNode:s,rangeFeature:o}=this,{userCompFactory:r}=n;let c=this.getValueToDisplay(),u;const h=s.stub&&s.groupData?.[i.getId()]==null,f=i.getColDef();if(h||this.isCellRenderer()){const p=this.createCellRendererParams();!h||Or(i)?u=GF(r,f,p):u=HF(r,f,p)}if(!u&&!h&&n.findSvc?.isMatch(s,i)){const p=this.createCellRendererParams();u=GF(r,{...i.getColDef(),cellRenderer:"agFindCellRenderer"},p)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(s,{checkSiblings:!0})){const p=this.editSvc.prepDetailsDuringBatch(this,{compDetails:u,valueToDisplay:c});p&&(p.compDetails?u=p.compDetails:p.valueToDisplay&&(c=p.valueToDisplay))}this.comp.setRenderDetails(u,c,e),!t&&o&&qo(n,()=>o?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&af(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,i=Jp(t),s=Jr(this.column);return n==="custom"&&i!=="selectionColumn"&&s?!1:e.checkboxSelection||s&&typeof t=="object"&&Wc(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||s}onPopupEditorClosed(){const{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){const{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:i,comp:s,eGui:o,beans:{valueSvc:r,gos:c,editSvc:u}}=this;return Me(c,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(n,i).value,setValue:f=>u?.setDataValue({rowNode:i,column:n},f)||r.setValue(i,n,f),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:s.getParentOfValue(),registerRowDragger:(f,p,m,w)=>this.registerRowDragger(f,p,w),setTooltip:(f,p)=>{c.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(f,p),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell({force:e,suppressFlash:t,newData:n}={}){if(this.suppressRefreshCell)return;const i=this.column.getColDef(),s=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,o=e||s||n,r=!!this.comp,c=this.updateAndFormatValue(r),u=o||c;if(r){if(u){this.showValue(!!n,!1);const h=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!t&&!h&&i.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.editStyleFeature?.applyCellStyles?.(),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted,{value:i,valueFormatted:s}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=i,this.valueFormatted=s,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;fl(this.beans.gos,t,hm,this),e.addDestroyFunc(()=>fl(this.beans.gos,t,hm,null))}createEvent(e,t){const{rowNode:n,column:i,value:s,beans:o}=this;return y$(o,e,t,{rowNode:n,column:i},s)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;_L(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);Ek(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){const n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:n},comp:i}=this;if(!i||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;const s=()=>{if(!this.isAlive())return;const o=i.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(s,0);return}s()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Or(this.column)&&(e=!0),Pi(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(A$,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(F$,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){const{beans:t}=this;if(Zm(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const n=this.isCellFocused(),i=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(D$,n),n&&e&&e.forceBrowserFocus){let s=this.comp.getFocusableElement();if(i){const o=qc(s,null,!0);o.length&&(s=o[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Io(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(E$,!0),e.toggleCss(P$,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(T$,t),e.toggleCss(x$,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(M$,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(qt(this.beans))??!1}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}))}createRowDragComp(e,t,n){const i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},VL="__ag_grid_instance";function NL(e,t){t[VL]=e.gridInstanceId}function Oh(e,t){return BL(e,t.target)}function BL(e,t){let n=t;for(;n;){const i=n[VL];if(Ce(i))return i===e.gridInstanceId;n=n.parentElement}return!1}function _$(e,t){return OL(e,t.target)?.getFocusedCellPosition()??null}function jF(e,t){const n=Wn(e.gos,"normal"),i=t;let s,o;i.clientX!=null||i.clientY!=null?(s=i.clientX,o=i.clientY):(s=i.x,o=i.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(o+=r,n){const c=e.ctrlsSvc.getScrollFeature(),u=c.getVScrollPosition(),h=c.getHScrollPosition();s+=h.left,o+=u.top}return{x:s,y:o}}var k$=class extends re{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){const n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragSvc.addDragSource(n)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:n}=this,i=t.find(s=>s.dragSource===e);i&&(n.removeDragSource(i.params),is(t,i))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:n}=this;e.forEach(i=>t.removeDragSource(i.params)),e.length=0,n.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),e.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){this.dragSource?.onDragStopped?.();const{lastDropTarget:t}=this;if(t?.onDragStop){const n=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t}=this;e?.onDragCancelled?.(),t?.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){const n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const s=this.dropTargets.filter(f=>this.isMouseOnDropTarget(e,f)),o=this.findCurrentDropTarget(e,s),{lastDropTarget:r,dragSource:c,dragAndDropImageComp:u,dragItem:h}=this;if(o!==r){if(this.leaveLastTargetIfExists(e,n,i,t),r!==null&&o===null&&c?.onGridExit?.(h),r===null&&o!==null&&c?.onGridEnter?.(h),this.enterDragTargetIfExists(o,e,n,i,t),o&&u){const{comp:f,promise:p}=u;f?f.setIcon(o.getIconName?o.getIconName():null,!1):p.then(m=>{m&&m.setIcon(o.getIconName?o.getIconName():null,!1)})}this.lastDropTarget=o}else if(o&&o.onDragging){const f=this.createDropTargetEvent(o,e,n,i,t);o.onDragging(f)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let i=!1;const s=(c,u)=>{for(const h of u){const{width:f,height:p,left:m,right:w,top:S,bottom:E}=h.getBoundingClientRect();if(f===0||p===0)return!1;const x=c.clientX>=m&&c.clientX<w,P=c.clientY>=S&&c.clientY<E;if(!x||!P)return!1}return!0};for(const c of n)if(s(e,c)){i=!0;break}const{eElement:o,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:i&&t.isInterestedIn(r,o)}findCurrentDropTarget(e,t){const n=t.length;if(n===0)return null;if(n===1)return t[0];const s=Ih(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const r of t)if(this.getAllContainersFromDropTarget(r).flatMap(u=>u).indexOf(o)!==-1)return r;return null}enterDragTargetIfExists(e,t,n,i,s){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,n,i,s);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,n,i){const{lastDropTarget:s}=this;if(!s)return;if(s.onDragLeave){const r=this.createDropTargetEvent(s,e,t,n,i);s.onDragLeave(r)}const o=this.getDragAndDropImageComponent();o&&o.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const n=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return n.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime?.clientX,n=e.clientX;return t===n?null:t>n?"left":"right"}getVerticalDirection(e){const t=this.eventLastTime?.clientY,n=e.clientY;return t===n?null:t>n?"up":"down"}createDropTargetEvent(e,t,n,i,s){const o=e.getContainer(),r=o.getBoundingClientRect(),{dragItem:c,dragSource:u,gos:h}=this,f=t.clientX-r.left,p=t.clientY-r.top;return Me(h,{event:t,x:f,y:p,vDirection:i,hDirection:n,dragSource:u,fromNudge:s,dragItem:c,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&u7(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;if(e){const{comp:t}=e;if(t){const n=t.getGui();this.dragAndDropImageParent?.removeChild(n),this.destroyBean(t)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:n}=this;if(!e)return;const i=w8(n,Me(t,{dragSource:e}));if(!i)return;const s=i.newAgStackInstance();this.dragAndDropImageComp={promise:s},s.then(o=>{!o||!this.isAlive()||(this.processDragAndDropImageComponent(o),this.dragAndDropImageComp.comp=o)})}processDragAndDropImageComponent(e){const{dragSource:t,environment:n}=this;if(!t)return;const i=e.getGui();i.style.setProperty("position","absolute"),i.style.setProperty("z-index","9999"),NL(this.gos,i),n.applyThemeClasses(i),e.setIcon(null,!1);let{dragItemName:s}=t;typeof s=="function"&&(s=s()),e.setLabel(s||""),i.style.top="20px",i.style.left="20px";const o=HR(this.beans);this.dragAndDropImageParent=o,o?o.appendChild(i):ge(54)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}},L$=class extends re{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,n=t.find(i=>i.dragSource===e);n&&(this.removeListener(n),is(t,n))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:s}=e;n.addEventListener("mousedown",t);let o=null;const r=this.gos.get("suppressTouch");i&&!r&&(o=c=>{kR(c.target)||(s&&c.stopPropagation(),this.onTouchStart(e,c))},n.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!i})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const n=t.touches[0];this.touchLastTime=n,this.touchStart=n;const i=u=>this.onTouchMove(u,e.eElement),s=u=>this.onTouchUp(u,e.eElement),o=u=>{u.cancelable&&u.preventDefault()},r=t.target,c=[{target:Ih(this.beans),type:"touchmove",listener:o,options:{passive:!1}},{target:r,type:"touchmove",listener:i,options:{passive:!0}},{target:r,type:"touchend",listener:s,options:{passive:!0}},{target:r,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){const n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const i=h=>this.onMouseMove(h,e.eElement),s=h=>this.onMouseUp(h,e.eElement),o=h=>h.preventDefault(),r=h=>{h.key===J.ESCAPE&&this.cancelDrag(e.eElement)},c=Ih(this.beans),u=[{target:c,type:"mousemove",listener:i},{target:c,type:"mouseup",listener:s},{target:c,type:"contextmenu",listener:o},{target:c,type:"keydown",listener:r}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:n,type:i,listener:s,options:o}=t;n.addEventListener(i,s,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:n,type:i,listener:s,options:o}=t;n.removeEventListener(i,s,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:n}=this.currentDragParams,i=Ce(n)?n:4;return LL(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:n}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){wl()&&_n(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,n=t.get("enableCellTextSelection"),i=e.type==="mousemove",s=o=>!!o.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button");return n&&i&&e.cancelable&&Oh(t,e)&&!s(e)}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach(t=>t()),e.length=0}};function GL(e,t){return e+"_"+t}function on(e){return e instanceof Vh}var Vh=class extends re{constructor(e,t,n,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return GL(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{on(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Ct(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren?.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Kr(t)?e.push(t):on(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Kr(t)?e.push(t):on(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(on(n)&&!n.displayedChildren?.length)return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},GS="row-group-",$R="t-",qR="b-",O$=0,Cl=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=O$++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:n,eventSvc:i}=this.beans,s=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,s,t);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=e;const c=this.sibling.createDataChangedEvent(e,s,t);this.sibling.__localEventService?.dispatchEvent(c)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});const r=this.pinnedSibling;r&&(r.data=e,r.__localEventService?.dispatchEvent(r.createDataChangedEvent(e,s,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:r}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(vt(13),null):this.rowPinned==="top"?$R+this.rowIndex:this.rowPinned==="bottom"?qR+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:n}=this.beans,i=n?.createDaemonNode?.(this),s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));const o=this.createDataChangedEvent(e,s,!1);this.__localEventService?.dispatchEvent(o)}setId(e){const t=au(this.beans.gos);if(t)if(this.data){const n=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(GS)&&vt(14,{groupPrefix:GS})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){const{colModel:i,valueSvc:s,gos:o,editSvc:r}=this.beans,c=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!c)return!1;const u=s.getValueForDisplay(c,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:p},data:m,rowIndex:w,rowPinned:S}=this;return p.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:w,rowPinned:S,column:c,colDef:c.colDef,data:m,node:this,oldValue:u,newValue:t,value:t,source:n}),!1}if(r){const p=r.setDataValue({rowNode:this,column:c},t,n);if(p!=null)return p}const h=s.setValue(this,c,t,n);this.dispatchCellChangedEvent(c,t,u);const f=this.pinnedSibling;return f&&h&&f.dispatchCellChangedEvent(c,t,u),h}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){const i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(e){this.childrenAfterGroup?.forEach(t=>t.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new ul),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e),this.__localEventService||(this.__localEventService=new ul),this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);const n=this.frameworkEventListenerService?.wrap(e,t)??t;this.__localEventService.addEventListener(e,n)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){this.__localEventService?.removeEventListener(e,t),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(ge(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){return this.childStore?this.childStore.getFirstNode():this.childrenAfterSort?.[0]??null}};function V$(e,t,n){return Me(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var N$=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced","childStore"]);function B$(e,t){const n=new Cl(t);return Object.keys(e).forEach(i=>{N$.has(i)||(n[i]=e[i])}),n.oldRowTop=null,n}var HL={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},G$=new Set(Object.values(HL));function br(e,t){const n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;const i=n.create(n.refreshed),s=n;return s.created=!0,s.promise=i,i}function H$(e,t,n,i,s,o){return t.refresh?.({...n,model:i,source:o}),e().then(r=>{if(r){const{filter:c,filterParams:u}=r;zL(c,u,i,s,o)}})}function zL(e,t,n,i,s){e?.refresh?.({...t,model:n,state:i,source:s})}function UL(e,t,n){const i=e();i?.created&&i.promise.then(s=>{const o=t();zL(s,i.filterParams,o,n()??{model:o},"ui")})}function $F(e,t,n,i,s,o){let r,c=!1,u;switch(e){case"apply":{const h=i();u=h?.model??null,r={state:h?.state,model:u},c=!0;break}case"clear":{r={model:null};break}case"reset":{r={model:null},c=!0,u=null;break}case"cancel":{r={model:n()};break}}s(r),c?o(u):UL(t,n,i)}function Mn(e,t){return e[t]??null}function z$(e){return{tag:"div",cls:e}}var U$=class extends Ft{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(z$(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const n=this.buttons;if(this.buttons=e,n===e)return;const i=this.getGui();_i(i);let s;this.destroyListeners();const o=document.createDocumentFragment(),r=this.className,c=({type:h,label:f})=>{const p=P=>{this.dispatchLocalEvent({type:h,event:P})};["apply","clear","reset","cancel"].includes(h)||ge(75);const m=h==="apply",S=an({tag:"button",attrs:{type:m&&t?"submit":"button"},ref:`${h}FilterButton`,cls:`ag-button ag-standard-button ${r}-button${m?" "+r+"-apply-button":""}`,children:f});this.activateTabIndex([S]),m&&(s=S);const E=P=>{P.key===J.ENTER&&(P.preventDefault(),p(P))},x=this.listeners;S.addEventListener("click",p),x.push(()=>S.removeEventListener("click",p)),S.addEventListener("keydown",E),x.push(()=>S.removeEventListener("keydown",E)),o.append(S)};e.forEach(h=>c(h)),this.eApply=s;const u=this.validationTooltipFeature;s&&!u?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!s&&u&&(this.validationTooltipFeature=this.destroyBean(u)),i.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){const n=this.eApply;n&&(Ph(n,e===!1),this.validationMessage=t??null,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){this.listeners.forEach(e=>e()),this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},W$={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function Pr(e,t,n){return x9(e,W$,t,n)}function KR(e,t){const{debounceMs:n}=e;return Jm(e)?(n!=null&&ge(71),0):n??t}function Jm(e){return(e.buttons?.indexOf("apply")??-1)>=0}var j$=class extends Ft{constructor(e,t,n,i,s,o){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=i,this.isGlobalButtons=s,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,n=t,i=n.useForm,s=i?"form":"div";this.setTemplate({tag:s,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:r})=>{o===this.column&&this.resetButtonsPanel(r,this.params)},filterStateChanged:({column:o,state:r})=>{o===this.column&&this.eButtons?.updateValidity(r.valid!==!1)},filterAction:({column:o,action:r,event:c})=>{o===this.column&&this.afterAction(r,c)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const r=this.params;this.resetButtonsPanel(r,r,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){const{buttons:i,readOnly:s}=t??{},{buttons:o,readOnly:r,useForm:c}=e;if(!n&&s===r&&Ah(i,o))return;const u=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let h=this.eButtons;if(u){const f=o.map(p=>{const m=`${p}Filter`;return{type:p,label:Pr(this,m)}});if(this.applyActive=Jm(this.params),!h){h=this.createBean(new U$),this.appendChild(h.getGui());const p=this.column,m=w=>({event:S})=>{this.updateModel(p,w),this.afterAction(w,S)};h?.addManagedListeners(h,{apply:m("apply"),clear:m("clear"),reset:m("reset"),cancel:m("cancel")}),this.eButtons=h}h.updateButtons(f,c)}else this.applyActive=!1,h&&(Uo(h.getGui()),this.eButtons=this.destroyBean(h))}close(e){const t=this.hidePopup;if(!t)return;const n=e,i=n&&n.key;let s;(i===J.ENTER||i===J.SPACE)&&(s={keyboardEvent:n}),t(s),this.hidePopup=null}afterAction(e,t){const{params:n,applyActive:i}=this,s=n?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),s&&i&&this.close(t);break}case"reset":{s&&i&&this.close();break}case"cancel":{s&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===J.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply"),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},$$={tag:"div",cls:"ag-filter"},q$=class extends Ft{constructor(e,t,n){super($$),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??it.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:n,beans:{colFilter:i}}=this,s=i.getFilterUiForDisplay(t)??null;this.wrapper=s,s?.then(o=>{if(!o)return;const{isHandler:r,comp:c}=o;let u;if(r){const h=!!this.enableGlobalButtonCheck,f=this.createBean(new j$(t,o,i,i.updateModel.bind(i),h&&i.isGlobalButtons,h));this.comp=f,u=f.getGui()}else u=c.getGui(),Ce(u)||ge(69,{guiFromFilter:u});this.appendChild(u),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()}):c.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:n}=e;(t==="api"||t==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(_i(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},YR="T",K$=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${YR}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Vs(e,t){return e.toString().padStart(t,"0")}function Ii(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>Vs(s,2)).join(n);return t&&(i+=YR+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>Vs(s,2)).join(":")),i}function Wg(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Vs(e.getDate(),2),Vs(e.getHours(),2),`:${Vs(e.getMinutes(),2)}`,`:${Vs(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Vs(e.getDate(),2)].map(String):null}var nw=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function HS(e,t){if(t==null)return Ii(e,!1);const n=Vs(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>Vs(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${nw(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${nw(e.getDate())}`,DD:()=>Vs(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${nw(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(o).join("|"),"g");return t.replace(r,c=>c in o?o[c]():c)}function vp(e,t=!1){return!!wi(e,t)}function Y$(e){return!!e&&vp(e,!0)&&!!e.match(K$)?.[1]}function wi(e,t=!1){if(!e)return null;const[n,i]=e.split(YR);if(!n)return null;const s=n.split("-").map(m=>parseInt(m,10));if(s.filter(m=>!isNaN(m)).length!==3)return null;const[o,r,c]=s,u=new Date(o,r-1,c);if(u.getFullYear()!==o||u.getMonth()!==r-1||u.getDate()!==c)return null;if(!i||i==="00:00:00")return u;const[h,f,p]=i.split(":").map(m=>parseInt(m,10));if(h>=0&&h<24)u.setHours(h);else if(t)return null;if(f>=0&&f<60)u.setMinutes(f);else if(t)return null;if(p>=0&&p<60)u.setSeconds(p);else if(t)return null;return u}var qF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},KF=["january","february","march","april","may","june","july","august","september","october","november","december"];function Q$(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}function YF(e){return e instanceof Date&&!isNaN(e.getTime())}var zS={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:YF}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{const i=e.dateParser(n);return n==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&YF(e.dateParser(t))}),dateTime:e=>zS.date(e),dateTimeString:e=>zS.dateString(e),object:()=>{},text:()=>{}},US={number:()=>({comparator:Q$}),boolean:({t:e})=>({valueFormatter:t=>Ce(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:n=>{const i=e(n);return Ce(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,i)=>{if(n==="NaN")return t("invalidDate","Invalid Date");if(i===1&&n!=null){const s=KF[Number(n)-1];return t(s,qF[s])}return n??t("blanks","(Blanks)")},treeListPathGetter:n=>Wg(n,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:i=>{const s=e(i);return Ce(s)?s:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>Wg(t.dateParser(i??void 0),!1),treeListFormatter:(i,s)=>{if(s===1&&i!=null){const o=KF[Number(i)-1];return n(o,qF[o])}return i??n("blanks","(Blanks)")}}),dateTime:e=>{const t=US.date(e);return t.treeListPathGetter=Wg,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,n=US.dateString(e);return n.treeListPathGetter=i=>Wg(t(i??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{const i=e(n);return Ce(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function X$(e,t,n,i,s,o,r){let c=t,u=n;const h=e==="agSetColumnFilter";!u&&i.baseDataType==="object"&&!h&&(u=({column:w,node:S})=>s({column:w,node:S,value:o.valueSvc.getValue(w,S)}));const p=(h?US:zS)[i.baseDataType],m=p({dataTypeDefinition:i,formatValue:s,t:r});return c=typeof t=="object"?{...m,...t}:m,{filterParams:c,filterValueGetter:u}}var Z$={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},J$={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function eq(e,t=!1){return(t?J$:Z$)[e??"text"]}var WL="ag-resizer-wrapper",Rr=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),tq={tag:"div",cls:WL,children:[Rr("eTopLeft","topLeft"),Rr("eTop","top"),Rr("eTopRight","topRight"),Rr("eRight","right"),Rr("eBottomRight","bottomRight"),Rr("eBottom","bottom"),Rr("eBottomLeft","bottomLeft"),Rr("eLeft","left")]},nq=class extends re{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:n}=this.offsetParent,i=n/2-this.getWidth()/2,s=t/2-this.getHeight()/2;this.offsetElement(i,s,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:n,minWidth:i,width:s,minHeight:o,height:r,x:c,y:u}=this.config;this.offsetParent||this.setOffsetParent();let h=0,f=0;const p=Qs(this.element);if(p){const m=this.findBoundaryElement(),w=window.getComputedStyle(m);if(w.minWidth!=null){const S=m.offsetWidth-this.element.offsetWidth;f=parseInt(w.minWidth,10)-S}if(w.minHeight!=null){const S=m.offsetHeight-this.element.offsetHeight;h=parseInt(w.minHeight,10)-S}}if(this.minHeight=o||h,this.minWidth=i||f,s&&this.setWidth(s),r&&this.setHeight(r),(!s||!r)&&this.refreshSize(),t)this.center(e);else if(c||u)this.offsetElement(c,u,e);else if(p&&n){let m=this.boundaryEl,w=!0;if(m||(m=this.findBoundaryElement(),w=!1),m){const S=parseFloat(m.style.top),E=parseFloat(m.style.left);w?this.offsetElement(isNaN(E)?0:E,isNaN(S)?0:S,e):this.setPosition(E,S)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const i=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:r=>this.onResizeStart(r,t),onDragging:this.onResize.bind(this),onDragStop:r=>this.onResizeEnd(r,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,n=this.element;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)rh(n,e),e=Pk(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?rh(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,r=e?0:s.top;let c=0;if(t){const h=this.element.parentElement;if(h){const{bottom:f}=h.getBoundingClientRect();c=f-i.bottom}}return n+r-o-c}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:n}=this.config;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)$s(t,e),e=Kp(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,o=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?$s(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0,n){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupSvc?.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=$o(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:n,isTop:i,anywhereWithin:s,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,c=t.clientY-this.dragStartPosition.y,u=this.shouldSkipX(t,!!n,!!s,r)?0:r,h=this.shouldSkipY(t,!!i,o,c)?0:c;return{movementX:u,movementY:h}}shouldSkipX(e,t,n,i){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.x:s.left;let u=c<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return u?!0:(t?u=i<0&&e.clientX>c+o.left||i>0&&e.clientX<c+o.left:n?u=i<0&&e.clientX>r.right||i>0&&e.clientX<c+o.left:u=i<0&&e.clientX>r.right||i>0&&e.clientX<r.right,u)}shouldSkipY(e,t,n=0,i){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.y:s.top;let u=c<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return u?!0:(t?u=i<0&&e.clientY>c+o.top+n||i>0&&e.clientY<c+o.top:u=i<0&&e.clientY>r.bottom||i>0&&e.clientY<r.bottom,u)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(an(tq)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${WL}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,n=0;for(let i=0;i<e.length;i++){const s=e[i],o=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let r=this.minHeight||0,c=this.minWidth||0;if(o){const u=window.getComputedStyle(s);u.minHeight&&(r=parseInt(u.minHeight,10)),u.minWidth&&(c=parseInt(u.minWidth,10))}else r=s.offsetHeight,c=s.offsetWidth;t+=r,n+=c}return{height:t,width:n}}applySizeToSiblings(e){let t=null;const n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){const s=n[i];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:s,isBottom:o,isLeft:r}=this.currentResizer,c=s||r,u=o||i,{movementX:h,movementY:f}=this.calculateMouseMovement({e,isLeft:r,isTop:i}),p=this.position.x,m=this.position.y;let w=0,S=0;if(c&&h){const E=r?-1:1,x=this.getWidth(),P=x+h*E;let M=!1;r&&(w=x-P,(p+w<=0||P<=this.minWidth)&&(M=!0,w=0)),M||this.setWidth(P)}if(u&&f){const E=i?-1:1,x=this.getHeight(),P=x+f*E;let M=!1;i?(S=x-P,(m+S<=0||P<=this.minHeight)&&(M=!0,S=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&x<P&&this.getMinSizeOfSiblings().height+P>this.element.parentElement.offsetHeight&&(M=!0),M||this.setHeight(P)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&w||S)&&this.offsetElement(p+w,m+S)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:n}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+s,n+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},iq="ag-focus-managed",xu=class extends re{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;const i=Tl(this.beans,this.eFocusable,!1,n.shiftKey);i&&(i.focus(),n.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(iq),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||_o(t))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){gl(t);return}t.key===J.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},sq=class extends Ft{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new xu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new nq(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,n=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,n);const s=t.state,o=this.state;return this.state=s,(s.model!==o.model||s.state!==o.state)&&this.setModelIntoUi(s.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=Jm(e),this.setupApplyDebounced()}doesFilterPass(e){ge(283);const{getHandler:t,model:n,column:i}=this.params;return t().doesFilterPass({...e,model:n,handlerParams:this.beans.colFilter.getHandlerParams(i)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return ge(284),this.params.model!=null}setupApplyDebounced(){const e=KR(this.params,this.defaultDebounceMs),t=Un(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return ge(285),this.params.model}setModel(e){ge(286);const{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:n}=this,i=!this.areModelsEqual(t.model,n.model);return i&&t.onAction("apply",e),i}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const n=this.getModelFromUi(),i={model:n,state:this.getState(),valid:this.canApply(n)};this.state=i;const s=this.params;s.onStateChange(i),s.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:s.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:n}=this;if(!t)return;const i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return Pr(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function oq(e){return!!e.operator}function rq(e,t,n){if(t==null)return null;let i=null;const{compName:s,jsComp:o,fwComp:r}=wL(e,t);return s?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:o==null&&r==null&&t.filter===!0&&(i=n()),i}var yp={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},QR=class extends re{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?yp.AUTO_HEIGHT:t.print?yp.PRINT:yp.NORMAL;this.view.updateLayoutClasses(n,t)}},Er="Viewport",QF="fakeVScrollComp",iw=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],XF=100,sw=150,aq=class extends re{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Un(this,()=>this.lastScrollSource[1]=null,sw),this.resetLastVScrollDebounced=Un(this,()=>this.lastScrollSource[0]=null,sw)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Er)});for(const e of iw){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?Un(this,this.onVScroll.bind(this,Er),XF):this.onVScroll.bind(this,Er),i=t?Un(this,this.onVScroll.bind(this,QF),XF):this.onVScroll.bind(this,QF);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...iw,Er]){if(this.lastScrollSource[1]===t)continue;const n=this.getViewportForSource(t);Qp(n,e,this.enableRtl)}}getViewportForSource(e){return e===Er?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const i=Yp(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===Er?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===Er?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},sw)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Ja()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=LR(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const n of iw)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(Er)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),Qp(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,i=n.getRowCount();let s=-1;for(let o=0;o<i;o++){const r=n.getRow(o);if(typeof e=="function"){if(r&&e(r)){s=o;break}}else if(e===r||e===r.data){s=o;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t,n=0){if(Wn(this.gos,"print"))return;const{rowModel:i}=this.beans,s=i.getRowCount();if(typeof e!="number"||e<0||e>=s){ge(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:r,rowContainerHeight:c,rowRenderer:u}=this.beans;o.wrapIncoming(()=>{const h=this.ctrlsSvc.getGridBodyCtrl(),f=i.getRow(e);let p,m,w=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:S,stickyBottomHeight:E}=h,x=f.rowTop,P=f.rowHeight,M=r.getPixelOffset(),I=f.rowTop-M,U=I+f.rowHeight,z=this.getVScrollPosition(),W=c.divStretchOffset,_=z.top+W,F=z.bottom+W,k=F-_,O=c.getScrollPositionForPixel(I),N=c.getScrollPositionForPixel(U-k),H=Math.min((O+N)/2,I),V=_+S>I,ve=F-E<U;let pe=null;t==="top"?pe=O-S:t==="bottom"?pe=N+E:t==="middle"?pe=H:V?pe=O-S:ve&&(N-O>k?pe=O-S:pe=N+E),pe!==null&&(this.setVerticalScrollPosition(pe),u.redraw({afterScroll:!0})),p=x!==f.rowTop||P!==f.rowHeight,m=S!==h.stickyTopHeight||E!==h.stickyBottomHeight,w++}while((p||m)&&w<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(f?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const S=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const E=this.getVScrollPosition().top;S!==E&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){this.clearRetryListenerFncs.forEach(e=>e()),this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:i}=this.beans,s=n.getCol(e);if(!s||s.isPinned()||!this.visibleCols.isColDisplayed(s))return;const o=this.getPositionedHorizontalScroll(s,t);i.wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let c=(r?n:i)||s,u=r?i:n;t!=="auto"&&(c=t==="start",u=t==="end");const h=t==="middle";if(c||u||h){const{colLeft:f,colMiddle:p,colRight:m}=this.getColumnBounds(e);return h?p-o/2:c?r?m:f:r?f-o:m-o}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:s}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>s:n<s,c=o?n<i:t>i;return{columnBeforeStart:r,columnAfterEnd:c}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,i=e.getActualWidth(),s=e.getLeft(),o=t?-1:1,r=t?n-s:s,c=r+i*o,u=r+i/2*o;return{colLeft:r,colMiddle:u,colRight:c}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},XR=class extends re{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Wn(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,i=t.bodyWidth,s=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let r;e?r=i+s+o:(r=i,this.addSpacer&&(this.gos.get("enableRtl")?s:o)===0&&n.verticalScrollShowing&&(r+=n.getScrollbarWidth())),this.callback(r)}},lq=class extends re{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,i=()=>{qo(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=LR(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function ZR(e,t,n,i,s,o){if(n==null&&t==null)return;const r={},c={},u=(h,f)=>{h.split(" ").forEach(p=>{p.trim()!=""&&f(p)})};if(n){const h=Object.keys(n);for(let f=0;f<h.length;f++){const p=h[f],m=n[p];let w;typeof m=="string"?w=e?e.evaluate(m,i):!0:typeof m=="function"&&(w=m(i)),u(p,S=>{w?r[S]=!0:c[S]=!0})}}t&&o&&Object.keys(t).forEach(h=>u(h,f=>{r[f]||(c[f]=!0)})),o&&Object.keys(c).forEach(o),Object.keys(r).forEach(s)}function ZF(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var cq=class extends re{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const n=this.gos,i=r=>{typeof r=="string"?e.push(r):Array.isArray(r)&&r.forEach(c=>e.push(c))},s=n.get("rowClass");s&&i(s);const o=n.getCallback("getRowClass");if(o){const r={data:t.data,node:t,rowIndex:t.rowIndex},c=o(r);i(c)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){const{gos:i,expressionSvc:s}=this.beans,o=Me(i,{data:e.data,node:e,rowIndex:e.rowIndex});ZR(s,void 0,i.get("rowClassRules"),o,t,n)}processStylesFromGridOptions(e){const t=this.gos,n=t.get("rowStyle"),i=t.getCallback("getRowStyle");let s;if(i){const o={data:e.data,node:e,rowIndex:e.rowIndex};s=i(o)}if(s||n)return Object.assign({},n,s)}},uq=0,fm="renderedRow",gm=class extends re{constructor(e,t,n,i,s){super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=s,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+uq++,this.rowId=gp(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=ZF(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=gp(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,i){const{context:s,focusSvc:o}=this.beans;i=of(this,s,i);const r={rowComp:e,element:t,containerType:n,compBean:i};this.allRowGuis.push(r),this.updateGui(n,r),this.initialiseRowComp(r);const c=this.rowNode,u=this.rowType==="FullWidthLoading"||c.stub,h=!c.data&&this.beans.rowModel.getType()==="infinite";!u&&!h&&!c.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const f=this.fullWidthGui?.element;f&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(c.rowIndex,c.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>f.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=t)}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),tl(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(s=>n.toggleCss(s,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&TS(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),fl(t,e.element,fm,this),e.compBean.addDestroyFunc(()=>fl(t,e.element,fm,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=gp(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(PS(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(PS(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:i}}=this,s=!!e||!i.isPinningLeft(),o=!!t,r=!!n||!i.isPinningRight();return s&&o&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),s=Yk(this.gos,this.rowNode,i);e?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new Kc(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){const i={list:[],map:{}},s=(h,f,p)=>{p!=null?i.list.splice(p,0,f):i.list.push(f),i.map[h]=f},o=[];for(const h of t){const f=h.getInstanceId();let p=e.map[f];p&&!this.isCorrectCtrlForSpan(p)&&(p.destroy(),p=void 0),p||(p=this.getNewCellCtrl(h)),p&&s(f,p)}for(const h of e.list){const f=h.column.getInstanceId();if(i.map[f]!=null)continue;!this.isCellEligibleToBeRemoved(h,n)?o.push([f,h]):h.destroy()}if(o.length)for(const[h,f]of o){const p=i.list.findIndex(w=>w.column.getLeft()>f.column.getLeft()),m=p===-1?void 0:Math.max(p-1,0);s(h,f,m)}const{focusSvc:r,visibleCols:c}=this.beans,u=r.getFocusedCell();if(u&&u.column.getPinned()==n){const h=u.column.getInstanceId();if(!i.map[h]&&c.allCols.includes(u.column)){const p=this.createFocusedCellCtrl();if(p){const m=i.list.findIndex(S=>S.column.getLeft()>p.column.getLeft()),w=m===-1?void 0:Math.max(m-1,0);s(h,p,w)}}}return i}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;const i=t?.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const s=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(e,t){const{column:s}=e;if(s.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:r}=this.beans,c=r?.isEditing(e),u=e.isCellFocused();return c||u?!(o.allCols.indexOf(s)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Wn(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Ce(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),s=n.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=s}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=s}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(r,c)=>r?r.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(r.element,c).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),s=e(this.rightGui,"right");return t&&n&&i&&s}addListeners(){const{beans:e,gos:t,rowNode:n}=this,{expansionSvc:i,eventSvc:s,context:o,rowSpanSvc:r}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...i?.getRowExpandedListeners(this)??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(s,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),r&&this.addManagedListeners(r,{spannedCellsUpdated:({pinned:c})=>{c&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){this.allRowGuis.forEach(u=>{this.addRowDraggerToRow(u)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged()),cellChanged:e=>this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell(e)),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",n=t==="above",i=t==="inside",s=t==="below",r=this.gos.get("treeData")&&(s||n),c=this.rowNode.uiLevel.toString();this.allRowGuis.forEach(u=>{const h=u.rowComp;h.toggleCss("ag-row-highlight-above",n),h.toggleCss("ag-row-highlight-inside",i),h.toggleCss("ag-row-highlight-below",s),h.toggleCss("ag-row-highlight-indent",r),r?u.element.style.setProperty("--ag-row-highlight-level",c):u.element.style.removeProperty("--ag-row-highlight-level")})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.toggleCss("ag-row-dragging",e))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Io(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:i}=t;if(!(n.element===e.target))return;const r=this.rowNode,{focusSvc:c,navigation:u}=this.beans,h=c.getFocusedCell(),f={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:h?.column??i};u?.navigateToNextCell(e,e.key,f,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||_o(e))return;const t=this.allRowGuis.find(c=>c.element.contains(e.target)),n=t?t.element:null,i=n===e.target,s=qt(this.beans);let o=!1;n&&s&&(o=n.contains(s)&&s.classList.contains("ag-cell"));let r=null;!i&&!o&&(r=Tl(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&i||!r)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(t=>Qs(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(n=>{Pi(n.element,"tabindex",t)})}onFullWidthRowFocused(e){const t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{const o=this.beans.colModel.getCol(e?.column)?.pinned;o?i=o==="right"?this.rightGui?.element:this.leftGui?.element:i=this.centerGui?.element}i&&(i.classList.toggle("ag-full-width-focus",n),n&&e?.forceBrowserFocus&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};return e.list.forEach(i=>{i!==t&&(n.list.push(i),n.map[i.column.getInstanceId()]=i)}),n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:n}=this;return Me(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){_o(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=el(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:n,focusSvc:i}=this.beans;n?.removeAllCellRanges();const s=this.findFullWidthInfoForEvent(e);if(!s)return;const{rowGui:o,column:r}=s,c=o.element,u=e.target;let h=e.defaultPrevented||wl();c&&c.contains(u)&&kR(u)&&(h=!1),i.setFocusedCell({rowIndex:t.rowIndex,column:r,rowPinned:t.rowPinned,forceBrowserFocus:h})}onRowClick(e){if(_o(e)||this.lastMouseDownOnDragger)return;const{eventSvc:n,selectionSvc:i}=this.beans;n.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),i?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:n,rowNode:i}=this,s=Me(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,c,u,h)=>this.addFullWidthRowDragging(r,c,u,h),setTooltip:(r,c)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(r,c)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return A8(o,s);case"FullWidthGroup":{const{value:r,valueFormatted:c}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return s.value=r,s.valueFormatted=c,D8(o,s)}case"FullWidthLoading":return x8(o,s);default:return T8(o,s)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",i){const{rowDragSvc:s,context:o}=this.beans;if(!s||!this.isFullWidth())return;const r=s.createRowDragComp(()=>n,this.rowNode,void 0,e,t,i);this.createBean(r,o),this.addDestroyFunc(()=>{this.destroyBean(r,o)})}onUiLevelChanged(){const e=ZF(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(n,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(n=>n.rowComp.toggleCss("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.toggleCss("ag-row-last",t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(t=>{this.allRowGuis.forEach(n=>n.rowComp.toggleCss(t,!0))})}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:i,beans:s}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(o.push("ag-row-pinned"),s.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&o.push("ag-row-pinned-source"),i.isSelected()&&o.push("ag-row-selected"),i.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),i.stub&&o.push("ag-row-loading"),n&&o.push("ag-full-width-row"),s.expansionSvc?.addExpandedCss(o,i),i.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:r}=s;return r&&(r.processClassesFromGridOptions(o,i),r.preProcessRowClassRules(o,i)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),n&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:i,beans:s,gos:o}=this;n.addManagedListeners(t,{pointerenter:r=>{r.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:r=>{r.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(i,{mouseEnter:()=>{!s.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(n=>n.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),s=zk(this.gos)?$r(this.beans,this.rowNode).height:void 0,o=s?`${Math.min(n,s)-2}px`:void 0;this.forEachGui(e,r=>{r.element.style.height=`${t}px`,o&&r.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&Uc(this.gos)&&!t.sticky)if(t.rowTop!=null){const s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.toggleCss("ag-opacity-zero",!0));this.fullWidthGui?.element.contains(qt(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>(t.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Ce(e)){const t=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,s=this.applyPaginationOffset(i);n=t.isRowPinned()?s:this.beans.rowContainerHeight.getRealPixelPosition(s)}return n+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let n=null;return this.getAllCellCtrls().forEach(i=>{i.column==e&&(n=i)}),n!=null||t||this.getAllCellCtrls().forEach(i=>{i?.getColSpanningList().indexOf(e)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(t===null)return;const n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,s=n+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.toggleCss("ag-row-even",i),o.rowComp.toggleCss("ag-row-odd",!i),Rk(o.element,s)})}};function jL(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function WS(e,t,n,i,s){const o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=Me(e,{event:t,editing:s,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(o&&o(r))}function dq(e){const{pinnedRowModel:t,rowModel:n}=e,[i,s]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],o=i?null:"top";let r,c;s?(r=null,c=n.getRowCount()-1):(r="bottom",c=t?.getPinnedBottomRowCount()??-1);const{visibleCols:u,rangeSvc:h}=e,f=u.allCols;!h||!f?.length||h.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:c,rowEndPinned:r})}var hq=65,fq=67,gq=86,pq=68,mq=90,Cq=89;function vq(e){const{keyCode:t}=e;let n;switch(t){case hq:n=J.A;break;case fq:n=J.C;break;case gq:n=J.V;break;case pq:n=J.D;break;case mq:n=J.Z;break;case Cq:n=J.Y;break;default:n=e.code}return n}var yq=class extends re{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",eL("touchstart")?"touchstart":"mousedown"].forEach(n=>{const i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!Oh(this.gos,t)||_o(t))return;const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,i,n)):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:OL(t,e),rowCtrl:tL(t,e,fm)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){const i=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!WS(this.gos,n,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,i),jL(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:i}=e,{focusSvc:s,navigation:o}=this.beans,c=s.getFocusedCell()?.column;if(!WS(this.gos,n,i,c,!1)){const h=n.key;if(t==="keydown")switch(h){case J.PAGE_HOME:case J.PAGE_END:case J.PAGE_UP:case J.PAGE_DOWN:o?.handlePageScrollingKey(n,!0);break;case J.LEFT:case J.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case J.UP:case J.DOWN:e.onKeyboardNavigate(n);break;case J.TAB:e.onTabKeyDown(n);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Oh(this.gos,e))return;const n=vq(e),{clipboardSvc:i,undoRedo:s}=this.beans;if(n===J.A)return this.onCtrlAndA(e);if(n===J.C)return this.onCtrlAndC(i,e);if(n===J.D)return this.onCtrlAndD(i,e);if(n===J.V)return this.onCtrlAndV(i,e);if(n===J.X)return this.onCtrlAndX(i,e);if(n===J.Y)return this.onCtrlAndY(s);if(n===J.Z)return this.onCtrlAndZ(s,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:i},gos:s}=this;n&&qr(s)&&t.isRowsToRender()?dq(this.beans):i&&i?.selectAllRowNodes({source:"keyboardSelectAll",selectAll:Xk(s)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},$L=class extends re{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},jg=e=>e.topRowCtrls,$g=e=>e.getStickyTopRowCtrls(),qg=e=>e.getStickyBottomRowCtrls(),Kg=e=>e.bottomRowCtrls,Yg=e=>e.allRowCtrls,ow=e=>e.getCtrls("top"),rw=e=>e.getCtrls("center"),aw=e=>e.getCtrls("bottom"),wq={center:{type:"center",name:"center-cols",getRowCtrls:Yg,getSpannedRowCtrls:rw},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:Yg,getSpannedRowCtrls:rw},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:Yg,getSpannedRowCtrls:rw},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:Yg},topCenter:{type:"center",name:"floating-top",getRowCtrls:jg,getSpannedRowCtrls:ow},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:jg,getSpannedRowCtrls:ow},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:jg,getSpannedRowCtrls:ow},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:jg},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:$g},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:$g},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:$g},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:$g},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:qg},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:qg},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:qg},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:qg},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Kg,getSpannedRowCtrls:aw},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Kg,getSpannedRowCtrls:aw},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Kg,getSpannedRowCtrls:aw},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Kg}};function qL(e){return`ag-${lf(e).name}-viewport`}function wp(e){const t=lf(e);return t.container??`ag-${t.name}-container`}function Sq(e){return`ag-${lf(e).name}-spanned-cells-container`}function lf(e){return wq[e]}var bq=["topCenter","topLeft","topRight"],Rq=["bottomCenter","bottomLeft","bottomRight"],Eq=["center","left","right"],Tq=["center","left","right","fullWidth"],xq=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Dq=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Aq=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],KL=["stickyTopCenter","stickyTopLeft","stickyTopRight"],YL=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Fq=[...KL,"stickyTopFullWidth",...YL,"stickyBottomFullWidth"],Pq=[...bq,...Rq,...Eq,...KL,...YL],Mq=class extends re{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=lf(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new lq(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new yq(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:o}=this.beans,r=()=>this.onPinnedWidthChanged();this.forContainers(Dq,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(Aq,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(Tq,()=>this.createManagedBean(new $L(this.eContainer,this.name==="center"?i:void 0))),o&&this.forContainers(Pq,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(xq,()=>this.createManagedBean(new XR(c=>this.comp.setContainerWidth(`${c}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(Fq.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const n=this.gos.get("ensureDomOrder"),i=Wn(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Mh(this.eViewport)}getCenterViewportScrollLeft(){return Yp(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=$o(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Ik(this.eViewport)}getViewportScrollLeft(){return Yp(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||_k(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Qp(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=Wn(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||n,o=t.filter(r=>{const c=r.isFullWidth();return this.options.fullWidth?!s&&c:s||!c});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},Iq="ag-force-vertical-scroll",_q="ag-selectable",kq="ag-column-moving",Lq=class extends re{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,i,s,o,r){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=n.querySelector(`.${qL("center")}`),this.eFullWidthContainer=n.querySelector(`.${wp("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${wp("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${wp("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new QR(this.comp)),this.scrollFeature=this.createManagedBean(new aq(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,o,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=t&&e.getScrollbarWidth()||0,i=Ak()?16:0,s=`calc(100% + ${n+i}px)`;qo(this.beans,()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let n=this.gos.get("treeData");if(!n){const i=t.isPivotMode();n=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{const{target:i}=n,s=el(i,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:n=>{const{target:i,relatedTarget:s}=n,o=t.contains(s),r=el(s,"ag-root",t);el(i,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(kq,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(_q,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?Iq:null,n=Wn(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&kk(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const i=()=>{const s=n&&Uc(this.gos)&&!e.stretching,o=s?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,s)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:i,eBottom:s,beans:{popupSvc:o,touchSvc:r}}=this,c=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:c}),r?.mockBodyContextMenu(this,c),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const u=this.onStickyWheel.bind(this);for(const f of[t,n,i,s])this.addManagedElementListeners(f,{wheel:u});const h=this.onHorizontalWheel.bind(this);for(const f of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(f).eContainer,{wheel:h});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&Oh(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();const{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),i=e?.getPinnedBottomTotalHeight(),s=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),r=s-o,c=n?r+n:0,u=i?r+i:0;this.comp.setTopHeight(c),this.comp.setBottomHeight(u),this.comp.setTopInvisible(c<=0),this.comp.setBottomInvisible(u<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,i=e?.getPinnedBottomTotalHeight()??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,r=i+o;n.setStickyBottomBottom(`${r}px`)}},QL=class extends Ft{constructor(e,t){super(),this.direction=t,this.eViewport=Ae,this.eContainer=Ae,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",xk()||Ja())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Ak(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),qo(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;Z9(()=>Qs(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Oq={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Vq=class extends QL{constructor(){super(Oq,"horizontal"),this.eLeftSpacer=Ae,this.eRightSpacer=Ae,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new XR(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=i),$s(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let s=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(s+=i),$s(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=n?0:i===0&&t?16:i,r=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),rh(this.getGui(),o),rh(this.eViewport,o),rh(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(r,100):r()}getScrollPosition(){return Yp(this.eViewport,this.enableRtl)}setScrollPosition(e){Qs(this.eViewport)||this.attemptSettingScrollPosition(e),Qp(this.eViewport,e,this.enableRtl)}},Nq={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},Bq=class extends QL{constructor(){super(Nq,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new $L(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,s=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),$s(this.getGui(),s),$s(this.eViewport,s),$s(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const n=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Qs(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function Ns(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function JR(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const i of n){if(!i)continue;const s=i.getGroupRowCount()||0;for(let o=0;o<s;o++){const r=i.getGroupRowCtrlAtIndex(o),c=t[o];if(r){const u=Gq(e,r);(c==null||u>c)&&(t[o]=u)}}}return t}function Gq(e,t){let i=e.colModel.isPivotMode()?zq(e):ZL(e);const s=t.getHeaderCellCtrls();for(const o of s){const{column:r}=o,c=r.getAutoHeaderHeight();c!=null&&c>i&&r.isAutoHeaderHeight()&&(i=c)}return i}function eE(e){let n=e.colModel.isPivotMode()?Hq(e):cf(e);return e.colModel.forAllCols(i=>{const s=i.getAutoHeaderHeight();s!=null&&s>n&&i.isAutoHeaderHeight()&&(n=s)}),n}function cf(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function XL(e){return e.gos.get("floatingFiltersHeight")??cf(e)}function ZL(e){return e.gos.get("groupHeaderHeight")??cf(e)}function Hq(e){return e.gos.get("pivotHeaderHeight")??cf(e)}function zq(e){return e.gos.get("pivotGroupHeaderHeight")??ZL(e)}var Uq=class extends re{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:i}=this,{headerNavigation:s,touchSvc:o,ctrlsSvc:r}=i;s&&this.createManagedBean(new xu(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();const c=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:c}),o?.mockHeaderContextMenu(this,c),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>qo(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const n=JR(e).reduce((o,r)=>o+r,0),i=eE(e);if(e.filterManager?.hasFloatingFilters()&&(t+=XL(e)),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;const s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const n=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?"LEFT":"RIGHT",{beans:s}=this,{headerNavigation:o,focusSvc:r}=s;(o.navigateHorizontally(i,!0,e)||!n&&r.focusOverlay(!1)||uu(s,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case J.LEFT:t="LEFT";case J.RIGHT:{Ce(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case J.UP:t="UP";case J.DOWN:{Ce(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:i}=this;!t&&n.contains(qt(i))||n.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){const{menuSvc:i,ctrlsSvc:s}=this.beans;if(!e&&!n||!i?.isHeaderContextMenuEnabled())return;const{target:o}=e??t;(o===this.eGui||o===s.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,e,n)}},tE=class extends re{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Ct(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),i=Ce(this.columnOrGroup.getOldLeft());t?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:i}=this.beans;if(!Wn(n,"print")||e.getPinned()==="left")return t;const o=i.getColsLeftWidth();if(e.getPinned()==="right"){const r=i.bodyWidth;return o+r+t}return o+t}setLeft(e){if(Ce(e)&&(this.eCell.style.left=`${e}px`),on(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&H9(this.ariaEl,t.length)}}},Wq=0,JL="headerCtrl",nE=class extends re{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+Wq++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),s=i&&i.suppressHeaderKeyboardEvent;if(!Ce(s))return!1;const o=Me(this.gos,{colDef:i,column:n,headerRowIndex:t,event:e});return!!s(o)}getWrapperHasFocus(){return qt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if(typeof t=="function"){const i=this.getHeaderClassParams();n=t(i)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:i}=e,{beans:s}=this,o=p=>{if(!this.isAlive()||!i.isAlive())return;const{paddingTop:m,paddingBottom:w,borderBottomWidth:S,borderTopWidth:E}=Sl(this.eGui),x=m+w+S+E,M=t.offsetHeight+x;if(p<5){const I=_n(s),U=!I||!I.contains(t),z=M==0;if(U||z){PS(()=>o(p+1),"raf",s);return}}this.setColHeaderHeight(this.column,M)};let r=!1,c;const u=()=>{const p=this.column.isAutoHeaderHeight();p&&!r&&h(),!p&&r&&f()},h=()=>{r=!0,o(0),this.comp.toggleCss("ag-header-cell-auto-height",!0),c=$o(this.beans,t,()=>o(0))},f=()=>{r=!1,c&&c(),this.comp.toggleCss("ag-header-cell-auto-height",!1),c=void 0};u(),i.addDestroyFunc(()=>f()),i.addManagedListeners(this.column,{widthChanged:()=>r&&o(0)}),i.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>o(0))}}),n&&n(u)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:i}=this;!e||!t||!i||(_L(e,t,n.visibleCols),Ek(i,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=sl(this.beans);this.eGui&&Pi(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=qt(this.beans),n=e.key===J.LEFT||e.key===J.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),!n))return;const s=e.key===J.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const o=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(o,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let i=e.key===J.LEFT!==t.get("enableRtl");const s=n.getPinned(),o=t.get("enableRtl");return s&&o!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=JL,{eGui:n,gos:i}=this;fl(i,n,t,this),e.addDestroyFunc(()=>fl(i,n,t,null))}focus(e){const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const i=e??t,{menuSvc:s,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&i.preventDefault(),s?.isHeaderContextMenuEnabled(n)&&s.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},jq=class extends nE{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,n,i,s){this.comp=e;const{rowCtrl:o,column:r,beans:c}=this,{colResize:u,context:h,colHover:f,rangeSvc:p}=c,m=of(this,h,s);this.setGui(t,m),this.updateState(),this.setupWidth(m),this.setupMovingCss(m),this.setupMenuClass(m),this.setupSortableClass(m),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:S=>this.setRefreshFunction("measuring",S),compBean:m}),this.addColumnHoverListener(m),this.setupFilterClass(m),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(m),this.setupSelectAll(m),this.setupUserComp(),this.refreshAria(),u?this.resizeFeature=m.createManagedBean(u.createResizeFeature(o.pinned,r,n,e,this)):Wt(n,!1),f?.createHoverFeature(m,[r],t),p?.createRangeHighlightFeature(m,r,e),m.createManagedBean(new tE(r,t,c)),m.createManagedBean(new xu(t,{shouldStopEventPropagation:S=>this.shouldStopEventPropagation(S),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(m),m.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),m.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),m.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const w=()=>this.checkDisplayName();m.addManagedEventListeners({columnValueChanged:w,columnRowGroupChanged:w,columnPivotChanged:w,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),m.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return Me(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return S8(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:i}=this.beans;return Me(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||Mi(this.gos)),showColumnMenu:(o,r)=>{e?.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:r})},showColumnMenuAfterMouseClick:(o,r)=>{e?.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:r})},showFilter:o=>{e?.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t?.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,r)=>{t?.setSortForColumn(this.column,o,!!r,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,r)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,r)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===J.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===J.ENTER&&this.onEnterKeyDown(e),e.key===J.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();JF(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),m$()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),n=IL(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(s=>{i.has(s)?i.delete(s):this.comp.toggleCss(s,!0)}),i.forEach(s=>this.comp.toggleCss(s,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:n,beans:i}=this,s=JR(this.beans),o=s.reduce((m,w)=>m+=w,0)===0;if(n.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:c}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",r>0);const u=eE(i);if(r===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${u}px`);return}n.toggleCss("ag-header-span-total",c);const h=(this.column.getFirstRealParent()?.getLevel()??-1)+1,f=s.length-h;let p=0;for(let m=0;m<f;m++)p+=s[s.length-1-m];e.style.setProperty("top",`${-p}px`),e.style.setProperty("height",`${u+p}px`)}refreshAriaSort(){if(this.sortable){const e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(P9(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Mi(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(qt(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return JF(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function JF(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var $q=0,lw=class extends re{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=$q++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";n==="group"?i="ag-header-row-group":n==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=Wn(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=of(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=Wn(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=JR(this.beans);for(let s=0;s<t.length;s++){if(s===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[s]};e+=t[s]}const n=eE(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;const i=XL(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);const n=i=>{const{focusSvc:s,visibleCols:o}=this.beans;return s.isHeaderWrapperFocused(i)?o.isVisible(i.column):!1};if(e)for(const[i,s]of e)n(s)?this.ctrlsById.set(i,s):this.destroyBean(s);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(n&&(s=n.get(i),n.delete(i)),s&&s.column!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":s=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:s=this.createBean(new jq(e,this));break}t.set(i,s)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];return["left",null,"right"].forEach(t=>{e.push(...this.getComponentsToRender(t))}),e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const n=this.allCtrls.find(s=>s.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},qq=class extends re{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:i,colModel:s,colMoves:o}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const c=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(c,this),s.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:n,visibleCols:i}=this.beans;let s=0;const o=t.getFocusHeaderToUseAfterRefresh(),r=()=>{const p=i.headerGroupRowCount;s=p;const m=this.groupsRowCtrls.length;if(m!==p){if(m>p){for(let w=p;w<m;w++)this.destroyBean(this.groupsRowCtrls[w]);this.groupsRowCtrls.length=p;return}for(let w=m;w<p;w++){const S=this.createBean(new lw(w,this.pinned,"group"));this.groupsRowCtrls.push(S)}}},c=()=>{const p=s++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new lw(p,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==p&&this.columnsRowCtrl.setRowIndex(p)},u=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const p=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){p();return}e||p();const m=s++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==m&&this.filtersRowCtrl.setRowIndex(m):this.filtersRowCtrl=this.createBean(new lw(m,this.pinned,"filter"))},h=this.getAllCtrls();r(),c(),u();const f=this.getAllCtrls();this.comp.setCtrls(f),this.restoreFocusOnHeader(t,o),h.length!==f.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=n=>n?.getHeaderCellCtrls().find(i=>i.column===e);if(Kr(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const i=t(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){const s=this.getAllCtrls()[e];return s?s.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new XR(e=>this.comp.setCenterWidth(`${e}px`),!0))}},Kq=class extends re{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(tP(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){tP(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(Mi(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Kr(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Ja()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Mi(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!Mi(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Mi(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,i){const{positionBy:s,onClosedCallback:o}=t,r=t.column;if(s==="button"){const{buttonElement:c}=t;e?.showMenuAfterButtonClick(r,c,n,o,i)}else if(s==="mouse"){const{mouseEvent:c}=t;e?.showMenuAfterMouseEvent(r,c,n,o,i)}else if(r){const c=this.beans,u=c.ctrlsSvc;u.getScrollFeature().ensureColumnVisible(r,"auto"),qo(c,()=>{const h=u.getHeaderRowContainerCtrl(r.getPinned())?.getHeaderCtrlForColumn(r);h&&e?.showMenuAfterButtonClick(r,h.getAnchorElementForMenu(i),n,o,i)})}}};function eP(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}function tP(e){const{enterpriseMenuFactory:t,filterMenuFactory:n,gos:i}=e;return t&&Mi(i)?t:n}var iE=class extends Ft{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},eC=class extends iE{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},eO=class extends Ft{constructor(){super()}},Yq={tag:"span",cls:"ag-overlay-loading-center",attrs:{"aria-live":"polite","aria-atomic":"true"}},Qq=class extends eO{init(){const e=Io(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??Yq),!e){const t=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},Xq={tag:"span",cls:"ag-overlay-no-rows-center"},Zq=class extends eO{init(){const e=Io(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??Xq),!e){const t=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}};function Jq(e,t,n){const i=es(e,t,n);if(i){const{className:o}=i;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return i}const s=an({tag:"span"});return s.appendChild(i),s}function es(e,t,n){let i=null;e==="smallDown"?ge(262):e==="smallLeft"?ge(263):e==="smallRight"&&ge(264);const s=n&&n.getColDef().icons;if(s&&(i=s[e]),t.gos&&!i){const o=t.gos.get("icons");o&&(i=o[e])}if(i){let o;if(typeof i=="function")o=i();else if(typeof i=="string")o=i;else{ge(38,{iconName:e});return}if(typeof o=="string")return OR(o);if(NR(o))return o;ge(133,{iconName:e});return}else{const o=t.registry.getIcon(e);return o||t.validation?.validateIcon(e),an({tag:"span",cls:`ag-icon ag-icon-${o??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var eK=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",tK={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},nK=class extends Ft{constructor(){super(),this.dragSource=null,this.eIcon=Ae,this.eLabel=Ae,this.eGhost=Ae,this.registerCSS(eK)}postConstruct(){const e=t=>Jq(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(tK),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:n,dragSource:i,dropIconMap:s,gos:o}=this;_i(n);let r=null;e||(e=i?.getDefaultIconName?i.getDefaultIconName():"notAllowed"),r=s[e],n.classList.toggle("ag-shake-left-to-right",t),!(r===s.hide&&o.get("suppressDragLeaveHidesColumns"))&&r&&n.appendChild(r)}setLabel(e){this.eLabel.textContent=e}},iK=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",sK=class extends Ft{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(iK)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;_i(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(Wt(t,!1),dl(t,"presentation")):(Wt(t,!0),dl(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Xp(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Ph(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},tO=class extends sK{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||M9(e)!==null?Fh(e,""):Fh(e,t??"")}setAriaLabel(e){return ru(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return $s(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function oK(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var qa=class extends tO{constructor(e,t,n="text",i="input"){super(e,e?.template??oK(i),[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=Ae,this.eWrapper=Ae,this.eInput=Ae}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:n,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:s,inputWidth:o}=this.config;s!=null&&this.setInputName(s),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,Pi(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return Xp(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Pi(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return ru(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Ph(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Pi(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Pi(this.eInput,"autocomplete",t)}return this}},sE=class extends qa{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},oE={selector:"AG-CHECKBOX",component:sE},rK=".ag-checkbox-cell{height:100%}",aK={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},lK=class extends Ft{constructor(){super(aK,[oE]),this.eCheckbox=Ae,this.registerCSS(rK)}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),Sk(i,"polite"),this.addManagedListeners(i,{click:s=>{if(gl(s),t.isDisabled())return;const o=t.getValue();this.onCheckboxChanged(o)},dblclick:s=>{gl(s)}}),this.addManagedElementListeners(e.eGridCell,{keydown:s=>{if(s.key===J.SPACE&&!t.isDisabled()){e.eGridCell===qt(n)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),s.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:i,column:s,node:o}=e;if(o.group&&s)if(typeof i=="boolean")t=i;else{const p=s.getColId();p.startsWith(Xm)?t=i==null||i===""?void 0:i==="true":o.aggData&&o.aggData[p]!==void 0?t=i??void 0:n=!1}else t=i??void 0;const{eCheckbox:r}=this;if(!n){r.setDisplayed(!1);return}r.setValue(t);const c=e.disabled??!s?.isCellEditable(o);r.setDisabled(c);const u=this.getLocaleTextFunc(),h=Qm(u,t),f=c?h:`${u("ariaToggleCellValue","Press SPACE to toggle cell value")} (${h})`;r.setInputAriaLabel(f)}onCheckboxChanged(e){const{params:t}=this,{column:n,node:i,value:s}=t;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:i.rowIndex,rowPinned:i.rowPinned,state:"changed",oldValue:s,newValue:s}],{update:!0});const o=i.setDataValue(n,e,"renderer");this.beans.editSvc?.stopEditing({rowNode:i,column:n},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"}),o||this.updateCheckbox(t)}},nP=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:n,order:i}=this;t.has(e)||(t.add(e),n.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),is(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:n,queued:i}=this;e.clear(),i.clear(),t.clear(),n.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,i=e?.getSortOptions()??[],s=dK(this.order);if(this.order.sort((r,c)=>(r.pinnedSibling?.rowIndex??0)-(c.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,i)??this.order,!s)return;const o=qk(n);o==="bottom"||o==="pinnedBottom"?this.order.push(s):this.order.unshift(s)}hide(e){const{all:t,visible:n}=this;t.forEach(i=>e(i)?n.delete(i):n.add(i)),this.order=Array.from(n),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function nO(e){if(e.level===-1)return!0;const t=e.parent;return t?.childrenAfterSort?.some(n=>n==e)?nO(t):!1}function cw(e,t){const{gos:n,rowModel:i,filterManager:s}=e;return bl(n)?!i.getRowNode(t.id):s?.isAnyFilterPresent()?!nO(t):n.get("pivotMode")?!t.group:!1}function cK(e){return!!e.footer&&e.level===-1}function uK(e){return!!e.pinnedSibling&&cK(e.pinnedSibling)}function dK(e){const t=e.findIndex(uK);if(t>-1)return e.splice(t,1)?.[0]}var iP=class extends re{postConstruct(){const{gos:e,beans:t}=this;this.top=new nP(t,"top"),this.bottom=new nP(t,"bottom");const n=s=>cw(t,s.pinnedSibling),i=()=>{const s=e.get("isRowPinned");s&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,s(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:s})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(o=>o.hide(n)),this.refreshRowPositions(),s||this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(fK),this.refreshRowPositions()},rowNodeDataChanged:({node:s})=>{(e.get("isRowPinnable")?.(s)??!0)||this.pinRow(s,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(s=>s.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:s})=>{this._grandTotalPinned=s==="pinnedBottom"?"bottom":s==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const n=[];t.forEach(i=>n.push(i)),n.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,pK(this.beans);return}const i=e.rowPinned??e.pinnedSibling?.rowPinned;if(i!=null&&t!=null&&t!=i){const r=e.rowPinned?e:e.pinnedSibling,c=e.rowPinned?e.pinnedSibling:e;this.pinRow(r,null,n),this.pinRow(c,t,n);return}const o=n&&gK(this.beans,e,n);if(o){o.forEach(r=>this.pinRow(r,t));return}if(t==null){const r=e.rowPinned?e:e.pinnedSibling,c=this.findPinnedRowNode(r);if(!c)return;c.delete(r);const u=r.pinnedSibling;uw(r),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(u)}else{const r=sP(this.beans,e,t),c=this.getContainer(t);c.add(r),cw(this.beans,e)&&c.hide(u=>cw(this.beans,u.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const n=i=>{if(i.rowHeightEstimated){const s=$r(this.beans,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return oP(this.top)}getPinnedBottomTotalHeight(){return oP(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const n=[];return this.forEachPinnedRow(t,i=>n.push(i.pinnedSibling.id)),n};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,n)=>{for(const i of e[n]){const s=this.beans.rowModel.getRowNode(i);s?this.pinRow(s,n):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const n=new Set;e.forEachQueued(i=>{const s=this.beans.rowModel.getRowNode(i);s&&n.add(s)});for(const i of n)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){const{gos:e,beans:t,_grandTotalPinned:n}=this,i=t.rowModel;if(!gn(e))return;const s=i.rootNode?.sibling;if(!s)return;const o=s.pinnedSibling,r=o&&this.findPinnedRowNode(o);if(n){if(r&&r.floating!==n&&(r.delete(o),uw(o)),!r||r.floating!==n){const c=sP(t,s,n);this.getContainer(n).add(c)}}else{if(!r)return;r.delete(o),uw(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=n=>hK(this.beans,n);return e==null?this.forContainers(t):t(this.getContainer(e))}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function hK(e,t){let n=0;t.forEach((i,s)=>{i.setRowTop(n),(i.rowHeightEstimated||i.rowHeight==null)&&i.setRowHeight($r(e,i).height),i.setRowIndex(s),n+=i.rowHeight})}function sP(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;const i=B$(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=n;const s=n==="top"?$R:qR;return i.id=`${s}${n}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function uw(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function fK(e){const t=new Set;e.forEach(n=>{n.group&&t.add(n)}),t.forEach(n=>e.delete(n))}function gK(e,t,n){const{rowSpanSvc:i}=e,s=(n&&i?.isCellSpanning(n,t))??!1;if(n&&s)return i?.getCellSpan(n,t)?.spannedNodes}function oP(e){const t=e.size();if(t===0)return 0;const n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}function pK({gos:e,rowModel:t}){gn(e)&&t.refreshModel({step:"map"})}var rP=class extends re{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=n=>{n.setRowHeight(n.rowHeight,!0)};Od(this.pinnedBottomRows,t),Od(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const n=i=>{if(i.rowHeightEstimated){const s=$r(this.beans,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return Od(this.pinnedBottomRows,n),t=0,Od(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}const i=au(this.gos),s=t==="top"?$R:qR,o=new Set(n.order),r=[],c=new Set;let u=0,h=-1;for(const f of e){const p=i?.({data:f,level:0,rowPinned:t})??s+this.nextId++;if(c.has(p)){ge(96,{id:p,data:f});continue}h++,c.add(p),r.push(p);const m=lh(n,p);if(m!==void 0)m.data!==f&&m.updateData(f),u+=this.setRowTopAndRowIndex(m,u,h),o.delete(p);else{const w=new Cl(this.beans);w.id=p,w.data=f,w.rowPinned=t,u+=this.setRowTopAndRowIndex(w,u,h),n.cache[p]=w,n.order.push(p)}}o.forEach(f=>{lh(n,f)?.clearRowTopAndRowIndex(),delete n.cache[f]}),n.order=r}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight($r(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return aP(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return aP(this.pinnedBottomRows)}getPinnedTopRowCount(){return $S(this.pinnedTopRows)}getPinnedBottomRowCount(){return $S(this.pinnedBottomRows)}getPinnedTopRow(e){return jS(this.pinnedTopRows,e)}getPinnedBottomRow(e){return jS(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return lh(this.getCache(t),e)}forEachPinnedRow(e,t){return Od(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function aP(e){const t=$S(e);if(t===0)return 0;const n=jS(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function lh(e,t){return e.cache[t]}function jS(e,t){return lh(e,e.order[t])}function Od(e,t){e.order.forEach((n,i)=>{const s=lh(e,n);s&&t(s,i)})}function $S(e){return e.order.length}var mK=class extends re{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const n=e.get("enableRowPinning"),i=qk(e),o=!!n||(i==="pinnedBottom"||i==="pinnedTop"),r=o?this.inner instanceof rP:this.inner instanceof iP;this.inner&&r&&this.destroyBean(this.inner),(r||!this.inner)&&(this.inner=this.createManagedBean(o?new iP:new rP))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},CK="ROOT_NODE_ID",vK=class extends re{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}getRowNode(e){return this.allNodesMap[e]}extractRowData(){return this.rootNode?.allLeafChildren?.map(e=>e.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=CK,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=e?.map((t,n)=>this.createRowNode(t,n))??[]}setImmutableRowData(e,t){const n=au(this.gos),i=!this.gos.get("suppressMaintainUnsortedOrder"),s=e.changedRowNodes,o=new Set,r=this.rootNode,c=r.allLeafChildren,u=c.length;let h=!1,f=!1,p=!1,m=!1;for(let S=0,E=-1,x=t.length;S<x;S++){const P=t[S];let M=this.getRowNode(n({data:P,level:0}));if(!M)h=!0,M=this.createRowNode(P,-1),s.add(M);else{if(i){const I=M.sourceRowIndex;m||(m=I<=E||h),E=I}M.data!==P&&(p=!0,M.updateData(P),s.update(M))}o.add(M)}const w=[];for(let S=0;S<u;S++){const E=c[S];o.has(E)||(f=!0,E.isSelected()&&w.push(E),E.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(E.pinnedSibling,null),this.rowNodeDeleted(E),s.remove(E))}if(h||f||m){const S=new Array(o.size);let E=0;if(!i)for(let P=0;P<u;++P){const M=c[P];o.delete(M)&&(M.sourceRowIndex=E,S[E++]=M)}for(const P of o)P.sourceRowIndex=E,S[E++]=P;r.allLeafChildren=S;const x=r.sibling;x&&(x.allLeafChildren=S),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=m)}(h||f||m||p)&&(this.deselectNodes(w),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,n=this.allNodesMap;n[t]===e&&delete n[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const n={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[],s=au(this.gos);return this.executeRemove(s,e,n,i),this.executeUpdate(s,e,n,i),this.executeAdd(e,n),this.deselectNodes(i),n}executeAdd(e,t){const n=e.add;if(!n?.length)return;let i=this.rootNode.allLeafChildren,s=i.length;if(typeof e.addIndex=="number"&&(s=this.sanitizeAddIndex(e.addIndex),s>0&&this.gos.get("treeData")&&this.gos.get("getDataPath"))){for(let p=0;p<i.length;p++)if(i[p]?.rowIndex==s-1){s=p+1;break}}const o=n.length,r=t.changedRowNodes,c=new Array(o);for(let f=0;f<o;f++){const p=this.createRowNode(n[f],s+f);r.add(p),c[f]=p}const u=this.rootNode;if(s<i.length){const f=i.slice(0,s),p=i.slice(s,i.length),m=f.length+c.length;for(let w=0,S=p.length;w<S;++w)p[w].sourceRowIndex=m+w;i=[...f,...c,...p],t.rowsInserted=!0}else i=i.concat(c);u.allLeafChildren=i;const h=u.sibling;h&&(h.allLeafChildren=i),t.rowNodeTransaction.add=c}executeRemove(e,t,{changedRowNodes:n,rowNodeTransaction:i},s){const{remove:o}=t;if(!o?.length)return;const r={};o.forEach(h=>{const f=this.lookupRowNode(e,h);f&&(f.isSelected()&&s.push(f),f.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(f.pinnedSibling,null),f.clearRowTopAndRowIndex(),r[f.id]=!0,delete this.allNodesMap[f.id],i.remove.push(f),n.remove(f))});const c=this.rootNode;c.allLeafChildren=c.allLeafChildren?.filter(h=>!r[h.id])??null,c.allLeafChildren?.forEach((h,f)=>{h.sourceRowIndex=f});const u=c.sibling;u&&(u.allLeafChildren=c.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:n,rowNodeTransaction:i},s){const{update:o}=t;o?.length&&o.forEach(r=>{const c=this.lookupRowNode(e,r);c&&(c.updateData(r),!c.selectable&&c.isSelected()&&s.push(c),i.update.push(c),n.update(c))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselectNodes(e){const t="rowDataChanged",n=this.beans.selectionSvc,i=e.length>0;i&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),i&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const n=new Cl(this.beans);return n.parent=this.rootNode,n.level=0,n.group=!1,n.expanded=!1,n.sourceRowIndex=t,n.setDataAndId(e,String(this.nextId)),this.allNodesMap[n.id]&&ge(2,{nodeId:n.id}),this.allNodesMap[n.id]=n,this.nextId++,n}lookupRowNode(e,t){let n;if(e){const i=e({data:t,level:0});if(n=this.allNodesMap[i],!n)return vt(4,{id:i}),null}else if(n=this.rootNode?.allLeafChildren?.find(i=>i.data===t),!n)return vt(5,{data:t}),null;return n||null}},yK={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},wK=class extends Ft{constructor(){super(yK,[oE]),this.eCheckbox=Ae}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,i=t.isSelected(),s=Qm(e,i),[o,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],c=e(o,r);n.setValue(i,!0),n.setInputAriaLabel(`${c} (${s})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:gl,click:i=>{gl(i),this.beans.selectionSvc?.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:s})=>{const o=typeof i=="object"?Jy(i):void 0,r=typeof s=="object"?Jy(s):void 0;o!==r&&this.onSelectableChanged()}),kS(this.gos)||typeof this.getIsVisible()=="function"){const i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:n,gos:i}=this,s=t.selectable,o=this.getIsVisible();let r;if(typeof o=="function"){const p=n?.callbackParams;if(!e)r=o({...p,node:t,data:t.data});else{const m=e.createColumnFunctionCallbackParams(t);r=o({...p,...m})}}else r=o??!1;const c=s&&!r||!s&&r,u=s||r,h=i.get("rowSelection"),f=h&&typeof h!="string"?!Jy(h):!!e?.getColDef().showDisabledCheckboxes;if(this.setVisible(u&&(c?f:!0)),this.setDisplayed(u&&(c?f:!0)),u&&this.eCheckbox.setDisabled(c),n?.removeHidden){this.setDisplayed(u);return}}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Wc(t):this.column?.getColDef()?.checkboxSelection}},SK=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:n,pinnedRowModel:i}=this;return t??(t=n.getRowNode(e)),i?.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const n=t[0].id===this.rootId,i=t.findIndex(s=>s.id===e.id);if(i>-1){const s=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),n?{keep:s,discard:o}:{keep:o,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){const n=this.getRoot();if(n==null){const s=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&s.push(o)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}const i=this.getNodesInRange(n,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(s=>s.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}getNodesInRange(e,t){const{pinnedRowModel:n,rowModel:i}=this;if(!n?.isManual())return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return Yi(n,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const s=Yi(n,"bottom",void 0,e),o=i.getRowCount(),r=i.getRow(o-1);return(i.getNodesInRangeForSelection(t,r)??[]).concat(s)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return Yi(n,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const s=Yi(n,"top",t,void 0),o=Yi(n,"bottom",void 0,e),r=i.getRow(0),c=i.getRow(i.getRowCount()-1);return s.concat(i.getNodesInRangeForSelection(r,c)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return Yi(n,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const s=Yi(n,"top",e,void 0),o=Yi(n,"bottom",void 0,t),r=i.getRow(0),c=i.getRow(i.getRowCount()-1);return s.concat(i.getNodesInRangeForSelection(r,c)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return Yi(n,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const s=Yi(n,"bottom",void 0,t),o=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,o)??[]).concat(s)}return null}},bK=class extends re{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(qt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new sE);this.cbSelectAll=t,t.addCss("ag-header-select-all"),dl(t.getGui(),"presentation"),this.showOrHideSelectAll();const n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:s})=>{const o=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;o(i)!==o(s)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,i=t.getSelectAllState(e);n.setValue(i);const s=t.hasNodesToSelect(e);n.setDisabled(!s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:s}=this,o=i.getValue(),r=Qm(t,o),c=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",s?`${c} (${r})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return tm(this.gos)?!0:(ge(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:n}=this.beans;return gn(t)||bl(t)?!0:(ge(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");const i={source:n,selectAll:t},s=this.beans.selectionSvc;e?s.selectAllRowNodes(i):s.deselectAllRowNodes(i)}isCheckboxSelection(){const{column:e,gos:t,beans:n}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return iO(n,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=Xk(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function iO({gos:e,selectionColSvc:t},n){const i=e.get("rowSelection"),s=n.getColDef(),{headerCheckboxSelection:o}=s;let r=!1;if(typeof i=="object"){const u=Jr(n),h=zR(n);(Jp(i)==="autoGroupColumn"&&h||u&&t?.isSelectionColumnEnabled())&&(r=hp(i))}else typeof o=="function"?r=o(Me(e,{column:n,colDef:s})):r=!!o;return r}var RK=class extends re{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new SK(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const n=kS(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=kS(e),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new wK}createSelectAllFeature(e){if(iO(this.beans,e))return new bK(e)}isMultiSelect(){return tm(this.gos)}onRowCtrlSelected(e,t,n){const i=!!e.rowNode.isSelected();e.forEachGui(n,s=>{s.rowComp.toggleCss("ag-row-selected",i);const o=s.element;xS(o,i),o.contains(qt(this.beans))&&t(s)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected();if(!e.selectable)return;const i=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(i,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!af(e)||!tl(this.gos)}updateRowSelectable(e,t){const n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(_h(this.gos)){const s=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:s??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let i=0;i<e.childrenAfterGroup.length;i++){const s=e.childrenAfterGroup[i];let o=s.isSelected();if(!s.selectable){const r=this.calculateSelectedFromChildren(s);if(r===null)continue;o=r}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,i="api"){const s=!e.selectable&&t,o=e.__selected===t;if(s||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const c=e.pinnedSibling;return c&&c.rowPinned&&c.__localEventService&&c.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...V$(e,this.gos,"rowSelected"),event:n||null,source:i}),!0}isCellCheckboxSelection(e,t){const n=this.gos.get("rowSelection");if(n&&typeof n!="string"){const i=Jr(e)&&Wc(n);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,i){const{gos:s,selectionCtx:o}=this,r=e.isSelected(),c=_h(s),u=g7(s),h=p7(s),f=this.isMultiSelect(),p=i==="rowClicked";if(p&&!(u||h))return null;if(t&&n&&f){const m=o.getRoot();if(m)if(m.isSelected()){const w=o.isInRange(e)?o.truncate(e):o.extend(e,c);return{deselect:w.discard,select:w.keep,reset:!1}}else{const w=o.extend(e,c);return{select:[],deselect:w.keep,reset:!1}}else return null}else if(t&&f){const m=o.selectAll?this.beans.rowModel.getRow(0):void 0,w=o.getRoot(m),S=o.isInRange(e)?o.truncate(e):o.extend(e,c);return{select:S.keep,deselect:S.discard,reset:o.selectAll||!!(w&&!w.isSelected())}}else if(n){if(p){const m=!r;return m&&!u||!m&&!h?null:(o.setRoot(e),{node:e,newValue:m,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!r,clearSelection:!f}}else{o.setRoot(e);const m=m7(s),w=nm(s)==="filteredDescendants",S=p&&(!m||!u);if(w&&r===void 0&&gn(s))return{node:e,newValue:!1,clearSelection:!f||S};if(p){const E=r?!m:u;return E===r&&!S||E&&!u||!E&&!h?null:{node:e,newValue:E,clearSelection:!f||S,keepDescendants:e.group&&c}}return{node:e,newValue:!r,clearSelection:!f||S}}}},EK=class extends sE{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},xl=class extends qa{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const n=this.eInput;return n.value!==e&&(n.value=Ce(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{jL(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{const i=n.clipboardData?.getData("text");i&&i.split("").some(s=>!e.test(s))&&n.preventDefault()}})}},tC={selector:"AG-INPUT-TEXT-FIELD",component:xl},TK=class extends qa{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},xK={selector:"AG-INPUT-TEXT-AREA",component:TK},rE=class extends xl{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=parseFloat(e.value),r=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:n,max:i,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){qt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const n=this.precision;if(n==null)return e;if(t){const s=parseFloat(e).toFixed(n);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=n)return e;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Pi(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Pi(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Pi(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(Ce(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);const s=this.normalizeValue(n);i=n!=s}if(i)return t(n)}return e(n)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},DK={selector:"AG-INPUT-NUMBER-FIELD",component:rE},AK=class extends xl{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=wl();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){qt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ii(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,Pi(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Ii(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,Pi(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Pi(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return wi(this.getValue())??void 0}setDate(e,t){this.setValue(Ii(e??null,this.includeTime),t)}},sO={selector:"AG-INPUT-DATE-FIELD",component:AK},FK=class extends Ft{constructor(e="default",t=!1){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case J.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case J.DOWN:case J.UP:e.preventDefault(),this.navigate(t);break;case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===J.DOWN;let n;const{itemEls:i,highlightedEl:s}=this;if(!s)n=i[t?0:i.length-1];else{let r=i.indexOf(s)+(t?1:-1);r=Math.min(Math.max(r,0),i.length-1),n=i[r]}this.highlightItem(n)}navigateToPage(e){const{itemEls:t,highlightedEl:n}=this;if(!n||t.length===0)return;const i=t.indexOf(n),s=this.options.length-1,o=t[0].clientHeight,r=Math.floor(this.getGui().clientHeight/o);let c=-1;e===J.PAGE_HOME?c=0:e===J.PAGE_END?c=s:e===J.PAGE_DOWN?c=Math.min(i+r,s):e===J.PAGE_UP&&(c=Math.max(i-r,0)),c!==-1&&this.highlightItem(t[c])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:n}=e,i=n??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{Uo(e)}),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){const e=this.getGui();dl(e,this.options.length===0?"presentation":"listbox")}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");this.refreshAriaRole(),e.forEach((t,n)=>{V9(t,n+1),O9(t,e.length)})}renderOption(e,t){const n=an({tag:"div",cls:`ag-list-item ag-${this.cssIdentifier}-list-item`,attrs:{role:"option"}}),i=an({tag:"span",children:t});n.appendChild(i),this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:s=>{s.preventDefault(),s.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>i.scrollWidth>i.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const n=this.options.findIndex(i=>i.value===e);if(n!==-1){const i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Qs(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),xS(e,!0);const t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:s,offsetHeight:o}=e;(s+o>n+i||s<n)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;!e||!Qs(e)||(e.classList.remove(this.activeClass),xS(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},PK=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",MK={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},IK=class extends tO{constructor(e){if(super(e,e?.template||MK,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Ae,this.eWrapper=Ae,this.eDisplayField=Ae,this.eIcon=Ae,this.registerCSS(PK),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:s,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),s!=null&&this.setPickerMinWidth(s),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:n,inputWidth:i}=this.config;if(n){const s=es(n,this.beans);s&&this.eIcon.appendChild(s)}i!=null&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),TS(e,!1),this.ariaRole&&dl(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case J.UP:case J.DOWN:case J.ENTER:case J.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case J.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:s=!0},maxPickerHeight:o,minPickerWidth:r,maxPickerWidth:c,variableWidth:u,beans:h,eWrapper:f}=this,p={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{const E=jk(h);this.beforeHidePicker(),E&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:f};e.style.position="absolute";const m=h.popupSvc,w=m.addPopup(p);u?(r&&(e.style.minWidth=r),e.style.width=VR(Kp(f)),c&&(e.style.maxWidth=c)):Xp(e,c??Kp(f));const S=o??`${LR(m.getPopupParent())}px`;return e.style.setProperty("max-height",S),this.alignPickerToComponent(),w.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:i},eWrapper:s,pickerComponent:o}=this,r=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:s,ePopup:o.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();TS(t,e);const n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return Xp(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},_K=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",aE=class extends IK{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(_K)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:dp(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new FK("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),j9(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===J.TAB&&this.hidePicker(),t){case J.ENTER:case J.UP:case J.DOWN:case J.PAGE_UP:case J.PAGE_DOWN:case J.PAGE_HOME:case J.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case J.ESCAPE:super.onKeyDown(e);break;case J.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,n){const{listComponent:i,config:{placeholder:s},eDisplayField:o,tooltipFeature:r}=this;if(this.value===e||!i)return this;if(n||i.setValue(e,!0),i.getValue()===this.getValue())return this;let u=i.getDisplayValue();return u==null&&s&&(u=s),o.textContent=u,r?.setTooltipAndRefresh(u??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},kK={selector:"AG-SELECT",component:aE},Yc={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},oO=class extends re{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:c,onFocusIn:u,onFocusOut:h,shouldStopEventPropagation:f,onTabKeyDown:p,handleKeyDown:m,isEmpty:w,eFocusableElement:S}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=c,this.eFocusableElement=S,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=u,this.providedFocusOut=h,this.providedShouldStopEventPropagation=f,this.providedOnTabKeyDown=p,this.providedHandleKeyDown=m,this.providedIsEmpty=w}postConstruct(){this.createManagedBean(new xu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():qc(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=_n(this.beans),n=qc(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let s,o;e?(s=0,o=i):(s=i+1,o=n.length);const r=n.slice(s,o),c=this.gos.get("tabIndex");r.sort((u,h)=>{const f=parseInt(u.getAttribute("tabindex")||"0"),p=parseInt(h.getAttribute("tabindex")||"0");return p===c?1:f===c?-1:f===0?1:p===0?-1:f-p}),r[e?r.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=qc(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return Tl(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},LK=class extends re{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,s=[t,n],o={setTabIndex:x=>{s.forEach(P=>x!=null?P.setAttribute("tabindex",x):P.removeAttribute("tabindex"))}};this.addTabGuards(t,n);const{focusTrapActive:r=!1,onFocusIn:c,onFocusOut:u,focusInnerElement:h,handleKeyDown:f,onTabKeyDown:p,shouldStopEventPropagation:m,isEmpty:w,forceFocusOutWhenTabGuardsAreEmpty:S,isFocusableContainer:E}=e;this.tabGuardCtrl=this.createManagedBean(new oO({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:c,onFocusOut:u,focusInnerElement:h,handleKeyDown:f,onTabKeyDown:p,shouldStopEventPropagation:m,isEmpty:w,forceFocusOutWhenTabGuardsAreEmpty:S,isFocusableContainer:E}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=_n(this.beans).createElement("div"),n=e==="top"?Yc.TAB_GUARD_TOP:Yc.TAB_GUARD_BOTTOM;return t.classList.add(Yc.TAB_GUARD,n),dl(t,"presentation"),t}addTabGuards(e,t){const n=this.eFocusableElement;n.insertAdjacentElement("afterbegin",e),n.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];_i(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){NR(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Uo(e),Uo(t),super.destroy()}},OK=class extends Ft{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new LK(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,n){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,n)}},Ba=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new ul,this.preventMouseClick=t;const n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchmove",i,{passive:!0}),e.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",n,{passive:!0}),e.removeEventListener("touchmove",i,{passive:!0}),e.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;const i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!LL(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},VK=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!n,this.tickDown=e.clientY>i.bottom-s&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},rO=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${Ok}/${this.frameworkName}-data-grid`,e7(this.baseDocLink)}setInterval(e,t){return new it(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let s={};if(typeof i=="object"?s=i:typeof i=="boolean"&&(s={capture:i}),s.passive==null){const o=nL(t);o!=null&&(s.passive=o)}e.addEventListener(t,n,s)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}};function NK(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var BK=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],lP=Object.fromEntries(BK.map((e,t)=>[e,t]));function GK(e,t){const n=(e.beanName?lP[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?lP[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function HK(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var zK=class extends re{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:i,ctrlsSvc:s}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),NL(this.gos,t),this.createManagedBean(new QR(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=$o(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),s.register("gridCtrl",this)}isDetailGrid(){return kL(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){const{visibleCols:s,focusSvc:o}=this.beans,r=s.allCols,c=Ct(r);if(o.focusGridView({column:c,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:i,visibleCols:s}=this.beans,o=s.allCols;if(e){if(n.length>1)return this.focusContainer(Ct(n),e);const r=Ct(o);if(i.focusGridView({column:r,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||sl(this.beans)){if(i.focusGridView({column:o[0],backwards:e}))return!0;for(let r=1;r<n.length;r++)if(ml(n[r].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||n<0||n>=t.length)return;const s=t[n];s.setAllowFocus?.(!0),setTimeout(()=>{s.setAllowFocus?.(!1)})}isFocusable(){const e=this.beans;return!Zm(e)||!sl(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const n=qt(this.beans),i=e.findIndex(o=>o.getGui().contains(n)),s=i+(t?-1:1);return{indexWithFocus:i,nextIndex:s}}focusContainer(e,t){e.setAllowFocus?.(!0);const n=ml(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Ve=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},cP={dispatchEvent:"CommunityCore",...Ve("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...Ve("GridState",{getState:0,setState:0}),...Ve("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...Ve("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...Ve("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...Ve("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...Ve("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...Ve("ValueCache",{expireValueCache:0}),...Ve("CellApi",{getCellValue:0}),...Ve("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...Ve("Sort",{onSortChanged:0}),...Ve("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...Ve("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...Ve("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...Ve("HighlightChanges",{flashCells:0}),...Ve("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...Ve("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...Ve("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...Ve("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...Ve("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...Ve("ColumnResize",{setColumnWidths:0}),...Ve("ColumnHover",{isColumnHovered:0}),...Ve("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...Ve("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...Ve("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...Ve("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...Ve("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...Ve("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...Ve("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...Ve("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...Ve("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...Ve("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Ve("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Ve("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...Ve("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Ve("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Ve("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Ve("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Ve("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Ve("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Ve("ContextMenu",{showContextMenu:0}),...Ve("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...Ve("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Ve("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...Ve("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...Ve("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Ve("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Ve("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Ve("StatusBar",{getStatusPanel:0})},dw={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},UK=(e,t)=>e.eventSvc.dispatchEvent(t),aO=class{};Reflect.defineProperty(aO,"name",{value:"GridApi"});var WK=class extends re{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new aO,this.fns={...dw,dispatchEvent:UK},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(cP))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:n,beans:i}=this;n!==dw&&(n[e]=i?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:i}=this;if(!t)ge(26,{fnName:e,preDestroyLink:i});else{const s=cP[e];n.assertModuleRegistered(s,`api.${e}`)&&ge(27,{fnName:e,module:s})}}destroy(){super.destroy(),this.fns=dw,this.beans=null}};function jK(e){return e.context.getGridId()}function $K(e){e.gridDestroySvc.destroy()}function qK(e){return e.gridDestroySvc.destroyCalled}function KK(e,t){return e.gos.get(t)}function YK(e,t,n){lO(e,{[t]:n})}function lO(e,t){e.gos.updateGridOptions({options:t})}function QK(e,t){const n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var XK={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},ZK=class extends Ft{constructor(e,t,n){super(XK),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(es("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:n,eCell:i,gos:s}=this,o=n.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(i,0,0),o){const c=Me(s,{rowNode:t,dragEvent:e});o(c)}else try{const c=JSON.stringify(t.data);r.setData("application/json",c),r.setData("text/plain",c)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function JK(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function eY(e,t){const n=e.dragAndDrop?.findExternalZone(t);n&&e.dragAndDrop?.removeDropTarget(n)}function tY(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function nY(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function iY(e,t){const n=e.rowDropHighlightSvc;if(!n)return;const i=t?.row;let s=t?.dropIndicatorPosition;s!=="above"&&s!=="below"&&s!=="inside"&&(s="none");const o=i?.rowIndex;o==null||s==="none"?n.clear():n.set(i,s)}var sY=class extends re{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},oY={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},rY=class extends Ft{constructor(e,t,n,i,s,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=s,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,rowNode:t,column:n,gos:i}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate(oY),this.getGui().appendChild(es("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const s=i.get("rowDragManaged")?new lY(this,t,n):new aY(this,t,n);this.createManagedBean(s,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const n=this.beans.selectionSvc?.getSelectedNodes()??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);const n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{const i=this.getDragItem(),s=i.rowNodes?.length||1,o=this.getRowDragText(this.column);return o?o(i,s):s===1?this.cellValueFn():`${s} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},cO=class extends re{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e,t=!1){const n={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,n);else{let i=!t,s=!1;const{column:o,rowNode:r,parent:c}=this;if(o){const u=o.getColDef().rowDrag;s=typeof u=="function",i=(t?!!u:o.isRowDrag(r))||c.isCustomGui()}s?(c.setDisplayed(!0,n),c.setVisible(i&&!t,n)):(c.setDisplayed(i,n),c.setVisible(!t,n))}}},aY=class extends cO{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},lY=class extends cO{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:n}=this.beans,i=e.rowDragFeature,s=i&&i.shouldPreventRowMove(),o=n.get("suppressRowDrag"),r=t.hasExternalDropZones(),c=s&&!r||o;this.setDisplayedOrVisible(c,this.rowNode.footer)}},Nh=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:i}=e;if(i)for(let s=0;s<i.length;++s)this.depthFirstSearchChangedPath(i[s],t);t(n)}depthFirstSearchEverything(e,t,n){const i=e.childrenAfterGroup;if(i)for(let s=0,o=i.length;s<o;++s){const r=i[s];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,n):n&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){const s=this.mapToItems[n.id],o=this.mapToItems[n.parent.id];o.children||(o.children=[]),o.children.push(s),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(s=>n[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(s=>!n[s.getId()])}},cY=class extends re{constructor(e){super(),this.eContainer=null,this.lastDraggingEvent=null,this.autoScrollService=null,this.makeGroupThrottleTimer=null,this.makeGroupThrottleTarget=null,this.makeGroupThrottled=!1,this.makeGroupThrottleCallback=()=>{this.makeGroupThrottleTimer=null;const t=this.lastDraggingEvent;t&&(this.makeGroupThrottled=!0,this.doManagedDrag(t,!1),this.makeGroupExpanded(this.makeGroupThrottleTarget))},this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:n}=this.beans;gn(t)&&(this.clientSideRowModel=e),n.whenReady(this,i=>{const s=i.gridBodyCtrl;let o=0;const r=()=>s.scrollFeature.getVScrollPosition().top;this.autoScrollService=new VK({scrollContainer:s.eBodyViewport,scrollAxis:"y",getVerticalPosition:r,setVerticalPosition:c=>s.scrollFeature.setVerticalScrollPosition(c),onScrollCallback:()=>{const c=r();if(o!==c){o=c;const u=this.lastDraggingEvent;u&&this.onDragging(u)}}})})}destroy(){super.destroy(),this.eContainer=null,this.lastDraggingEvent=null,this.makeGroupThrottleClear();const e=this.autoScrollService;e&&(this.autoScrollService=null,e?.ensureCleared())}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:n}=this.beans;return!!((e?.columns??[]).length||t?.isAnyFilterPresent()||n?.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=[...this.beans.selectionSvc?.getSelectedNodes()??[]].sort((s,o)=>s.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(o));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.autoScrollService&&(this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e,this.gos.get("rowDragManaged")&&this.doManagedDrag(e,!0),this.autoScrollService.check(e.event))}doManagedDrag(e,t){const{dragAndDrop:n,gos:i}=this.beans,s=this.isFromThisGrid(e);if(!(i.get("rowDragManaged")&&this.shouldPreventRowMove()))if(i.get("suppressMoveWhenRowDragging")||!s){if(n.isDropZoneWithinThisGrid(e)){const r=this.managedRowsDrop(e,t),c=r?.target,u=this.beans.rowDropHighlightSvc;c&&r.rows.length?u.set(c,r.position):u.clear()}}else{const r=this.managedRowsDrop(e,t);r&&this.dropRows(r)}}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(Ct(t.split("-")),10)}managedRowsDrop(e,t){const{rowNode:n,rowNodes:i}=e.dragItem,o=i?.length&&(n??i[0]);if(!o)return this.makeGroupThrottleClear(),null;const{beans:r,gos:c,clientSideRowModel:u}=this,h=u.rootNode,f=jF(r,e).y;let p=u.getRowIndexAtPixel(f),m=u.getRow(p)??null;const w=o!==m;let S=m?(f-m.rowTop-m.rowHeight/2)/m.rowHeight||0:1;const E=this.isFromThisGrid(e),P=Zk(c)!=="group"&&E;let M=null;if(P&&m?.footer){M=m.sibling??h;const N=ch(u,-1,m)??ch(u,1,m);S=N&&N.rowIndex>m.rowIndex?-.5:.5,m=N??null}let I=S<0,U=!1;if(E&&m){if(w){if(U=i.indexOf(m)>=0,U){const N=uY(u,p<o.rowIndex,i);N?.parent===m.parent&&(m=N,p=m.rowIndex)}}else{if(Math.abs(S)<=.5)return this.makeGroupThrottleClear(),null;U=!0}(U||!P&&Math.abs(p-o.rowIndex)===1)&&(I=p<o.rowIndex)}const z=this.makeGroupThrottleTarget;z!==null&&z!==m&&this.makeGroupThrottleClear(),m?.expanded&&m.childrenAfterSort?.length&&(this.makeGroupThrottled=!0,this.makeGroupThrottleTarget=m),M===null&&P&&(!m||S>=.5&&m.rowIndex===r.pageBounds.getLastRow()?M=h:this.targetShouldBeParent(m,S,U,i)&&(this.makeGroupThrottled&&(M=m),t&&(M===null||!m.expanded)&&(this.makeGroupThrottleTarget=m,this.makeGroupThrottleStart())),M??(M=m?.parent??h));let W=!1;if(M!==null){if(M===m&&M!==h){W=!0;const N=M.expanded?ch(u,1,m):null;N?.parent===M&&(m=N,W=!1,I=!0)}if(m&&!W){let N=m;for(;N&&N!==h&&N!==M;)m=N,N=N.parent}hY(i,M)&&(M=null)}if(!M&&U&&(P||o===m))return null;const _=W?"inside":I?"above":"below",F={api:this.beans.gridApi,context:this.beans.gridOptions.context,draggingEvent:e,sameGrid:E,position:_,source:o,target:m,newParent:M,rows:i};let k=!1;const O=c.get("isRowValidDropPosition");if(O){const N=O(F);N?typeof N=="object"&&(N.rows!==void 0&&(F.rows=N.rows??im),N.newParent!==void 0&&(F.newParent=N.newParent),N.target!==void 0&&(F.target=N.target),N.position&&(k=!0,F.position=N.position)):F.rows=im}return(!F.newParent||!F.rows.length)&&!k&&(F.position=I?"above":"below"),F}makeGroupThrottleStart(){this.makeGroupThrottleTimer===null&&(this.makeGroupThrottleTimer=window.setTimeout(this.makeGroupThrottleCallback,this.gos.get("rowDragInsertDelay")))}makeGroupExpanded(e){e&&!e.expanded&&e.childrenAfterSort?.length&&e.isExpandable()&&e.setExpanded(!0,this.lastDraggingEvent?.event,!0)}makeGroupThrottleClear(){this.makeGroupThrottled=!1,this.makeGroupThrottleTarget=null;const e=this.makeGroupThrottleTimer;e!==null&&(this.makeGroupThrottleTimer=null,clearTimeout(e))}targetShouldBeParent(e,t,n,i){const s=e?.rowIndex;if(n||s===null)return!1;const o=.25;if(t<-.5+o)return!1;if(t<.5-o)return!0;let r,c=s+1;const u=this.clientSideRowModel;do r=u.getRow(c++);while(r&&r.footer);const h=e.childrenAfterGroup;if(r&&r.parent===e&&h?.length){const f=new Set(i);for(const p of h)if(p.rowIndex!==null&&!f.has(p))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){ge(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e)){ge(56);return}let n={getContainer:e.getContainer};e.fromGrid?n=e:(e.onDragEnter&&(n.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",s))}),e.onDragLeave&&(n.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",s))}),e.onDragging&&(n.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",s))}),e.onDragStop&&(n.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",s))}),e.onDragCancel&&(n.onDragCancel=s=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",s))}));const i={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...n};t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),s=this.onDragging.bind(this),o=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let c;return e?c={getContainer:t,onDragEnter:e.onDragEnter?u=>{n(u),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",u))}:n,onDragLeave:e.onDragLeave?u=>{i(u),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",u))}:i,onDragging:e.onDragging?u=>{s(u),e.onDragging(this.draggingToRowDragEvent("rowDragMove",u))}:s,onDragStop:e.onDragStop?u=>{o(u),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",u))}:o,onDragCancel:e.onDragCancel?u=>{r(u),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",u))}:r,fromGrid:!0}:c={getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:s,onDragStop:o,onDragCancel:r,fromGrid:!0},c}draggingToRowDragEvent(e,t){const n=this.beans,{pageBounds:i,rowModel:s,gos:o}=n,r=jF(this.beans,t).y,c=r>i.getCurrentPagePixelRange().pageLastPixel;let u=-1,h;return c||(u=s.getRowIndexAtPixel(r),h=s.getRow(u)),Me(o,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:u,overNode:h,y:r,vDirection:t.vDirection})}dispatchGridEvent(e,t){const n=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.beans.rowDropHighlightSvc.clear(),this.makeGroupThrottleClear()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:n}=this.beans;if(n.get("rowDragManaged")&&(n.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)){const i=this.managedRowsDrop(e,!1);i&&this.dropRows(i),this.beans.rowDropHighlightSvc.clear()}this.makeGroupThrottleClear()}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:n}=this.beans;n.get("rowDragManaged")&&(n.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.beans.rowDropHighlightSvc.clear(),this.makeGroupThrottleClear()}stopDragging(e){this.autoScrollService?.ensureCleared(),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!1)})}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}dropRows(e){return e.sameGrid?this.moveRows(e):this.addRows(e)}addRows({position:e,target:t,rows:n}){const i=au(this.gos),s=this.clientSideRowModel,o=n.filter(({data:c,rowPinned:u})=>!s.getRowNode(i?.({data:c,level:0,rowPinned:u})??c.id)).map(({data:c})=>c);if(o.length===0)return!1;const r=t?uP(t)+(e==="above"?0:1):void 0;return s.updateRowData({add:o,addIndex:r}),!0}refreshModelAfterDrop(){this.clientSideRowModel.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Nh(!1,this.clientSideRowModel.rootNode),rowNodesOrderChanged:!0})}moveRows({position:e,target:t,rows:n,newParent:i}){let s=!1;const o=this.clientSideRowModel,r=new Set;for(const f of n){if(f.footer||f.rowTop===null&&f!==o.getRowNode(f.id))continue;if(i&&f.parent!==i){if(dY(f,i))continue;f.treeParent=i,s=!0}const p=uO(f);p&&r.add(p)}if(!s&&r.size===0)return!1;const c=this.beans.focusSvc,u=c.getFocusedCell(),h=u&&Kd(this.beans,u);return r.size&&this.reorderLeafChildren(r,...this.getMoveRowsBounds(r,t,e==="above"))&&(s=!0),s?(this.refreshModelAfterDrop(),h?h.focusCell():c.clearFocusedCell(),!0):!1}getMoveRowsBounds(e,t,n){const i=this.clientSideRowModel.rootNode?.allLeafChildren.length??0;let s=uP(t);s<0||s>=i?s=i:n||++s;let o=s,r=Math.min(s,i-1);for(const c of e){const u=c.sourceRowIndex;u<o&&(o=u),u>r&&(r=u)}return[o,s,r]}reorderLeafChildren(e,t,n,i){let s=!1;const o=this.clientSideRowModel.rootNode?.allLeafChildren;if(!e.size||!o)return!1;let r=t;for(let u=t;u<n;++u){const h=o[u];e.has(h)||(h.sourceRowIndex!==r&&(h.sourceRowIndex=r,o[r]=h,s=!0),++r)}let c=i;for(let u=i;u>=n;--u){const h=o[u];e.has(h)||(h.sourceRowIndex!==c&&(h.sourceRowIndex=c,o[c]=h,s=!0),--c)}for(const u of e)u.sourceRowIndex!==r&&(u.sourceRowIndex=r,o[r]=u,s=!0),++r;return s}},uY=(e,t,n)=>t?ch(e,-1,n[0]):ch(e,1,Ct(n)),ch=(e,t,n)=>{if(n){const i=e.getRowCount();let s=n.rowIndex+t;for(;s>=0&&s<i;){const o=e.getRow(s);if(!o||!o.footer)return o;s+=t}}},dY=(e,t)=>{let n=t;for(;n;){if(n===e)return!0;n=n.parent}return!1},hY=(e,t)=>{for(let n=0,i=e.length;n<i;++n)if(e[n].parent!==t)return!1;return!0},uP=e=>{const t=uO(e);return t!==void 0?t.sourceRowIndex:-1},uO=e=>{for(;e;){if(e.sourceRowIndex>=0)return e;const t=e.childrenAfterGroup;if(!t?.length)return;e=t[0]}},fY=class extends re{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const n=t.createManagedBean(new cY(e)),i=this.beans.dragAndDrop;i.addDropTarget(n),t.addDestroyFunc(()=>i.removeDropTarget(n)),this.rowDragFeature=n}createRowDragComp(e,t,n,i,s,o){return new rY(e,t,n,i,s,o)}createRowDragCompForRow(e,t){if(qr(this.gos))return;const n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,i,s,o){const r=this.gos;return r.get("rowDragManaged")&&(!gn(r)||r.get("pagination"))?void 0:this.createRowDragComp(n,e,t,i,s,o)}},gY=class extends re{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row;!e||e.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position)}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const n=e!==this.row,i=e.uiLevel,s=t!==this.position,o=i!==this.uiLevel;(n||s||o)&&(n&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}},dO={moduleName:"Drag",version:Se,beans:[L$]},pY={moduleName:"DragAndDrop",version:Se,dynamicBeans:{dndSourceComp:ZK},icons:{rowDrag:"grip"}},hO={moduleName:"SharedDragAndDrop",version:Se,beans:[k$],dependsOn:[dO],userComponents:{agDragAndDropImage:nK},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},mY={moduleName:"RowDrag",version:Se,beans:[gY,fY],apiFunctions:{addRowDropZone:JK,removeRowDropZone:eY,getRowDropZoneParams:tY,getRowDropPositionIndicator:nY,setRowDropPositionIndicator:iY},dependsOn:[hO]},CY={moduleName:"HorizontalResize",version:Se,beans:[sY],dependsOn:[dO]},vY=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",yY=class extends re{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){e(),t();return}const s=o=>{for(;o.length;){const r=o.pop();r&&r()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),s(n)},0),window.setTimeout(()=>{t(),s(i)},200)})}};function wY(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function SY(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var bY=class extends re{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function RY(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,s)=>{const o=e.indexOf(i),r=e.indexOf(s);return o-r})}function EY(e){const t=[...e];return e.forEach(n=>{let i=null,s=n.getParent();for(;s!=null&&s.getDisplayedLeafColumns().length===1;)i=s,s=s.getParent();i!=null&&(!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach(c=>{t.includes(c)||t.push(c)})}),t}function TY(e,t,n,i){const s=i.allCols;let o=null,r=null;for(let c=0;c<e.length;c++){const u=e[c],h=n.getProposedColumnOrder(t,u);if(!n.doesOrderPassRules(h))continue;const f=h.filter(m=>s.includes(m));if(r===null)r=f;else if(!El(f,r))break;const p=DY(h);(o===null||p<o.fragCount)&&(o={move:u,fragCount:p})}return o}function fO(e){const{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:s,fakeEvent:o,pinned:r,gos:c,colModel:u,colMoves:h,visibleCols:f}=e;let{allMovingColumns:p}=e;t&&(p=EY(p));const m=p.slice();RY(u.getCols(),m);const w=FY({movingCols:m,draggingRight:n,xPosition:i,pinned:r,gos:c,colModel:u,visibleCols:f}),S=xY(m,u);if(w.length===0)return;const E=w[0];if(S!==null&&(t||!s)&&!o&&(!n&&E>=S||n&&E<=S))return;const P=TY(w,m,h,f);if(!P)return;const M=P.move;if(!(M>u.getCols().length-m.length))return{columns:m,toIndex:M}}function gO(e){const{columns:t,toIndex:n}=fO(e)||{},{finished:i,colMoves:s}=e;return!t||n==null?null:(s.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function xY(e,t){const n=t.getCols(),i=e.map(u=>n.indexOf(u)).sort((u,h)=>u-h),s=i[0];return Ct(i)-s!==i.length-1?null:s}function DY(e){function t(i){const s=[];let o=i.getOriginalParent();for(;o!=null;)s.push(o),o=o.getOriginalParent();return s}let n=0;for(let i=0;i<e.length-1;i++){let s=t(e[i]),o=t(e[i+1]);[s,o]=s.length>o.length?[s,o]:[o,s],s.forEach(r=>{o.indexOf(r)===-1&&n++})}return n}function AY(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function FY(e){const{movingCols:t,draggingRight:n,xPosition:i,pinned:s,gos:o,colModel:r,visibleCols:c}=e;if(o.get("suppressMovableColumns")||t.some(I=>I.getColDef().suppressMovable))return[];const h=AY(c,s),f=r.getCols(),p=h.filter(I=>t.includes(I)),m=h.filter(I=>!t.includes(I)),w=f.filter(I=>!t.includes(I));let S=0,E=i;if(n){let I=0;p.forEach(U=>I+=U.getActualWidth()),E-=I}if(E>0){for(let I=0;I<m.length;I++){const U=m[I];if(E-=U.getActualWidth(),E<0)break;S++}n&&S++}let x;if(S>0){const I=m[S-1];x=w.indexOf(I)+1}else x=w.indexOf(m[0]),x===-1&&(x=0);const P=[x],M=(I,U)=>I-U;if(n){let I=x+1;const U=f.length-1;for(;I<=U;)P.push(I),I++;P.sort(M)}else{let I=x;const U=f.length-1;let z=f[I];for(;I<=U&&h.indexOf(z)<0;)I++,P.push(I),z=f[I];I=x-1;const W=0;for(;I>=W;)P.push(I),I--;P.sort(M).reverse()}return P}function qS(e){const{pinned:t,fromKeyboard:n,gos:i,ctrlsSvc:s,useHeaderRow:o,skipScrollPadding:r}=e;let c=s.getHeaderRowContainerCtrl(t)?.eViewport,{x:u}=e;return c?(n&&(u-=c.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(c=c.querySelector(".ag-header-row")),u=c.clientWidth-u),t==null&&!r&&(u+=s.get("center").getCenterViewportScrollLeft()),u):0}function hw(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var dP=7,KS=100,Qg=KS/2,PY=5,MY=100,IY=class extends re{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Ce(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},i=n?.columns??[];for(const s of i){const o=s.getPinned();if(s.getColDef().lockPinned){if(o==e)return"move";continue}const r=n?.containerType;if(r===e||!e)return"move";if(e&&(!o||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const s=t.visibleState,o=(n||[]).filter(r=>s[r.getId()]&&!r.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){const{gos:s,ctrlsSvc:o}=this.beans,r=s.get("suppressMoveWhenColumnDragging");if(i&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&Nt(e.hDirection))return;const c=qS({x:e.x,pinned:this.pinned,gos:s,ctrlsSvc:o});t||this.checkCenterForScrolling(c),r?this.handleColumnDragWhileSuppressingMovement(e,t,n,c,i):this.handleColumnDragWhileAllowingMovement(e,t,n,c,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;const i=e.filter(s=>!s.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,i,s){const o=this.getAllMovingColumns(e,!0);if(s){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:c,xPosition:u}=this.getNormalisedXPositionInfo(o,r)||{};if(c==null||u==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:u,fromEnter:t,fakeEvent:n,fromLeft:c})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,s){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)==="right",c=e.dragSource.type===1,u=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:c,xPosition:i,fromLeft:r,fromEnter:t,fakeEvent:n}),h=gO({...u,finished:s});h&&(this.lastMovedInfo=h)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;const s=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(s):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:s,fromEnter:o,fakeEvent:r}=e,{gos:c,colModel:u,colMoves:h,visibleCols:f}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:s,xPosition:i,pinned:this.pinned,fromEnter:o,fakeEvent:r,gos:c,colModel:u,colMoves:h,visibleCols:f}}highlightHoveredColumn(e,t){const{gos:n,colModel:i}=this.beans,s=n.get("enableRtl"),o=i.getCols().filter(f=>f.isVisible()&&f.getPinned()===this.pinned);let r=null,c=null,u=null;for(const f of o){if(c=f.getActualWidth(),r=this.getNormalisedColumnLeft(f,0,s),r!=null){const p=r+c;if(r<=t&&p>=t){u=f;break}}r=null,c=null}if(u)e.indexOf(u)!==-1&&(u=null);else{for(let f=o.length-1;f>=0;f--){const p=o[f],m=o[f].getParent();if(!m){u=p;break}const w=m?.getDisplayedLeafColumns();if(w.length){u=Ct(w);break}}if(!u)return;r=this.getNormalisedColumnLeft(u,0,s),c=u.getActualWidth()}if(this.lastHighlightedColumn?.column!==u&&this.clearHighlighted(),u==null||r==null||c==null)return;let h;t-r<c/2!==s?h=0:h=1,hP(u,h),this.lastHighlightedColumn={column:u,position:h}}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:i}=this.beans,s=n.get("enableRtl"),{firstMovingCol:o,column:r,position:c}=this.getColumnMoveAndTargetInfo(e,t,s);if(!o||!r||c==null)return;const u=i.allCols,h=u.indexOf(o),f=u.indexOf(r),p=c===0!==s,m=h<f||h===f&&!p;let w=0;if(p?m&&(w-=1):m||(w+=1),f+w===h)return;const S=u[f+w];if(!S)return;const E=this.getNormalisedColumnLeft(S,20,s);return{fromLeft:m,xPosition:E}}getColumnMoveAndTargetInfo(e,t,n){const i=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:o}=_Y(e);if(!s||!o||i.column||!t)return{firstMovingCol:s,...i};const c=this.getPinDirection()==="left";return{firstMovingCol:s,position:c?1:0,column:c!==n?s:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:i,ctrlsSvc:s}=this.beans,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return qS({x:n?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:s})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>dP;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:s,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:o,fromEnter:i,fakeEvent:s}),{columns:c,toIndex:u}=fO(r)||{};c&&u!=null&&(this.lastMovedInfo={columns:c,toIndex:u}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(hP(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();let s,o;this.gos.get("enableRtl")?(s=e<n+Qg,o=e>i-Qg):(o=e<n+Qg,s=e>i-Qg),this.needToMoveRight=s,this.needToMoveLeft=o,o||s?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),MY),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*PY,e>KS&&(e=KS);let t=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:i,dragAndDrop:s,gos:o}=this.beans;if(this.failedMoveAttempts<=dP+1||!i)return;if(s.getDragAndDropImageComponent()?.setIcon("pinned",!1),!o.get("suppressMoveWhenColumnDragging")){const r=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(r,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){const i=(e||[]).filter(r=>!r.getColDef().lockPinned);if(!i.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:s,dragAndDrop:o}=this.beans;return s?.setColsPinned(i,t,"uiColumnDragged"),n&&o.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function hP(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function _Y(e){const t=e.length;let n,i;for(let s=0;s<t;s++){if(!n){const o=e[s];o.getLeft()!=null&&(n=o)}if(!i){const o=e[t-1-s];o.getLeft()!=null&&(i=o)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var kY=class extends re{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,i=>{let s;const o=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":s=[[o,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":s=[[o,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:s=[[o,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=s}),this.moveColumnFeature=this.createManagedBean(new IY(n)),this.bodyDropPivotTarget=this.createManagedBean(new bY(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},LY=class extends re{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const i=this.beans.colModel.getCols();if(!i)return;const s=i[e];this.moveColumns([s],t,n)}moveColumns(e,t,n,i=!0){const{colModel:s,colAnimation:o,visibleCols:r,eventSvc:c}=this.beans,u=s.getCols();if(!u)return;if(t>u.length-e.length){ge(30,{toIndex:t});return}o?.start();const h=s.getColsForKeys(e);this.doesMovePassRules(h,t)&&(NF(s.getCols(),h,t),r.refresh(n),c.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,toIndex:t,finished:i,source:n})),o?.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;return!(!dL(e,t.getColTree())||!(s=>{const o=h=>h?h==="left"||h===!0?-1:1:0,r=n.get("enableRtl");let c=r?1:-1,u=!0;return s.forEach(h=>{const f=o(h.getColDef().lockPosition);r?f>c&&(u=!1):f<c&&(u=!1),c=f}),u})(e))}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return NF(i,e,t),i}createBodyDropTarget(e,t){return new kY(e,t)}moveHeader(e,t,n,i,s){const{ctrlsSvc:o,gos:r,colModel:c,visibleCols:u,focusSvc:h}=this.beans,f=t.getBoundingClientRect(),p=f.left,m=on(n),w=m?f.width:n.getActualWidth(),S=e==="left"!==r.get("enableRtl"),E=qS({x:S?p-20:p+w+20,pinned:i,fromKeyboard:!0,gos:r,ctrlsSvc:o}),x=h.focusedHeader;gO({allMovingColumns:m?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:E,pinned:i,fromEnter:!1,fakeEvent:!1,gos:r,colModel:c,colMoves:this,visibleCols:u,finished:!0});let P;if(m){const M=n.getDisplayedLeafColumns();P=S?M[0]:Ct(M)}else P=n;if(o.getScrollFeature().ensureColumnVisible(P,"auto"),(!s.isAlive()||r.get("ensureDomOrder"))&&x){let M;if(m){const I=n.getGroupId(),U=n.getLeafColumns();if(!U.length)return;const z=U[0].getParent();if(!z)return;M=OY(z,I)}else M=n;M&&h.focusHeaderPosition({headerPosition:{...x,column:M}})}}setDragSourceForHeader(e,t,n){const{gos:i,colModel:s,dragAndDrop:o,visibleCols:r}=this.beans;let c=!i.get("suppressDragLeaveHidesColumns");const u=on(t),h=u?t.getProvidedColumnGroup().getLeafColumns():[t],p={type:1,eElement:e,getDefaultIconName:()=>c?"hide":"notAllowed",getDragItem:u?()=>NY(t,r.allCols):()=>VY(t),dragItemName:n,onDragStarted:()=>{c=!i.get("suppressDragLeaveHidesColumns"),hw(h,!0)},onDragStopped:()=>hw(h,!1),onDragCancelled:()=>hw(h,!1),onGridEnter:m=>{if(c){const{columns:w=[],visibleState:S}=m??{},E=u?P=>!S||S[P.getColId()]:()=>!0,x=w.filter(P=>!P.getColDef().lockVisible&&E(P));s.setColsVisible(x,!0,"uiColumnMoved")}},onGridExit:m=>{if(c){const w=m?.columns?.filter(S=>!S.getColDef().lockVisible)||[];s.setColsVisible(w,!1,"uiColumnMoved")}}};return o.addDragSource(p,!0),p}};function OY(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function VY(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function NY(e,t){const n=e.getProvidedColumnGroup().getLeafColumns(),i={};n.forEach(c=>i[c.getId()]=c.isVisible());const s=[];t.forEach(c=>{n.indexOf(c)>=0&&(s.push(c),is(n,c))}),n.forEach(c=>s.push(c));const o=[],r=e.getLeafColumns();for(const c of s)r.indexOf(c)!==-1&&o.push(c);return{columns:s,columnsInSplit:o,visibleState:i,containerType:o[0]?.pinned}}var BY={moduleName:"ColumnMove",version:Se,beans:[LY,yY],apiFunctions:{moveColumnByIndex:wY,moveColumns:SY},dependsOn:[hO],css:[vY]},GY=class extends re{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;e.forEach(o=>this.cloneItemIntoDummy(o,n)),i.appendChild(n);const s=n.offsetWidth;return i.removeChild(n),t=t??this.gos.get("autoSizePadding"),s+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(n=>{const i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const i=document.createElement("div"),s=i.classList;["ag-header-cell","ag-header-group-cell"].some(c=>n.classList.contains(c))?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(u=>r.classList.contains(u))){for(let u=0;u<r.classList.length;u++){const h=r.classList[u];h!="ag-row-position-absolute"&&s.add(h)}break}r=r.parentElement}i.appendChild(n),t.appendChild(i)}},pO={moduleName:"AutoWidth",version:Se,beans:[GY]};function HY(e,t,n=!0,i="api"){e.colResize?.setColumnWidths(t,!1,n,i)}var zY=class extends re{constructor(e,t,n,i){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:s,groupAfterStartWidth:o,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const i=this.normaliseDragChange(t),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)}getInitialValues(e){const t=u=>u.reduce((h,f)=>h+f.getActualWidth(),0),n=(u,h)=>u.map(f=>f.getActualWidth()/h),i=this.getColumnsToResize(),s=t(i),o=n(i,s),r={columnsToResize:i,resizeStartWidth:s,resizeRatios:o};let c=null;if(e&&(c=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),c){const u=c.getDisplayedLeafColumns(),h=r.groupAfterColumns=u.filter(p=>p.isResizable()),f=r.groupAfterStartWidth=t(h);r.groupAfterRatios=n(h,f)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){const{columnsToResize:s,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:c,groupAfterStartWidth:u,groupAfterRatios:h}=e,f=[];if(f.push({columns:s,ratios:r,width:t}),c){const p=t-o;f.push({columns:c,ratios:h,width:u-p})}this.beans.colResize?.resizeColumnSets({resizeSets:f,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},UY=class extends re{constructor(e,t,n,i,s){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=s}postConstruct(){const e=[];let t,n;const i=()=>{if(Wt(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:c}=this.beans,u=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(u),n&&c&&e.push(c.addColumnAutosize(this.eResize,this.column))},s=()=>{e.forEach(r=>r()),e.length=0},o=()=>{const r=this.column.isResizable(),c=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||c!==n)&&(t=r,n=c,s(),i())};o(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:n,lastResizeAmount:i,resizeStartWidth:s,beans:o}=this,r=this.normaliseResizeAmount(t),c=s+r,u=[{key:n,newWidth:c}],{pinnedCols:h,ctrlsSvc:f,colResize:p}=o;if(this.column.getPinned()){const m=h?.leftWidth??0,w=h?.rightWidth??0,S=Mh(f.getGridBodyCtrl().eBodyViewport)-50;if(m+w+(r-i)>S)return}this.lastResizeAmount=r,p?.setColumnWidths(u,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},WY=class extends re{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,i){const s=[],{colModel:o,gos:r,visibleCols:c}=this.beans;e.forEach(u=>{const h=o.getColDefCol(u.key)||o.getCol(u.key);if(!h)return;if(s.push({width:u.newWidth,ratios:[1],columns:[h]}),r.get("colResizeDefault")==="shift"&&(t=!t),t){const p=c.getColAfter(h);if(!p)return;const m=h.getActualWidth()-u.newWidth,w=p.getActualWidth()+m;s.push({width:w,ratios:[1],columns:[p]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:n,source:i})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(f=>jY(f)))){if(n){const f=t&&t.length>0?t[0].columns:null;lu(this.eventSvc,f,n,i)}return}const o=[],r=[];t.forEach(f=>{const{width:p,columns:m,ratios:w}=f,S={},E={};m.forEach(M=>r.push(M));let x=!0,P=0;for(;x;){if(P++,P>1e3){vt(31);break}x=!1;const M=[];let I=0,U=p;m.forEach((W,_)=>{if(E[W.getId()])U-=S[W.getId()];else{M.push(W);const k=w[_];I+=k}});const z=1/I;M.forEach((W,_)=>{const F=_===M.length-1;let k;F?k=U:(k=Math.round(w[_]*p*z),U-=k);const O=W.getMinWidth(),N=W.getMaxWidth();k<O?(k=O,E[W.getId()]=!0,x=!0):N>0&&k>N&&(k=N,E[W.getId()]=!0,x=!0),S[W.getId()]=k})}m.forEach(M=>{const I=S[M.getId()];M.getActualWidth()!==I&&(M.setActualWidth(I,i),o.push(M))})});const c=o.length>0;let u=[];if(c){const{colFlex:f,visibleCols:p,colViewport:m}=this.beans;u=f?.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0})??[],p.setLeftValues(i),p.updateBodyWidths(),m.checkViewportColumns()}const h=r.concat(u);(c||n)&&lu(this.eventSvc,h,n,i,u)}resizeHeader(e,t,n){if(!e.isResizable())return;const i=e.getActualWidth(),s=e.getMinWidth(),o=e.getMaxWidth(),r=Math.min(Math.max(i+t,s),o);this.setColumnWidths([{key:e,newWidth:r}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,i,s){return new UY(e,t,n,i,s)}createGroupResizeFeature(e,t,n,i){return new zY(e,t,n,i)}};function jY(e){const{columns:t,width:n}=e;let i=0,s=0,o=!0;t.forEach(u=>{const h=u.getMinWidth();i+=h||0;const f=u.getMaxWidth();f>0?s+=f:o=!1});const r=n>=i,c=!o||n<=s;return r&&c}var $Y={moduleName:"ColumnResize",version:Se,beans:[WY],apiFunctions:{setColumnWidths:HY},dependsOn:[CY,pO]},qY=class extends re{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},KY=class extends nE{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,n,i,s){const{column:o,beans:r}=this,{context:c,colNames:u,colHover:h,rangeSvc:f,colResize:p}=r;this.comp=e,s=of(this,c,s),this.setGui(t,s),this.displayName=u.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:s}),this.setupUserComp(),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const m=this.rowCtrl.pinned,w=o.getProvidedColumnGroup().getLeafColumns();h?.createHoverFeature(s,w,t),f?.createRangeHighlightFeature(s,o,e),s.createManagedBean(new tE(o,t,r)),s.createManagedBean(new qY(e,o)),p?this.resizeFeature=s.createManagedBean(p.createGroupResizeFeature(e,n,m,o)):e.setResizableDisplayed(!1),s.createManagedBean(new xu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,w),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return Me(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=Ct(t)===e;if(!n&&!i)return;const s=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(u=>u.column.isMoving());let r=!1,c=!1;if(o){const u=this.beans.gos.get("enableRtl"),h=s===1,f=s===0;n&&(u?c=h:r=f),i&&(u?r=f:c=h)}this.comp.toggleCss("ag-header-highlight-before",r),this.comp.toggleCss("ag-header-highlight-after",c)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const i=n.getInitialValues(t);n.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:i}=this.beans,s=this.column,o=s.getProvidedColumnGroup(),r=Me(n,{displayName:this.displayName,columnGroup:s,setExpanded:u=>{e.setColumnGroupOpened(o,u,"gridInitializing")},setTooltip:(u,h)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(u,h)},showColumnMenu:(u,h)=>i?.showMenuAfterButtonClick(o,u,"columnMenu",h),showColumnMenuAfterMouseClick:(u,h)=>i?.showMenuAfterMouseEvent(o,u,"columnMenu",h),eGridHeader:this.eGui}),c=R8(t,r);c&&this.comp.setUserCompDetails(c)}addHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=IL(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text")),n.forEach(i=>this.comp.toggleCss(i,!0))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());i.forEach(o=>{e.addManagedListeners(o,{movingChanged:s})}),s()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===J.ENTER){const n=this.column,i=!n.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function YY(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function QY(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function XY(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function ZY(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function JY(e){return e.colGroupSvc?.getColumnGroupState()??[]}function eQ(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function tQ(e){e.colGroupSvc?.resetColumnGroupState("api")}function nQ(e){return e.visibleCols.treeLeft}function iQ(e){return e.visibleCols.treeCenter}function sQ(e){return e.visibleCols.treeRight}function oQ(e){return e.visibleCols.getAllTrees()}function rQ(e,t){for(let n=0;n<t.length;n++){const i=e.indexOf(t[n]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var aQ=class extends re{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:n,colModel:i,colGroupSvc:s,colViewport:o,selectionColSvc:r}=this.beans;t||this.buildTrees(i,s),s?.updateOpenClosedVisibility(),this.leftCols=fw(this.treeLeft),this.centerCols=fw(this.treeCenter),this.rightCols=fw(this.treeRight),r?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(c=>c.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){const i=n.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}n=n.getParent()}}return e}updateBodyWidths(){const e=Do(this.centerCols),t=Do(this.leftCols),n=Do(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,i){let s,o;this.gos.get("enableRtl")?(s=t?t[0]:null,o=n?Ct(n):null):(s=t?Ct(t):null,o=n?n[0]:null),e.getCols().forEach(r=>{r.setLastLeftPinned(r===s,i),r.setFirstRightPinned(r===o,i)})}buildTrees(e,t){const n=e.getColsToShow(),i=n.filter(u=>u.getPinned()=="left"),s=n.filter(u=>u.getPinned()=="right"),o=n.filter(u=>u.getPinned()!="left"&&u.getPinned()!="right"),r=new mL,c=u=>t?t.createColumnGroups(u):u.columns;this.treeLeft=c({columns:i,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=c({columns:s,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=c({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],i=[],s=[];for(const o of t){const r=o.getPinned();r?r===!0||r==="left"?n.push(o):s.push(o):i.push(o)}this.ariaOrderColumns=n.concat(i).concat(s)}getAriaColIndex(e){let t;return on(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{on(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),s=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(o=>{if(s){let r=Do(o);o.forEach(c=>{r-=c.getActualWidth(),c.setLeft(r,e)})}else{let r=0;o.forEach(c=>{c.setLeft(r,e),r+=c.getActualWidth()})}rQ(i,o)}),i.forEach(o=>{o.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,i){const s=[];let o=null;for(let r=0;r<t.length;r++){const c=t[r],u=t.length-r,h=Math.min(c.getColSpan(e),u),f=[c];if(h>1){const m=h-1;for(let w=1;w<=m;w++)f.push(t[r+w]);r+=m}let p;n?(p=!1,f.forEach(m=>{n(m)&&(p=!0)})):p=!0,p&&(s.length===0&&o&&(i&&i(c))&&s.push(o),s.push(c)),o=c}return s}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};ol(this.treeCenter,!1,e),ol(this.treeLeft,!1,e),ol(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const i=this[t[n]];if(i.length)return e?Ct(i):i[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return Do(this.leftCols)}getDisplayedColumnsRightWidth(){return Do(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const i=t==="first";let s;if(on(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;s=i?o[0]:Ct(o)}else s=e;return(i?n[0]:Ct(n))===s}};function ol(e,t,n){if(e)for(let i=0;i<e.length;i++){const s=e[i];if(on(s)){const o=t?s.getDisplayedChildren():s.getChildren();ol(o,t,n)}n(s)}}function fw(e){const t=[];return ol(e,!0,n=>{Kr(n)&&t.push(n)}),t}var lQ=class extends re{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return ko(null,t,n=>{Qn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];ko(null,t,i=>{if(Qn(i)){const s=i.getColGroupDef(),o={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};n.push(o)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:i,visibleCols:s,eventSvc:o}=this.beans;if(!n.getColTree().length)return;i?.start();const c=[];e.forEach(u=>{const h=u.groupId,f=u.open,p=this.getProvidedColGroup(h);p&&p.isExpanded()!==f&&(p.setExpanded(f),c.push(p))}),s.refresh(t,!0),c.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:c.length===1?c[0]:void 0,columnGroups:c}),i?.finish()}setColumnGroupOpened(e,t,n){let i;Qn(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return ko(null,this.beans.colModel.getColTree(),n=>{Qn(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=t==="After"?Ct(i):i[0],o=`getCol${t}`;for(;;){const r=this.beans.visibleCols[o](s);if(!r)return null;const c=this.getColGroupAtLevel(r,n);if(c!==e)return c}}getColGroupAtLevel(e,t){let n=e.getParent(),i,s;for(;i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),!(i+s<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();ol(e,!1,t=>{on(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(on(e))return e;const n=this.beans.visibleCols.getAllTrees(),i=typeof t=="number";let s=null;return ol(n,!1,o=>{if(on(o)){const r=o;let c;i?c=e===r.getGroupId()&&t===r.getPartId():c=e===r.getGroupId(),c&&(s=r)}}),s}createColumnGroups(e){const{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:s,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(s),c=[];let u=t;for(;u.length;){const h=u;u=[];let f=0;const p=m=>{const w=f;f=m;const S=h[w],x=(on(S)?S.getProvidedColumnGroup():S).getOriginalParent();if(x==null){for(let M=w;M<m;M++)c.push(h[M]);return}const P=this.createColumnGroup(x,n,r,i,o);for(let M=w;M<m;M++)P.addChild(h[M]);u.push(P)};for(let m=1;m<h.length;m++){const w=h[m],E=(on(w)?w.getProvidedColumnGroup():w).getOriginalParent(),x=h[f],M=(on(x)?x.getProvidedColumnGroup():x).getOriginalParent();E!==M&&p(m)}f<h.length&&p(h.length)}return o||this.setupParentsIntoCols(c,null),c}createProvidedColumnGroup(e,t,n,i,s,o,r){const c=s.getUniqueKey(t.groupId||null,null),u=VF(this.beans,t,c),h=new pp(u,c,!1,n);this.createBean(h);const f=this.findExistingGroup(t,o);f&&o.splice(f.idx,1);const p=f?.group;p&&h.setExpanded(p.isExpanded());const m=lL(this.beans,u.children,n+1,e,i,s,o,r);return h.setChildren(m),h}balanceColumnTree(e,t,n,i){const s=[];for(let o=0;o<e.length;o++){const r=e[o];if(Qn(r)){const c=r,u=this.balanceColumnTree(c.getChildren(),t+1,n,i);c.setChildren(u),s.push(c)}else{let c,u;for(let h=t;h<n;h++){const f=i.getUniqueKey(null,null),p=VF(this.beans,null,f),m=new pp(p,f,!0,h);this.createBean(m),u&&u.setChildren([m]),u=m,c||(c=u)}if(c&&u)if(s.push(c),e.some(f=>Qn(f))){u.setChildren([r]);continue}else{u.setChildren(e);break}s.push(r)}}return s}findDepth(e){let t=0,n=e;for(;n&&n[0]&&Qn(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let i=0;i<e.length;i++){const s=e[i];if(Qn(s)){const o=s,r=this.findMaxDepth(o.getChildren(),t+1);n<r&&(n=r)}}return n}balanceTreeForAutoCols(e,t){const n=[];return e.forEach(i=>{let s=i;for(let o=t-1;o>=0;o--){const r=new pp(null,`FAKE_PATH_${i.getId()}}_${o}`,!0,o);this.createBean(r),r.setChildren([s]),s.originalParent=r,s=r}t===0&&(i.originalParent=null),n.push(s)}),n}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){const s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}createColumnGroup(e,t,n,i,s){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),c=GL(o,r);let u=n[c];return u&&u.getProvidedColumnGroup()!==e&&(u=null),Ce(u)?u.reset():(u=new Vh(e,o,r,i),s||this.createBean(u)),u}mapOldGroupsById(e){const t={},n=i=>{i.forEach(s=>{if(on(s)){const o=s;t[s.getUniqueId()]=o,n(o.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,on(n)){const i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}},cQ={moduleName:"ColumnGroup",version:Se,dynamicBeans:{headerGroupCellCtrl:KY},beans:[lQ],apiFunctions:{getAllDisplayedColumnGroups:oQ,getCenterDisplayedColumnGroups:iQ,getColumnGroup:QY,getColumnGroupState:JY,getDisplayNameForColumnGroup:ZY,getLeftDisplayedColumnGroups:nQ,getProvidedColumnGroup:XY,getRightDisplayedColumnGroups:sQ,resetColumnGroupState:tQ,setColumnGroupOpened:YY,setColumnGroupState:eQ}},uQ={tag:"div",cls:"ag-skeleton-container"},dQ=class extends Ft{constructor(){super(uQ)}init(t){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>Fh(t.eParentOfValue)),Fh(t.eParentOfValue,n),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const n=t("ariaSkeletonCellLoadingFailed","Row failed to load");ru(this.getGui(),n)}setupLoading(t){const n=an({tag:"div",cls:"ag-skeleton-effect"}),i=t.node.rowIndex;if(i!=null){const r=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${r}%`}this.getGui().appendChild(n);const s=this.getLocaleTextFunc(),o=t.deferRender?s("ariaDeferSkeletonCellLoading","Cell is loading"):s("ariaSkeletonCellLoading","Row data is loading");ru(this.getGui(),o)}refresh(t){return!1}},hQ={moduleName:"CheckboxCellRenderer",version:Se,userComponents:{agCheckboxCellRenderer:lK}},fQ={moduleName:"SkeletonCellRenderer",version:Se,userComponents:{agSkeletonCellRenderer:dQ}};function gQ(e,t){const n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function pQ(e){return e.colModel.getColumnDefs()}function mQ(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function CQ(e,t){return e.colModel.getColDefCol(t)}function vQ(e){return e.colModel.getColDefCols()}function yQ(e,t){return fs(e,t,"api")}function wQ(e){return rm(e)}function SQ(e){Y7(e,"api")}function bQ(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function RQ(e){return e.visibleCols.isPinningLeft()}function EQ(e){return e.visibleCols.isPinningRight()}function TQ(e,t){return e.visibleCols.getColAfter(t)}function xQ(e,t){return e.visibleCols.getColBefore(t)}function DQ(e,t,n){e.colModel.setColsVisible(t,n,"api")}function AQ(e,t,n){e.pinnedCols?.setColsPinned(t,n,"api")}function FQ(e){return e.colModel.getCols()}function PQ(e){return e.visibleCols.leftCols}function MQ(e){return e.visibleCols.centerCols}function IQ(e){return e.visibleCols.rightCols}function _Q(e){return e.visibleCols.allCols}function kQ(e){return e.colViewport.getViewportColumns()}function YS(e,t){if(!e)return;const n=e,i={};return Object.keys(n).forEach(s=>{if(t&&t.indexOf(s)>=0||mk.has(s))return;const o=n[s];typeof o=="object"&&o!==null&&o.constructor===Object?i[s]=YS(o):i[s]=o}),i}var LQ=class extends re{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,i){const s=e.slice();t?s.sort((c,u)=>n.indexOf(c)-n.indexOf(u)):n&&s.sort((c,u)=>i.indexOf(c)-i.indexOf(u));const o=this.rowGroupColsSvc?.columns,r=this.pivotColsSvc?.columns;return this.buildColumnDefs(s,o,r)}buildColumnDefs(e,t=[],n=[]){const i=[],s={};return e.forEach(o=>{const r=this.createDefFromColumn(o,t,n);let c=!0,u=r,h=o.getOriginalParent(),f=null;for(;h;){let p=null;if(h.isPadding()){h=h.getOriginalParent();continue}const m=s[h.getGroupId()];if(m){m.children.push(u),c=!1;break}if(p=this.createDefFromGroup(h),p&&(p.children=[u],s[p.groupId]=p,u=p,h=h.getOriginalParent()),h!=null&&f===h){c=!1;break}f=h}c&&i.push(u)}),i}createDefFromGroup(e){const t=YS(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){const i=YS(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},OQ=class extends re{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth;if(!n)return[];const{visibleCols:i}=this.beans,s=i.centerCols;let o=-1;if(e.resizingCols){const S=new Set(e.resizingCols);for(let E=s.length-1;E>=0;E--)if(S.has(s[E])){o=E;break}}let r=!1;const c=s.map((S,E)=>{const x=S.getFlex(),P=x!=null&&x>0&&E>o;return r||(r=P),{col:S,isFlex:P,flex:Math.max(0,x??0),initialSize:S.getActualWidth(),min:S.getMinWidth(),max:S.getMaxWidth(),targetSize:0}});if(!r)return[];let u=c.length,h=c.reduce((S,E)=>S+E.flex,0),f=n;const p=(S,E)=>{S.frozenSize=E,S.col.setActualWidth(E,t),f-=E,h-=S.flex,u-=1},m=S=>S.frozenSize!=null;for(const S of c)S.isFlex||p(S,S.initialSize);for(;u>0;){const S=Math.round(h<1?f*h:f);let E,x=0,P=0;for(const U of c){if(m(U))continue;E=U,P+=S*(U.flex/h);const z=P-x,W=Math.round(z);U.targetSize=W,x+=W}E&&(E.targetSize+=S-x);let M=0;for(const U of c){if(m(U))continue;const z=U.targetSize,W=Math.min(Math.max(z,U.min),U.max);M+=W-z,U.violationType=W===z?void 0:W<z?"max":"min",U.targetSize=W}const I=M===0?"all":M>0?"min":"max";for(const U of c)m(U)||(I==="all"||U.violationType===I)&&p(U,U.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();const w=c.filter(S=>S.isFlex&&!S.violationType).map(S=>S.col);if(e.fireResizedEvent){const S=c.filter(x=>x.initialSize!==x.frozenSize).map(x=>x.col),E=c.filter(x=>x.flex).map(x=>x.col);lu(this.eventSvc,S,!0,t,E)}return w}initCol(e){const{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},VQ=["dateTimeString","dateString","text","number","boolean","date"],NQ=class extends re{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===J.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,s)=>{const o=t.getColDefCol(n),r=o?.getColDef();if(!o||!r)return 0;const c=i==null?"":e({column:o,node:null,value:i}),u=s==null?"":e({column:o,node:null,value:s});return c===u?0:c>u?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},n={},i=f=>p=>{const{column:m,node:w,value:S}=p;let E=m.getColDef().valueFormatter;return E===f.groupSafeValueFormatter&&(E=f.valueFormatter),this.beans.valueSvc.formatValue(m,w,S,E)};for(const f of Object.keys(e)){const p=e[f],m={...p,groupSafeValueFormatter:pP(p,this.gos)};t[f]=m,n[f]=i(m)}const s=this.gos.get("dataTypeDefinitions")??{},o={};for(const f of Object.keys(s)){const p=s[f],m=this.processDataTypeDefinition(p,s,[f],e);m&&(t[f]=m,p.dataTypeMatcher&&(o[f]=p.dataTypeMatcher),n[f]=i(m))}const{valueParser:r,valueFormatter:c}=e.object,{valueParser:u,valueFormatter:h}=t.object;this.hasObjectValueParser=u!==r,this.hasObjectValueFormatter=h!==c,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const n={...e};for(const i of VQ)delete n[i],n[i]=e[i]??t[i].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,i){let s;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=i[o];const c=t[o];if(r&&c&&(r=c),!gP(e,r,o))return;s=fP(r,e)}else{if(n.includes(o)){ge(44);return}const r=t[o];if(!gP(e,r,o))return;const c=this.processDataTypeDefinition(r,t,[...n,o],i);if(!c)return;s=fP(c,e)}return{...s,groupSafeValueFormatter:pP(s,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t;const{field:s}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[i];if(!o){ge(47,{cellDataType:i});return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,n),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!gn(n))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(gw(t,i))return!1;const s=t.type===null?e.type:t.type;if(s){const o=n.get("columnTypes")??{};if(om(s).some(c=>{const u=o[c.trim()];return u&&gw(u,i)}))return!1}return!gw(e,i)}inferCellDataType(e,t){if(!e)return;let n;const i=this.getInitialData();if(i){const o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=oh(i,e,o)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](n))??"object"}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.beans.rowModel.rootNode?.allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[s]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:r}=o;r&&(s?.(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const i={},s={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[o],c=this.colModel.getCol(o);if(!c)return;const u=c.getColDef();if(!this.resetColDefIntoCol(c,"cellDataTypeInferred"))return;const h=c.getColDef();if(t&&h.type&&h.type!==u.type){const f=GQ(c,r);f.rowGroup&&f.rowGroupIndex==null&&(i[o]=f),f.pivot&&f.pivotIndex==null&&(s[o]=f),n.push(f)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,s)),n.length&&fs(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:i,pivotColsSvc:s}=this.beans;return i?.restoreColumnOrder(n,e),s?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const i=LS(this.beans,n,e.getColId());return e.setColDef(i,n,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){const t=n=>ge(48,{property:n});if(e.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:n,beans:i,formatValueFuncs:s}=this,o=n[t];i.colFilter?.setColDefPropsForDataType(e,o,s[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,i){const s=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:s});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>wi(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Ii(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>wi(n)??void 0,dateFormatter:n=>Ii(n??null,t)??void 0,valueParser:n=>vp(String(n.newValue))?n.newValue:null,valueFormatter:n=>vp(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&vp(n)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:ES(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&Y$(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>ES(t.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function fP(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...om(e.columnTypes),...om(t.columnTypes)]),n}function gP(e,t,n){return t?t.baseDataType!==e.baseDataType?(ge(46),!1):!0:(ge(45,{parentCellDataType:n}),!1)}function pP(e,t){if(e.valueFormatter)return n=>{if(n.node?.group){const i=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&i!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter({...n,value:n.value.toNumber()});if("value"in n.value)return e.valueFormatter({...n,value:n.value.value})}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function BQ(e,t,n,i){if(!t[n])return!1;const s=e[n];return s===null?(t[n]=!1,!1):i===void 0?!!s:s===i}function gw(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>BQ(e,t,n,i))}function GQ(e,t){const n=pL(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}var HQ={moduleName:"DataType",version:Se,beans:[NQ],dependsOn:[hQ]},zQ={moduleName:"ColumnFlex",version:Se,beans:[OQ]},mO={moduleName:"ColumnApi",version:Se,beans:[LQ],apiFunctions:{getColumnDef:gQ,getDisplayNameForColumn:mQ,getColumn:CQ,getColumns:vQ,applyColumnState:yQ,getColumnState:wQ,resetColumnState:SQ,isPinning:bQ,isPinningLeft:RQ,isPinningRight:EQ,getDisplayedColAfter:TQ,getDisplayedColBefore:xQ,setColumnsVisible:DQ,setColumnsPinned:AQ,getAllGridColumns:FQ,getDisplayedLeftColumns:PQ,getDisplayedCenterColumns:MQ,getDisplayedRightColumns:IQ,getAllDisplayedColumns:_Q,getAllDisplayedVirtualColumns:kQ,getColumnDefs:pQ}};function UQ(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}var WQ=class extends re{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:s}=this.beans;return n&&s?s.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){const i=t?.getColGroupDef();return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,s){const o=e.headerValueGetter;if(o){const r=Me(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:s});return typeof o=="function"?o(r):typeof o=="string"?this.beans.expressionSvc?.evaluate(o,r)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return UQ(e.field)}return""}},jQ=class extends re{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){const{visibleCols:i}=this,s=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const r=i.bodyWidth;this.viewportLeft=r-t-e,this.viewportRight=r-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||$Q(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,o=t<i&&n<i,r=t>s&&n>s;return!o&&!r}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const r=o.getLeft();return Ce(r)&&r>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,s=i.centerCols;return i.getColsForRow(e,s,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const n=i=>{const s=new Set,o={};for(const r of i){let c=r.getParent();const u=r.isSpanHeaderHeight();for(;c&&!s.has(c);){if(u&&c.isPadding()){c=c.getParent();continue}const f=c.getProvidedColumnGroup().getLevel();o[f]??(o[f]=[]),o[f].push(c),s.add(c),c=c.getParent()}}return o};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){const e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function $Q(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var qQ=class extends re{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(s){const o=t(s),r=typeof o;if(r==="string"||r==="number"||r==="boolean"){this.eGui=OR("<span>"+o+"</span>");return}if(o==null){this.eGui=an({tag:"span"});return}this.eGui=o}}return n}},KQ={moduleName:"CellRendererFunction",version:Se,beans:[qQ]},YQ=class extends re{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:i,selectors:s}=e;if(n){const o=(r,c,u,h)=>{this.agGridDefaults[r]=c,(u||h)&&(this.agGridDefaultOverrides[r]={params:u,processParams:h})};for(const r of Object.keys(n)){let c=n[r];if($8(c)&&(c=c.getComp(this.beans)),typeof c=="object"){const{classImp:u,params:h,processParams:f}=c;o(r,u,h,f)}else o(r,c)}}if(i){this.dynamicBeans??(this.dynamicBeans={});for(const o of Object.keys(i))this.dynamicBeans[o]=i[o]}if(s?.forEach(o=>{this.selectors[o.selector]=o}),t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){const n=(c,u,h,f)=>({componentFromFramework:u,component:c,params:h,processParams:f}),{frameworkOverrides:i}=this.beans,s=i.frameworkComponent(t,this.gos.get("components"));if(s!=null)return n(s,!0);const o=this.jsComps[t];if(o){const c=i.isFrameworkComponent(o);return n(o,c)}const r=this.agGridDefaults[t];if(r){const c=this.agGridDefaultOverrides[t];return n(r,!1,c?.params,c?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(qs(279,{name:e}));const i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.beans.validation?.missingDynamicBean(e)??qs(256));return}return new i(...n)}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},QQ=23,XQ=class extends re{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===QQ&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},ZQ=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',lE=typeof window!="object"||!window?.document?.fonts?.forEach,du=(e,t,n,i,s,o)=>{if(lE)return;i&&(e=`@layer ${CSS.escape(i)} { ${e} }`);let r=Qc.map.get(t);if(r||(r=[],Qc.map.set(t,r)),r.find(f=>f.css===e))return;const c=document.createElement("style");o&&c.setAttribute("nonce",o),c.dataset.agGlobalCss=n,c.textContent=e;const u={css:e,el:c,priority:s};let h;for(const f of r){if(f.priority>s)break;h=f}if(h){h.el.insertAdjacentElement("afterend",c);const f=r.indexOf(h);r.splice(f+1,0,u)}else t.insertBefore(c,t.querySelector(":not(title, meta)")),r.push(u)},CO=(e,t,n)=>{du(ZQ,e,"core",t,0,n),Array.from(G8()).sort((i,s)=>i.moduleName.localeCompare(s.moduleName)).forEach(i=>i.css?.forEach(s=>du(s,e,`module-${i.moduleName}`,t,0,n)))},JQ=e=>{Qc.grids.add(e)},eX=e=>{if(Qc.grids.delete(e),Qc.grids.size===0){Qc.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},mP,Qc=(mP=typeof window=="object"?window:{}).agStyleInjectionState??(mP.agStyleInjectionState={map:new WeakMap,grids:new Set}),Xs=e=>new vO(e),Ar="$default",tX=0,vO=class{constructor({feature:e,params:t,modeParams:n={},css:i,cssImports:s}){this.feature=e,this.css=i,this.cssImports=s,this.modeParams={[Ar]:{...n[Ar]??{},...t??{}},...n}}use(e,t,n){let i=this._inject;if(i==null){let{css:s}=this;if(s){const o=`ag-theme-${this.feature??"part"}-${++tX}`;typeof s=="function"&&(s=s()),s=`:where(.${o}) {
${s}
}
`;for(const r of this.cssImports??[])s=`@import url(${JSON.stringify(r)});
${s}`;i={css:s,class:o}}else i=!1;this._inject=i}return i&&e&&du(i.css,e,i.class,t,1,n),i?i.class:!1}},nX=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),yO=e=>`--ag-${nX(e)}`,Zs=e=>`var(${yO(e)})`,iX=(e,t,n)=>Math.max(t,Math.min(n,e)),sX=e=>{const t=new Map;return n=>{const i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},ks=e=>({ref:"accentColor",mix:e}),Qi=e=>({ref:"foregroundColor",mix:e}),Ji=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),oX=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),Ci={ref:"backgroundColor"},Fc={ref:"foregroundColor"},Ao={ref:"accentColor"},pm={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Qi(.15),chromeBackgroundColor:Ji(.02),browserColorScheme:"light"},rX={...pm,textColor:Fc,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:Ci,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Ao,rangeSelectionBackgroundColor:ks(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:ks(.5),rangeHeaderHighlightColor:oX(.08),rowNumbersSelectedColor:ks(.5),rowHoverColor:ks(.08),columnHoverColor:ks(.05),selectedRowBackgroundColor:ks(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:Ci,borderWidth:1,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:Ci,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:Qi(.7),focusShadow:{spread:3,color:ks(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Qi(.1),iconButtonActiveColor:Ao,iconButtonActiveBackgroundColor:ks(.28),iconButtonActiveIndicatorColor:Ao,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Ao,toggleButtonOffBackgroundColor:Ji(.3),toggleButtonSwitchBackgroundColor:Ci,toggleButtonSwitchInset:2,menuBorder:{color:Qi(.2)},menuBackgroundColor:Ji(.03),menuTextColor:Ji(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Qi(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Ao},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:Qi(.2)},panelBackgroundColor:Ci,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},columnDropCellBackgroundColor:Qi(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Qi(.13)},selectCellBackgroundColor:Qi(.07),selectCellBorder:{color:Qi(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:Ci,filterPanelApplyButtonBackgroundColor:Ao,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Fc,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Fc,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Qi(.15),statusBarLabelColor:Fc,statusBarLabelFontWeight:500,statusBarValueColor:Fc,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"backgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"backgroundColor"},pinnedRowTextColor:{ref:"textColor"}},aX=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",wO={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},lX={...wO,cellBatchEditTextColor:"#f3d0b3"},cX=()=>Xs({feature:"batchEditStyle",params:wO,css:aX}),uX=cX(),dX=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",hX={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},fX=()=>Xs({feature:"buttonStyle",params:{...hX,buttonBackgroundColor:Ci,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Ao}},css:dX}),gX=fX(),pX=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",mX=()=>Xs({feature:"columnDropStyle",css:pX}),SO=mX(),CX=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],vX=sX(e=>(e=e.toLowerCase(),CX.find(t=>e.endsWith(t.toLowerCase()))??"length")),nC=e=>typeof e=="object"&&e?.ref?Zs(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,cE=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=Zs(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Zs(e.onto):"transparent"}, ${t} ${iX(e.mix*100,0,100)}%)`}return!1},yX=nC,Oc=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:` ${Zs(n)} `)})`:e&&"ref"in e?Zs(e.ref):!1,wX=nC,QS=(e,t)=>typeof e=="string"?e:e===!0?QS({},t):e===!1?t==="columnBorder"?QS({color:"transparent"},t):"none":e&&"ref"in e?Zs(e.ref):bO(e.style??"solid")+" "+Oc(e.width??{ref:"borderWidth"})+" "+cE(e.color??{ref:"borderColor"}),SX=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Zs(e.ref):[Oc(e.offsetX??0),Oc(e.offsetY??0),Oc(e.radius??0),Oc(e.spread??0),cE(e.color??{ref:"foregroundColor"})].join(" "),bO=nC,RO=e=>typeof e=="string"?e.includes(",")?e:CP(e):e&&"googleFont"in e?RO(e.googleFont):e&&"ref"in e?Zs(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),CP(t))).join(", "):!1,CP=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),bX=nC,EO=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?EO({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Zs(e.ref):!1,RX=(e,t)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&vt(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Zs(e.ref):!1,EX={color:cE,colorScheme:yX,length:Oc,scale:wX,border:QS,borderStyle:bO,shadow:SX,image:EO,fontFamily:RO,fontWeight:bX,duration:RX},TX=(e,t)=>{const n=vX(e);return EX[n](t,e)},xX=()=>new TO().withPart(gX).withPart(SO).withPart(uX),TO=class xO{constructor(t=[]){this.parts=t}withPart(t){return typeof t=="function"&&(t=t()),t instanceof vO?new xO([...this.parts,t]):($d(259,{part:t},"Invalid part"),this)}withoutPart(t){return this.withPart(Xs({feature:t}))}withParams(t,n=Ar){return this.withPart(Xs({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:i,loadThemeGoogleFonts:s}){if(lE)return;AX(),CO(t,n,i);const o=DX(this);if(o.length>0)for(const r of o)s&&PX(r,i);for(const r of this.parts)r.use(t,n,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=vP(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const n={[Ar]:{...rX}};for(const i of vP(this.parts))for(const s of Object.keys(i.modeParams)){const o=i.modeParams[s];if(o){const r=n[s]??(n[s]={}),c=new Set;for(const u of Object.keys(o)){const h=o[u];h!==void 0&&(r[u]=h,c.add(u))}if(s===Ar)for(const u of Object.keys(n)){const h=n[u];if(u!==Ar)for(const f of c)delete h[f]}}}this._paramsCache=t=n}return t}_getPerGridCss(t){const n="##SELECTOR##";let i=this._paramsCssCache;if(!i){let s="",o="";const r=this._getModeParams();for(const u of Object.keys(r)){const h=r[u];if(u!==Ar){const p=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(u):u}"]) & {
`;s+=p,o+=p}for(const f of Object.keys(h).sort()){const p=h[f],m=TX(f,p);if(m===!1)vt(107,{key:f,value:p});else{const w=yO(f),S=w.replace("--ag-","--ag-inherited-");s+=`	${w}: var(${S}, ${m});
`,o+=`	${S}: var(${w});
`}}u!==Ar&&(s+=`}
`,o+=`}
`)}let c=`${n} {
${s}}
`;c+=`:has(> ${n}):not(${n}) {
${o}}
`,this._paramsCssCache=i=c}return i.replaceAll(n,`:where(.${t})`)}},vP=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const n=[];for(const i of e)(!i.feature||t.get(i.feature)===i)&&n.push(i);return n},DX=e=>{const t=new Set,n=o=>{if(Array.isArray(o))o.forEach(n);else{const r=o?.googleFont;typeof r=="string"&&t.add(r)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(n),Array.from(t).sort()},yP=!1,AX=()=>{if(!yP){yP=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},FX=new Set,PX=async(e,t)=>{FX.add(e);const n=`@import url('https://${MX}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;du(n,document.head,`googleFont:${e}`,void 0,0,t)},MX="fonts.googleapis.com",IX='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',_X=()=>Xs({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:Ci,checkboxUncheckedBorderColor:Ji(.3),checkboxCheckedBackgroundColor:Ao,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:Ci,checkboxIndeterminateBackgroundColor:Ji(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:Ci,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:IX}),kX=_X(),DO=()=>({...pm,...lX,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Ji(.05),rowHoverColor:ks(.15),selectedRowBackgroundColor:ks(.2),menuBackgroundColor:Ji(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Fc,findMatchColor:Ci,findActiveMatchColor:Ci,checkboxUncheckedBorderColor:Ji(.4),toggleButtonOffBackgroundColor:Ji(.4),rowBatchEditBackgroundColor:Ji(.1)}),LX=()=>({...DO(),backgroundColor:"#1f2836"}),OX=()=>Xs({feature:"colorScheme",params:pm,modeParams:{light:pm,dark:DO(),"dark-blue":LX()}}),VX=OX(),AO={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},FO={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},NX=(e={})=>{let t="";for(const n of[...Object.keys(AO),...Object.keys(FO)]){const i=BX(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},BX=(e,t=1.5)=>{const n=FO[e];if(n)return n;const i=AO[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},GX=(e={})=>Xs({feature:"iconSet",css:()=>NX(e)}),HX=GX(),zX=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',UX=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",WX={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},jX=()=>Xs({feature:"inputStyle",params:{...WX,inputBackgroundColor:Ci,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Ao},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Ji(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>zX+UX}),$X=jX(),qX='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',KX={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},YX=()=>Xs({feature:"tabStyle",params:{...KX,tabBarBorder:!0,tabBarBackgroundColor:Qi(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:Ci},css:qX}),QX=YX(),XX=()=>xX().withPart(kX).withPart(VX).withPart(HX).withPart(QX).withPart($X).withPart(SO).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),PO=XX(),ZX={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},JX={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},eZ={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},wP={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},SP={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},bP={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},pw={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},RP={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0},tZ=0,nZ=class extends re{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++tZ}`,this.globalCSS=[]}wireBeans(e){const{eGridDiv:t,gridOptions:n}=e;this.eGridDiv=t,this.eStyleContainer=n.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=n.themeCssLayer,this.styleNonce=n.styleNonce}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(wP),this.getSizeEl(SP),this.getSizeEl(bP),this.getSizeEl(pw),this.getSizeEl(RP),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>eX(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(RP)}getRowBorderWidth(){return this.getCSSVariablePixelValue(pw)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(wP)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(SP)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(ZX)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(JX),n=this.getCSSVariablePixelValue(eZ);return e-1+n*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(bP)}applyThemeClasses(e){const{gridTheme:t}=this;let n="";if(t)n=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let i=this.eGridDiv;for(;i;){let s=!1;for(const o of Array.from(i.classList))o.startsWith("ag-theme-")&&(s=!0,n=n?`${n} ${o}`:o);s&&this.mutationObserver.observe(i,{attributes:!0,attributeFilter:["class"]}),i=i.parentElement}}for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&e.classList.remove(i);if(n){const i=e.className;e.className=i+(i?" ":"")+n}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const i=`${n}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),n):t!=""?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?du(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const n=t.offsetWidth;return n===mw?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=an({tag:"div",cls:"ag-measurement-container"}),this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=an({tag:"div"});const{border:i,noWarn:s}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${mw}px)`)):t.style.width=`var(${e.cssName}, ${mw}px)`,n.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!s&&ge(9,{variable:e});const r=$o(this.beans,t,()=>{const c=this.measureSizeEl(e);c==="detached"||c==="no-styles"||(this.lastKnownValues.set(e,c),c!==o&&(o=c,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(pw);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:n,gridTheme:i}=this,s=e.get("theme");let o;if(s==="legacy")o=void 0;else{const r=s??PO;r instanceof TO?o=r:vt(240,{theme:r})}if(o!==i){if(o){JQ(this),CO(this.eStyleContainer,this.cssLayer,this.styleNonce);for(const[c,u]of n)du(c,this.eStyleContainer,u,this.cssLayer,0,this.styleNonce);n.length=0}this.gridTheme=o,o?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let r=this.eParamsStyle;if(!r){r=this.eParamsStyle=an({tag:"style"});const c=this.gos.get("styleNonce");c&&r.setAttribute("nonce",c),t.appendChild(r)}lE||(r.textContent=o?._getPerGridCss(this.paramsClass)||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}o&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&vt(s?106:239)}},mw=15538,iZ=class extends re{constructor(){super(...arguments),this.beanName="eventSvc",this.globalSvc=new ul}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalSvc.dispatchEvent(Me(this.gos,e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(Me(this.gos,e))}};function MO(e,t,n){const i=e.visibleCols.headerGroupRowCount;if(n>=i)return{column:t,headerRowIndex:n};let s=t.getParent();for(;s&&s.getProvidedColumnGroup().getLevel()>n;)s=s.getParent();const o=t.isSpanHeaderHeight();return!s||o&&s.isPadding()?{column:t,headerRowIndex:i}:{column:s,headerRowIndex:s.getProvidedColumnGroup().getLevel()}}var sZ=class extends re{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const t=_n(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:i,colGroupSvc:s,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(n=i.getCol(e),n||(n=s?.getColumnGroup(e)??null)):n=e,!n)return null;const c=o.getHeaderRowContainerCtrl()?.getAllCtrls(),u=Ct(c||[]).type==="filter",h=Ns(this.beans)-1;let f=-1,p=n;for(;p;)f++,p=p.getParent();let m=f;return t&&u&&m===h-1&&m++,m===-1?null:{headerRowIndex:m,column:n}}navigateVertically(e,t){const{focusSvc:n,visibleCols:i}=this.beans,{focusedHeader:s}=n;if(!s)return!1;const{headerRowIndex:o}=s,r=s.column,c=Ns(this.beans),u=this.getHeaderRowType(o),h=i.headerGroupRowCount;let{headerRowIndex:f,column:p,headerRowIndexWithoutSpan:m}=e==="UP"?oZ(u,r,o):rZ(r,o,h),w=!1;return f<0&&(f=0,p=r,w=!0),f>=c?(f=-1,this.currentHeaderRowWithoutSpan=-1):m!==void 0&&(this.currentHeaderRowWithoutSpan=m),!w&&!p?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:f,column:p},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){const{focusSvc:i,gos:s}=this.beans,o={...i.focusedHeader};let r,c;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==s.get("enableRtl")?(c="Before",r=this.findHeader(o,c)):(c="After",r=this.findHeader(o,c));const u=s.getCallback("tabToNextHeader");if(t&&u){const h=i.focusHeaderPositionFromUserFunc({userFunc:u,headerPosition:r,direction:c});if(h){const{headerRowIndex:f}=i.focusedHeader||{};f!=null&&f!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=f)}return h}return r||!t?i.focusHeaderPosition({headerPosition:r,direction:c,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,c,n)}focusNextHeaderRow(e,t,n){const i=this.beans,s=e.headerRowIndex;let o=null,r;const c=Ns(i),u=this.beans.visibleCols.allCols;if(t==="Before"){if(s<=0)return!1;o=Ct(u),r=s-1,this.currentHeaderRowWithoutSpan-=1}else o=u[0],r=s+1,this.currentHeaderRowWithoutSpan<c?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:h,headerRowIndex:f}=MO(this.beans,o,r);return f>=c&&(f=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:h,headerRowIndex:f},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(on(e)){const i=e.getDisplayedLeafColumns();n=t==="Before"?Ct(i):i[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){const{colGroupSvc:n,visibleCols:i}=this.beans;let s=e.column;if(s instanceof Vh){const u=s.getDisplayedLeafColumns();s=t==="Before"?u[0]:u[u.length-1]}const o=t==="Before"?i.getColBefore(s):i.getColAfter(s);if(!o)return;const r=i.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:o};const c=n?.getColGroupAtLevel(o,e.headerRowIndex);return c?c.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:c??o}:{headerRowIndex:o instanceof Rl&&o.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function oZ(e,t,n){const i=n-1;if(e!=="filter"){const s=t instanceof Rl&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>i||s&&o.isPadding());)o=o.getParent();if(o)return s?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:o,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function rZ(e,t,n){const i=t+1,s={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof Vh){if(i>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:i};let r=e.getDisplayedChildren()[0];if(r instanceof Vh&&r.isPadding()){const u=r.getDisplayedLeafColumns()[0];u.isSpanHeaderHeight()&&(r=u)}s.column=r,r instanceof Rl&&r.isSpanHeaderHeight()&&(s.headerRowIndex=n,s.headerRowIndexWithoutSpan=i)}return s}var aZ=class extends re{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(p$(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(qt(this.beans),JL)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=qt(this.beans);return this.isDomDataPresentInHierarchy(e,hm)?!0:this.isDomDataPresentInHierarchy(e,fm)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(Uk(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:i}=e,s={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return o&&(s.isFullWidthCell=o.isFullWidth()),s}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:r}=e,c=this.colModel.getCol(t);if(!c){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:Io(i),column:c};const u=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...u,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:s,preventScrollOnBrowserFocus:o,sourceEvent:r}),this.previousCellFocusParams=u}isCellFocused(e){return this.focusedCell==null?!1:xL(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:i}}=e,{column:s,headerRowIndex:o}=this.focusedHeader;return t===s&&n===o&&i==s.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),sl(this.beans))return!1;const{direction:t,fromTab:n,allowUserOverride:i,event:s,fromCell:o,rowWithoutSpanValue:r}=e;let{headerPosition:c}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(c);if(i){const u=this.focusedHeader,h=Ns(this.beans);if(n){const f=this.gos.getCallback("tabToNextHeader");f&&(c=this.getHeaderPositionFromUserFunc({userFunc:f,direction:t,currentPosition:u,headerPosition:c,headerRowCount:h}))}else{const f=this.gos.getCallback("navigateToNextHeader");if(f&&s){const p={key:s.key,previousHeaderPosition:u,nextHeaderPosition:c,headerRowCount:h,event:s};c=f(p)}}}return c?this.focusProvidedHeaderPosition({headerPosition:c,direction:t,event:s,fromCell:o,rowWithoutSpanValue:r}):!1}focusHeaderPositionFromUserFunc(e){if(sl(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:i,event:s}=e,o=this.focusedHeader,r=Ns(this.beans),c=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:o,headerPosition:n,headerRowCount:r});return!!c&&this.focusProvidedHeaderPosition({headerPosition:c,direction:i,event:s})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:i,headerPosition:s,headerRowCount:o}=e,c=t({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:s,headerRowCount:o});return c===!0?i:c===!1?null:c}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:s,event:o}=e,{column:r,headerRowIndex:c}=t,{filterManager:u,ctrlsSvc:h,headerNavigation:f}=this.beans;if(c===-1)return u?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:r,event:o});f?.scrollToColumn(r,n);const m=h.getHeaderRowContainerCtrl(r.getPinned())?.focusHeader(t.headerRowIndex,r,o)||!1;return f&&m&&(s!=null||i)&&(f.currentHeaderRowWithoutSpan=s??-1),m}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=MO(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;const t=Ns(this.beans)-1,n=Ct(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Io(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&ml(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:n=!0,event:i}=e;if(this.overlays?.isExclusive())return n&&this.focusOverlay(t);if(Zm(this.beans))return t&&!sl(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:uu(this.beans,t);const s=t?J8(this.beans):Z8(this.beans);if(s){const o=e.column??this.focusedHeader?.column,{rowIndex:r,rowPinned:c}=s,u=Wo(this.beans,s);if(!o||!u||r==null)return!1;if(o.isSuppressNavigable(u)){const h=this.gos.get("enableRtl");let f;return!i||i.key===J.TAB?f=h?J.LEFT:J.RIGHT:f=i.key,this.beans.navigation?.navigateToNextCell(null,f,{rowIndex:r,column:o,rowPinned:c||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:r,column:o,rowPinned:c}),t&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t)||(this.setFocusedCell({rowIndex:r,column:o,rowPinned:Io(c),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:r,rowPinned:c,column:o})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Ns(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},lZ=class extends re{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:q9();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},cZ=class extends re{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},Sp=new Set(["gridPreDestroyed","fillStart","pasteStart"]),uZ=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],uE=uZ.reduce((e,t)=>(e[t]=y7(t),e),{}),Vd=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),dZ={tag:"span",cls:"ag-sort-indicator-container",children:[Vd("Order","order"),Vd("Asc","ascending-icon"),Vd("Desc","descending-icon"),Vd("Mixed","mixed-icon"),Vd("None","none-icon")]},dE=class extends Ft{constructor(e){super(),this.eSortOrder=Ae,this.eSortAsc=Ae,this.eSortDesc=Ae,this.eSortMixed=Ae,this.eSortNone=Ae,e||this.setTemplate(dZ)}attachCustomElements(e,t,n,i,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;const i=es(e,this.beans,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:n,column:i,gos:s,beans:o}=this,r=o.sortSvc.getDisplaySortForColumn(i);if(e&&Wt(e,r==="asc",{skipAriaHidden:!0}),t&&Wt(t,r==="desc",{skipAriaHidden:!0}),n){const c=!i.getColDef().unSortIcon&&!s.get("unSortIcon"),u=r==null;Wt(n,!c&&u,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const i=t.getColDef().showRowGroup;Os(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:n}=this;if(e){const i=t.sortSvc.getDisplaySortForColumn(n)==="mixed";Wt(e,i,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const i=n.getColumnsWithSortingOrdered(),s=n.getDisplaySortIndexForColumn(t)??-1,o=i.some(c=>n.getDisplaySortIndexForColumn(c)??!1),r=s>=0&&o;Wt(e,r,{skipAriaHidden:!0}),s>=0?e.textContent=(s+1).toString():_i(e)}},hZ={selector:"AG-SORT-INDICATOR",component:dE},Bh=["asc","desc",null],fZ=class extends re{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}progressSortFromEvent(e,t){const i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);const{gos:s,showRowGroupCols:o}=this.beans,r=Os(s);let c=[e];if(r&&e.getColDef().showRowGroup){const p=o?.getSourceColumnsForGroupColumn?.(e)?.filter(m=>m.isSortable());p&&(c=[e,...p])}c.forEach(f=>this.setColSort(f,t,i));const u=(n||s.get("alwaysMultiSort"))&&!s.get("suppressMultiSort"),h=[];if(!u){const f=this.clearSortBarTheseColumns(c,i);h.push(...f)}this.updateSortIndex(e),h.push(...c),this.dispatchSortChangedEvents(i,h)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:i}=this.beans,s=Os(t),o=i?.getShowRowGroupCol(e.getId()),r=s&&o||e,c=this.getColumnsWithSortingOrdered();n.forAllCols(f=>this.setColSortIndex(f,null));const u=c.filter(f=>s&&f.getColDef().showRowGroup?!1:f!==r);(r.getSort()?[...u,r]:u).forEach((f,p)=>this.setColSortIndex(f,p))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSort()&&n.push(i),this.setColSort(i,void 0,t))}),n}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??Bh,n=t.indexOf(e.getSort()),i=n<0,s=n==t.length-1;return i||s?t[0]:t[n+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans;let s=[];if(t.forAllCols(h=>{h.getSort()&&s.push(h)}),t.isPivotMode()){const h=Os(e);s=s.filter(f=>{const p=!!f.getAggFunc(),m=!f.isPrimary(),w=h?n?.getShowRowGroupCol(f.getId()):f.getColDef().showRowGroup;return p||m||w})}const o=i?.columns.filter(h=>!!h.getSort())??[],r={};s.forEach((h,f)=>r[h.getId()]=f),s.sort((h,f)=>{const p=h.getSortIndex(),m=f.getSortIndex();if(p!=null&&m!=null)return p-m;if(p==null&&m==null){const w=r[h.getId()],S=r[f.getId()];return w>S?1:-1}else return m==null?-1:1});const c=Os(e)&&!!o.length;c&&(s=[...new Set(s.map(h=>n?.getShowRowGroupCol(h.getId())??h))]);const u=new Map;return s.forEach((h,f)=>u.set(h,f)),c&&o.forEach(h=>{const f=n.getShowRowGroupCol(h.getId());u.set(h,u.get(f))}),u}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Os(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every(r=>r.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let i=0;e.addManagedListeners(t,{movingChanged:()=>{i=Date.now()}}),n&&e.addManagedElementListeners(n,{click:o=>{const r=t.isMoving(),u=Date.now()-i<50;r||u||this.progressSortFromEvent(t,o)}});const s=()=>{const o=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",o==="asc"),e.toggleCss("ag-header-cell-sorted-desc",o==="desc"),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){const u=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(h=>t.getSort()==h.getSort());e.toggleCss("ag-header-cell-sorted-mixed",u)}};e.addManagedEventListeners({sortChanged:s,columnRowGroupChanged:s})}initCol(e){const{sort:t,initialSort:n,sortIndex:i,initialSortIndex:s}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(n==="asc"||n==="desc")&&(e.sort=n),i!==void 0?i!==null&&(e.sortIndex=i):s!==null&&(e.sortIndex=s)}updateColSort(e,t,n){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new dE(e)}getSortIndicatorSelector(){return hZ}},Xc={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},gZ=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),pZ={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Xc[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Xc[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Xc[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",spanRows:"CellSpan"},mZ=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:n})=>n?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,n)=>n.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const n=t.headerValueGetter;return typeof n=="function"||typeof n=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return qs(262);if(t.smallLeft)return qs(263);if(t.smallRight)return qs(264)}return null}},sortingOrder:{validate:t=>{const n=t.sortingOrder;if(Array.isArray(n)&&n.length>0){const i=n.filter(s=>!Bh.includes(s));if(i.length>0)return`sortingOrder must be an array with elements from [${Bh.map(Zp).join()}], currently it includes [${i.map(Zp).join()}]`}else if(!Array.isArray(n)||n.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${n}`;return null}},type:{validate:t=>{const n=t.type;return n instanceof Array?n.some(s=>typeof s!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof n=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:n})=>n?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:n,cellSelection:i,suppressRowTransform:s,enableCellSpan:o,rowDragEntireRow:r,enableCellTextSelection:c})=>typeof n=="object"&&n?.mode==="singleRow"&&n?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":s?"colDef.spanRows is not supported with suppressRowTransform.":o?r?"colDef.spanRows is not supported with rowDragEntireRow.":c?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}),CZ={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0},vZ=()=>Object.keys(CZ),yZ=()=>({objectName:"colDef",allProperties:vZ(),docsUrl:"column-properties/",deprecations:gZ(),validations:mZ()}),wZ=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],SZ=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers"],bZ=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],IO=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],RZ=["theme","rowSelection"],EZ=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],_O=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows"],TZ=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],xZ=()=>[...bZ,...SZ,...wZ,...IO,...TZ,..._O,...EZ,...RZ],DZ=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function _s(e,t,n){return typeof t=="number"||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var AZ={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"SharedRowGrouping",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},FZ=()=>{const e={autoSizePadding:{validate({autoSizePadding:n}){return _s("autoSizePadding",n,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return _s("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return _s("cacheOverflowSize",n,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:n=>{const i=n.domLayout,s=["autoHeight","normal","print"];return i&&!s.includes(i)?`domLayout must be one of [${s.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,pinnedTopRowData:i,pinnedBottomRowData:s}){return n&&(i||s)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinnable:i,pinnedTopRowData:s,pinnedBottomRowData:o}){return i&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinned:i,pinnedTopRowData:s,pinnedBottomRowData:o}){return i&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return qs(262);if(n.smallLeft)return qs(263);if(n.smallRight)return qs(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return _s("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return _s("keepDetailRowsCount",n,1)}},paginationPageSize:{validate({paginationPageSize:n}){return _s("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{const i=n.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:n}){return _s("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:n=>{const i=n.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return _s("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:n=>{const i=n.sortingOrder;if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>!Bh.includes(o));if(s.length>0)return`sortingOrder must be an array with elements from [${Bh.map(Zp).join()}], currently it includes [${s.map(Zp).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:n=>{const i=n.rowModelType??"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:s,treeDataParentIdField:o,getDataPath:r,getRowId:c}=n;if(!s&&!o&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(s){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!c)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const s=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:s}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return _s("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return _s("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:n,showOpenedGroup:i}){return n?.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":n?.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:n=>{const i=n.renderingMode,s=["default","legacy"];return i&&!s.includes(i)?`renderingMode must be one of [${s.join()}], currently it's ${i}`:null}}},t={};return _O.forEach(n=>{t[n]={expectedType:"boolean"}}),IO.forEach(n=>{t[n]={expectedType:"number"}}),li(t,e),t},PZ=()=>({objectName:"gridOptions",allProperties:[...xZ(),...Object.values(uE)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:DZ(),validations:FZ()}),MZ=0,IZ=0,_Z=class extends re{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=IZ++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new ul,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const i=Sp.has(t);if(i&&!e||!i&&e||!kZ(t))return;const s=(o,r)=>{const c=uE[o],u=this.gridOptions[c];typeof u=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>u(r))};if(this.gridReadyFired)s(t,n);else if(t==="gridReady"){s(t,n),this.gridReadyFired=!0;for(const o of this.queueEvents)s(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??vk[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Ce(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addGridCommonParams(n)))}updateGridOptions({options:e,force:t,source:n="api"}){const i={id:MZ++,properties:[]},s=[],{gridOptions:o,validation:r}=this;for(const c of Object.keys(e)){const u=e[c];r?.warnOnInitialPropertyUpdate(n,c);const h=t||typeof u=="object"&&n==="api",f=o[c];if(h||f!==u){o[c]=u;const p={type:c,currentValue:u,previousValue:f,changeSet:i,source:n};s.push(p)}}this.validateGridOptions(this.gridOptions),i.properties=s.map(c=>c.type),s.forEach(c=>{hl(this,`Updated property ${c.type} from`,c.previousValue," to ",c.currentValue),this.propEventSvc.dispatchEvent(c)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const n of Object.keys(e)){const i=e[n];if(i==null||i===!1)continue;let s=t[n];typeof s=="function"&&(s=s(e,this.gridOptions,this.beans)),s&&this.assertModuleRegistered(s,n)}}validateGridOptions(e){this.validateOptions(e,AZ),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,pZ),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return n||vt(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:WR(),rowModelType:this.get("rowModelType"),isUmd:U8()}}isModuleRegistered(e){return OS(e,this.gridId,this.get("rowModelType"))}};function kZ(e){return!!uE[e]}function kO(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var LZ=kO(!0),OZ=kO(!1),VZ=class extends Ft{constructor(){super(...arguments),this.eFilter=Ae,this.eFilterButton=Ae,this.eSortIndicator=Ae,this.eMenu=Ae,this.eLabel=Ae,this.eText=Ae,this.eSortOrder=Ae,this.eSortAsc=Ae,this.eSortDesc=Ae,this.eSortMixed=Ae,this.eSortNone=Ae,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const n={...e};li(n,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const n=e.template;return n?n?.trim?n.trim():n:t?LZ:OZ}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:i,userCompFactory:s}=this.beans,o=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),n?.setupForHeader(this),this.setMenu(),this.setupSort(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(s,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=b8(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=Eu(t))}addInIcon(e,t,n){const i=es(e,this.beans,n);i&&t.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Uo(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:n}=this,i=Mi(e);this.addInIcon(i?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!i);const s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:n,beans:i,eMenu:s,eFilterButton:o}=this,r=t.column,c=Mi(n);if(e&&!c){if(i.menuSvc?.isFilterMenuInHeaderEnabled(r))return t.showFilter(o??s??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(s??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:i,eSortOrder:s,eSortAsc:o,eSortDesc:r,eSortMixed:c,eSortNone:u}=this;i.attachCustomElements(s,o,r,c,u)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const n=()=>{const i=t.column.isFilterActive();Wt(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,i){if(!e)return Uo(t),!1;const s=this.params.column;return this.addInIcon(i,t,s),this.addManagedListeners(s,{filterChanged:n}),n(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},NZ={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},BZ=class extends Ft{constructor(){super(NZ),this.agOpened=Ae,this.agClosed=Ae,this.agLabel=Ae,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&ge(89)}workOutInnerHeaderGroupComponent(e,t){const n=E8(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:i}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const s=u=>{if(_o(u))return;const h=!n.isExpanded();i.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),h,"uiColumnExpanded")};this.addTouchAndClickListeners(i,t,s),this.addTouchAndClickListeners(i,e,s);const o=u=>{gl(u)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:s}),this.updateIconVisibility();const r=n.getProvidedColumnGroup(),c=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:c,expandableChanged:c})}addTouchAndClickListeners(e,t,n){e.touchSvc?.setupForHeaderGroupElement(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const i=n.isExpanded();Wt(e,i),Wt(t,!i)}else Wt(e,!1),Wt(t,!1)}addInIcon(e,t){const n=es(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:n}=this;Wt(t,!1),Wt(n,!1);return}}setupLabel(e){const{displayName:t,columnGroup:n}=e,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Ce(t)&&!i&&(this.agLabel.textContent=Eu(t)),this.toggleCss("ag-sticky-label",!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},GZ={moduleName:"ColumnHeaderComp",version:Se,userComponents:{agColumnHeader:VZ},icons:{menu:"menu",menuAlt:"menu-alt"}},HZ={moduleName:"ColumnGroupHeaderComp",version:Se,userComponents:{agColumnGroupHeader:BZ},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},zZ=class extends re{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&ge(92)}createTask(e,t,n,i,s=!1){this.verify();let o=n;i&&this.batchFrameworkComps&&(o="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:s};this.addTaskToList(this[o],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:n,f1:i,destroyTasks:s,beans:o}=this,{ctrlsSvc:r,frameworkOverrides:c}=o,u=t.list,h=n.list,f=i.list,p=Date.now();let m=0;const w=e<=0,S=r.getScrollFeature();for(;w||m<e;){if(!S.scrollGridIfNeeded()){let x;if(u.length)this.sortTaskList(t),x=u.pop().task;else if(h.length)this.sortTaskList(n),x=h.pop().task;else if(f.length)c.wrapOutgoing(()=>{for(;(w||m<e)&&!S.scrollGridIfNeeded();){if(f.length)this.sortTaskList(i),x=f.pop().task,x();else break;m=Date.now()-p}}),x=()=>{};else if(s.length)x=s.pop();else break;x()}m=Date.now()-p}u.length||h.length||f.length||s.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);qo(this.beans,e)}isQueueEmpty(){return!this.ticking}},UZ={moduleName:"AnimationFrame",version:Se,beans:[zZ]},WZ=class extends re{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Ja())return;const t=(n,i,s)=>{const{rowCtrl:o,cellCtrl:r}=e.getControlsForEventTarget(s?.target??null);r?.column&&r.dispatchCellContextMenuEvent(s??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,s,o,r)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Ja()||eL("dblclick"))return!1;const i=Date.now(),s=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,s})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:n,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:s,eMenu:o,eFilterButton:r}=e,c=new Ba(e.getGui(),!0),u=e.shouldSuppressMenuHide(),h=u&&Ce(o)&&s.enableMenu,f=h?new Ba(o,!0):c;if(s.enableMenu||i?.isHeaderContextMenuEnabled(s.column)){const p=h?"tap":"longTap",m=w=>s.showColumnMenuAfterMouseClick(w.touchStart);e.addManagedListeners(f,{[p]:m})}if(s.enableSorting){const p=m=>{const w=m.touchStart.target;u&&(o?.contains(w)||r?.contains(w))||n?.progressSort(s.column,!1,"uiColumnSorted")};e.addManagedListeners(c,{tap:p})}if(s.enableFilterButton&&r){const p=new Ba(r,!0);e.addManagedListeners(p,{tap:()=>s.showFilter(r)}),e.addDestroyFunc(()=>p.destroy())}e.addDestroyFunc(()=>c.destroy()),h&&e.addDestroyFunc(()=>f.destroy())}setupForHeaderGroup(e){const t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const n=new Ba(t.eGridHeader,!0),i=s=>t.showColumnMenuAfterMouseClick(s.touchStart);e.addManagedListeners(n,{longTap:i}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){const i=new Ba(t,!0);e.addManagedListeners(i,{tap:n}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,n){if(!Ja())return;const i=new Ba(t),s=o=>{Oh(this.gos,o.touchEvent)&&n(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(i,{longTap:s}),e.addDestroyFunc(()=>i.destroy())}},jZ={moduleName:"Touch",version:Se,beans:[WZ]},$Z=class extends re{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===J.UP,i=e===J.DOWN,s=e===J.LEFT;let o,r;const{pageBounds:c,gos:u,visibleCols:h,pinnedRowModel:f}=this.beans,{rowPinned:p}=t;if(n||i)p&&f?n?r=0:r=p==="top"?f.getPinnedTopRowCount()-1:f.getPinnedBottomRowCount()-1:r=n?c.getFirstRow():c.getLastRow(),o=t.column;else{const m=u.get("enableRtl");r=t.rowIndex,o=(s!==m?h.allCols:[...h.allCols].reverse()).find(S=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:S}))}return o?{rowIndex:r,rowPinned:p,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case J.UP:n=this.getCellAbove(n);break;case J.DOWN:n=this.getCellBelow(n);break;case J.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case J.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,ge(8,{key:e});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:i,rowModel:s}=this.beans;switch(e.rowPinned){case"top":n=i?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(e.rowIndex);break;default:n=s.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,n=zF(this.beans,t);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,n=lm(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,i=t.allCols;let s=e.rowIndex,o=e.rowPinned,r=t.getColAfter(e.column);if(!r){r=i[0];const c=zF(this.beans,e);if(Nt(c)||!c.rowPinned&&!(n?.isRowInPage(c.rowIndex)??!0))return null;s=c?c.rowIndex:null,o=c?c.rowPinned:null}return{rowIndex:s,column:r,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:n,pagination:i}=t,s=n.allCols;let o=e.rowIndex,r=e.rowPinned,c=n.getColBefore(e.column);if(!c){c=Ct(s);const u=lm(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Nt(u)||!u.rowPinned&&!(i?.isRowInPage(u.rowIndex)??!0))return null;o=u?u.rowIndex:null,r=u?u.rowPinned:null}return{rowIndex:o,column:c,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const i=e.createColumnFunctionCallbackParams(t);return n(i)}return!1}};function qZ(e){return e.focusSvc.getFocusedCell()}function KZ(e){return e.focusSvc.clearFocusedCell()}function YZ(e,t,n,i){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function QZ(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function XZ(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function ZZ(e,t,n=!1){const i=e.headerNavigation?.getHeaderPositionForColumn(t,n);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var JZ=class extends re{constructor(){super(),this.beanName="navigation",this.onPageDown=_F(this.onPageDown,100),this.onPageUp=_F(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,r=_$(this.gos,e);let c=!1;switch(n){case J.PAGE_HOME:case J.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),c=!0);break;case J.LEFT:case J.RIGHT:case J.UP:case J.DOWN:if(!r)return!1;s&&!i&&!o&&(this.onCtrlUpDownLeftRight(n,r),c=!0);break;case J.PAGE_DOWN:case J.PAGE_UP:!s&&!i&&(c=this.handlePageUpDown(n,r,t));break}return c&&e.preventDefault(),c}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===J.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:i,focusColumn:s,isAsync:o,rowPinned:r}){const{scrollFeature:c}=this.gridBodyCon;Ce(n)&&!n.isPinned()&&c.ensureColumnVisible(n),Ce(e)&&c.ensureIndexVisible(e,t),o||c.ensureIndexVisible(i);const{focusSvc:u,rangeSvc:h}=this.beans;u.setFocusedCell({rowIndex:i,column:s,rowPinned:r,forceBrowserFocus:!0}),h?.setRangeToCell({rowIndex:i,rowPinned:r,column:s})}onPageDown(e){const t=this.beans,n=Cw(t),i=this.getViewportHeight(),{pageBounds:s,rowModel:o,rowAutoHeight:r}=t,c=s.getPixelOffset(),u=n.top+i,h=o.getRowIndexAtPixel(u+c);r?.active?this.navigateToNextPageWithAutoHeight(e,h):this.navigateToNextPage(e,h)}onPageUp(e){const t=this.beans,n=Cw(t),{pageBounds:i,rowModel:s,rowAutoHeight:o}=t,r=i.getPixelOffset(),c=n.top,u=s.getRowIndexAtPixel(c+r);o?.active?this.navigateToNextPageWithAutoHeight(e,u,!0):this.navigateToNextPage(e,u,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:i,rowModel:s}=this.beans,o=this.getViewportHeight(),r=i.getFirstRow(),c=i.getLastRow(),u=i.getPixelOffset(),h=s.getRow(e.rowIndex),f=n?h?.rowHeight-o-u:o-u,p=h?.rowTop+f;let m=s.getRowIndexAtPixel(p+u);if(m===e.rowIndex){const S=n?-1:1;t=m=e.rowIndex+S}let w;n?(w="bottom",m<r&&(m=r),t<r&&(t=r)):(w="top",m>c&&(m=c),t>c&&(t=c)),this.isRowTallerThanView(s.getRow(m))&&(t=m,w="top"),this.navigateTo({scrollIndex:t,scrollType:w,scrollColumn:null,focusIndex:m,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,i=this.getViewportHeight(),{pageBounds:s,rowModel:o}=this.beans,r=s.getLastRow();let c=0,u=e.rowIndex;for(;u>=0&&u<=r;){const h=o.getRow(u);if(h){const f=h.rowHeight??0;if(c+f>i)break;c+=f}u+=n}return Math.max(0,Math.min(u,r))}getViewportHeight(){const e=this.beans,t=Cw(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:i,rowPinned:s}=n,o=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:o,focusIndex:i,focusColumn:o,rowPinned:s})}onHomeOrEndKey(e){const t=e===J.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:s}=this.beans,o=n.allCols,r=t?i.getFirstRow():i.getLastRow(),c=s.getRow(r);if(!c)return;const u=(t?o:[...o].reverse()).find(h=>!h.isSuppressNavigable(c));u&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:u,focusIndex:r,focusColumn:u})}onTabKeyDown(e,t){const n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t),s=this.beans,{ctrlsSvc:o,pageBounds:r,focusSvc:c,gos:u}=s;if(i!==!1){i?t.preventDefault():i===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:h,rowPinned:f}=e.getRowPosition();(f?h===0:h===r.getFirstRow())&&(u.get("headerHeight")===0||sl(s)?uu(s,!0,!0):(t.preventDefault(),c.focusPreviousFromFirstCell(t)))}else e instanceof Kc&&e.focusCell(!0),(!n&&c.focusOverlay(!1)||uu(s,n))&&t.preventDefault()}tabToNextCell(e,t){const n=this.beans,{focusSvc:i,rowRenderer:s}=n,o=i.getFocusedCell();if(!o)return!1;let r=Kd(n,o);return!r&&(r=s.getRowByPosition(o),!r||!r.isFullWidth())?!1:!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,n,i="ui"){const{editSvc:s,focusSvc:o}=this.beans;let r;const c=e instanceof Kc?e:e.getAllCellCtrls()?.[0];return s?.isEditing()?r=s?.moveToNextCell(c,t,n,i):r=this.moveToNextCellNotEditing(e,t,n),r===null?r:r||!!o.focusedHeader}moveToNextCellNotEditing(e,t,n){const i=this.beans.visibleCols.allCols;let s;if(e instanceof gm){if(s={...e.getRowPosition(),column:t?i[0]:Ct(i)},this.gos.get("embedFullWidthRows")&&n){const r=e.findFullWidthInfoForEvent(n);r&&(s.column=r.column)}}else s=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(s,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof Kc)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return Ce(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:i}){let s=e;const o=this.beans,{cellNavigation:r,gos:c,focusSvc:u,rowRenderer:h,rangeSvc:f}=o;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=r.getNextTabbedCell(s,t);const p=c.getCallback("tabToNextCell");if(Ce(p)){const E=p({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:s||null});if(E===!0)s=e;else{if(E===!1)return!1;s={rowIndex:E.rowIndex,column:E.column,rowPinned:E.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const S=Ns(o);return u.focusHeaderPosition({headerPosition:{headerRowIndex:S+s.rowIndex,column:s.column},fromCell:!0}),null}const m=c.get("editType")==="fullRow";if(n&&(!m||i)&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const w=Kd(o,s);if(!w){const S=h.getRowByPosition(s);if(!S||!S.isFullWidth()||n)continue;return{...S.getRowPosition(),column:s?.column}}if(!r.isSuppressNavigable(w.column,w.rowNode))return w.setFocusedCellPosition(s),f?.setRangeToCell(s),w}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:i}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,n,i){let s=n,o=!1;const r=this.beans,{cellNavigation:c,focusSvc:u,gos:h}=r;for(;s&&(s===n||!this.isValidNavigateCell(s));)h.get("enableRtl")?t===J.LEFT&&(s=this.getLastCellOfColSpan(s)):t===J.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=c.getNextCellToFocus(t,s),o=Nt(s);if(o&&e&&e.key===J.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){const p=h.getCallback("navigateToNextCell");if(Ce(p)){const w=p({key:t,previousCellPosition:n,nextCellPosition:s||null,event:e});Ce(w)?s={rowPinned:w.rowPinned,rowIndex:w.rowIndex,column:w.column}:s=null}}if(!s)return;if(s.rowIndex<0){const p=Ns(r);u.focusHeaderPosition({headerPosition:{headerRowIndex:p+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}const f=this.getNormalisedPosition(s);f?this.focusPosition(f):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const n=Kd(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:i,focusSvc:s,eventSvc:o}=this.beans,r=n.allCols,c=i.getRowByPosition(e);if(!c||!c.isFullWidth())return!1;const u=s.getFocusedCell(),h={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Ct(r):r[0])};this.focusPosition(h);const f=t??(u!=null&&Q8(h,u));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:h.column,isFullWidthCell:!0,fromBelow:f}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!Wo(this.beans,e)}getLastCellOfColSpan(e){const t=Kd(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Ct(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=$k(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),i=t&&n?.sticky,{scrollFeature:s}=this.gridBodyCon;!i&&Nt(e.rowPinned)&&s.ensureIndexVisible(e.rowIndex),e.column.isPinned()||s.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function Cw(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var eJ={moduleName:"KeyboardNavigation",version:Se,beans:[JZ,$Z,sZ],apiFunctions:{getFocusedCell:qZ,clearFocusedCell:KZ,setFocusedCell:YZ,setFocusedHeader:ZZ,tabToNextCell:QZ,tabToPreviousCell:XZ}},tJ=class extends re{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},nJ=class extends re{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(e,t){const{rowModel:n}=this.beans,i=n.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;const s=n.getRowBounds(t);s&&(s.rowIndex=t),this.bottomRowBounds=s,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},iJ=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",sJ=class extends re{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&(Wt(n,t),$s(n,e))}},oJ=class extends re{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,i=Wn(e,"print"),s=i?0:t.getColsLeftWidth(),o=i?0:t.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,n.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=Mh(e);if(t<=50)return;const n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:s,hasLockedPinned:o}=n;let r=s;!r.length&&!o||(i&&(r=i({columns:r,viewportWidth:t})),!(!r||!r.length)&&(r=r.filter(c=>!Or(c)),this.setColsPinned(r,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new sJ(e,t)}setColsPinned(e,t,n){const{colModel:i,colAnimation:s,visibleCols:o,gos:r}=this.beans;if(!i.cols||!e?.length)return;if(Wn(r,"print")){ge(37);return}s?.start();let c;t===!0||t==="left"?c="left":t==="right"?c="right":c=null;const u=[];e.forEach(h=>{if(!h)return;const f=i.getCol(h);f&&f.getPinned()!==c&&(this.setColPinned(f,c),u.push(f))}),u.length&&(o.refresh(n),fL(this.eventSvc,u,n)),s?.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const n=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;const s=()=>{const o=n?this.leftWidth:this.rightWidth;if(o==null)return;const r=o==0,c=e.hidden!==r,u=this.gos.get("enableRtl"),h=t.getScrollbarWidth(),p=t.verticalScrollShowing&&(u&&n||!u&&i)?o+h:o;e.comp.setPinnedContainerWidth(`${p}px`),e.comp.setDisplayed(!r),c&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:s,rightPinnedWidthChanged:s,scrollVisibilityChanged:s,scrollbarWidthChanged:s})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:i,rightWidth:s}=this,o=Mh(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+s+e>o)if(o>i+s)e=o-i-s;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,n=this.leftWidth??0,i=t+n;let s=!1;if(i<e)return{columns:[],hasLockedPinned:s};const{visibleCols:o}=this.beans,r=[...o.leftCols],c=[...o.rightCols];let u=0,h=0;const f=0,p=[];let m=i-f-e;for(;(h<r.length||u<c.length)&&m>0;){if(u<c.length){const w=c[u++];if(w.colDef.lockPinned){s=!0;continue}m-=w.getActualWidth(),p.push(w)}if(h<r.length&&m>0){const w=r[h++];if(w.colDef.lockPinned){s=!0;continue}m-=w.getActualWidth(),p.push(w)}}return{columns:p,hasLockedPinned:s}}},rJ={moduleName:"PinnedColumn",version:Se,beans:[oJ],css:[iJ]},aJ=class extends re{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Un(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=_n(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),Sk(n,"polite"),_9(n,"additions text"),I9(n,!0),e.eGridDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(_i(e),e.parentElement?.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},lJ={moduleName:"Aria",version:Se,beans:[aJ]};function cJ(e){e.overlays?.showLoadingOverlay()}function uJ(e){e.overlays?.showNoRowsOverlay()}function dJ(e){e.overlays?.hideOverlay()}var hJ=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",fJ={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},LO=class extends Ft{constructor(){super(fJ),this.eOverlayWrapper=Ae,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(hJ)}handleKeyDown(e){if(e.key!==J.TAB||e.defaultPrevented||_o(e))return;const t=this.beans;if(Tl(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=t.focusSvc.focusGridView({column:Ct(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=uu(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:s,PRINT:o}=yp;n.toggle(i,t.autoHeight),n.toggle(s,t.normal),n.toggle(o,t.print)}postConstruct(){this.createManagedBean(new QR(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){const s=qt(this.beans);s&&!jk(this.beans)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!!s){if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,i)){const o=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:r})=>{o.refresh?.(Me(this.gos,{...r??{}}))})}n&&this.isGridFocused()&&ml(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),_i(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=qt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},gJ={selector:"AG-OVERLAY-WRAPPER",component:LO},pJ=class extends re{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=gn(this.gos),this.isServerSide=!this.isClientSide&&bl(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){ge(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return gJ}getOverlayWrapperCompClass(){return LO}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:n,beans:{gos:i,colModel:s,rowModel:o}}=this;let r=this.gos.get("loading");r!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&r===void 0&&!i.get("suppressLoadingOverlay")&&(r=!i.get("columnDefs")||!s.ready||!i.get("rowData")&&t),r?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!i.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!n&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(M8(this.beans.userCompFactory,Me(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(I8(this.beans.userCompFactory,Me(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){const i=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(i,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;this.state===2?t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0:this.wrapperPadding!==0&&(t=0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},mJ={moduleName:"Overlay",version:Se,userComponents:{agLoadingOverlay:Qq,agNoRowsOverlay:Zq},apiFunctions:{showLoadingOverlay:cJ,showNoRowsOverlay:uJ,hideOverlay:dJ},beans:[pJ]},CJ=class extends re{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=$9(),hl(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;hl(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},vJ=400,yJ=class extends re{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},n=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},i=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{qr(this.gos)?n():i()}),qr(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:s})=>{(!s&&i||s&&!i)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const i=n.getShowRowGroupCols();i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Wn(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new wJ(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){const n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onCellFocusChanged(e){if(e&&e.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(n=>t.onFlashCells(n,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(t=>{const n=u=>{this.getAllCellCtrls().forEach(h=>{h.column===t&&u(h)})},i=()=>{n(u=>u.onLeftChanged())},s=()=>{n(u=>u.onWidthChanged())},o=()=>{n(u=>u.onFirstRightPinnedChanged())},r=()=>{n(u=>u.onLastLeftPinnedChanged())},c=()=>{n(u=>u.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",s),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",r),t.__addEventListener("colDefChanged",c),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",s),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",r),t.__removeEventListener("colDefChanged",c)})})}onDomLayoutChanged(){const e=Wn(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach(n=>{const i=n.getCellCtrl(e,!0)?.eGui;i&&t.push(i)}),t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){const{pinnedRowModel:i,beans:s,printLayout:o}=this,r=Object.fromEntries(e.map(u=>[u.rowNode.id,u]));i?.forEachPinnedRow(t,(u,h)=>{const f=e[h];f&&i.getPinnedRowById(f.rowNode.id,t)===void 0&&(f.destroyFirstPass(),f.destroySecondPass()),u.id in r&&n?(e[h]=r[u.id],delete r[u.id]):e[h]=new gm(u,s,!1,!1,o)});const c=(t==="top"?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;e.length=c}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=i=>{const s=i[e.rowIndex];s&&s.rowNode===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){e?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&Uc(this.gos),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:r}=this;if(o){o.checkStickyRows();const c=o.extraTopHeight+o.extraBottomHeight;c&&this.updateContainerHeights(c)}this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(r.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(qs(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:Ns(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Me(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:n}=this.beans;let i=e;for(i.rowPinned==null&&t&&n&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=lm(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});const s=this.getRowByPosition(i);if(s?.isAlive())return{...s.getRowPosition(),column:e.column};i=lm(this.beans,i)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){const s=t[i].getAllCellCtrls(),o=s.length;for(let r=0;r<o;r++)e.push(s[r])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:i}={}){const s={force:n,newData:!1,suppressFlash:i};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(s);this.refreshFullWidth(e)}refreshRows(e={}){this.getRowCtrls(e.rowNodes).forEach(t=>t.refreshRow(e)),this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=XS(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{const s=i.rowNode;return ZS(s,t)})}getCellCtrls(e,t){let n;Ce(t)&&(n={},t.forEach(s=>{const o=this.colModel.getCol(s);Ce(o)&&(n[o.getId()]=!0)}));const i=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(o=>{const r=o.column.getId();n&&!n[r]||i.push(o)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const i=n.rowNode;t[i.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{const i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:i}=e;let s;const o=this.stickyRowFeature;o&&(s=t?.getFocusCellToUseAfterRefresh()||void 0);const r=this.firstRenderedRow,c=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let u=!1;if(o){u=o.checkStickyRows();const f=o.extraTopHeight+o.extraBottomHeight;f&&this.updateContainerHeights(f)}const h=this.firstRenderedRow!==r||this.lastRenderedRow!==c;if(!(i&&!u&&!h)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!u),s!=null)){const f=t?.getFocusCellToUseAfterRefresh();s!=null&&f==null&&(n?.flushAllFrames(),this.restoreFocusedCell(s))}}removeRowCompsNotToDraw(e,t){const n={};e.forEach(o=>n[o]=!0);const s=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!n[o]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=[];for(let r=this.firstRenderedRow;r<=this.lastRenderedRow;r++)t.push(r);const n=this.beans.pagination,i=this.beans.focusSvc?.getFocusedCell()?.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);const s=r=>{const c=r.rowNode.rowIndex;c==null||c===i||(c<this.firstRenderedRow||c>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(c)};for(const r of Object.values(this.rowCtrlsByRowIndex))s(r);if(e)for(const r of Object.values(e))s(r);t.sort((r,c)=>r-c);const o=[];for(let r=0;r<t.length;r++){const c=t[r],u=this.rowModel.getRow(c);u&&!u.sticky&&o.push(c)}return o}recycleRows(e,t=!1,n=!1){const i=this.calculateIndexesToDraw(e);if((this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t),i.forEach(s=>{this.createOrUpdateRowCtrl(s,e,t,n)}),e){const{animationFrameSvc:s}=this.beans;s?.active&&n&&!this.printLayout?s.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const n=t.rowNode.rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=XS(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const i=n.rowNode;return!(t!=null&&!ZS(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.rowModel.getRow(e),Ce(s)&&Ce(t)&&t[s.id]&&s.alreadyRendered&&(o=t[s.id],t[s.id]=null)),!o)if(s||(s=this.rowModel.getRow(e)),Ce(s))o=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const n=[];if(e){for(const i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){const s=i.instanceId;this.zombieRowCtrls[s]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[s]})}else i.destroySecondPass()}}t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>n.forEach(i=>i()),vJ))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=nl(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let i,s;if(!n.isRowsToRender())i=0,s=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),s=t.getLastRow();else{const f=this.getRowBufferInPixels(),p=this.ctrlsSvc.getScrollFeature(),m=this.gos.get("suppressRowVirtualisation");let w=!1,S,E;do{const U=t.getPixelOffset(),{pageFirstPixel:z,pageLastPixel:W}=t.getCurrentPagePixelRange(),_=e.divStretchOffset,F=p.getVScrollPosition(),k=F.top,O=F.bottom;m?(S=z+_,E=W+_):(S=Math.max(k+U-f,z)+_,E=Math.min(O+U+f,W)+_),this.firstVisibleVPixel=Math.max(k+U,z)+_,this.lastVisibleVPixel=Math.min(O+U,W)+_,w=this.ensureAllRowsInRangeHaveHeightsCalculated(S,E)}while(w);let x=n.getRowIndexAtPixel(S),P=n.getRowIndexAtPixel(E);const M=t.getFirstRow(),I=t.getLastRow();x<M&&(x=M),P>I&&(P=I),i=x,s=P}const o=Wn(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),c=Math.max(this.getRowBuffer(),500);o&&!r&&s-i>c&&(s=i+c);const u=i!==this.firstRenderedRow,h=s!==this.lastRenderedRow;(u||h)&&(this.firstRenderedRow=i,this.lastRenderedRow=s,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:s}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,qo(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:s,rowModel:o}=this,r=o.ensureRowHeightsValid(e,t,s.getFirstRow(),s.getLastRow());return(r||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||r||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const i=e.rowNode,s=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),o=this.editSvc?.isEditing(e),r=i.detail;return s||o||r?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){const i=this.cachedRowCtrls?.getRow(e)??null;if(i)return i;const s=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new gm(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},wJ=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],is(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],is(this.entriesList,e)}getEntries(){return this.entriesList}};function XS(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(n=>{const i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}function ZS(e,t){const n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var SJ=class extends re{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Os(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Os(e))}doFullSort(e,t){const n=e.map((i,s)=>({currentPos:s,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,n){const i=t.rowNode,s=n.rowNode;for(let o=0,r=e.length;o<r;o++){const c=e[o],u=c.sort==="desc",h=this.getValue(i,c.column),f=this.getValue(s,c.column);let p;const m=this.getComparator(c,i);if(m?p=m(h,f,i,s,u):p=D9(h,f,this.isAccentedSort),!isNaN(p)&&p!==0)return c.sort==="asc"?p:p*-1}return t.currentPos-n.currentPos}getComparator(e,t){const n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;const s=!t.group&&n.getColDef().field;if(!s)return;const o=this.beans.colModel.getColDefCol(s);if(o)return o.getColDef().comparator}getValue(e,t){const{valueSvc:n,colModel:i,showRowGroupCols:s,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(t,e,!1);if(e.rowGroupColumn===t){if(Kk(o,i.isPivotActive())){const h=e.allLeafChildren?.[0];return h?n.getValue(t,h,!1):void 0}const u=s?.getShowRowGroupCol(t.getId());return u?e.groupData?.[u.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return n.getValue(t,e,!1)}};function bJ(e){e.sortSvc?.onSortChanged("api")}var OO={moduleName:"Sort",version:Se,beans:[fZ,SJ],apiFunctions:{onSortChanged:bJ},userComponents:{agSortIndicator:dE},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},RJ=class extends re{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),hl(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,jc(e.source))}}};function EJ(e){e.valueCache?.expire()}function TJ(e,t){const{colKey:n,rowNode:i,useFormatter:s}=t,o=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(Nt(o))return null;const r=e.valueSvc.getValueForDisplay(o,i,s);return s?r.valueFormatted??Eu(r.value):r.value}var xJ="paste",DJ=class extends re{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;gn(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if(e.source===xJ||t.get("suppressChangeDetection"))return;const i=e.node,s=[i],o=this.clientSideRowModel,r=o?.rootNode;if(r&&!i.isRowPinned()){const c=t.get("aggregateOnlyChangedColumns"),u=new Nh(c,r);u.addParentNode(i.parent,[e.column]),o.doAggregate(u),u.forEachChangedNodeDepthFirst(h=>{s.push(h),h.sibling&&s.push(h.sibling)})}n.refreshCells({rowNodes:s})}},AJ=class extends re{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);vt(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return vt(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},FJ=class extends re{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){const i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},PJ={moduleName:"ValueCache",version:Se,beans:[FJ],apiFunctions:{expireValueCache:EJ}},MJ={moduleName:"Expression",version:Se,beans:[AJ]},IJ={moduleName:"ChangeDetection",version:Se,beans:[DJ]},_J={moduleName:"CellApi",version:Se,apiFunctions:{getCellValue:TJ}},Xg={checkSiblings:!0},kJ=class extends re{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEdit=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEdit=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=bl(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,n=!1,i=!1,s="ui"){const{showRowGroupColValueSvc:o}=this.beans,r=!e&&t.group,c=e?.colDef.showRowGroup,u=!this.isTreeData||t.footer;if(o&&u&&(r||c)){const E=o.getGroupValue(t,e);if(E==null)return{value:null,valueFormatted:null};if(!n)return{value:E.value,valueFormatted:null};const x=o.formatAndPrefixGroupColValue(E,e,i);return{value:E.value,valueFormatted:x}}if(!e)return{value:t.key,valueFormatted:null};const h=t.leafGroup&&this.colModel.isPivotMode(),f=t.group&&t.expanded&&!t.footer&&!h,p=this.gos.get("groupSuppressBlankHeader")||!t.sibling,m=f&&!p,w=this.getValue(e,t,m,s),S=n&&!(i&&e.colDef.useValueFormatterForExport===!1);return{value:w,valueFormatted:S?this.formatValue(e,t,w):null}}getValue(e,t,n=!1,i="ui"){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),o=s.field,r=e.getColId();let c=t.data;if(this.hasEdit&&i==="ui"){const E=this.editSvc;if(E.isRowEditing(t,Xg)&&(c=E.getRowDataValue(t,Xg)),E.isEditing()){const x=E.getCellDataValue({rowNode:t,column:e},!0);if(x!==void 0)return x}}let u;const h=s.showRowGroup;if(typeof h=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(h)??-1)>t.level)return null;const f=typeof h!="string"||!t.group,p=t.groupData&&r in t.groupData,m=!n&&t.aggData&&t.aggData[r]!==void 0,w=this.isSsrm&&n&&!!s.aggFunc,S=this.isSsrm&&t.footer&&t.field&&(s.showRowGroup===!0||s.showRowGroup===t.field);if(this.isTreeData&&m)u=t.aggData[r];else if(this.isTreeData&&s.valueGetter)u=this.executeValueGetter(s.valueGetter,c,e,t);else if(this.isTreeData&&o&&c)u=oh(c,o,e.isFieldContainsDots());else if(p)u=t.groupData[r];else if(m)u=t.aggData[r];else if(s.valueGetter&&!w){if(!f)return u;u=this.executeValueGetter(s.valueGetter,c,e,t)}else if(S)u=oh(c,t.field,e.isFieldContainsDots());else if(o&&c&&!w){if(!f)return u;u=oh(c,o,e.isFieldContainsDots())}if(this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){const E=u.substring(1);u=this.executeValueGetter(E,c,e,t)}return u}parseValue(e,t,n,i){const s=e.getColDef(),o=s.valueParser;if(Ce(o)){const r=Me(this.gos,{node:t,data:t?.data,oldValue:i,newValue:n,colDef:s,column:e});return typeof o=="function"?o(r):this.expressionSvc?.evaluate(o,r)}return n}getDeleteValue(e,t){return Ce(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,n,i,s=!0){const{expressionSvc:o}=this.beans;let r=null,c;const u=e.getColDef();if(i?c=i:s&&(c=u.valueFormatter),c){let h=t?t.data:null;if(t){const p={rowNode:t};if(this.hasEdit){const m=this.editSvc;m.isEditing(p,Xg)&&(h=m.getRowDataValue(t,Xg))}}const f=Me(this.gos,{value:n,node:t,data:h,colDef:u,column:e});typeof c=="function"?r=c(f):r=o?o.evaluate(c,f):null}else if(u.refData)return u.refData[n]||"";return r==null&&Array.isArray(n)&&(r=n.join(", ")),r}setValue(e,t,n,i){const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;Nt(e.data)&&(e.data={});const{field:o,valueSetter:r}=s.getColDef();if(Nt(o)&&Nt(r))return ge(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,n))return ge(135),!1;const c=Me(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e,void 0,i),newValue:n,colDef:s.getColDef(),column:s});c.newValue=n;let u;if(Ce(r)?typeof r=="function"?u=r(c):u=this.expressionSvc?.evaluate(r,c):u=this.setValueUsingField(e.data,o,n,s.isFieldContainsDots()),u===void 0&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const h=this.getValue(s,e);return this.dispatchCellValueChangedEvent(e,c,h,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,c,h,i),!0}dispatchCellValueChangedEvent(e,t,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let s=!1;if(!i)s=e[t]===n,s||(e[t]=n);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const c=o.shift();o.length===0?(s=r[c]===n,s||(r[c]=n)):r=r[c]}}return!s}executeValueGetterWithValueCache(e,t,n,i){const s=n.getColId(),o=this.valueCache.getValue(i,s);if(o!==void 0)return o;const r=this.executeValueGetterWithoutValueCache(e,t,n,i);return this.valueCache.setValue(i,s,r),r}executeValueGetterWithoutValueCache(e,t,n,i){const s=Me(this.gos,{data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});let o;return typeof e=="function"?o=e(s):o=this.expressionSvc?.evaluate(e,s),o}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){const n=this.getValue(e,t),i=e.getColDef().keyCreator;let s=n;if(i){const o=Me(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});s=i(o)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&ge(121)),s}},LJ={moduleName:"CommunityCore",version:Se,beans:[cZ,WK,YQ,n8,CJ,aQ,iZ,_Z,J7,nJ,tJ,yJ,kJ,aZ,nZ,lZ,XQ,RJ,WQ,jQ],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:jK,destroy:$K,isDestroyed:qK,getGridOption:KK,setGridOption:YK,updateGridOptions:lO,isModuleRegistered:QK},dependsOn:[HQ,BY,$Y,OO,GZ,cQ,HZ,mJ,IJ,UZ,eJ,rJ,lJ,jZ,KQ,zQ,MJ,fQ]};function JS(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:s}=e;let o=(n??[]).map((u,h)=>({value:u,relevance:OJ(t,u),idx:h}));if(o.sort((u,h)=>u.relevance-h.relevance),i&&(o=o.filter(u=>u.relevance<Math.max(u.value.length,t.length))),o.length>0&&s&&s>0){const h=o[0].relevance*s;o=o.filter(f=>h-f.relevance<0)}const r=[],c=[];for(const u of o)r.push(u.value),c.push(u.idx);return{values:r,indices:c}}function OJ(e,t){e.length<t.length&&([e,t]=[t,e]);let n=[],i=[];const s=e.length,o=t.length;for(let c=0;c<=o;c++)n[c]=c;let r=0;for(let c=1;c<=s;c++){i[0]=c;for(let u=1;u<=o;u++){const h=e[c-1],f=t[u-1];if(h.toLocaleLowerCase()===f.toLocaleLowerCase())++r,h===f&&++r,c>1&&u>1&&e[c-2].toLocaleLowerCase()===t[u-2].toLocaleLowerCase()&&(++r,e[c-2]===t[u-2]&&++r),c<s/2-10&&++r,i[u]=n[u-1];else{const p=i[u-1],m=n[u],w=n[u-1];i[u]=1+Math.min(p,m,w)}}[n,i]=[i,n]}return n[o]/(r+1)}var VO={AdvancedFilter:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},vw=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],VJ={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:vw,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...vw,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...vw,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},NJ={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function BJ(e,t){const n=[];return(Array.isArray(e)?e:[e]).forEach(i=>{const s=VJ[i];s?s.forEach(o=>{const r=NJ[o];(!r||r===t)&&n.push(o)}):n.push(i)}),n}var NO=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,GJ=e=>{const t=e.map(i=>`import { ${uh(i)} } from '${VO[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>uh(i,!0)).join(", ")} ]); 

For more info see: ${zc}/modules/`};function uh(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function HJ(e,t){const n=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let i="";return!globalThis?.agCharts&&n.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>VO[o])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function BO({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var EP=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:i,rowModelType:s,additionalText:o,isUmd:r})=>{const c=BJ(t,s),u=typeof e=="string"?e:jJ[e];if(r)return HJ(u,c);const h=c.filter(m=>m==="IntegratedCharts"||m==="Sparklines"),f=h.length>0?`${h.map(m=>uh(m)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${u} as ${c.length>1?"one of "+c.map(m=>uh(m)).join(", "):uh(c[0])} is not registered${n?" for gridId: "+i:""}. ${f} Check if you have registered the module:
`}
${GJ(c)}`+(o?` 

${o}`:"")},TP=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,zJ=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,UJ={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${zJ(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${i?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})=>{const s=[],o=[...Object.keys(n??[]).filter(c=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(c)),...Object.keys(i??[]).filter(c=>!!i[c])],r=JS({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),r.length>0&&s.push(`         Did you mean: [${r.slice(0,3)}]?
`),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${zc}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const n=JS({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:EP,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${zc}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>TP("IntegratedChartsModule"),258:()=>TP("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:i,rowModelType:s})=>EP({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Xc[t],gridId:i,gridScoped:n,rowModelType:s}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${zc}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>NO(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:BO,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler()`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`};function WJ(e,t){const n=UJ[e];if(!n)return[`Missing error text for error id ${e}!`];const i=n(t),o=`
See ${Gk(e,t)}`;return Array.isArray(i)?i.concat(o):[i,o]}var jJ={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},xP=new WeakMap,DP=new WeakMap,$J=1,qJ=class{create(e,t,n,i,s,o){const r=Ck.applyGlobalGridOptions(t),c=r.gridId??String($J++),u=this.getRegisteredModules(s,c,r.rowModelType),h=this.createBeansList(r.rowModelType,u,c),f=this.createProvidedBeans(e,r,s);if(!h)return;const m={providedBeanInstances:f,beanClasses:h,gridId:c,beanInitComparator:GK,beanDestroyComparator:HK,derivedBeans:[NK],destroyCallback:()=>{DP.delete(S),xP.delete(e),o?.()}},w=new q8(m);this.registerModuleFeatures(w,u),n(w),w.getBean("syncSvc").start(),i?.(w);const S=w.getBean("gridApi");return xP.set(e,S),DP.set(S,e),S}getRegisteredModules(e,t,n){return Lh(LJ,void 0,!0),e?.modules?.forEach(i=>Lh(i,t)),B8(t,AP(n))}registerModuleFeatures(e,t){const n=e.getBean("registry"),i=e.getBean("apiFunctionSvc");t.forEach(s=>{n.registerModule(s);const o=s.apiFunctions;o&&Object.keys(o).forEach(c=>{i?.addFunction(c,o[c])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;Nt(i)&&(i=new rO);const s={gridOptions:t,eGridDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(s,n.providedBeanInstances),s}createBeansList(e,t,n){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},s=AP(e),o=i[s];if(!o){$d(201,{rowModelType:s},`Unknown rowModelType ${s}.`);return}if(!z8()){$d(272,void 0,NO());return}if(!e){const c=Object.entries(i).filter(([u,h])=>OS(h,n,u));if(c.length==1){const[u,h]=c[0];if(u!==s){const f={moduleName:h,rowModelType:u};$d(275,f,BO(f));return}}}if(!OS(o,n,s)){$d(200,{reasonOrId:`rowModelType = '${s}'`,moduleName:o,gridScoped:WR(),gridId:n,rowModelType:s},`Missing module ${o}Module for rowModelType ${s}.`);return}const r=new Set;return t.forEach(c=>c.beans?.forEach(u=>r.add(u))),Array.from(r)}};function AP(e){return e??"clientSide"}function Js(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function iC(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function GO(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var KJ=class extends re{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(i,s,o)=>t({key:i,defaultValue:s,variableValues:o});const n=e.get("localeText");return(i,s,o)=>{let r=n&&n[i];if(r&&o&&o.length){let c=0;for(;!(c>=o.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",o[c++])}return r??s}}};function YJ(e,t=!1){const n=[],i=[],s=[],o=[],r=[],c=[],u=[],h=[],f=[];let p=0;for(let m=0;m<e.length;m++){const{colId:w,sort:S,sortIndex:E,rowGroup:x,rowGroupIndex:P,aggFunc:M,pivot:I,pivotIndex:U,pinned:z,hide:W,width:_,flex:F}=e[m];f.push(w),S&&(n[E??p++]={colId:w,sort:S}),x&&(i[P??0]=w),typeof M=="string"&&s.push({colId:w,aggFunc:M}),I&&(o[U??0]=w),z&&(z==="right"?c:r).push(w),W&&u.push(w),(F!=null||_)&&h.push({colId:w,flex:F??void 0,width:_})}return{sort:n.length?{sortModel:n}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:o}:void 0,columnPinning:r.length||c.length?{leftColIds:r,rightColIds:c}:void 0,columnVisibility:u.length?{hiddenColIds:u}:void 0,columnSizing:h.length?{columnSizingModel:h}:void 0,columnOrder:f.length?{orderedColIds:f}:void 0}}function QJ(e){const t=[];return e.forEach(({groupId:n,open:i})=>{i&&t.push(n)}),t.length?{openColumnGroupIds:t}:void 0}var XJ=class{wrap(e,t,n,i){const s=this.createWrapper(e,i);return t?.forEach(o=>{this.createMethod(s,o,!0)}),n?.forEach(o=>{this.createMethod(s,o,!1)}),s}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&ge(49,{methodName:t}),null)}}},ZJ={tag:"div",cls:"ag-tooltip"},JJ=class extends iE{constructor(){super(ZJ)}init(e){const{value:t}=e,n=this.getGui();n.textContent=Eu(t);const i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${i}-tooltip`)}},eee=1e3,tee=1e3,FP=100,PP,Zg=!1,nee=class extends re{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Ja()&&(Zg?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},FP):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,n=this.tooltipCtrl.getGui(),i=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&i?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Zg)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-PP<eee}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Ce(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const n=t.getRowNode?.(),i=Me(this.gos,{location:t.getLocation?.()??"UNKNOWN",colDef:t.getColDef?.(),column:t.getColumn?.(),rowIndex:t.getRowIndex?.(),node:n,data:n?.data,value:e,valueFormatted:t.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()??{}});this.state=2,this.tooltipInstanceCount++;const s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);_8(this.userCompFactory,i)?.newAgStackInstance().then(s)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),PP=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const r=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:r,columnMoved:r})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(_n(this.beans),{keydown:r=>{i.contains(r?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=qt(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?tee:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Zg=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},FP)}unlockService(){Zg=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function yw(e){return e.get("tooltipShowMode")==="whenTruncated"}var iee=class extends re{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const n="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(n,e):i.removeAttribute(n))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){this.tooltipManager==null&&(this.tooltipManager=this.createBean(new nee(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}};function see(e,t){if(typeof e!="number")return"";const n=t(),i=n("thousandSeparator",","),s=n("decimalSeparator",".");return e.toString().replace(".",s).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var oee=class extends re{getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},ree=class{constructor(e){const{colModel:t,rowGroupColsSvc:n,colNames:i,valueSvc:s,gos:o,processCellCallback:r,processHeaderCallback:c,processGroupHeaderCallback:u,processRowGroupCallback:h}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=i,this.valueSvc=s,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=c,this.processGroupHeaderCallback=u,this.processRowGroupCallback=h}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,s){const o=t===0&&Yk(this.gos,s,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||s.group)&&(e.isRowGroupDisplayed(s.rowGroupColumn?.getColId()??"")||o))return{value:this.processRowGroupCallback(Me(this.gos,{column:e,node:s}))??""};if(this.processCellCallback)return{value:this.processCellCallback(Me(this.gos,{accumulatedRowIndex:n,column:e,node:s,value:this.valueSvc.getValueForDisplay(e,s,void 0,void 0).value,type:i,parseValue:m=>this.valueSvc.parseValue(e,s,m,this.valueSvc.getValue(e,s,void 0)),formatValue:m=>this.valueSvc.formatValue(e,s,m)??m}))??""};const r=this.gos.get("treeData"),c=this.valueSvc,u=s.level===-1&&s.footer,h=e.colDef.showRowGroup===!0&&(s.group||r);if(!u&&(o||h)){let m="",w=s;for(;w&&w.level!==-1;){const{value:S,valueFormatted:E}=c.getValueForDisplay(o?void 0:e,w,!0,!0);m=` -> ${E??S??""}${m}`,w=w.parent}return{value:m,valueFormatted:m}}const{value:f,valueFormatted:p}=c.getValueForDisplay(e,s,!0,!0);return{value:f??"",valueFormatted:p}}getHeaderName(e,t){return e?e(Me(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function aee(e,t){const n=document.defaultView||window;if(!n){ge(52);return}const i=document.createElement("a"),s=n.URL.createObjectURL(t);i.setAttribute("href",s),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(s)},0)}var lee={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},fi="clientSide",si="serverSide",bc="infinite",cee={onGroupExpandedOrCollapsed:[fi],refreshClientSideRowModel:[fi],isRowDataEmpty:[fi],forEachLeafNode:[fi],forEachNodeAfterFilter:[fi],forEachNodeAfterFilterAndSort:[fi],resetRowHeights:[fi],applyTransaction:[fi],applyTransactionAsync:[fi],flushAsyncTransactions:[fi],getBestCostNodeSelection:[fi],getServerSideSelectionState:[si],setServerSideSelectionState:[si],applyServerSideTransaction:[si],applyServerSideTransactionAsync:[si],applyServerSideRowData:[si],retryServerSideLoads:[si],flushServerSideAsyncTransactions:[si],refreshServerSide:[si],getServerSideGroupLevelState:[si],refreshInfiniteCache:[bc],purgeInfiniteCache:[bc],getInfiniteRowCount:[bc],isLastRowIndexKnown:[bc,si],expandAll:[fi,si],collapseAll:[fi,si],onRowHeightChanged:[fi,si],setRowCount:[bc,si],getCacheBlockState:[bc,si]},uee={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function dee(e,t,n){const i=uee[e];if(i){const{version:o,new:r,old:c,message:u}=i,h=c??e;return(...f)=>{const p=r?`Please use ${r} instead. `:"";return ah(`Since ${o} api.${h} is deprecated. ${p}${u??""}`),t.apply(t,f)}}const s=cee[e];return s?(...o)=>{const r=n.rowModel.getType();if(!s.includes(r)){Hc(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,o)}:t}var hee={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},fee={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},gee={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},pee=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),mee=class extends re{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,J9(this)}warnOnInitialPropertyUpdate(e,t){e==="api"&&lee[t]&&ge(22,{key:t})}processGridOptions(e){this.processOptions(e,PZ())}validateApiFunction(e,t){return dee(e,t,this.beans)}missingUserComponent(e,t,n,i){const s=Xc[t];s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):ge(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})}missingDynamicBean(e){const t=hee[e];return t?qs(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){vee.has(e)&&ge(10,{eventType:e})}validateIcon(e){if(pee.has(e)&&ge(43,{iconName:e}),fee[e])return;const t=gee[e];if(t){vt(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:WR(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}ge(134,{iconName:e})}isProvidedUserComp(e){return!!Xc[e]}validateColDef(e){this.processOptions(e,yZ())}processOptions(e,t){const{validations:n,deprecations:i,allProperties:s,propertyExceptions:o,objectName:r,docsUrl:c}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],s,r,c);const u=new Set;Object.keys(e).forEach(f=>{const p=i[f];if(p){const{message:M,version:I}=p;u.add(`As of v${I}, ${String(f)} is deprecated. ${M??""}`)}const m=e[f];if(m==null||m===!1)return;const w=n[f];if(!w)return;const{dependencies:S,validate:E,supportedRowModels:x,expectedType:P}=w;if(P){const M=typeof m;if(M!==P){u.add(`${String(f)} should be of type '${P}' but received '${M}' (${m}).`);return}}if(x){const M=this.gridOptions.rowModelType??"clientSide";if(!x.includes(M)){u.add(`${String(f)} is not supported with the '${M}' row model. It is only valid with: ${x.join(", ")}.`);return}}if(S){const M=this.checkForRequiredDependencies(f,S,e);if(M){u.add(M);return}}if(E){const M=E(e,this.gridOptions,this.beans);if(M){u.add(M);return}}}),u.size>0&&u.forEach(f=>{ah(f)})}checkForRequiredDependencies(e,t,n){const s=Object.entries(t).filter(([o,r])=>{const c=n[o];return!r.required.includes(c)});return s.length===0?null:s.map(([o,r])=>`'${String(e)}' requires '${o}' to be one of [${r.required.map(c=>c===null?"null":c===void 0?"undefined":c).join(", ")}]. ${r.reason??""}`).join(`
           `)}checkProperties(e,t,n,i,s){const o=["__ob__","__v_skip","__metadata__"],r=Cee(Object.getOwnPropertyNames(e),[...o,...t,...n],n),c=Object.keys(r);for(const u of c){const h=r[u];let f=`invalid ${i} property '${u}' did you mean any of these: ${h.slice(0,8).join(", ")}.`;n.includes("context")&&(f+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),ah(f)}if(c.length>0&&s){const u=this.beans.frameworkOverrides.getDocLink(s);ah(`to see all the valid ${i} properties please check: ${u}`)}}getConsoleMessage(e,t){return WJ(e,t)}};function Cee(e,t,n){const i={},s=e.filter(o=>!t.some(r=>r===o));return s.length>0&&s.forEach(o=>i[o]=JS({inputValue:o,allSuggestions:n}).values),i}var vee=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),yee={moduleName:"Validation",version:Se,beans:[mee]};function HO(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var wee=class extends re{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const n=(i,s)=>{i.hasChildren()&&e&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,c=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||c}):i.childrenAfterFilter=i.childrenAfterGroup,HO(i)};if(this.doingTreeDataFiltering()){const i=(o,r)=>{if(o.childrenAfterGroup)for(let c=0;c<o.childrenAfterGroup.length;c++){const u=o.childrenAfterGroup[c],h=r||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?i(o.childrenAfterGroup[c],h):n(u,h)}n(o,r)},s=o=>i(o,!1);t.executeFromRootNode(s)}else{const i=s=>n(s,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},See=class extends nE{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,n,i,s){this.comp=e;const o=of(this,this.beans.context,s);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const r=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:r}),o.addManagedEventListeners({filterSwitched:({column:c})=>{c===this.column&&r()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return Me(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=es("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new xu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();ru(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if(qt(t)===this.eGui)return;const s=Tl(t,this.eGui,null,e.shiftKey);if(s){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case J.UP:case J.DOWN:case J.LEFT:case J.RIGHT:if(t)return;gl(e);case J.ENTER:t&&ml(this.eGui)&&e.preventDefault();break;case J.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&el(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){const s=this.lastFocusEvent,o=!!(s&&s.key===J.TAB);if(s&&o){const r=s.shiftKey;ml(this.eGui,r)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new tE(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!Mi(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:n,gos:i}=this,s=o=>{if(o?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;const r=this.comp.getFloatingFilterComp();r&&r.then(c=>{if(c){if(i.get("enableFilterHandlers")){const f=o;let p="filter";f?.afterFloatingFilter?p="ui":f?.afterDataChange?p="dataChanged":o?.source==="api"&&(p="api"),this.updateFloatingFilterParams(this.userCompDetails,p);return}const u=t?.getCurrentFloatingFilterParentModel(n),h=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;c.onParentModelChanged(u,h)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:s}),t?.isFilterActive(n)&&s(null)}setupWidth(e){const t=()=>{const n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.beans.colFilter,s=this.active?i?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!s?this.updateCompDetails(e,s,n):o.then(r=>{!r||i?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,n):this.updateFloatingFilterParams(s,"colDef")})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let n=e.params;this.comp.getFloatingFilterComp()?.then(i=>{typeof i?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(n={...n,model:Mn(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),i.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function bee(e,t){const n=e.colModel.getCol(t);if(!n){vt(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function Ree(e){e.menuSvc?.hidePopupMenu()}var Eee={moduleName:"SharedMenu",version:Se,beans:[Kq],apiFunctions:{showColumnMenu:bee,hidePopupMenu:Ree}},Jg=0,Tee=200,xee=class extends re{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:n,column:i,node:s,event:o}=e,r=t.getBoundingClientRect(),c=this.getParentRect();this.setAlignedTo(t,n);let u=!1;const h=()=>{const f=this.keepXYWithinBounds(n,r.top-c.top,0),p=n.clientWidth>0?n.clientWidth:200;u||(n.style.minWidth=`${p}px`,u=!0);const w=c.right-c.left-p;let S;return this.gos.get("enableRtl")?(S=x(),S<0&&(S=E(),this.setAlignedStyles(n,"left")),S>w&&(S=0,this.setAlignedStyles(n,"right"))):(S=E(),S>w&&(S=x(),this.setAlignedStyles(n,"right")),S<0&&(S=0,this.setAlignedStyles(n,"left"))),{x:S,y:f};function E(){return r.right-c.left-2}function x(){return r.left-c.left-p}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:h,postProcessCallback:()=>this.callPostProcessPopup("subMenu",n,t,o instanceof MouseEvent?o:void 0,i,s)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,eventSource:o,alignSide:r="left",position:c="over",column:u,rowNode:h,type:f}=e,p=o.getBoundingClientRect(),m=this.getParentRect();this.setAlignedTo(o,t);const w=()=>{let S=p.left-m.left;r==="right"&&(S-=t.offsetWidth-p.width);let E;return c==="over"?(E=p.top-m.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,p,m,e.nudgeY||0)==="under"?E=p.top-m.top+p.height:E=p.top-t.offsetHeight-(i||0)*2-m.top),{x:S,y:E}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,updatePosition:w,postProcessCallback:()=>this.callPostProcessPopup(f,t,o,null,u,h)})}shouldRenderUnderOrAbove(e,t,n,i){const s=n.bottom-t.bottom,o=t.top-n.top,r=e.offsetHeight+i;return s>r?"under":o>r||o>s?"above":"under"}setAlignedStyles(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const i=this.popupList[n],{alignedToElement:s}=i;!s||(["right","left","over","above","under"].forEach(r=>{s.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const n=this.getPopupIndex(t);if(n!==-1){const i=this.popupList[n];i.alignedToElement=e}}callPostProcessPopup(e,t,n,i,s,o){const r=this.gos.getCallback("postProcessPopup");r&&r({column:s,rowNode:o,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){const{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:s,skipObserver:o,updatePosition:r}=e,c={width:0,height:0},u=(h=!1)=>{let{x:f,y:p}=r();h&&t.clientWidth===c.width&&t.clientHeight===c.height||(c.width=t.clientWidth,c.height=t.clientHeight,i&&(f+=i),s&&(p+=s),n&&(f=this.keepXYWithinBounds(t,f,1),p=this.keepXYWithinBounds(t,p,0)),t.style.left=`${f}px`,t.style.top=`${p}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!o){const h=$o(this.beans,t,()=>u(!0));setTimeout(()=>h(),Tee)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){const e=_n(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Mk(t)}keepXYWithinBounds(e,t,n){const i=n===0,s=i?"clientHeight":"clientWidth",o=i?"top":"left",r=i?"height":"width",c=i?"scrollTop":"scrollLeft",u=_n(this.beans),h=u.documentElement,f=this.getPopupParent(),p=e.getBoundingClientRect(),m=f.getBoundingClientRect(),w=u.documentElement.getBoundingClientRect(),S=f===u.body,E=Math.ceil(p[r]);let P=S?(i?Pk:Kp)(h)+h[c]:f[s];S&&(P-=Math.abs(w[o]-m[o]));const M=P-E;return Math.min(Math.max(t,0),Math.abs(M))}addPopup(e){const t=_n(this.beans),{eChild:n,ariaLabel:i,ariaOwns:s,alwaysOnTop:o,positionCallback:r,anchorToElement:c}=e;if(!t)return ge(122),{hideFunc:()=>{}};const u=this.getPopupIndex(n);if(u!==-1)return{hideFunc:this.popupList[u].hideFunc};this.initialisePopupPosition(n);const h=this.createPopupWrapper(n,!!o,i,s),f=this.addEventListenersToPopup({...e,wrapperEl:h});return r&&r(),this.addPopupToPopupList(n,h,f,c),{hideFunc:f}}initialisePopupPosition(e){const n=this.getPopupParent().getBoundingClientRect();Ce(e.style.top)||(e.style.top=`${n.top*-1}px`),Ce(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n,i){const s=this.getPopupParent(),{environment:o,gos:r}=this.beans,c=an({tag:"div"});return o.applyThemeClasses(c),c.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||dl(e,"dialog"),n?ru(e,n):i&&(e.id||(e.id=`popup-component-${Jg}`),PF(i,e.id)),c.appendChild(e),s.appendChild(c),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),c}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const n of this.popupList)t.applyThemeClasses(n.wrapper)}}addEventListenersToPopup(e){const t=this.beans,n=_n(t),i=this.getPopupParent(),{wrapperEl:s,eChild:o,closedCallback:r,afterGuiAttached:c,closeOnEsc:u,modal:h,ariaOwns:f}=e;let p=!1;const m=x=>{if(!s.contains(qt(t)))return;x.key===J.ESCAPE&&!_o(x)&&E({keyboardEvent:x})},w=x=>E({mouseEvent:x}),S=x=>E({touchEvent:x}),E=(x={})=>{const{mouseEvent:P,touchEvent:M,keyboardEvent:I,forceHide:U}=x;!U&&(this.isEventFromCurrentPopup({mouseEvent:P,touchEvent:M},o)||p)||(p=!0,i.removeChild(s),n.removeEventListener("keydown",m),n.removeEventListener("mousedown",w),n.removeEventListener("touchstart",S),n.removeEventListener("contextmenu",w),this.eventSvc.removeEventListener("dragStarted",w),r&&r(P||M||I),this.removePopupFromPopupList(o,f))};return c&&c({hidePopup:E}),window.setTimeout(()=>{u&&n.addEventListener("keydown",m),h&&(n.addEventListener("mousedown",w),this.eventSvc.addEventListener("dragStarted",w),n.addEventListener("touchstart",S),n.addEventListener("contextmenu",w))},0),E}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:Jg,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),Jg=Jg+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,i.isAnchored=!0,s}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&PF(t,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:s}=e,o=i.getBoundingClientRect(),r=p=>parseInt(p.substring(0,p.length-1),10),c=(p,m)=>{const w=n[p]-o[p],S=r(s.style[p]);return{initialDiff:w,lastDiff:w,initial:S,last:S,direction:m}},u=c("top",0),h=c("left",1),f=this.beans.frameworkOverrides;return new it(p=>{f.wrapIncoming(()=>{f.setInterval(()=>{const m=t.getBoundingClientRect(),w=i.getBoundingClientRect();if(w.top==0&&w.left==0&&w.height==0&&w.width==0){e.hidePopup();return}const E=(x,P)=>{const M=r(s.style[P]);x.last!==M&&(x.initial=M,x.last=M);const I=m[P]-w[P];if(I!=x.lastDiff){const U=this.keepXYWithinBounds(s,x.initial+x.initialDiff-I,x.direction);s.style[P]=`${U}px`,x.last=U}x.lastDiff=I};E(u,"top"),E(h,"left")},200).then(m=>{p(()=>{m!=null&&window.clearInterval(m)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:n,touchEvent:i}=e,s=n||i;if(!s)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const c=this.popupList[r];if(E7(c.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const t=_n(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){const t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,s=this.getWrapper(e);if(!s||i<=1||!t.contains(e))return;const o=[],r=[];for(const m of n)m!==s&&(m.classList.contains("ag-always-on-top")?r.push(m):o.push(m));const c=[],u=r.length,p=s.classList.contains("ag-always-on-top")||!u?[...o,...r,s]:[...o,s,...r];for(let m=0;m<=i;m++){const w=p[m];if(n[m]===p[m]||w===s)continue;w.querySelectorAll("div").forEach(E=>{E.scrollTop!==0&&c.push([E,E.scrollTop])}),m===0?t.insertAdjacentElement("afterbegin",w):p[m-1].insertAdjacentElement("afterend",w)}for(;c.length;){const m=c.pop();m[0].scrollTop=m[1]}}},sC={moduleName:"Popup",version:Se,beans:[xee]},Dee=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function Aee(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function Fee(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function Pee(e,t){const n=e.colModel.getColDefCol(t);if(n)return e.colFilter?.destroyFilter(n,"api")}function Mee(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function Iee(e){return e.filterManager?.getFilterModel()??{}}function _ee(e,t,n){const{gos:i,colModel:s,colFilter:o}=e;n&&!i.get("enableFilterHandlers")&&(ge(288),n=!1);const r=s.getColDefCol(t);return r?o?.getModelForColumn(r,n)??null:null}function kee(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function Lee(e,t){const n=e.colModel.getCol(t);if(!n){vt(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function Oee(e){e.menuSvc?.hideFilterMenu()}function Vee(e,t){const n=e.colModel.getCol(t);if(!n){vt(12,{colKey:t});return}return e.colFilter?.getHandler(n,!0)}function Nee(e,t){const{colModel:n,colFilter:i,gos:s}=e;if(!s.get("enableFilterHandlers")){ge(287);return}const{colId:o,action:r}=t;if(o){const c=n.getColById(o);c&&i?.updateModel(c,r)}else i?.updateAllModels(r)}var Bee={filterHandler:()=>({doesFilterPass:()=>!0})},Gee=class extends re{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...HL},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...e.get("initialState")?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api"){const{colModel:n,dataTypeSvc:i,filterManager:s}=this.beans;if(i?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const o=[],r=this.getModel(!0);if(e){const c=new Set(Object.keys(e));this.allColumnFilters.forEach((u,h)=>{const f=e[h];o.push(this.setModelOnFilterWrapper(u,f)),c.delete(h)}),c.forEach(u=>{const h=n.getColDefCol(u)||n.getCol(u);if(!h){ge(62,{colId:u});return}if(!h.isFilterAllowed()){ge(63,{colId:u});return}const f=this.getOrCreateFilterWrapper(h,!0);if(!f){ge(64,{colId:u});return}o.push(this.setModelOnFilterWrapper(f,e[u],!0))})}else this.model={},this.allColumnFilters.forEach(c=>{o.push(this.setModelOnFilterWrapper(c,null))});it.all(o).then(()=>{const c=this.getModel(!0),u=[];this.allColumnFilters.forEach((h,f)=>{const p=r?r[f]:null,m=c?c[f]:null;Ah(p,m)||u.push(h.column)}),u.length>0&&s?.onFilterChanged({columns:u,source:t})})}getModel(e){const t={},{allColumnFilters:n,initialModel:i,beans:{colModel:s}}=this;if(n.forEach((o,r)=>{const c=this.getModelFromFilterWrapper(o);Ce(c)&&(t[r]=c)}),!e)for(const o of Object.keys(i)){const r=i[o];Ce(r)&&!n.has(o)&&s.getCol(o)?.isFilterAllowed()&&(t[o]=r)}return t}setState(e,t,n="api"){if(this.state.clear(),t)for(const i of Object.keys(t)){const s=t[i];this.state.set(i,{model:Mn(this.model,i),state:s})}this.setModel(e,n)}getState(){const e=this.state;if(!e.size)return;const t={};let n=!1;return e.forEach((i,s)=>{const o=i.state;o!=null&&(n=!0,t[s]=o)}),n?t:void 0}getModelFromFilterWrapper(e){const n=e.column.getColId();if(e.isHandler)return Mn(this.model,n);const i=e.filter;return i?typeof i.getModel!="function"?(ge(66),null):i.getModel():Mn(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=h=>h?h.isFilterActive?h.isFilterActive():(ge(67),!1):!1,{colModel:t,gos:n}=this.beans,i=!!_S(n),s=h=>{if(!h.isPrimary())return!0;const p=!t.isPivotActive();return!h.isValueActive()||!p?!1:t.isPivotMode()?!0:i},o=[],r=[],c=(h,f,p)=>{f&&(s(h)?o.push(p):r.push(p))},u=[];return this.allColumnFilters.forEach(h=>{const f=h.column,p=f.getColId();if(h.isHandler)u.push(it.resolve().then(()=>{c(f,this.isHandlerActive(f),{colId:p,isHandler:!0,handler:h.handler,handlerParams:h.handlerParams})}));else{const m=br(h);m&&u.push(m.then(w=>{c(f,e(w),{colId:p,isHandler:!1,comp:w})}))}}),it.all(u).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){const n=[];return this.allColumnFilters.forEach(i=>{const s=i.column;if(i.isHandler)n.push(it.resolve().then(()=>{this.setColFilterActive(s,this.isHandlerActive(s),e,t)}));else{const o=br(i);o&&n.push(o.then(r=>{this.setColFilterActive(s,r.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),it.all(n)}doFiltersPass(e,t,n){const{data:i,aggData:s}=e,o=n?this.activeAggregateFilters:this.activeColumnFilters,r=n?s:i,c=this.model;for(let u=0;u<o.length;u++){const h=o[u],{colId:f,isHandler:p}=h;if(f!==t)if(p){const{handler:m,handlerParams:w}=h;if(!m.doesFilterPass({node:e,data:r,model:Mn(c,f),handlerParams:w}))return!1}else{const m=h.comp;if(typeof m.doesFilterPass!="function"){vt(91);continue}if(!m.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:n}=this.beans,i=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:n}=e,i=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(s=>{const{column:o,isHandler:r}=s;i!==o.getColId()&&(r&&s.handler.onAnyFilterChanged?.(),br(s,r)?.then(c=>{typeof c?.onAnyFilterChanged=="function"&&c.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(n=>{const i=n.isHandler;i&&n.handler.onNewRowsLoaded?.();const s=br(n,i);s&&t.push(s.then(o=>{o.onNewRowsLoaded?.()}))}),it.all(t).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:n,colModel:i}=this.beans;return(s,o)=>{const r=o?i.getCol(o):e;return r?n.getValue(r,s,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);const n=t?.filter;return n?n.isFilterActive():Mn(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=Ce(Mn(this.model,e.getColId()));if(t)return t;const n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?br(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const n=br(t);return n?n.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const n=this.getOrCreateFilterWrapper(e,t);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return C7(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":eq(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,i,s,o){const r=()=>{const h=this.createFilterCompParams(e,s,o),f=i(h,s);return F8(this.beans.userCompFactory,t,f,n)},c=r();return c?{compDetails:c,createFilterUi:h=>(h?r():c).newAgStackInstance()}:null}createFilterInstance(e,t,n,i){const s=this.beans.selectableFilter;s?.isSelectable(t)&&(t=s.getFilterDef(e,t));const{handler:o,handlerParams:r,handlerGenerator:c}=this.createHandler(e,t,n)??{},u=this.createFilterComp(e,t,n,i,!!o,"init");if(!u)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:c,handlerParams:r};const{compDetails:h,createFilterUi:f}=u;return this.isGlobalButtons&&(h.params?.buttons?.length||ge(281,{colId:e.getColId()})),{compDetails:h,handler:o,handlerGenerator:c,handlerParams:r,createFilterUi:f}}createBaseFilterParams(e,t){const{filterManager:n,rowModel:i}=this.beans;return Me(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:s=>n?.doesRowPassOtherFilters(e.getColId(),s)??!0,rowModel:i})}createFilterCompParams(e,t,n,i){const s=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,i);if(o.filterChangedCallback=s,o.filterModifiedCallback=i?()=>{}:r=>this.filterModified(e,r),t){const r=o,c=e.getColId(),u=Mn(this.model,c);r.model=u,r.state=this.state.get(c)??{model:u},r.onModelChange=(h,f)=>{this.updateStoredModel(c,h),this.refreshHandlerAndUi(e,h,"ui").then(()=>{s({...f,source:"columnFilter"})})},r.onStateChange=h=>{this.updateState(e,h),this.updateOrRefreshFilterUi(e)},r.onAction=(h,f,p)=>{this.updateModel(e,h,f),this.dispatchLocalEvent({type:"filterAction",column:e,action:h,event:p})},r.getHandler=()=>this.getHandler(e,!0),r.onUiChange=h=>this.filterUiChanged(e,h),r.source=n}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){const i=t(),s={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(n),s}createFilterWrapper(e){const{compDetails:t,handler:n,handlerGenerator:i,handlerParams:s,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),c=>c),r=e.getColId();if(n)return delete this.initialModel[r],n.init?.({...s,source:"init",model:Mn(this.model,r)}),{column:e,isHandler:!0,handler:n,handlerGenerator:i,handlerParams:s,filterUi:this.createFilterUiForHandler(t,o)};if(o){const c={column:e,filterUi:null,isHandler:!1};return c.filterUi=this.createFilterUiLegacy(t,o,u=>{c.filter=u??void 0}),c}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t){const{gos:n,frameworkOverrides:i,registry:s}=this.beans;let o;const r=p=>{const m=p.filter;if(CL(m)){const w=m.handler;return w||(o=m.doesFilterPass,o?()=>({doesFilterPass:o}):void 0)}return typeof m=="string"?m:void 0},c=n.get("enableFilterHandlers")?r(e):void 0,u=p=>()=>this.createBean(s.createDynamicBean(p,!0));let h,f;if(typeof c=="string"){const p=n.get("filterHandlers")?.[c];p!=null?h=p:G$.has(c)&&(h=u(c),f=c)}else h=c;if(!h){let p;const{compName:m,jsComp:w,fwComp:S}=wL(i,e);m?p=m:w==null&&S==null&&e.filter===!0&&(p=t),f=this.handlerMap[p],f&&(h=u(f))}if(h)return{filterHandler:h,handlerNameOrCallback:o??f}}createHandler(e,t,n){let i=this.createHandlerFunc(t,n);if(!i){const h=this.gos;if(!h.get("enableFilterHandlers"))return;gn(h)&&ge(277,{colId:e.getColId()}),i=Bee}const s=tw(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:r}=i,{handler:c,handlerParams:u}=this.createHandlerFromFunc(e,r,s);return{handler:c,handlerParams:u,handlerGenerator:o??r}}createHandlerFromFunc(e,t,n){const i=e.getColDef(),s=t(Me(this.gos,{column:e,colDef:i})),o=this.createHandlerParams(e,n);return{handler:s,handlerParams:o}}createHandlerParams(e,t){const n=e.getColDef(),i=e.getColId(),s=this.filterChangedCallbackFactory(e);return Me(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>this.beans.filterManager?.doesRowPassOtherFilters(i,o)??!0,onModelChange:(o,r)=>{this.updateStoredModel(i,o),this.refreshHandlerAndUi(e,o,"handler").then(()=>{s({...r,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:n,groupFilter:i}=this.beans;this.allColumnFilters.forEach((o,r)=>{let c;o.column.isPrimary()?c=t.getColDefCol(r):c=t.getCol(r),!(c&&c===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(r))});const s=i&&e.every(o=>i.isGroupFilter(o));e.length>0&&!s&&n?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:n,frameworkOverrides:i,selectableFilter:s}=this.beans,o=m=>{const w=this.getOrCreateFilterUi(e);w?.then(S=>{m(kh(S))})},r=e.getColDef(),c=s?.isSelectable(r)?s.getFilterDef(e,r):r,u=rq(i,c,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",h=this.gos.get("enableFilterHandlers"),f=tw(n,c,this.createFilterCompParams(e,h,"init",!0)),p=Me(this.gos,{column:e,filterParams:f,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});if(h){const m=p,w=e.getColId(),S=this.filterChangedCallbackFactory(e);m.onUiChange=E=>this.floatingFilterUiChanged(e,E),m.model=Mn(this.model,w),m.onModelChange=(E,x)=>{this.updateStoredModel(w,E),this.refreshHandlerAndUi(e,E,"floating",!0).then(()=>{S({...x,source:"columnFilter"})})},m.getHandler=()=>this.getHandler(e,!0),m.source="init"}return k8(n,r,p,u)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,i){if(e.isHandler){const s=t.getColId();delete this.initialModel[s],this.state.delete(s);const o=e.filterUi,r=this.createFilterUiForHandler(n,i);e.filterUi=r,o?.created&&o.promise.then(c=>{this.destroyBean(c),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:"paramsUpdated",column:e.column})})}else this.destroyFilter(t,"paramsUpdated")}destroyFilter(e,t="api"){const n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],i&&this.disposeFilterWrapper(i,t).then(s=>{s&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1;const{column:i,isHandler:s,filterUi:o}=e,r=i.getColId();s&&(n=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const c=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(o){if(o.created)return o.promise.then(u=>(n=s?n:!!u?.isFilterActive(),this.destroyBean(u),c(),n));c()}return it.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){const n=this.allColumnFilters.get(e);if(!n)return;const i=this.beans,s=n.column,o=s.getColDef(),r=s.isFilterAllowed(),c=this.getDefaultFilter(s),u=i.selectableFilter,h=u?.isSelectable(o)?u.getFilterDef(s,o):o,f=r?this.createHandlerFunc(h,this.getDefaultFilter(s)):void 0,p=!!f,m=n.isHandler;if(m!=p){this.destroyFilter(s,"paramsUpdated");return}const{compDetails:w,createFilterUi:S}=(r?this.createFilterComp(s,h,c,x=>x,p,"colDef"):null)??{compDetails:null,createFilterUi:null},E=w?.params??tw(i.userCompFactory,h,this.createFilterCompParams(s,p,"colDef"));if(m){const x=f?.handlerNameOrCallback??f?.filterHandler,P=Mn(this.model,e);if(n.handlerGenerator!=x){const M=n.handler,{handler:I,handlerParams:U}=this.createHandlerFromFunc(s,f.filterHandler,E);n.handler=I,n.handlerParams=U,n.handlerGenerator=x,delete this.model[e],I.init?.({...U,source:"init",model:null}),this.destroyBean(M),P!=null&&this.beans.filterManager?.onFilterChanged({columns:[s],source:t})}else{const M=this.createHandlerParams(s,w?.params);n.handlerParams=M,n.handler.refresh?.({...M,source:"colDef",model:P})}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,w)||!n.filterUi||!w){this.destroyFilterUi(n,s,w,S);return}n.filterUi.filterParams=E,br(n,m)?.then(x=>{(x?.refresh?x.refresh(E):!0)===!1?this.destroyFilterUi(n,s,w,S):this.dispatchLocalEvent({type:"filterParamsChanged",column:s,params:E})})}refreshHandlerAndUi(e,t,n,i){const s=this.cachedFilter(e);if(!s)return i&&this.getOrCreateFilterWrapper(e,!0),it.resolve();if(!s.isHandler)return it.resolve();const{filterUi:o,handler:r,handlerParams:c}=s;return H$(()=>{if(o){const{created:u,filterParams:h}=o;if(u)return o.promise.then(f=>f?{filter:f,filterParams:h}:void 0);o.refreshed=!0}return it.resolve(void 0)},r,c,t,this.state.get(e.getColId())??{model:t},n)}setColumnFilterWrapper(e,t){const n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const n=this.getOrCreateFilterUi(t);return n?new Promise(i=>{n.then(s=>{i(kh(s))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:i,model:s}=this,o=e.getColId(),r=i.get(o);return r?r.model??null:Mn(s,o)}const n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{};const i=new Promise(s=>{n=s});return this.columnModelUpdates.push({key:e,model:t,resolve:n}),i}return new Promise(n=>{this.setModelForColumnLegacy(e,t).then(i=>n(i))})}getStateForColumn(e){return this.state.get(e)??{model:Mn(this.model,e)}}setModelForColumnLegacy(e,t){const n=this.beans.colModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n,!0):null;return i?this.setModelOnFilterWrapper(i,t):it.resolve()}setColDefPropsForDataType(e,t,n){const i=e.filter,s=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof s!="string")return;let o,r;const c=this.beans,{filterParams:u,filterValueGetter:h}=e;s==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:r}=c.multiFilter?.getParamsForDataType(u,h,t,n)??{}:{filterParams:o,filterValueGetter:r}=X$(s,u,h,t,n,c,this.getLocaleTextFunc()),e.filterParams=o,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,n,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,i)}setModelOnFilterWrapper(e,t,n){return new it(i=>{if(e.isHandler){const o=e.column,r=o.getColId(),c=this.model[r];if(this.updateStoredModel(r,t),n&&t===c){i();return}this.refreshHandlerAndUi(o,t,"api").then(()=>i());return}const s=br(e);if(s){s.then(o=>{if(typeof o?.setModel!="function"){ge(65),i();return}(o.setModel(t)||it.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){Ce(t)?this.model[e]=t:delete this.model[e];const n=this.state.get(e),i={model:t,state:n?.state};this.state.set(e,i)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(n=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:n,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,n){const i=e.getColId(),s=()=>this.cachedFilter(e)?.filterUi;$F(t,s,()=>Mn(this.model,i),()=>this.state.get(i),o=>this.updateState(e,o),o=>s()?.filterParams?.onModelChange(o,n))}updateAllModels(e,t){const n=[];this.allColumnFilters.forEach((i,s)=>{const o=this.beans.colModel.getColDefCol(s);o&&$F(e,()=>i.filterUi,()=>Mn(this.model,s),()=>this.state.get(s),r=>this.updateState(o,r),r=>{this.updateStoredModel(s,r),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),n.push(this.refreshHandlerAndUi(o,r,"ui"))})}),n.length&&it.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();UL(()=>this.cachedFilter(e)?.filterUi,()=>Mn(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:n}=this;for(const s of n)if(s.source==="COLUMN_MENU")return!1;let i=!1;for(const s of e.keys()){const o=e.get(s);if(o.valid===!1)return!1;(o.model??null)!==Mn(t,s)&&(i=!0)}return i}hasUnappliedModel(e){const{model:t,state:n}=this;return(n.get(e)?.model??null)!==Mn(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function Hee(e){return!!e.filterManager?.isAnyFilterPresent()}function zee(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var Uee=class extends re{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,n="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,n)}setFilterModel(e,t="api",n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){_S(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):it.resolve()).then(()=>{const s={source:t,type:"filterChanged",columns:i};n&&li(s,n),this.eventSvc.dispatchEvent(s),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!_S(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){ge(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},Wee=class extends re{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,i){e&&!e.isColumn||this.showPopup(e,s=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:s})},n,t.target,Mi(this.gos),i)}showMenuAfterButtonClick(e,t,n,i){if(e&&!e.isColumn)return;let s=-1,o="left";const r=Mi(this.gos);!r&&this.gos.get("enableRtl")&&(s=1,o="right");const c=r?void 0:4*s,u=r?void 0:4;this.showPopup(e,h=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:h,nudgeX:c,nudgeY:u,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},n,t,r,i)}showPopup(e,t,n,i,s,o){const r=e?this.createBean(new q$(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e){vt(57);return}const c=an({tag:"div",cls:`ag-menu${s?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(c,{keydown:E=>this.trapFocusWithin(E,c)}),c.appendChild(r?.getGui());let u;const h=()=>r?.afterGuiDetached(),f=v7(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,p=E=>{eP(e,!1,"contextMenu");const x=E instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),x&&i&&Qs(i)&&kL(i)?.focus({preventScroll:!0}),h(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),o?.()},m=this.getLocaleTextFunc(),w=s&&n!=="columnFilter"?m("ariaLabelColumnMenu","Column Menu"):m("ariaLabelColumnFilter","Column Filter"),S=this.popupSvc?.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:p,positionCallback:()=>t(c),anchorToElement:f,ariaLabel:w});S&&(this.hidePopup=u=S.hideFunc),r.afterInit().then(()=>{t(c),r.afterGuiAttached({container:n,hidePopup:u})}),eP(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==J.TAB||e.defaultPrevented||Tl(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),ml(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},jee=class extends re{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,n){if(!t)return;const i=e.getColDef(),{selectableFilter:s,valueSvc:o}=this.beans,r=n??s?.getFilterValueGetter(e.getColId())??i.filterValueGetter;return r?this.executeFilterValueGetter(r,t.data,e,t,i):o.getValue(e,t)}executeFilterValueGetter(e,t,n,i,s){const{expressionSvc:o,valueSvc:r}=this.beans,c=Me(this.gos,{data:t,node:i,column:n,colDef:s,getValue:r.getValueCallback.bind(r,i)});return typeof e=="function"?e(c):o?.evaluate(e,c)}},$ee={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},qee=class extends Ft{constructor(){super($ee,[tC]),this.eFloatingFilterText=Ae}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const n=e,i=n.getHandler();if(i.getModelAsString){const s=i.getModelAsString(n.model);this.eFloatingFilterText.setValue(s)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},hE=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t=="string")return;const n=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(o=>t[o]!=null)?!0:(ge(72,{keys:s}),!1);if(!n.every(i)){this.filterOptions=e.filter(s=>s===t)||[];return}this.customFilterOptions[t.displayKey]=t})}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const n=t[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;ge(73)}else ge(74)}getCustomOption(e){return this.customFilterOptions[e]}};function dh(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function mm(e){return e==null||typeof e=="string"&&e.trim().length===0}function Kee(e){return e==="AND"||e==="OR"?e:"AND"}function Yee(e,t,n){if(e==null)return;const{predicate:i}=e;if(i!=null&&!t.some(s=>s==null))return i(t,n)}function Qee(e,t){let n=e.length;return n>t&&(e.splice(t),ge(78),n=t),n}function Gh(e,t){const n=t.getCustomOption(e);if(n){const{numberOfInputs:s}=n;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var fE=class extends sq{constructor(e,t,n){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new hE;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=Kee(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{const i=n===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let o;if(n){const r=e,c=t;o=this.areSimpleModelsEqual(r,c)}else{const r=e,c=t;o=r.operator===c.operator&&El(r.conditions,c.conditions,(u,h)=>this.areSimpleModelsEqual(u,h))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),it.resolve();if(e.operator){const i=e;let s=i.conditions;s==null&&(s=[],ge(77));const o=Qee(s,this.maxNumConditions),r=this.getNumConditions();if(o<r)this.removeConditionsAndOperators(o);else if(o>r)for(let u=r;u<o;u++)this.createJoinOperatorPanel(),this.createOption();const c=i.operator==="OR";this.eJoinAnds.forEach(u=>u.setValue(!c,!0)),this.eJoinOrs.forEach(u=>u.setValue(c,!0)),s.forEach((u,h)=>{this.eTypes[h].setValue(u.type,!0),this.setConditionIntoUi(u,h)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),it.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(ge(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(ge(80),n=1),n>t&&(ge(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){const e=this.getGui(),t=this.createManagedBean(new aE);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){const e=an({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),n=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const i=this.eJoinPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){const i=this.createManagedBean(new EK);e.push(i);const s="ag-filter-condition-operator";return i.addCss(s),i.addCss(`${s}-${n}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach(n=>{e.addOption(n)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);const i=e+1,s=n-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,s)=>{const o=this.isConditionDisabled(s,e);i.setDisabled(o||this.filterListOptions.length<=1),s===1&&(Ph(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((i,s)=>{Wt(i,this.isConditionBodyVisible(s))});const n=(t??this.getJoinOperator())==="OR";this.eJoinAnds.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOrs.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,s,o,r)=>{this.setElementDisplayed(i,s<r),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:n,eConditionBodies:i,eJoinPanels:s,eJoinAnds:o,eJoinOrs:r}=this;this.removeComponents(n,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);const c=Math.max(e-1,0);this.removeElements(s,c,t),this.removeComponents(o,c,t),this.removeComponents(r,c,t)}removeElements(e,t,n){dh(e,t,n).forEach(s=>Uo(s))}removeComponents(e,t,n){dh(e,t,n).forEach(s=>{Uo(s.getGui()),this.destroyBean(s)})}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){const n=this.getInputs(0)[0];n instanceof qa&&this.isConditionBodyVisible(0)?t=n.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,n=-1,i=!1;const s=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))t===-1&&(t=r,n=r);else{const c=r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1),u=r<t;(c||u)&&(this.removeConditionsAndOperators(r,1),i=!0,u&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}getPlaceholderText(e,t){let n=this.translate(e);if(typeof this.filterPlaceholder=="function"){const i=this.eTypes[t].getValue(),s=this.translate(i);n=this.filterPlaceholder({filterOptionKey:i,filterOption:s,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,n,i,s)=>{if(!(t instanceof qa))return;const o=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",r=n===0&&s>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,i)),t.setInputAriaLabel(r)})}setElementValue(e,t,n){e instanceof qa&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Ft&&Wt(e.getGui(),t)}setElementDisabled(e,t){e instanceof Ft&&Ph(e.getGui(),t)}attachElementOnChange(e,t){e instanceof qa&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){const n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){const i=Gh(t,this.optionsFactory),s=this.getInputs(e);for(let o=0;o<s.length;o++){const r=s[o];r!=null&&n(r,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return Gh(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),t)}updateJoinOperatorsDisabled(){const e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,s,o)=>{o===t&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},zO=class{constructor(e,t,n,i,s,o){this.alive=!0,this.context=e,this.eParent=s;const r=P8(t,n,i);r&&r.newAgStackInstance().then(c=>{if(!this.alive){e.destroyBean(c);return}if(this.dateComp=c,!c)return;s.appendChild(c.getGui()),c?.afterGuiAttached?.();const{tempValue:u,disabled:h}=this;u&&c.setDate(u),h!=null&&c.setDisabled?.(h),o?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){Wt(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},gE=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function UO(e,t){const{dateFrom:n,dateTo:i,type:s}=e||{};return[n&&wi(n)||null,i&&wi(i)||null].slice(0,Gh(s,t))}var MP=1e3,IP=1/0,Xee=class extends fE{constructor(){super("dateFilter",UO,gE),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=MP,this.maxValidYear=IP,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(u,h)=>{const f=e[u];if(f!=null)if(isNaN(f))ge(82,{param:u});else return f==null?h:Number(f);return h},n=t("minValidYear",MP),i=t("maxValidYear",IP);this.minValidYear=n,this.maxValidYear=i,n>i&&ge(83);const{minValidDate:s,maxValidDate:o}=e,r=s instanceof Date?s:wi(s);this.minValidDate=r;const c=o instanceof Date?o:wi(o);this.maxValidDate=c,r&&c&&r>c&&ge(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:n,gos:i},params:s}=this,o=new zO(n,t,s.colDef,Me(i,{onDateChanged:()=>this.onUiChanged(),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>o.destroy()),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=an({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,i){const s=an({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(s),e.appendChild(s),n.push(this.createDateCompWrapper(s))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),dh(this.eConditionPanelsFrom,e,t),dh(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){dh(e,t,n).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:n,minValidYear:i,maxValidYear:s}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>s)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,s,o)=>{s!==e||!t||i>=o||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=Ii(i[0])),i.length>1&&(n.dateTo=Ii(i[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...n}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,s,o)=>{i<o&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},WO=class extends re{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,n=new hE;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:n}=t,i=[];if(n){const r=t;i.push(...r.conditions??[])}else i.push(t);const s=n&&n==="OR"?"some":"every",o=this.params.getValue(e.node);return i[s](r=>this.individualConditionPasses(e,r,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:n,maxNumConditions:i}}=e;if(t==null)return;let o=oq(t)?t.conditions:[t];const r=n?.map(f=>typeof f=="string"?f:f.displayKey)??this.defaultOptions;if(!(!o||o.every(f=>r.find(p=>p===f.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let u=!1;const h=this.filterType;if((o&&!o.every(f=>f.filterType===h)||t.filterType!==h)&&(o=o.map(f=>({...f,filterType:h})),u=!0),typeof i=="number"&&o&&o.length>i&&(o=o.slice(0,i),u=!0),u){const f=o.length>1?{...t,filterType:h,conditions:o}:{...o[0],filterType:h};this.params={...e,model:f},e.onModelChange(f);return}}individualConditionPasses(e,t,n){const i=this.optionsFactory,s=this.mapValuesFromModel(t,i),o=i.getCustomOption(t.type),r=Yee(o,s,n);return r??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,n,t,e))}},jO=class extends WO{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:s,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(s)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){const i=n.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";const s=this.comparator(),o=e[0]!=null?s(e[0],t):0;switch(i){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const r=s(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&r<=0:o>0&&r<0}case"blank":return mm(t);case"notBlank":return!mm(t);default:return ge(76,{filterModelType:i}),!0}}},$O={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},Zee={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},pE=class extends re{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){const n=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?Pr(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,c=(o.conditions??[]).map(h=>this.getModelAsString(h,t)),u=o.operator==="AND"?"andCondition":"orCondition";return c.join(` ${Pr(this,u)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?Pr(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(e.type,e.type);{const o=e,r=this.optionsFactory.getCustomOption(o.type),{displayKey:c,displayName:u,numberOfInputs:h}=r||{};return c&&u&&h===0?n(c,u):this.conditionToString(o,i,o.type==="inRange"||h===2,c,u)}}}updateParams(e){const{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,i,s,o){let r;const c=this.getTypeKey(e);return c&&(r=Pr(this,c)),s&&o&&(r=this.getLocaleTextFunc()(s,o)),r!=null?t?`${r} ${Pr(this,"filterSummaryInRangeValues",[n(),i()])}`:`${r} ${n()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},qO=class extends pE{constructor(e,t){super(e,t,n=>{const{dataTypeSvc:i,valueSvc:s}=this.beans,o=t.column,c=i?.getDateFormatterFunction(o)?.(n??void 0);return s.formatValue(o,null,c)}),this.filterTypeKeys=$O}conditionToString(e,t,n,i,s){const{type:o}=e,r=wi(e.dateFrom),c=wi(e.dateTo),u=this.filterParams.inRangeFloatingFilterDateFormat,h=t?this.formatValue.bind(this):m=>HS(m,u),f=()=>r!==null?h(r):"null",p=()=>c!==null?h(c):"null";if(t){const m=this.conditionForToolPanel(o,n,f,p,i,s);if(m!=null)return m}return n?`${f()}-${p()}`:r!=null?h(r):`${o}`}};function Jee(e,t){const n=t;return n<e?-1:n>e?1:0}var ete=class extends jO{constructor(){super(UO,gE),this.filterType="date",this.FilterModelFormatterClass=qO}comparator(){return this.params.filterParams.comparator??Jee}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},KO=class extends Ft{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const n=e;return this.isTypeEditable(n.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const n=e;this.onModelUpdated(n.model)}}setParams(e){const t=new hE;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(n);this.setEditable(i)}refresh(e){this.params=e;const t=e,n=this.reactive;if((!n||t.source==="colDef")&&this.updateParams(e),n){const{source:i,model:s}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(s)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){const t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},tte={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},nte=class extends KO{constructor(){super(tte,[tC]),this.eReadOnlyText=Ae,this.eDateWrapper=Ae,this.FilterModelFormatterClass=qO,this.filterType="date",this.defaultOptions=gE}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const n=e?wi(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Wt(this.eDateWrapper,e),Wt(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const n=t.model,i=Ii(e),s=i==null?null:{...n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:i};t.onModelChange(s,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=KR(e,this.defaultDebounceMs);return Me(this.gos,{onDateChanged:Un(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:i}=this;this.dateComp=new zO(e,t,i.column.getColDef(),this.getDateComponentParams(),n,s=>{s.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},ite={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},ste=class extends Ft{constructor(){super(ite,[tC]),this.eDateInput=Ae,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&wl();const{minValidYear:i,maxValidYear:s,minValidDate:o,maxValidDate:r,buttons:c,includeTime:u,colDef:h}=e.filterParams||{},f=this.beans.dataTypeSvc,p=u??f?.getDateIncludesTimeFlag?.(h.cellDataType)??!1;if(n?p?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&i&&ge(85),r&&s&&ge(86),o&&r){const[m,w]=[o,r].map(S=>S instanceof Date?S:wi(S));m&&w&&m.getTime()>w.getTime()&&ge(87)}o?o instanceof Date?t.min=HS(o):t.min=o:i&&(t.min=`${i}-01-01`),r?r instanceof Date?t.max=HS(r):t.max=r:s&&(t.max=`${s}-12-31`),this.isApply=e.location==="floatingFilter"&&!!c?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return wi(this.eDateInput.getValue())}setDate(e){const t=this.params.filterParams.colDef.cellDataType,n=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(Ii(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},mE=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function eb(e){const{allowedCharPattern:t}=e??{};return t??null}function tb(e){return e==null||isNaN(e)?null:e}function YO(e,t){const{filter:n,filterTo:i,type:s}=e||{};return[tb(n),tb(i)].slice(0,Gh(s,t))}var ote=class extends fE{constructor(){super("numberFilter",YO,mE),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,n){const{numberFormatter:i}=this.params,s=!n&&i?i(t??null):t;super.setElementValue(e,s)}createEValue(){const e=eb(this.params),t=an({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){const s=this.createManagedBean(i?new xl({allowedCharPattern:i}):new rE);s.addCss(`ag-filter-${n}`),s.addCss("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeEValues(e,t){const n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,s,o)=>{i<o&&t.push(tb(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=Io(e);t!=null&&t.trim()===""&&(t=null);const n=this.params.numberParser;return n?n(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},QO=class extends pE{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=$O}conditionToString(e,t,n,i,s){const{filter:o,filterTo:r,type:c}=e,u=this.formatValue.bind(this);if(t){const h=this.conditionForToolPanel(c,n,()=>u(o),()=>u(r),i,s);if(h!=null)return h}return n?`${u(o)}-${u(r)}`:o!=null?u(o):`${c}`}},rte=class extends jO{constructor(){super(YO,mE),this.filterType="number",this.FilterModelFormatterClass=QO}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},XO=class extends re{constructor(e){super(),this.params=e,this.eInput=Ae,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new xl(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const n=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:n}=this;n.setInputAriaLabel(e),t!==void 0&&n.setAutoComplete(t)}};function ZO(e){const t=e?.trim();return t===""?e:t}function JO(e,t){const{filter:n,filterTo:i,type:s}=e||{};return[n||null,i||null].slice(0,Gh(s,t))}var ate={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},eV=class extends KO{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Ae,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(ate)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:i,readOnly:s}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Jm(e.filterParams),!s){const o=KR(e.filterParams,i),r=Un(this,this.syncUpWithParentFilter.bind(this),o);n.setValueChangedListener(r)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,n=t.getValue();_i(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){const t=e.key===J.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:i,params:s,lastType:o}=this;let r=i.getValue();if(s.filterParams.trimInput&&(r=ZO(r),i.setValue(r,!0)),n){const c=s,u=c.model,h=this.convertValue(r),f=h==null?null:{...u??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:h};c.onModelChange(f,{afterFloatingFilter:!0})}else s.parentFilterInstance(c=>{c?.onFloatingFilterChanged(o||null,r||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},lte=class extends re{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new rE),this.eTextInput=this.createManagedBean(new xl),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},cte=class extends eV{constructor(){super(...arguments),this.FilterModelFormatterClass=QO,this.filterType="number",this.defaultOptions=mE}updateParams(e){eb(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=eb(e.filterParams),this.allowedCharPattern?this.createManagedBean(new XO({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new lte)}convertValue(e){return e?Number(e):null}},CE=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],ute=class extends fE{constructor(){super("textFilter",JO,CE),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const n=[];return this.forEachPositionInput(e,(i,s,o,r)=>{if(s<r){let c=Io(i.getValue());t&&this.params.trimInput&&(c=ZO(c)??null,i.setValue(c,!0)),n.push(c)}}),n}createEValue(){const e=an({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,n,"to"),e}createFromToElement(e,t,n){const i=this.createManagedBean(new xl);i.addCss(`ag-filter-${n}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){const n=o=>this.removeComponents(o,e,t),{eValuesFrom:i,eValuesTo:s}=this;n(i),n(s)}},tV=class extends pE{constructor(){super(...arguments),this.filterTypeKeys=Zee}conditionToString(e,t,n,i,s){const{filter:o,filterTo:r,type:c}=e;if(t){const u=f=>()=>Pr(this,"filterSummaryTextQuote",[f]),h=this.conditionForToolPanel(c,n,u(o),u(r),i,s);if(h!=null)return h}return n?`${o}-${r}`:o!=null?`${o}`:`${c}`}},dte=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{const i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},hte=e=>e,fte=e=>e==null?null:e.toString().toLowerCase(),gte=class extends WO{constructor(){super(JO,CE),this.filterType="text",this.FilterModelFormatterClass=tV}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??dte,this.formatter=t.textFormatter??(t.caseSensitive?hte:fte)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){const s=e.map(m=>this.formatter(m))||[],o=this.formatter(t),{api:r,colDef:c,column:u,context:h,filterParams:{textFormatter:f}}=this.params;if(n.type==="blank")return mm(t);if(n.type==="notBlank")return!mm(t);const p={api:r,colDef:c,column:u,context:h,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:f};return s.some(m=>this.matcher({...p,filterText:m}))}},pte=class extends eV{constructor(){super(...arguments),this.FilterModelFormatterClass=tV,this.filterType="text",this.defaultOptions=CE}createFloatingFilterInputService(){return this.createManagedBean(new XO)}};function mte(e){return!!e.quickFilter?.isFilterPresent()}function Cte(e){return e.quickFilter?.getText()}function vte(e){e.quickFilter?.resetCache()}var yte=class extends re{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){const{autoColSvc:e,colModel:t,gos:n,pivotResultCols:i}=this.beans,s=t.isPivotMode(),o=e?.getColumns(),r=t.getColDefCols();let c=(s&&!n.get("applyQuickFilterBeforePivotOrAgg")?i?.getPivotResultCols()?.list:r)??[];o&&(c=c.concat(o)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?c:c.filter(u=>u.isVisible()||u.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Ce(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){ge(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{const i=this.getTextForColumn(n,e);return Ce(i)&&i.indexOf(t)>=0})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);const{quickFilterParts:i,matcher:s}=this;return s(i,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t);const i=e.getColDef();if(i.getQuickFilterText){const s=Me(this.gos,{value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(s)}return Ce(n)?n.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach(n=>{const i=this.getTextForColumn(n,e);Ce(i)&&t.push(i)}),t.join(`
`)}},wte={moduleName:"ClientSideRowModelFilter",version:Se,rowModels:["clientSide"],beans:[wee]},vE={moduleName:"FilterCore",version:Se,beans:[Uee],apiFunctions:{isAnyFilterPresent:Hee,onFilterChanged:zee},css:[Dee],dependsOn:[wte]},nV={moduleName:"FilterValue",version:Se,beans:[jee]},oC={moduleName:"ColumnFilter",version:Se,beans:[Gee,Wee],dynamicBeans:{headerFilterCellCtrl:See},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:Aee,getColumnFilterInstance:Fee,destroyFilter:Pee,setFilterModel:Mee,getFilterModel:Iee,getColumnFilterModel:_ee,setColumnFilterModel:kee,showColumnFilter:Lee,hideColumnFilter:Oee,getColumnFilterHandler:Vee,doFilterAction:Nee},dependsOn:[vE,sC,nV,Eee]},Ste={moduleName:"CustomFilter",version:Se,userComponents:{agReadOnlyFloatingFilter:qee},dependsOn:[oC]},bte={moduleName:"TextFilter",version:Se,dependsOn:[oC],userComponents:{agTextColumnFilter:{classImp:ute,params:{useForm:!0}},agTextColumnFloatingFilter:pte},dynamicBeans:{agTextColumnFilterHandler:gte}},Rte={moduleName:"NumberFilter",version:Se,dependsOn:[oC],userComponents:{agNumberColumnFilter:{classImp:ote,params:{useForm:!0}},agNumberColumnFloatingFilter:cte},dynamicBeans:{agNumberColumnFilterHandler:rte}},Ete={moduleName:"DateFilter",version:Se,dependsOn:[oC],userComponents:{agDateColumnFilter:{classImp:Xee,params:{useForm:!0}},agDateInput:ste,agDateColumnFloatingFilter:nte},dynamicBeans:{agDateColumnFilterHandler:ete}},Tte={moduleName:"QuickFilterCore",version:Se,rowModels:["clientSide"],beans:[yte],dependsOn:[vE,nV]},xte={moduleName:"QuickFilter",version:Se,apiFunctions:{isQuickFilterPresent:mte,getQuickFilter:Cte,resetQuickFilter:vte},dependsOn:[Tte]},Dte={moduleName:"ExternalFilter",version:Se,dependsOn:[vE]},Ate=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",ww=(e,t,n)=>{const{editModelSvc:i}=e,s=i?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,o=i?.getRowValidationModel().getRowValidation(t)?.errorMessages,r=s||o;return r&&r.length?r.join(n("tooltipValidationErrorSeparator",". ")):void 0},Fte=class extends re{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,i){e&&t.destroyBean(e);const s=yw(this.gos),{column:o,eGui:r}=t,c=o.getColDef();!i&&s&&!c.headerComponent&&(i=dp(()=>r.querySelector(".ag-header-cell-text")));const u={getColumn:()=>o,getColDef:()=>o.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>n??o.getColDef().headerTooltip,shouldDisplayTooltip:i};let h=this.createTooltipFeature(u);return h&&(h=t.createBean(h),t.setRefreshFunction("tooltip",()=>h.refreshTooltip())),h}setupHeaderGroupTooltip(e,t,n,i){e&&t.destroyBean(e);const s=yw(this.gos),{column:o,eGui:r}=t,c=o.getColGroupDef();!i&&s&&!c?.headerGroupComponent&&(i=dp(()=>r.querySelector(".ag-header-group-text")));const u={getColumn:()=>o,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>n??(c&&c.headerTooltip),shouldDisplayTooltip:i};c&&(u.getColDef=()=>c);const h=this.createTooltipFeature(u);return h&&t.createBean(h)}enableCellTooltipFeature(e,t,n){const{beans:i}=this,{gos:s,editSvc:o}=i,{column:r,rowNode:c}=e;let u="cell";const h=()=>{const w=!!!o?.isEditing(e)&&ww(i,e,this.getLocaleTextFunc());if(w)return u="cellEditor",w;u="cell";const S=r.getColDef(),E=c.data;if(S.tooltipField&&Ce(E))return oh(E,S.tooltipField,r.isTooltipFieldContainsDots());const x=S.tooltipValueGetter;return x?x(Me(s,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:c,data:c.data,value:e.value,valueFormatted:e.valueFormatted})):null},f=yw(s);n||(f&&!e.isCellRenderer()?n=()=>{const m=!!o?.isEditing(e);if(!m&&ww(i,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const E=dp(()=>{const x=e.eGui;return x.children.length===0?x:x.querySelector(".ag-cell-value")});return!m&&E()}:n=()=>!o?.isEditing(e));const p={getColumn:()=>r,getColDef:()=>r.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>c,getGui:()=>e.eGui,getLocation:()=>u,getTooltipValue:t!=null?()=>t:h,getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:n};return this.createTooltipFeature(p,i)}setupFullWidthRowTooltip(e,t,n,i){const s={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},o=this.beans,r=o.context;e&&t.destroyBean(e,r);const c=this.createTooltipFeature(s,o);if(c)return t.createBean(c,r)}setupCellEditorTooltip(e,t){const{beans:n}=this,{context:i}=n,s=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!s)return;const o={getGui:()=>s,getTooltipValue:()=>ww(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{const{editModelSvc:c}=n,u=c?.getRowValidationModel()?.getRowValidationMap(),h=c?.getCellValidationModel()?.getCellValidationMap(),f=!!u&&u.size>0,p=!!h&&h.size>0;return f||p}},r=this.createTooltipFeature(o,n);if(r)return e.createBean(r,i)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Ce(t.tooltipField)||Ce(t.tooltipValueGetter)||Ce(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},iV={moduleName:"Tooltip",version:Se,beans:[Fte],dynamicBeans:{tooltipFeature:iee},userComponents:{agTooltipComponent:JJ},dependsOn:[sC],css:[Ate]},Pc=class{constructor(e){this.cellValueChanges=e}},Sw=class extends Pc{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},Pte=10,_P=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Pte,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Mte=class extends re{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&xL(this.activeCellEdit,t),i=this.activeRowEdit!==null&&X8(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:c,oldValue:u,value:h}=e,f={rowPinned:o,rowIndex:r,columnId:c.getColId(),newValue:h,oldValue:u};this.cellValueChanges.push(f)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new _P(n),this.redoStack=new _P(n),this.addListeners();const i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:s=>{s.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,s=>{this.gridBodyCtrl=s.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});const s=this.undoRedo(n,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:s})}redo(e){const{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});const s=this.undoRedo(i,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:s})}undoRedo(e,t,n,i,s){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,r=>r[i],s),o instanceof Sw?this.processRange(o.ranges||[o[n]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{const{rowIndex:s,rowPinned:o,columnId:r}=i,c={rowIndex:s,rowPinned:o},u=Wo(this.beans,c);u.displayed&&u.setDataValue(r,t(i),n)})}processRange(e){let t;const n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((i,s)=>{if(!i)return;const o=i.startRow,r=i.endRow;s===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const c={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:i.startColumn,columns:i.columns};n.addCellRange(c)})}processCell(e){const t=e[0],{rowIndex:n,rowPinned:i}=t,s={rowIndex:n,rowPinned:i},o=Wo(this.beans,s),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:n,rowPinned:i}=e,{colModel:s,focusSvc:o,rangeSvc:r}=this.beans,c=s.getCol(n);if(!c)return;const{scrollFeature:u}=this.gridBodyCtrl;u.ensureIndexVisible(t),u.ensureColumnVisible(c);const h={rowIndex:t,column:c,rowPinned:i};o.setFocusedCell({...h,forceBrowserFocus:!0}),r?.setRangeToCell(h)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Pc(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const n=new Pc(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Pc(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Sw(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:n}=this.beans;t&&qr(n)?e=new Sw(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Pc(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this[e]=!0}stopBigChange(e,t){if(!this[e]||(this[e]=!1,t?.length===0))return;const n=new Pc(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},Ite=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}",_te={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},kte=class extends eC{constructor(){super(_te,[oE]),this.eEditor=Ae}initialiseEditor(e){const t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),n=Qm(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},rC=class extends eC{constructor(e){super(),this.cellEditorInput=e,this.eEditor=Ae}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:n}=this,{cellStartedEdit:i,eventKey:s,suppressPreventDefault:o}=e;n.getInputElement().setAttribute("title",""),t.init(n,e);let r,c=!0;i?(this.focusAfterAttached=!0,s===J.BACKSPACE||s===J.DELETE?r="":s&&s.length===1?o?c=!1:r=s:(r=t.getStartValue(),s!==J.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),c&&r!=null&&n.setStartValue(r),this.addGuiEventListener("keydown",u=>{const{key:h}=u;(h===J.PAGE_UP||h===J.PAGE_DOWN)&&u.preventDefault()})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;wl()||t.getFocusableElement().focus();const n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},Lte={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Ote=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Lte}getAgComponents(){return[sO]}init(e,t){this.eEditor=e,this.params=t;const{min:n,max:i,step:s,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:n}=this,{min:i,max:s,getValidationErrors:o}=n;let r=[];const c=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){const u=i instanceof Date?i:new Date(i);if(t<u){const h=u.toLocaleDateString();r.push(c("minDateValidation",`Date must be after ${h}`,[h]))}}if(s){const u=s instanceof Date?s:new Date(s);if(t>u){const h=u.toLocaleDateString();r.push(c("maxDateValidation",`Date must be before ${h}`,[h]))}}}return r.length||(r=null),o?o({value:t,cellEditorParams:n,internalErrors:r}):r}getValue(){const{eEditor:e,params:t}=this,n=e.getDate();return!Ce(n)&&!Ce(t.value)?t.value:n??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ii(e,this.includeTime??!1)}},Vte=class extends rC{constructor(){super(new Ote(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Nte={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Bte=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Nte}getAgComponents(){return[sO]}init(e,t){this.eEditor=e,this.params=t;const{min:n,max:i,step:s,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,n=e.getInputElement().value,i=this.formatDate(this.parseDate(n??void 0)),{min:s,max:o,getValidationErrors:r}=t;let c=[];if(i){const u=new Date(i),h=this.getLocaleTextFunc();if(s){const f=new Date(s);if(u<f){const p=f.toLocaleDateString();c.push(h("minDateValidation",`Date must be after ${p}`,[p]))}}if(o){const f=new Date(o);if(u>f){const p=f.toLocaleDateString();c.push(h("maxDateValidation",`Date must be before ${p}`,[p]))}}}return c.length||(c=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:c}):c}getValue(){const{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!Ce(n)&&!Ce(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return Ii(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):wi(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ii(e??null,this.includeTime??!1)??void 0}},Gte=class extends rC{constructor(){super(new Bte(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Hte={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},zte=class extends eC{constructor(){super(Hte,[xK]),this.eEditor=Ae}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:n,eventKey:i,value:s,maxLength:o,cols:r,rows:c}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute("title",""),t.setMaxLength(o||200).setCols(r||60).setRows(c||10);let u;n?(this.focusAfterAttached=!0,i===J.BACKSPACE||i===J.DELETE?u="":i&&i.length===1?u=i:(u=s.toString(),i!==J.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,u=s.toString()),u!=null&&t.setValue(u,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===J.LEFT||t===J.UP||t===J.RIGHT||t===J.DOWN||e.shiftKey&&t===J.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:n}=t,i=e.getValue();return!Ce(i)&&!Ce(n)?n:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getLocaleTextFunc(),s=this.getValue();let o=[];return typeof s=="string"&&t!=null&&s.length>t&&o.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:s,internalErrors:o,cellEditorParams:e}):o}},Ute={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},Wte=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Ute}getAgComponents(){return[DK]}init(e,t){this.eEditor=e,this.params=t;const{max:n,min:i,precision:s,step:o}=t;n!=null&&e.setMax(n),i!=null&&e.setMin(i),s!=null&&e.setPrecision(s),o!=null&&e.setStep(o);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:n,getValidationErrors:i}=e,o=this.eEditor.getInputElement().valueAsNumber,r=this.getLocaleTextFunc();let c=[];return typeof o=="number"&&(t!=null&&o<t&&c.push(r("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&o>n&&c.push(r("maxValueValidation",`Must be less than or equal to ${n}.`,[String(n)]))),c.length||(c=null),i?i({value:o,cellEditorParams:e,internalErrors:c}):c}preventStepping(e){(e.key===J.UP||e.key===J.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();if(!Ce(n)&&!Ce(t.value))return t.value;let i=t.parseValue(n);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){wl()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},jte=class extends rC{constructor(){super(new Wte(()=>this.getLocaleTextFunc()))}},$te={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},qte=class extends eC{constructor(){super($te,[kK]),this.eEditor=Ae,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:n,gos:i}=this,{values:s,value:o,eventKey:r}=e;if(Nt(s)){ge(58);return}this.startedByEnter=r!=null?r===J.ENTER:!1;let c=!1;s.forEach(p=>{const m={value:p},w=n.formatValue(e.column,null,p),S=w!=null;m.text=S?w:p,t.addOption(m),c=c||o===p}),c?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:h,valueListMaxHeight:f}=e;u!=null&&t.setPickerGap(u),f!=null&&t.setPickerMaxHeight(f),h!=null&&t.setPickerMaxWidth(h),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:n}=e,i=this.getValue();let s=[];if(t&&!t.includes(i)){const o=this.getLocaleTextFunc();s.push(o("invalidSelectionValidation","Invalid selection."))}else s=null;return n?n({value:i,internalErrors:s,cellEditorParams:e}):s}},Kte={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},Yte=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Kte}getAgComponents(){return[tC]}init(e,t){this.eEditor=e,this.params=t;const n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getValue(),s=this.getLocaleTextFunc();let o=[];return t!=null&&typeof i=="string"&&i.length>t&&o.push(s("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:i,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();return!Ce(n)&&!Ce(t.value)?t.value:t.parseValue(n)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eEditor,t=e.getValue(),n=Ce(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},kP=class extends rC{constructor(){super(new Yte(()=>this.getLocaleTextFunc()))}};function Qte(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function Xte(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function sV(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function oV(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function Zte(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Jte(e){e.undoRedo?.undo("api")}function ene(e){e.undoRedo?.redo("api")}function tne(e){const t=e.editModelSvc?.getEditMap(),n=[];return t?.forEach((i,s)=>{const{rowIndex:o,rowPinned:r}=s;i.forEach((c,u)=>{const{editorValue:h,pendingValue:f,sourceValue:p,state:m}=c,w=Vr(c);let S=h??f;S===ss&&(S=void 0);const E={newValue:S,oldValue:p,state:m,column:u,colId:u.getColId(),colKey:u.getColId(),rowIndex:o,rowPinned:r};(m==="editing"||m==="changed"&&w)&&n.push(E)})}),n}function nne(e,t=!1){const{editSvc:n}=e;n?.isBatchEditing()?(t?e.editModelSvc?.getEditPositions().forEach(i=>{i.state==="editing"&&n.revertSingleCellEdit(i)}):$a(e,!0),$c(e)):n?.stopEditing(void 0,{cancel:t,source:"api"})}function ine(e,t){const n=Ot(e,t);return e.editSvc?.isEditing(n)??!1}function sne(e,t){const{key:n,colKey:i,rowIndex:s,rowPinned:o}=t,{editSvc:r,colModel:c}=e,u=c.getCol(i);if(!u){ge(12,{colKey:i});return}const f=Wo(e,{rowIndex:s,rowPinned:o||null});if(!f){ge(290,{rowIndex:s,rowPinned:o});return}if(!u.isCellEditable(f))return;o==null&&oV(e,s),sV(e,i),r?.startEditing({rowNode:f,column:u},{event:n?new KeyboardEvent("keydown",{key:n}):void 0,source:"api"})}function one(e){return e.editSvc?.validateEdit()||null}function rne(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function ane(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var lne={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},cne=class extends iE{constructor(e){super(lne),this.params=e}postConstruct(){fl(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,n=i=>{WS(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},Cm=(e,t=!1)=>{if(e!==void 0)return Vr(e)||t&&e.state==="editing"};function rV(e,t,n=!1){return Cm(e.editModelSvc?.getEdit(t),n)}function aV(e,t){const{editModelSvc:n}=e,{column:i,rowNode:s}=t;if(e.gos.get("groupTotalRow")&&!s?.footer)return!1;for(const o of s?.allLeafChildren??[])if(Cm(n?.getEdit({rowNode:o,column:i}))||Cm(n?.getEdit({rowNode:o.pinnedSibling,column:i})))return!0}function lV(e,{rowNode:t,column:n}){if(t=t.pinnedSibling,!!t)return Cm(e.editModelSvc?.getEdit({rowNode:t,column:n}))}var une=class extends re{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){const{cellCtrl:e,editSvc:t,beans:n}=this;if(t?.isBatchEditing()&&t.isEditing()){const s=rV(n,e)||aV(n,e)||lV(n,e);this.applyBatchingStyle(s)}else this.applyBatchingStyle(!1);const i=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},dne=class extends re{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){const{rowCtrl:e,editModelSvc:t,beans:n}=this;let i=e.rowNode,s=t?.getEditRow(i);const o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:i});if(!s&&i.pinnedSibling&&(i=i.pinnedSibling,s=t?.getEditRow(i)),s){const r=Array.from(s.keys()).some(c=>{const u={rowNode:i,column:c};return rV(n,u,!0)||aV(n,u)||lV(n,u)});this.applyStyle(o,r);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){const n=this.editSvc?.isBatchEditing()??!1,i=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:s})=>{s.toggleCss("ag-row-editing",i&&t),s.toggleCss("ag-row-batch-edit",i&&t&&n),s.toggleCss("ag-row-inline-editing",t),s.toggleCss("ag-row-not-inline-editing",!t),s.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},hne=({rowModel:e,pinnedRowModel:t,editModelSvc:n},i)=>{const s=new Set;return e.forEachNode(o=>i.has(o)&&s.add(o)),t?.forEachPinnedRow("top",o=>i.has(o)&&s.add(o)),t?.forEachPinnedRow("bottom",o=>i.has(o)&&s.add(o)),i.forEach(o=>{s.has(o)||n.removeEdits({rowNode:o})}),s},fne=({editModelSvc:e},t,n)=>{t.forEach(i=>e?.getEditRow(i)?.forEach((s,o)=>!n.has(o)&&e.removeEdits({rowNode:i,column:o})))},gne=e=>()=>{const t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0),i=new Set(n.keys());fne(e,hne(e,i),t)},pne=new Set(["undo","redo"]),cV={paste:"ui",rangeSvc:"ui",fillHandle:"api",cellClear:"api"},mne=new Set(Object.keys(cV)),Cne=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),ep={cancel:!0,source:"api"},vne={cancel:!1,source:"api"},Rc={checkSiblings:!0},Nd={force:!0,suppressFlash:!0},yne=class extends re{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,ep),this.createStrategy(i)});const t=gne(e),n=()=>{const i=this.model.getCellValidationModel().getCellValidationMap().size>0,s=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||s?this.stopEditing(void 0,ep):this.isEditing()&&(this.isBatchEditing()?$c(e,this.model.getEditPositions()):this.stopEditing(void 0,vne)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowGroupOpened:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,ep)):(this.stopEditing(void 0,ep),this.batch=!1)}createStrategy(e){const{beans:t,gos:n,strategy:i}=this,s=e??n.get("editType")??"singleCell";if(i){if(i.beanName===s)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(s,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,i="ui"){return this.strategy??(this.strategy=this.createStrategy()),this.strategy?.shouldStart(e,t,n,i)??null}shouldStopEditing(e,t,n="ui"){return this.strategy?.shouldStop(e,t,n)??null}shouldCancelEditing(e,t,n="ui"){return this.strategy?.shouldCancel(e,t,n)??null}validateEdit(){return l$(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??Rc)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:n=!0,event:i=null,source:s="ui",ignoreEventKey:o=!1}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const r=Ot(this.beans,e);if(r&&!r.comp){r.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const c=this.shouldStartEditing?.(e,i,n,s);if(c===!1&&s!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,s)&&this.stopEditing(void 0,{source:s}),c&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start(e,i,s,o)}stopEditing(e,t){const{event:n,cancel:i,source:s="ui",suppressNavigateAfterEdit:o}=t||{},{beans:r,model:c}=this;if(mne.has(s))return this.isBatchEditing()?(this.bulkRefresh(e),!1):this.stopEditing(e,{...t,source:cV[s]});if(!(this.isEditing(e)||this.isBatchEditing()&&c.hasEdits(e,Rc))||!this.strategy)return!1;const h=Ot(r,e);h&&(h.onEditorAttachedFuncs=[]);let f=c.getEditMap(!0),p=!1;const m=!i&&!!this.shouldStopEditing(e,n,s),w=i&&!!this.shouldCancelEditing(e,n,s);if(m||w){$a(r,!0);const S=c.getEditMap();this.processEdits(S,i),this.strategy?.stop(i,n),this.bulkRefresh(void 0,f),f=S,p||(p=m)}else if(n instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){const S=n.key,E=S===J.ENTER,x=S===J.ESCAPE,P=S===J.TAB;(E||P||x)&&(E||P?$a(r,!0):x&&this.revertSingleCellEdit(h),this.isBatchEditing()?this.strategy?.cleanupEditors():$c(r,c.getEditPositions(),{event:n}),n.preventDefault(),this.bulkRefresh(e,f,{suppressFlash:!0}),f=c.getEditMap())}else $a(r,!0),f=c.getEditMap();return p&&e&&this.model.removeEdits(e),!o&&h&&this.navigateAfterEdit(n instanceof KeyboardEvent&&n.shiftKey,h.cellPosition),NS(r),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),w&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(f.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),p&&m&&this.dispatchBatchEvent("batchEditingStopped",f)),p}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?J.UP:J.DOWN;this.beans.navigation?.navigateToNextCell(null,i,t,!1)}}processEdits(e,t=!1){const n=Array.from(e.keys()),{beans:i}=this,s=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const r of n){const c=e.get(r);for(const u of c.keys()){const h=c.get(u),f={rowNode:r,column:u},p=Ot(i,f),m=Vr(h),w=p?.comp?.getCellEditor()?.isCancelAfterEnd?.();!t&&!w&&m&&!s&&(this.setNodeDataValue(r,u,h.pendingValue)||o.push(f)),p?.refreshCell(Nd)}}o.forEach(r=>{this.model.clearEditValue(r)})}setNodeDataValue(e,t,n,i){const{beans:s}=this,o=Ot(s,{rowNode:e,column:t});o&&(o.suppressRefreshCell=!0);const r=e.setDataValue(t,n,"commit");return o&&(o.suppressRefreshCell=!1),i&&o?.refreshCell(Nd),r}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh(),this.beans.rowRenderer.refreshCells(Nd)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;const{pendingValue:i,sourceValue:s}=n,{rowIndex:o,rowPinned:r,data:c}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:r,column:t,source:"api",data:c,newValue:i,oldValue:s,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){const{beans:i,gos:s}=this,{editModelSvc:o,rowModel:r}=i;gn(s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&o?.getEditMap(!1)?.forEach((c,u)=>{for(const h of c.keys())this.refCell({rowNode:u,column:h},c.get(h),n)}))}refCell({rowNode:e,column:t},n,i={}){const{beans:s,gos:o}=this,r=new Set([e]),c=new Set,u=e.pinnedSibling;u&&r.add(u);const h=e.sibling;h&&c.add(h);let f=e.parent;for(;f;)f.sibling?.footer&&o.get("groupTotalRow")||!f.parent&&f.sibling&&o.get("grandTotalRow")?c.add(f.sibling):c.add(f),f=f.parent;r.forEach(p=>this.dispatchEditValuesChanged({rowNode:p,column:t},n)),r.forEach(p=>Ot(s,{rowNode:p,column:t})?.refreshCell(i)),c.forEach(p=>Ot(s,{rowNode:p,column:t})?.refreshCell(i))}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:n}=e;if(n.group){if(this.gos.get("treeData")){if(!n.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.strategy??(this.strategy=this.createStrategy()),this.strategy?.isCellEditable(e,t)??!1}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,n=!0){if(this.hasValidationErrors(e)){const i=Ot(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),n&&(!i?.hasBrowserFocus()&&i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(i&&this.revertSingleCellEdit(i),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){const n=Ot(this.beans,e);n?.comp?.getCellEditor()&&($c(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),cu(this.beans,e,{silent:!0}),pl(this.beans),n?.refreshCell(Nd),n.rowCtrl.rowEditStyleFeature?.applyRowStyles(),t&&(n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){pl(this.beans);const t=Ot(this.beans,e);t&&(t.refreshCell(Nd),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let n=!1;return e?.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,n,i="ui"){let s;const o=this.isEditing(),r=o&&this.checkNavWithValidation(void 0,n)==="block-stop";return e instanceof Kc&&o&&(s=this.strategy?.moveToNextEditingCell(e,t,n,i,r)),s===null||(s=s||!!this.beans.focusSvc.focusedHeader,s===!1&&!r&&this.stopEditing()),s}getCellDataValue({rowNode:e,column:t},n=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t});const s=e.pinnedSibling;if(s){const r=this.model.getEdit({rowNode:s,column:t});r&&(i=r)}const o=n?i?.editorValue??i?.pendingValue:i?.pendingValue;return o===ss||!i?this.valueSvc.getValue(t,e,!0,"api"):o}getRowDataValue(e,t){return this.model.getEditRowDataValue(e,t)}addStopEditingWhenGridLosesFocus(e){n$(this,this.beans,e)}createPopupEditorWrapper(e){return new cne(e)}setDataValue(e,t,n){if((!this.isEditing()||n==="commit")&&!Cne.has(n))return;const{beans:i}=this;this.strategy??(this.strategy=this.createStrategy());const s=this.isBatchEditing()?"ui":"api";if(!n||pne.has(n))return Cp(i,e,!0,t),this.setNodeDataValue(e.rowNode,e.column,t,!0);const o=this.model.getEdit(e);if(o){if(o.pendingValue===t)return!1;if(o.sourceValue!==t)return Cp(i,e,!0,t),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0;if(o.sourceValue===t)return i.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,{...o,pendingValue:t}),!0}return Cp(i,e,!0,t),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0}handleColDefChanged(e){o$(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,Rc))return;const{rowNode:i,column:s}=e,{compDetails:o,valueToDisplay:r}=t;if(o){const{params:u}=o;return u.data=this.model.getEditRowDataValue(i,Rc),{compDetails:o}}const c=this.model.getEditRow(e.rowNode,Rc);if(r!==void 0&&c?.has(s))return{valueToDisplay:this.valueSvc.getValue(s,i)}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,n,i){this.strategy?.dispatchCellEvent(e,t,n,i)}dispatchRowEvent(e,t){this.strategy?.dispatchRowEvent(e,t)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Me(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){if(!n||n.length===0)return;const{beans:i,rangeSvc:s,valueSvc:o}=this;$a(i,!0);const r=this.model.getEditMap(!0),c=r.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),n.forEach(h=>{if(s?.forEachRowInRange(h,f=>{const p=Wo(i,f);if(p===void 0)return;const m=r.get(p)??new Map;for(const w of h.columns)if(w&&this.isCellEditable({rowNode:p,column:w},"api")){const S=o.getValue(w,p,!0,"api");let E=o.parseValue(w,p??null,c,S);Number.isNaN(E)&&(E=null),m.set(w,{editorValue:void 0,pendingValue:E,sourceValue:S,state:"changed"})}m.size>0&&r.set(p,m)}),this.setEditMap(r),this.batch){this.cleanupEditors(),NS(i),this.bulkRefresh();return}this.stopEditing(void 0,{source:"api"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(r)})}),this.bulkRefresh();const u=Ot(i,{rowNode:e,column:t});u&&u.focusCell(!0)}createCellStyleFeature(e,t){return new une(e,t)}createRowStyleFeature(e,t){return new dne(e,t)}setEditingCells(e,t){const{beans:n}=this,{colModel:i,valueSvc:s}=n,o=new Map;e.forEach(({colId:r,column:c,colKey:u,rowIndex:h,rowPinned:f,newValue:p,state:m})=>{const w=r?i.getCol(r):u?i.getCol(u):c;if(!w)return;const S=Wo(n,{rowIndex:h,rowPinned:f});if(!S)return;const E=s.getValue(w,S,!0,"api");if(!Vr({pendingValue:p,sourceValue:E})&&m!=="editing")return;let x=o.get(S);x||(x=new Map,o.set(S,x)),p===void 0&&(p=ss),x.set(w,{editorValue:void 0,pendingValue:p,sourceValue:E,state:m??"changed"})}),this.setEditMap(o,t)}onCellFocused(e){const t=Ot(this.beans,e);if(!t||!this.isEditing(t,Rc))return;const n=this.model.getEdit(t);if(!n||!Vr(n))return;const s=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(s,"pendingChange")}allowedFocusTargetOnValidation(e){return Ot(this.beans,e)}},uV=class extends re{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const n=e.previousParams,{editSvc:i,beans:s}=this,o=e.type==="cellFocused"?e.sourceEvent:null;n&&(t=Ot(s,n));const{gos:r,editModelSvc:c}=s,u=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){const{column:h,rowIndex:f,rowPinned:p}=e,m={column:h,rowNode:Wo(s,{rowIndex:f,rowPinned:p})},w=r.get("invalidEditValueMode")==="block";if(w)return;const S=!w,E=!!c?.getCellValidationModel().hasCellValidation(m),x=S&&E;(n||u?i.stopEditing(void 0,{cancel:x,source:u&&S?"api":void 0,event:o}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}isCellEditable({rowNode:e,column:t},n="ui"){return t.isColumnFunc(e,t.getColDef().editable)}stop(e,t){const n=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};if(n.forEach(o=>{if(i.all.push(o),(this.model.getCellValidationModel().getCellValidation(o)?.errorMessages?.length??0)>0){i.fail.push(o);return}i.pass.push(o)}),e)return n.forEach(o=>{cm(this.beans,o),this.model.stop(o)}),!0;const s=this.processValidationResults(i);return s.destroy.length>0&&s.destroy.forEach(o=>{cm(this.beans,o,{event:t}),this.model.stop(o)}),s.keep.length>0&&s.keep.forEach(o=>{const r=Ot(this.beans,o);this.editSvc?.cellEditingInvalidCommitBlocks()||r&&this.editSvc.revertSingleCellEdit(r)}),!0}cleanupEditors({rowNode:e}={},t){$a(this.beans,!1);const n=this.model.getEditPositions(),i=[];e?n.forEach(s=>{!e||s.rowNode===e||i.push(s)}):n.forEach(s=>{i.push(s)}),$c(this.beans,i),NS(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){const t=e.comp,n=t?.getCellEditor();if(n?.focusIn)n.focusIn();else{const i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e=this.model.getEditPositions(),t,n,i,s=!1){const o=i instanceof KeyboardEvent&&!s&&i.key||void 0;s$(this.beans,e,t,o,i,n)}dispatchCellEvent(e,t,n,i){const s=Ot(this.beans,e);s&&this.eventSvc.dispatchEvent({...s.createEvent(t??null,n),...i})}dispatchRowEvent(e,t){const n=jR(this.beans,e);n&&this.eventSvc.dispatchEvent(n.createRowEvent(t))}shouldStart({column:e},t,n,i="ui"){if(t instanceof KeyboardEvent&&(t.key===J.TAB||t.key===J.ENTER||t.key===J.F2||t.key===J.BACKSPACE&&n))return!0;if(t?.shiftKey&&this.beans.rangeSvc?.getCellRanges().length!=0)return!1;const o=e?.getColDef(),r=this.deriveClickCount(o),c=t?.type;return c==="click"&&t?.detail===1&&r===1||c==="dblclick"&&t?.detail===2&&r===2?!0:i==="api"?n??!1:!1}shouldStop(e,t,n="ui"){const i=this.editSvc.isBatchEditing();return i&&n==="api"?!0:i&&n==="ui"?!1:n==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===J.ENTER:null}shouldCancel(e,t,n="ui"){const i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===J.ESCAPE||i&&n==="api"||n==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const n=[];if(e.forEach((i,s)=>{i.forEach((o,r)=>{o.state==="editing"&&n.push({...o,rowNode:s,column:r})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),n.length>0){const i=n.at(-1),s=i.pendingValue===ss?void 0:i.pendingValue;this.start(i,new KeyboardEvent("keydown",{key:s}),"api");const o=Ot(this.beans,i);o&&this.setFocusInOnEditor(o)}}deriveClickCount(e){const{gos:t}=this.beans;return t.get("suppressClickEdit")===!0?0:t.get("singleClickEdit")===!0||e?.singleClickEdit?1:2}destroy(){this.cleanupEditors(),super.destroy()}},wne=class extends uV{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}isCellEditable(e,t="ui"){const n=super.isCellEditable(e,t);return n===!0||t==="ui"?n:this.beans.colModel.getCols().some(s=>super.isCellEditable({rowNode:e.rowNode,column:s},t))}shouldStop(e,t,n="ui"){const{rowNode:i}=e||{};if(!jR(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,n);return o!==null?o:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e,t,n="ui",i){const{rowNode:s}=e;this.rowNode!==s&&super.cleanupEditors(e),this.dispatchRowEvent({rowNode:s},"rowEditingStarted"),this.startedRows.push(s);const o=this.beans.visibleCols.allCols,r=[];o.forEach(c=>{if(!c.isCellEditable(s))return;const u={rowNode:s,column:c};r.push(u),this.model.hasEdits(u)||this.model.start(u)}),this.rowNode=s,this.setupEditors(r,e,!0,t,i)}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){const{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;const i=[];return e||this.model.getEditMap().forEach((s,o)=>{if(!(!s||s.size===0)){for(const r of s.values())if(Vr(r)){i.push(o);break}}}),pl(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:n})==="block-stop"?!1:(super.stop(e,t),i.forEach(s=>this.dispatchRowEvent({rowNode:s},"rowValueChanged")),this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0)}onCellFocusChanged(e){const{rowIndex:t}=e,n=e.previousParams;if(n?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;const i=Ot(this.beans,n);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t),this.startedRows.forEach(n=>this.dispatchRowEvent({rowNode:n},"rowEditingStopped")),this.startedRows.length=0}moveToNextEditingCell(e,t,n,i="ui",s=!1){const o=e.cellPosition;let r;this.model.suspend(!0);try{r=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(r===!1)return null;if(r==null)return!1;const c=r.cellPosition,u=e.isCellEditable(),h=r.isCellEditable(),f=c&&o.rowIndex===c.rowIndex&&o.rowPinned===c.rowPinned;u&&this.setFocusOutOnEditor(e),this.restoreEditors();const p=this.gos.get("suppressStartEditOnTab");return h&&!s?p?r.focusCell(!0,n):(r.comp?.getCellEditor()||cu(this.beans,r,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(r),r.focusCell(!1,n)):(h&&s&&this.setFocusInOnEditor(r),r.focusCell(!0,n)),!f&&!s&&(this.cleanupEditors(r,!0),p?r.focusCell(!0,n):this.editSvc.startEditing(r,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:n},i)=>{if(n!=="editing")return;const s=Ot(this.beans,{rowNode:t,column:i});s&&!s.comp?.getCellEditor()&&cu(this.beans,s,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},Sne=class extends uV{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,n="ui"){const i=super.shouldStop(e,t,n);if(i!==null)return i;const{rowNode:s,column:o}=e||{};return(!this.rowNode||!this.column)&&s&&o?null:this.rowNode!==s||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e,t,n="ui",i){(this.rowNode!==e.rowNode||this.column!==e.column)&&super.cleanupEditors(),this.rowNode=e.rowNode,this.column=e.column,this.model.start(e),this.setupEditors([e],e,!0,t,i)}dispatchRowEvent(e,t){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:n}=this.beans,{rowIndex:i,column:s,rowPinned:o}=e,r=Wo(this.beans,{rowIndex:i,rowPinned:o}),c=VS(s),u=t.getCol(c),h=e.previousParams;if(h){const f=VS(h.column);if(h?.rowIndex===i&&f===c&&h?.rowPinned===o)return}n?.isEditing({rowNode:r,column:u},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,i="ui",s=!1){const o=e.cellPosition;let r;const c=this.beans.gos.get("editType")==="fullRow";c&&this.model.suspend(!0),s||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:n}));try{r=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0})}finally{c&&this.model.suspend(!1)}if(r===!1)return null;if(r==null)return!1;const u=r.cellPosition,h=e.isCellEditable(),f=r.isCellEditable(),p=u&&o.rowIndex===u.rowIndex&&o.rowPinned===u.rowPinned;h&&!s&&this.setFocusOutOnEditor(e);const m=this.gos.get("suppressStartEditOnTab");return!p&&!s&&(super.cleanupEditors(r,!0),m?r.focusCell(!0,n):this.editSvc.startEditing(r,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),f&&!s?(r.focusCell(!1,n),m?r.focusCell(!0,n):r.comp?.getCellEditor()||(cu(this.beans,r,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(r))):(f&&s&&this.setFocusInOnEditor(r),r.focusCell(!0,n)),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},ea={moduleName:"EditCore",version:Se,beans:[K8,yne],apiFunctions:{getEditingCells:tne,getCellEditorInstances:i$,startEditingCell:sne,stopEditing:nne,isEditing:ine,validateEdit:one},dynamicBeans:{singleCell:Sne,fullRow:wne},dependsOn:[sC,iV],css:[Ite]},bne={moduleName:"UndoRedoEdit",version:Se,beans:[Mte],apiFunctions:{undoCellEditing:Jte,redoCellEditing:ene,getCurrentUndoSize:rne,getCurrentRedoSize:ane},dependsOn:[ea]},Rne={moduleName:"TextEditor",version:Se,userComponents:{agCellEditor:kP,agTextCellEditor:kP},dependsOn:[ea]},Ene={moduleName:"NumberEditor",version:Se,userComponents:{agNumberCellEditor:{classImp:jte}},dependsOn:[ea]},Tne={moduleName:"DateEditor",version:Se,userComponents:{agDateCellEditor:Vte,agDateStringCellEditor:Gte},dependsOn:[ea]},xne={moduleName:"CheckboxEditor",version:Se,userComponents:{agCheckboxCellEditor:kte},dependsOn:[ea]},Dne={moduleName:"SelectEditor",version:Se,userComponents:{agSelectCellEditor:qte},dependsOn:[ea]},Ane={moduleName:"LargeTextEditor",version:Se,userComponents:{agLargeTextCellEditor:zte},dependsOn:[ea]},Fne={moduleName:"CustomEditor",version:Se,dependsOn:[ea]},Pne=class extends re{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,jc(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),V7(e))}createColumns(e,t){const n=()=>{sm(this.beans,this.columns?.tree),this.columns=null},i=e.treeDepth,o=(this.columns?.treeDepth??-1)==i,r=this.generateSelectionCols();if(O7(r,this.columns?.list??[])&&o)return;n();const{colGroupSvc:u}=this.beans,h=u?.findDepth(e.tree)??0,f=u?.balanceTreeForAutoCols(r,h)??[];this.columns={list:r,tree:f,treeDepth:h,map:{}},t(m=>{if(!m)return null;const w=m.filter(S=>!Jr(S));return[...r,...w]})}updateColumns(e){const t=jc(e.source);this.columns?.list.forEach(n=>{const i=this.createSelectionColDef(e.currentValue);n.setColDef(i,null,t),fs(this.beans,{state:[{...i,colId:n.getColId()}]},t)})}getColumn(e){return this.columns?.list.find(t=>aL(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!tl(e))return!1;const i=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;const s=!!Wc(n),o=hp(n);return s||o}createSelectionColDef(e){const{gos:t}=this.beans,n=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),{rowSpan:s,spanRows:o,...r}=n??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(c,u,h,f){const p=h.isSelected(),m=f.isSelected();return p===m?0:p?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...r,colId:sL,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const n=new Rl(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){const i=t&&typeof t!="string"?Wc(t):void 0,s=e&&typeof e!="string"?Wc(e):void 0,o=i!==s,r=t&&typeof t!="string"?hp(t):void 0,c=e&&typeof e!="string"?hp(e):void 0,u=r!==c,h=Jp(e),f=Jp(t);(o||u||h!==f)&&this.beans.colModel.refreshAll(n)}destroy(){sm(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,n){if(!this.columns?.list.length)return;const i=e.length+t.length+n.length;if(i===0)return;const s=this.columns.list[0];if(!s.isVisible())return;const o=()=>{let u;switch(s.pinned){case"left":case!0:u=e;break;case"right":u=n;break;default:u=t}u&&is(u,s)};(this.beans.rowNumbersSvc?.getColumn(oL)?2:1)===i&&o()}};function Mne(e,t){if(!t.nodes.every(r=>r.rowPinned&&!af(r)?(ge(59),!1):r.id===void 0?(ge(60),!1):!0))return;const{nodes:i,source:s,newValue:o}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:s??"api",newValue:o})}function Ine(e,t,n="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function _ne(e,t,n="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function kne(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function Lne(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function One(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function Vne(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function Nne(e){return e.selectionSvc?.getSelectedNodes()??[]}function Bne(e){return e.selectionSvc?.getSelectedRows()??[]}var Gne=class extends RK{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=em(e),this.groupSelectsDescendants=_h(e),this.groupSelectsFiltered=nm(e)==="filteredDescendants",this.masterSelectsDetail=OF(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=_h(e),n=em(e),i=nm(e)==="filteredDescendants";this.masterSelectsDetail=OF(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;const i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);return i==null?0:(this.selectionCtx.selectAll=!1,"select"in i?(i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n)):this.setNodesSelected({nodes:[i.node],newValue:i.newValue,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:n}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:i,event:s,source:o,keepDescendants:r=!1}){if(!tl(this.gos)&&e)return ge(132),0;if(i.length===0)return 0;if(i.length>1&&!this.isMultiSelect())return ge(130),0;let c=0;for(let u=0;u<i.length;u++){const h=i[u],f=Ec(h),p=this.groupSelectsFiltered&&f.group;if(f.rowPinned&&!af(f)){ge(59);continue}if(f.id===void 0){ge(60);continue}p||this.selectRowNode(f,e,s,o)&&(this.detailSelection.delete(f.id),c++),this.groupSelectsDescendants&&f.childrenAfterGroup?.length&&(c+=this.selectChildren(f,e,o))}return n||(i.length===1&&o==="api"&&this.selectionCtx.setRoot(Ec(i[0])),e&&(t||!this.isMultiSelect())&&(c+=this.clearOtherNodes(Ec(i[0]),r,o)),c>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),c}selectRange(e,t,n){let i=0;return e.forEach(s=>{const o=Ec(s);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n){const i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((n,i)=>{e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:n,rowModel:i}=this.beans;if(!gn(n))return!1;const s=i.rootNode;if(!s)return!1;t||(t=new Nh(!0,s),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==s){const c=this.calculateSelectedFromChildren(r);o=this.selectRowNode(r,c===null?!1:c,void 0,e)||o}}),o}clearOtherNodes(e,t,n){const i=new Map;let s=0;return this.selectedNodes.forEach(o=>{const r=o.id==e.id;if((t?!zne(e,o):!0)&&!r){const u=this.selectedNodes.get(o.id);s+=this.setNodesSelected({nodes:[u],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(o=>{const r=this.calculateSelectedFromChildren(o);this.selectRowNode(o,r===null?!1:r,void 0,n)}),s}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new Cl(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!gn(e))return;const n=t.getTopLevelNodes();if(n===null)return;const i=[];function s(o){for(let r=0,c=o.length;r<c;r++){const u=o[r];u.isSelected()?i.push(u):u.group&&u.childrenAfterGroup&&s(u.childrenAfterGroup)}}return s(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const n=gn(this.gos);let i=!1;const s=o=>{const r=this.selectRowNode(Ec(o),!1,void 0,e);i||(i=r)};if(t==="currentPage"||t==="filtered"){if(!n){vt(102);return}this.getNodesToSelect(t).forEach(s)}else this.selectedNodes.forEach(s),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);i||(i=o)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return dV(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],n=s=>t.push(s);if(e==="currentPage")return this.forEachNodeOnPage(s=>{if(!s.group){n(s);return}if(!s.expanded&&!s.footer){const o=r=>{n(r),r.childrenAfterFilter?.forEach(o)};o(s);return}this.groupSelectsDescendants||n(s)}),t;const i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(n),t):(i.forEachNode(n),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:n}=this.beans,i=t.getFirstRow(),s=t.getLastRow();for(let o=i;o<=s;o++){const r=n.getRow(o);r&&e(r)}}selectAllRowNodes(e){const{gos:t,selectionCtx:n}=this;if(!tl(t)){ge(132);return}if(f7(t)&&!tm(t)){ge(130);return}if(!this.canSelectAll())return;const{source:i,selectAll:s}=e;let o=!1;if(this.getNodesToSelect(s).forEach(r=>{const c=this.selectRowNode(Ec(r),!0,void 0,i);o||(o=c)}),n.selectAll=!0,gn(t)&&this.groupSelectsDescendants){const r=this.updateGroupsFromChildrenSelections(i);o||(o=r)}o&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||(e=[]),!Array.isArray(e)){vt(103);return}const i=new Set(e),s=[];this.beans.rowModel.forEachNode(o=>{i.has(o.id)&&s.push(o)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:s,source:t})}canSelectAll(){const{gos:e}=this.beans;return!!gn(e)}updateSelectable(e){const{gos:t,rowModel:n}=this.beans;if(!tl(t))return;const i="selectableChanged",s=e!==void 0,o=gn(t)&&this.groupSelectsDescendants,r=[],c=u=>{if(s&&!u.group)return;if(o&&u.group){const f=u.childrenAfterGroup?.some(p=>p.selectable)??!1;this.setRowSelectable(u,f,!0);return}!this.updateRowSelectable(u,!0)&&u.isSelected()&&r.push(u)};if(o){if(e===void 0){const u=n.rootNode;e=u?new Nh(!1,u):void 0}e?.forEachChangedNodeDepthFirst(c,!s,!s)}else n.forEachNode(c);r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:i}),!s&&o&&this.updateGroupsFromChildrenSelections?.(i)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const n=e.detailNode?.detailGridInfo?.api;if(!n)return;const i=Hne(n);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){const o=this.detailSelection.get(e.id)??new Set;for(const r of n.getSelectedNodes())o.add(r.id);this.detailSelection.set(e.id,o)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!tm(t)){ge(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{const i=this.detailSelection.get(e.id);if(i){const s=[];for(const o of i){const r=n.getRowNode(o);r&&s.push(r)}n.setNodesSelected({nodes:s,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function Ec(e){return af(e)?e.pinnedSibling:e.footer?e.sibling:e}function Hne(e){let t=0,n=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&n++}),dV(t,n)}function dV(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function zne(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}var Une={moduleName:"SharedRowSelection",version:Se,beans:[Pne],apiFunctions:{setNodesSelected:Mne,selectAll:Ine,deselectAll:_ne,selectAllFiltered:kne,deselectAllFiltered:Lne,selectAllOnCurrentPage:One,deselectAllOnCurrentPage:Vne,getSelectedNodes:Nne,getSelectedRows:Bne}},Wne={moduleName:"RowSelection",version:Se,rowModels:["clientSide","infinite","viewport"],beans:[Gne],dependsOn:[Une]};function jne(e){e.expansionSvc?.expandAll(!0)}function $ne(e){e.expansionSvc?.expandAll(!1)}function qne(e){const t=Js(e),n=GO(e);t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function Kne(e,t,n){const i=GO(e);if(i){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){vt(238);return}i.setRowCount(t,n);return}vt(28);return}const s=iC(e);if(s){s.setRowCount(t,n);return}}function Yne(e){return bl(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function Qne(e){return e.rowModel.isLastRowIndexKnown()}var Xne={moduleName:"CsrmSsrmSharedApi",version:Se,apiFunctions:{expandAll:jne,collapseAll:$ne,onRowHeightChanged:qne}},Zne={moduleName:"SsrmInfiniteSharedApi",version:Se,apiFunctions:{setRowCount:Kne,getCacheBlockState:Yne,isLastRowIndexKnown:Qne}},Jne=class extends re{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{if(!i){vt(18),t||vt(20);return}if(this.isGridApi(i))return i;const s=i;return"current"in s?s.current?.api:(s.api||vt(19),s.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":ge(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach(n=>{let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){const t=e.column;let n=null;const i=this.beans,{colResize:s,ctrlsSvc:o,colModel:r}=i;if(t&&(n=r.getColDefCol(t.getColId())),t&&!n)return;const c=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const p=e.api.getColumnState().map(m=>({colId:m.colId}));fs(i,{state:p,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const p=e.api.getColumnState().map(m=>({colId:m.colId,hide:m.hide}));fs(i,{state:p},"alignedGridChanged")}break;case"columnPinned":{const p=e.api.getColumnState().map(m=>({colId:m.colId,pinned:m.pinned}));fs(i,{state:p},"alignedGridChanged")}break;case"columnResized":{const f=e,p={};c.forEach(m=>{p[m.getId()]={key:m.getColId(),newWidth:m.getActualWidth()}}),f.flexColumns?.forEach(m=>{p[m.getId()]&&delete p[m.getId()]}),s?.setColumnWidths(Object.values(p),!1,f.finished,"alignedGridChanged");break}}const h=o.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(f=>{f.setGridOption("alwaysShowVerticalScroll",h)})}},eie={moduleName:"AlignedGrids",version:Se,beans:[Jne],dependsOn:[mO]},tie=class extends vK{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},bw=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function nie(e){if(Nt(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let n=0;n<t.length;n++){const i=t[n],s=n===0,o=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.lastChild!==o&&(i.lastChild=o,i.dispatchRowEvent("lastChildChanged")),i.childIndex!==n&&(i.childIndex=n,i.dispatchRowEvent("childIndexChanged"))}}function hV(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),nie(e)}var iie=class extends re{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,n=t.sortSvc.getSortOptions(),i=Ce(n)&&n.length>0,s=i&&!!e.changedRowNodes&&this.gos.get("deltaSort"),o=n.some(({column:r})=>Os(t.gos)?r.isPrimary()&&r.isRowGroupActive():!!r.getColDef().showRowGroup);this.sort(t,n,i,s,e.changedRowNodes,e.changedPath,o)}sort(e,t,n,i,s,o,r){const{gos:c,colModel:u,rowGroupColsSvc:h,rowNodeSorter:f,rowRenderer:p,showRowGroupCols:m}=e,w=c.get("groupMaintainOrder"),S=u.getCols().some(I=>I.isRowGroupActive()),E=u.isPivotMode(),x=c.getCallback("postSortRows");let P=!1;const M=I=>{const U=E&&I.leafGroup,z=w&&S&&!I.leafGroup&&!r;let W;if(z){const F=h?.columns?.[I.level+1]?.getSort()===null,k=I.childrenAfterAggFilter.slice(0);if(I.childrenAfterSort&&!F){const O={};I.childrenAfterSort.forEach((N,H)=>{O[N.id]=H}),k.sort((N,H)=>(O[N.id]??0)-(O[H.id]??0))}W=k}else!n||U?W=I.childrenAfterAggFilter.slice(0):i&&s?W=sie(f,I,s,o,t):W=f.doFullSort(I.childrenAfterAggFilter,t);if(P||(P=I.childrenAfterSort?.[0]!==W[0]),I.childrenAfterSort=W,hV(I),x){const _={nodes:I.childrenAfterSort};x(_)}};if(o?.forEachChangedNodeDepthFirst(M),P&&this.gos.get("groupHideOpenParents")){const I=m?.getShowRowGroupCols();I?.length&&p.refreshCells({columns:I,force:!0})}}};function sie(e,t,n,i,s){const o=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(o,s);const c=new Set,u=[],{updates:h,adds:f}=n;for(let m=0,w=o.length;m<w;++m){const S=o[m];h.has(S)||f.has(S)||i&&!i.canSkip(S)?u.push({currentPos:u.length,rowNode:S}):c.add(S.id)}const p=r.filter(m=>c.has(m.id)).map((m,w)=>({currentPos:w,rowNode:m}));return u.sort((m,w)=>e.compareRowNodes(s,m,w)),oie(e,s,u,p)}function oie(e,t,n,i){const s=[];let o=0,r=0;const c=n.length,u=i.length;for(;o<c&&r<u;){const h=n[o],f=i[r],p=e.compareRowNodes(t,h,f);let m;p<0?(m=h,++o):(m=f,++r),s.push(m.rowNode)}for(;o<c;)s.push(n[o++].rowNode);for(;r<u;)s.push(i[r++].rowNode);return s}var rie=class extends re{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=Un(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(i=>!!i);const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Cl(this.beans);const n=this.getNewNodeManager();this.nodeManager=n,n.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;return Zk(e)==="treeNested"&&t.csrmChildrenTreeNodeSvc||t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:t})=>[...t])];this.addManagedPropertyListeners(e,t=>{const n=t.changeSet?.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,i){let s,o=!1;do{s=!1;const r=this.getRowIndexAtPixel(e),c=this.getRowIndexAtPixel(t),u=Math.max(r,n),h=Math.min(c,i);for(let f=u;f<=h;f++){const p=this.getRow(f);if(p.rowHeightEstimated){const m=$r(this.beans,p);p.setRowHeight(m.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}onPropChange(e){if(!this.rootNode)return;const t=this.gos,n=new Set(e),i={step:"nothing",changedProps:n},s=n.has("rowData"),o=this.nodeManager,r=this.getNewNodeManager(),c=o!==r||s&&n.has("treeData")&&t.get("treeData")||n.has("treeDataChildrenField")&&t.get("treeData");let u;if((c||s)&&(u=t.get("rowData"),u!=null&&!Array.isArray(u)&&(u=null,ge(1))),c&&(s||(u=o?.extractRowData()??u),o!==r&&(o?.deactivate(),this.nodeManager=r),r.activate(this.rootNode)),u)if(!c&&!this.isEmpty()&&u.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate"))i.keepRenderedRows=!0,i.animate=!this.gos.get("suppressAnimationFrame"),i.changedRowNodes=new bw,r.setImmutableRowData(i,u);else{i.rowDataUpdated=!0,i.newData=!0;const{selectionSvc:f,pinnedRowModel:p}=this.beans;f?.reset("rowDataChanged"),p?.isManual()&&p.reset(),this.rowNodesCountReady=!0,r.setNewRowData(u)}if(i.rowDataUpdated)i.step="group";else if(i.step==="nothing"){for(const{refreshProps:h,step:f}of this.orderedStages)if(e.some(p=>h.has(p))){i.step=f;break}}i.step!=="nothing"&&this.refreshModel(i)}setRowTopAndRowIndex(){const{beans:e,rowsToDisplay:t}=this,n=e.environment.getDefaultRowHeight();let i=0;const s=new Set,o=Wn(this.gos,"normal");for(let r=0,c=t.length;r<c;++r){const u=t[r];if(u.id!=null&&s.add(u.id),u.rowHeight==null){const h=$r(e,u,o,n);u.setRowHeight(h.height,h.estimated)}u.setRowTop(i),u.setRowIndex(r),i+=u.rowHeight}return s}clearRowTopAndRowIndex(e,t){const n=e.active,i=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},s=o=>{if(o!==null&&(i(o),i(o.detailNode),i(o.sibling),o.hasChildren()&&o.childrenAfterGroup)){const r=o.level==-1;n&&!r&&!o.expanded||o.childrenAfterGroup.forEach(s)}};s(this.rootNode)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const n=e.childrenAfterSort,i=e.sibling&&e.sibling.displayed?1:0;return(n?n.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;const{childrenAfterSort:s}=t,o=c=>{let u=s[c];if(this.gos.get("groupHideOpenParents"))for(;u.expanded&&u.childrenAfterSort&&u.childrenAfterSort.length>0;)u=u.childrenAfterSort[0];return u.rowIndex},{footerSvc:r}=this.beans;return r?r.getTopDisplayIndex(n,e,s,o):o(e)}getTopLevelIndexFromDisplayedIndex(e){const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let s=this.getRow(e);for(s.footer&&(s=s.sibling);s.parent&&s.parent!==t;)s=s.parent;const o=t.childrenAfterSort?.findIndex(r=>r===s);return o===-1?e:o??e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=Uc(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=Uc(this.gos),i=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=Uc(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new Nh(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:n,rowDataUpdated:i}=e;return!(!t||n||!i||t.removals.size||t.adds.size)}refreshModel(e){if(!this.rootNode)return;const t=this.beans;let n=!!e.rowDataUpdated;const i=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&n));if(this.started&&n&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.rowDataUpdatedPending||(this.rowDataUpdatedPending=n),!this.started||this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.rowDataUpdated=n=!0),this.isRefreshingModel=!0,t.masterDetailSvc?.refreshModel(e),n&&e.step!=="group"&&t.colFilter?.refreshModel(),e.step){case"group":(this.doRowGrouping(e)||n)&&t.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}));case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(e.changedRowNodes,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1;const s=[],o=_h(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(i)return;if(n&&(r===t||r===e)&&(i=!0,r.group&&o)){s.push(...r.allLeafChildren);return}if(!n){if(r!==t&&r!==e)return;n=!0}if(!r.group||!o){s.push(r);return}}),s}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let n=0,i=t.length-1;if(e<=0)return 0;if(Ct(t).rowTop<=e)return t.length-1;let o=-1,r=-1;for(;;){const c=Math.floor((n+i)/2),u=t[c];if(this.isRowInPixel(u,e)||(u.rowTop<e?n=c+1:u.rowTop>e&&(i=c-1),o===n&&r===i))return c;o=n,r=i}}isRowInPixel(e,t){const n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode?.allLeafChildren?.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t=!1,n=!1){const{colModel:i,rowGroupColsSvc:s}=this.beans;if(!i.isPivotMode())return;if(!s?.columns.length){e(this.rootNode,0);return}const o=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,r=>r.leafGroup?null:r[o])}depthFirstSearchRowNodes(e,t=!1,n=o=>o.childrenAfterGroup,i=this.rootNode,s=0){let o=s;if(!i)return o;const r=i===this.rootNode;r||e(i,o++);const{footerSvc:c}=this.beans;if(i.hasChildren()&&!i.footer){const u=n(i);if(u){o=c?.addTotalRows(o,i,e,t,r,"top")??o;for(const h of u)o=this.depthFirstSearchRowNodes(e,t,n,h,o);return c?.addTotalRows(o,i,e,t,r,"bottom")??o}}return o}doAggregate(e){const t=this.rootNode;t&&this.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(n=>{n.childrenAfterSort=n.childrenAfterAggFilter.slice(0),hV(n)})}doRowGrouping(e){const t=this.rootNode,n=this.groupStage?.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,rowNodesOrderChanged:!!e.rowNodesOrderChanged,afterColumnsChanged:!!e.afterColumnsChanged});if(n!==void 0)return n;const i=t.sibling;return t.childrenAfterGroup=t.allLeafChildren,i&&(i.childrenAfterGroup=t.childrenAfterGroup),t.updateHasChildren(),!1}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(t=>{t.childrenAfterFilter=t.childrenAfterGroup,HO(t)},!0)}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){const t=this.nodeManager.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(GS)===0?this.groupStage?.getNode(e):void 0}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const n=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();const e=[],t=[],n=new bw;let i=!1;this.rowDataTransactionBatch?.forEach(s=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:o,rowsInserted:r}=this.nodeManager.updateRowData(s.rowDataTransaction,n);r&&(i=!0),t.push(o),s.callback&&e.push(s.callback.bind(null,o))}),this.commitTransactions(i,n),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const t=new bw,{rowNodeTransaction:n,rowsInserted:i}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(i,t),n}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let n;if(e)n=e.execute({rowNode:t});else{n=t?.childrenAfterSort??[];for(const i of n)i.setUiLevel(0)}this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=im,this.rowsToDisplay=im}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function aie(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function lie(e,t){const n=Js(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function cie(e){return Js(e)?.isEmpty()??!0}function uie(e,t){Js(e)?.forEachLeafNode(t)}function die(e,t){Js(e)?.forEachNodeAfterFilter(t)}function hie(e,t){Js(e)?.forEachNodeAfterFilterAndSort(t)}function fie(e){if(e.rowAutoHeight?.active){ge(3);return}Js(e)?.resetRowHeights()}function gie(e,t){return e.frameworkOverrides.wrapIncoming(()=>Js(e)?.updateRowData(t))}function pie(e,t,n){e.frameworkOverrides.wrapIncoming(()=>Js(e)?.batchUpdateRowData(t,n))}function mie(e){e.frameworkOverrides.wrapIncoming(()=>Js(e)?.flushAsyncTransactions())}function Cie(e){return e.selectionSvc?.getBestCostNodeSelection()}var vie={moduleName:"ClientSideRowModel",version:Se,rowModels:["clientSide"],beans:[tie,rie,iie],dependsOn:[OO]},yie={moduleName:"ClientSideRowModelApi",version:Se,apiFunctions:{onGroupExpandedOrCollapsed:aie,refreshClientSideRowModel:lie,isRowDataEmpty:cie,forEachLeafNode:uie,forEachNodeAfterFilter:die,forEachNodeAfterFilterAndSort:hie,resetRowHeights:fie,applyTransaction:gie,applyTransactionAsync:pie,flushAsyncTransactions:mie,getBestCostNodeSelection:Cie},dependsOn:[Xne]},wie=class extends re{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:n,columnKeys:i,skipRowGroups:s,exportRowNumbers:o}=t,r=this.getColumnsToExport({allColumns:n,skipRowGroups:s,columnKeys:i,exportRowNumbers:o});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((c,u)=>u(c),e).parse()}processRow(e,t,n,i){const s=t.shouldRowBeSkipped||(()=>!1),r=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!r,u=this.colModel.isPivotMode()?i.leafGroup:!i.group,h=!!i.footer,f=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&d7(this.gos,i);if(!u&&!h&&(t.skipRowGroups||f||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!u&&!h||s(Me(this.gos,{node:i})))return;const w=e.onNewBodyRow(i);if(n.forEach((S,E)=>{w.onColumn(S,E,i)}),t.getCustomContentBelowRow){const S=t.getCustomContentBelowRow(Me(this.gos,{node:i}));S&&e.addCustomContent(S)}}appendContent(e){return t=>{const n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{const n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){const i=new mL,{colGroupSvc:s}=this.beans,o=s?s.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){const i=n.onNewHeaderRow();t.forEach((s,o)=>{i.onColumn(s,o,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedTopRow(s.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{const i=this.rowModel,s=gn(this.gos),o=bl(this.gos),r=!s&&e.onlySelected,c=this.processRow.bind(this,n,e,t),{exportedRows:u="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(h=>h.rowPinned==null).sort((h,f)=>h.rowIndex-f.rowIndex).map(h=>i.getRow(h.rowIndex)).forEach(c),n;if(this.colModel.isPivotMode())return s?i.forEachPivotNode(c,!0,u==="filteredAndSorted"):o?i.forEachNodeAfterFilterAndSort(c,!0):i.forEachNode(c),n;if(e.onlySelectedAllPages||r){const h=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(h),h.forEach(c)}else u==="all"?i.forEachNode(c):s||o?i.forEachNodeAfterFilterAndSort(c,!0):i.forEachNode(c);return n}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;const i=t.getSortOptions(),s=(o,r)=>o.rowIndex!=null&&r.rowIndex!=null?o.rowIndex-r.rowIndex:o.level===r.level?o.parent?.id===r.parent?.id?n.compareRowNodes(i,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):s(o.parent,r.parent):o.level>r.level?s(o.parent,r):s(o,r.parent);e.sort(s)}processPinnedBottomRows(e,t){return n=>{const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedBottomRow(s.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:i=!1,columnKeys:s}=e,{colModel:o,gos:r,visibleCols:c}=this,u=o.isPivotMode(),h=m=>Jr(m)?!1:!Or(m)||i;if(s&&s.length)return o.getColsForKeys(s).filter(h);const f=r.get("treeData");let p=[];return t&&!u?p=o.getCols():p=c.allCols,p=p.filter(m=>h(m)&&(n&&!f?!zR(m):!0)),p}recursivelyAddHeaderGroups(e,t,n){const i=[];e.forEach(s=>{const o=s;o.getChildren&&o.getChildren().forEach(r=>i.push(r))}),e.length>0&&on(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){const i=e.onNewHeaderGroupingRow();let s=0;t.forEach(o=>{const r=o;let c;n?c=n(Me(this.gos,{columnGroup:r})):c=this.beans.colNames.getDisplayNameForColumnGroup(r,"header");const u=r.getLeafColumns().reduce((h,f,p,m)=>{let w=Ct(h);return f.getColumnGroupShow()==="open"?(!w||w[1]!=null)&&(w=[p],h.push(w)):w&&w[1]==null&&(w[1]=p-1),p===m.length-1&&w&&w[1]==null&&(w[1]=p),h},[]);i.onColumn(r,c||"",s++,r.getLeafColumns().length-1,u)})}},Sie={moduleName:"SharedExport",version:Se,beans:[wie]},LP=`\r
`,bie=class extends ree{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,LP),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(ge(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LP),this.isFirstLine=!1}},Rie=class extends oee{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){ge(51);return}const t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(Me(this.gos,{})):t.fileName;aee(this.getFileName(s),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:s,gos:o}=this,{processCellCallback:r,processHeaderCallback:c,processGroupHeaderCallback:u,processRowGroupCallback:h,suppressQuotes:f,columnSeparator:p}=e;return new bie({colModel:t,colNames:n,valueSvc:s,gos:o,processCellCallback:r||void 0,processHeaderCallback:c||void 0,processGroupHeaderCallback:u||void 0,processRowGroupCallback:h||void 0,suppressQuotes:f||!1,columnSeparator:p||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Eie(e,t){return e.csvCreator?.getDataAsCsv(t)}function Tie(e,t){e.csvCreator?.exportDataAsCsv(t)}var xie={moduleName:"CsvExport",version:Se,beans:[Rie],apiFunctions:{getDataAsCsv:Eie,exportDataAsCsv:Tie},dependsOn:[Sie]},Die=class extends re{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){const t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:n,beans:i,rowNodes:s}=this;for(let o=0;o<e;o++){const r=n+o,c=new Cl(i);c.setRowHeight(t),c.uiLevel=0,c.setRowIndex(r),c.setRowTop(t*r),s.push(c)}}getBlockStateJson(){const{id:e,startRow:t,endRow:n,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:i}}}setDataAndId(e,t,n){Ce(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Nt(this.params.datasource.getRows)){ge(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:n,params:{sortModel:i,filterModel:s},gos:o}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:i,filterModel:s,context:Me(o,{}).context}}forEachNode(e,t,n){this.rowNodes.forEach((i,s)=>{this.startRow+s<n&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){const{rowNodes:t,beans:n}=this;t.forEach((s,o)=>{const r=e.rowData?e.rowData[o]:void 0;!s.id&&s.alreadyRendered&&r&&(t[o]=new Cl(n),t[o].setRowIndex(s.rowIndex),t[o].setRowTop(s.rowTop),t[o].setRowHeight(s.rowHeight),s.clearRowTopAndRowIndex()),this.setDataAndId(t[o],r,this.startRow+o)});const i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},Aie=2,Fie=class extends re{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const n=Math.floor(e/this.params.blockSize);let i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){const t=this.params,n=this.createBean(new Die(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(hl(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),n=(r,c)=>c.lastAccessed-r.lastAccessed;t.sort(n);const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,o=Aie-1;t.forEach((r,c)=>{const u=r.state==="needsLoading"&&c>=o,h=i?c>=s:!1;if(u||h){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:n,endRow:i}=e;return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:n,overflowSize:i}=this.params,o=(e.id+1)*n+i;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,Ce(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(n,i)=>n.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const n=[];let i=-1,s=!1;const o={value:0};let r=!1;return this.getBlocksInOrder().forEach(u=>{if(!r){if(s&&i+1!==u.id){r=!0;return}i=u.id,u.forEachNode(h=>{const f=h===e||h===t;(s||f)&&n.push(h),f&&(s=!s)},o,this.rowCount)}}),r||s?[]:n}},Pie=class extends re{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=nl(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=nl(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!Ah(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;au(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:i,eventSvc:s,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:n?.getSortModel()??[],rowNodeBlockLoader:i,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:nl(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new Fie(this.cacheParams)),s.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}};function Mie(e){iC(e)?.refreshCache()}function Iie(e){iC(e)?.purgeCache()}function _ie(e){return iC(e)?.getRowCount()}var kie=class extends re{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=h7(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Un(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){is(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){hl(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){hl(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},Lie={moduleName:"InfiniteRowModelCore",version:Se,rowModels:["infinite"],beans:[Pie,kie]},Oie={moduleName:"InfiniteRowModel",version:Se,apiFunctions:{refreshInfiniteCache:Mie,purgeInfiniteCache:Iie,getInfiniteRowCount:_ie},dependsOn:[Lie,Zne]},Vie="",Nie="",Bie={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},Gie=class extends Ft{constructor(){super(Bie),this.eValue=Ae,this.eDelta=Ae,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const n=Math.abs(t),i=e.formatValue(n),s=Ce(i)?i:n,o=t>=0,r=this.eDelta;o?r.textContent=Vie+s:r.textContent=Nie+s,r.classList.toggle("ag-value-change-delta-up",o),r.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),_i(this.eDelta)}refresh(e,t=!1){const{value:n,valueFormatted:i}=e,{eValue:s,lastValue:o,beans:r}=this;if(n===o||(Ce(i)?s.textContent=i:Ce(n)?s.textContent=n:_i(s),r.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;const c=n&&typeof n=="object"&&"toNumber"in n?n.toNumber():n,u=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(c===u)return!1;if(typeof c=="number"&&typeof u=="number"){const h=c-u;this.showDelta(e,h)}return o&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},Hie=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",zie={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},Uie=class extends Ft{constructor(){super(zie),this.eCurrent=Ae,this.refreshCount=0,this.registerCSS(Hie)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:n}=this,i=an({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=n.textContent,this.getGui().insertBefore(i,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;if(Nt(n)&&(n=""),n===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;const i=this.eCurrent;return Ce(e.valueFormatted)?i.textContent=e.valueFormatted:Ce(e.value)?i.textContent=n:_i(i),!0}},Wie=class extends re{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,n=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){const s=this.animations[t];s.delete(e);const o=Date.now(),r=o+n,c=o+n+i,u={phase:"flash",flashEndTime:r,fadeEndTime:c};s.set(e,u);const h=`ag-cell-${t}`,f=`${h}-animation`,{comp:p,eGui:{style:m}}=e;p.toggleCss(h,!0),p.toggleCss(f,!1),m.removeProperty("transition"),m.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),n)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const n of Object.keys(this.animations)){const i=this.animations[n],s=`ag-cell-${n}`,o=`${s}-animation`;for(const[r,c]of i){if(!r.isAlive()||!r.comp){i.delete(r);continue}const{phase:u,flashEndTime:h,fadeEndTime:f}=c,p=u==="flash"?h:f;if(!(e+15>=p)){t=Math.min(p,t??1/0);continue}const{comp:w,eGui:{style:S}}=r;switch(u){case"flash":w.toggleCss(s,!1),w.toggleCss(o,!0),S.transition=`background-color ${f-h}ms`,S.transitionDelay=`${h-e}ms`,t=Math.min(f,t??1/0),c.phase="fade";break;case"fade":w.toggleCss(s,!1),w.toggleCss(o,!1),S.removeProperty("transition"),S.removeProperty("transition-delay"),i.delete(r);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const n=Y8(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function jie(e,t={}){const{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(i=>n.flashCell(i,t))})}var $ie={moduleName:"HighlightChanges",version:Se,beans:[Wie],userComponents:{agAnimateShowChangeCellRenderer:Gie,agAnimateSlideCellRenderer:Uie},apiFunctions:{flashCells:jie}};function qie(e){return e.stateSvc?.getState()??{}}function Kie(e,t,n){return e.stateSvc?.setState(t,n)}function OP(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=Yie(e)}return e.version=Se,e}function Yie(e){return e.cellSelection=Qie(e,"rangeSelection"),e}function Qie(e,t){if(e&&typeof e=="object")return e[t]}var Xie=class extends re{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Un(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Un(this,()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},0),this.onRowSelectedDebounced=Un(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=gn(this.gos);const e=OP(this.gos.get("initialState")??{}),t=e.partialColumnState;delete e.partialColumnState,this.cachedState=e;const n=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,()=>n(()=>this.setupStateOnGridReady(e)));const[i,s,o]=this.addManagedEventListeners({newColumnsLoaded:({source:r})=>{r==="gridInitializing"&&(i(),n(()=>this.setupStateOnColumnsInitialised(e,!!t)))},rowCountReady:()=>{s?.(),n(()=>this.setupStateOnRowCountReady(e))},firstDataRendered:()=>{o?.(),n(()=>this.setupStateOnFirstDataRendered(e))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const n=OP(e);delete n.partialColumnState,this.cachedState=n,this.startSuppressEvents();const i="api",s=t?new Set(t):void 0;this.setGridReadyState(n,i,s),this.setColumnsInitialisedState(n,i,!1,s),this.setRowCountState(n,i,s),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(n,i,s),this.stopSuppressEvents(i)})}setGridReadyState(e,t,n){t==="api"&&!n?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,n,i){this.setColumnState(e,t,n,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const n=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:n("aggregation"),columnMoved:n("columnOrder"),columnPinned:n("columnPinning"),columnResized:n("columnSizing"),columnVisible:n("columnVisibility"),columnPivotChanged:n("pivot"),columnPivotModeChanged:n("pivot"),columnRowGroupChanged:n("rowGroup"),sortChanged:n("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,n){const{filter:i,rowGroupExpansion:s,rowSelection:o,pagination:r}=e,c=(h,f)=>!n?.has(h)&&(f||t==="api");c("filter",i)&&this.setFilterState(i),c("rowGroupExpansion",s)&&this.setRowGroupExpansionState(s,t),c("rowSelection",o)&&this.setRowSelectionState(o,t),c("pagination",r)&&this.setPaginationState(r,t);const u=this.updateCachedState.bind(this);u("filter",this.getFilterState()),u("rowGroupExpansion",this.getRowGroupExpansionState()),u("rowSelection",this.getRowSelectionState()),u("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),n=()=>{this.updateRowGroupExpansionStateTimer=0,t("rowGroupExpansion",this.getRowGroupExpansionState())},i=()=>t("filter",this.getFilterState()),{gos:s,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:i,rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:n,columnRowGroupChanged:n,rowDataUpdated:()=>{(s.get("groupDefaultExpanded")!==0||s.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(n)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&t("pagination",this.getPaginationState())}}),o&&this.addManagedListeners(o,{filterStateChanged:i})}setFirstDataRenderedState(e,t,n){const{scroll:i,cellSelection:s,focusedCell:o,columnOrder:r,rowPinning:c}=e,u=(p,m)=>!n?.has(p)&&(m||t==="api");u("focusedCell",o)&&this.setFocusedCellState(o),u("cellSelection",s)&&this.setCellSelectionState(s),u("scroll",i)&&this.setScrollState(i),u("rowPinning",c)&&this.setRowPinningState(c),this.setColumnPivotState(!!r?.orderedColIds,t);const h=this.updateCachedState.bind(this);h("sideBar",this.getSideBarState()),h("focusedCell",this.getFocusedCellState());const f=this.getRangeSelectionState();h("rangeSelection",f),h("cellSelection",f),h("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this);this.addManagedEventListeners({cellFocused:()=>t("focusedCell",this.getFocusedCellState()),cellSelectionChanged:n=>{if(n.finished){const i=this.getRangeSelectionState();t("rangeSelection",i),t("cellSelection",i)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return YJ(rm(e),e.colModel.isPivotMode())}setColumnState(e,t,n,i){const{sort:s,rowGroup:o,aggregation:r,pivot:c,columnPinning:u,columnVisibility:h,columnSizing:f,columnOrder:p}=e,m=(O,N)=>!i?.has(O)&&(N||t==="api"),w={},S=O=>{let N=w[O];return N||(N={colId:O},w[O]=N,N)},E={},x=m("sort",s);x&&s?.sortModel.forEach(({colId:O,sort:N},H)=>{const V=S(O);V.sort=N,V.sortIndex=H}),(x||!n)&&(E.sort=null,E.sortIndex=null);const P=m("rowGroup",o);P&&o?.groupColIds.forEach((O,N)=>{const H=S(O);H.rowGroup=!0,H.rowGroupIndex=N}),(P||!n)&&(E.rowGroup=null,E.rowGroupIndex=null);const M=m("aggregation",r);M&&r?.aggregationModel.forEach(({colId:O,aggFunc:N})=>{S(O).aggFunc=N}),(M||!n)&&(E.aggFunc=null);const I=m("pivot",c);I&&(c?.pivotColIds.forEach((O,N)=>{const H=S(O);H.pivot=!0,H.pivotIndex=N}),this.gos.updateGridOptions({options:{pivotMode:!!c?.pivotMode},source:t})),(I||!n)&&(E.pivot=null,E.pivotIndex=null);const U=m("columnPinning",u);U&&(u?.leftColIds.forEach(O=>{S(O).pinned="left"}),u?.rightColIds.forEach(O=>{S(O).pinned="right"})),(U||!n)&&(E.pinned=null);const z=m("columnVisibility",h);z&&h?.hiddenColIds.forEach(O=>{S(O).hide=!0}),(z||!n)&&(E.hide=null);const W=m("columnSizing",f);W&&f?.columnSizingModel.forEach(({colId:O,flex:N,width:H})=>{const V=S(O);V.flex=N??null,V.width=H}),(W||!n)&&(E.flex=null);const _=p?.orderedColIds,F=!!_?.length&&!i?.has("columnOrder"),k=F?_.map(O=>S(O)):Object.values(w);k.length&&(this.columnStates=k,fs(this.beans,{state:k,applyOrder:F,defaultState:E},t))}setColumnPivotState(e,t){const n=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const s=this.beans,{pivotResultCols:o,colGroupSvc:r}=s;if(o?.isPivotResultColsPresent()){if(n){const c=[];for(const u of n)o.getPivotResultCol(u.colId)&&c.push(u);fs(s,{state:c,applyOrder:e},t)}i&&r?.setColumnGroupState(i,t)}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return QJ(t)}setColumnGroupState(e,t,n){const i=this.beans.colGroupSvc;if(!i||n?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const s=new Set(e.columnGroup?.openColumnGroupIds),r=i.getColumnGroupState().map(({groupId:c})=>{const u=s.has(c);return u&&s.delete(c),{groupId:c,open:u}});s.forEach(c=>{r.push({groupId:c,open:!0})}),r.length&&(this.columnGroupStates=r),i.setColumnGroupState(r,t)}getFilterState(){const e=this.beans.filterManager;let t=e?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const n=e?.getFilterState(),i=e?.getAdvFilterModel()??void 0;return t||i||n?{filterModel:t,columnFilterState:n,advancedFilterModel:i}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:n,columnFilterState:i,advancedFilterModel:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(n!==void 0||i!==void 0)&&t?.setFilterState(n??null,i??null,"columnFilter"),s!==void 0&&t?.setAdvFilterModel(s??null,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map(t=>{const{id:n,type:i,startRow:s,endRow:o,columns:r,startColumn:c}=t;return{id:n,type:i,startRow:s,endRow:o,colIds:r.map(u=>u.getColId()),startColId:c.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:n,colModel:i,visibleCols:s}=this.beans;if(!qr(t)||!n)return;const o=[];e?.cellRanges.forEach(r=>{const c=[];if(r.colIds.forEach(h=>{const f=i.getCol(h);f&&c.push(f)}),!c.length)return;let u=i.getCol(r.startColId);if(!u){const h=s.allCols,f=new Set(c);u=h.find(p=>f.has(p))}o.push({...r,columns:c,startColumn:u})}),n.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:n}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:s,animationFrameSvc:o,ctrlsSvc:r}=this.beans;i.wrapIncoming(()=>{r.get("center").setCenterViewportScrollLeft(n),r.getScrollFeature()?.setVerticalScrollPosition(t),s.redraw({afterScroll:!0}),o?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:n}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:i,rowIndex:s,rowPinned:o}=e;t.setFocusedCell({column:n.getCol(i),rowIndex:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const n=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!i))return{page:n,pageSize:i}}setPaginationState(e,t){const{pagination:n,gos:i}=this.beans;if(!n)return;const{pageSize:s,page:o}=e??{page:0,pageSize:i.get("paginationPageSize")},r=t==="gridInitializing";s&&!i.get("paginationAutoPageSize")&&n.setPageSize(s,r?"initialState":"pageSizeSelector"),typeof o=="number"&&(r?n.setPage(o):n.goToPage(o))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const n=[];return t.forEachNode(({expanded:i,id:s})=>{i&&s&&n.push(s)}),n.length?{expandedRowGroupIds:n}:void 0}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t){const n=this.beans.expansionSvc;if(!n)return;const i=e?.expandedRowGroupIds??[];let s;if(t==="api"){const o=this.getRowGroupExpansionState()?.expandedRowGroupIds;if(o?.length){const r=new Set(o);for(const c of i)r.delete(c);s=Array.from(r)}}n.expandRows(i,s)}updateColumnState(e){const t=this.getColumnState();let n=!1;const i=this.cachedState;for(const s of Object.keys(t)){const o=t[s];Ah(o,i[s])||(n=!0)}this.cachedState={...i,...t},n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const n=this.cachedState[e];this.setCachedStateValue(e,t),Ah(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;e.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},Zie={moduleName:"GridState",version:Se,beans:[Xie],apiFunctions:{getState:qie,setState:Kie}};function Jie(e){return e.rowModel.isLastRowIndexKnown()}function ese(e){return e.pagination?.getPageSize()??100}function tse(e){return e.pagination?.getCurrentPage()??0}function nse(e){return e.pagination?.getTotalPages()??1}function ise(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function sse(e){e.pagination?.goToNextPage()}function ose(e){e.pagination?.goToPreviousPage()}function rse(e){e.pagination?.goToFirstPage()}function ase(e){e.pagination?.goToLastPage()}function lse(e,t){e.pagination?.goToPage(t)}var cse=class extends re{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,n=()=>{const i=Math.max(nl(t),1),s=Math.floor(e/i);t.pagination.setPageSize(s,"autoCalculated")};this.isBodyRendered?Un(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Bd="paginationPageSizeSelector",use={tag:"span",cls:"ag-paging-page-size"},dse=class extends Ft{constructor(){super(use),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Bd,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){_i(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Bd)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){const s=this.gos.exists("paginationPageSize"),o=this.gos.get(Bd)!==!0;ge(94,{pageSizeSet:s,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||ge(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Bd}),e.unshift("")}const i=String(n?"":t);this.selectPageSizeComp?(El(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),s=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new aE).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Bd);return!Array.isArray(t)||!t?.length?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},hse={selector:"AG-PAGE-SIZE-SELECTOR",component:dse},fse=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",gse=class extends OK{constructor(){super(),this.btFirst=Ae,this.btPrevious=Ae,this.btNext=Ae,this.btLast=Ae,this.lbRecordCount=Ae,this.lbFirstRowOnPage=Ae,this.lbLastRowOnPage=Ae,this.lbCurrent=Ae,this.lbTotal=Ae,this.pageSizeComp=Ae,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(fse)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[hse]);const{btFirst:t,btPrevious:n,btNext:i,btLast:s}=this;this.activateTabIndex([t,n,i,s]),t.insertAdjacentElement("afterbegin",es(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",es(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",es(e?"previous":"next",this.beans)),s.insertAdjacentElement("afterbegin",es(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):v$(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===J.ENTER||i.key===J.SPACE)&&(i.preventDefault(),n())}})}),C$(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):see(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){L9(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=e?n:null,s=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let r,c;this.isZeroPagesToDisplay()?r=c=0:(r=o*s+1,c=r+o-1,e&&c>i&&(c=i));const u=r+o-1,h=!e&&n<u,f=this.formatNumber(r);this.lbFirstRowOnPage.textContent=f;let p;const m=this.getLocaleTextFunc();h?p=m("pageLastRowUnknown","?"):p=this.formatNumber(c),this.lbLastRowOnPage.textContent=p;const S=t>0?s+1:0,E=this.formatNumber(S);this.lbCurrent.textContent=E;let x,P;if(e)x=this.formatNumber(t),P=this.formatNumber(i);else{const M=m("more","more");x=M,P=M}this.lbTotal.textContent=x,this.lbRecordCount.textContent=P,this.announceAriaStatus(f,p,P,E,x)}announceAriaStatus(e,t,n,i,s){const o=this.getLocaleTextFunc(),r=o("page","Page"),c=o("to","to"),u=o("of","of"),h=`${e} ${c} ${t} ${u} ${n}`,f=`${r} ${i} ${u} ${s}`;h!==this.ariaRowStatus&&(this.ariaRowStatus=h,this.ariaAnnounce?.announceValue(h,"paginationRow")),f!==this.ariaPageStatus&&(this.ariaPageStatus=f,this.ariaAnnounce?.announceValue(f,"paginationPage"))}},pse={selector:"AG-PAGINATION",component:gse},mse=class extends re{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return pse}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:n}=this.beans;n?.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Ce(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Ce(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Ce(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Ce(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const n=this.pageSize,i=t-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();const s=this.currentPage,o=n*s;let r=n*(s+1)-1;if(r>i&&(r=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),r===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const c=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=c-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:n}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},Cse={moduleName:"Pagination",version:Se,beans:[mse,cse],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:Jie,paginationGetPageSize:ese,paginationGetCurrentPage:tse,paginationGetTotalPages:nse,paginationGetRowCount:ise,paginationGoToNextPage:sse,paginationGoToPreviousPage:ose,paginationGoToFirstPage:rse,paginationGoToLastPage:ase,paginationGoToPage:lse},dependsOn:[sC]};function vse(e,t={}){const n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function fV(e,t,n,i,s){t&&(i&&t.parent&&t.parent.level!==-1&&fV(e,t.parent,n,i,s),t.setExpanded(n,void 0,s))}function yse(e,t){return e.rowModel.getRowNode(t)}function wse(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function Sse(e){return e.rowRenderer.getRenderedNodes()}function bse(e,t,n){e.rowModel.forEachNode(t,n)}function Rse(e){return e.rowRenderer.firstRenderedRow}function Ese(e){return e.rowRenderer.lastRenderedRow}function Tse(e,t){return e.rowModel.getRow(t)}function xse(e){return e.rowModel.getRowCount()}var Dse={moduleName:"RowApi",version:Se,apiFunctions:{redrawRows:vse,setRowNodeExpanded:fV,getRowNode:yse,addRenderedRowListener:wse,getRenderedNodes:Sse,forEachNode:bse,getFirstDisplayedRowIndex:Rse,getLastDisplayedRowIndex:Ese,getDisplayedRowAtIndex:Tse,getDisplayedRowCount:xse}},Ase={moduleName:"ScrollApi",version:Se,apiFunctions:{getVerticalPixelRange:Qte,getHorizontalPixelRange:Xte,ensureColumnVisible:sV,ensureIndexVisible:oV,ensureNodeVisible:Zte}};function Fse(e,t,n){if(!t)return;const i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,s=`aria-${t}`;n===null?i.removeAttribute(s):i.setAttribute(s,n)}function Pse(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function Mse(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function Ise(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function _se(e){e.animationFrameSvc?.flushAllFrames()}function kse(e){return{rowHeight:nl(e),headerHeight:cf(e)}}function Lse(e,t={}){const n=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(o=>{const r=o.getCellRenderer();r!=null&&n.push(kh(r))}),t.columns?.length)return n;const i=[],s=XS(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(o=>{if(s&&!ZS(o.rowNode,s)||!o.isFullWidth())return;const r=o.getFullWidthCellRenderers();for(let c=0;c<r.length;c++){const u=r[c];u!=null&&i.push(kh(u))}}),[...i,...n]}var Ose={moduleName:"RenderApi",version:Se,apiFunctions:{setGridAriaProperty:Fse,refreshCells:Pse,refreshHeader:Mse,isAnimationFrameQueueEmpty:Ise,flushAllAnimationFrames:_se,getSizesForCurrentTheme:kse,getCellRendererInstances:Lse}};function Vse(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function gV({colAutosize:e,visibleCols:t},n,i){Array.isArray(n)?e?.autoSizeCols({colKeys:n,skipHeader:i,source:"api"}):e?.autoSizeCols({colKeys:n.colIds??t.allCols,skipHeader:n.skipHeader,defaultMaxWidth:n.defaultMaxWidth,defaultMinWidth:n.defaultMinWidth,columnLimits:n.columnLimits,source:"api"})}function Nse(e,t){t&&typeof t=="object"?gV(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var Bse=class extends re{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:s,defaultMaxWidth:o,defaultMinWidth:r,columnLimits:c=[],source:u="api"}=e,{animationFrameSvc:h,renderStatus:f,colModel:p,autoWidthCalc:m,visibleCols:w}=this.beans;if(h?.flushAllFrames(),this.timesDelayed<5&&f&&!f.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});return}this.timesDelayed=0;const S=[];let E=-1;const x=Object.fromEntries(c.map(({colId:I,maxWidth:U,minWidth:z})=>[I,{maxWidth:U,minWidth:z}])),P=n??this.gos.get("skipHeaderOnAutoSize"),M=i??P;for(;E!==0;){E=0;const I=[];t.forEach(U=>{if(!U||L7(U))return;const z=p.getCol(U);if(!z||S.indexOf(z)>=0)return;const W=m.getPreferredWidthForColumn(z,P);if(W>0){const _=x[z.colId]??{};_.minWidth??(_.minWidth=r),_.maxWidth??(_.maxWidth=o);const F=Gse(z,W,_);z.setActualWidth(F,u),S.push(z),E++}I.push(z)}),I.length&&w.refresh(u)}M||this.autoSizeColumnGroupsByColumns(t,u,s),lu(this.eventSvc,S,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){const{colModel:i,ctrlsSvc:s}=this.beans,o=new Set;i.getColsForKeys(e).forEach(h=>{let f=h.getParent();for(;f&&f!=n;)f.isPadding()||o.add(f),f=f.getParent()});let c;const u=[];for(const h of o){for(const f of s.getHeaderRowContainerCtrls())if(c=f.getHeaderCtrlForColumn(h),c)break;c&&c.resizeLeafColumnsToFit(t)}return u}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}const t=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:t,...e})}addColumnAutosize(e,t){const n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",i);const s=new Ba(e);return s.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}}addColumnGroupResize(e,t,n){const i=this.gos.get("skipHeaderOnAutoSize"),s=()=>{const o=[];t.getDisplayedLeafColumns().forEach(c=>{c.getColDef().suppressAutoSize||o.push(c.getColId())}),o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",s),()=>e.removeEventListener("dblclick",s)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:n,scrollVisibleSvc:i}=this.beans,s=n.getGridBodyCtrl(),r=s.isVerticalScrollShowing()?i.getScrollbarWidth():0,u=Mh(s.eGridBody)-r;if(u>0){this.sizeColumnsToFit(u,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):ge(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}const s={};i&&i?.columnLimits?.forEach(({key:w,...S})=>{s[typeof w=="string"?w:w.getColId()]=S});const o=this.beans.visibleCols.allCols;if(e<=0||!o.length||e===Do(o)&&o.every(S=>{if(S.colDef.suppressSizeToFit)return!0;const E=s?.[S.getId()],x=E?.minWidth??i?.defaultMinWidth,P=E?.maxWidth??i?.defaultMaxWidth,M=S.getActualWidth();return(x==null||M>=x)&&(P==null||M<=P)}))return;const c=[],u=[];o.forEach(w=>{w.getColDef().suppressSizeToFit===!0?u.push(w):c.push(w)});const h=c.slice(0);let f=!1;const p=w=>{is(c,w),u.push(w)};for(c.forEach(w=>{w.resetActualWidth(t);const S=s?.[w.getId()],E=S?.minWidth??i?.defaultMinWidth,x=S?.maxWidth??i?.defaultMaxWidth,P=w.getActualWidth();typeof E=="number"&&P<E?w.setActualWidth(E,t,!0):typeof x=="number"&&P>x&&w.setActualWidth(x,t,!0)});!f;){f=!0;const w=e-Do(u);if(w<=0)c.forEach(S=>{const E=s?.[S.getId()]?.minWidth??i?.defaultMinWidth;if(typeof E=="number"){S.setActualWidth(E,t,!0);return}S.setActualWidth(S.minWidth,t)});else{const S=w/Do(c);let E=w;for(let x=c.length-1;x>=0;x--){const P=c[x],M=s?.[P.getId()],I=M?.minWidth??i?.defaultMinWidth,U=M?.maxWidth??i?.defaultMaxWidth,z=P.getMinWidth(),W=P.getMaxWidth(),_=typeof I=="number"&&I>z?I:z,F=typeof U=="number"&&U<W?U:W;let k=Math.round(P.getActualWidth()*S);k<_?(k=_,p(P),f=!1):k>F?(k=F,p(P),f=!1):x===0&&(k=E),P.setActualWidth(k,t,!0),E-=k}}}h.forEach(w=>{w.fireColumnWidthChangedEvent(t)});const m=this.beans.visibleCols;m.setLeftValues(t),m.updateBodyWidths(),!n&&lu(this.eventSvc,h,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:s}=e,o=n?.map(({colId:r,minWidth:c,maxWidth:u})=>({key:r,minWidth:c,maxWidth:u}));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;const{colIds:t,skipHeader:n,defaultMaxWidth:i,defaultMinWidth:s,columnLimits:o}=e;setTimeout(()=>{const r={skipHeader:n,source:"autosizeColumns",defaultMaxWidth:i,defaultMinWidth:s,columnLimits:o};t?this.autoSizeCols({colKeys:t,...r}):this.autoSizeAllColumns(r)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function Gse(e,t,n={}){const i=n.minWidth??e.getMinWidth();t<i&&(t=i);const s=n.maxWidth??e.getMaxWidth();return t>s&&(t=s),t}var Hse={moduleName:"ColumnAutoSize",version:Se,beans:[Bse],apiFunctions:{sizeColumnsToFit:Vse,autoSizeColumns:gV,autoSizeAllColumns:Nse},dependsOn:[pO]},zse=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function Use(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function Wse(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function jse(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function $se(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function qse(e,t,n){return e.pinnedRowModel?.forEachPinnedRow(t,n)}var Kse={moduleName:"PinnedRow",version:Se,beans:[mK],css:[zse],apiFunctions:{getPinnedTopRowCount:Use,getPinnedBottomRowCount:Wse,getPinnedTopRow:jse,getPinnedBottomRow:$se,forEachPinnedRow:qse},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},Yse=class extends Kc{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,i,s,o,r){this.eWrapper=n,super.setComp(e,t,n,i,s,o,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){this.rowNode.rowIndex!=null&&Rk(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){B9(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(Zm(t)){this.focusedCellPosition=void 0;return}const n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},Qse=class extends gm{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(e=>e.refreshAriaRowIndex())}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new Yse(t,this,this.beans)}isCorrectCtrlForSpan(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},Xse=class extends re{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,n=`${e}Ctrls`,i=this[n],s=i.size,o=this.getAllRelevantRowControls(e),r=new Map;let c=!1;for(const h of o)h.isAlive()&&t?.forEachSpannedColumn(h.rowNode,(f,p)=>{if(r.has(p.firstNode))return;const m=i.get(p.firstNode);if(m){r.set(p.firstNode,m),i.delete(p.firstNode);return}c=!0;const w=new Qse(p.firstNode,this.beans,!1,!1,!1);r.set(p.firstNode,w)});this[n]=r;const u=r.size===s;if(!(!c&&u)){for(const h of i.values())h.destroyFirstPass(!0),h.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,n=t?.getCellSpanByPosition(e);if(!n)return;const i=`${pV(e.rowPinned)}Ctrls`,s=this[i].get(n.firstNode);if(s)return s.getAllCellCtrls().find(o=>o.column===e.column)}getCtrls(e){const t=`${e}Ctrls`;return[...this[t].values()]}destroyRowCtrls(e){const t=`${e}Ctrls`;for(const n of this[t].values())n.destroyFirstPass(!0),n.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},pV=e=>e??"center",Zse=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;return this.spannedNodes.forEach(n=>{n!==this.lastNode&&(t+=n.rowHeight)}),e-t}},Jse=class extends re{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:n,pinnedRowModel:i,rowModel:s,valueSvc:o,pagination:r}}=this,{colDef:c}=t,u=this[`${e}ValueNodeMap`],h=new Map,f=n.getCallback("isFullWidthRow"),p=c.equals,m=c.spanRows,w=typeof m=="function";let S=null,E=null,x;const P=(I,U)=>{S=I,E=null,x=U},M=I=>{const U=!I.isExpandable()&&!I.group&&!I.detail&&(f?!f({rowNode:I}):!0);if(I.rowIndex==null||!U){P(null,null);return}if(S==null||I.level!==S.level||I.footer||E&&I.rowIndex-1!==E?.getLastNode().rowIndex){P(I,o.getValue(t,I));return}const z=o.getValue(t,I);if(w){const W=Me(n,{valueA:x,nodeA:S,valueB:z,nodeB:I,column:t,colDef:c});if(!m(W)){P(I,z);return}}else if(p?!p(x,z):x!==z){P(I,z);return}if(!E){const W=u?.get(S);W?.firstNode===S?(W.reset(),E=W):E=new Zse(t,S),h.set(S,E)}E.addSpannedNode(I),h.set(I,E)};switch(e){case"center":s.forEachDisplayedNode?.(I=>{(!r||r.isRowInPage(I.rowIndex))&&M(I)});break;case"top":i?.forEachPinnedRow("top",M);break;case"bottom":i?.forEachPinnedRow("bottom",M);break}this[`${e}ValueNodeMap`]=h}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${pV(e.rowPinned)}ValueNodeMap`].get(e)}},eoe=class extends re{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Un(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Un(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const n=this.createManagedBean(new Jse(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:n}=this.beans,i=e.column,s=e.rowIndex,o=this.spanningColumns.get(i);if(!o)return;let r;switch(e.rowPinned){case"top":r=t?.getPinnedTopRow(s);break;case"bottom":r=t?.getPinnedBottomRow(s);break;default:r=n.getRow(s)}if(r)return o.getCellSpan(r)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[n,i]of this.spanningColumns)if(i.isCellSpanning(e)){const s=i.getCellSpan(e);t(n,s)}}destroy(){super.destroy(),this.spanningColumns.clear()}},toe={moduleName:"CellSpan",version:Se,beans:[eoe,Xse]},noe=class extends re{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,n=e.colDef,i=n.cellClassRules,s=this.getCellClassParams(e,n);ZR(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,s,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=i}applyUserStyles(){const e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let i;if(typeof n=="function"){const s=this.getCellClassParams(e,t);i=n(s)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,n=e.colDef,i=this.getCellClassParams(e,n);this.staticClasses.forEach(o=>t.toggleCss(o,!1));const s=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=s,s.forEach(o=>t.toggleCss(o,!0))}getCellClassParams(e,t){const{value:n,rowNode:i}=this.cellCtrl;return Me(this.beans.gos,{value:n,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},ioe=class extends re{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,i){ZR(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){const{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e,t){return new noe(e,t)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(s=>{n(s)})}},soe={moduleName:"CellStyle",version:Se,beans:[ioe]},ooe={moduleName:"RowStyle",version:Se,beans:[cq]};function roe(e,t){return!!e.colHover?.isHovered(t)}var aoe=class extends re{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=n=>{const{beans:i,gos:s,element:o,columns:r}=this,c=i.colHover;n??!!s.get("columnHoverHighlight")?this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:c.setMouseOver.bind(c,r),mouseout:c.clearMouseOver.bind(c)}):(this.destroyManagedListeners.forEach(h=>h()),this.destroyManagedListeners=[])}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},loe="ag-column-hover",coe=class extends re{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){const i=()=>{const s=this.isHovered(n);t.toggleCss("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;const n=this.isHovered(e);t.toggleCss(loe,n)}addHeaderFilterColumnHoverListener(e,t,n,i){this.createHoverFeature(e,[n],i);const s=()=>{const o=this.isHovered(n);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:s}),s()}createHoverFeature(e,t,n){e.createManagedBean(new aoe(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},uoe={moduleName:"ColumnHover",version:Se,beans:[coe],apiFunctions:{isColumnHovered:roe}},doe=class extends re{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addEventListener(e,t){const n=this.wrapSvc?.wrap(e,t)??t,i=!Sp.has(e),s=i?this.asyncListeners:this.syncListeners;s.has(e)||s.set(e,new Set),s.get(e).add(n),this.eventSvc.addEventListener(e,n,i)}removeEventListener(e,t){const n=this.wrapSvc?.unwrap(e,t)??t,s=!!this.asyncListeners.get(e)?.delete(n);s||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeEventListener(e,n,s)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,n=(o,r)=>{Sp.has(o)&&t(o,r)},i=(o,r)=>{Sp.has(o)||t(o,r)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:i});const s=this.eventSvc;s.addGlobalListener(n,!1),s.addGlobalListener(i,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:n,globalListenerPairs:i}=this,s=n?.unwrapGlobal(e)??e;if(i.has(s)){const{syncListener:r,asyncListener:c}=i.get(s);t.removeGlobalListener(r,!1),t.removeGlobalListener(c,!0),i.delete(e)}else this.syncGlobalListeners.delete(s),t.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(s=>this.eventSvc.removeEventListener(i,s,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventSvc.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:i})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function hoe(e,t,n){e.apiEventSvc?.addEventListener(t,n)}function foe(e,t,n){e.apiEventSvc?.removeEventListener(t,n)}function goe(e,t){e.apiEventSvc?.addGlobalListener(t)}function poe(e,t){e.apiEventSvc?.removeGlobalListener(t)}var moe={moduleName:"EventApi",version:Se,apiFunctions:{addEventListener:hoe,addGlobalListener:goe,removeEventListener:foe,removeGlobalListener:poe},beans:[doe]},Coe={moduleName:"Locale",version:Se,beans:[KJ]},voe=class extends re{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Un(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:n,pinnedRowModel:i}=this.beans,s=e.autoHeightCols;let o=!1;const r=c=>{const u=c.__autoHeights;let h=$r(this.beans,c).height;for(const f of s){let p=u?.[f.getColId()];const m=n?.getCellSpan(f,c);if(m){if(m.getLastNode()!==c)continue;if(p=n?.getCellSpan(f,c)?.getLastNodeAutoHeight(),!p)return}if(p==null){if(this.colSpanSkipCell(f,c))continue;return}h=Math.max(p,h)}h!==c.rowHeight&&(c.setRowHeight(h),o=!0)};i?.forEachPinnedRow?.("top",r),i?.forEachPinnedRow?.("bottom",r),t.forEachDisplayedNode?.(r),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,n){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}const i=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:n,colViewport:i,visibleCols:s}=this.beans;if(!n.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=s.getLeftColsForRow(t);break;case"right":o=s.getRightColsForRow(t);break;case null:o=i.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const i=t.parentElement,{rowNode:s,column:o}=e,r=this.beans,c=f=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!n.isAlive())return;const{paddingTop:p,paddingBottom:m,borderBottomWidth:w,borderTopWidth:S}=Sl(i),E=p+m+w+S,P=t.offsetHeight+E;if(f<5){const M=_n(r),I=!M||!M.contains(t),U=P==0;if(I||U){window.setTimeout(()=>c(f+1),0);return}}this.setRowAutoHeight(s,P,o)},u=()=>c(0);u();const h=$o(r,t,u);return n.addDestroyFunc(()=>{h(),this.setRowAutoHeight(s,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:n}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(n).filter(s=>s.isAutoHeight())),t.length!==0){if(!n.__autoHeights)return!1;for(const i of t){const s=n.__autoHeights[i.getColId()];if(!s||n.rowHeight<s)return!1}}return!0}},yoe={moduleName:"RowAutoHeight",version:Se,beans:[voe]},woe={moduleName:"AllCommunity",version:Se,dependsOn:[vie,xie,Oie,yee,Rne,Ene,Tne,xne,Dne,Ane,Fne,bne,bte,Rte,Ete,Ste,xte,Dte,Zie,eie,Cse,mO,Dse,Ase,Ose,Hse,mY,Kse,Wne,PJ,soe,uoe,ooe,moe,_J,$ie,iV,Coe,yoe,pY,yie,toe]},Jn=oe.createContext({}),mV=oe.createContext("default"),uf=(e,t,n,i)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let r,c,u=!1;return o.then(h=>{if(u){t.destroyBean(h);return}r=h,c=r.getGui(),n.appendChild(c),VP(i,r)}),()=>{u=!0,r&&(c?.parentElement?.removeChild(c),t.destroyBean(r),i&&VP(i,void 0))}},VP=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const n=e;n.current=t}},Xi=(...e)=>e.filter(n=>n!=null&&n!=="").join(" "),ts=class CV{constructor(...t){this.classesMap={},t.forEach(n=>{this.classesMap[n]=!0})}setClass(t,n){if(!!this.classesMap[t]==n)return this;const s=new CV;return s.classesMap={...this.classesMap},s.classesMap[t]=n,s}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},Du=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,n=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===n()},nb=oe.version?.split(".")[0],vV=nb==="16"||nb==="17";function Soe(){return nb==="19"}var bp=!1;function boe(e){return bp||setTimeout(()=>bp=!1,0),bp=!0,e()}var Hh=(e,t)=>{!vV&&e&&!bp?za.flushSync(t):t()},Roe=e=>{vV?e():oe.startTransition(e)};function Eoe(e,t,n){return oe.useSyncExternalStore?oe.useSyncExternalStore(e,t):n}function vm(e,t,n){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(n||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const i=[],s=[],o=new Map,r=new Map;for(let c=0;c<t.length;c++){const u=t[c];r.set(u.instanceId,u)}for(let c=0;c<e.length;c++){const u=e[c];o.set(u.instanceId,u),r.has(u.instanceId)&&i.push(u)}for(let c=0;c<t.length;c++){const u=t[c],h=u.instanceId;o.has(h)||s.push(u)}return i.length===e.length&&s.length===0?e:i.length===0&&s.length===t.length?t:i.length===0?s:s.length===0?i:[...i,...s]}var yV=R.forwardRef((e,t)=>{const{registry:n,context:i}=R.useContext(Jn),s=R.useRef(null),o=R.useRef(null),r=R.useRef(null),c=R.useRef(null),u=R.useRef(null),h=R.useRef(),[f,p]=R.useState(),[m,w]=R.useState(),[S,E]=R.useState(),[x,P]=R.useState(()=>new ts),[M,I]=R.useState(()=>new ts("ag-hidden")),[U,z]=R.useState(()=>new ts("ag-hidden")),[W,_]=R.useState(()=>new ts("ag-invisible"));R.useImperativeHandle(t,()=>({refresh(){return!1}})),R.useLayoutEffect(()=>uf(f,i,o.current),[f]);const F=R.useCallback(ie=>{if(s.current=ie,!ie){h.current=i.destroyBean(h.current);return}const se={setInnerRenderer:(G,Z)=>{p(G),E(Z)},setChildCount:G=>w(G),toggleCss:(G,Z)=>P(le=>le.setClass(G,Z)),setContractedDisplayed:G=>z(Z=>Z.setClass("ag-hidden",!G)),setExpandedDisplayed:G=>I(Z=>Z.setClass("ag-hidden",!G)),setCheckboxVisible:G=>_(Z=>Z.setClass("ag-invisible",!G)),setCheckboxSpacing:G=>_(Z=>Z.setClass("ag-group-checkbox-spacing",G))},be=n.createDynamicBean("groupCellRendererCtrl",!0);be&&(h.current=i.createBean(be),h.current.init(se,ie,r.current,c.current,u.current,yV,e))},[]),k=R.useMemo(()=>`ag-cell-wrapper ${x.toString()}`,[x]),O=R.useMemo(()=>`ag-group-expanded ${M.toString()}`,[M]),N=R.useMemo(()=>`ag-group-contracted ${U.toString()}`,[U]),H=R.useMemo(()=>`ag-group-checkbox ${W.toString()}`,[W]),V=f?.componentFromFramework,ve=V?f.componentClass:void 0,pe=f==null&&S!=null,q=Eu(S);return oe.createElement("span",{className:k,ref:F,...e.colDef?{}:{role:h.current?.getCellAriaRole()}},oe.createElement("span",{className:O,ref:c}),oe.createElement("span",{className:N,ref:u}),oe.createElement("span",{className:H,ref:r}),oe.createElement("span",{className:"ag-group-value",ref:o},pe?q:V?oe.createElement(ve,{...f.params}):null),oe.createElement("span",{className:"ag-group-child-count"},m))}),NP=yV,yE=R.createContext({setMethods:()=>{}}),Toe=e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:i,setMethods:s}=e,[{key:o,...r},c]=R.useState(t);return R.useEffect(()=>{n(u=>c(u))},[]),oe.createElement(yE.Provider,{value:{setMethods:s}},oe.createElement(i,{key:o,...r}))},xoe=R.memo(Toe),Doe=0;function BP(){return`agPortalKey_${++Doe}`}var wV=class{constructor(e,t,n,i){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!i,this.statelessComponent=this.isStateless(this.reactComponent),this.key=BP(),this.portalKey=BP(),this.instanceCreated=this.isStatelessComponent()?it.resolve(!1):new it(s=>{this.resolveInstanceCreated=s})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n){setTimeout(()=>this.callMethod(e,t));return}const i=n[e];if(i)return i.apply(n,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new it(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=sb.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return R.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function aC(e,t,n){e.forEach(i=>{const s=t[i];s&&(n[i]=s)})}var ki=class extends wV{constructor(){super(...arguments),this.awaitUpdateCallback=new it(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=xoe}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new it(i=>{setTimeout(()=>{i()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,aC(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new it(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Aoe=class extends ki{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Foe=class extends ki{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Poe=class extends ki{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:i}=this;return e.label=t,e.icon=n,e.shake=i,e}},Moe=class extends ki{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new it(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new it(n=>{this.resolveFilterPassCallback=n});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Ioe=class extends ki{constructor(){super(...arguments),this.awaitSetMethodsCallback=new it(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function SV(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||it.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var _oe=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){aC(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),SV(this.floatingFilterParams,e)}},koe=class extends ki{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),SV(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Loe=class extends ki{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Ooe=class extends ki{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Voe=class extends ki{refresh(e){this.sourceParams=e,this.refreshProps()}},Noe=class extends ki{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Boe=class extends ki{refresh(e){this.sourceParams=e,this.refreshProps()}},Goe=class extends ki{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Hoe=class extends ki{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function wE(){ge(231)}var zoe=1e3,Uoe=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||zoe}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Hh(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},Woe=({ctrl:e})=>{const t=e.isAlive(),{context:n}=R.useContext(Jn),i=t?e.column.getColId():void 0,[s,o]=R.useState(),[r,c]=R.useState(),u=R.useRef(),h=R.useRef(null),f=R.useRef(null),p=R.useRef(null),m=R.useRef(),w=R.useRef();t&&!w.current&&(w.current=new rf(()=>h.current));const S=R.useCallback(M=>{if(h.current=M,u.current=M?n.createBean(new Tu):n.destroyBean(u.current),!M||!e.isAlive())return;const I=()=>{const z=e.getSelectAllGui();z&&(f.current?.insertAdjacentElement("afterend",z),u.current.addDestroyFunc(()=>z.remove()))},U={setWidth:z=>{h.current&&(h.current.style.width=z)},toggleCss:(z,W)=>w.current.toggleCss(z,W),setUserStyles:z=>c(z),setAriaSort:z=>{h.current&&(z?z9(h.current,z):U9(h.current))},setUserCompDetails:z=>o(z),getUserCompInstance:()=>m.current||void 0,refreshSelectAllGui:I,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(U,M,f.current,p.current,u.current),I()},[]);R.useLayoutEffect(()=>uf(s,n,p.current,m),[s]),R.useEffect(()=>{e.setDragSource(h.current)},[s]);const E=R.useMemo(()=>!!(s?.componentFromFramework&&Du(s.componentClass)),[s]),x=s?.componentFromFramework,P=s?.componentClass;return oe.createElement("div",{ref:S,style:r,className:"ag-header-cell","col-id":i,role:"columnheader"},oe.createElement("div",{ref:f,className:"ag-header-cell-resize",role:"presentation"}),oe.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},x?E?oe.createElement(P,{...s.params}):oe.createElement(P,{...s.params,ref:m}):null))},joe=R.memo(Woe),$oe=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){aC(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},qoe=({ctrl:e})=>{const{context:t,gos:n}=R.useContext(Jn),[i,s]=R.useState(),[o,r]=R.useState(()=>new ts("ag-header-cell","ag-floating-filter")),[c,u]=R.useState(()=>new ts),[h,f]=R.useState(()=>new ts("ag-floating-filter-button","ag-hidden")),[p,m]=R.useState("false"),[w,S]=R.useState(),[,E]=R.useState(1),x=R.useRef(),P=R.useRef(null),M=R.useRef(null),I=R.useRef(null),U=R.useRef(null),z=R.useRef(),W=R.useRef(),_=G=>{G!=null&&z.current&&z.current(G)},F=R.useCallback(G=>{if(P.current=G,x.current=G?t.createBean(new Tu):t.destroyBean(x.current),!G)return;W.current=new it(le=>{z.current=le});const Z={toggleCss:(le,te)=>r(me=>me.setClass(le,te)),setUserStyles:le=>s(le),addOrRemoveBodyCssClass:(le,te)=>u(me=>me.setClass(le,te)),setButtonWrapperDisplayed:le=>{f(te=>te.setClass("ag-hidden",!le)),m(le?"false":"true")},setWidth:le=>{P.current&&(P.current.style.width=le)},setCompDetails:le=>S(le),getFloatingFilterComp:()=>W.current?W.current:null,setMenuIcon:le=>U.current?.appendChild(le)};e.setComp(Z,G,U.current,M.current,x.current)},[]);R.useLayoutEffect(()=>uf(w,t,M.current,_),[w]);const k=R.useMemo(()=>o.toString(),[o]),O=R.useMemo(()=>c.toString(),[c]),N=R.useMemo(()=>h.toString(),[h]),H=R.useMemo(()=>!!(w&&w.componentFromFramework&&Du(w.componentClass)),[w]),V=R.useMemo(()=>n.get("reactiveCustomComponents"),[]),ve=R.useMemo(()=>n.get("enableFilterHandlers"),[]),[pe,q]=R.useState();R.useEffect(()=>{if(w?.componentFromFramework)if(V){const G=ve?$oe:_oe,Z=new G(w.params,()=>E(le=>le+1));_(Z),q(Z)}else wE()},[w]);const ie=pe?.getProps(),se=w?.componentFromFramework,be=w?.componentClass;return oe.createElement("div",{ref:F,style:i,className:k,role:"gridcell"},oe.createElement("div",{ref:M,className:O,role:"presentation"},se?V?ie&&oe.createElement(yE.Provider,{value:{setMethods:G=>pe.setMethods(G)}},oe.createElement(be,{...ie})):oe.createElement(be,{...w.params,ref:H?()=>{}:_}):null),oe.createElement("div",{ref:I,"aria-hidden":p,className:N,role:"presentation"},oe.createElement("button",{ref:U,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Koe=R.memo(qoe),Yoe=({ctrl:e})=>{const{context:t}=R.useContext(Jn),[n,i]=R.useState(),[s,o]=R.useState(()=>new ts),[r,c]=R.useState(()=>new ts),[u,h]=R.useState("false"),[f,p]=R.useState(),[m,w]=R.useState(),S=R.useMemo(()=>e.column.getUniqueId(),[]),E=R.useRef(),x=R.useRef(null),P=R.useRef(null),M=R.useRef(null),I=R.useRef(),U=R.useCallback(O=>{if(x.current=O,E.current=O?t.createBean(new Tu):t.destroyBean(E.current),!O)return;const N={setWidth:H=>{x.current&&(x.current.style.width=H)},toggleCss:(H,V)=>o(ve=>ve.setClass(H,V)),setUserStyles:H=>i(H),setHeaderWrapperHidden:H=>{const V=M.current;V&&(H?V.style.setProperty("display","none"):V.style.removeProperty("display"))},setHeaderWrapperMaxHeight:H=>{const V=M.current;V&&(H!=null?V.style.setProperty("max-height",`${H}px`):V.style.removeProperty("max-height"),V.classList.toggle("ag-header-cell-comp-wrapper-limited-height",H!=null))},setUserCompDetails:H=>w(H),setResizableDisplayed:H=>{c(V=>V.setClass("ag-hidden",!H)),h(H?"false":"true")},setAriaExpanded:H=>p(H),getUserCompInstance:()=>I.current||void 0};e.setComp(N,O,P.current,M.current,E.current)},[]);R.useLayoutEffect(()=>uf(m,t,M.current),[m]),R.useEffect(()=>{x.current&&e.setDragSource(x.current)},[m]);const z=R.useMemo(()=>!!(m?.componentFromFramework&&Du(m.componentClass)),[m]),W=R.useMemo(()=>"ag-header-group-cell "+s.toString(),[s]),_=R.useMemo(()=>"ag-header-cell-resize "+r.toString(),[r]),F=m?.componentFromFramework,k=m?.componentClass;return oe.createElement("div",{ref:U,style:n,className:W,"col-id":S,role:"columnheader","aria-expanded":f},oe.createElement("div",{ref:M,className:"ag-header-cell-comp-wrapper",role:"presentation"},F?z?oe.createElement(k,{...m.params}):oe.createElement(k,{...m.params,ref:I}):null),oe.createElement("div",{ref:P,"aria-hidden":u,className:_}))},Qoe=R.memo(Yoe),Xoe=({ctrl:e})=>{const{context:t}=R.useContext(Jn),{topOffset:n,rowHeight:i}=R.useMemo(()=>e.getTopAndHeight(),[]),[s,o]=R.useState(e.getAriaRowIndex()),r=e.headerRowClass,[c,u]=R.useState(()=>i+"px"),[h,f]=R.useState(()=>n+"px"),p=R.useRef([]),[m,w]=R.useState(()=>e.getUpdatedHeaderCtrls()),S=R.useRef(),E=R.useRef(null),x=R.useCallback(I=>{if(E.current=I,S.current=I?t.createBean(new Tu):t.destroyBean(S.current),!I)return;const U={setHeight:z=>u(z),setTop:z=>f(z),setHeaderCtrls:(z,W,_)=>{const F=p.current,k=vm(F,z,W);k!==F&&(p.current=k,Hh(_,()=>w(k)))},setWidth:z=>{E.current&&(E.current.style.width=z)},setRowIndex:z=>{o(z)}};e.setComp(U,S.current,!1)},[]),P=R.useMemo(()=>({height:c,top:h}),[c,h]),M=R.useCallback(I=>{switch(e.type){case"group":return oe.createElement(Qoe,{ctrl:I,key:I.instanceId});case"filter":return oe.createElement(Koe,{ctrl:I,key:I.instanceId});default:return oe.createElement(joe,{ctrl:I,key:I.instanceId})}},[]);return oe.createElement("div",{ref:x,className:r,role:"row",style:P,"aria-rowindex":s},m.map(M))},Zoe=R.memo(Xoe),Joe=({pinned:e})=>{const[t,n]=R.useState(!0),[i,s]=R.useState([]),{context:o}=R.useContext(Jn),r=R.useRef(null),c=R.useRef(null),u=R.useRef(),h=e==="left",f=e==="right",p=!h&&!f,m=R.useCallback(E=>{if(r.current=E,u.current=E?o.createBean(new qq(e)):o.destroyBean(u.current),!E)return;const x={setDisplayed:n,setCtrls:P=>s(P),setCenterWidth:P=>{c.current&&(c.current.style.width=P)},setViewportScrollLeft:P=>{r.current&&(r.current.scrollLeft=P)},setPinnedContainerWidth:P=>{r.current&&(r.current.style.width=P,r.current.style.minWidth=P,r.current.style.maxWidth=P)}};u.current.setComp(x,r.current)},[]),w=t?"":"ag-hidden",S=()=>i.map(E=>oe.createElement(Zoe,{ctrl:E,key:E.instanceId}));return h?oe.createElement("div",{ref:m,className:"ag-pinned-left-header "+w,"aria-hidden":!t,role:"rowgroup"},S()):f?oe.createElement("div",{ref:m,className:"ag-pinned-right-header "+w,"aria-hidden":!t,role:"rowgroup"},S()):p?oe.createElement("div",{ref:m,className:"ag-header-viewport "+w,role:"presentation",tabIndex:-1},oe.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},S())):null},Rw=R.memo(Joe),ere=()=>{const[e,t]=R.useState(()=>new ts),[n,i]=R.useState(),{context:s}=R.useContext(Jn),o=R.useRef(null),r=R.useRef(),c=R.useCallback(f=>{if(o.current=f,r.current=f?s.createBean(new Uq):s.destroyBean(r.current),!f)return;const p={toggleCss:(m,w)=>t(S=>S.setClass(m,w)),setHeightAndMinHeight:m=>i(m)};r.current.setComp(p,f,f)},[]),u=R.useMemo(()=>"ag-header "+e.toString(),[e]),h=R.useMemo(()=>({height:n,minHeight:n}),[n]);return oe.createElement("div",{ref:c,className:u,style:h,role:"presentation"},oe.createElement(Rw,{pinned:"left"}),oe.createElement(Rw,{pinned:null}),oe.createElement(Rw,{pinned:"right"}))},tre=R.memo(ere),nre=(e,t)=>{R.useEffect(()=>{const n=t.current;if(n){const i=n.parentElement;if(i){const s=document.createComment(e);return i.insertBefore(s,n),()=>{i.removeChild(s)}}}},[e])},Ha=nre,ire=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new it(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){aC(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},sre=e=>{const t=R.useRef(e),n=R.useRef(),i=R.useRef(!1),s=R.useRef(!1),[,o]=R.useState(0);i.current&&(s.current=!0),R.useEffect(()=>(i.current||(n.current=t.current(),i.current=!0),o(r=>r+1),()=>{s.current&&n.current?.()}),[])},ore=e=>{const[t,n]=R.useState(),i=R.useContext(Jn),{context:s,popupSvc:o,gos:r,editSvc:c}=i,{editDetails:u,cellCtrl:h,eParentCell:f}=e;return sre(()=>{const{compDetails:p}=u,m=r.get("stopEditingWhenCellsLoseFocus"),w=s.createBean(c.createPopupEditorWrapper(p.params)),S=w.getGui();if(e.jsChildComp){const z=e.jsChildComp.getGui();z&&S.appendChild(z)}const{column:E,rowNode:x}=h,P={column:E,rowNode:x,type:"popupCellEditor",eventSource:f,ePopup:S,position:u.popupPosition,keepWithinBounds:!0},M=o?.positionPopupByComponent.bind(o,P),I=o?.addPopup({modal:m,eChild:S,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:f,positionCallback:M,ariaOwns:f}),U=I?I.hideFunc:void 0;return n(w),e.jsChildComp?.afterGuiAttached?.(),()=>{U?.(),s.destroyBean(w)}}),R.useLayoutEffect(()=>()=>{h.isCellFocused()&&t?.getGui().contains(qt(i))&&f.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?sb.createPortal(e.wrappedContent,t.getGui()):null},GP=R.memo(ore),rre=(e,t,n)=>{const{compProxy:i}=e;n(i);const s=i.getProps(),o=Du(t);return oe.createElement(yE.Provider,{value:{setMethods:r=>i.setMethods(r)}},o?oe.createElement(t,{...s}):oe.createElement(t,{...s,ref:r=>i.setRef(r)}))},HP=(e,t,n)=>e.compProxy?rre(e,t,n):oe.createElement(t,{...e.compDetails.params,ref:n}),are=(e,t,n,i,s)=>{const o=e.compDetails,r=o.componentClass,c=o.componentFromFramework&&!e.popup,u=o.componentFromFramework&&e.popup,h=!o.componentFromFramework&&e.popup;return c?HP(e,r,t):u?oe.createElement(GP,{editDetails:e,cellCtrl:i,eParentCell:n,wrappedContent:HP(e,r,t)}):h&&s?oe.createElement(GP,{editDetails:e,cellCtrl:i,eParentCell:n,jsChildComp:s}):null},lre=(e,t,n,i,s,o)=>{const{context:r}=R.useContext(Jn),c=R.useCallback(()=>{const u=s.current;if(!u)return;const h=u.getGui();h&&h.parentElement&&h.parentElement.removeChild(h),r.destroyBean(u),s.current=void 0},[]);R.useEffect(()=>{const u=e!=null,h=e?.compDetails&&!e.compDetails.componentFromFramework,f=t&&n==null;if(!(u&&h&&!f)){c();return}const m=e.compDetails;if(s.current){const S=s.current,x=S.refresh!=null&&e.force==!1?S.refresh(m.params):!1;if(x===!0||x===void 0)return;c()}m.newAgStackInstance().then(S=>{if(!S)return;const E=S.getGui();if(!E)return;(t?n:o.current).appendChild(E),s.current=S})},[e,t,i]),R.useEffect(()=>c,[])},bV=lre,cre=({cellCtrl:e,parent:t})=>{const n=R.useRef(),i=R.useMemo(()=>{const{loadingComp:s}=e.getDeferLoadingCellRenderer();return s?{value:void 0,compDetails:s,force:!1}:void 0},[e]);if(bV(i,!1,void 0,1,n,t),i?.compDetails?.componentFromFramework){const s=i.compDetails.componentClass;return oe.createElement(s,{...i.compDetails.params})}return oe.createElement(oe.Fragment,null)},ure=({cellCtrl:e,printLayout:t,editingCell:n})=>{const i=R.useContext(Jn),{context:s}=i,{column:{colIdSanitised:o},instanceId:r}=e,c=R.useRef(),[u,h]=R.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[f,p]=R.useState(),[m,w]=R.useState(1),[S,E]=R.useState(),[x,P]=R.useState(!1),[M,I]=R.useState(!1),[U,z]=R.useState(!1),[W,_]=R.useState(),F=R.useMemo(()=>e.isForceWrapper(),[e]),k=R.useMemo(()=>e.getCellAriaRole(),[e]),O=R.useRef(null),N=R.useRef(null),H=R.useRef(null),V=R.useRef(),ve=R.useRef(),pe=R.useRef(),q=R.useRef([]),ie=R.useRef(),[se,be]=R.useState(0),G=R.useCallback(Fe=>{ie.current=Fe,be(Ie=>Ie+1)},[]),Z=u!=null&&(x||U||M)&&(f==null||!!f.popup),le=F||Z,te=R.useCallback(Fe=>{if(ve.current=Fe,Fe){const Ie=Fe.isCancelBeforeStart&&Fe.isCancelBeforeStart();setTimeout(()=>{Ie?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(Fe))})}},[e]),me=R.useRef();me.current||(me.current=new rf(()=>O.current)),bV(u,le,ie.current,se,V,O);const Te=R.useRef();R.useLayoutEffect(()=>{const Fe=Te.current,Ie=u;if(Te.current=u,Fe==null||Fe.compDetails==null||Ie==null||Ie.compDetails==null)return;const ut=Fe.compDetails,ht=Ie.compDetails;if(ut.componentClass!=ht.componentClass||H.current?.refresh==null)return;H.current.refresh(ht.params)!=!0&&w(Et=>Et+1)},[u]),R.useLayoutEffect(()=>{if(!(f&&!f.compDetails.componentFromFramework))return;const Ie=f.compDetails,ut=f.popup===!0,ht=Ie.newAgStackInstance();return ht.then(je=>{if(!je)return;const Et=je.getGui();te(je),ut||((F?pe:O).current?.appendChild(Et),je.afterGuiAttached&&je.afterGuiAttached()),_(je)}),()=>{ht.then(je=>{const Et=je.getGui();e.disableEditorTooltipFeature(),s.destroyBean(je),te(void 0),_(void 0),Et?.parentElement?.removeChild(Et)})}},[f]);const xe=R.useCallback(Fe=>{if(pe.current=Fe,!Fe){q.current.forEach(ut=>ut()),q.current=[];return}const Ie=ut=>{if(ut){const ht=ut.getGui();Fe.insertAdjacentElement("afterbegin",ht),q.current.push(()=>{s.destroyBean(ut),Uo(ht)})}return ut};if(x){const ut=e.createSelectionCheckbox();Ie(ut)}U&&Ie(e.createDndSource()),M&&Ie(e.createRowDragComp())},[e,s,U,M,x]),st=R.useCallback(()=>{const Fe=!e.isCellSpanning()||N.current,Ie=O.current;if(c.current=Ie?s.createBean(new Tu):s.destroyBean(c.current),!Ie||!Fe||!e)return;const ut={toggleCss:(je,Et)=>me.current.toggleCss(je,Et),setUserStyles:je=>E(je),getFocusableElement:()=>O.current,setIncludeSelection:je=>P(je),setIncludeRowDrag:je=>I(je),setIncludeDndSource:je=>z(je),getCellEditor:()=>ve.current||null,getCellRenderer:()=>H.current??V.current,getParentOfValue:()=>ie.current??pe.current??O.current,setRenderDetails:(je,Et,Lt)=>{const Mt=()=>{h(Kt=>Kt?.compDetails!==je||Kt?.value!==Et||Kt?.force!==Lt?{value:Et,compDetails:je,force:Lt}:Kt)};if(je?.params?.deferRender&&!e.rowNode.group){const{loadingComp:Kt,onReady:Tn}=e.getDeferLoadingCellRenderer();if(Kt){h({value:void 0,compDetails:Kt,force:!1}),Tn.then(()=>Roe(Mt));return}}Mt()},setEditDetails:(je,Et,Lt,Mt)=>{if(je){let Kt;je.componentFromFramework&&(Mt?Kt=new ire(je.params,()=>w(Tn=>Tn+1)):wE()),p({compDetails:je,popup:Et,popupPosition:Lt,compProxy:Kt}),Et||h(void 0)}else e.hasBrowserFocus()&&ut.getFocusableElement().focus({preventScroll:!0}),p(Tn=>{Tn?.compProxy&&(ve.current=void 0)})},refreshEditStyles:(je,Et)=>{if(!O.current)return;const{current:Lt}=me;Lt.toggleCss("ag-cell-value",!le),Lt.toggleCss("ag-cell-inline-editing",!!je&&!Et),Lt.toggleCss("ag-cell-popup-editing",!!je&&!!Et),Lt.toggleCss("ag-cell-not-inline-editing",!je||!!Et)}},ht=pe.current||void 0;e.setComp(ut,Ie,N.current??void 0,ht,t,n,c.current)},[]),et=R.useCallback(Fe=>{O.current=Fe,st()},[]),We=R.useCallback(Fe=>{N.current=Fe,st()},[]),zt=R.useMemo(()=>!!(u?.compDetails?.componentFromFramework&&Du(u.compDetails.componentClass)),[u]);R.useLayoutEffect(()=>{if(!O.current)return;const{current:Fe}=me;Fe.toggleCss("ag-cell-value",!le),Fe.toggleCss("ag-cell-inline-editing",!!f&&!f.popup),Fe.toggleCss("ag-cell-popup-editing",!!f&&!!f.popup),Fe.toggleCss("ag-cell-not-inline-editing",!f||!!f.popup)});const gt=()=>{const{compDetails:Fe,value:Ie}=u;if(!Fe)return Ie?.toString?.()??Ie;if(Fe.componentFromFramework){const ut=Fe.componentClass;return oe.createElement(R.Suspense,{fallback:oe.createElement(cre,{cellCtrl:e,parent:O})},zt?oe.createElement(ut,{...Fe.params,key:m}):oe.createElement(ut,{...Fe.params,key:m,ref:H}))}},kt=()=>{const Fe=()=>u==null?null:le?oe.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:G},gt()):gt(),Ie=ut=>are(ut,te,O.current,e,W);return f!=null?f.popup?oe.createElement(oe.Fragment,null,Fe(),Ie(f)):Ie(f):Fe()},Zt=()=>oe.createElement("div",{ref:et,style:S,role:k,"col-id":o},le?oe.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:xe},kt()):kt());return e.isCellSpanning()?oe.createElement("div",{ref:We,className:"ag-spanned-cell-wrapper",role:"presentation"},Zt()):Zt()},dre=R.memo(ure),hre=({rowCtrl:e,containerType:t})=>{const{context:n,gos:i,editSvc:s}=R.useContext(Jn),o=R.useContext(mV)==="default",r=R.useRef(),c=R.useRef(e.getDomOrder()),u=e.isFullWidth(),h=e.rowNode.displayed,[f,p]=R.useState(()=>h?e.rowNode.getRowIndexString():null),[m,w]=R.useState(()=>e.rowId),[S,E]=R.useState(()=>e.businessKey),[x,P]=R.useState(()=>e.rowStyles),M=R.useRef(null),[I,U]=R.useState(()=>null),[z,W]=R.useState(),[_,F]=R.useState(()=>h?e.getInitialRowTop(t):void 0),[k,O]=R.useState(()=>h?e.getInitialTransform(t):void 0),N=R.useRef(null),H=R.useRef(),V=R.useRef(!1),[ve,pe]=R.useState(0);R.useEffect(()=>{if(V.current||!z||ve>10)return;const We=N.current?.firstChild;We?(e.setupDetailRowAutoHeight(We),V.current=!0):pe(zt=>zt+1)},[z,ve]);const q=R.useRef();q.current||(q.current=new rf(()=>N.current));const ie=R.useRef(()=>{}),se=R.useCallback(We=>(ie.current=We,()=>{ie.current=()=>{}}),[]),be=Eoe(se,()=>M.current,[]),G=o?be:I,Z=R.useCallback(We=>{if(N.current=We,r.current=We?n.createBean(new Tu):n.destroyBean(r.current),!We){e.unsetComp(t);return}if(!e.isAlive())return;const zt={setTop:F,setTransform:O,toggleCss:(gt,kt)=>q.current.toggleCss(gt,kt),setDomOrder:gt=>c.current=gt,setRowIndex:p,setRowId:w,setRowBusinessKey:E,setUserStyles:P,setCellCtrls:(gt,kt)=>{const Zt=M.current,Fe=vm(Zt,gt,c.current);Fe!==Zt&&(M.current=Fe,o?ie.current():Hh(kt,()=>U(Fe)))},showFullWidth:gt=>W(gt),getFullWidthCellRenderer:()=>H.current,refreshFullWidth:gt=>xe.current?(W(kt=>({...kt,params:gt()})),!0):!H.current||!H.current.refresh?!1:H.current.refresh(gt())};e.setComp(zt,We,t,r.current)},[]);R.useLayoutEffect(()=>uf(z,n,N.current,H),[z]);const le=R.useMemo(()=>{const We={top:_,transform:k};return Object.assign(We,x),We},[_,k,x]),te=u&&z?.componentFromFramework,me=!u&&G!=null,Te=R.useMemo(()=>!!(z?.componentFromFramework&&Du(z.componentClass)),[z]),xe=R.useRef(!1);R.useEffect(()=>{xe.current=Te&&!!z&&!!i.get("reactiveCustomComponents")},[Te,z]);const st=()=>G?.map(We=>oe.createElement(dre,{cellCtrl:We,editingCell:s?.isEditing(We,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:We.instanceId})),et=()=>{const We=z.componentClass;return Te?oe.createElement(We,{...z.params}):oe.createElement(We,{...z.params,ref:H})};return oe.createElement("div",{ref:Z,role:"row",style:le,"row-index":f,"row-id":m,"row-business-key":S},me?st():te?et():null)},zP=R.memo(hre),fre=({name:e})=>{const{context:t,gos:n}=R.useContext(Jn),i=R.useMemo(()=>lf(e),[e]),s=R.useRef(null),o=R.useRef(null),r=R.useRef(null),c=R.useRef([]),u=R.useRef([]),[h,f]=R.useState(()=>[]),p=!!n.get("enableCellSpan")&&!!i.getSpannedRowCtrls,m=R.useRef([]),w=R.useRef([]),[S,E]=R.useState(()=>[]),x=R.useRef(!1),P=R.useRef(),M=R.useMemo(()=>Xi("ag-viewport",qL(e)),[e]),I=R.useMemo(()=>Xi(wp(e)),[e]),U=R.useMemo(()=>Xi("ag-spanning-container",Sq(e)),[e]),z=i.type==="center"||p,W=z?s:o;Ha(" AG Row Container "+e+" ",W);const _=R.useCallback(()=>{const pe=!z||s.current!=null,q=o.current!=null,ie=!p||r.current!=null;return pe&&q&&ie},[]),F=R.useCallback(()=>s.current==null&&o.current==null&&r.current==null,[]),k=R.useCallback(()=>{if(F()&&(P.current=t.destroyBean(P.current)),_()){const pe=se=>{const be=vm(u.current,c.current,x.current);be!==u.current&&(u.current=be,Hh(se,()=>f(be)))},q=se=>{const be=vm(w.current,m.current,x.current);be!==w.current&&(w.current=be,Hh(se,()=>E(be)))},ie={setHorizontalScroll:se=>{s.current&&(s.current.scrollLeft=se)},setViewportHeight:se=>{s.current&&(s.current.style.height=se)},setRowCtrls:({rowCtrls:se,useFlushSync:be})=>{const G=!!be&&c.current.length>0&&se.length>0;c.current=se,pe(G)},setSpannedRowCtrls:(se,be)=>{const G=!!be&&m.current.length>0&&se.length>0;m.current=se,q(G)},setDomOrder:se=>{x.current!=se&&(x.current=se,pe(!1))},setContainerWidth:se=>{o.current&&(o.current.style.width=se)},setOffsetTop:se=>{o.current&&(o.current.style.transform=`translateY(${se})`)}};P.current=t.createBean(new Mq(e)),P.current.setComp(ie,o.current,r.current??void 0,s.current)}},[_,F]),O=R.useCallback(pe=>{o.current=pe,k()},[k]),N=R.useCallback(pe=>{r.current=pe,k()},[k]),H=R.useCallback(pe=>{s.current=pe,k()},[k]),V=()=>oe.createElement("div",{className:I,ref:O,role:"rowgroup"},h.map(pe=>oe.createElement(zP,{rowCtrl:pe,containerType:i.type,key:pe.instanceId})));if(!z)return V();const ve=()=>oe.createElement("div",{className:U,ref:N,role:"rowgroup"},S.map(pe=>oe.createElement(zP,{rowCtrl:pe,containerType:i.type,key:pe.instanceId})));return oe.createElement("div",{className:M,ref:H,role:"presentation"},V(),p?ve():null)},gre=R.memo(fre),pre=()=>{const e=R.useContext(Jn),{context:t,overlays:n}=e,[i,s]=R.useState(""),[o,r]=R.useState(0),[c,u]=R.useState(0),[h,f]=R.useState("0px"),[p,m]=R.useState("0px"),[w,S]=R.useState("100%"),[E,x]=R.useState("0px"),[P,M]=R.useState("0px"),[I,U]=R.useState("100%"),[z,W]=R.useState(!0),[_,F]=R.useState(!0),[k,O]=R.useState(null),[N,H]=R.useState(""),[V,ve]=R.useState(null),[pe,q]=R.useState("ag-layout-normal"),ie=R.useRef();ie.current||(ie.current=new rf(()=>se.current));const se=R.useRef(null),be=R.useRef(null),G=R.useRef(null),Z=R.useRef(null),le=R.useRef(null),te=R.useRef(null),me=R.useRef(null),Te=R.useRef([]),xe=R.useRef([]);Ha(" AG Grid Body ",se),Ha(" AG Pinned Top ",be),Ha(" AG Sticky Top ",G),Ha(" AG Middle ",te),Ha(" AG Pinned Bottom ",me);const st=R.useCallback(Mt=>{if(se.current=Mt,!Mt){Te.current=t.destroyBeans(Te.current),xe.current.forEach(qe=>qe()),xe.current=[];return}if(!t)return;const Kt=(qe,pt)=>{qe.appendChild(pt),xe.current.push(()=>qe.removeChild(pt))},Tn=qe=>{const pt=t.createBean(new qe);return Te.current.push(pt),pt},ci=(qe,pt,Dl)=>{Kt(qe,document.createComment(Dl)),Kt(qe,Tn(pt).getGui())};ci(Mt,Vq," AG Fake Horizontal Scroll ");const eo=n?.getOverlayWrapperCompClass();eo&&ci(Mt,eo," AG Overlay Wrapper "),le.current&&ci(le.current,Bq," AG Fake Vertical Scroll ");const _e={setRowAnimationCssOnBodyViewport:s,setColumnCount:qe=>{se.current&&G9(se.current,qe)},setRowCount:qe=>{se.current&&N9(se.current,qe)},setTopHeight:r,setBottomHeight:u,setStickyTopHeight:f,setStickyTopTop:m,setStickyTopWidth:S,setTopInvisible:W,setBottomInvisible:F,setColumnMovingCss:(qe,pt)=>ie.current.toggleCss(qe,pt),updateLayoutClasses:q,setAlwaysVerticalScrollClass:O,setPinnedTopBottomOverflowY:H,setCellSelectableCss:(qe,pt)=>ve(pt?qe:null),setBodyViewportWidth:qe=>{te.current&&(te.current.style.width=qe)},registerBodyViewportResizeListener:qe=>{if(te.current){const pt=$o(e,te.current,qe);xe.current.push(()=>pt())}},setStickyBottomHeight:x,setStickyBottomBottom:M,setStickyBottomWidth:U,setGridRootRole:qe=>Mt.setAttribute("role",qe)},Ke=t.createBean(new Lq);Te.current.push(Ke),Ke.setComp(_e,Mt,te.current,be.current,me.current,G.current,Z.current)},[]),et=R.useMemo(()=>Xi("ag-root","ag-unselectable",pe),[pe]),We=R.useMemo(()=>Xi("ag-body-viewport",i,pe,k,V),[i,pe,k,V]),zt=R.useMemo(()=>Xi("ag-body",pe),[pe]),gt=R.useMemo(()=>Xi("ag-floating-top",z?"ag-invisible":null,V),[V,z]),kt=R.useMemo(()=>Xi("ag-sticky-top",V),[V]),Zt=R.useMemo(()=>Xi("ag-sticky-bottom",E==="0px"?"ag-invisible":null,V),[V,E]),Fe=R.useMemo(()=>Xi("ag-floating-bottom",_?"ag-invisible":null,V),[V,_]),Ie=R.useMemo(()=>({height:o,minHeight:o,overflowY:N}),[o,N]),ut=R.useMemo(()=>({height:h,top:p,width:w}),[h,p,w]),ht=R.useMemo(()=>({height:E,bottom:P,width:I}),[E,P,I]),je=R.useMemo(()=>({height:c,minHeight:c,overflowY:N}),[c,N]),Et=Mt=>oe.createElement(gre,{name:Mt,key:`${Mt}-container`}),Lt=({section:Mt,children:Kt,className:Tn,style:ci})=>oe.createElement("div",{ref:Mt,className:Tn,role:"presentation",style:ci},Kt.map(Et));return oe.createElement("div",{ref:st,className:et},oe.createElement(tre,null),Lt({section:be,className:gt,style:Ie,children:["topLeft","topCenter","topRight","topFullWidth"]}),oe.createElement("div",{className:zt,ref:le,role:"presentation"},Lt({section:te,className:We,children:["left","center","right","fullWidth"]})),Lt({section:G,className:kt,style:ut,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Lt({section:Z,className:Zt,style:ht,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Lt({section:me,className:Fe,style:je,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},mre=R.memo(pre),Cre=(e,t)=>{const{children:n,eFocusableElement:i,onTabKeyDown:s,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:r,isEmpty:c}=e,{context:u}=R.useContext(Jn),h=R.useRef(null),f=R.useRef(null),p=R.useRef(),m=P=>{const M=P==null?void 0:parseInt(P,10).toString();[h,f].forEach(I=>{M===void 0?I.current?.removeAttribute("tabindex"):I.current?.setAttribute("tabindex",M)})};R.useImperativeHandle(t,()=>({forceFocusOutOfContainer(P){p.current?.forceFocusOutOfContainer(P)}}));const w=R.useCallback(()=>{const P=h.current,M=f.current;if(!P&&!M){p.current=u.destroyBean(p.current);return}if(P&&M){const I={setTabIndex:m};p.current=u.createBean(new oO({comp:I,eTopGuard:P,eBottomGuard:M,eFocusableElement:i,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:r,focusInnerElement:U=>o.focusInnerElement(U),isEmpty:c}))}},[]),S=R.useCallback(P=>{h.current=P,w()},[w]),E=R.useCallback(P=>{f.current=P,w()},[w]),x=P=>{const M=P==="top"?Yc.TAB_GUARD_TOP:Yc.TAB_GUARD_BOTTOM;return oe.createElement("div",{className:`${Yc.TAB_GUARD} ${M}`,role:"presentation",ref:P==="top"?S:E})};return oe.createElement(oe.Fragment,null,x("top"),n,x("bottom"))},vre=R.forwardRef(Cre),yre=R.memo(vre),wre=({context:e})=>{const[t,n]=R.useState(""),[i,s]=R.useState(""),[o,r]=R.useState(null),[c,u]=R.useState(null),[h,f]=R.useState(!1),[p,m]=R.useState(),w=R.useRef(),S=R.useRef(null),E=R.useRef(),[x,P]=R.useState(null),M=R.useRef(()=>{}),I=R.useRef(),U=R.useRef([]),z=R.useCallback(()=>{},[]),W=R.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);Ha(" AG Grid ",S);const _=R.useCallback(V=>{if(S.current=V,w.current=V?e.createBean(new zK):e.destroyBean(w.current),!V||e.isDestroyed())return;const ve=w.current;M.current=ve.focusInnerElement.bind(ve);const pe={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:q=>{if(!q&&I.current?.isDisplayed()){I.current.forceFocusOutOfContainer(q);return}E.current?.forceFocusOutOfContainer(q)},updateLayoutClasses:s,getFocusableContainers:()=>{const q=[],ie=S.current?.querySelector(".ag-root");return ie&&q.push({getGui:()=>ie}),U.current.forEach(se=>{se.isDisplayed()&&q.push(se)}),q},setCursor:r,setUserSelect:u};ve.setComp(pe,V,V),f(!0)},[]);R.useEffect(()=>{const V=w.current,ve=S.current;if(!p||!W||!V||!x||!ve||e.isDestroyed())return;const pe=[],{watermarkSelector:q,paginationSelector:ie,sideBarSelector:se,statusBarSelector:be,gridHeaderDropZonesSelector:G}=V.getOptionalSelectors(),Z=[];if(G){const te=e.createBean(new G.component),me=te.getGui();ve.insertAdjacentElement("afterbegin",me),Z.push(me),pe.push(te)}if(se){const te=e.createBean(new se.component),me=te.getGui(),Te=x.querySelector(".ag-tab-guard-bottom");Te&&(Te.insertAdjacentElement("beforebegin",me),Z.push(me)),pe.push(te),U.current.push(te)}const le=te=>{const me=e.createBean(new te),Te=me.getGui();return ve.insertAdjacentElement("beforeend",Te),Z.push(Te),pe.push(me),me};if(be&&le(be.component),ie){const te=le(ie.component);I.current=te,U.current.push(te)}return q&&le(q.component),()=>{e.destroyBeans(pe),Z.forEach(te=>{te.parentElement?.removeChild(te)})}},[p,x,W]);const F=R.useMemo(()=>Xi("ag-root-wrapper",t,i),[t,i]),k=R.useMemo(()=>Xi("ag-root-wrapper-body","ag-focus-managed",i),[i]),O=R.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:o??""}),[c,o]),N=R.useCallback(V=>{E.current=V,m(V!==null)},[]),H=R.useCallback(()=>!w.current?.isFocusable(),[]);return oe.createElement("div",{ref:_,className:F,style:O,role:"presentation"},oe.createElement("div",{className:k,ref:P,role:"presentation"},h&&x&&W&&oe.createElement(Jn.Provider,{value:W},oe.createElement(yre,{ref:N,eFocusableElement:x,onTabKeyDown:z,gridCtrl:w.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:H},oe.createElement(mre,null)))))},Sre=R.memo(wre),bre=class extends re{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},RV={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Rre={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...RV},EV=new Set(Object.keys(Rre)),Ere=new Set(Object.keys(RV)),TV=e=>{const t=R.useRef(),n=R.useRef(null),i=R.useRef(null),s=R.useRef([]),o=R.useRef([]),r=R.useRef(e),c=R.useRef(),u=R.useRef(),h=R.useRef(!1),[f,p]=R.useState(void 0),[,m]=R.useState(0),w=R.useCallback(P=>{if(n.current=P,!P){s.current.forEach(N=>N()),s.current.length=0;return}const M=e.modules||[];i.current||(i.current=new Uoe(()=>m(N=>N+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),s.current.push(()=>{i.current?.destroy(),i.current=null}));const I=w7(e.gridOptions,e,Object.keys(e).filter(N=>!EV.has(N))),U=()=>{if(h.current){const N=()=>c.current?.shouldQueueUpdates()?void 0:o.current.shift();let H=N();for(;H;)H(),H=N()}},z=new Are(U);c.current=z;const W=new bre,_={providedBeanInstances:{frameworkCompWrapper:new xre(i.current,I),renderStatus:W},modules:M,frameworkOverrides:z,setThemeOnGridDiv:!0},F=N=>{p(N),N.createBean(W),s.current.push(()=>{N.destroy()}),N.getBean("ctrlsSvc").whenReady({addDestroyFunc:H=>{s.current.push(H)}},()=>{if(N.isDestroyed())return;const H=t.current;H&&e.passGridApi?.(H)})},k=N=>{N.getBean("ctrlsSvc").whenReady({addDestroyFunc:H=>{s.current.push(H)}},()=>{o.current.forEach(H=>H()),o.current.length=0,h.current=!0})},O=new qJ;I.gridId??(I.gridId=u.current),t.current=O.create(P,I,F,k,_),s.current.push(()=>{t.current=void 0}),t.current&&(u.current=t.current.getGridId())},[]),S=R.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),E=R.useCallback(P=>{h.current&&!c.current?.shouldQueueUpdates()?P():o.current.push(P)},[]);R.useEffect(()=>{const P=Tre(r.current,e);r.current=e,E(()=>{t.current&&S7(P,t.current)})},[e]);const x=!oe.useSyncExternalStore||fp(e,"renderingMode")==="legacy"?"legacy":"default";return oe.createElement("div",{style:S,className:e.className,ref:w},oe.createElement(mV.Provider,{value:x},f&&!f.isDestroyed()?oe.createElement(Sre,{context:f}):null,i.current?.getPortals()??null))};function Tre(e,t){const n={};return Object.keys(t).forEach(i=>{if(EV.has(i)){Ere.has(i)&&ge(274,{prop:i});return}const s=t[i];e[i]!==s&&(n[i]=s)}),n}var xre=class extends XJ{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const n=this.gridOptions;if(fp(n,"reactiveCustomComponents")){const r=(c=>{switch(c){case"filter":return fp(n,"enableFilterHandlers")?Ioe:Moe;case"floatingFilterComponent":return fp(n,"enableFilterHandlers")?Loe:koe;case"dateComponent":return Foe;case"dragAndDropImageComponent":return Poe;case"loadingOverlayComponent":return Voe;case"noRowsOverlayComponent":return Boe;case"statusPanel":return Goe;case"toolPanel":return Hoe;case"menuItem":return Noe;case"cellRenderer":return Aoe;case"innerHeaderComponent":return Ooe}})(t.name);if(r)return new r(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":wE();break}const s=!t.cellRenderer&&t.name!=="toolPanel";return new wV(e,this.parent,t,s)}},Dre=R.forwardRef((e,t)=>{const n=R.useContext(Jn),{registry:i,context:s,gos:o,rowModel:r}=n,[c,u]=R.useState(()=>new ts),[h,f]=R.useState(()=>new ts),[p,m]=R.useState(),[w,S]=R.useState(),E=R.useRef(),x=R.useRef(null),P=R.useRef(),M=R.useMemo(()=>H8(e.api.getGridId(),p?.rowModelType??"clientSide"),[e]),I=R.useMemo(()=>c.toString()+" ag-details-row",[c]),U=R.useMemo(()=>h.toString()+" ag-details-grid",[h]);t&&R.useImperativeHandle(t,()=>({refresh(){return E.current?.refresh()??!1}})),e.template&&ge(230);const z=R.useCallback(_=>{if(x.current=_,!_){E.current=s.destroyBean(E.current),P.current?.();return}const F={toggleCss:(O,N)=>u(H=>H.setClass(O,N)),toggleDetailGridCss:(O,N)=>f(H=>H.setClass(O,N)),setDetailGrid:O=>m(O),setRowData:O=>S(O),getGui:()=>x.current},k=i.createDynamicBean("detailCellRendererCtrl",!0);if(k&&(s.createBean(k),k.init(F,e),E.current=k,o.get("detailRowAutoHeight"))){const O=()=>{if(x.current==null)return;const N=x.current.clientHeight;N!=null&&N>0&&setTimeout(()=>{e.node.setRowHeight(N),(gn(o)||bl(o))&&r.onRowHeightChanged()},0)};P.current=$o(n,_,O),O()}},[]),W=R.useCallback(_=>{E.current?.registerDetailWithMaster(_)},[]);return oe.createElement("div",{className:I,ref:z},p&&oe.createElement(TV,{className:U,...p,modules:M,rowData:w,passGridApi:W}))}),Are=class extends rO{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:NP,agGroupRowRenderer:NP,agDetailCellRenderer:Dre},this.wrapIncoming=(t,n)=>n==="ensureVisible"?boe(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Soe()}},Fre=class extends R.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return oe.createElement(TV,{...this.props,passGridApi:this.setGridApi})}};const Pre=({deportista:e,onEdit:t,onDelete:n})=>D.jsxs(ri,{className:"mb-3 shadow-sm",children:[D.jsxs(ri.Body,{children:[D.jsxs("div",{className:"d-flex align-items-center mb-3",children:[D.jsx("i",{className:"bi bi-person-circle fs-2 me-3"}),D.jsxs(ri.Title,{className:"mb-0",children:[e.nombre," ",e.apellido]})]}),D.jsxs(mi,{className:"mb-2",children:[D.jsxs(bt,{children:[D.jsx("strong",{children:"Edad:"})," ",e.edad]}),D.jsxs(bt,{children:[D.jsx("strong",{children:"Peso (kg):"})," ",e.peso]})]}),D.jsxs(mi,{children:[D.jsxs(bt,{children:[D.jsx("strong",{children:"Categora:"})," ",D.jsx("br",{}),D.jsx(al,{bg:"info",children:e.categoria})]}),D.jsxs(bt,{children:[D.jsx("strong",{children:"Seniority:"})," ",D.jsx("br",{}),D.jsx(al,{bg:"success",children:e.seniority})]})]})]}),D.jsxs(ri.Footer,{className:"d-flex justify-content-end bg-light",children:[D.jsxs(Rn,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>t(e),children:[D.jsx("i",{className:"bi bi-pencil-square"})," Editar"]}),D.jsxs(Rn,{variant:"outline-danger",size:"sm",onClick:()=>n(e),children:[D.jsx("i",{className:"bi bi-trash"})," Eliminar"]})]})]}),Mre=()=>{const{deportistas:e,setCurrentDeportista:t,academia:n}=qb(),{setShowModal:i,setShowConfirmDelete:s,setEditMode:o,setDeportistas:r}=Qr(),[c,u]=R.useState(""),[h,f]=R.useState(!0),[p,m]=R.useState(null),[w,S]=R.useState(window.innerWidth<768),E=R.useMemo(()=>({width:"100%",height:"500px"}),[]),x=R.useMemo(()=>({height:"100%",width:"100%"}),[]),[P]=R.useState([{headerName:"Nombre",field:"nombre",filter:!0,floatingFilter:!0,minWidth:150},{headerName:"Apellido",field:"apellido",filter:!0,floatingFilter:!0,minWidth:150},{headerName:"Edad",field:"edad",filter:"agNumberColumnFilter",minWidth:100},{headerName:"Peso (kg)",field:"peso",filter:"agNumberColumnFilter",minWidth:120},{headerName:"Categora",field:"categoria",filter:!0,floatingFilter:!0,minWidth:200},{headerName:"Seniority",field:"seniority",filter:!0,floatingFilter:!0,minWidth:150},{headerName:"Acciones",cellRenderer:W=>{const{data:_}=W;return D.jsxs("div",{className:"d-flex justify-content-center align-items-center h-100",children:[D.jsx(Rn,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>{t(_.id),o(!0),i(!0)},children:D.jsx("i",{className:"bi bi-pencil-square"})}),D.jsx(Rn,{variant:"outline-danger",size:"sm",onClick:()=>{t(_.id),s(!0)},children:D.jsx("i",{className:"bi bi-trash-fill"})})]})},minWidth:120,cellStyle:{textAlign:"center"}}]),M=R.useMemo(()=>({sortable:!0,suppressMovable:!0}),[]),I=W=>{m(W.api)};R.useEffect(()=>{if(!p)return;const W=()=>{p&&window.innerWidth>1270&&p.sizeColumnsToFit(),S(window.innerWidth<768)};return W(),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[p]),R.useEffect(()=>{n?(async()=>{f(!0);const _=await v9(n);r(_),f(!1)})():f(!1)},[n,r]);const U=W=>{t(W.id),o(!0),i(!0)},z=W=>{t(W.id),s(!0)};return h?D.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"500px"},children:D.jsx(Fm,{animation:"border",variant:"dark",style:{width:40,height:40}})}):D.jsxs("div",{style:E,children:[D.jsxs(mi,{className:"mb-3",children:[D.jsx(bt,{xs:9,children:D.jsx(we.Group,{children:D.jsxs(Dr,{children:[D.jsx(Dr.Text,{children:D.jsx("i",{className:"bi bi-search"})}),D.jsx(we.Control,{type:"text",placeholder:"Bsqueda rpida...",value:c,onChange:W=>u(W.target.value)})]})})}),D.jsx(bt,{xs:3,className:"d-flex justify-content-md-end",children:D.jsx(Rn,{variant:"success",className:"w-100 w-md-auto",onClick:()=>{t(""),o(!1),i(!0)},children:w?D.jsx("i",{className:"bi bi-plus-circle"}):D.jsxs(D.Fragment,{children:[D.jsx("i",{className:"bi bi-plus-circle me-2"}),"Aadir Deportista"]})})})]}),w?D.jsxs("div",{children:[e.length===0&&D.jsx("div",{className:"d-flex justify-content-center align-items-center mt-3",children:D.jsxs(hM,{variant:"warning mt-3",children:[D.jsx("i",{className:"bi bi-exclamation-triangle-fill"}),"No hay deportistas registrados en esta academia."]})}),e.filter(W=>{const _=c.toLowerCase();return W.nombre.toLowerCase().includes(_)||W.apellido.toLowerCase().includes(_)||W.categoria.toLowerCase().includes(_)||W.seniority.toLowerCase().includes(_)}).map(W=>D.jsx(Pre,{deportista:W,onEdit:U,onDelete:z},W.id))]}):D.jsx("div",{style:x,children:D.jsx(Fre,{rowData:e,columnDefs:P,defaultColDef:M,pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,25,50],quickFilterText:c,domLayout:"autoHeight",theme:PO,onGridReady:I})})]})},Ire=()=>{const{showConfirmDelete:e,setShowConfirmDelete:t,deportistas:n,currentDeportista:i,setDeportistas:s}=Qr(),[o,r]=R.useState(!1),c=()=>{t(!1)},u=async()=>{try{r(!0),await y9(i),s(n.filter(h=>h.id!=i))}catch(h){console.error(h),Rt.error("Error al eliminar el estudiante")}finally{t(!1),r(!1)}};return D.jsxs(pi,{show:e,onHide:c,backdrop:"static",contentClassName:"border-0 shadow-lg rounded-4",children:[D.jsx(pi.Header,{className:"bg-danger bg-gradient text-white border-0 rounded-top-4",children:D.jsxs("div",{className:"d-flex align-items-center w-100",children:[D.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-2 me-3"}),D.jsxs("div",{children:[D.jsx(pi.Title,{className:"fs-4 fw-bold mb-0",children:"Confirmar eliminacin"}),D.jsx("div",{className:"small text-white-50",children:"Esta accin no se puede deshacer"})]})]})}),o?D.jsxs(D.Fragment,{children:[D.jsx(pi.Body,{className:"py-5 d-flex justify-content-center align-items-center",children:D.jsx(Fm,{animation:"border",variant:"danger",style:{width:48,height:48}})}),D.jsx(pi.Footer,{className:"border-0 d-flex justify-content-center gap-2 pb-4"})]}):D.jsxs(D.Fragment,{children:[D.jsx(pi.Body,{className:"py-4",children:D.jsx(mi,{className:"justify-content-center",children:D.jsxs(bt,{xs:12,className:"text-center",children:[D.jsx("i",{className:"bi bi-person-x-fill text-danger fs-1 mb-3"}),D.jsx("h5",{className:"fw-semibold mb-3",children:"Est seguro de que desea eliminar este deportista?"}),D.jsxs("p",{className:"text-secondary mb-0",children:["Esta accin eliminar permanentemente el registro del deportista seleccionado:"," ",D.jsxs("span",{className:"fw-bold d-block mt-3",children:[n.find(h=>h.id===i)?.nombre," ",n.find(h=>h.id===i)?.apellido]})]})]})})}),D.jsxs(pi.Footer,{className:"border-0 d-flex justify-content-center gap-2 pb-4",children:[D.jsxs(Rn,{variant:"outline-secondary",onClick:c,className:"px-4 rounded-pill",children:[D.jsx("i",{className:"bi bi-x-circle me-2"}),"Cancelar"]}),D.jsxs(Rn,{variant:"danger",onClick:u,className:"px-4 rounded-pill",children:[D.jsx("i",{className:"bi bi-trash-fill me-2"}),"Eliminar"]})]})]})]})},UP=async e=>{localStorage.setItem("academia",e),localStorage.setItem("isLoggedIn","true")},_re=()=>{localStorage.removeItem("academia"),localStorage.removeItem("isLoggedIn")},kre=()=>localStorage.getItem("isLoggedIn")==="true",Lre=()=>localStorage.getItem("academia"),Ore=(e=768)=>{const[t,n]=R.useState(window.innerWidth<e);return R.useEffect(()=>{const i=()=>{n(window.innerWidth<e)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e]),t},Vre=()=>{const{addDeportista:e,currentDeportista:t,deportistas:n,editDeportista:i,academia:s}=qb(),{seniority:o,category:r,rank:c}=RI(),{setShowModal:u,editMode:h}=Qr(),[f,p]=R.useState(1),[m,w]=R.useState(t?n.find(V=>V.id==t):{nombre:"",apellido:"",edad:0,peso:0,sexo:"M",combates:0,academia:s,telefono_deportista:"",email_deportista:"",acudiente:"",telefono_acudiente:""}),[S,E]=R.useState(!1),[x,P]=R.useState(!1),[M,I]=R.useState(!1),[U,z]=R.useState(!1);R.useEffect(()=>{E(m.edad>=18)},[m.edad]),R.useEffect(()=>{m.edad&&m.peso&&m.sexo&&c(m.edad,parseFloat(m.peso),m.combates,m.sexo)},[m.edad,m.peso,m.combates,m.sexo,c]),R.useEffect(()=>{t&&w(n.find(V=>V.id==t))},[t,n]),R.useEffect(()=>{const{nombre:V,apellido:ve,edad:pe,peso:q,combates:ie,telefono_deportista:se,email_deportista:be,acudiente:G,telefono_acudiente:Z}=m,le=V.trim()!==""&&ve.trim()!==""&&pe>0;P(le);const te=parseFloat(q)>0&&ie>=0;I(te);const me=/^\d{3} \d{3} \d{4}$/,Te=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(pe>=18){const xe=me.test(se),st=Te.test(be);z(xe||st)}else{const xe=(G?.trim()??"")!=="",st=me.test(Z);z(xe&&st)}},[m]);const W=V=>{const{name:ve,value:pe}=V.target;if(ve==="telefono_deportista"||ve==="telefono_acudiente"){const q=pe.replace(/[^\d]/g,"");let ie="";q.length>0&&(q.length>6?ie=`${q.substring(0,3)} ${q.substring(3,6)} ${q.substring(6,10)}`:q.length>3?ie=`${q.substring(0,3)} ${q.substring(3,6)}`:ie=q),w(se=>({...se,[ve]:ie.trim()}));return}if(ve==="peso"){(pe===""||/^\d*\.?\d*$/.test(pe))&&w(q=>({...q,[ve]:pe}));return}w(q=>({...q,[ve]:pe}))},_=()=>{const V={...m};V.edad>=18?(V.acudiente="",V.telefono_acudiente=""):(V.telefono_deportista="",V.email_deportista="");const ve={id:t||gk(),...V,nombre:V.nombre.toUpperCase(),apellido:V.apellido.toUpperCase(),peso:parseFloat(m.peso)||0,categoria:r,seniority:o};h?(i(ve),fk(ve)):(e(ve),hk(ve)),u(!1)},F=()=>{f===1&&x?p(2):f===2&&M&&p(3)},k=()=>{p(f-1)},O=3,N=Math.round(f/O*100),H=()=>{switch(f){case 1:return D.jsxs(bn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:[D.jsx("h4",{className:"fw-bold",children:"Datos bsicos"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(we.Group,{className:"mb-3",controlId:"formNombre",children:[D.jsx(we.Label,{children:"Nombre"}),D.jsx(we.Control,{type:"text",name:"nombre",value:m.nombre,onChange:W,placeholder:"Nombre del deportista"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formApellido",children:[D.jsx(we.Label,{children:"Apellido"}),D.jsx(we.Control,{type:"text",name:"apellido",value:m.apellido,onChange:W,placeholder:"Apellido del deportista"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formEdad",children:[D.jsx(we.Label,{children:"Edad"}),D.jsx(we.Control,{type:"number",name:"edad",value:m.edad===0?"":m.edad,onChange:W,placeholder:"Edad",min:"0",max:"100"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formSexo",children:[D.jsx(we.Label,{children:"Sexo"}),D.jsxs(we.Select,{name:"sexo",value:m.sexo,onChange:W,children:[D.jsx("option",{value:"M",children:"MASCULINO"}),D.jsx("option",{value:"F",children:"FEMENINO"})]})]})]});case 2:return D.jsxs(bn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:[D.jsx("h4",{className:"fw-bold",children:"Datos tcnicos"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(we.Group,{className:"mb-3",controlId:"formPeso",children:[D.jsx(we.Label,{children:"Peso (kg)"}),D.jsx(we.Control,{type:"text",name:"peso",value:m.peso,onChange:W,placeholder:"e.g. 65.50"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formCombates",children:[D.jsx(we.Label,{children:"Combates"}),D.jsx(we.Control,{type:"number",name:"combates",value:m.combates===0?"":m.combates,onChange:W,placeholder:"N de combates",min:"0"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formAcademia",children:[D.jsx(we.Label,{children:"Academia"}),D.jsx(we.Control,{readOnly:!0,disabled:!0,type:"text",name:"academia",value:m.academia})]}),D.jsxs(mi,{className:"text-center mt-4",children:[D.jsx(bt,{children:D.jsx(Fo,{children:o&&D.jsxs(bn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[D.jsx("span",{className:"text-uppercase fw-bold small",children:"Nivel"}),D.jsx("div",{className:"mt-1",children:D.jsx(al,{bg:"success",className:"fs-6 px-3 py-2 shadow-sm",children:o})})]})})}),D.jsx(bt,{children:D.jsx(Fo,{children:r&&D.jsxs(bn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,delay:.1},children:[D.jsx("span",{className:"text-uppercase fw-bold small",children:"Categora"}),D.jsx("div",{className:"mt-1",children:D.jsx(al,{bg:"info",text:"dark",className:"fs-6 px-3 py-2 shadow-sm",children:r})})]})})})]})]});case 3:return D.jsx(bn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:S?D.jsxs("div",{children:[D.jsx("h4",{className:"fw-bold",children:"Datos de Contacto del Deportista"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(we.Group,{className:"mb-3",controlId:"formTelefonoDeportista",children:[D.jsx(we.Label,{children:"Telfono"}),D.jsx(we.Control,{type:"tel",name:"telefono_deportista",value:m.telefono_deportista,onChange:W,placeholder:"xxx xxx xxxx"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formEmailDeportista",children:[D.jsx(we.Label,{children:"Email"}),D.jsx(we.Control,{type:"email",name:"email_deportista",value:m.email_deportista,onChange:W,placeholder:"correo@ejemplo.com"})]})]}):D.jsxs("div",{children:[D.jsx("h4",{className:"fw-bold",children:"Datos del Acudiente"}),D.jsx("hr",{className:"mt-0 mb-4"}),D.jsxs(we.Group,{className:"mb-3",controlId:"formAcudiente",children:[D.jsx(we.Label,{children:"Nombre del acudiente"}),D.jsx(we.Control,{type:"text",name:"acudiente",value:m.acudiente,onChange:W,placeholder:"Nombre completo del acudiente"})]}),D.jsxs(we.Group,{className:"mb-3",controlId:"formTelefonoAcudiente",children:[D.jsx(we.Label,{children:"Telfono del acudiente"}),D.jsx(we.Control,{type:"tel",name:"telefono_acudiente",value:m.telefono_acudiente,onChange:W,placeholder:"xxx xxx xxxx"})]})]})});default:return null}};return D.jsxs(ri,{className:"shadow-lg border-0",style:{borderRadius:"1rem",overflow:"hidden"},children:[D.jsx(ri.Header,{className:"p-4 bg-dark text-white text-center",children:D.jsx("h3",{className:"fw-bold mb-0",children:"Inscripcin del Deportista"})}),D.jsxs(ri.Body,{className:"p-4",style:{minHeight:"500px"},children:[D.jsx(WM,{now:N,label:`${f}/${O}`,className:"mb-4",animated:!0}),D.jsx(we,{onSubmit:V=>V.preventDefault(),children:D.jsx(Fo,{mode:"wait",children:H()})})]}),D.jsxs(ri.Footer,{className:"p-3 bg-light d-flex justify-content-between align-items-center",children:[D.jsx(Rn,{variant:"light",onClick:()=>u(!1),children:"Cancelar"}),D.jsxs("div",{className:"d-flex",children:[f>1&&D.jsx(Rn,{variant:"secondary",onClick:k,className:"me-2",children:"Anterior"}),f<O?D.jsx(Rn,{variant:"primary",onClick:F,disabled:f===1?!x:!M,children:"Siguiente"}):D.jsx(Rn,{variant:"success",onClick:_,disabled:!U,children:"Guardar"})]})]})]})},Nre=()=>{const{showModal:e,setShowModal:t,setIsLoggedIn:n,setAcademia:i,academia:s}=Qr(),o=Ore(),r=()=>{_re(),n(!1),i("")};return D.jsx(D.Fragment,{children:D.jsxs(RM,{id:"inscripcion-container",className:"py-4 border shadow rounded-4",children:[D.jsx(ri,{className:"mb-4 shadow-sm border-0",style:{background:"#000",color:"#fff"},children:D.jsx(ri.Body,{children:D.jsxs(mi,{className:"align-items-center",children:[!o&&D.jsx(bt,{xs:"auto",children:D.jsx("div",{style:{background:"#fff",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:D.jsx("i",{className:"bi bi-person-plus-fill",style:{fontSize:32,color:"#000"}})})}),D.jsxs(bt,{children:[D.jsx("h2",{className:"fw-bold mb-0",style:{color:"#fff",letterSpacing:1},children:o?s:`Bienvenido, ${s}`}),!o&&D.jsx("div",{className:"text-white",style:{fontSize:16},children:"Desde aqu puede administrar las inscripciones de sus deportistas."})]}),D.jsx(bt,{xs:"auto",children:D.jsxs(Rn,{variant:"danger",onClick:r,children:[D.jsx("i",{className:"bi bi-box-arrow-right me-2"}),"Cerrar Sesin"]})})]})})}),D.jsx(Mre,{}),D.jsx(pi,{show:e,onHide:()=>t(!1),size:o?"lg":"xl",backdrop:"static",children:D.jsx(pi.Body,{className:"p-0 bg-dark",children:o?D.jsx(Vre,{}):D.jsx(E9,{})})}),D.jsx(Ire,{})]})})},Bre="/grandprix4/assets/grandprix_transparente-BJvekBNz.webp",Gre=({show:e,onHide:t})=>D.jsxs(pi,{show:e,onHide:t,centered:!0,size:"lg",children:[D.jsx(pi.Header,{closeButton:!0,className:"bg-dark text-white",children:D.jsx(pi.Title,{className:"fw-bold d-flex align-items-center",children:"CLUSULA DE EXONERACIN CIVIL"})}),D.jsxs(pi.Body,{className:"py-4",children:[D.jsxs("p",{children:["Yo, en calidad de entrenador responsable, declaro que inscribo de forma libre y voluntaria a mis deportistas en el evento"," ",D.jsx("strong",{children:"GRAND PRIX 4"})," de la academia"," ",D.jsx("strong",{children:"NEI KING CENTER"}),", contando para ello con la autorizacin expresa de cada uno de los deportistas inscritos, o en su caso, de sus representantes legales, segn corresponda."]}),D.jsxs("p",{children:["Manifiesto que conozco y acepto plenamente el reglamento del torneo, as como la naturaleza del kickboxing como deporte de combate de contacto pleno, e igualmente he informado a los deportistas sobre los"," ",D.jsx("u",{children:"riesgos inherentes a su participacin"}),", incluyendo"," ",D.jsx("strong",{children:"lesiones temporales, permanentes o incluso la muerte"}),"."]}),D.jsxs("p",{children:["En tal sentido,"," ",D.jsx("strong",{children:"exonero de toda responsabilidad legal, civil o penal"})," a los organizadores del evento (personas naturales o jurdicas), por cualquier accidente, lesin, dao, contagio o suceso fortuito que pudiera afectar a los deportistas inscritos bajo mi representacin, a terceros o a m mismo, durante el desarrollo de la competencia."]}),D.jsxs("p",{children:["Reconozco que la participacin de mis dirigidos es de carcter estrictamente deportivo y que esta inscripcin"," ",D.jsx("u",{children:"no implica obligacin ni garanta alguna"})," por parte de la organizacin respecto a la integridad fsica de los participantes, ms all de las condiciones razonables de seguridad provistas por el evento."]})]}),D.jsx(pi.Footer,{className:"border-top-0",children:D.jsxs(Rn,{variant:"primary",onClick:t,children:[D.jsx("i",{className:"bi bi-check-lg me-2"}),"Entendido"]})})]}),Hre=()=>D.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{background:"rgba(255, 255, 255, 0.7)",zIndex:10,borderRadius:"inherit"},children:D.jsx(Fm,{animation:"border",variant:"dark"})}),zre=()=>{const{setAcademia:e,setIsLoggedIn:t}=Qr(),[n,i]=oe.useState(""),[s,o]=oe.useState(!1),[r,c]=oe.useState(!1),[u,h]=oe.useState(!1),[f,p]=oe.useState(!1),[m,w]=oe.useState(""),[S,E]=oe.useState(!1),[x,P]=oe.useState(!1),[M,I]=oe.useState(""),U=n.trim()!==""&&M.trim()!==""&&x,z=async _=>{_.preventDefault(),o(!0);const F=await m9(n);if(F){const k=F.nombre;e(k),t(!0),await UP(k)}else c(!0);o(!1)},W=async _=>{if(_.preventDefault(),!!U){o(!0);try{await C9(M,n),w(M),p(!0)}catch(F){console.error(F),Rt.error("Ocurri un error al registrar la academia")}finally{o(!1)}}};return oe.useEffect(()=>{if(f&&m){const _=setTimeout(async()=>{e(m),t(!0),await UP(m)},2e3);return()=>clearTimeout(_)}},[f,m,e,t]),f?D.jsx(bn.div,{className:"d-flex align-items-center justify-content-center min-vh-100 p-3",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{background:"rgba(255, 255, 255, 0.9)"},children:D.jsx(ri,{className:"text-center shadow-lg border-success w-100",style:{borderWidth:"2px",maxWidth:"400px"},children:D.jsxs(ri.Body,{className:"p-5",children:[D.jsx(bn.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20},children:D.jsx("i",{className:"bi bi-check-circle-fill text-success",style:{fontSize:"4rem"}})}),D.jsx("h4",{className:"mt-3 fw-bold text-dark",children:"Academia registrada!"}),D.jsx("p",{className:"mb-0 text-muted",children:"Redirigiendo al sistema de inscripciones..."})]})})}):D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"d-flex align-items-center justify-content-center min-vh-100 p-3",id:"login-container",children:D.jsxs(ri,{className:"shadow-lg border-0 w-100 position-relative",style:{maxWidth:600,background:"#fff"},children:[s&&D.jsx(Hre,{}),D.jsxs(ri.Body,{className:"p-4 p-sm-5",children:[D.jsxs("div",{className:"text-center mb-4",children:[D.jsx("img",{src:Bre,alt:"GrandPrix 4",style:{width:"55%"}}),D.jsx("h2",{className:"fw-bold mt-2 mb-0",style:{color:"#000"},children:"GrandPrix 4"}),D.jsx("h6",{className:"fw-bold mt-2 mb-0",style:{color:"#000"},children:"Sistema de inscripciones"}),D.jsx("hr",{}),D.jsx("div",{className:"text-muted mb-2",style:{fontSize:16},children:u?"Registrar academia":"Acceso exclusivo para entrenadores"}),D.jsx("hr",{})]}),u?D.jsx(bn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:D.jsxs(we,{onSubmit:W,children:[D.jsxs(we.Group,{className:"mb-4",children:[D.jsx(we.Label,{className:"fw-semibold",style:{color:"#000"},children:"Documento de identidad"}),D.jsxs(Dr,{children:[D.jsx(Dr.Text,{style:{background:"#fff",borderRight:0},children:D.jsx("i",{className:"bi bi-person-circle",style:{color:"#000"}})}),D.jsx(we.Control,{name:"dni",type:"text",placeholder:"Ej: 12345678",value:n,readOnly:!0})]})]}),D.jsxs(we.Group,{className:"mb-4",children:[D.jsx(we.Label,{className:"fw-semibold",style:{color:"#000"},children:"Nombre de la academia"}),D.jsxs(Dr,{children:[D.jsx(Dr.Text,{style:{background:"#fff",borderRight:0},children:D.jsx("i",{className:"bi bi-bank2",style:{color:"#000"}})}),D.jsx(we.Control,{name:"academia",type:"text",placeholder:"Nombre de la academia",onChange:_=>I(_.target.value)})]})]}),D.jsx(we.Group,{className:"mb-3",controlId:"clause-check",children:D.jsxs("div",{className:"form-check",children:[D.jsx("input",{className:"form-check-input",type:"checkbox",checked:x,onChange:_=>P(_.target.checked)}),D.jsxs("label",{className:"form-check-label",htmlFor:"clause-check",children:["He ledo y acepto la"," ",D.jsx("span",{className:"fw-bold text-primary",style:{cursor:"pointer",textDecoration:"underline"},onClick:_=>{_.stopPropagation(),_.preventDefault(),E(!0)},children:"clusula de exoneracin"}),"."]})]})}),D.jsx(Rn,{variant:"dark",type:"submit",className:"w-100",disabled:!U,children:"Registrar Academia"})]})}):D.jsx(we,{onSubmit:z,children:r?D.jsx(bn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:D.jsxs(hM,{variant:"warning",className:"d-flex align-items-start gap-3 shadow-sm border-0",style:{background:"#fffbe6"},children:[D.jsx("div",{className:"pt-1",children:D.jsx("i",{className:"bi bi-exclamation-triangle-fill",style:{fontSize:28,color:"#f0ad4e"}})}),D.jsxs("div",{className:"flex-grow-1",children:[D.jsx("div",{className:"fw-semibold mb-1",style:{color:"#b8860b",fontSize:16},children:"Documento no registrado"}),D.jsxs("div",{className:"mb-2",style:{fontSize:14,color:"#6c5c1a"},children:["El documento de identidad ",D.jsx("strong",{children:n})," no est registrado en el sistema. Por favor, haga clic en el siguiente botn para registrar su academia y asociarla con este documento de identidad."]}),D.jsxs(Rn,{variant:"success",className:"fw-semibold px-4 py-1",onClick:()=>h(!0),children:[D.jsx("i",{className:"bi bi-plus-circle me-2"}),"Registrar academia"]})]})]})}):D.jsxs(we.Group,{className:"mb-4",children:[D.jsxs(we.Label,{className:"fw-semibold",style:{color:"#000"},children:["Ingrese su documento de identidad",D.jsx("span",{className:"text-muted fw-light d-block",children:"(Sin puntos ni espacios)"})]}),D.jsxs(Dr,{children:[D.jsx(Dr.Text,{style:{background:"#fff",borderRight:0},children:D.jsx("i",{className:"bi bi-person-circle",style:{color:"#000"}})}),D.jsx(we.Control,{type:"text",placeholder:"Ej: 12345678",onChange:_=>i(_.target.value)}),D.jsx(Rn,{disabled:!n,variant:"dark",type:"submit",children:"Ingresar"})]})]})})]})]})}),D.jsx(Gre,{show:S,onHide:()=>E(!1)})]})},Ure={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},WP=({children:e})=>D.jsx(bn.div,{variants:Ure,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3,ease:"easeInOut"},children:e});W8.registerModules([woe]);function Wre(){const{isLoggedIn:e,setIsLoggedIn:t,setAcademia:n}=Qr();return R.useEffect(()=>{if(kre()){const s=Lre();t(!0),s&&n(s)}},[t,n]),D.jsxs(bn.div,{id:"app-container",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[D.jsx(Fo,{mode:"wait",children:e?D.jsx(WP,{children:D.jsx(Nre,{})},"inscripcion"):D.jsx(WP,{children:D.jsx(zre,{})},"login")}),D.jsx(B2,{position:"top-center"})]})}s2.createRoot(document.getElementById("root")).render(D.jsx(R.StrictMode,{children:D.jsx(Wre,{})}));
