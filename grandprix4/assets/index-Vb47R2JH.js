(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function vm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oy={exports:{}},Md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function zN(){if(Px)return Md;Px=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,s,o){var a=null;if(o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:e,type:i,key:a,ref:s!==void 0?s:null,props:o}}return Md.Fragment=t,Md.jsx=n,Md.jsxs=n,Md}var Mx;function UN(){return Mx||(Mx=1,oy.exports=zN()),oy.exports}var B=UN(),ry={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function WN(){if(Ix)return $e;Ix=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(H,ee,le){this.props=H,this.context=ee,this.refs=E,this.updater=le||w}T.prototype.isReactComponent={},T.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function F(){}F.prototype=T.prototype;function P(H,ee,le){this.props=H,this.context=ee,this.refs=E,this.updater=le||w}var M=P.prototype=new F;M.constructor=P,S(M,T.prototype),M.isPureReactComponent=!0;var U=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function I(H,ee,le,ne,me,Ee){return le=Ee.ref,{$$typeof:e,type:H,key:ee,ref:le!==void 0?le:null,props:Ee}}function A(H,ee){return I(H.type,ee,void 0,void 0,void 0,H.props)}function _(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function L(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(le){return ee[le]})}var O=/\/+/g;function G(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):ee.toString(36)}function N(){}function Re(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(N,N):(H.status="pending",H.then(function(ee){H.status==="pending"&&(H.status="fulfilled",H.value=ee)},function(ee){H.status==="pending"&&(H.status="rejected",H.reason=ee)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function pe(H,ee,le,ne,me){var Ee=typeof H;(Ee==="undefined"||Ee==="boolean")&&(H=null);var xe=!1;if(H===null)xe=!0;else switch(Ee){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(H.$$typeof){case e:case t:xe=!0;break;case f:return xe=H._init,pe(xe(H._payload),ee,le,ne,me)}}if(xe)return me=me(H),xe=ne===""?"."+G(H,0):ne,U(me)?(le="",xe!=null&&(le=xe.replace(O,"$&/")+"/"),pe(me,ee,le,"",function(We){return We})):me!=null&&(_(me)&&(me=A(me,le+(me.key==null||H&&H.key===me.key?"":(""+me.key).replace(O,"$&/")+"/")+xe)),ee.push(me)),1;xe=0;var ct=ne===""?".":ne+":";if(U(H))for(var et=0;et<H.length;et++)ne=H[et],Ee=ct+G(ne,et),xe+=pe(ne,ee,le,Ee,me);else if(et=m(H),typeof et=="function")for(H=et.call(H),et=0;!(ne=H.next()).done;)ne=ne.value,Ee=ct+G(ne,et++),xe+=pe(ne,ee,le,Ee,me);else if(Ee==="object"){if(typeof H.then=="function")return pe(Re(H),ee,le,ne,me);throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return xe}function K(H,ee,le){if(H==null)return H;var ne=[],me=0;return pe(H,ne,"","",function(Ee){return ee.call(le,Ee,me++)}),ne}function ie(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(le){(H._status===0||H._status===-1)&&(H._status=1,H._result=le)},function(le){(H._status===0||H._status===-1)&&(H._status=2,H._result=le)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var se=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function we(){}return $e.Children={map:K,forEach:function(H,ee,le){K(H,function(){ee.apply(this,arguments)},le)},count:function(H){var ee=0;return K(H,function(){ee++}),ee},toArray:function(H){return K(H,function(ee){return ee})||[]},only:function(H){if(!_(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},$e.Component=T,$e.Fragment=n,$e.Profiler=s,$e.PureComponent=P,$e.StrictMode=i,$e.Suspense=u,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,$e.__COMPILER_RUNTIME={__proto__:null,c:function(H){return z.H.useMemoCache(H)}},$e.cache=function(H){return function(){return H.apply(null,arguments)}},$e.cloneElement=function(H,ee,le){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ne=S({},H.props),me=H.key,Ee=void 0;if(ee!=null)for(xe in ee.ref!==void 0&&(Ee=void 0),ee.key!==void 0&&(me=""+ee.key),ee)!j.call(ee,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ee.ref===void 0||(ne[xe]=ee[xe]);var xe=arguments.length-2;if(xe===1)ne.children=le;else if(1<xe){for(var ct=Array(xe),et=0;et<xe;et++)ct[et]=arguments[et+2];ne.children=ct}return I(H.type,me,void 0,void 0,Ee,ne)},$e.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},$e.createElement=function(H,ee,le){var ne,me={},Ee=null;if(ee!=null)for(ne in ee.key!==void 0&&(Ee=""+ee.key),ee)j.call(ee,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(me[ne]=ee[ne]);var xe=arguments.length-2;if(xe===1)me.children=le;else if(1<xe){for(var ct=Array(xe),et=0;et<xe;et++)ct[et]=arguments[et+2];me.children=ct}if(H&&H.defaultProps)for(ne in xe=H.defaultProps,xe)me[ne]===void 0&&(me[ne]=xe[ne]);return I(H,Ee,void 0,void 0,null,me)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(H){return{$$typeof:c,render:H}},$e.isValidElement=_,$e.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:ie}},$e.memo=function(H,ee){return{$$typeof:h,type:H,compare:ee===void 0?null:ee}},$e.startTransition=function(H){var ee=z.T,le={};z.T=le;try{var ne=H(),me=z.S;me!==null&&me(le,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(we,se)}catch(Ee){se(Ee)}finally{z.T=ee}},$e.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},$e.use=function(H){return z.H.use(H)},$e.useActionState=function(H,ee,le){return z.H.useActionState(H,ee,le)},$e.useCallback=function(H,ee){return z.H.useCallback(H,ee)},$e.useContext=function(H){return z.H.useContext(H)},$e.useDebugValue=function(){},$e.useDeferredValue=function(H,ee){return z.H.useDeferredValue(H,ee)},$e.useEffect=function(H,ee,le){var ne=z.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(H,ee)},$e.useId=function(){return z.H.useId()},$e.useImperativeHandle=function(H,ee,le){return z.H.useImperativeHandle(H,ee,le)},$e.useInsertionEffect=function(H,ee){return z.H.useInsertionEffect(H,ee)},$e.useLayoutEffect=function(H,ee){return z.H.useLayoutEffect(H,ee)},$e.useMemo=function(H,ee){return z.H.useMemo(H,ee)},$e.useOptimistic=function(H,ee){return z.H.useOptimistic(H,ee)},$e.useReducer=function(H,ee,le){return z.H.useReducer(H,ee,le)},$e.useRef=function(H){return z.H.useRef(H)},$e.useState=function(H){return z.H.useState(H)},$e.useSyncExternalStore=function(H,ee,le){return z.H.useSyncExternalStore(H,ee,le)},$e.useTransition=function(){return z.H.useTransition()},$e.version="19.1.1",$e}var _x;function ib(){return _x||(_x=1,ry.exports=WN()),ry.exports}var R=ib();const ae=vm(R);var ay={exports:{}},Id={},ly={exports:{}},cy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function jN(){return kx||(kx=1,function(e){function t(K,ie){var se=K.length;K.push(ie);e:for(;0<se;){var we=se-1>>>1,H=K[we];if(0<s(H,ie))K[we]=ie,K[se]=H,se=we;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ie=K[0],se=K.pop();if(se!==ie){K[0]=se;e:for(var we=0,H=K.length,ee=H>>>1;we<ee;){var le=2*(we+1)-1,ne=K[le],me=le+1,Ee=K[me];if(0>s(ne,se))me<H&&0>s(Ee,ne)?(K[we]=Ee,K[me]=se,we=me):(K[we]=ne,K[le]=se,we=le);else if(me<H&&0>s(Ee,se))K[we]=Ee,K[me]=se,we=me;else break e}}return ie}function s(K,ie){var se=K.sortIndex-ie.sortIndex;return se!==0?se:K.id-ie.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var u=[],h=[],f=1,p=null,m=3,w=!1,S=!1,E=!1,T=!1,F=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function U(K){for(var ie=n(h);ie!==null;){if(ie.callback===null)i(h);else if(ie.startTime<=K)i(h),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(h)}}function z(K){if(E=!1,U(K),!S)if(n(u)!==null)S=!0,j||(j=!0,G());else{var ie=n(h);ie!==null&&pe(z,ie.startTime-K)}}var j=!1,I=-1,A=5,_=-1;function L(){return T?!0:!(e.unstable_now()-_<A)}function O(){if(T=!1,j){var K=e.unstable_now();_=K;var ie=!0;try{e:{S=!1,E&&(E=!1,P(I),I=-1),w=!0;var se=m;try{t:{for(U(K),p=n(u);p!==null&&!(p.expirationTime>K&&L());){var we=p.callback;if(typeof we=="function"){p.callback=null,m=p.priorityLevel;var H=we(p.expirationTime<=K);if(K=e.unstable_now(),typeof H=="function"){p.callback=H,U(K),ie=!0;break t}p===n(u)&&i(u),U(K)}else i(u);p=n(u)}if(p!==null)ie=!0;else{var ee=n(h);ee!==null&&pe(z,ee.startTime-K),ie=!1}}break e}finally{p=null,m=se,w=!1}ie=void 0}}finally{ie?G():j=!1}}}var G;if(typeof M=="function")G=function(){M(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Re=N.port2;N.port1.onmessage=O,G=function(){Re.postMessage(null)}}else G=function(){F(O,0)};function pe(K,ie){I=F(function(){K(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var se=m;m=ie;try{return K()}finally{m=se}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=m;m=K;try{return ie()}finally{m=se}},e.unstable_scheduleCallback=function(K,ie,se){var we=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?we+se:we):se=we,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=se+H,K={id:f++,callback:ie,priorityLevel:K,startTime:se,expirationTime:H,sortIndex:-1},se>we?(K.sortIndex=se,t(h,K),n(u)===null&&K===n(h)&&(E?(P(I),I=-1):E=!0,pe(z,se-we))):(K.sortIndex=H,t(u,K),S||w||(S=!0,j||(j=!0,G()))),K},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(K){var ie=m;return function(){var se=m;m=ie;try{return K.apply(this,arguments)}finally{m=se}}}}(cy)),cy}var Lx;function $N(){return Lx||(Lx=1,ly.exports=jN()),ly.exports}var uy={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function qN(){if(Ox)return jn;Ox=1;var e=ib();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(u,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:u,containerInfo:h,implementation:f}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jn.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(u,h,null,f)},jn.flushSync=function(u){var h=a.T,f=i.p;try{if(a.T=null,i.p=2,u)return u()}finally{a.T=h,i.p=f,i.d.f()}},jn.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},jn.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},jn.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:w}):f==="script"&&i.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},jn.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},jn.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin);i.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},jn.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},jn.requestFormReset=function(u){i.d.r(u)},jn.unstable_batchedUpdates=function(u,h){return u(h)},jn.useFormState=function(u,h,f){return a.H.useFormState(u,h,f)},jn.useFormStatus=function(){return a.H.useHostTransitionStatus()},jn.version="19.1.1",jn}var Vx;function zP(){if(Vx)return uy.exports;Vx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uy.exports=qN(),uy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function KN(){if(Nx)return Id;Nx=1;var e=$N(),t=ib(),n=zP();function i(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var l=r,d=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(d=l.return),r=l.return;while(r)}return l.tag===3?d:null}function a(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(o(r)!==r)throw Error(i(188))}function u(r){var l=r.alternate;if(!l){if(l=o(r),l===null)throw Error(i(188));return l!==r?null:r}for(var d=r,g=l;;){var v=d.return;if(v===null)break;var y=v.alternate;if(y===null){if(g=v.return,g!==null){d=g;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===d)return c(v),r;if(y===g)return c(v),l;y=y.sibling}throw Error(i(188))}if(d.return!==g.return)d=v,g=y;else{for(var D=!1,k=v.child;k;){if(k===d){D=!0,d=v,g=y;break}if(k===g){D=!0,g=v,d=y;break}k=k.sibling}if(!D){for(k=y.child;k;){if(k===d){D=!0,d=y,g=v;break}if(k===g){D=!0,g=y,d=v;break}k=k.sibling}if(!D)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?r:l}function h(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=h(r),l!==null)return l;r=r.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function Re(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case j:return"SuspenseList";case _:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case M:return(r.displayName||"Context")+".Provider";case P:return(r._context.displayName||"Context")+".Consumer";case U:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return l=r.displayName||null,l!==null?l:Re(r.type)||"Memo";case A:l=r._payload,r=r._init;try{return Re(r(l))}catch{}}return null}var pe=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},we=[],H=-1;function ee(r){return{current:r}}function le(r){0>H||(r.current=we[H],we[H]=null,H--)}function ne(r,l){H++,we[H]=r.current,r.current=l}var me=ee(null),Ee=ee(null),xe=ee(null),ct=ee(null);function et(r,l){switch(ne(xe,l),ne(Ee,r),ne(me,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?sx(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=sx(l),r=ox(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(me),ne(me,r)}function We(){le(me),le(Ee),le(xe)}function Ht(r){r.memoizedState!==null&&ne(ct,r);var l=me.current,d=ox(l,r.type);l!==d&&(ne(Ee,r),ne(me,d))}function gt(r){Ee.current===r&&(le(me),le(Ee)),ct.current===r&&(le(ct),xd._currentValue=se)}var _t=Object.prototype.hasOwnProperty,Xt=e.unstable_scheduleCallback,Ae=e.unstable_cancelCallback,Me=e.unstable_shouldYield,ut=e.unstable_requestPaint,ht=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,Rt=e.unstable_ImmediatePriority,kt=e.unstable_UserBlockingPriority,Pt=e.unstable_NormalPriority,qt=e.unstable_LowPriority,Rn=e.unstable_IdlePriority,ri=e.log,Zs=e.unstable_setDisableYieldValue,Ie=null,Ke=null;function qe(r){if(typeof ri=="function"&&Zs(r),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Ie,r)}catch{}}var pt=Math.clz32?Math.clz32:Zr,Tl=Math.log,aC=Math.LN2;function Zr(r){return r>>>=0,r===0?32:31-(Tl(r)/aC|0)|0}var Jr=256,ea=4194304;function ts(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function xl(r,l,d){var g=r.pendingLanes;if(g===0)return 0;var v=0,y=r.suspendedLanes,D=r.pingedLanes;r=r.warmLanes;var k=g&134217727;return k!==0?(g=k&~y,g!==0?v=ts(g):(D&=k,D!==0?v=ts(D):d||(d=k&~r,d!==0&&(v=ts(d))))):(k=g&~y,k!==0?v=ts(k):D!==0?v=ts(D):d||(d=g&~r,d!==0&&(v=ts(d)))),v===0?0:l!==0&&l!==v&&(l&y)===0&&(y=v&-v,d=l&-l,y>=d||y===32&&(d&4194048)!==0)?l:v}function ta(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function xu(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Du(){var r=Jr;return Jr<<=1,(Jr&4194048)===0&&(Jr=256),r}function Au(){var r=ea;return ea<<=1,(ea&62914560)===0&&(ea=4194304),r}function Js(r){for(var l=[],d=0;31>d;d++)l.push(r);return l}function eo(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Fu(r,l,d,g,v,y){var D=r.pendingLanes;r.pendingLanes=d,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=d,r.entangledLanes&=d,r.errorRecoveryDisabledLanes&=d,r.shellSuspendCounter=0;var k=r.entanglements,W=r.expirationTimes,X=r.hiddenUpdates;for(d=D&~d;0<d;){var ce=31-pt(d),he=1<<ce;k[ce]=0,W[ce]=-1;var J=X[ce];if(J!==null)for(X[ce]=null,ce=0;ce<J.length;ce++){var te=J[ce];te!==null&&(te.lane&=-536870913)}d&=~he}g!==0&&fs(r,g,0),y!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=y&~(D&~l))}function fs(r,l,d){r.pendingLanes|=l,r.suspendedLanes&=~l;var g=31-pt(l);r.entangledLanes|=l,r.entanglements[g]=r.entanglements[g]|1073741824|d&4194090}function Pu(r,l){var d=r.entangledLanes|=l;for(r=r.entanglements;d;){var g=31-pt(d),v=1<<g;v&l|r[g]&l&&(r[g]|=l),d&=~v}}function $o(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Dl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function qo(){var r=ie.p;return r!==0?r:(r=window.event,r===void 0?32:Ex(r.type))}function cf(r,l){var d=ie.p;try{return ie.p=r,l()}finally{ie.p=d}}var Nt=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Nt,ln="__reactProps$"+Nt,Pi="__reactContainer$"+Nt,Mu="__reactEvents$"+Nt,lC="__reactListeners$"+Nt,Ko="__reactHandles$"+Nt,uf="__reactResources$"+Nt,na="__reactMarker$"+Nt;function Yo(r){delete r[Cn],delete r[ln],delete r[Mu],delete r[lC],delete r[Ko]}function to(r){var l=r[Cn];if(l)return l;for(var d=r.parentNode;d;){if(l=d[Pi]||d[Cn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(r=cx(r);r!==null;){if(d=r[Cn])return d;r=cx(r)}return l}r=d,d=r.parentNode}return null}function gs(r){if(r=r[Cn]||r[Pi]){var l=r.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return r}return null}function ps(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(i(33))}function Zn(r){var l=r[uf];return l||(l=r[uf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Zt(r){r[na]=!0}var Iu=new Set,Al={};function ns(r,l){no(r,l),no(r+"Capture",l)}function no(r,l){for(Al[r]=l,r=0;r<l.length;r++)Iu.add(l[r])}var df=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hf={},ia={};function ff(r){return _t.call(ia,r)?!0:_t.call(hf,r)?!1:df.test(r)?ia[r]=!0:(hf[r]=!0,!1)}function Qo(r,l,d){if(ff(l))if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+d)}}function ms(r,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+d)}}function In(r,l,d,g){if(g===null)r.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(d);return}r.setAttributeNS(l,d,""+g)}}var sa,gf;function io(r){if(sa===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);sa=l&&l[1]||"",gf=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sa+r+gf}var Fl=!1;function Pl(r,l){if(!r||Fl)return"";Fl=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(te){var J=te}Reflect.construct(r,[],he)}else{try{he.call()}catch(te){J=te}r.call(he.prototype)}}else{try{throw Error()}catch(te){J=te}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=g.DetermineComponentFrameRoot(),D=y[0],k=y[1];if(D&&k){var W=D.split(`
`),X=k.split(`
`);for(v=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;if(g===W.length||v===X.length)for(g=W.length-1,v=X.length-1;1<=g&&0<=v&&W[g]!==X[v];)v--;for(;1<=g&&0<=v;g--,v--)if(W[g]!==X[v]){if(g!==1||v!==1)do if(g--,v--,0>v||W[g]!==X[v]){var ce=`
`+W[g].replace(" at new "," at ");return r.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",r.displayName)),ce}while(1<=g&&0<=v);break}}}finally{Fl=!1,Error.prepareStackTrace=d}return(d=r?r.displayName||r.name:"")?io(d):""}function _u(r){switch(r.tag){case 26:case 27:case 5:return io(r.type);case 16:return io("Lazy");case 13:return io("Suspense");case 19:return io("SuspenseList");case 0:case 15:return Pl(r.type,!1);case 11:return Pl(r.type.render,!1);case 1:return Pl(r.type,!0);case 31:return io("Activity");default:return""}}function Ml(r){try{var l="";do l+=_u(r),r=r.return;while(r);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Jn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ku(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function cC(r){var l=ku(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,l),g=""+r[l];if(!r.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,y=d.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return v.call(this)},set:function(D){g=""+D,y.call(this,D)}}),Object.defineProperty(r,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(D){g=""+D},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function Il(r){r._valueTracker||(r._valueTracker=cC(r))}function Lu(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return r&&(g=ku(r)?r.checked?"true":"false":r.value),r=g,r!==d?(l.setValue(r),!0):!1}function oa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var uC=/[\n"\\]/g;function cn(r){return r.replace(uC,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function mi(r,l,d,g,v,y,D,k){r.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.type=D:r.removeAttribute("type"),l!=null?D==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+Jn(l)):r.value!==""+Jn(l)&&(r.value=""+Jn(l)):D!=="submit"&&D!=="reset"||r.removeAttribute("value"),l!=null?Xo(r,D,Jn(l)):d!=null?Xo(r,D,Jn(d)):g!=null&&r.removeAttribute("value"),v==null&&y!=null&&(r.defaultChecked=!!y),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.name=""+Jn(k):r.removeAttribute("name")}function ra(r,l,d,g,v,y,D,k){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),l!=null||d!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;d=d!=null?""+Jn(d):"",l=l!=null?""+Jn(l):d,k||l===r.value||(r.value=l),r.defaultValue=l}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=k?r.checked:!!g,r.defaultChecked=!!g,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.name=D)}function Xo(r,l,d){l==="number"&&oa(r.ownerDocument)===r||r.defaultValue===""+d||(r.defaultValue=""+d)}function so(r,l,d,g){if(r=r.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<r.length;d++)v=l.hasOwnProperty("$"+r[d].value),r[d].selected!==v&&(r[d].selected=v),v&&g&&(r[d].defaultSelected=!0)}else{for(d=""+Jn(d),l=null,v=0;v<r.length;v++){if(r[v].value===d){r[v].selected=!0,g&&(r[v].defaultSelected=!0);return}l!==null||r[v].disabled||(l=r[v])}l!==null&&(l.selected=!0)}}function Et(r,l,d){if(l!=null&&(l=""+Jn(l),l!==r.value&&(r.value=l),d==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=d!=null?""+Jn(d):""}function aa(r,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(i(92));if(pe(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Jn(l),r.defaultValue=d,g=r.textContent,g===d&&g!==""&&g!==null&&(r.value=g)}function Mi(r,l){if(l){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=l;return}}r.textContent=l}var la=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pf(r,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":g?r.setProperty(l,d):typeof d!="number"||d===0||la.has(l)?l==="float"?r.cssFloat=d:r[l]=(""+d).trim():r[l]=d+"px"}function Ou(r,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(r=r.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var v in l)g=l[v],l.hasOwnProperty(v)&&d[v]!==g&&pf(r,v,g)}else for(var y in l)l.hasOwnProperty(y)&&pf(r,y,l[y])}function Vu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(r){return hC.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var oo=null;function Ii(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ro=null,ao=null;function Nu(r){var l=gs(r);if(l&&(r=l.stateNode)){var d=r[ln]||null;e:switch(r=l.stateNode,l.type){case"input":if(mi(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+cn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==r&&g.form===r.form){var v=g[ln]||null;if(!v)throw Error(i(90));mi(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===r.form&&Lu(g)}break e;case"textarea":Et(r,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&so(r,!!d.multiple,l,!1)}}}var Cs=!1;function mf(r,l,d){if(Cs)return r(l,d);Cs=!0;try{var g=r(l);return g}finally{if(Cs=!1,(ro!==null||ao!==null)&&(cg(),ro&&(l=ro,r=ao,ao=ro=null,Nu(l),r)))for(l=0;l<r.length;l++)Nu(r[l])}}function ca(r,l){var d=r.stateNode;if(d===null)return null;var g=d[ln]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=!1;if(is)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){_i=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{_i=!1}var vs=null,Zo=null,lo=null;function Bu(){if(lo)return lo;var r,l=Zo,d=l.length,g,v="value"in vs?vs.value:vs.textContent,y=v.length;for(r=0;r<d&&l[r]===v[r];r++);var D=d-r;for(g=1;g<=D&&l[d-g]===v[y-g];g++);return lo=v.slice(r,1<g?1-g:void 0)}function ys(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function ws(){return!0}function Gu(){return!1}function En(r){function l(d,g,v,y,D){this._reactName=d,this._targetInst=v,this.type=g,this.nativeEvent=y,this.target=D,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(d=r[k],this[k]=d?d(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ws:Gu,this.isPropagationStopped=Gu,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),l}var mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=En(mt),da=f({},mt,{view:0,detail:0}),Cf=En(da),Ll,Ol,Ss,ha=f({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ss&&(Ss&&r.type==="mousemove"?(Ll=r.screenX-Ss.screenX,Ol=r.screenY-Ss.screenY):Ol=Ll=0,Ss=r),Ll)},movementY:function(r){return"movementY"in r?r.movementY:Ol}}),ki=En(ha),vf=f({},ha,{dataTransfer:0}),fC=En(vf),fa=f({},da,{relatedTarget:0}),Vl=En(fa),Hu=f({},mt,{animationName:0,elapsedTime:0,pseudoElement:0}),Nl=En(Hu),yf=f({},mt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Bl=En(yf),gC=f({},mt,{data:0}),zu=En(gC),ga={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uu(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=Sf[r])?!!l[r]:!1}function pa(){return Uu}var bf=f({},da,{key:function(r){if(r.key){var l=ga[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=ys(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?wf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(r){return r.type==="keypress"?ys(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ys(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Gl=En(bf),Rf=f({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wu=En(Rf),co=f({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),Ef=En(co),Tf=f({},mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),xf=En(Tf),Df=f({},ha,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Hl=En(Df),ei=f({},mt,{newState:0,oldState:0}),Af=En(ei),Ff=[9,13,27,32],bs=is&&"CompositionEvent"in window,C=null;is&&"documentMode"in document&&(C=document.documentMode);var b=is&&"TextEvent"in window&&!C,x=is&&(!bs||C&&8<C&&11>=C),V=" ",Y=!1;function re(r,l){switch(r){case"keyup":return Ff.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var st=!1;function vn(r,l){switch(r){case"compositionend":return ve(l);case"keypress":return l.which!==32?null:(Y=!0,V);case"textInput":return r=l.data,r===V&&Y?null:r;default:return null}}function ot(r,l){if(st)return r==="compositionend"||!bs&&re(r,l)?(r=Bu(),lo=Zo=vs=null,st=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return x&&l.locale!=="ko"?null:l.data;default:return null}}var Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yn(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!Tn[r.type]:l==="textarea"}function uo(r,l,d,g){ro?ao?ao.push(g):ao=[g]:ro=g,l=pg(l,"onChange"),0<l.length&&(d=new kl("onChange","change",null,d,g),r.push({event:d,listeners:l}))}var _n=null,Rs=null;function ju(r){JT(r,0)}function Pf(r){var l=ps(r);if(Lu(l))return r}function wE(r,l){if(r==="change")return l}var SE=!1;if(is){var pC;if(is){var mC="oninput"in document;if(!mC){var bE=document.createElement("div");bE.setAttribute("oninput","return;"),mC=typeof bE.oninput=="function"}pC=mC}else pC=!1;SE=pC&&(!document.documentMode||9<document.documentMode)}function RE(){_n&&(_n.detachEvent("onpropertychange",EE),Rs=_n=null)}function EE(r){if(r.propertyName==="value"&&Pf(Rs)){var l=[];uo(l,Rs,r,Ii(r)),mf(ju,l)}}function vV(r,l,d){r==="focusin"?(RE(),_n=l,Rs=d,_n.attachEvent("onpropertychange",EE)):r==="focusout"&&RE()}function yV(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Pf(Rs)}function wV(r,l){if(r==="click")return Pf(l)}function SV(r,l){if(r==="input"||r==="change")return Pf(l)}function bV(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var Ci=typeof Object.is=="function"?Object.is:bV;function $u(r,l){if(Ci(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var d=Object.keys(r),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var v=d[g];if(!_t.call(l,v)||!Ci(r[v],l[v]))return!1}return!0}function TE(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xE(r,l){var d=TE(r);r=0;for(var g;d;){if(d.nodeType===3){if(g=r+d.textContent.length,r<=l&&g>=l)return{node:d,offset:l-r};r=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=TE(d)}}function DE(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?DE(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function AE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=oa(r.document);l instanceof r.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)r=l.contentWindow;else break;l=oa(r.document)}return l}function CC(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var RV=is&&"documentMode"in document&&11>=document.documentMode,zl=null,vC=null,qu=null,yC=!1;function FE(r,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yC||zl==null||zl!==oa(g)||(g=zl,"selectionStart"in g&&CC(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),qu&&$u(qu,g)||(qu=g,g=pg(vC,"onSelect"),0<g.length&&(l=new kl("onSelect","select",null,l,d),r.push({event:l,listeners:g}),l.target=zl)))}function ma(r,l){var d={};return d[r.toLowerCase()]=l.toLowerCase(),d["Webkit"+r]="webkit"+l,d["Moz"+r]="moz"+l,d}var Ul={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},wC={},PE={};is&&(PE=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Ca(r){if(wC[r])return wC[r];if(!Ul[r])return r;var l=Ul[r],d;for(d in l)if(l.hasOwnProperty(d)&&d in PE)return wC[r]=l[d];return r}var ME=Ca("animationend"),IE=Ca("animationiteration"),_E=Ca("animationstart"),EV=Ca("transitionrun"),TV=Ca("transitionstart"),xV=Ca("transitioncancel"),kE=Ca("transitionend"),LE=new Map,SC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");SC.push("scrollEnd");function ss(r,l){LE.set(r,l),ns(l,[r])}var OE=new WeakMap;function Li(r,l){if(typeof r=="object"&&r!==null){var d=OE.get(r);return d!==void 0?d:(l={value:r,source:l,stack:Ml(l)},OE.set(r,l),l)}return{value:r,source:l,stack:Ml(l)}}var Oi=[],Wl=0,bC=0;function Mf(){for(var r=Wl,l=bC=Wl=0;l<r;){var d=Oi[l];Oi[l++]=null;var g=Oi[l];Oi[l++]=null;var v=Oi[l];Oi[l++]=null;var y=Oi[l];if(Oi[l++]=null,g!==null&&v!==null){var D=g.pending;D===null?v.next=v:(v.next=D.next,D.next=v),g.pending=v}y!==0&&VE(d,v,y)}}function If(r,l,d,g){Oi[Wl++]=r,Oi[Wl++]=l,Oi[Wl++]=d,Oi[Wl++]=g,bC|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function RC(r,l,d,g){return If(r,l,d,g),_f(r)}function jl(r,l){return If(r,null,null,l),_f(r)}function VE(r,l,d){r.lanes|=d;var g=r.alternate;g!==null&&(g.lanes|=d);for(var v=!1,y=r.return;y!==null;)y.childLanes|=d,g=y.alternate,g!==null&&(g.childLanes|=d),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(v=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,v&&l!==null&&(v=31-pt(d),r=y.hiddenUpdates,g=r[v],g===null?r[v]=[l]:g.push(l),l.lane=d|536870912),y):null}function _f(r){if(50<vd)throw vd=0,Fv=null,Error(i(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var $l={};function DV(r,l,d,g){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(r,l,d,g){return new DV(r,l,d,g)}function EC(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ho(r,l){var d=r.alternate;return d===null?(d=vi(r.tag,l,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=l,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&65011712,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,l=r.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d.refCleanup=r.refCleanup,d}function NE(r,l){r.flags&=65011714;var d=r.alternate;return d===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=d.childLanes,r.lanes=d.lanes,r.child=d.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=d.memoizedProps,r.memoizedState=d.memoizedState,r.updateQueue=d.updateQueue,r.type=d.type,l=d.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function kf(r,l,d,g,v,y){var D=0;if(g=r,typeof r=="function")EC(r)&&(D=1);else if(typeof r=="string")D=FN(r,d,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case _:return r=vi(31,d,l,v),r.elementType=_,r.lanes=y,r;case S:return va(d.children,v,y,l);case E:D=8,v|=24;break;case T:return r=vi(12,d,l,v|2),r.elementType=T,r.lanes=y,r;case z:return r=vi(13,d,l,v),r.elementType=z,r.lanes=y,r;case j:return r=vi(19,d,l,v),r.elementType=j,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case F:case M:D=10;break e;case P:D=9;break e;case U:D=11;break e;case I:D=14;break e;case A:D=16,g=null;break e}D=29,d=Error(i(130,r===null?"null":typeof r,"")),g=null}return l=vi(D,d,l,v),l.elementType=r,l.type=g,l.lanes=y,l}function va(r,l,d,g){return r=vi(7,r,g,l),r.lanes=d,r}function TC(r,l,d){return r=vi(6,r,null,l),r.lanes=d,r}function xC(r,l,d){return l=vi(4,r.children!==null?r.children:[],r.key,l),l.lanes=d,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var ql=[],Kl=0,Lf=null,Of=0,Vi=[],Ni=0,ya=null,fo=1,go="";function wa(r,l){ql[Kl++]=Of,ql[Kl++]=Lf,Lf=r,Of=l}function BE(r,l,d){Vi[Ni++]=fo,Vi[Ni++]=go,Vi[Ni++]=ya,ya=r;var g=fo;r=go;var v=32-pt(g)-1;g&=~(1<<v),d+=1;var y=32-pt(l)+v;if(30<y){var D=v-v%5;y=(g&(1<<D)-1).toString(32),g>>=D,v-=D,fo=1<<32-pt(l)+v|d<<v|g,go=y+r}else fo=1<<y|d<<v|g,go=r}function DC(r){r.return!==null&&(wa(r,1),BE(r,1,0))}function AC(r){for(;r===Lf;)Lf=ql[--Kl],ql[Kl]=null,Of=ql[--Kl],ql[Kl]=null;for(;r===ya;)ya=Vi[--Ni],Vi[Ni]=null,go=Vi[--Ni],Vi[Ni]=null,fo=Vi[--Ni],Vi[Ni]=null}var ti=null,Kt=null,ft=!1,Sa=null,Es=!1,FC=Error(i(519));function ba(r){var l=Error(i(418,""));throw Qu(Li(l,r)),FC}function GE(r){var l=r.stateNode,d=r.type,g=r.memoizedProps;switch(l[Cn]=r,l[ln]=g,d){case"dialog":Je("cancel",l),Je("close",l);break;case"iframe":case"object":case"embed":Je("load",l);break;case"video":case"audio":for(d=0;d<wd.length;d++)Je(wd[d],l);break;case"source":Je("error",l);break;case"img":case"image":case"link":Je("error",l),Je("load",l);break;case"details":Je("toggle",l);break;case"input":Je("invalid",l),ra(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Il(l);break;case"select":Je("invalid",l);break;case"textarea":Je("invalid",l),aa(l,g.value,g.defaultValue,g.children),Il(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||ix(l.textContent,d)?(g.popover!=null&&(Je("beforetoggle",l),Je("toggle",l)),g.onScroll!=null&&Je("scroll",l),g.onScrollEnd!=null&&Je("scrollend",l),g.onClick!=null&&(l.onclick=mg),l=!0):l=!1,l||ba(r)}function HE(r){for(ti=r.return;ti;)switch(ti.tag){case 5:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:ti=ti.return}}function Ku(r){if(r!==ti)return!1;if(!ft)return HE(r),ft=!0,!1;var l=r.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=r.type,d=!(d!=="form"&&d!=="button")||jv(r.type,r.memoizedProps)),d=!d),d&&Kt&&ba(r),HE(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,l=0;r;){if(r.nodeType===8)if(d=r.data,d==="/$"){if(l===0){Kt=rs(r.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;r=r.nextSibling}Kt=null}}else l===27?(l=Kt,gr(r.type)?(r=Yv,Yv=null,Kt=r):Kt=l):Kt=ti?rs(r.stateNode.nextSibling):null;return!0}function Yu(){Kt=ti=null,ft=!1}function zE(){var r=Sa;return r!==null&&(ci===null?ci=r:ci.push.apply(ci,r),Sa=null),r}function Qu(r){Sa===null?Sa=[r]:Sa.push(r)}var PC=ee(null),Ra=null,po=null;function Jo(r,l,d){ne(PC,l._currentValue),l._currentValue=d}function mo(r){r._currentValue=PC.current,le(PC)}function MC(r,l,d){for(;r!==null;){var g=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),r===d)break;r=r.return}}function IC(r,l,d,g){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var y=v.dependencies;if(y!==null){var D=v.child;y=y.firstContext;e:for(;y!==null;){var k=y;y=v;for(var W=0;W<l.length;W++)if(k.context===l[W]){y.lanes|=d,k=y.alternate,k!==null&&(k.lanes|=d),MC(y.return,d,r),g||(D=null);break e}y=k.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(i(341));D.lanes|=d,y=D.alternate,y!==null&&(y.lanes|=d),MC(D,d,r),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===r){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Xu(r,l,d,g){r=null;for(var v=l,y=!1;v!==null;){if(!y){if((v.flags&524288)!==0)y=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var k=v.type;Ci(v.pendingProps.value,D.value)||(r!==null?r.push(k):r=[k])}}else if(v===ct.current){if(D=v.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(xd):r=[xd])}v=v.return}r!==null&&IC(l,r,d,g),l.flags|=262144}function Vf(r){for(r=r.firstContext;r!==null;){if(!Ci(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ea(r){Ra=r,po=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Wn(r){return UE(Ra,r)}function Nf(r,l){return Ra===null&&Ea(r),UE(r,l)}function UE(r,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},po===null){if(r===null)throw Error(i(308));po=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else po=po.next=l;return d}var AV=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(d,g){r.push(g)}};this.abort=function(){l.aborted=!0,r.forEach(function(d){return d()})}},FV=e.unstable_scheduleCallback,PV=e.unstable_NormalPriority,wn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _C(){return{controller:new AV,data:new Map,refCount:0}}function Zu(r){r.refCount--,r.refCount===0&&FV(PV,function(){r.controller.abort()})}var Ju=null,kC=0,Yl=0,Ql=null;function MV(r,l){if(Ju===null){var d=Ju=[];kC=0,Yl=Ov(),Ql={status:"pending",value:void 0,then:function(g){d.push(g)}}}return kC++,l.then(WE,WE),l}function WE(){if(--kC===0&&Ju!==null){Ql!==null&&(Ql.status="fulfilled");var r=Ju;Ju=null,Yl=0,Ql=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function IV(r,l){var d=[],g={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return r.then(function(){g.status="fulfilled",g.value=l;for(var v=0;v<d.length;v++)(0,d[v])(l)},function(v){for(g.status="rejected",g.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),g}var jE=K.S;K.S=function(r,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&MV(r,l),jE!==null&&jE(r,l)};var Ta=ee(null);function LC(){var r=Ta.current;return r!==null?r:Mt.pooledCache}function Bf(r,l){l===null?ne(Ta,Ta.current):ne(Ta,l.pool)}function $E(){var r=LC();return r===null?null:{parent:wn._currentValue,pool:r}}var ed=Error(i(460)),qE=Error(i(474)),Gf=Error(i(542)),OC={then:function(){}};function KE(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Hf(){}function YE(r,l,d){switch(d=r[d],d===void 0?r.push(l):d!==l&&(l.then(Hf,Hf),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,XE(r),r;default:if(typeof l.status=="string")l.then(Hf,Hf);else{if(r=Mt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=l,r.status="pending",r.then(function(g){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=g}},function(g){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,XE(r),r}throw td=l,ed}}var td=null;function QE(){if(td===null)throw Error(i(459));var r=td;return td=null,r}function XE(r){if(r===ed||r===Gf)throw Error(i(483))}var er=!1;function VC(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function NC(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function tr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function nr(r,l,d){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(wt&2)!==0){var v=g.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),g.pending=l,l=_f(r),VE(r,null,d),l}return If(r,g,l,d),_f(r)}function nd(r,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=r.pendingLanes,d|=g,l.lanes=d,Pu(r,d)}}function BC(r,l){var d=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var v=null,y=null;if(d=d.firstBaseUpdate,d!==null){do{var D={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};y===null?v=y=D:y=y.next=D,d=d.next}while(d!==null);y===null?v=y=l:y=y.next=l}else v=y=l;d={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:g.shared,callbacks:g.callbacks},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=l:r.next=l,d.lastBaseUpdate=l}var GC=!1;function id(){if(GC){var r=Ql;if(r!==null)throw r}}function sd(r,l,d,g){GC=!1;var v=r.updateQueue;er=!1;var y=v.firstBaseUpdate,D=v.lastBaseUpdate,k=v.shared.pending;if(k!==null){v.shared.pending=null;var W=k,X=W.next;W.next=null,D===null?y=X:D.next=X,D=W;var ce=r.alternate;ce!==null&&(ce=ce.updateQueue,k=ce.lastBaseUpdate,k!==D&&(k===null?ce.firstBaseUpdate=X:k.next=X,ce.lastBaseUpdate=W))}if(y!==null){var he=v.baseState;D=0,ce=X=W=null,k=y;do{var J=k.lane&-536870913,te=J!==k.lane;if(te?(rt&J)===J:(g&J)===J){J!==0&&J===Yl&&(GC=!0),ce!==null&&(ce=ce.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ne=r,ke=k;J=l;var Dt=d;switch(ke.tag){case 1:if(Ne=ke.payload,typeof Ne=="function"){he=Ne.call(Dt,he,J);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ke.payload,J=typeof Ne=="function"?Ne.call(Dt,he,J):Ne,J==null)break e;he=f({},he,J);break e;case 2:er=!0}}J=k.callback,J!==null&&(r.flags|=64,te&&(r.flags|=8192),te=v.callbacks,te===null?v.callbacks=[J]:te.push(J))}else te={lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ce===null?(X=ce=te,W=he):ce=ce.next=te,D|=J;if(k=k.next,k===null){if(k=v.shared.pending,k===null)break;te=k,k=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);ce===null&&(W=he),v.baseState=W,v.firstBaseUpdate=X,v.lastBaseUpdate=ce,y===null&&(v.shared.lanes=0),ur|=D,r.lanes=D,r.memoizedState=he}}function ZE(r,l){if(typeof r!="function")throw Error(i(191,r));r.call(l)}function JE(r,l){var d=r.callbacks;if(d!==null)for(r.callbacks=null,r=0;r<d.length;r++)ZE(d[r],l)}var Xl=ee(null),zf=ee(0);function e0(r,l){r=Ro,ne(zf,r),ne(Xl,l),Ro=r|l.baseLanes}function HC(){ne(zf,Ro),ne(Xl,Xl.current)}function zC(){Ro=zf.current,le(Xl),le(zf)}var ir=0,Ye=null,Tt=null,un=null,Uf=!1,Zl=!1,xa=!1,Wf=0,od=0,Jl=null,_V=0;function Jt(){throw Error(i(321))}function UC(r,l){if(l===null)return!1;for(var d=0;d<l.length&&d<r.length;d++)if(!Ci(r[d],l[d]))return!1;return!0}function WC(r,l,d,g,v,y){return ir=y,Ye=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=r===null||r.memoizedState===null?V0:N0,xa=!1,y=d(g,v),xa=!1,Zl&&(y=n0(l,d,g,v)),t0(r),y}function t0(r){K.H=Qf;var l=Tt!==null&&Tt.next!==null;if(ir=0,un=Tt=Ye=null,Uf=!1,od=0,Jl=null,l)throw Error(i(300));r===null||xn||(r=r.dependencies,r!==null&&Vf(r)&&(xn=!0))}function n0(r,l,d,g){Ye=r;var v=0;do{if(Zl&&(Jl=null),od=0,Zl=!1,25<=v)throw Error(i(301));if(v+=1,un=Tt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=GV,y=l(d,g)}while(Zl);return y}function kV(){var r=K.H,l=r.useState()[0];return l=typeof l.then=="function"?rd(l):l,r=r.useState()[0],(Tt!==null?Tt.memoizedState:null)!==r&&(Ye.flags|=1024),l}function jC(){var r=Wf!==0;return Wf=0,r}function $C(r,l,d){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~d}function qC(r){if(Uf){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Uf=!1}ir=0,un=Tt=Ye=null,Zl=!1,od=Wf=0,Jl=null}function ai(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Ye.memoizedState=un=r:un=un.next=r,un}function dn(){if(Tt===null){var r=Ye.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var l=un===null?Ye.memoizedState:un.next;if(l!==null)un=l,Tt=r;else{if(r===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},un===null?Ye.memoizedState=un=r:un=un.next=r}return un}function KC(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rd(r){var l=od;return od+=1,Jl===null&&(Jl=[]),r=YE(Jl,r,l),l=Ye,(un===null?l.memoizedState:un.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?V0:N0),r}function jf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return rd(r);if(r.$$typeof===M)return Wn(r)}throw Error(i(438,String(r)))}function YC(r){var l=null,d=Ye.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=Ye.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=KC(),Ye.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(r),g=0;g<r;g++)d[g]=L;return l.index++,d}function Co(r,l){return typeof l=="function"?l(r):l}function $f(r){var l=dn();return QC(l,Tt,r)}function QC(r,l,d){var g=r.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var v=r.baseQueue,y=g.pending;if(y!==null){if(v!==null){var D=v.next;v.next=y.next,y.next=D}l.baseQueue=v=y,g.pending=null}if(y=r.baseState,v===null)r.memoizedState=y;else{l=v.next;var k=D=null,W=null,X=l,ce=!1;do{var he=X.lane&-536870913;if(he!==X.lane?(rt&he)===he:(ir&he)===he){var J=X.revertLane;if(J===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),he===Yl&&(ce=!0);else if((ir&J)===J){X=X.next,J===Yl&&(ce=!0);continue}else he={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},W===null?(k=W=he,D=y):W=W.next=he,Ye.lanes|=J,ur|=J;he=X.action,xa&&d(y,he),y=X.hasEagerState?X.eagerState:d(y,he)}else J={lane:he,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},W===null?(k=W=J,D=y):W=W.next=J,Ye.lanes|=he,ur|=he;X=X.next}while(X!==null&&X!==l);if(W===null?D=y:W.next=k,!Ci(y,r.memoizedState)&&(xn=!0,ce&&(d=Ql,d!==null)))throw d;r.memoizedState=y,r.baseState=D,r.baseQueue=W,g.lastRenderedState=y}return v===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function XC(r){var l=dn(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=r;var g=d.dispatch,v=d.pending,y=l.memoizedState;if(v!==null){d.pending=null;var D=v=v.next;do y=r(y,D.action),D=D.next;while(D!==v);Ci(y,l.memoizedState)||(xn=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),d.lastRenderedState=y}return[y,g]}function i0(r,l,d){var g=Ye,v=dn(),y=ft;if(y){if(d===void 0)throw Error(i(407));d=d()}else d=l();var D=!Ci((Tt||v).memoizedState,d);D&&(v.memoizedState=d,xn=!0),v=v.queue;var k=r0.bind(null,g,v,r);if(ad(2048,8,k,[r]),v.getSnapshot!==l||D||un!==null&&un.memoizedState.tag&1){if(g.flags|=2048,ec(9,qf(),o0.bind(null,g,v,d,l),null),Mt===null)throw Error(i(349));y||(ir&124)!==0||s0(g,l,d)}return d}function s0(r,l,d){r.flags|=16384,r={getSnapshot:l,value:d},l=Ye.updateQueue,l===null?(l=KC(),Ye.updateQueue=l,l.stores=[r]):(d=l.stores,d===null?l.stores=[r]:d.push(r))}function o0(r,l,d,g){l.value=d,l.getSnapshot=g,a0(l)&&l0(r)}function r0(r,l,d){return d(function(){a0(l)&&l0(r)})}function a0(r){var l=r.getSnapshot;r=r.value;try{var d=l();return!Ci(r,d)}catch{return!0}}function l0(r){var l=jl(r,2);l!==null&&Ri(l,r,2)}function ZC(r){var l=ai();if(typeof r=="function"){var d=r;if(r=d(),xa){qe(!0);try{d()}finally{qe(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:r},l}function c0(r,l,d,g){return r.baseState=d,QC(r,Tt,typeof g=="function"?g:Co)}function LV(r,l,d,g,v){if(Yf(r))throw Error(i(485));if(r=l.action,r!==null){var y={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){y.listeners.push(D)}};K.T!==null?d(!0):y.isTransition=!1,g(y),d=l.pending,d===null?(y.next=l.pending=y,u0(l,y)):(y.next=d.next,l.pending=d.next=y)}}function u0(r,l){var d=l.action,g=l.payload,v=r.state;if(l.isTransition){var y=K.T,D={};K.T=D;try{var k=d(v,g),W=K.S;W!==null&&W(D,k),d0(r,l,k)}catch(X){JC(r,l,X)}finally{K.T=y}}else try{y=d(v,g),d0(r,l,y)}catch(X){JC(r,l,X)}}function d0(r,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){h0(r,l,g)},function(g){return JC(r,l,g)}):h0(r,l,d)}function h0(r,l,d){l.status="fulfilled",l.value=d,f0(l),r.state=d,l=r.pending,l!==null&&(d=l.next,d===l?r.pending=null:(d=d.next,l.next=d,u0(r,d)))}function JC(r,l,d){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,f0(l),l=l.next;while(l!==g)}r.action=null}function f0(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function g0(r,l){return l}function p0(r,l){if(ft){var d=Mt.formState;if(d!==null){e:{var g=Ye;if(ft){if(Kt){t:{for(var v=Kt,y=Es;v.nodeType!==8;){if(!y){v=null;break t}if(v=rs(v.nextSibling),v===null){v=null;break t}}y=v.data,v=y==="F!"||y==="F"?v:null}if(v){Kt=rs(v.nextSibling),g=v.data==="F!";break e}}ba(g)}g=!1}g&&(l=d[0])}}return d=ai(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g0,lastRenderedState:l},d.queue=g,d=k0.bind(null,Ye,g),g.dispatch=d,g=ZC(!1),y=sv.bind(null,Ye,!1,g.queue),g=ai(),v={state:l,dispatch:null,action:r,pending:null},g.queue=v,d=LV.bind(null,Ye,v,y,d),v.dispatch=d,g.memoizedState=r,[l,d,!1]}function m0(r){var l=dn();return C0(l,Tt,r)}function C0(r,l,d){if(l=QC(r,l,g0)[0],r=$f(Co)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=rd(l)}catch(D){throw D===ed?Gf:D}else g=l;l=dn();var v=l.queue,y=v.dispatch;return d!==l.memoizedState&&(Ye.flags|=2048,ec(9,qf(),OV.bind(null,v,d),null)),[g,y,r]}function OV(r,l){r.action=l}function v0(r){var l=dn(),d=Tt;if(d!==null)return C0(l,d,r);dn(),l=l.memoizedState,d=dn();var g=d.queue.dispatch;return d.memoizedState=r,[l,g,!1]}function ec(r,l,d,g){return r={tag:r,create:d,deps:g,inst:l,next:null},l=Ye.updateQueue,l===null&&(l=KC(),Ye.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=r.next=r:(g=d.next,d.next=r,r.next=g,l.lastEffect=r),r}function qf(){return{destroy:void 0,resource:void 0}}function y0(){return dn().memoizedState}function Kf(r,l,d,g){var v=ai();g=g===void 0?null:g,Ye.flags|=r,v.memoizedState=ec(1|l,qf(),d,g)}function ad(r,l,d,g){var v=dn();g=g===void 0?null:g;var y=v.memoizedState.inst;Tt!==null&&g!==null&&UC(g,Tt.memoizedState.deps)?v.memoizedState=ec(l,y,d,g):(Ye.flags|=r,v.memoizedState=ec(1|l,y,d,g))}function w0(r,l){Kf(8390656,8,r,l)}function S0(r,l){ad(2048,8,r,l)}function b0(r,l){return ad(4,2,r,l)}function R0(r,l){return ad(4,4,r,l)}function E0(r,l){if(typeof l=="function"){r=r();var d=l(r);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function T0(r,l,d){d=d!=null?d.concat([r]):null,ad(4,4,E0.bind(null,l,r),d)}function ev(){}function x0(r,l){var d=dn();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&UC(l,g[1])?g[0]:(d.memoizedState=[r,l],r)}function D0(r,l){var d=dn();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&UC(l,g[1]))return g[0];if(g=r(),xa){qe(!0);try{r()}finally{qe(!1)}}return d.memoizedState=[g,l],g}function tv(r,l,d){return d===void 0||(ir&1073741824)!==0?r.memoizedState=l:(r.memoizedState=d,r=PT(),Ye.lanes|=r,ur|=r,d)}function A0(r,l,d,g){return Ci(d,l)?d:Xl.current!==null?(r=tv(r,d,g),Ci(r,l)||(xn=!0),r):(ir&42)===0?(xn=!0,r.memoizedState=d):(r=PT(),Ye.lanes|=r,ur|=r,l)}function F0(r,l,d,g,v){var y=ie.p;ie.p=y!==0&&8>y?y:8;var D=K.T,k={};K.T=k,sv(r,!1,l,d);try{var W=v(),X=K.S;if(X!==null&&X(k,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ce=IV(W,g);ld(r,l,ce,bi(r))}else ld(r,l,g,bi(r))}catch(he){ld(r,l,{then:function(){},status:"rejected",reason:he},bi())}finally{ie.p=y,K.T=D}}function VV(){}function nv(r,l,d,g){if(r.tag!==5)throw Error(i(476));var v=P0(r).queue;F0(r,v,l,se,d===null?VV:function(){return M0(r),d(g)})}function P0(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:se},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:d},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function M0(r){var l=P0(r).next.queue;ld(r,l,{},bi())}function iv(){return Wn(xd)}function I0(){return dn().memoizedState}function _0(){return dn().memoizedState}function NV(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var d=bi();r=tr(d);var g=nr(l,r,d);g!==null&&(Ri(g,l,d),nd(g,l,d)),l={cache:_C()},r.payload=l;return}l=l.return}}function BV(r,l,d){var g=bi();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Yf(r)?L0(l,d):(d=RC(r,l,d,g),d!==null&&(Ri(d,r,g),O0(d,l,g)))}function k0(r,l,d){var g=bi();ld(r,l,d,g)}function ld(r,l,d,g){var v={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Yf(r))L0(l,v);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var D=l.lastRenderedState,k=y(D,d);if(v.hasEagerState=!0,v.eagerState=k,Ci(k,D))return If(r,l,v,0),Mt===null&&Mf(),!1}catch{}finally{}if(d=RC(r,l,v,g),d!==null)return Ri(d,r,g),O0(d,l,g),!0}return!1}function sv(r,l,d,g){if(g={lane:2,revertLane:Ov(),action:g,hasEagerState:!1,eagerState:null,next:null},Yf(r)){if(l)throw Error(i(479))}else l=RC(r,d,g,2),l!==null&&Ri(l,r,2)}function Yf(r){var l=r.alternate;return r===Ye||l!==null&&l===Ye}function L0(r,l){Zl=Uf=!0;var d=r.pending;d===null?l.next=l:(l.next=d.next,d.next=l),r.pending=l}function O0(r,l,d){if((d&4194048)!==0){var g=l.lanes;g&=r.pendingLanes,d|=g,l.lanes=d,Pu(r,d)}}var Qf={readContext:Wn,use:jf,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},V0={readContext:Wn,use:jf,useCallback:function(r,l){return ai().memoizedState=[r,l===void 0?null:l],r},useContext:Wn,useEffect:w0,useImperativeHandle:function(r,l,d){d=d!=null?d.concat([r]):null,Kf(4194308,4,E0.bind(null,l,r),d)},useLayoutEffect:function(r,l){return Kf(4194308,4,r,l)},useInsertionEffect:function(r,l){Kf(4,2,r,l)},useMemo:function(r,l){var d=ai();l=l===void 0?null:l;var g=r();if(xa){qe(!0);try{r()}finally{qe(!1)}}return d.memoizedState=[g,l],g},useReducer:function(r,l,d){var g=ai();if(d!==void 0){var v=d(l);if(xa){qe(!0);try{d(l)}finally{qe(!1)}}}else v=l;return g.memoizedState=g.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},g.queue=r,r=r.dispatch=BV.bind(null,Ye,r),[g.memoizedState,r]},useRef:function(r){var l=ai();return r={current:r},l.memoizedState=r},useState:function(r){r=ZC(r);var l=r.queue,d=k0.bind(null,Ye,l);return l.dispatch=d,[r.memoizedState,d]},useDebugValue:ev,useDeferredValue:function(r,l){var d=ai();return tv(d,r,l)},useTransition:function(){var r=ZC(!1);return r=F0.bind(null,Ye,r.queue,!0,!1),ai().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,d){var g=Ye,v=ai();if(ft){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),Mt===null)throw Error(i(349));(rt&124)!==0||s0(g,l,d)}v.memoizedState=d;var y={value:d,getSnapshot:l};return v.queue=y,w0(r0.bind(null,g,y,r),[r]),g.flags|=2048,ec(9,qf(),o0.bind(null,g,y,d,l),null),d},useId:function(){var r=ai(),l=Mt.identifierPrefix;if(ft){var d=go,g=fo;d=(g&~(1<<32-pt(g)-1)).toString(32)+d,l="«"+l+"R"+d,d=Wf++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=_V++,l="«"+l+"r"+d.toString(32)+"»";return r.memoizedState=l},useHostTransitionStatus:iv,useFormState:p0,useActionState:p0,useOptimistic:function(r){var l=ai();l.memoizedState=l.baseState=r;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=sv.bind(null,Ye,!0,d),d.dispatch=l,[r,l]},useMemoCache:YC,useCacheRefresh:function(){return ai().memoizedState=NV.bind(null,Ye)}},N0={readContext:Wn,use:jf,useCallback:x0,useContext:Wn,useEffect:S0,useImperativeHandle:T0,useInsertionEffect:b0,useLayoutEffect:R0,useMemo:D0,useReducer:$f,useRef:y0,useState:function(){return $f(Co)},useDebugValue:ev,useDeferredValue:function(r,l){var d=dn();return A0(d,Tt.memoizedState,r,l)},useTransition:function(){var r=$f(Co)[0],l=dn().memoizedState;return[typeof r=="boolean"?r:rd(r),l]},useSyncExternalStore:i0,useId:I0,useHostTransitionStatus:iv,useFormState:m0,useActionState:m0,useOptimistic:function(r,l){var d=dn();return c0(d,Tt,r,l)},useMemoCache:YC,useCacheRefresh:_0},GV={readContext:Wn,use:jf,useCallback:x0,useContext:Wn,useEffect:S0,useImperativeHandle:T0,useInsertionEffect:b0,useLayoutEffect:R0,useMemo:D0,useReducer:XC,useRef:y0,useState:function(){return XC(Co)},useDebugValue:ev,useDeferredValue:function(r,l){var d=dn();return Tt===null?tv(d,r,l):A0(d,Tt.memoizedState,r,l)},useTransition:function(){var r=XC(Co)[0],l=dn().memoizedState;return[typeof r=="boolean"?r:rd(r),l]},useSyncExternalStore:i0,useId:I0,useHostTransitionStatus:iv,useFormState:v0,useActionState:v0,useOptimistic:function(r,l){var d=dn();return Tt!==null?c0(d,Tt,r,l):(d.baseState=r,[r,d.queue.dispatch])},useMemoCache:YC,useCacheRefresh:_0},tc=null,cd=0;function Xf(r){var l=cd;return cd+=1,tc===null&&(tc=[]),YE(tc,r,l)}function ud(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function Zf(r,l){throw l.$$typeof===p?Error(i(525)):(r=Object.prototype.toString.call(l),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function B0(r){var l=r._init;return l(r._payload)}function G0(r){function l(q,$){if(r){var Q=q.deletions;Q===null?(q.deletions=[$],q.flags|=16):Q.push($)}}function d(q,$){if(!r)return null;for(;$!==null;)l(q,$),$=$.sibling;return null}function g(q){for(var $=new Map;q!==null;)q.key!==null?$.set(q.key,q):$.set(q.index,q),q=q.sibling;return $}function v(q,$){return q=ho(q,$),q.index=0,q.sibling=null,q}function y(q,$,Q){return q.index=Q,r?(Q=q.alternate,Q!==null?(Q=Q.index,Q<$?(q.flags|=67108866,$):Q):(q.flags|=67108866,$)):(q.flags|=1048576,$)}function D(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function k(q,$,Q,ue){return $===null||$.tag!==6?($=TC(Q,q.mode,ue),$.return=q,$):($=v($,Q),$.return=q,$)}function W(q,$,Q,ue){var Te=Q.type;return Te===S?ce(q,$,Q.props.children,ue,Q.key):$!==null&&($.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&B0(Te)===$.type)?($=v($,Q.props),ud($,Q),$.return=q,$):($=kf(Q.type,Q.key,Q.props,null,q.mode,ue),ud($,Q),$.return=q,$)}function X(q,$,Q,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=xC(Q,q.mode,ue),$.return=q,$):($=v($,Q.children||[]),$.return=q,$)}function ce(q,$,Q,ue,Te){return $===null||$.tag!==7?($=va(Q,q.mode,ue,Te),$.return=q,$):($=v($,Q),$.return=q,$)}function he(q,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=TC(""+$,q.mode,Q),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case m:return Q=kf($.type,$.key,$.props,null,q.mode,Q),ud(Q,$),Q.return=q,Q;case w:return $=xC($,q.mode,Q),$.return=q,$;case A:var ue=$._init;return $=ue($._payload),he(q,$,Q)}if(pe($)||G($))return $=va($,q.mode,Q,null),$.return=q,$;if(typeof $.then=="function")return he(q,Xf($),Q);if($.$$typeof===M)return he(q,Nf(q,$),Q);Zf(q,$)}return null}function J(q,$,Q,ue){var Te=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Te!==null?null:k(q,$,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return Q.key===Te?W(q,$,Q,ue):null;case w:return Q.key===Te?X(q,$,Q,ue):null;case A:return Te=Q._init,Q=Te(Q._payload),J(q,$,Q,ue)}if(pe(Q)||G(Q))return Te!==null?null:ce(q,$,Q,ue,null);if(typeof Q.then=="function")return J(q,$,Xf(Q),ue);if(Q.$$typeof===M)return J(q,$,Nf(q,Q),ue);Zf(q,Q)}return null}function te(q,$,Q,ue,Te){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return q=q.get(Q)||null,k($,q,""+ue,Te);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case m:return q=q.get(ue.key===null?Q:ue.key)||null,W($,q,ue,Te);case w:return q=q.get(ue.key===null?Q:ue.key)||null,X($,q,ue,Te);case A:var Qe=ue._init;return ue=Qe(ue._payload),te(q,$,Q,ue,Te)}if(pe(ue)||G(ue))return q=q.get(Q)||null,ce($,q,ue,Te,null);if(typeof ue.then=="function")return te(q,$,Q,Xf(ue),Te);if(ue.$$typeof===M)return te(q,$,Q,Nf($,ue),Te);Zf($,ue)}return null}function Ne(q,$,Q,ue){for(var Te=null,Qe=null,Fe=$,Le=$=0,An=null;Fe!==null&&Le<Q.length;Le++){Fe.index>Le?(An=Fe,Fe=null):An=Fe.sibling;var dt=J(q,Fe,Q[Le],ue);if(dt===null){Fe===null&&(Fe=An);break}r&&Fe&&dt.alternate===null&&l(q,Fe),$=y(dt,$,Le),Qe===null?Te=dt:Qe.sibling=dt,Qe=dt,Fe=An}if(Le===Q.length)return d(q,Fe),ft&&wa(q,Le),Te;if(Fe===null){for(;Le<Q.length;Le++)Fe=he(q,Q[Le],ue),Fe!==null&&($=y(Fe,$,Le),Qe===null?Te=Fe:Qe.sibling=Fe,Qe=Fe);return ft&&wa(q,Le),Te}for(Fe=g(Fe);Le<Q.length;Le++)An=te(Fe,q,Le,Q[Le],ue),An!==null&&(r&&An.alternate!==null&&Fe.delete(An.key===null?Le:An.key),$=y(An,$,Le),Qe===null?Te=An:Qe.sibling=An,Qe=An);return r&&Fe.forEach(function(yr){return l(q,yr)}),ft&&wa(q,Le),Te}function ke(q,$,Q,ue){if(Q==null)throw Error(i(151));for(var Te=null,Qe=null,Fe=$,Le=$=0,An=null,dt=Q.next();Fe!==null&&!dt.done;Le++,dt=Q.next()){Fe.index>Le?(An=Fe,Fe=null):An=Fe.sibling;var yr=J(q,Fe,dt.value,ue);if(yr===null){Fe===null&&(Fe=An);break}r&&Fe&&yr.alternate===null&&l(q,Fe),$=y(yr,$,Le),Qe===null?Te=yr:Qe.sibling=yr,Qe=yr,Fe=An}if(dt.done)return d(q,Fe),ft&&wa(q,Le),Te;if(Fe===null){for(;!dt.done;Le++,dt=Q.next())dt=he(q,dt.value,ue),dt!==null&&($=y(dt,$,Le),Qe===null?Te=dt:Qe.sibling=dt,Qe=dt);return ft&&wa(q,Le),Te}for(Fe=g(Fe);!dt.done;Le++,dt=Q.next())dt=te(Fe,q,Le,dt.value,ue),dt!==null&&(r&&dt.alternate!==null&&Fe.delete(dt.key===null?Le:dt.key),$=y(dt,$,Le),Qe===null?Te=dt:Qe.sibling=dt,Qe=dt);return r&&Fe.forEach(function(HN){return l(q,HN)}),ft&&wa(q,Le),Te}function Dt(q,$,Q,ue){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:e:{for(var Te=Q.key;$!==null;){if($.key===Te){if(Te=Q.type,Te===S){if($.tag===7){d(q,$.sibling),ue=v($,Q.props.children),ue.return=q,q=ue;break e}}else if($.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&B0(Te)===$.type){d(q,$.sibling),ue=v($,Q.props),ud(ue,Q),ue.return=q,q=ue;break e}d(q,$);break}else l(q,$);$=$.sibling}Q.type===S?(ue=va(Q.props.children,q.mode,ue,Q.key),ue.return=q,q=ue):(ue=kf(Q.type,Q.key,Q.props,null,q.mode,ue),ud(ue,Q),ue.return=q,q=ue)}return D(q);case w:e:{for(Te=Q.key;$!==null;){if($.key===Te)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){d(q,$.sibling),ue=v($,Q.children||[]),ue.return=q,q=ue;break e}else{d(q,$);break}else l(q,$);$=$.sibling}ue=xC(Q,q.mode,ue),ue.return=q,q=ue}return D(q);case A:return Te=Q._init,Q=Te(Q._payload),Dt(q,$,Q,ue)}if(pe(Q))return Ne(q,$,Q,ue);if(G(Q)){if(Te=G(Q),typeof Te!="function")throw Error(i(150));return Q=Te.call(Q),ke(q,$,Q,ue)}if(typeof Q.then=="function")return Dt(q,$,Xf(Q),ue);if(Q.$$typeof===M)return Dt(q,$,Nf(q,Q),ue);Zf(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(d(q,$.sibling),ue=v($,Q),ue.return=q,q=ue):(d(q,$),ue=TC(Q,q.mode,ue),ue.return=q,q=ue),D(q)):d(q,$)}return function(q,$,Q,ue){try{cd=0;var Te=Dt(q,$,Q,ue);return tc=null,Te}catch(Fe){if(Fe===ed||Fe===Gf)throw Fe;var Qe=vi(29,Fe,null,q.mode);return Qe.lanes=ue,Qe.return=q,Qe}finally{}}}var nc=G0(!0),H0=G0(!1),Bi=ee(null),Ts=null;function sr(r){var l=r.alternate;ne(Sn,Sn.current&1),ne(Bi,r),Ts===null&&(l===null||Xl.current!==null||l.memoizedState!==null)&&(Ts=r)}function z0(r){if(r.tag===22){if(ne(Sn,Sn.current),ne(Bi,r),Ts===null){var l=r.alternate;l!==null&&l.memoizedState!==null&&(Ts=r)}}else or()}function or(){ne(Sn,Sn.current),ne(Bi,Bi.current)}function vo(r){le(Bi),Ts===r&&(Ts=null),le(Sn)}var Sn=ee(0);function Jf(r){for(var l=r;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Kv(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function ov(r,l,d,g){l=r.memoizedState,d=d(g,l),d=d==null?l:f({},l,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var rv={enqueueSetState:function(r,l,d){r=r._reactInternals;var g=bi(),v=tr(g);v.payload=l,d!=null&&(v.callback=d),l=nr(r,v,g),l!==null&&(Ri(l,r,g),nd(l,r,g))},enqueueReplaceState:function(r,l,d){r=r._reactInternals;var g=bi(),v=tr(g);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=nr(r,v,g),l!==null&&(Ri(l,r,g),nd(l,r,g))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var d=bi(),g=tr(d);g.tag=2,l!=null&&(g.callback=l),l=nr(r,g,d),l!==null&&(Ri(l,r,d),nd(l,r,d))}};function U0(r,l,d,g,v,y,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,y,D):l.prototype&&l.prototype.isPureReactComponent?!$u(d,g)||!$u(v,y):!0}function W0(r,l,d,g){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==r&&rv.enqueueReplaceState(l,l.state,null)}function Da(r,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(r=r.defaultProps){d===l&&(d=f({},d));for(var v in r)d[v]===void 0&&(d[v]=r[v])}return d}var eg=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function j0(r){eg(r)}function $0(r){console.error(r)}function q0(r){eg(r)}function tg(r,l){try{var d=r.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function K0(r,l,d){try{var g=r.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function av(r,l,d){return d=tr(d),d.tag=3,d.payload={element:null},d.callback=function(){tg(r,l)},d}function Y0(r){return r=tr(r),r.tag=3,r}function Q0(r,l,d,g){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var y=g.value;r.payload=function(){return v(y)},r.callback=function(){K0(l,d,g)}}var D=d.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(r.callback=function(){K0(l,d,g),typeof v!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function HV(r,l,d,g,v){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&Xu(l,d,v,!0),d=Bi.current,d!==null){switch(d.tag){case 13:return Ts===null?Mv():d.alternate===null&&Yt===0&&(Yt=3),d.flags&=-257,d.flags|=65536,d.lanes=v,g===OC?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),_v(r,g,v)),!1;case 22:return d.flags|=65536,g===OC?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),_v(r,g,v)),!1}throw Error(i(435,d.tag))}return _v(r,g,v),Mv(),!1}if(ft)return l=Bi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,g!==FC&&(r=Error(i(422),{cause:g}),Qu(Li(r,d)))):(g!==FC&&(l=Error(i(423),{cause:g}),Qu(Li(l,d))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,g=Li(g,d),v=av(r.stateNode,g,v),BC(r,v),Yt!==4&&(Yt=2)),!1;var y=Error(i(520),{cause:g});if(y=Li(y,d),Cd===null?Cd=[y]:Cd.push(y),Yt!==4&&(Yt=2),l===null)return!0;g=Li(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,r=v&-v,d.lanes|=r,r=av(d.stateNode,g,r),BC(d,r),!1;case 1:if(l=d.type,y=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(dr===null||!dr.has(y))))return d.flags|=65536,v&=-v,d.lanes|=v,v=Y0(v),Q0(v,r,d,g),BC(d,v),!1}d=d.return}while(d!==null);return!1}var X0=Error(i(461)),xn=!1;function kn(r,l,d,g){l.child=r===null?H0(l,null,d,g):nc(l,r.child,d,g)}function Z0(r,l,d,g,v){d=d.render;var y=l.ref;if("ref"in g){var D={};for(var k in g)k!=="ref"&&(D[k]=g[k])}else D=g;return Ea(l),g=WC(r,l,d,D,y,v),k=jC(),r!==null&&!xn?($C(r,l,v),yo(r,l,v)):(ft&&k&&DC(l),l.flags|=1,kn(r,l,g,v),l.child)}function J0(r,l,d,g,v){if(r===null){var y=d.type;return typeof y=="function"&&!EC(y)&&y.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=y,eT(r,l,y,g,v)):(r=kf(d.type,null,g,l,l.mode,v),r.ref=l.ref,r.return=l,l.child=r)}if(y=r.child,!pv(r,v)){var D=y.memoizedProps;if(d=d.compare,d=d!==null?d:$u,d(D,g)&&r.ref===l.ref)return yo(r,l,v)}return l.flags|=1,r=ho(y,g),r.ref=l.ref,r.return=l,l.child=r}function eT(r,l,d,g,v){if(r!==null){var y=r.memoizedProps;if($u(y,g)&&r.ref===l.ref)if(xn=!1,l.pendingProps=g=y,pv(r,v))(r.flags&131072)!==0&&(xn=!0);else return l.lanes=r.lanes,yo(r,l,v)}return lv(r,l,d,g,v)}function tT(r,l,d){var g=l.pendingProps,v=g.children,y=r!==null?r.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=y!==null?y.baseLanes|d:d,r!==null){for(v=l.child=r.child,y=0;v!==null;)y=y|v.lanes|v.childLanes,v=v.sibling;l.childLanes=y&~g}else l.childLanes=0,l.child=null;return nT(r,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bf(l,y!==null?y.cachePool:null),y!==null?e0(l,y):HC(),z0(l);else return l.lanes=l.childLanes=536870912,nT(r,l,y!==null?y.baseLanes|d:d,d)}else y!==null?(Bf(l,y.cachePool),e0(l,y),or(),l.memoizedState=null):(r!==null&&Bf(l,null),HC(),or());return kn(r,l,v,d),l.child}function nT(r,l,d,g){var v=LC();return v=v===null?null:{parent:wn._currentValue,pool:v},l.memoizedState={baseLanes:d,cachePool:v},r!==null&&Bf(l,null),HC(),z0(l),r!==null&&Xu(r,l,g,!0),null}function ng(r,l){var d=l.ref;if(d===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(r===null||r.ref!==d)&&(l.flags|=4194816)}}function lv(r,l,d,g,v){return Ea(l),d=WC(r,l,d,g,void 0,v),g=jC(),r!==null&&!xn?($C(r,l,v),yo(r,l,v)):(ft&&g&&DC(l),l.flags|=1,kn(r,l,d,v),l.child)}function iT(r,l,d,g,v,y){return Ea(l),l.updateQueue=null,d=n0(l,g,d,v),t0(r),g=jC(),r!==null&&!xn?($C(r,l,y),yo(r,l,y)):(ft&&g&&DC(l),l.flags|=1,kn(r,l,d,y),l.child)}function sT(r,l,d,g,v){if(Ea(l),l.stateNode===null){var y=$l,D=d.contextType;typeof D=="object"&&D!==null&&(y=Wn(D)),y=new d(g,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rv,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=g,y.state=l.memoizedState,y.refs={},VC(l),D=d.contextType,y.context=typeof D=="object"&&D!==null?Wn(D):$l,y.state=l.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(ov(l,d,D,g),y.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(D=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),D!==y.state&&rv.enqueueReplaceState(y,y.state,null),sd(l,g,y,v),id(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(r===null){y=l.stateNode;var k=l.memoizedProps,W=Da(d,k);y.props=W;var X=y.context,ce=d.contextType;D=$l,typeof ce=="object"&&ce!==null&&(D=Wn(ce));var he=d.getDerivedStateFromProps;ce=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,ce||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k||X!==D)&&W0(l,y,g,D),er=!1;var J=l.memoizedState;y.state=J,sd(l,g,y,v),id(),X=l.memoizedState,k||J!==X||er?(typeof he=="function"&&(ov(l,d,he,g),X=l.memoizedState),(W=er||U0(l,d,W,g,J,X,D))?(ce||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=X),y.props=g,y.state=X,y.context=D,g=W):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{y=l.stateNode,NC(r,l),D=l.memoizedProps,ce=Da(d,D),y.props=ce,he=l.pendingProps,J=y.context,X=d.contextType,W=$l,typeof X=="object"&&X!==null&&(W=Wn(X)),k=d.getDerivedStateFromProps,(X=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D!==he||J!==W)&&W0(l,y,g,W),er=!1,J=l.memoizedState,y.state=J,sd(l,g,y,v),id();var te=l.memoizedState;D!==he||J!==te||er||r!==null&&r.dependencies!==null&&Vf(r.dependencies)?(typeof k=="function"&&(ov(l,d,k,g),te=l.memoizedState),(ce=er||U0(l,d,ce,g,J,te,W)||r!==null&&r.dependencies!==null&&Vf(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(g,te,W),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(g,te,W)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||D===r.memoizedProps&&J===r.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&J===r.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=te),y.props=g,y.state=te,y.context=W,g=ce):(typeof y.componentDidUpdate!="function"||D===r.memoizedProps&&J===r.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&J===r.memoizedState||(l.flags|=1024),g=!1)}return y=g,ng(r,l),g=(l.flags&128)!==0,y||g?(y=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,r!==null&&g?(l.child=nc(l,r.child,null,v),l.child=nc(l,null,d,v)):kn(r,l,d,v),l.memoizedState=y.state,r=l.child):r=yo(r,l,v),r}function oT(r,l,d,g){return Yu(),l.flags|=256,kn(r,l,d,g),l.child}var cv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uv(r){return{baseLanes:r,cachePool:$E()}}function dv(r,l,d){return r=r!==null?r.childLanes&~d:0,l&&(r|=Gi),r}function rT(r,l,d){var g=l.pendingProps,v=!1,y=(l.flags&128)!==0,D;if((D=y)||(D=r!==null&&r.memoizedState===null?!1:(Sn.current&2)!==0),D&&(v=!0,l.flags&=-129),D=(l.flags&32)!==0,l.flags&=-33,r===null){if(ft){if(v?sr(l):or(),ft){var k=Kt,W;if(W=k){e:{for(W=k,k=Es;W.nodeType!==8;){if(!k){k=null;break e}if(W=rs(W.nextSibling),W===null){k=null;break e}}k=W}k!==null?(l.memoizedState={dehydrated:k,treeContext:ya!==null?{id:fo,overflow:go}:null,retryLane:536870912,hydrationErrors:null},W=vi(18,null,null,0),W.stateNode=k,W.return=l,l.child=W,ti=l,Kt=null,W=!0):W=!1}W||ba(l)}if(k=l.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Kv(k)?l.lanes=32:l.lanes=536870912,null;vo(l)}return k=g.children,g=g.fallback,v?(or(),v=l.mode,k=ig({mode:"hidden",children:k},v),g=va(g,v,d,null),k.return=l,g.return=l,k.sibling=g,l.child=k,v=l.child,v.memoizedState=uv(d),v.childLanes=dv(r,D,d),l.memoizedState=cv,g):(sr(l),hv(l,k))}if(W=r.memoizedState,W!==null&&(k=W.dehydrated,k!==null)){if(y)l.flags&256?(sr(l),l.flags&=-257,l=fv(r,l,d)):l.memoizedState!==null?(or(),l.child=r.child,l.flags|=128,l=null):(or(),v=g.fallback,k=l.mode,g=ig({mode:"visible",children:g.children},k),v=va(v,k,d,null),v.flags|=2,g.return=l,v.return=l,g.sibling=v,l.child=g,nc(l,r.child,null,d),g=l.child,g.memoizedState=uv(d),g.childLanes=dv(r,D,d),l.memoizedState=cv,l=v);else if(sr(l),Kv(k)){if(D=k.nextSibling&&k.nextSibling.dataset,D)var X=D.dgst;D=X,g=Error(i(419)),g.stack="",g.digest=D,Qu({value:g,source:null,stack:null}),l=fv(r,l,d)}else if(xn||Xu(r,l,d,!1),D=(d&r.childLanes)!==0,xn||D){if(D=Mt,D!==null&&(g=d&-d,g=(g&42)!==0?1:$o(g),g=(g&(D.suspendedLanes|d))!==0?0:g,g!==0&&g!==W.retryLane))throw W.retryLane=g,jl(r,g),Ri(D,r,g),X0;k.data==="$?"||Mv(),l=fv(r,l,d)}else k.data==="$?"?(l.flags|=192,l.child=r.child,l=null):(r=W.treeContext,Kt=rs(k.nextSibling),ti=l,ft=!0,Sa=null,Es=!1,r!==null&&(Vi[Ni++]=fo,Vi[Ni++]=go,Vi[Ni++]=ya,fo=r.id,go=r.overflow,ya=l),l=hv(l,g.children),l.flags|=4096);return l}return v?(or(),v=g.fallback,k=l.mode,W=r.child,X=W.sibling,g=ho(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,X!==null?v=ho(X,v):(v=va(v,k,d,null),v.flags|=2),v.return=l,g.return=l,g.sibling=v,l.child=g,g=v,v=l.child,k=r.child.memoizedState,k===null?k=uv(d):(W=k.cachePool,W!==null?(X=wn._currentValue,W=W.parent!==X?{parent:X,pool:X}:W):W=$E(),k={baseLanes:k.baseLanes|d,cachePool:W}),v.memoizedState=k,v.childLanes=dv(r,D,d),l.memoizedState=cv,g):(sr(l),d=r.child,r=d.sibling,d=ho(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,r!==null&&(D=l.deletions,D===null?(l.deletions=[r],l.flags|=16):D.push(r)),l.child=d,l.memoizedState=null,d)}function hv(r,l){return l=ig({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function ig(r,l){return r=vi(22,r,null,l),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function fv(r,l,d){return nc(l,r.child,null,d),r=hv(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function aT(r,l,d){r.lanes|=l;var g=r.alternate;g!==null&&(g.lanes|=l),MC(r.return,l,d)}function gv(r,l,d,g,v){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:v}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=g,y.tail=d,y.tailMode=v)}function lT(r,l,d){var g=l.pendingProps,v=g.revealOrder,y=g.tail;if(kn(r,l,g.children,d),g=Sn.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&aT(r,d,l);else if(r.tag===19)aT(r,d,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}g&=1}switch(ne(Sn,g),v){case"forwards":for(d=l.child,v=null;d!==null;)r=d.alternate,r!==null&&Jf(r)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),gv(l,!1,v,d,y);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(r=v.alternate,r!==null&&Jf(r)===null){l.child=v;break}r=v.sibling,v.sibling=d,d=v,v=r}gv(l,!0,d,null,y);break;case"together":gv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function yo(r,l,d){if(r!==null&&(l.dependencies=r.dependencies),ur|=l.lanes,(d&l.childLanes)===0)if(r!==null){if(Xu(r,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(i(153));if(l.child!==null){for(r=l.child,d=ho(r,r.pendingProps),l.child=d,d.return=l;r.sibling!==null;)r=r.sibling,d=d.sibling=ho(r,r.pendingProps),d.return=l;d.sibling=null}return l.child}function pv(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&Vf(r)))}function zV(r,l,d){switch(l.tag){case 3:et(l,l.stateNode.containerInfo),Jo(l,wn,r.memoizedState.cache),Yu();break;case 27:case 5:Ht(l);break;case 4:et(l,l.stateNode.containerInfo);break;case 10:Jo(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(sr(l),l.flags|=128,null):(d&l.child.childLanes)!==0?rT(r,l,d):(sr(l),r=yo(r,l,d),r!==null?r.sibling:null);sr(l);break;case 19:var v=(r.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(Xu(r,l,d,!1),g=(d&l.childLanes)!==0),v){if(g)return lT(r,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ne(Sn,Sn.current),g)break;return null;case 22:case 23:return l.lanes=0,tT(r,l,d);case 24:Jo(l,wn,r.memoizedState.cache)}return yo(r,l,d)}function cT(r,l,d){if(r!==null)if(r.memoizedProps!==l.pendingProps)xn=!0;else{if(!pv(r,d)&&(l.flags&128)===0)return xn=!1,zV(r,l,d);xn=(r.flags&131072)!==0}else xn=!1,ft&&(l.flags&1048576)!==0&&BE(l,Of,l.index);switch(l.lanes=0,l.tag){case 16:e:{r=l.pendingProps;var g=l.elementType,v=g._init;if(g=v(g._payload),l.type=g,typeof g=="function")EC(g)?(r=Da(g,r),l.tag=1,l=sT(null,l,g,r,d)):(l.tag=0,l=lv(null,l,g,r,d));else{if(g!=null){if(v=g.$$typeof,v===U){l.tag=11,l=Z0(null,l,g,r,d);break e}else if(v===I){l.tag=14,l=J0(null,l,g,r,d);break e}}throw l=Re(g)||g,Error(i(306,l,""))}}return l;case 0:return lv(r,l,l.type,l.pendingProps,d);case 1:return g=l.type,v=Da(g,l.pendingProps),sT(r,l,g,v,d);case 3:e:{if(et(l,l.stateNode.containerInfo),r===null)throw Error(i(387));g=l.pendingProps;var y=l.memoizedState;v=y.element,NC(r,l),sd(l,g,null,d);var D=l.memoizedState;if(g=D.cache,Jo(l,wn,g),g!==y.cache&&IC(l,[wn],d,!0),id(),g=D.element,y.isDehydrated)if(y={element:g,isDehydrated:!1,cache:D.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=oT(r,l,g,d);break e}else if(g!==v){v=Li(Error(i(424)),l),Qu(v),l=oT(r,l,g,d);break e}else{switch(r=l.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Kt=rs(r.firstChild),ti=l,ft=!0,Sa=null,Es=!0,d=H0(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Yu(),g===v){l=yo(r,l,d);break e}kn(r,l,g,d)}l=l.child}return l;case 26:return ng(r,l),r===null?(d=fx(l.type,null,l.pendingProps,null))?l.memoizedState=d:ft||(d=l.type,r=l.pendingProps,g=Cg(xe.current).createElement(d),g[Cn]=l,g[ln]=r,On(g,d,r),Zt(g),l.stateNode=g):l.memoizedState=fx(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return Ht(l),r===null&&ft&&(g=l.stateNode=ux(l.type,l.pendingProps,xe.current),ti=l,Es=!0,v=Kt,gr(l.type)?(Yv=v,Kt=rs(g.firstChild)):Kt=v),kn(r,l,l.pendingProps.children,d),ng(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&ft&&((v=g=Kt)&&(g=mN(g,l.type,l.pendingProps,Es),g!==null?(l.stateNode=g,ti=l,Kt=rs(g.firstChild),Es=!1,v=!0):v=!1),v||ba(l)),Ht(l),v=l.type,y=l.pendingProps,D=r!==null?r.memoizedProps:null,g=y.children,jv(v,y)?g=null:D!==null&&jv(v,D)&&(l.flags|=32),l.memoizedState!==null&&(v=WC(r,l,kV,null,null,d),xd._currentValue=v),ng(r,l),kn(r,l,g,d),l.child;case 6:return r===null&&ft&&((r=d=Kt)&&(d=CN(d,l.pendingProps,Es),d!==null?(l.stateNode=d,ti=l,Kt=null,r=!0):r=!1),r||ba(l)),null;case 13:return rT(r,l,d);case 4:return et(l,l.stateNode.containerInfo),g=l.pendingProps,r===null?l.child=nc(l,null,g,d):kn(r,l,g,d),l.child;case 11:return Z0(r,l,l.type,l.pendingProps,d);case 7:return kn(r,l,l.pendingProps,d),l.child;case 8:return kn(r,l,l.pendingProps.children,d),l.child;case 12:return kn(r,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,Jo(l,l.type,g.value),kn(r,l,g.children,d),l.child;case 9:return v=l.type._context,g=l.pendingProps.children,Ea(l),v=Wn(v),g=g(v),l.flags|=1,kn(r,l,g,d),l.child;case 14:return J0(r,l,l.type,l.pendingProps,d);case 15:return eT(r,l,l.type,l.pendingProps,d);case 19:return lT(r,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},r===null?(d=ig(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=ho(r.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return tT(r,l,d);case 24:return Ea(l),g=Wn(wn),r===null?(v=LC(),v===null&&(v=Mt,y=_C(),v.pooledCache=y,y.refCount++,y!==null&&(v.pooledCacheLanes|=d),v=y),l.memoizedState={parent:g,cache:v},VC(l),Jo(l,wn,v)):((r.lanes&d)!==0&&(NC(r,l),sd(l,null,null,d),id()),v=r.memoizedState,y=l.memoizedState,v.parent!==g?(v={parent:g,cache:g},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),Jo(l,wn,g)):(g=y.cache,Jo(l,wn,g),g!==v.cache&&IC(l,[wn],d,!0))),kn(r,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function wo(r){r.flags|=4}function uT(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!vx(l)){if(l=Bi.current,l!==null&&((rt&4194048)===rt?Ts!==null:(rt&62914560)!==rt&&(rt&536870912)===0||l!==Ts))throw td=OC,qE;r.flags|=8192}}function sg(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Au():536870912,r.lanes|=l,rc|=l)}function dd(r,l){if(!ft)switch(r.tailMode){case"hidden":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function zt(r){var l=r.alternate!==null&&r.alternate.child===r.child,d=0,g=0;if(l)for(var v=r.child;v!==null;)d|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)d|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=g,r.childLanes=d,l}function UV(r,l,d){var g=l.pendingProps;switch(AC(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return d=l.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),mo(wn),We(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Ku(l)?wo(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,zE())),zt(l),null;case 26:return d=l.memoizedState,r===null?(wo(l),d!==null?(zt(l),uT(l,d)):(zt(l),l.flags&=-16777217)):d?d!==r.memoizedState?(wo(l),zt(l),uT(l,d)):(zt(l),l.flags&=-16777217):(r.memoizedProps!==g&&wo(l),zt(l),l.flags&=-16777217),null;case 27:gt(l),d=xe.current;var v=l.type;if(r!==null&&l.stateNode!=null)r.memoizedProps!==g&&wo(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return zt(l),null}r=me.current,Ku(l)?GE(l):(r=ux(v,g,d),l.stateNode=r,wo(l))}return zt(l),null;case 5:if(gt(l),d=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==g&&wo(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return zt(l),null}if(r=me.current,Ku(l))GE(l);else{switch(v=Cg(xe.current),r){case 1:r=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:r=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":r=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":r=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?r.multiple=!0:g.size&&(r.size=g.size);break;default:r=typeof g.is=="string"?v.createElement(d,{is:g.is}):v.createElement(d)}}r[Cn]=l,r[ln]=g;e:for(v=l.child;v!==null;){if(v.tag===5||v.tag===6)r.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break e;for(;v.sibling===null;){if(v.return===null||v.return===l)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}l.stateNode=r;e:switch(On(r,d,g),d){case"button":case"input":case"select":case"textarea":r=!!g.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&wo(l)}}return zt(l),l.flags&=-16777217,null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==g&&wo(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(i(166));if(r=xe.current,Ku(l)){if(r=l.stateNode,d=l.memoizedProps,g=null,v=ti,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}r[Cn]=l,r=!!(r.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||ix(r.nodeValue,d)),r||ba(l)}else r=Cg(r).createTextNode(g),r[Cn]=l,l.stateNode=r}return zt(l),null;case 13:if(g=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Ku(l),g!==null&&g.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Cn]=l}else Yu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),v=!1}else v=zE(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(vo(l),l):(vo(l),null)}if(vo(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,r=r!==null&&r.memoizedState!==null,d){g=l.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var y=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(y=g.memoizedState.cachePool.pool),y!==v&&(g.flags|=2048)}return d!==r&&d&&(l.child.flags|=8192),sg(l,l.updateQueue),zt(l),null;case 4:return We(),r===null&&Gv(l.stateNode.containerInfo),zt(l),null;case 10:return mo(l.type),zt(l),null;case 19:if(le(Sn),v=l.memoizedState,v===null)return zt(l),null;if(g=(l.flags&128)!==0,y=v.rendering,y===null)if(g)dd(v,!1);else{if(Yt!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(y=Jf(r),y!==null){for(l.flags|=128,dd(v,!1),r=y.updateQueue,l.updateQueue=r,sg(l,r),l.subtreeFlags=0,r=d,d=l.child;d!==null;)NE(d,r),d=d.sibling;return ne(Sn,Sn.current&1|2),l.child}r=r.sibling}v.tail!==null&&ht()>ag&&(l.flags|=128,g=!0,dd(v,!1),l.lanes=4194304)}else{if(!g)if(r=Jf(y),r!==null){if(l.flags|=128,g=!0,r=r.updateQueue,l.updateQueue=r,sg(l,r),dd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!y.alternate&&!ft)return zt(l),null}else 2*ht()-v.renderingStartTime>ag&&d!==536870912&&(l.flags|=128,g=!0,dd(v,!1),l.lanes=4194304);v.isBackwards?(y.sibling=l.child,l.child=y):(r=v.last,r!==null?r.sibling=y:l.child=y,v.last=y)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=ht(),l.sibling=null,r=Sn.current,ne(Sn,g?r&1|2:r&1),l):(zt(l),null);case 22:case 23:return vo(l),zC(),g=l.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),d=l.updateQueue,d!==null&&sg(l,d.retryQueue),d=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),r!==null&&le(Ta),null;case 24:return d=null,r!==null&&(d=r.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),mo(wn),zt(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function WV(r,l){switch(AC(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return mo(wn),We(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return gt(l),null;case 13:if(vo(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Yu()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return le(Sn),null;case 4:return We(),null;case 10:return mo(l.type),null;case 22:case 23:return vo(l),zC(),r!==null&&le(Ta),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return mo(wn),null;case 25:return null;default:return null}}function dT(r,l){switch(AC(l),l.tag){case 3:mo(wn),We();break;case 26:case 27:case 5:gt(l);break;case 4:We();break;case 13:vo(l);break;case 19:le(Sn);break;case 10:mo(l.type);break;case 22:case 23:vo(l),zC(),r!==null&&le(Ta);break;case 24:mo(wn)}}function hd(r,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&r)===r){g=void 0;var y=d.create,D=d.inst;g=y(),D.destroy=g}d=d.next}while(d!==v)}}catch(k){Ft(l,l.return,k)}}function rr(r,l,d){try{var g=l.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var y=v.next;g=y;do{if((g.tag&r)===r){var D=g.inst,k=D.destroy;if(k!==void 0){D.destroy=void 0,v=l;var W=d,X=k;try{X()}catch(ce){Ft(v,W,ce)}}}g=g.next}while(g!==y)}}catch(ce){Ft(l,l.return,ce)}}function hT(r){var l=r.updateQueue;if(l!==null){var d=r.stateNode;try{JE(l,d)}catch(g){Ft(r,r.return,g)}}}function fT(r,l,d){d.props=Da(r.type,r.memoizedProps),d.state=r.memoizedState;try{d.componentWillUnmount()}catch(g){Ft(r,l,g)}}function fd(r,l){try{var d=r.ref;if(d!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof d=="function"?r.refCleanup=d(g):d.current=g}}catch(v){Ft(r,l,v)}}function xs(r,l){var d=r.ref,g=r.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(v){Ft(r,l,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Ft(r,l,v)}else d.current=null}function gT(r){var l=r.type,d=r.memoizedProps,g=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(v){Ft(r,r.return,v)}}function mv(r,l,d){try{var g=r.stateNode;dN(g,r.type,d,l),g[ln]=l}catch(v){Ft(r,r.return,v)}}function pT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&gr(r.type)||r.tag===4}function Cv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||pT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&gr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vv(r,l,d){var g=r.tag;if(g===5||g===6)r=r.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(r,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(r),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=mg));else if(g!==4&&(g===27&&gr(r.type)&&(d=r.stateNode,l=null),r=r.child,r!==null))for(vv(r,l,d),r=r.sibling;r!==null;)vv(r,l,d),r=r.sibling}function og(r,l,d){var g=r.tag;if(g===5||g===6)r=r.stateNode,l?d.insertBefore(r,l):d.appendChild(r);else if(g!==4&&(g===27&&gr(r.type)&&(d=r.stateNode),r=r.child,r!==null))for(og(r,l,d),r=r.sibling;r!==null;)og(r,l,d),r=r.sibling}function mT(r){var l=r.stateNode,d=r.memoizedProps;try{for(var g=r.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);On(l,g,d),l[Cn]=r,l[ln]=d}catch(y){Ft(r,r.return,y)}}var So=!1,en=!1,yv=!1,CT=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function jV(r,l){if(r=r.containerInfo,Uv=Rg,r=AE(r),CC(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var v=g.anchorOffset,y=g.focusNode;g=g.focusOffset;try{d.nodeType,y.nodeType}catch{d=null;break e}var D=0,k=-1,W=-1,X=0,ce=0,he=r,J=null;t:for(;;){for(var te;he!==d||v!==0&&he.nodeType!==3||(k=D+v),he!==y||g!==0&&he.nodeType!==3||(W=D+g),he.nodeType===3&&(D+=he.nodeValue.length),(te=he.firstChild)!==null;)J=he,he=te;for(;;){if(he===r)break t;if(J===d&&++X===v&&(k=D),J===y&&++ce===g&&(W=D),(te=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=te}d=k===-1||W===-1?null:{start:k,end:W}}else d=null}d=d||{start:0,end:0}}else d=null;for(Wv={focusedElem:r,selectionRange:d},Rg=!1,Dn=l;Dn!==null;)if(l=Dn,r=l.child,(l.subtreeFlags&1024)!==0&&r!==null)r.return=l,Dn=r;else for(;Dn!==null;){switch(l=Dn,y=l.alternate,r=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,d=l,v=y.memoizedProps,y=y.memoizedState,g=d.stateNode;try{var Ne=Da(d.type,v,d.elementType===d.type);r=g.getSnapshotBeforeUpdate(Ne,y),g.__reactInternalSnapshotBeforeUpdate=r}catch(ke){Ft(d,d.return,ke)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,d=r.nodeType,d===9)qv(r);else if(d===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qv(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=l.sibling,r!==null){r.return=l.return,Dn=r;break}Dn=l.return}}function vT(r,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:ar(r,d),g&4&&hd(5,d);break;case 1:if(ar(r,d),g&4)if(r=d.stateNode,l===null)try{r.componentDidMount()}catch(D){Ft(d,d.return,D)}else{var v=Da(d.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(v,l,r.__reactInternalSnapshotBeforeUpdate)}catch(D){Ft(d,d.return,D)}}g&64&&hT(d),g&512&&fd(d,d.return);break;case 3:if(ar(r,d),g&64&&(r=d.updateQueue,r!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{JE(r,l)}catch(D){Ft(d,d.return,D)}}break;case 27:l===null&&g&4&&mT(d);case 26:case 5:ar(r,d),l===null&&g&4&&gT(d),g&512&&fd(d,d.return);break;case 12:ar(r,d);break;case 13:ar(r,d),g&4&&ST(r,d),g&64&&(r=d.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(d=eN.bind(null,d),vN(r,d))));break;case 22:if(g=d.memoizedState!==null||So,!g){l=l!==null&&l.memoizedState!==null||en,v=So;var y=en;So=g,(en=l)&&!y?lr(r,d,(d.subtreeFlags&8772)!==0):ar(r,d),So=v,en=y}break;case 30:break;default:ar(r,d)}}function yT(r){var l=r.alternate;l!==null&&(r.alternate=null,yT(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&Yo(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Bt=null,li=!1;function bo(r,l,d){for(d=d.child;d!==null;)wT(r,l,d),d=d.sibling}function wT(r,l,d){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Ie,d)}catch{}switch(d.tag){case 26:en||xs(d,l),bo(r,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:en||xs(d,l);var g=Bt,v=li;gr(d.type)&&(Bt=d.stateNode,li=!1),bo(r,l,d),bd(d.stateNode),Bt=g,li=v;break;case 5:en||xs(d,l);case 6:if(g=Bt,v=li,Bt=null,bo(r,l,d),Bt=g,li=v,Bt!==null)if(li)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(d.stateNode)}catch(y){Ft(d,l,y)}else try{Bt.removeChild(d.stateNode)}catch(y){Ft(d,l,y)}break;case 18:Bt!==null&&(li?(r=Bt,lx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,d.stateNode),Pd(r)):lx(Bt,d.stateNode));break;case 4:g=Bt,v=li,Bt=d.stateNode.containerInfo,li=!0,bo(r,l,d),Bt=g,li=v;break;case 0:case 11:case 14:case 15:en||rr(2,d,l),en||rr(4,d,l),bo(r,l,d);break;case 1:en||(xs(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&fT(d,l,g)),bo(r,l,d);break;case 21:bo(r,l,d);break;case 22:en=(g=en)||d.memoizedState!==null,bo(r,l,d),en=g;break;default:bo(r,l,d)}}function ST(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Pd(r)}catch(d){Ft(l,l.return,d)}}function $V(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new CT),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new CT),l;default:throw Error(i(435,r.tag))}}function wv(r,l){var d=$V(r);l.forEach(function(g){var v=tN.bind(null,r,g);d.has(g)||(d.add(g),g.then(v,v))})}function yi(r,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var v=d[g],y=r,D=l,k=D;e:for(;k!==null;){switch(k.tag){case 27:if(gr(k.type)){Bt=k.stateNode,li=!1;break e}break;case 5:Bt=k.stateNode,li=!1;break e;case 3:case 4:Bt=k.stateNode.containerInfo,li=!0;break e}k=k.return}if(Bt===null)throw Error(i(160));wT(y,D,v),Bt=null,li=!1,y=v.alternate,y!==null&&(y.return=null),v.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)bT(l,r),l=l.sibling}var os=null;function bT(r,l){var d=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yi(l,r),wi(r),g&4&&(rr(3,r,r.return),hd(3,r),rr(5,r,r.return));break;case 1:yi(l,r),wi(r),g&512&&(en||d===null||xs(d,d.return)),g&64&&So&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(d=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var v=os;if(yi(l,r),wi(r),g&512&&(en||d===null||xs(d,d.return)),g&4){var y=d!==null?d.memoizedState:null;if(g=r.memoizedState,d===null)if(g===null)if(r.stateNode===null){e:{g=r.type,d=r.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":y=v.getElementsByTagName("title")[0],(!y||y[na]||y[Cn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=v.createElement(g),v.head.insertBefore(y,v.querySelector("head > title"))),On(y,g,d),y[Cn]=r,Zt(y),g=y;break e;case"link":var D=mx("link","href",v).get(g+(d.href||""));if(D){for(var k=0;k<D.length;k++)if(y=D[k],y.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&y.getAttribute("rel")===(d.rel==null?null:d.rel)&&y.getAttribute("title")===(d.title==null?null:d.title)&&y.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){D.splice(k,1);break t}}y=v.createElement(g),On(y,g,d),v.head.appendChild(y);break;case"meta":if(D=mx("meta","content",v).get(g+(d.content||""))){for(k=0;k<D.length;k++)if(y=D[k],y.getAttribute("content")===(d.content==null?null:""+d.content)&&y.getAttribute("name")===(d.name==null?null:d.name)&&y.getAttribute("property")===(d.property==null?null:d.property)&&y.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&y.getAttribute("charset")===(d.charSet==null?null:d.charSet)){D.splice(k,1);break t}}y=v.createElement(g),On(y,g,d),v.head.appendChild(y);break;default:throw Error(i(468,g))}y[Cn]=r,Zt(y),g=y}r.stateNode=g}else Cx(v,r.type,r.stateNode);else r.stateNode=px(v,g,r.memoizedProps);else y!==g?(y===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):y.count--,g===null?Cx(v,r.type,r.stateNode):px(v,g,r.memoizedProps)):g===null&&r.stateNode!==null&&mv(r,r.memoizedProps,d.memoizedProps)}break;case 27:yi(l,r),wi(r),g&512&&(en||d===null||xs(d,d.return)),d!==null&&g&4&&mv(r,r.memoizedProps,d.memoizedProps);break;case 5:if(yi(l,r),wi(r),g&512&&(en||d===null||xs(d,d.return)),r.flags&32){v=r.stateNode;try{Mi(v,"")}catch(te){Ft(r,r.return,te)}}g&4&&r.stateNode!=null&&(v=r.memoizedProps,mv(r,v,d!==null?d.memoizedProps:v)),g&1024&&(yv=!0);break;case 6:if(yi(l,r),wi(r),g&4){if(r.stateNode===null)throw Error(i(162));g=r.memoizedProps,d=r.stateNode;try{d.nodeValue=g}catch(te){Ft(r,r.return,te)}}break;case 3:if(wg=null,v=os,os=vg(l.containerInfo),yi(l,r),os=v,wi(r),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Pd(l.containerInfo)}catch(te){Ft(r,r.return,te)}yv&&(yv=!1,RT(r));break;case 4:g=os,os=vg(r.stateNode.containerInfo),yi(l,r),wi(r),os=g;break;case 12:yi(l,r),wi(r);break;case 13:yi(l,r),wi(r),r.child.flags&8192&&r.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(xv=ht()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,wv(r,g)));break;case 22:v=r.memoizedState!==null;var W=d!==null&&d.memoizedState!==null,X=So,ce=en;if(So=X||v,en=ce||W,yi(l,r),en=ce,So=X,wi(r),g&8192)e:for(l=r.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(d===null||W||So||en||Aa(r)),d=null,l=r;;){if(l.tag===5||l.tag===26){if(d===null){W=d=l;try{if(y=W.stateNode,v)D=y.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{k=W.stateNode;var he=W.memoizedProps.style,J=he!=null&&he.hasOwnProperty("display")?he.display:null;k.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(te){Ft(W,W.return,te)}}}else if(l.tag===6){if(d===null){W=l;try{W.stateNode.nodeValue=v?"":W.memoizedProps}catch(te){Ft(W,W.return,te)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=r.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,wv(r,d))));break;case 19:yi(l,r),wi(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,wv(r,g)));break;case 30:break;case 21:break;default:yi(l,r),wi(r)}}function wi(r){var l=r.flags;if(l&2){try{for(var d,g=r.return;g!==null;){if(pT(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var v=d.stateNode,y=Cv(r);og(r,y,v);break;case 5:var D=d.stateNode;d.flags&32&&(Mi(D,""),d.flags&=-33);var k=Cv(r);og(r,k,D);break;case 3:case 4:var W=d.stateNode.containerInfo,X=Cv(r);vv(r,X,W);break;default:throw Error(i(161))}}catch(ce){Ft(r,r.return,ce)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function RT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;RT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function ar(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)vT(r,l.alternate,l),l=l.sibling}function Aa(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:rr(4,l,l.return),Aa(l);break;case 1:xs(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&fT(l,l.return,d),Aa(l);break;case 27:bd(l.stateNode);case 26:case 5:xs(l,l.return),Aa(l);break;case 22:l.memoizedState===null&&Aa(l);break;case 30:Aa(l);break;default:Aa(l)}r=r.sibling}}function lr(r,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,v=r,y=l,D=y.flags;switch(y.tag){case 0:case 11:case 15:lr(v,y,d),hd(4,y);break;case 1:if(lr(v,y,d),g=y,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(X){Ft(g,g.return,X)}if(g=y,v=g.updateQueue,v!==null){var k=g.stateNode;try{var W=v.shared.hiddenCallbacks;if(W!==null)for(v.shared.hiddenCallbacks=null,v=0;v<W.length;v++)ZE(W[v],k)}catch(X){Ft(g,g.return,X)}}d&&D&64&&hT(y),fd(y,y.return);break;case 27:mT(y);case 26:case 5:lr(v,y,d),d&&g===null&&D&4&&gT(y),fd(y,y.return);break;case 12:lr(v,y,d);break;case 13:lr(v,y,d),d&&D&4&&ST(v,y);break;case 22:y.memoizedState===null&&lr(v,y,d),fd(y,y.return);break;case 30:break;default:lr(v,y,d)}l=l.sibling}}function Sv(r,l){var d=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==d&&(r!=null&&r.refCount++,d!=null&&Zu(d))}function bv(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&Zu(r))}function Ds(r,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ET(r,l,d,g),l=l.sibling}function ET(r,l,d,g){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Ds(r,l,d,g),v&2048&&hd(9,l);break;case 1:Ds(r,l,d,g);break;case 3:Ds(r,l,d,g),v&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&Zu(r)));break;case 12:if(v&2048){Ds(r,l,d,g),r=l.stateNode;try{var y=l.memoizedProps,D=y.id,k=y.onPostCommit;typeof k=="function"&&k(D,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(W){Ft(l,l.return,W)}}else Ds(r,l,d,g);break;case 13:Ds(r,l,d,g);break;case 23:break;case 22:y=l.stateNode,D=l.alternate,l.memoizedState!==null?y._visibility&2?Ds(r,l,d,g):gd(r,l):y._visibility&2?Ds(r,l,d,g):(y._visibility|=2,ic(r,l,d,g,(l.subtreeFlags&10256)!==0)),v&2048&&Sv(D,l);break;case 24:Ds(r,l,d,g),v&2048&&bv(l.alternate,l);break;default:Ds(r,l,d,g)}}function ic(r,l,d,g,v){for(v=v&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=r,D=l,k=d,W=g,X=D.flags;switch(D.tag){case 0:case 11:case 15:ic(y,D,k,W,v),hd(8,D);break;case 23:break;case 22:var ce=D.stateNode;D.memoizedState!==null?ce._visibility&2?ic(y,D,k,W,v):gd(y,D):(ce._visibility|=2,ic(y,D,k,W,v)),v&&X&2048&&Sv(D.alternate,D);break;case 24:ic(y,D,k,W,v),v&&X&2048&&bv(D.alternate,D);break;default:ic(y,D,k,W,v)}l=l.sibling}}function gd(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=r,g=l,v=g.flags;switch(g.tag){case 22:gd(d,g),v&2048&&Sv(g.alternate,g);break;case 24:gd(d,g),v&2048&&bv(g.alternate,g);break;default:gd(d,g)}l=l.sibling}}var pd=8192;function sc(r){if(r.subtreeFlags&pd)for(r=r.child;r!==null;)TT(r),r=r.sibling}function TT(r){switch(r.tag){case 26:sc(r),r.flags&pd&&r.memoizedState!==null&&MN(os,r.memoizedState,r.memoizedProps);break;case 5:sc(r);break;case 3:case 4:var l=os;os=vg(r.stateNode.containerInfo),sc(r),os=l;break;case 22:r.memoizedState===null&&(l=r.alternate,l!==null&&l.memoizedState!==null?(l=pd,pd=16777216,sc(r),pd=l):sc(r));break;default:sc(r)}}function xT(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function md(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Dn=g,AT(g,r)}xT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)DT(r),r=r.sibling}function DT(r){switch(r.tag){case 0:case 11:case 15:md(r),r.flags&2048&&rr(9,r,r.return);break;case 3:md(r);break;case 12:md(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,rg(r)):md(r);break;default:md(r)}}function rg(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Dn=g,AT(g,r)}xT(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:rr(8,l,l.return),rg(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,rg(l));break;default:rg(l)}r=r.sibling}}function AT(r,l){for(;Dn!==null;){var d=Dn;switch(d.tag){case 0:case 11:case 15:rr(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Zu(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Dn=g;else e:for(d=r;Dn!==null;){g=Dn;var v=g.sibling,y=g.return;if(yT(g),g===d){Dn=null;break e}if(v!==null){v.return=y,Dn=v;break e}Dn=y}}}var qV={getCacheForType:function(r){var l=Wn(wn),d=l.data.get(r);return d===void 0&&(d=r(),l.data.set(r,d)),d}},KV=typeof WeakMap=="function"?WeakMap:Map,wt=0,Mt=null,Ze=null,rt=0,St=0,Si=null,cr=!1,oc=!1,Rv=!1,Ro=0,Yt=0,ur=0,Fa=0,Ev=0,Gi=0,rc=0,Cd=null,ci=null,Tv=!1,xv=0,ag=1/0,lg=null,dr=null,Ln=0,hr=null,ac=null,lc=0,Dv=0,Av=null,FT=null,vd=0,Fv=null;function bi(){if((wt&2)!==0&&rt!==0)return rt&-rt;if(K.T!==null){var r=Yl;return r!==0?r:Ov()}return qo()}function PT(){Gi===0&&(Gi=(rt&536870912)===0||ft?Du():536870912);var r=Bi.current;return r!==null&&(r.flags|=32),Gi}function Ri(r,l,d){(r===Mt&&(St===2||St===9)||r.cancelPendingCommit!==null)&&(cc(r,0),fr(r,rt,Gi,!1)),eo(r,d),((wt&2)===0||r!==Mt)&&(r===Mt&&((wt&2)===0&&(Fa|=d),Yt===4&&fr(r,rt,Gi,!1)),As(r))}function MT(r,l,d){if((wt&6)!==0)throw Error(i(327));var g=!d&&(l&124)===0&&(l&r.expiredLanes)===0||ta(r,l),v=g?XV(r,l):Iv(r,l,!0),y=g;do{if(v===0){oc&&!g&&fr(r,l,0,!1);break}else{if(d=r.current.alternate,y&&!YV(d)){v=Iv(r,l,!1),y=!1;continue}if(v===2){if(y=l,r.errorRecoveryDisabledLanes&y)var D=0;else D=r.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){l=D;e:{var k=r;v=Cd;var W=k.current.memoizedState.isDehydrated;if(W&&(cc(k,D).flags|=256),D=Iv(k,D,!1),D!==2){if(Rv&&!W){k.errorRecoveryDisabledLanes|=y,Fa|=y,v=4;break e}y=ci,ci=v,y!==null&&(ci===null?ci=y:ci.push.apply(ci,y))}v=D}if(y=!1,v!==2)continue}}if(v===1){cc(r,0),fr(r,l,0,!0);break}e:{switch(g=r,y=v,y){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:fr(g,l,Gi,!cr);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(v=xv+300-ht(),10<v)){if(fr(g,l,Gi,!cr),xl(g,0,!0)!==0)break e;g.timeoutHandle=rx(IT.bind(null,g,d,ci,lg,Tv,l,Gi,Fa,rc,cr,y,2,-0,0),v);break e}IT(g,d,ci,lg,Tv,l,Gi,Fa,rc,cr,y,0,-0,0)}}break}while(!0);As(r)}function IT(r,l,d,g,v,y,D,k,W,X,ce,he,J,te){if(r.timeoutHandle=-1,he=l.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Td={stylesheets:null,count:0,unsuspend:PN},TT(l),he=IN(),he!==null)){r.cancelPendingCommit=he(BT.bind(null,r,l,y,d,g,v,D,k,W,ce,1,J,te)),fr(r,y,D,!X);return}BT(r,l,y,d,g,v,D,k,W)}function YV(r){for(var l=r;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var v=d[g],y=v.getSnapshot;v=v.value;try{if(!Ci(y(),v))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fr(r,l,d,g){l&=~Ev,l&=~Fa,r.suspendedLanes|=l,r.pingedLanes&=~l,g&&(r.warmLanes|=l),g=r.expirationTimes;for(var v=l;0<v;){var y=31-pt(v),D=1<<y;g[y]=-1,v&=~D}d!==0&&fs(r,d,l)}function cg(){return(wt&6)===0?(yd(0),!1):!0}function Pv(){if(Ze!==null){if(St===0)var r=Ze.return;else r=Ze,po=Ra=null,qC(r),tc=null,cd=0,r=Ze;for(;r!==null;)dT(r.alternate,r),r=r.return;Ze=null}}function cc(r,l){var d=r.timeoutHandle;d!==-1&&(r.timeoutHandle=-1,fN(d)),d=r.cancelPendingCommit,d!==null&&(r.cancelPendingCommit=null,d()),Pv(),Mt=r,Ze=d=ho(r.current,null),rt=l,St=0,Si=null,cr=!1,oc=ta(r,l),Rv=!1,rc=Gi=Ev=Fa=ur=Yt=0,ci=Cd=null,Tv=!1,(l&8)!==0&&(l|=l&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=l;0<g;){var v=31-pt(g),y=1<<v;l|=r[v],g&=~y}return Ro=l,Mf(),d}function _T(r,l){Ye=null,K.H=Qf,l===ed||l===Gf?(l=QE(),St=3):l===qE?(l=QE(),St=4):St=l===X0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Si=l,Ze===null&&(Yt=1,tg(r,Li(l,r.current)))}function kT(){var r=K.H;return K.H=Qf,r===null?Qf:r}function LT(){var r=K.A;return K.A=qV,r}function Mv(){Yt=4,cr||(rt&4194048)!==rt&&Bi.current!==null||(oc=!0),(ur&134217727)===0&&(Fa&134217727)===0||Mt===null||fr(Mt,rt,Gi,!1)}function Iv(r,l,d){var g=wt;wt|=2;var v=kT(),y=LT();(Mt!==r||rt!==l)&&(lg=null,cc(r,l)),l=!1;var D=Yt;e:do try{if(St!==0&&Ze!==null){var k=Ze,W=Si;switch(St){case 8:Pv(),D=6;break e;case 3:case 2:case 9:case 6:Bi.current===null&&(l=!0);var X=St;if(St=0,Si=null,uc(r,k,W,X),d&&oc){D=0;break e}break;default:X=St,St=0,Si=null,uc(r,k,W,X)}}QV(),D=Yt;break}catch(ce){_T(r,ce)}while(!0);return l&&r.shellSuspendCounter++,po=Ra=null,wt=g,K.H=v,K.A=y,Ze===null&&(Mt=null,rt=0,Mf()),D}function QV(){for(;Ze!==null;)OT(Ze)}function XV(r,l){var d=wt;wt|=2;var g=kT(),v=LT();Mt!==r||rt!==l?(lg=null,ag=ht()+500,cc(r,l)):oc=ta(r,l);e:do try{if(St!==0&&Ze!==null){l=Ze;var y=Si;t:switch(St){case 1:St=0,Si=null,uc(r,l,y,1);break;case 2:case 9:if(KE(y)){St=0,Si=null,VT(l);break}l=function(){St!==2&&St!==9||Mt!==r||(St=7),As(r)},y.then(l,l);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:KE(y)?(St=0,Si=null,VT(l)):(St=0,Si=null,uc(r,l,y,7));break;case 5:var D=null;switch(Ze.tag){case 26:D=Ze.memoizedState;case 5:case 27:var k=Ze;if(!D||vx(D)){St=0,Si=null;var W=k.sibling;if(W!==null)Ze=W;else{var X=k.return;X!==null?(Ze=X,ug(X)):Ze=null}break t}}St=0,Si=null,uc(r,l,y,5);break;case 6:St=0,Si=null,uc(r,l,y,6);break;case 8:Pv(),Yt=6;break e;default:throw Error(i(462))}}ZV();break}catch(ce){_T(r,ce)}while(!0);return po=Ra=null,K.H=g,K.A=v,wt=d,Ze!==null?0:(Mt=null,rt=0,Mf(),Yt)}function ZV(){for(;Ze!==null&&!Me();)OT(Ze)}function OT(r){var l=cT(r.alternate,r,Ro);r.memoizedProps=r.pendingProps,l===null?ug(r):Ze=l}function VT(r){var l=r,d=l.alternate;switch(l.tag){case 15:case 0:l=iT(d,l,l.pendingProps,l.type,void 0,rt);break;case 11:l=iT(d,l,l.pendingProps,l.type.render,l.ref,rt);break;case 5:qC(l);default:dT(d,l),l=Ze=NE(l,Ro),l=cT(d,l,Ro)}r.memoizedProps=r.pendingProps,l===null?ug(r):Ze=l}function uc(r,l,d,g){po=Ra=null,qC(l),tc=null,cd=0;var v=l.return;try{if(HV(r,v,l,d,rt)){Yt=1,tg(r,Li(d,r.current)),Ze=null;return}}catch(y){if(v!==null)throw Ze=v,y;Yt=1,tg(r,Li(d,r.current)),Ze=null;return}l.flags&32768?(ft||g===1?r=!0:oc||(rt&536870912)!==0?r=!1:(cr=r=!0,(g===2||g===9||g===3||g===6)&&(g=Bi.current,g!==null&&g.tag===13&&(g.flags|=16384))),NT(l,r)):ug(l)}function ug(r){var l=r;do{if((l.flags&32768)!==0){NT(l,cr);return}r=l.return;var d=UV(l.alternate,l,Ro);if(d!==null){Ze=d;return}if(l=l.sibling,l!==null){Ze=l;return}Ze=l=r}while(l!==null);Yt===0&&(Yt=5)}function NT(r,l){do{var d=WV(r.alternate,r);if(d!==null){d.flags&=32767,Ze=d;return}if(d=r.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(r=r.sibling,r!==null)){Ze=r;return}Ze=r=d}while(r!==null);Yt=6,Ze=null}function BT(r,l,d,g,v,y,D,k,W){r.cancelPendingCommit=null;do dg();while(Ln!==0);if((wt&6)!==0)throw Error(i(327));if(l!==null){if(l===r.current)throw Error(i(177));if(y=l.lanes|l.childLanes,y|=bC,Fu(r,d,y,D,k,W),r===Mt&&(Ze=Mt=null,rt=0),ac=l,hr=r,lc=d,Dv=y,Av=v,FT=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,nN(Pt,function(){return WT(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=K.T,K.T=null,v=ie.p,ie.p=2,D=wt,wt|=4;try{jV(r,l,d)}finally{wt=D,ie.p=v,K.T=g}}Ln=1,GT(),HT(),zT()}}function GT(){if(Ln===1){Ln=0;var r=hr,l=ac,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=K.T,K.T=null;var g=ie.p;ie.p=2;var v=wt;wt|=4;try{bT(l,r);var y=Wv,D=AE(r.containerInfo),k=y.focusedElem,W=y.selectionRange;if(D!==k&&k&&k.ownerDocument&&DE(k.ownerDocument.documentElement,k)){if(W!==null&&CC(k)){var X=W.start,ce=W.end;if(ce===void 0&&(ce=X),"selectionStart"in k)k.selectionStart=X,k.selectionEnd=Math.min(ce,k.value.length);else{var he=k.ownerDocument||document,J=he&&he.defaultView||window;if(J.getSelection){var te=J.getSelection(),Ne=k.textContent.length,ke=Math.min(W.start,Ne),Dt=W.end===void 0?ke:Math.min(W.end,Ne);!te.extend&&ke>Dt&&(D=Dt,Dt=ke,ke=D);var q=xE(k,ke),$=xE(k,Dt);if(q&&$&&(te.rangeCount!==1||te.anchorNode!==q.node||te.anchorOffset!==q.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Q=he.createRange();Q.setStart(q.node,q.offset),te.removeAllRanges(),ke>Dt?(te.addRange(Q),te.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),te.addRange(Q))}}}}for(he=[],te=k;te=te.parentNode;)te.nodeType===1&&he.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<he.length;k++){var ue=he[k];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Rg=!!Uv,Wv=Uv=null}finally{wt=v,ie.p=g,K.T=d}}r.current=l,Ln=2}}function HT(){if(Ln===2){Ln=0;var r=hr,l=ac,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=K.T,K.T=null;var g=ie.p;ie.p=2;var v=wt;wt|=4;try{vT(r,l.alternate,l)}finally{wt=v,ie.p=g,K.T=d}}Ln=3}}function zT(){if(Ln===4||Ln===3){Ln=0,ut();var r=hr,l=ac,d=lc,g=FT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ln=5:(Ln=0,ac=hr=null,UT(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(dr=null),Dl(d),l=l.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Ie,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=K.T,v=ie.p,ie.p=2,K.T=null;try{for(var y=r.onRecoverableError,D=0;D<g.length;D++){var k=g[D];y(k.value,{componentStack:k.stack})}}finally{K.T=l,ie.p=v}}(lc&3)!==0&&dg(),As(r),v=r.pendingLanes,(d&4194090)!==0&&(v&42)!==0?r===Fv?vd++:(vd=0,Fv=r):vd=0,yd(0)}}function UT(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,Zu(l)))}function dg(r){return GT(),HT(),zT(),WT()}function WT(){if(Ln!==5)return!1;var r=hr,l=Dv;Dv=0;var d=Dl(lc),g=K.T,v=ie.p;try{ie.p=32>d?32:d,K.T=null,d=Av,Av=null;var y=hr,D=lc;if(Ln=0,ac=hr=null,lc=0,(wt&6)!==0)throw Error(i(331));var k=wt;if(wt|=4,DT(y.current),ET(y,y.current,D,d),wt=k,yd(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Ie,y)}catch{}return!0}finally{ie.p=v,K.T=g,UT(r,l)}}function jT(r,l,d){l=Li(d,l),l=av(r.stateNode,l,2),r=nr(r,l,2),r!==null&&(eo(r,2),As(r))}function Ft(r,l,d){if(r.tag===3)jT(r,r,d);else for(;l!==null;){if(l.tag===3){jT(l,r,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(dr===null||!dr.has(g))){r=Li(d,r),d=Y0(2),g=nr(l,d,2),g!==null&&(Q0(d,g,l,r),eo(g,2),As(g));break}}l=l.return}}function _v(r,l,d){var g=r.pingCache;if(g===null){g=r.pingCache=new KV;var v=new Set;g.set(l,v)}else v=g.get(l),v===void 0&&(v=new Set,g.set(l,v));v.has(d)||(Rv=!0,v.add(d),r=JV.bind(null,r,l,d),l.then(r,r))}function JV(r,l,d){var g=r.pingCache;g!==null&&g.delete(l),r.pingedLanes|=r.suspendedLanes&d,r.warmLanes&=~d,Mt===r&&(rt&d)===d&&(Yt===4||Yt===3&&(rt&62914560)===rt&&300>ht()-xv?(wt&2)===0&&cc(r,0):Ev|=d,rc===rt&&(rc=0)),As(r)}function $T(r,l){l===0&&(l=Au()),r=jl(r,l),r!==null&&(eo(r,l),As(r))}function eN(r){var l=r.memoizedState,d=0;l!==null&&(d=l.retryLane),$T(r,d)}function tN(r,l){var d=0;switch(r.tag){case 13:var g=r.stateNode,v=r.memoizedState;v!==null&&(d=v.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(l),$T(r,d)}function nN(r,l){return Xt(r,l)}var hg=null,dc=null,kv=!1,fg=!1,Lv=!1,Pa=0;function As(r){r!==dc&&r.next===null&&(dc===null?hg=dc=r:dc=dc.next=r),fg=!0,kv||(kv=!0,sN())}function yd(r,l){if(!Lv&&fg){Lv=!0;do for(var d=!1,g=hg;g!==null;){if(r!==0){var v=g.pendingLanes;if(v===0)var y=0;else{var D=g.suspendedLanes,k=g.pingedLanes;y=(1<<31-pt(42|r)+1)-1,y&=v&~(D&~k),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(d=!0,QT(g,y))}else y=rt,y=xl(g,g===Mt?y:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(y&3)===0||ta(g,y)||(d=!0,QT(g,y));g=g.next}while(d);Lv=!1}}function iN(){qT()}function qT(){fg=kv=!1;var r=0;Pa!==0&&(hN()&&(r=Pa),Pa=0);for(var l=ht(),d=null,g=hg;g!==null;){var v=g.next,y=KT(g,l);y===0?(g.next=null,d===null?hg=v:d.next=v,v===null&&(dc=d)):(d=g,(r!==0||(y&3)!==0)&&(fg=!0)),g=v}yd(r)}function KT(r,l){for(var d=r.suspendedLanes,g=r.pingedLanes,v=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var D=31-pt(y),k=1<<D,W=v[D];W===-1?((k&d)===0||(k&g)!==0)&&(v[D]=xu(k,l)):W<=l&&(r.expiredLanes|=k),y&=~k}if(l=Mt,d=rt,d=xl(r,r===l?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,d===0||r===l&&(St===2||St===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&Ae(g),r.callbackNode=null,r.callbackPriority=0;if((d&3)===0||ta(r,d)){if(l=d&-d,l===r.callbackPriority)return l;switch(g!==null&&Ae(g),Dl(d)){case 2:case 8:d=kt;break;case 32:d=Pt;break;case 268435456:d=Rn;break;default:d=Pt}return g=YT.bind(null,r),d=Xt(d,g),r.callbackPriority=l,r.callbackNode=d,l}return g!==null&&g!==null&&Ae(g),r.callbackPriority=2,r.callbackNode=null,2}function YT(r,l){if(Ln!==0&&Ln!==5)return r.callbackNode=null,r.callbackPriority=0,null;var d=r.callbackNode;if(dg()&&r.callbackNode!==d)return null;var g=rt;return g=xl(r,r===Mt?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(MT(r,g,l),KT(r,ht()),r.callbackNode!=null&&r.callbackNode===d?YT.bind(null,r):null)}function QT(r,l){if(dg())return null;MT(r,l,!0)}function sN(){gN(function(){(wt&6)!==0?Xt(Rt,iN):qT()})}function Ov(){return Pa===0&&(Pa=Du()),Pa}function XT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:_l(""+r)}function ZT(r,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,r.id&&d.setAttribute("form",r.id),l.parentNode.insertBefore(d,l),r=new FormData(r),d.parentNode.removeChild(d),r}function oN(r,l,d,g,v){if(l==="submit"&&d&&d.stateNode===v){var y=XT((v[ln]||null).action),D=g.submitter;D&&(l=(l=D[ln]||null)?XT(l.formAction):D.getAttribute("formAction"),l!==null&&(y=l,D=null));var k=new kl("action","action",null,g,v);r.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Pa!==0){var W=D?ZT(v,D):new FormData(v);nv(d,{pending:!0,data:W,method:v.method,action:y},null,W)}}else typeof y=="function"&&(k.preventDefault(),W=D?ZT(v,D):new FormData(v),nv(d,{pending:!0,data:W,method:v.method,action:y},y,W))},currentTarget:v}]})}}for(var Vv=0;Vv<SC.length;Vv++){var Nv=SC[Vv],rN=Nv.toLowerCase(),aN=Nv[0].toUpperCase()+Nv.slice(1);ss(rN,"on"+aN)}ss(ME,"onAnimationEnd"),ss(IE,"onAnimationIteration"),ss(_E,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(EV,"onTransitionRun"),ss(TV,"onTransitionStart"),ss(xV,"onTransitionCancel"),ss(kE,"onTransitionEnd"),no("onMouseEnter",["mouseout","mouseover"]),no("onMouseLeave",["mouseout","mouseover"]),no("onPointerEnter",["pointerout","pointerover"]),no("onPointerLeave",["pointerout","pointerover"]),ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wd));function JT(r,l){l=(l&4)!==0;for(var d=0;d<r.length;d++){var g=r[d],v=g.event;g=g.listeners;e:{var y=void 0;if(l)for(var D=g.length-1;0<=D;D--){var k=g[D],W=k.instance,X=k.currentTarget;if(k=k.listener,W!==y&&v.isPropagationStopped())break e;y=k,v.currentTarget=X;try{y(v)}catch(ce){eg(ce)}v.currentTarget=null,y=W}else for(D=0;D<g.length;D++){if(k=g[D],W=k.instance,X=k.currentTarget,k=k.listener,W!==y&&v.isPropagationStopped())break e;y=k,v.currentTarget=X;try{y(v)}catch(ce){eg(ce)}v.currentTarget=null,y=W}}}}function Je(r,l){var d=l[Mu];d===void 0&&(d=l[Mu]=new Set);var g=r+"__bubble";d.has(g)||(ex(l,r,2,!1),d.add(g))}function Bv(r,l,d){var g=0;l&&(g|=4),ex(d,r,g,l)}var gg="_reactListening"+Math.random().toString(36).slice(2);function Gv(r){if(!r[gg]){r[gg]=!0,Iu.forEach(function(d){d!=="selectionchange"&&(lN.has(d)||Bv(d,!1,r),Bv(d,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[gg]||(l[gg]=!0,Bv("selectionchange",!1,l))}}function ex(r,l,d,g){switch(Ex(l)){case 2:var v=LN;break;case 8:v=ON;break;default:v=ey}d=v.bind(null,l,d,r),v=void 0,!_i||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),g?v!==void 0?r.addEventListener(l,d,{capture:!0,passive:v}):r.addEventListener(l,d,!0):v!==void 0?r.addEventListener(l,d,{passive:v}):r.addEventListener(l,d,!1)}function Hv(r,l,d,g,v){var y=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var k=g.stateNode.containerInfo;if(k===v)break;if(D===4)for(D=g.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;k!==null;){if(D=to(k),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){g=y=D;continue e}k=k.parentNode}}g=g.return}mf(function(){var X=y,ce=Ii(d),he=[];e:{var J=LE.get(r);if(J!==void 0){var te=kl,Ne=r;switch(r){case"keypress":if(ys(d)===0)break e;case"keydown":case"keyup":te=Gl;break;case"focusin":Ne="focus",te=Vl;break;case"focusout":Ne="blur",te=Vl;break;case"beforeblur":case"afterblur":te=Vl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=fC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Ef;break;case ME:case IE:case _E:te=Nl;break;case kE:te=xf;break;case"scroll":case"scrollend":te=Cf;break;case"wheel":te=Hl;break;case"copy":case"cut":case"paste":te=Bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Wu;break;case"toggle":case"beforetoggle":te=Af}var ke=(l&4)!==0,Dt=!ke&&(r==="scroll"||r==="scrollend"),q=ke?J!==null?J+"Capture":null:J;ke=[];for(var $=X,Q;$!==null;){var ue=$;if(Q=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Q===null||q===null||(ue=ca($,q),ue!=null&&ke.push(Sd($,ue,Q))),Dt)break;$=$.return}0<ke.length&&(J=new te(J,Ne,null,d,ce),he.push({event:J,listeners:ke}))}}if((l&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",te=r==="mouseout"||r==="pointerout",J&&d!==oo&&(Ne=d.relatedTarget||d.fromElement)&&(to(Ne)||Ne[Pi]))break e;if((te||J)&&(J=ce.window===ce?ce:(J=ce.ownerDocument)?J.defaultView||J.parentWindow:window,te?(Ne=d.relatedTarget||d.toElement,te=X,Ne=Ne?to(Ne):null,Ne!==null&&(Dt=o(Ne),ke=Ne.tag,Ne!==Dt||ke!==5&&ke!==27&&ke!==6)&&(Ne=null)):(te=null,Ne=X),te!==Ne)){if(ke=ki,ue="onMouseLeave",q="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Wu,ue="onPointerLeave",q="onPointerEnter",$="pointer"),Dt=te==null?J:ps(te),Q=Ne==null?J:ps(Ne),J=new ke(ue,$+"leave",te,d,ce),J.target=Dt,J.relatedTarget=Q,ue=null,to(ce)===X&&(ke=new ke(q,$+"enter",Ne,d,ce),ke.target=Q,ke.relatedTarget=Dt,ue=ke),Dt=ue,te&&Ne)t:{for(ke=te,q=Ne,$=0,Q=ke;Q;Q=hc(Q))$++;for(Q=0,ue=q;ue;ue=hc(ue))Q++;for(;0<$-Q;)ke=hc(ke),$--;for(;0<Q-$;)q=hc(q),Q--;for(;$--;){if(ke===q||q!==null&&ke===q.alternate)break t;ke=hc(ke),q=hc(q)}ke=null}else ke=null;te!==null&&tx(he,J,te,ke,!1),Ne!==null&&Dt!==null&&tx(he,Dt,Ne,ke,!0)}}e:{if(J=X?ps(X):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var Te=wE;else if(yn(J))if(SE)Te=SV;else{Te=yV;var Qe=vV}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&Vu(X.elementType)&&(Te=wE):Te=wV;if(Te&&(Te=Te(r,X))){uo(he,Te,d,ce);break e}Qe&&Qe(r,J,X),r==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&Xo(J,"number",J.value)}switch(Qe=X?ps(X):window,r){case"focusin":(yn(Qe)||Qe.contentEditable==="true")&&(zl=Qe,vC=X,qu=null);break;case"focusout":qu=vC=zl=null;break;case"mousedown":yC=!0;break;case"contextmenu":case"mouseup":case"dragend":yC=!1,FE(he,d,ce);break;case"selectionchange":if(RV)break;case"keydown":case"keyup":FE(he,d,ce)}var Fe;if(bs)e:{switch(r){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else st?re(r,d)&&(Le="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Le="onCompositionStart");Le&&(x&&d.locale!=="ko"&&(st||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&st&&(Fe=Bu()):(vs=ce,Zo="value"in vs?vs.value:vs.textContent,st=!0)),Qe=pg(X,Le),0<Qe.length&&(Le=new zu(Le,r,null,d,ce),he.push({event:Le,listeners:Qe}),Fe?Le.data=Fe:(Fe=ve(d),Fe!==null&&(Le.data=Fe)))),(Fe=b?vn(r,d):ot(r,d))&&(Le=pg(X,"onBeforeInput"),0<Le.length&&(Qe=new zu("onBeforeInput","beforeinput",null,d,ce),he.push({event:Qe,listeners:Le}),Qe.data=Fe)),oN(he,r,X,d,ce)}JT(he,l)})}function Sd(r,l,d){return{instance:r,listener:l,currentTarget:d}}function pg(r,l){for(var d=l+"Capture",g=[];r!==null;){var v=r,y=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||y===null||(v=ca(r,d),v!=null&&g.unshift(Sd(r,v,y)),v=ca(r,l),v!=null&&g.push(Sd(r,v,y))),r.tag===3)return g;r=r.return}return[]}function hc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function tx(r,l,d,g,v){for(var y=l._reactName,D=[];d!==null&&d!==g;){var k=d,W=k.alternate,X=k.stateNode;if(k=k.tag,W!==null&&W===g)break;k!==5&&k!==26&&k!==27||X===null||(W=X,v?(X=ca(d,y),X!=null&&D.unshift(Sd(d,X,W))):v||(X=ca(d,y),X!=null&&D.push(Sd(d,X,W)))),d=d.return}D.length!==0&&r.push({event:l,listeners:D})}var cN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function nx(r){return(typeof r=="string"?r:""+r).replace(cN,`
`).replace(uN,"")}function ix(r,l){return l=nx(l),nx(r)===l}function mg(){}function xt(r,l,d,g,v,y){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Mi(r,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Mi(r,""+g);break;case"className":ms(r,"class",g);break;case"tabIndex":ms(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ms(r,d,g);break;case"style":Ou(r,g,y);break;case"data":if(l!=="object"){ms(r,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){r.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(d);break}g=_l(""+g),r.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(d==="formAction"?(l!=="input"&&xt(r,l,"name",v.name,v,null),xt(r,l,"formEncType",v.formEncType,v,null),xt(r,l,"formMethod",v.formMethod,v,null),xt(r,l,"formTarget",v.formTarget,v,null)):(xt(r,l,"encType",v.encType,v,null),xt(r,l,"method",v.method,v,null),xt(r,l,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(d);break}g=_l(""+g),r.setAttribute(d,g);break;case"onClick":g!=null&&(r.onclick=mg);break;case"onScroll":g!=null&&Je("scroll",r);break;case"onScrollEnd":g!=null&&Je("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=d}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}d=_l(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(d,""+g):r.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(d,""):r.removeAttribute(d);break;case"capture":case"download":g===!0?r.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(d,g):r.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(d,g):r.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(d):r.setAttribute(d,g);break;case"popover":Je("beforetoggle",r),Je("toggle",r),Qo(r,"popover",g);break;case"xlinkActuate":In(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":In(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":In(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":In(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":In(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":In(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":In(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":In(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":In(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Qo(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=dC.get(d)||d,Qo(r,d,g))}}function zv(r,l,d,g,v,y){switch(d){case"style":Ou(r,g,y);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=d}}break;case"children":typeof g=="string"?Mi(r,g):(typeof g=="number"||typeof g=="bigint")&&Mi(r,""+g);break;case"onScroll":g!=null&&Je("scroll",r);break;case"onScrollEnd":g!=null&&Je("scrollend",r);break;case"onClick":g!=null&&(r.onclick=mg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Al.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),l=d.slice(2,v?d.length-7:void 0),y=r[ln]||null,y=y!=null?y[d]:null,typeof y=="function"&&r.removeEventListener(l,y,v),typeof g=="function")){typeof y!="function"&&y!==null&&(d in r?r[d]=null:r.hasAttribute(d)&&r.removeAttribute(d)),r.addEventListener(l,g,v);break e}d in r?r[d]=g:g===!0?r.setAttribute(d,""):Qo(r,d,g)}}}function On(r,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",r),Je("load",r);var g=!1,v=!1,y;for(y in d)if(d.hasOwnProperty(y)){var D=d[y];if(D!=null)switch(y){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:xt(r,l,y,D,d,null)}}v&&xt(r,l,"srcSet",d.srcSet,d,null),g&&xt(r,l,"src",d.src,d,null);return;case"input":Je("invalid",r);var k=y=D=v=null,W=null,X=null;for(g in d)if(d.hasOwnProperty(g)){var ce=d[g];if(ce!=null)switch(g){case"name":v=ce;break;case"type":D=ce;break;case"checked":W=ce;break;case"defaultChecked":X=ce;break;case"value":y=ce;break;case"defaultValue":k=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,l));break;default:xt(r,l,g,ce,d,null)}}ra(r,y,k,W,X,D,v,!1),Il(r);return;case"select":Je("invalid",r),g=D=y=null;for(v in d)if(d.hasOwnProperty(v)&&(k=d[v],k!=null))switch(v){case"value":y=k;break;case"defaultValue":D=k;break;case"multiple":g=k;default:xt(r,l,v,k,d,null)}l=y,d=D,r.multiple=!!g,l!=null?so(r,!!g,l,!1):d!=null&&so(r,!!g,d,!0);return;case"textarea":Je("invalid",r),y=v=g=null;for(D in d)if(d.hasOwnProperty(D)&&(k=d[D],k!=null))switch(D){case"value":g=k;break;case"defaultValue":v=k;break;case"children":y=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:xt(r,l,D,k,d,null)}aa(r,g,v,y),Il(r);return;case"option":for(W in d)if(d.hasOwnProperty(W)&&(g=d[W],g!=null))switch(W){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:xt(r,l,W,g,d,null)}return;case"dialog":Je("beforetoggle",r),Je("toggle",r),Je("cancel",r),Je("close",r);break;case"iframe":case"object":Je("load",r);break;case"video":case"audio":for(g=0;g<wd.length;g++)Je(wd[g],r);break;case"image":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"embed":case"source":case"link":Je("error",r),Je("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in d)if(d.hasOwnProperty(X)&&(g=d[X],g!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:xt(r,l,X,g,d,null)}return;default:if(Vu(l)){for(ce in d)d.hasOwnProperty(ce)&&(g=d[ce],g!==void 0&&zv(r,l,ce,g,d,void 0));return}}for(k in d)d.hasOwnProperty(k)&&(g=d[k],g!=null&&xt(r,l,k,g,d,null))}function dN(r,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,y=null,D=null,k=null,W=null,X=null,ce=null;for(te in d){var he=d[te];if(d.hasOwnProperty(te)&&he!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":W=he;default:g.hasOwnProperty(te)||xt(r,l,te,null,g,he)}}for(var J in g){var te=g[J];if(he=d[J],g.hasOwnProperty(J)&&(te!=null||he!=null))switch(J){case"type":y=te;break;case"name":v=te;break;case"checked":X=te;break;case"defaultChecked":ce=te;break;case"value":D=te;break;case"defaultValue":k=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,l));break;default:te!==he&&xt(r,l,J,te,g,he)}}mi(r,D,k,W,X,ce,y,v);return;case"select":te=D=k=J=null;for(y in d)if(W=d[y],d.hasOwnProperty(y)&&W!=null)switch(y){case"value":break;case"multiple":te=W;default:g.hasOwnProperty(y)||xt(r,l,y,null,g,W)}for(v in g)if(y=g[v],W=d[v],g.hasOwnProperty(v)&&(y!=null||W!=null))switch(v){case"value":J=y;break;case"defaultValue":k=y;break;case"multiple":D=y;default:y!==W&&xt(r,l,v,y,g,W)}l=k,d=D,g=te,J!=null?so(r,!!d,J,!1):!!g!=!!d&&(l!=null?so(r,!!d,l,!0):so(r,!!d,d?[]:"",!1));return;case"textarea":te=J=null;for(k in d)if(v=d[k],d.hasOwnProperty(k)&&v!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:xt(r,l,k,null,g,v)}for(D in g)if(v=g[D],y=d[D],g.hasOwnProperty(D)&&(v!=null||y!=null))switch(D){case"value":J=v;break;case"defaultValue":te=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==y&&xt(r,l,D,v,g,y)}Et(r,J,te);return;case"option":for(var Ne in d)if(J=d[Ne],d.hasOwnProperty(Ne)&&J!=null&&!g.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:xt(r,l,Ne,null,g,J)}for(W in g)if(J=g[W],te=d[W],g.hasOwnProperty(W)&&J!==te&&(J!=null||te!=null))switch(W){case"selected":r.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:xt(r,l,W,J,g,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in d)J=d[ke],d.hasOwnProperty(ke)&&J!=null&&!g.hasOwnProperty(ke)&&xt(r,l,ke,null,g,J);for(X in g)if(J=g[X],te=d[X],g.hasOwnProperty(X)&&J!==te&&(J!=null||te!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,l));break;default:xt(r,l,X,J,g,te)}return;default:if(Vu(l)){for(var Dt in d)J=d[Dt],d.hasOwnProperty(Dt)&&J!==void 0&&!g.hasOwnProperty(Dt)&&zv(r,l,Dt,void 0,g,J);for(ce in g)J=g[ce],te=d[ce],!g.hasOwnProperty(ce)||J===te||J===void 0&&te===void 0||zv(r,l,ce,J,g,te);return}}for(var q in d)J=d[q],d.hasOwnProperty(q)&&J!=null&&!g.hasOwnProperty(q)&&xt(r,l,q,null,g,J);for(he in g)J=g[he],te=d[he],!g.hasOwnProperty(he)||J===te||J==null&&te==null||xt(r,l,he,J,g,te)}var Uv=null,Wv=null;function Cg(r){return r.nodeType===9?r:r.ownerDocument}function sx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ox(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function jv(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var $v=null;function hN(){var r=window.event;return r&&r.type==="popstate"?r===$v?!1:($v=r,!0):($v=null,!1)}var rx=typeof setTimeout=="function"?setTimeout:void 0,fN=typeof clearTimeout=="function"?clearTimeout:void 0,ax=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof ax<"u"?function(r){return ax.resolve(null).then(r).catch(pN)}:rx;function pN(r){setTimeout(function(){throw r})}function gr(r){return r==="head"}function lx(r,l){var d=l,g=0,v=0;do{var y=d.nextSibling;if(r.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(0<g&&8>g){d=g;var D=r.ownerDocument;if(d&1&&bd(D.documentElement),d&2&&bd(D.body),d&4)for(d=D.head,bd(d),D=d.firstChild;D;){var k=D.nextSibling,W=D.nodeName;D[na]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||d.removeChild(D),D=k}}if(v===0){r.removeChild(y),Pd(l);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:g=d.charCodeAt(0)-48;else g=0;d=y}while(d);Pd(l)}function qv(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":qv(d),Yo(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}r.removeChild(d)}}function mN(r,l,d,g){for(;r.nodeType===1;){var v=d;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[na])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var y=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=rs(r.nextSibling),r===null)break}return null}function CN(r,l,d){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!d||(r=rs(r.nextSibling),r===null))return null;return r}function Kv(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function vN(r,l){var d=r.ownerDocument;if(r.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function rs(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return r}var Yv=null;function cx(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return r;l--}else d==="/$"&&l++}r=r.previousSibling}return null}function ux(r,l,d){switch(l=Cg(d),r){case"html":if(r=l.documentElement,!r)throw Error(i(452));return r;case"head":if(r=l.head,!r)throw Error(i(453));return r;case"body":if(r=l.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function bd(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);Yo(r)}var Hi=new Map,dx=new Set;function vg(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Eo=ie.d;ie.d={f:yN,r:wN,D:SN,C:bN,L:RN,m:EN,X:xN,S:TN,M:DN};function yN(){var r=Eo.f(),l=cg();return r||l}function wN(r){var l=gs(r);l!==null&&l.tag===5&&l.type==="form"?M0(l):Eo.r(r)}var fc=typeof document>"u"?null:document;function hx(r,l,d){var g=fc;if(g&&typeof l=="string"&&l){var v=cn(l);v='link[rel="'+r+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),dx.has(v)||(dx.add(v),r={rel:r,crossOrigin:d,href:l},g.querySelector(v)===null&&(l=g.createElement("link"),On(l,"link",r),Zt(l),g.head.appendChild(l)))}}function SN(r){Eo.D(r),hx("dns-prefetch",r,null)}function bN(r,l){Eo.C(r,l),hx("preconnect",r,l)}function RN(r,l,d){Eo.L(r,l,d);var g=fc;if(g&&r&&l){var v='link[rel="preload"][as="'+cn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+cn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+cn(d.imageSizes)+'"]')):v+='[href="'+cn(r)+'"]';var y=v;switch(l){case"style":y=gc(r);break;case"script":y=pc(r)}Hi.has(y)||(r=f({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:r,as:l},d),Hi.set(y,r),g.querySelector(v)!==null||l==="style"&&g.querySelector(Rd(y))||l==="script"&&g.querySelector(Ed(y))||(l=g.createElement("link"),On(l,"link",r),Zt(l),g.head.appendChild(l)))}}function EN(r,l){Eo.m(r,l);var d=fc;if(d&&r){var g=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+cn(g)+'"][href="'+cn(r)+'"]',y=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=pc(r)}if(!Hi.has(y)&&(r=f({rel:"modulepreload",href:r},l),Hi.set(y,r),d.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Ed(y)))return}g=d.createElement("link"),On(g,"link",r),Zt(g),d.head.appendChild(g)}}}function TN(r,l,d){Eo.S(r,l,d);var g=fc;if(g&&r){var v=Zn(g).hoistableStyles,y=gc(r);l=l||"default";var D=v.get(y);if(!D){var k={loading:0,preload:null};if(D=g.querySelector(Rd(y)))k.loading=5;else{r=f({rel:"stylesheet",href:r,"data-precedence":l},d),(d=Hi.get(y))&&Qv(r,d);var W=D=g.createElement("link");Zt(W),On(W,"link",r),W._p=new Promise(function(X,ce){W.onload=X,W.onerror=ce}),W.addEventListener("load",function(){k.loading|=1}),W.addEventListener("error",function(){k.loading|=2}),k.loading|=4,yg(D,l,g)}D={type:"stylesheet",instance:D,count:1,state:k},v.set(y,D)}}}function xN(r,l){Eo.X(r,l);var d=fc;if(d&&r){var g=Zn(d).hoistableScripts,v=pc(r),y=g.get(v);y||(y=d.querySelector(Ed(v)),y||(r=f({src:r,async:!0},l),(l=Hi.get(v))&&Xv(r,l),y=d.createElement("script"),Zt(y),On(y,"link",r),d.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(v,y))}}function DN(r,l){Eo.M(r,l);var d=fc;if(d&&r){var g=Zn(d).hoistableScripts,v=pc(r),y=g.get(v);y||(y=d.querySelector(Ed(v)),y||(r=f({src:r,async:!0,type:"module"},l),(l=Hi.get(v))&&Xv(r,l),y=d.createElement("script"),Zt(y),On(y,"link",r),d.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(v,y))}}function fx(r,l,d,g){var v=(v=xe.current)?vg(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=gc(d.href),d=Zn(v).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){r=gc(d.href);var y=Zn(v).hoistableStyles,D=y.get(r);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,D),(y=v.querySelector(Rd(r)))&&!y._p&&(D.instance=y,D.state.loading=5),Hi.has(r)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Hi.set(r,d),y||AN(v,r,d,D.state))),l&&g===null)throw Error(i(528,""));return D}if(l&&g!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=pc(d),d=Zn(v).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function gc(r){return'href="'+cn(r)+'"'}function Rd(r){return'link[rel="stylesheet"]['+r+"]"}function gx(r){return f({},r,{"data-precedence":r.precedence,precedence:null})}function AN(r,l,d,g){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=r.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),On(l,"link",d),Zt(l),r.head.appendChild(l))}function pc(r){return'[src="'+cn(r)+'"]'}function Ed(r){return"script[async]"+r}function px(r,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=r.querySelector('style[data-href~="'+cn(d.href)+'"]');if(g)return l.instance=g,Zt(g),g;var v=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),Zt(g),On(g,"style",v),yg(g,d.precedence,r),l.instance=g;case"stylesheet":v=gc(d.href);var y=r.querySelector(Rd(v));if(y)return l.state.loading|=4,l.instance=y,Zt(y),y;g=gx(d),(v=Hi.get(v))&&Qv(g,v),y=(r.ownerDocument||r).createElement("link"),Zt(y);var D=y;return D._p=new Promise(function(k,W){D.onload=k,D.onerror=W}),On(y,"link",g),l.state.loading|=4,yg(y,d.precedence,r),l.instance=y;case"script":return y=pc(d.src),(v=r.querySelector(Ed(y)))?(l.instance=v,Zt(v),v):(g=d,(v=Hi.get(y))&&(g=f({},d),Xv(g,v)),r=r.ownerDocument||r,v=r.createElement("script"),Zt(v),On(v,"link",g),r.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,yg(g,d.precedence,r));return l.instance}function yg(r,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,y=v,D=0;D<g.length;D++){var k=g[D];if(k.dataset.precedence===l)y=k;else if(y!==v)break}y?y.parentNode.insertBefore(r,y.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(r,l.firstChild))}function Qv(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function Xv(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var wg=null;function mx(r,l,d){if(wg===null){var g=new Map,v=wg=new Map;v.set(d,g)}else v=wg,g=v.get(d),g||(g=new Map,v.set(d,g));if(g.has(r))return g;for(g.set(r,null),d=d.getElementsByTagName(r),v=0;v<d.length;v++){var y=d[v];if(!(y[na]||y[Cn]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var D=y.getAttribute(l)||"";D=r+D;var k=g.get(D);k?k.push(y):g.set(D,[y])}}return g}function Cx(r,l,d){r=r.ownerDocument||r,r.head.insertBefore(d,l==="title"?r.querySelector("head > title"):null)}function FN(r,l,d){if(d===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return r=l.disabled,typeof l.precedence=="string"&&r==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vx(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Td=null;function PN(){}function MN(r,l,d){if(Td===null)throw Error(i(475));var g=Td;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=gc(d.href),y=r.querySelector(Rd(v));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(g.count++,g=Sg.bind(g),r.then(g,g)),l.state.loading|=4,l.instance=y,Zt(y);return}y=r.ownerDocument||r,d=gx(d),(v=Hi.get(v))&&Qv(d,v),y=y.createElement("link"),Zt(y);var D=y;D._p=new Promise(function(k,W){D.onload=k,D.onerror=W}),On(y,"link",d),l.instance=y}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=Sg.bind(g),r.addEventListener("load",l),r.addEventListener("error",l))}}function IN(){if(Td===null)throw Error(i(475));var r=Td;return r.stylesheets&&r.count===0&&Zv(r,r.stylesheets),0<r.count?function(l){var d=setTimeout(function(){if(r.stylesheets&&Zv(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d)}}:null}function Sg(){if(this.count--,this.count===0){if(this.stylesheets)Zv(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var bg=null;function Zv(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,bg=new Map,l.forEach(_N,r),bg=null,Sg.call(r))}function _N(r,l){if(!(l.state.loading&4)){var d=bg.get(r);if(d)var g=d.get(null);else{d=new Map,bg.set(r,d);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<v.length;y++){var D=v[y];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(d.set(D.dataset.precedence,D),g=D)}g&&d.set(null,g)}v=l.instance,D=v.getAttribute("data-precedence"),y=d.get(D)||g,y===g&&d.set(null,v),d.set(D,v),this.count++,g=Sg.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),y?y.parentNode.insertBefore(v,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),l.state.loading|=4}}var xd={$$typeof:M,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function kN(r,l,d,g,v,y,D,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Js(0),this.hiddenUpdates=Js(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=y,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function yx(r,l,d,g,v,y,D,k,W,X,ce,he){return r=new kN(r,l,d,D,k,W,X,he),l=1,y===!0&&(l|=24),y=vi(3,null,null,l),r.current=y,y.stateNode=r,l=_C(),l.refCount++,r.pooledCache=l,l.refCount++,y.memoizedState={element:g,isDehydrated:d,cache:l},VC(y),r}function wx(r){return r?(r=$l,r):$l}function Sx(r,l,d,g,v,y){v=wx(v),g.context===null?g.context=v:g.pendingContext=v,g=tr(l),g.payload={element:d},y=y===void 0?null:y,y!==null&&(g.callback=y),d=nr(r,g,l),d!==null&&(Ri(d,r,l),nd(d,r,l))}function bx(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<l?d:l}}function Jv(r,l){bx(r,l),(r=r.alternate)&&bx(r,l)}function Rx(r){if(r.tag===13){var l=jl(r,67108864);l!==null&&Ri(l,r,67108864),Jv(r,67108864)}}var Rg=!0;function LN(r,l,d,g){var v=K.T;K.T=null;var y=ie.p;try{ie.p=2,ey(r,l,d,g)}finally{ie.p=y,K.T=v}}function ON(r,l,d,g){var v=K.T;K.T=null;var y=ie.p;try{ie.p=8,ey(r,l,d,g)}finally{ie.p=y,K.T=v}}function ey(r,l,d,g){if(Rg){var v=ty(g);if(v===null)Hv(r,l,g,Eg,d),Tx(r,g);else if(NN(v,r,l,d,g))g.stopPropagation();else if(Tx(r,g),l&4&&-1<VN.indexOf(r)){for(;v!==null;){var y=gs(v);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var D=ts(y.pendingLanes);if(D!==0){var k=y;for(k.pendingLanes|=2,k.entangledLanes|=2;D;){var W=1<<31-pt(D);k.entanglements[1]|=W,D&=~W}As(y),(wt&6)===0&&(ag=ht()+500,yd(0))}}break;case 13:k=jl(y,2),k!==null&&Ri(k,y,2),cg(),Jv(y,2)}if(y=ty(g),y===null&&Hv(r,l,g,Eg,d),y===v)break;v=y}v!==null&&g.stopPropagation()}else Hv(r,l,g,null,d)}}function ty(r){return r=Ii(r),ny(r)}var Eg=null;function ny(r){if(Eg=null,r=to(r),r!==null){var l=o(r);if(l===null)r=null;else{var d=l.tag;if(d===13){if(r=a(l),r!==null)return r;r=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Eg=r,null}function Ex(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case Rt:return 2;case kt:return 8;case Pt:case qt:return 32;case Rn:return 268435456;default:return 32}default:return 32}}var iy=!1,pr=null,mr=null,Cr=null,Dd=new Map,Ad=new Map,vr=[],VN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tx(r,l){switch(r){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Dd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ad.delete(l.pointerId)}}function Fd(r,l,d,g,v,y){return r===null||r.nativeEvent!==y?(r={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:y,targetContainers:[v]},l!==null&&(l=gs(l),l!==null&&Rx(l)),r):(r.eventSystemFlags|=g,l=r.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),r)}function NN(r,l,d,g,v){switch(l){case"focusin":return pr=Fd(pr,r,l,d,g,v),!0;case"dragenter":return mr=Fd(mr,r,l,d,g,v),!0;case"mouseover":return Cr=Fd(Cr,r,l,d,g,v),!0;case"pointerover":var y=v.pointerId;return Dd.set(y,Fd(Dd.get(y)||null,r,l,d,g,v)),!0;case"gotpointercapture":return y=v.pointerId,Ad.set(y,Fd(Ad.get(y)||null,r,l,d,g,v)),!0}return!1}function xx(r){var l=to(r.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=a(d),l!==null){r.blockedOn=l,cf(r.priority,function(){if(d.tag===13){var g=bi();g=$o(g);var v=jl(d,g);v!==null&&Ri(v,d,g),Jv(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Tg(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var d=ty(r.nativeEvent);if(d===null){d=r.nativeEvent;var g=new d.constructor(d.type,d);oo=g,d.target.dispatchEvent(g),oo=null}else return l=gs(d),l!==null&&Rx(l),r.blockedOn=d,!1;l.shift()}return!0}function Dx(r,l,d){Tg(r)&&d.delete(l)}function BN(){iy=!1,pr!==null&&Tg(pr)&&(pr=null),mr!==null&&Tg(mr)&&(mr=null),Cr!==null&&Tg(Cr)&&(Cr=null),Dd.forEach(Dx),Ad.forEach(Dx)}function xg(r,l){r.blockedOn===l&&(r.blockedOn=null,iy||(iy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,BN)))}var Dg=null;function Ax(r){Dg!==r&&(Dg=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Dg===r&&(Dg=null);for(var l=0;l<r.length;l+=3){var d=r[l],g=r[l+1],v=r[l+2];if(typeof g!="function"){if(ny(g||d)===null)continue;break}var y=gs(d);y!==null&&(r.splice(l,3),l-=3,nv(y,{pending:!0,data:v,method:d.method,action:g},g,v))}}))}function Pd(r){function l(W){return xg(W,r)}pr!==null&&xg(pr,r),mr!==null&&xg(mr,r),Cr!==null&&xg(Cr,r),Dd.forEach(l),Ad.forEach(l);for(var d=0;d<vr.length;d++){var g=vr[d];g.blockedOn===r&&(g.blockedOn=null)}for(;0<vr.length&&(d=vr[0],d.blockedOn===null);)xx(d),d.blockedOn===null&&vr.shift();if(d=(r.ownerDocument||r).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var v=d[g],y=d[g+1],D=v[ln]||null;if(typeof y=="function")D||Ax(d);else if(D){var k=null;if(y&&y.hasAttribute("formAction")){if(v=y,D=y[ln]||null)k=D.formAction;else if(ny(v)!==null)continue}else k=D.action;typeof k=="function"?d[g+1]=k:(d.splice(g,3),g-=3),Ax(d)}}}function sy(r){this._internalRoot=r}Ag.prototype.render=sy.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,g=bi();Sx(d,g,r,l,null,null)},Ag.prototype.unmount=sy.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;Sx(r.current,2,null,r,null,null),cg(),l[Pi]=null}};function Ag(r){this._internalRoot=r}Ag.prototype.unstable_scheduleHydration=function(r){if(r){var l=qo();r={blockedOn:null,target:r,priority:l};for(var d=0;d<vr.length&&l!==0&&l<vr[d].priority;d++);vr.splice(d,0,r),d===0&&xx(r)}};var Fx=t.version;if(Fx!=="19.1.1")throw Error(i(527,Fx,"19.1.1"));ie.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=u(l),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var GN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fg.isDisabled&&Fg.supportsFiber)try{Ie=Fg.inject(GN),Ke=Fg}catch{}}return Id.createRoot=function(r,l){if(!s(r))throw Error(i(299));var d=!1,g="",v=j0,y=$0,D=q0,k=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks)),l=yx(r,1,!1,null,null,d,g,v,y,D,k,null),r[Pi]=l.current,Gv(r),new sy(l)},Id.hydrateRoot=function(r,l,d){if(!s(r))throw Error(i(299));var g=!1,v="",y=j0,D=$0,k=q0,W=null,X=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(y=d.onUncaughtError),d.onCaughtError!==void 0&&(D=d.onCaughtError),d.onRecoverableError!==void 0&&(k=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(W=d.unstable_transitionCallbacks),d.formState!==void 0&&(X=d.formState)),l=yx(r,1,!0,l,d??null,g,v,y,D,k,W,X),l.context=wx(null),d=l.current,g=bi(),g=$o(g),v=tr(g),v.callback=null,nr(d,v,g),d=g,l.current.lanes=d,eo(l,d),As(l),r[Pi]=l.current,Gv(r),new Ag(l)},Id.version="19.1.1",Id}var Bx;function YN(){if(Bx)return ay.exports;Bx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ay.exports=KN(),ay.exports}var QN=YN();function UP(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=UP(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function $a(){for(var e,t,n=0,i="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=UP(e))&&(i&&(i+=" "),i+=t);return i}function XN(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}XN(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Gh=e=>typeof e=="number"&&!isNaN(e),sl=e=>typeof e=="string",_o=e=>typeof e=="function",ZN=e=>sl(e)||Gh(e),Rw=e=>sl(e)||_o(e)?e:null,JN=(e,t)=>e===!1||Gh(e)&&e>0?e:t,Ew=e=>R.isValidElement(e)||sl(e)||_o(e)||Gh(e);function e2(e,t,n=300){let{scrollHeight:i,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=i+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)})})}function t2({enter:e,exit:t,appendPosition:n=!1,collapse:i=!0,collapseDuration:s=300}){return function({children:o,position:a,preventExitTransition:c,done:u,nodeRef:h,isIn:f,playToast:p}){let m=n?`${e}--${a}`:e,w=n?`${t}--${a}`:t,S=R.useRef(0);return R.useLayoutEffect(()=>{let E=h.current,T=m.split(" "),F=P=>{P.target===h.current&&(p(),E.removeEventListener("animationend",F),E.removeEventListener("animationcancel",F),S.current===0&&P.type!=="animationcancel"&&E.classList.remove(...T))};E.classList.add(...T),E.addEventListener("animationend",F),E.addEventListener("animationcancel",F)},[]),R.useEffect(()=>{let E=h.current,T=()=>{E.removeEventListener("animationend",T),i?e2(E,u,s):u()};f||(c?T():(S.current=1,E.className+=` ${w}`,E.addEventListener("animationend",T)))},[f]),ae.createElement(ae.Fragment,null,o)}}function Gx(e,t){return{content:WP(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function WP(e,t,n=!1){return R.isValidElement(e)&&!sl(e.type)?R.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):_o(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function n2({closeToast:e,theme:t,ariaLabel:n="close"}){return ae.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(!0)},"aria-label":n},ae.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ae.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function i2({delay:e,isRunning:t,closeToast:n,type:i="default",hide:s,className:o,controlledProgress:a,progress:c,rtl:u,isIn:h,theme:f}){let p=s||a&&c===0,m={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};a&&(m.transform=`scaleX(${c})`);let w=$a("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),S=_o(o)?o({rtl:u,type:i,defaultClassName:w}):$a(w,o),E={[a&&c>=1?"onTransitionEnd":"onAnimationEnd"]:a&&c<1?null:()=>{h&&n()}};return ae.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ae.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),ae.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:S,style:m,...E}))}var s2=1,jP=()=>`${s2++}`;function o2(e,t,n){let i=1,s=0,o=[],a=[],c=t,u=new Map,h=new Set,f=P=>(h.add(P),()=>h.delete(P)),p=()=>{a=Array.from(u.values()),h.forEach(P=>P())},m=({containerId:P,toastId:M,updateId:U})=>{let z=P?P!==e:e!==1,j=u.has(M)&&U==null;return z||j},w=(P,M)=>{u.forEach(U=>{var z;(M==null||M===U.props.toastId)&&((z=U.toggle)==null||z.call(U,P))})},S=P=>{var M,U;(U=(M=P.props)==null?void 0:M.onClose)==null||U.call(M,P.removalReason),P.isActive=!1},E=P=>{if(P==null)u.forEach(S);else{let M=u.get(P);M&&S(M)}p()},T=()=>{s-=o.length,o=[]},F=P=>{var M,U;let{toastId:z,updateId:j}=P.props,I=j==null;P.staleId&&u.delete(P.staleId),P.isActive=!0,u.set(z,P),p(),n(Gx(P,I?"added":"updated")),I&&((U=(M=P.props).onOpen)==null||U.call(M))};return{id:e,props:c,observe:f,toggle:w,removeToast:E,toasts:u,clearQueue:T,buildToast:(P,M)=>{if(m(M))return;let{toastId:U,updateId:z,data:j,staleId:I,delay:A}=M,_=z==null;_&&s++;let L={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(M).filter(([G,N])=>N!=null)),toastId:U,updateId:z,data:j,isIn:!1,className:Rw(M.className||c.toastClassName),progressClassName:Rw(M.progressClassName||c.progressClassName),autoClose:M.isLoading?!1:JN(M.autoClose,c.autoClose),closeToast(G){u.get(U).removalReason=G,E(U)},deleteToast(){let G=u.get(U);if(G!=null){if(n(Gx(G,"removed")),u.delete(U),s--,s<0&&(s=0),o.length>0){F(o.shift());return}p()}}};L.closeButton=c.closeButton,M.closeButton===!1||Ew(M.closeButton)?L.closeButton=M.closeButton:M.closeButton===!0&&(L.closeButton=Ew(c.closeButton)?c.closeButton:!0);let O={content:P,props:L,staleId:I};c.limit&&c.limit>0&&s>c.limit&&_?o.push(O):Gh(A)?setTimeout(()=>{F(O)},A):F(O)},setProps(P){c=P},setToggle:(P,M)=>{let U=u.get(P);U&&(U.toggle=M)},isToastActive:P=>{var M;return(M=u.get(P))==null?void 0:M.isActive},getSnapshot:()=>a}}var ii=new Map,uh=[],Tw=new Set,r2=e=>Tw.forEach(t=>t(e)),$P=()=>ii.size>0;function a2(){uh.forEach(e=>KP(e.content,e.options)),uh=[]}var l2=(e,{containerId:t})=>{var n;return(n=ii.get(t||1))==null?void 0:n.toasts.get(e)};function qP(e,t){var n;if(t)return!!((n=ii.get(t))!=null&&n.isToastActive(e));let i=!1;return ii.forEach(s=>{s.isToastActive(e)&&(i=!0)}),i}function c2(e){if(!$P()){uh=uh.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||ZN(e))ii.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=ii.get(e.containerId);t?t.removeToast(e.id):ii.forEach(n=>{n.removeToast(e.id)})}}var u2=(e={})=>{ii.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function KP(e,t){Ew(e)&&($P()||uh.push({content:e,options:t}),ii.forEach(n=>{n.buildToast(e,t)}))}function d2(e){var t;(t=ii.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function YP(e,t){ii.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function h2(e){let t=e.containerId||1;return{subscribe(n){let i=o2(t,e,r2);ii.set(t,i);let s=i.observe(n);return a2(),()=>{s(),ii.delete(t)}},setProps(n){var i;(i=ii.get(t))==null||i.setProps(n)},getSnapshot(){var n;return(n=ii.get(t))==null?void 0:n.getSnapshot()}}}function f2(e){return Tw.add(e),()=>{Tw.delete(e)}}function g2(e){return e&&(sl(e.toastId)||Gh(e.toastId))?e.toastId:jP()}function Hh(e,t){return KP(e,t),t.toastId}function ym(e,t){return{...t,type:t&&t.type||e,toastId:g2(t)}}function wm(e){return(t,n)=>Hh(t,ym(e,n))}function bt(e,t){return Hh(e,ym("default",t))}bt.loading=(e,t)=>Hh(e,ym("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function p2(e,{pending:t,error:n,success:i},s){let o;t&&(o=sl(t)?bt.loading(t,s):bt.loading(t.render,{...s,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(h,f,p)=>{if(f==null){bt.dismiss(o);return}let m={type:h,...a,...s,data:p},w=sl(f)?{render:f}:f;return o?bt.update(o,{...m,...w}):bt(w.render,{...m,...w}),p},u=_o(e)?e():e;return u.then(h=>c("success",i,h)).catch(h=>c("error",n,h)),u}bt.promise=p2;bt.success=wm("success");bt.info=wm("info");bt.error=wm("error");bt.warning=wm("warning");bt.warn=bt.warning;bt.dark=(e,t)=>Hh(e,ym("default",{theme:"dark",...t}));function m2(e){c2(e)}bt.dismiss=m2;bt.clearWaitingQueue=u2;bt.isActive=qP;bt.update=(e,t={})=>{let n=l2(e,t);if(n){let{props:i,content:s}=n,o={delay:100,...i,...t,toastId:t.toastId||e,updateId:jP()};o.toastId!==e&&(o.staleId=e);let a=o.render||s;delete o.render,Hh(a,o)}};bt.done=e=>{bt.update(e,{progress:1})};bt.onChange=f2;bt.play=e=>YP(!0,e);bt.pause=e=>YP(!1,e);function C2(e){var t;let{subscribe:n,getSnapshot:i,setProps:s}=R.useRef(h2(e)).current;s(e);let o=(t=R.useSyncExternalStore(n,i,i))==null?void 0:t.slice();function a(c){if(!o)return[];let u=new Map;return e.newestOnTop&&o.reverse(),o.forEach(h=>{let{position:f}=h.props;u.has(f)||u.set(f,[]),u.get(f).push(h)}),Array.from(u,h=>c(h[0],h[1]))}return{getToastToRender:a,isToastActive:qP,count:o?.length}}function v2(e){let[t,n]=R.useState(!1),[i,s]=R.useState(!1),o=R.useRef(null),a=R.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:u,closeToast:h,onClick:f,closeOnClick:p}=e;d2({id:e.toastId,containerId:e.containerId,fn:n}),R.useEffect(()=>{if(e.pauseOnFocusLoss)return m(),()=>{w()}},[e.pauseOnFocusLoss]);function m(){document.hasFocus()||F(),window.addEventListener("focus",T),window.addEventListener("blur",F)}function w(){window.removeEventListener("focus",T),window.removeEventListener("blur",F)}function S(I){if(e.draggable===!0||e.draggable===I.pointerType){P();let A=o.current;a.canCloseOnClick=!0,a.canDrag=!0,A.style.transition="none",e.draggableDirection==="x"?(a.start=I.clientX,a.removalDistance=A.offsetWidth*(e.draggablePercent/100)):(a.start=I.clientY,a.removalDistance=A.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function E(I){let{top:A,bottom:_,left:L,right:O}=o.current.getBoundingClientRect();I.nativeEvent.type!=="touchend"&&e.pauseOnHover&&I.clientX>=L&&I.clientX<=O&&I.clientY>=A&&I.clientY<=_?F():T()}function T(){n(!0)}function F(){n(!1)}function P(){a.didMove=!1,document.addEventListener("pointermove",U),document.addEventListener("pointerup",z)}function M(){document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",z)}function U(I){let A=o.current;if(a.canDrag&&A){a.didMove=!0,t&&F(),e.draggableDirection==="x"?a.delta=I.clientX-a.start:a.delta=I.clientY-a.start,a.start!==I.clientX&&(a.canCloseOnClick=!1);let _=e.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;A.style.transform=`translate3d(${_},0)`,A.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function z(){M();let I=o.current;if(a.canDrag&&a.didMove&&I){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){s(!0),e.closeToast(!0),e.collapseAll();return}I.style.transition="transform 0.2s, opacity 0.2s",I.style.removeProperty("transform"),I.style.removeProperty("opacity")}}let j={onPointerDown:S,onPointerUp:E};return c&&u&&(j.onMouseEnter=F,e.stacked||(j.onMouseLeave=T)),p&&(j.onClick=I=>{f&&f(I),a.canCloseOnClick&&h(!0)}),{playToast:T,pauseToast:F,isRunning:t,preventExitTransition:i,toastRef:o,eventHandlers:j}}var y2=typeof window<"u"?R.useLayoutEffect:R.useEffect,Sm=({theme:e,type:t,isLoading:n,...i})=>ae.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function w2(e){return ae.createElement(Sm,{...e},ae.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function S2(e){return ae.createElement(Sm,{...e},ae.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function b2(e){return ae.createElement(Sm,{...e},ae.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function R2(e){return ae.createElement(Sm,{...e},ae.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function E2(){return ae.createElement("div",{className:"Toastify__spinner"})}var xw={info:S2,warning:w2,success:b2,error:R2,spinner:E2},T2=e=>e in xw;function x2({theme:e,type:t,isLoading:n,icon:i}){let s=null,o={theme:e,type:t};return i===!1||(_o(i)?s=i({...o,isLoading:n}):R.isValidElement(i)?s=R.cloneElement(i,o):n?s=xw.spinner():T2(t)&&(s=xw[t](o))),s}var D2=e=>{let{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:s,playToast:o}=v2(e),{closeButton:a,children:c,autoClose:u,onClick:h,type:f,hideProgressBar:p,closeToast:m,transition:w,position:S,className:E,style:T,progressClassName:F,updateId:P,role:M,progress:U,rtl:z,toastId:j,deleteToast:I,isIn:A,isLoading:_,closeOnClick:L,theme:O,ariaLabel:G}=e,N=$a("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":z},{"Toastify__toast--close-on-click":L}),Re=_o(E)?E({rtl:z,position:S,type:f,defaultClassName:N}):$a(N,E),pe=x2(e),K=!!U||!u,ie={closeToast:m,type:f,theme:O},se=null;return a===!1||(_o(a)?se=a(ie):R.isValidElement(a)?se=R.cloneElement(a,ie):se=n2(ie)),ae.createElement(w,{isIn:A,done:I,position:S,preventExitTransition:n,nodeRef:i,playToast:o},ae.createElement("div",{id:j,tabIndex:0,onClick:h,"data-in":A,className:Re,...s,style:T,ref:i,...A&&{role:M,"aria-label":G}},pe!=null&&ae.createElement("div",{className:$a("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!_})},pe),WP(c,e,!t),se,!e.customProgressBar&&ae.createElement(i2,{...P&&!K?{key:`p-${P}`}:{},rtl:z,theme:O,delay:u,isRunning:t,isIn:A,closeToast:m,hide:p,type:f,className:F,controlledProgress:K,progress:U||0})))},A2=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),F2=t2(A2("bounce",!0)),P2={position:"top-right",transition:F2,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function M2(e){let t={...P2,...e},n=e.stacked,[i,s]=R.useState(!0),o=R.useRef(null),{getToastToRender:a,isToastActive:c,count:u}=C2(t),{className:h,style:f,rtl:p,containerId:m,hotKeys:w}=t;function S(T){let F=$a("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":p});return _o(h)?h({position:T,rtl:p,defaultClassName:F}):$a(F,Rw(h))}function E(){n&&(s(!0),bt.play())}return y2(()=>{var T;if(n){let F=o.current.querySelectorAll('[data-in="true"]'),P=12,M=(T=t.position)==null?void 0:T.includes("top"),U=0,z=0;Array.from(F).reverse().forEach((j,I)=>{let A=j;A.classList.add("Toastify__toast--stacked"),I>0&&(A.dataset.collapsed=`${i}`),A.dataset.pos||(A.dataset.pos=M?"top":"bot");let _=U*(i?.2:1)+(i?0:P*I);A.style.setProperty("--y",`${M?_:_*-1}px`),A.style.setProperty("--g",`${P}`),A.style.setProperty("--s",`${1-(i?z:0)}`),U+=A.offsetHeight,z+=.025})}},[i,u,n]),R.useEffect(()=>{function T(F){var P;let M=o.current;w(F)&&((P=M.querySelector('[tabIndex="0"]'))==null||P.focus(),s(!1),bt.pause()),F.key==="Escape"&&(document.activeElement===M||M!=null&&M.contains(document.activeElement))&&(s(!0),bt.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[w]),ae.createElement("section",{ref:o,className:"Toastify",id:m,onMouseEnter:()=>{n&&(s(!1),bt.pause())},onMouseLeave:E,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a((T,F)=>{let P=F.length?{...f}:{...f,pointerEvents:"none"};return ae.createElement("div",{tabIndex:-1,className:S(T),"data-stacked":n,style:P,key:`c-${T}`},F.map(({content:M,props:U})=>ae.createElement(D2,{...U,stacked:n,collapseAll:E,isIn:c(U.toastId,U.containerId),key:`t-${U.key}`},M)))}))}var dy={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Hx;function I2(){return Hx||(Hx=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(o=s(o,i(c)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var c in o)t.call(o,c)&&o[c]&&(a=s(a,c));return a}function s(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(dy)),dy.exports}var _2=I2();const ze=vm(_2);function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dw.apply(null,arguments)}function QP(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function zx(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function k2(e){var t=L2(e,"string");return typeof t=="symbol"?t:String(t)}function L2(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function O2(e,t,n){var i=R.useRef(e!==void 0),s=R.useState(t),o=s[0],a=s[1],c=e!==void 0,u=i.current;return i.current=c,!c&&u&&o!==t&&a(t),[c?e:o,R.useCallback(function(h){for(var f=arguments.length,p=new Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];n&&n.apply(void 0,[h].concat(p)),a(h)},[n])]}function V2(e,t){return Object.keys(t).reduce(function(n,i){var s,o=n,a=o[zx(i)],c=o[i],u=QP(o,[zx(i),i].map(k2)),h=t[i],f=O2(c,a,e[h]),p=f[0],m=f[1];return Dw({},u,(s={},s[i]=p,s[h]=m,s))},e)}function Aw(e,t){return Aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Aw(e,t)}function N2(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Aw(e,t)}const B2=["xxl","xl","lg","md","sm","xs"],G2="xs",zh=R.createContext({prefixes:{},breakpoints:B2,minBreakpoint:G2}),{Consumer:kre,Provider:Lre}=zh;function Xe(e,t){const{prefixes:n}=R.useContext(zh);return e||n[t]||t}function XP(){const{breakpoints:e}=R.useContext(zh);return e}function ZP(){const{minBreakpoint:e}=R.useContext(zh);return e}function H2(){const{dir:e}=R.useContext(zh);return e==="rtl"}function bm(e){return e&&e.ownerDocument||document}function z2(e){var t=bm(e);return t&&t.defaultView||window}function U2(e,t){return z2(e).getComputedStyle(e,t)}var W2=/([A-Z])/g;function j2(e){return e.replace(W2,"-$1").toLowerCase()}var $2=/^ms-/;function Pg(e){return j2(e).replace($2,"-ms-")}var q2=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function K2(e){return!!(e&&q2.test(e))}function qa(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(Pg(t))||U2(e).getPropertyValue(Pg(t));Object.keys(t).forEach(function(s){var o=t[s];!o&&o!==0?e.style.removeProperty(Pg(s)):K2(s)?i+=s+"("+o+") ":n+=Pg(s)+": "+o+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}var hy={exports:{}},fy,Ux;function Y2(){if(Ux)return fy;Ux=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fy=e,fy}var gy,Wx;function Q2(){if(Wx)return gy;Wx=1;var e=Y2();function t(){}function n(){}return n.resetWarningCache=t,gy=function(){function i(a,c,u,h,f,p){if(p!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function s(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},gy}var jx;function X2(){return jx||(jx=1,hy.exports=Q2()()),hy.exports}var Z2=X2();const Ao=vm(Z2);var sb=zP();const Ba=vm(sb),$x={disabled:!1},JP=ae.createContext(null);var J2=function(t){return t.scrollTop},Nd="unmounted",Ia="exited",Er="entering",Va="entered",Fw="exiting",Uo=function(e){N2(t,e);function t(i,s){var o;o=e.call(this,i,s)||this;var a=s,c=a&&!a.isMounting?i.enter:i.appear,u;return o.appearStatus=null,i.in?c?(u=Ia,o.appearStatus=Er):u=Va:i.unmountOnExit||i.mountOnEnter?u=Nd:u=Ia,o.state={status:u},o.nextCallback=null,o}t.getDerivedStateFromProps=function(s,o){var a=s.in;return a&&o.status===Nd?{status:Ia}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Er&&a!==Va&&(o=Er):(a===Er||a===Va)&&(o=Fw)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,a,c;return o=a=c=s,s!=null&&typeof s!="number"&&(o=s.exit,a=s.enter,c=s.appear!==void 0?s.appear:a),{exit:o,enter:a,appear:c}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===Er){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Ba.findDOMNode(this);a&&J2(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ia&&this.setState({status:Nd})},n.performEnter=function(s){var o=this,a=this.props.enter,c=this.context?this.context.isMounting:s,u=this.props.nodeRef?[c]:[Ba.findDOMNode(this),c],h=u[0],f=u[1],p=this.getTimeouts(),m=c?p.appear:p.enter;if(!s&&!a||$x.disabled){this.safeSetState({status:Va},function(){o.props.onEntered(h)});return}this.props.onEnter(h,f),this.safeSetState({status:Er},function(){o.props.onEntering(h,f),o.onTransitionEnd(m,function(){o.safeSetState({status:Va},function(){o.props.onEntered(h,f)})})})},n.performExit=function(){var s=this,o=this.props.exit,a=this.getTimeouts(),c=this.props.nodeRef?void 0:Ba.findDOMNode(this);if(!o||$x.disabled){this.safeSetState({status:Ia},function(){s.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Fw},function(){s.props.onExiting(c),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:Ia},function(){s.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,o.nextCallback=null,s(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:Ba.findDOMNode(this),c=s==null&&!this.props.addEndListener;if(!a||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=u[0],f=u[1];this.props.addEndListener(h,f)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Nd)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=QP(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ae.createElement(JP.Provider,{value:null},typeof a=="function"?a(s,c):ae.cloneElement(ae.Children.only(a),c))},t}(ae.Component);Uo.contextType=JP;Uo.propTypes={};function mc(){}Uo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mc,onEntering:mc,onEntered:mc,onExit:mc,onExiting:mc,onExited:mc};Uo.UNMOUNTED=Nd;Uo.EXITED=Ia;Uo.ENTERING=Er;Uo.ENTERED=Va;Uo.EXITING=Fw;function eB(e){return e.code==="Escape"||e.keyCode===27}function tB(){const e=R.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Rm(e){if(!e||typeof e=="function")return null;const{major:t}=tB();return t>=19?e.props.ref:e.ref}const uu=!!(typeof window<"u"&&window.document&&window.document.createElement);var Pw=!1,Mw=!1;try{var py={get passive(){return Pw=!0},get once(){return Mw=Pw=!0}};uu&&(window.addEventListener("test",py,py),window.removeEventListener("test",py,!0))}catch{}function eM(e,t,n,i){if(i&&typeof i!="boolean"&&!Mw){var s=i.once,o=i.capture,a=n;!Mw&&s&&(a=n.__once||function c(u){this.removeEventListener(t,c,o),n.call(this,u)},n.__once=a),e.addEventListener(t,a,Pw?i:o)}e.addEventListener(t,n,i)}function Iw(e,t,n,i){var s=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}function Sp(e,t,n,i){return eM(e,t,n,i),function(){Iw(e,t,n,i)}}function nB(e,t,n,i){if(i===void 0&&(i=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,n,i),e.dispatchEvent(s)}}function iB(e){var t=qa(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function sB(e,t,n){n===void 0&&(n=5);var i=!1,s=setTimeout(function(){i||nB(e,"transitionend",!0)},t+n),o=Sp(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),o()}}function tM(e,t,n,i){n==null&&(n=iB(e)||0);var s=sB(e,n,i),o=Sp(e,"transitionend",t);return function(){s(),o()}}function qx(e,t){const n=qa(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function oB(e,t){const n=qx(e,"transitionDuration"),i=qx(e,"transitionDelay"),s=tM(e,o=>{o.target===e&&(s(),t(o))},n+i)}function rB(e){e.offsetHeight}const Kx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function aB(e,t){const n=Kx(e),i=Kx(t);return s=>{n&&n(s),i&&i(s)}}function nM(e,t){return R.useMemo(()=>aB(e,t),[e,t])}function lB(e){return e&&"setState"in e?Ba.findDOMNode(e):e??null}const iM=ae.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:s,onExited:o,addEndListener:a,children:c,childRef:u,...h},f)=>{const p=R.useRef(null),m=nM(p,u),w=j=>{m(lB(j))},S=j=>I=>{j&&p.current&&j(p.current,I)},E=R.useCallback(S(e),[e]),T=R.useCallback(S(t),[t]),F=R.useCallback(S(n),[n]),P=R.useCallback(S(i),[i]),M=R.useCallback(S(s),[s]),U=R.useCallback(S(o),[o]),z=R.useCallback(S(a),[a]);return B.jsx(Uo,{ref:f,...h,onEnter:E,onEntered:F,onEntering:T,onExit:P,onExited:U,onExiting:M,addEndListener:z,nodeRef:p,children:typeof c=="function"?(j,I)=>c(j,{...I,ref:w}):ae.cloneElement(c,{ref:w})})});iM.displayName="TransitionWrapper";function cB(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e},[e]),t}function bp(e){const t=cB(e);return R.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const Em=e=>R.forwardRef((t,n)=>B.jsx("div",{...t,ref:n,className:ze(t.className,e)})),sM=Em("h4");sM.displayName="DivStyledAsH4";const oM=R.forwardRef(({className:e,bsPrefix:t,as:n=sM,...i},s)=>(t=Xe(t,"alert-heading"),B.jsx(n,{ref:s,className:ze(e,t),...i})));oM.displayName="AlertHeading";function uB(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e},[e]),t}function Dr(e){const t=uB(e);return R.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function dB(){const e=R.useRef(!0),t=R.useRef(()=>e.current);return R.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function hB(e){const t=R.useRef(null);return R.useEffect(()=>{t.current=e}),t.current}const fB=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",gB=typeof document<"u",Yx=gB||fB?R.useLayoutEffect:R.useEffect,pB=["as","disabled"];function mB(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function CB(e){return!e||e.trim()==="#"}function ob({tagName:e,disabled:t,href:n,target:i,rel:s,role:o,onClick:a,tabIndex:c=0,type:u}){e||(n!=null||i!=null||s!=null?e="a":e="button");const h={tagName:e};if(e==="button")return[{type:u||"button",disabled:t},h];const f=m=>{if((t||e==="a"&&CB(n))&&m.preventDefault(),t){m.stopPropagation();return}a?.(m)},p=m=>{m.key===" "&&(m.preventDefault(),f(m))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:c,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?s:void 0,onClick:f,onKeyDown:p},h]}const vB=R.forwardRef((e,t)=>{let{as:n,disabled:i}=e,s=mB(e,pB);const[o,{tagName:a}]=ob(Object.assign({tagName:n,disabled:i},s));return B.jsx(a,Object.assign({},s,o,{ref:t}))});vB.displayName="Button";const yB=["onKeyDown"];function wB(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function SB(e){return!e||e.trim()==="#"}const rM=R.forwardRef((e,t)=>{let{onKeyDown:n}=e,i=wB(e,yB);const[s]=ob(Object.assign({tagName:"a"},i)),o=Dr(a=>{s.onKeyDown(a),n?.(a)});return SB(i.href)||i.role==="button"?B.jsx("a",Object.assign({ref:t},i,s,{onKeyDown:o})):B.jsx("a",Object.assign({ref:t},i,{onKeyDown:n}))});rM.displayName="Anchor";const aM=R.forwardRef(({className:e,bsPrefix:t,as:n=rM,...i},s)=>(t=Xe(t,"alert-link"),B.jsx(n,{ref:s,className:ze(e,t),...i})));aM.displayName="AlertLink";const bB={[Er]:"show",[Va]:"show"},dh=R.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...s},o)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},c=R.useCallback((u,h)=>{rB(u),i?.(u,h)},[i]);return B.jsx(iM,{ref:o,addEndListener:oB,...a,onEnter:c,childRef:Rm(t),children:(u,h)=>R.cloneElement(t,{...h,className:ze("fade",e,t.props.className,bB[u],n[u])})})});dh.displayName="Fade";const RB={"aria-label":Ao.string,onClick:Ao.func,variant:Ao.oneOf(["white"])},Tm=R.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},s)=>B.jsx("button",{ref:s,type:"button",className:ze("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));Tm.displayName="CloseButton";Tm.propTypes=RB;const lM=R.forwardRef((e,t)=>{const{bsPrefix:n,show:i=!0,closeLabel:s="Close alert",closeVariant:o,className:a,children:c,variant:u="primary",onClose:h,dismissible:f,transition:p=dh,...m}=V2(e,{show:"onClose"}),w=Xe(n,"alert"),S=bp(F=>{h&&h(!1,F)}),E=p===!0?dh:p,T=B.jsxs("div",{role:"alert",...E?void 0:m,ref:t,className:ze(a,w,u&&`${w}-${u}`,f&&`${w}-dismissible`),children:[f&&B.jsx(Tm,{onClick:S,"aria-label":s,variant:o}),c]});return E?B.jsx(E,{unmountOnExit:!0,...m,ref:void 0,in:i,children:T}):i?T:null});lM.displayName="Alert";const EB=Object.assign(lM,{Link:aM,Heading:oM}),_w=R.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:i,className:s,as:o="span",...a},c)=>{const u=Xe(e,"badge");return B.jsx(o,{ref:c,...a,className:ze(s,u,n&&"rounded-pill",i&&`text-${i}`,t&&`bg-${t}`)})});_w.displayName="Badge";const Xi=R.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:s=!1,disabled:o=!1,className:a,...c},u)=>{const h=Xe(t,"btn"),[f,{tagName:p}]=ob({tagName:e,disabled:o,...c}),m=p;return B.jsx(m,{...f,...c,ref:u,disabled:o,className:ze(a,h,s&&"active",n&&`${h}-${n}`,i&&`${h}-${i}`,c.href&&o&&"disabled")})});Xi.displayName="Button";const rb=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Xe(t,"card-body"),B.jsx(n,{ref:s,className:ze(e,t),...i})));rb.displayName="CardBody";const cM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Xe(t,"card-footer"),B.jsx(n,{ref:s,className:ze(e,t),...i})));cM.displayName="CardFooter";const uM=R.createContext(null);uM.displayName="CardHeaderContext";const dM=R.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},s)=>{const o=Xe(e,"card-header"),a=R.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return B.jsx(uM.Provider,{value:a,children:B.jsx(n,{ref:s,...i,className:ze(t,o)})})});dM.displayName="CardHeader";const hM=R.forwardRef(({bsPrefix:e,className:t,variant:n,as:i="img",...s},o)=>{const a=Xe(e,"card-img");return B.jsx(i,{ref:o,className:ze(n?`${a}-${n}`:a,t),...s})});hM.displayName="CardImg";const fM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Xe(t,"card-img-overlay"),B.jsx(n,{ref:s,className:ze(e,t),...i})));fM.displayName="CardImgOverlay";const gM=R.forwardRef(({className:e,bsPrefix:t,as:n="a",...i},s)=>(t=Xe(t,"card-link"),B.jsx(n,{ref:s,className:ze(e,t),...i})));gM.displayName="CardLink";const TB=Em("h6"),pM=R.forwardRef(({className:e,bsPrefix:t,as:n=TB,...i},s)=>(t=Xe(t,"card-subtitle"),B.jsx(n,{ref:s,className:ze(e,t),...i})));pM.displayName="CardSubtitle";const mM=R.forwardRef(({className:e,bsPrefix:t,as:n="p",...i},s)=>(t=Xe(t,"card-text"),B.jsx(n,{ref:s,className:ze(e,t),...i})));mM.displayName="CardText";const xB=Em("h5"),CM=R.forwardRef(({className:e,bsPrefix:t,as:n=xB,...i},s)=>(t=Xe(t,"card-title"),B.jsx(n,{ref:s,className:ze(e,t),...i})));CM.displayName="CardTitle";const vM=R.forwardRef(({bsPrefix:e,className:t,bg:n,text:i,border:s,body:o=!1,children:a,as:c="div",...u},h)=>{const f=Xe(e,"card");return B.jsx(c,{ref:h,...u,className:ze(t,f,n&&`bg-${n}`,i&&`text-${i}`,s&&`border-${s}`),children:o?B.jsx(rb,{children:a}):a})});vM.displayName="Card";const Ga=Object.assign(vM,{Img:hM,Title:CM,Subtitle:pM,Body:rb,Link:gM,Text:mM,Header:dM,Footer:cM,ImgOverlay:fM});function DB(e){const t=R.useRef(e);return t.current=e,t}function AB(e){const t=DB(e);R.useEffect(()=>()=>t.current(),[])}function FB(e,t){return R.Children.toArray(e).some(n=>R.isValidElement(n)&&n.type===t)}function PB({as:e,bsPrefix:t,className:n,...i}){t=Xe(t,"col");const s=XP(),o=ZP(),a=[],c=[];return s.forEach(u=>{const h=i[u];delete i[u];let f,p,m;typeof h=="object"&&h!=null?{span:f,offset:p,order:m}=h:f=h;const w=u!==o?`-${u}`:"";f&&a.push(f===!0?`${t}${w}`:`${t}${w}-${f}`),m!=null&&c.push(`order${w}-${m}`),p!=null&&c.push(`offset${w}-${p}`)}),[{...i,className:ze(n,...a,...c)},{as:e,bsPrefix:t,spans:a}]}const nn=R.forwardRef((e,t)=>{const[{className:n,...i},{as:s="div",bsPrefix:o,spans:a}]=PB(e);return B.jsx(s,{...i,ref:t,className:ze(n,!a.length&&o)})});nn.displayName="Col";const yM=R.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:i,...s},o)=>{const a=Xe(e,"container"),c=typeof t=="string"?`-${t}`:"-fluid";return B.jsx(n,{ref:o,...s,className:ze(i,t?`${a}${c}`:a)})});yM.displayName="Container";var MB=Function.prototype.bind.call(Function.prototype.call,[].slice);function Cc(e,t){return MB(e.querySelectorAll(t))}function Qx(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const IB="data-rr-ui-";function _B(e){return`${IB}${e}`}const wM=R.createContext(uu?window:void 0);wM.Provider;function ab(){return R.useContext(wM)}const SM=R.createContext(null);SM.displayName="InputGroupContext";const kB={type:Ao.string,tooltip:Ao.bool,as:Ao.elementType},xm=R.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...s},o)=>B.jsx(e,{...s,ref:o,className:ze(t,`${n}-${i?"tooltip":"feedback"}`)}));xm.displayName="Feedback";xm.propTypes=kB;const ko=R.createContext({}),Uh=R.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:s=!1,isInvalid:o=!1,as:a="input",...c},u)=>{const{controlId:h}=R.useContext(ko);return t=Xe(t,"form-check-input"),B.jsx(a,{...c,ref:u,type:i,id:e||h,className:ze(n,t,s&&"is-valid",o&&"is-invalid")})});Uh.displayName="FormCheckInput";const Rp=R.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},s)=>{const{controlId:o}=R.useContext(ko);return e=Xe(e,"form-check-label"),B.jsx("label",{...i,ref:s,htmlFor:n||o,className:ze(t,e)})});Rp.displayName="FormCheckLabel";const bM=R.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:s=!1,disabled:o=!1,isValid:a=!1,isInvalid:c=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:f,className:p,style:m,title:w="",type:S="checkbox",label:E,children:T,as:F="input",...P},M)=>{t=Xe(t,"form-check"),n=Xe(n,"form-switch");const{controlId:U}=R.useContext(ko),z=R.useMemo(()=>({controlId:e||U}),[U,e]),j=!T&&E!=null&&E!==!1||FB(T,Rp),I=B.jsx(Uh,{...P,type:S==="switch"?"checkbox":S,ref:M,isValid:a,isInvalid:c,disabled:o,as:F});return B.jsx(ko.Provider,{value:z,children:B.jsx("div",{style:m,className:ze(p,j&&t,i&&`${t}-inline`,s&&`${t}-reverse`,S==="switch"&&n),children:T||B.jsxs(B.Fragment,{children:[I,j&&B.jsx(Rp,{title:w,children:E}),h&&B.jsx(xm,{type:f,tooltip:u,children:h})]})})})});bM.displayName="FormCheck";const Ep=Object.assign(bM,{Input:Uh,Label:Rp}),RM=R.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:s,className:o,isValid:a=!1,isInvalid:c=!1,plaintext:u,readOnly:h,as:f="input",...p},m)=>{const{controlId:w}=R.useContext(ko);return e=Xe(e,"form-control"),B.jsx(f,{...p,type:t,size:i,ref:m,readOnly:h,id:s||w,className:ze(o,u?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",c&&"is-invalid")})});RM.displayName="FormControl";const LB=Object.assign(RM,{Feedback:xm}),EM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Xe(t,"form-floating"),B.jsx(n,{ref:s,className:ze(e,t),...i})));EM.displayName="FormFloating";const lb=R.forwardRef(({controlId:e,as:t="div",...n},i)=>{const s=R.useMemo(()=>({controlId:e}),[e]);return B.jsx(ko.Provider,{value:s,children:B.jsx(t,{...n,ref:i})})});lb.displayName="FormGroup";const TM=R.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:s,htmlFor:o,...a},c)=>{const{controlId:u}=R.useContext(ko);t=Xe(t,"form-label");let h="col-form-label";typeof n=="string"&&(h=`${h} ${h}-${n}`);const f=ze(s,t,i&&"visually-hidden",n&&h);return o=o||u,n?B.jsx(nn,{ref:c,as:"label",className:f,htmlFor:o,...a}):B.jsx(e,{ref:c,className:f,htmlFor:o,...a})});TM.displayName="FormLabel";const xM=R.forwardRef(({bsPrefix:e,className:t,id:n,...i},s)=>{const{controlId:o}=R.useContext(ko);return e=Xe(e,"form-range"),B.jsx("input",{...i,type:"range",ref:s,className:ze(t,e),id:n||o})});xM.displayName="FormRange";const DM=R.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:s=!1,isInvalid:o=!1,id:a,...c},u)=>{const{controlId:h}=R.useContext(ko);return e=Xe(e,"form-select"),B.jsx("select",{...c,size:n,ref:u,className:ze(i,e,t&&`${e}-${t}`,s&&"is-valid",o&&"is-invalid"),id:a||h})});DM.displayName="FormSelect";const AM=R.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...s},o)=>(e=Xe(e,"form-text"),B.jsx(n,{...s,ref:o,className:ze(t,e,i&&"text-muted")})));AM.displayName="FormText";const FM=R.forwardRef((e,t)=>B.jsx(Ep,{...e,ref:t,type:"switch"}));FM.displayName="Switch";const OB=Object.assign(FM,{Input:Ep.Input,Label:Ep.Label}),PM=R.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:s,...o},a)=>(e=Xe(e,"form-floating"),B.jsxs(lb,{ref:a,className:ze(t,e),controlId:i,...o,children:[n,B.jsx("label",{htmlFor:i,children:s})]})));PM.displayName="FloatingLabel";const VB={_ref:Ao.any,validated:Ao.bool,as:Ao.elementType},cb=R.forwardRef(({className:e,validated:t,as:n="form",...i},s)=>B.jsx(n,{...i,ref:s,className:ze(e,t&&"was-validated")}));cb.displayName="Form";cb.propTypes=VB;const Ge=Object.assign(cb,{Group:lb,Control:LB,Floating:EM,Check:Ep,Switch:OB,Label:TM,Text:AM,Range:xM,Select:DM,FloatingLabel:PM}),Dm=R.forwardRef(({className:e,bsPrefix:t,as:n="span",...i},s)=>(t=Xe(t,"input-group-text"),B.jsx(n,{ref:s,className:ze(e,t),...i})));Dm.displayName="InputGroupText";const NB=e=>B.jsx(Dm,{children:B.jsx(Uh,{type:"checkbox",...e})}),BB=e=>B.jsx(Dm,{children:B.jsx(Uh,{type:"radio",...e})}),MM=R.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:i,as:s="div",...o},a)=>{e=Xe(e,"input-group");const c=R.useMemo(()=>({}),[]);return B.jsx(SM.Provider,{value:c,children:B.jsx(s,{ref:a,...o,className:ze(i,e,t&&`${e}-${t}`,n&&"has-validation")})})});MM.displayName="InputGroup";const Tr=Object.assign(MM,{Text:Dm,Radio:BB,Checkbox:NB}),Xx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function GB(e,t){const n=Xx(e),i=Xx(t);return s=>{n&&n(s),i&&i(s)}}function ub(e,t){return R.useMemo(()=>GB(e,t),[e,t])}var Mg;function Zx(e){if((!Mg&&Mg!==0||e)&&uu){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Mg=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Mg}function HB(){return R.useState(null)}function my(e){e===void 0&&(e=bm());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function zB(e){const t=R.useRef(e);return t.current=e,t}function UB(e){const t=zB(e);R.useEffect(()=>()=>t.current(),[])}function WB(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Jx=_B("modal-open");class db{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return WB(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[i]:s.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(qa(s,i)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(Jx,""),qa(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Jx),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const Cy=(e,t)=>uu?e==null?(t||bm()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function jB(e,t){const n=ab(),[i,s]=R.useState(()=>Cy(e,n?.document));if(!i){const o=Cy(e);o&&s(o)}return R.useEffect(()=>{},[t,i]),R.useEffect(()=>{const o=Cy(e);o!==i&&s(o)},[e,i]),i}function $B({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:s}){const o=R.useRef(null),a=R.useRef(t),c=Dr(n);R.useEffect(()=>{t?a.current=!0:c(o.current)},[t,c]);const u=ub(o,Rm(e)),h=R.cloneElement(e,{ref:u});return t?h:s||!a.current&&i?null:h}const qB=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function KB(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function YB(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:s,onExiting:o,onExited:a,addEndListener:c,children:u}=e,h=KB(e,qB);const f=R.useRef(null),p=ub(f,Rm(u)),m=U=>z=>{U&&f.current&&U(f.current,z)},w=R.useCallback(m(t),[t]),S=R.useCallback(m(n),[n]),E=R.useCallback(m(i),[i]),T=R.useCallback(m(s),[s]),F=R.useCallback(m(o),[o]),P=R.useCallback(m(a),[a]),M=R.useCallback(m(c),[c]);return Object.assign({},h,{nodeRef:f},t&&{onEnter:w},n&&{onEntering:S},i&&{onEntered:E},s&&{onExit:T},o&&{onExiting:F},a&&{onExited:P},c&&{addEndListener:M},{children:typeof u=="function"?(U,z)=>u(U,Object.assign({},z,{ref:p})):R.cloneElement(u,{ref:p})})}const QB=["component"];function XB(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}const ZB=R.forwardRef((e,t)=>{let{component:n}=e,i=XB(e,QB);const s=YB(i);return B.jsx(n,Object.assign({ref:t},s))});function JB({in:e,onTransition:t}){const n=R.useRef(null),i=R.useRef(!0),s=Dr(t);return Yx(()=>{if(!n.current)return;let o=!1;return s({in:e,element:n.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[e,s]),Yx(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function eG({children:e,in:t,onExited:n,onEntered:i,transition:s}){const[o,a]=R.useState(!t);t&&o&&a(!1);const c=JB({in:!!t,onTransition:h=>{const f=()=>{h.isStale()||(h.in?i?.(h.element,h.initial):(a(!0),n?.(h.element)))};Promise.resolve(s(h)).then(f,p=>{throw h.in||a(!0),p})}}),u=ub(c,Rm(e));return o&&!t?null:R.cloneElement(e,{ref:u})}function eD(e,t,n){return e?B.jsx(ZB,Object.assign({},n,{component:e})):t?B.jsx(eG,Object.assign({},n,{transition:t})):B.jsx($B,Object.assign({},n))}const tG=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function nG(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}let vy;function iG(e){return vy||(vy=new db({ownerDocument:e?.document})),vy}function sG(e){const t=ab(),n=e||iG(t),i=R.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:R.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:R.useCallback(s=>{i.current.backdrop=s},[])})}const IM=R.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:s,style:o,children:a,backdrop:c=!0,keyboard:u=!0,onBackdropClick:h,onEscapeKeyDown:f,transition:p,runTransition:m,backdropTransition:w,runBackdropTransition:S,autoFocus:E=!0,enforceFocus:T=!0,restoreFocus:F=!0,restoreFocusOptions:P,renderDialog:M,renderBackdrop:U=Me=>B.jsx("div",Object.assign({},Me)),manager:z,container:j,onShow:I,onHide:A=()=>{},onExit:_,onExited:L,onExiting:O,onEnter:G,onEntering:N,onEntered:Re}=e,pe=nG(e,tG);const K=ab(),ie=jB(j),se=sG(z),we=dB(),H=hB(n),[ee,le]=R.useState(!n),ne=R.useRef(null);R.useImperativeHandle(t,()=>se,[se]),uu&&!H&&n&&(ne.current=my(K?.document)),n&&ee&&le(!1);const me=Dr(()=>{if(se.add(),Ht.current=Sp(document,"keydown",et),We.current=Sp(document,"focus",()=>setTimeout(xe),!0),I&&I(),E){var Me,ut;const ht=my((Me=(ut=se.dialog)==null?void 0:ut.ownerDocument)!=null?Me:K?.document);se.dialog&&ht&&!Qx(se.dialog,ht)&&(ne.current=ht,se.dialog.focus())}}),Ee=Dr(()=>{if(se.remove(),Ht.current==null||Ht.current(),We.current==null||We.current(),F){var Me;(Me=ne.current)==null||Me.focus==null||Me.focus(P),ne.current=null}});R.useEffect(()=>{!n||!ie||me()},[n,ie,me]),R.useEffect(()=>{ee&&Ee()},[ee,Ee]),UB(()=>{Ee()});const xe=Dr(()=>{if(!T||!we()||!se.isTopModal())return;const Me=my(K?.document);se.dialog&&Me&&!Qx(se.dialog,Me)&&se.dialog.focus()}),ct=Dr(Me=>{Me.target===Me.currentTarget&&(h?.(Me),c===!0&&A())}),et=Dr(Me=>{u&&eB(Me)&&se.isTopModal()&&(f?.(Me),Me.defaultPrevented||A())}),We=R.useRef(),Ht=R.useRef(),gt=(...Me)=>{le(!0),L?.(...Me)};if(!ie)return null;const _t=Object.assign({role:i,ref:se.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},pe,{style:o,className:s,tabIndex:-1});let Xt=M?M(_t):B.jsx("div",Object.assign({},_t,{children:R.cloneElement(a,{role:"document"})}));Xt=eD(p,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:_,onExiting:O,onExited:gt,onEnter:G,onEntering:N,onEntered:Re,children:Xt});let Ae=null;return c&&(Ae=U({ref:se.setBackdropRef,onClick:ct}),Ae=eD(w,S,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Ae})),B.jsx(B.Fragment,{children:Ba.createPortal(B.jsxs(B.Fragment,{children:[Ae,Xt]}),ie)})});IM.displayName="Modal";const oG=Object.assign(IM,{Manager:db});function rG(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function aG(e,t){e.classList?e.classList.add(t):rG(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function tD(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function lG(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=tD(e.className,t):e.setAttribute("class",tD(e.className&&e.className.baseVal||"",t))}const vc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class cG extends db{adjustAndStore(t,n,i){const s=n.style[t];n.dataset[t]=s,qa(n,{[t]:`${parseFloat(qa(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],qa(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(aG(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Cc(n,vc.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth)),Cc(n,vc.STICKY_CONTENT).forEach(o=>this.adjustAndStore(s,o,-t.scrollBarWidth)),Cc(n,vc.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(s,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();lG(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Cc(n,vc.FIXED_CONTENT).forEach(o=>this.restore(i,o)),Cc(n,vc.STICKY_CONTENT).forEach(o=>this.restore(s,o)),Cc(n,vc.NAVBAR_TOGGLER).forEach(o=>this.restore(s,o))}}let yy;function uG(e){return yy||(yy=new cG(e)),yy}const _M=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Xe(t,"modal-body"),B.jsx(n,{ref:s,className:ze(e,t),...i})));_M.displayName="ModalBody";const kM=R.createContext({onHide(){}}),hb=R.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:s,fullscreen:o,children:a,scrollable:c,...u},h)=>{e=Xe(e,"modal");const f=`${e}-dialog`,p=typeof o=="string"?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return B.jsx("div",{...u,ref:h,className:ze(f,t,s&&`${e}-${s}`,i&&`${f}-centered`,c&&`${f}-scrollable`,o&&p),children:B.jsx("div",{className:ze(`${e}-content`,n),children:a})})});hb.displayName="ModalDialog";const LM=R.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},s)=>(t=Xe(t,"modal-footer"),B.jsx(n,{ref:s,className:ze(e,t),...i})));LM.displayName="ModalFooter";const OM=R.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:s,...o},a)=>{const c=R.useContext(kM),u=bp(()=>{c?.onHide(),i?.()});return B.jsxs("div",{ref:a,...o,children:[s,n&&B.jsx(Tm,{"aria-label":e,variant:t,onClick:u})]})});OM.displayName="AbstractModalHeader";const VM=R.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...s},o)=>(e=Xe(e,"modal-header"),B.jsx(OM,{ref:o,...s,className:ze(t,e),closeLabel:n,closeButton:i})));VM.displayName="ModalHeader";const dG=Em("h4"),NM=R.forwardRef(({className:e,bsPrefix:t,as:n=dG,...i},s)=>(t=Xe(t,"modal-title"),B.jsx(n,{ref:s,className:ze(e,t),...i})));NM.displayName="ModalTitle";function hG(e){return B.jsx(dh,{...e,timeout:null})}function fG(e){return B.jsx(dh,{...e,timeout:null})}const BM=R.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:s,children:o,dialogAs:a=hb,"data-bs-theme":c,"aria-labelledby":u,"aria-describedby":h,"aria-label":f,show:p=!1,animation:m=!0,backdrop:w=!0,keyboard:S=!0,onEscapeKeyDown:E,onShow:T,onHide:F,container:P,autoFocus:M=!0,enforceFocus:U=!0,restoreFocus:z=!0,restoreFocusOptions:j,onEntered:I,onExit:A,onExiting:_,onEnter:L,onEntering:O,onExited:G,backdropClassName:N,manager:Re,...pe},K)=>{const[ie,se]=R.useState({}),[we,H]=R.useState(!1),ee=R.useRef(!1),le=R.useRef(!1),ne=R.useRef(null),[me,Ee]=HB(),xe=nM(K,Ee),ct=bp(F),et=H2();e=Xe(e,"modal");const We=R.useMemo(()=>({onHide:ct}),[ct]);function Ht(){return Re||uG({isRTL:et})}function gt(Ie){if(!uu)return;const Ke=Ht().getScrollbarWidth()>0,qe=Ie.scrollHeight>bm(Ie).documentElement.clientHeight;se({paddingRight:Ke&&!qe?Zx():void 0,paddingLeft:!Ke&&qe?Zx():void 0})}const _t=bp(()=>{me&&gt(me.dialog)});AB(()=>{Iw(window,"resize",_t),ne.current==null||ne.current()});const Xt=()=>{ee.current=!0},Ae=Ie=>{ee.current&&me&&Ie.target===me.dialog&&(le.current=!0),ee.current=!1},Me=()=>{H(!0),ne.current=tM(me.dialog,()=>{H(!1)})},ut=Ie=>{Ie.target===Ie.currentTarget&&Me()},ht=Ie=>{if(w==="static"){ut(Ie);return}if(le.current||Ie.target!==Ie.currentTarget){le.current=!1;return}F?.()},je=Ie=>{S?E?.(Ie):(Ie.preventDefault(),w==="static"&&Me())},Rt=(Ie,Ke)=>{Ie&&gt(Ie),L?.(Ie,Ke)},kt=Ie=>{ne.current==null||ne.current(),A?.(Ie)},Pt=(Ie,Ke)=>{O?.(Ie,Ke),eM(window,"resize",_t)},qt=Ie=>{Ie&&(Ie.style.display=""),G?.(Ie),Iw(window,"resize",_t)},Rn=R.useCallback(Ie=>B.jsx("div",{...Ie,className:ze(`${e}-backdrop`,N,!m&&"show")}),[m,N,e]),ri={...n,...ie};ri.display="block";const Zs=Ie=>B.jsx("div",{role:"dialog",...Ie,style:ri,className:ze(t,e,we&&`${e}-static`,!m&&"show"),onClick:w?ht:void 0,onMouseUp:Ae,"data-bs-theme":c,"aria-label":f,"aria-labelledby":u,"aria-describedby":h,children:B.jsx(a,{...pe,onMouseDown:Xt,className:i,contentClassName:s,children:o})});return B.jsx(kM.Provider,{value:We,children:B.jsx(oG,{show:p,ref:xe,backdrop:w,container:P,keyboard:!0,autoFocus:M,enforceFocus:U,restoreFocus:z,restoreFocusOptions:j,onEscapeKeyDown:je,onShow:T,onHide:F,onEnter:Rt,onEntering:Pt,onEntered:I,onExit:kt,onExiting:_,onExited:qt,manager:Ht(),transition:m?hG:void 0,backdropTransition:m?fG:void 0,renderBackdrop:Rn,renderDialog:Zs})})});BM.displayName="Modal";const To=Object.assign(BM,{Body:_M,Header:VM,Title:NM,Footer:LM,Dialog:hb,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Is=R.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},s)=>{const o=Xe(e,"row"),a=XP(),c=ZP(),u=`${o}-cols`,h=[];return a.forEach(f=>{const p=i[f];delete i[f];let m;p!=null&&typeof p=="object"?{cols:m}=p:m=p;const w=f!==c?`-${f}`:"";m!=null&&h.push(`${u}${w}-${m}`)}),B.jsx(n,{ref:s,...i,className:ze(t,o,...h)})});Is.displayName="Row";const Am=R.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:i,as:s="div",className:o,...a},c)=>{e=Xe(e,"spinner");const u=`${e}-${n}`;return B.jsx(s,{ref:c,...a,className:ze(o,u,i&&`${u}-${i}`,t&&`text-${t}`)})});Am.displayName="Spinner";const fb=R.createContext({});function gb(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const pb=typeof window<"u",GM=pb?R.useLayoutEffect:R.useEffect,Fm=R.createContext(null);function mb(e,t){e.indexOf(t)===-1&&e.push(t)}function Cb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Lo=(e,t,n)=>n>t?t:n<e?e:n;let vb=()=>{};const Oo={},HM=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function zM(e){return typeof e=="object"&&e!==null}const UM=e=>/^0[^.\s]+$/u.test(e);function yb(e){let t;return()=>(t===void 0&&(t=e()),t)}const Zi=e=>e,gG=(e,t)=>n=>t(e(n)),Wh=(...e)=>e.reduce(gG),hh=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class wb{constructor(){this.subscriptions=[]}add(t){return mb(this.subscriptions,t),()=>Cb(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vs=e=>e*1e3,Ns=e=>e/1e3;function WM(e,t){return t?e*(1e3/t):0}const jM=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,pG=1e-7,mG=12;function CG(e,t,n,i,s){let o,a,c=0;do a=t+(n-t)/2,o=jM(a,i,s)-e,o>0?n=a:t=a;while(Math.abs(o)>pG&&++c<mG);return a}function jh(e,t,n,i){if(e===t&&n===i)return Zi;const s=o=>CG(o,0,1,e,n);return o=>o===0||o===1?o:jM(s(o),t,i)}const $M=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qM=e=>t=>1-e(1-t),KM=jh(.33,1.53,.69,.99),Sb=qM(KM),YM=$M(Sb),QM=e=>(e*=2)<1?.5*Sb(e):.5*(2-Math.pow(2,-10*(e-1))),bb=e=>1-Math.sin(Math.acos(e)),XM=qM(bb),ZM=$M(bb),vG=jh(.42,0,1,1),yG=jh(0,0,.58,1),JM=jh(.42,0,.58,1),wG=e=>Array.isArray(e)&&typeof e[0]!="number",e1=e=>Array.isArray(e)&&typeof e[0]=="number",SG={linear:Zi,easeIn:vG,easeInOut:JM,easeOut:yG,circIn:bb,circInOut:ZM,circOut:XM,backIn:Sb,backInOut:YM,backOut:KM,anticipate:QM},bG=e=>typeof e=="string",nD=e=>{if(e1(e)){vb(e.length===4);const[t,n,i,s]=e;return jh(t,n,i,s)}else if(bG(e))return SG[e];return e},Ig=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function RG(e,t){let n=new Set,i=new Set,s=!1,o=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(f){a.has(f)&&(h.schedule(f),e()),f(c)}const h={schedule:(f,p=!1,m=!1)=>{const S=m&&s?n:i;return p&&a.add(f),S.has(f)||S.add(f),f},cancel:f=>{i.delete(f),a.delete(f)},process:f=>{if(c=f,s){o=!0;return}s=!0,[n,i]=[i,n],n.forEach(u),n.clear(),s=!1,o&&(o=!1,h.process(f))}};return h}const EG=40;function t1(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Ig.reduce((M,U)=>(M[U]=RG(o),M),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:f,update:p,preRender:m,render:w,postRender:S}=a,E=()=>{const M=Oo.useManualTiming?s.timestamp:performance.now();n=!1,Oo.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(M-s.timestamp,EG),1)),s.timestamp=M,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),f.process(s),p.process(s),m.process(s),w.process(s),S.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(E))},T=()=>{n=!0,i=!0,s.isProcessing||e(E)};return{schedule:Ig.reduce((M,U)=>{const z=a[U];return M[U]=(j,I=!1,A=!1)=>(n||T(),z.schedule(j,I,A)),M},{}),cancel:M=>{for(let U=0;U<Ig.length;U++)a[Ig[U]].cancel(M)},state:s,steps:a}}const{schedule:Gt,cancel:Or,state:Nn,steps:wy}=t1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zi,!0);let Jg;function TG(){Jg=void 0}const gi={now:()=>(Jg===void 0&&gi.set(Nn.isProcessing||Oo.useManualTiming?Nn.timestamp:performance.now()),Jg),set:e=>{Jg=e,queueMicrotask(TG)}},n1=e=>t=>typeof t=="string"&&t.startsWith(e),Rb=n1("--"),xG=n1("var(--"),Eb=e=>xG(e)?DG.test(e.split("/*")[0].trim()):!1,DG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,du={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},fh={...du,transform:e=>Lo(0,1,e)},_g={...du,default:1},qd=e=>Math.round(e*1e5)/1e5,Tb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AG(e){return e==null}const FG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xb=(e,t)=>n=>!!(typeof n=="string"&&FG.test(n)&&n.startsWith(e)||t&&!AG(n)&&Object.prototype.hasOwnProperty.call(n,t)),i1=(e,t,n)=>i=>{if(typeof i!="string")return i;const[s,o,a,c]=i.match(Tb);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},PG=e=>Lo(0,255,e),Sy={...du,transform:e=>Math.round(PG(e))},Ha={test:xb("rgb","red"),parse:i1("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Sy.transform(e)+", "+Sy.transform(t)+", "+Sy.transform(n)+", "+qd(fh.transform(i))+")"};function MG(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const kw={test:xb("#"),parse:MG,transform:Ha.transform},$h=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Rr=$h("deg"),Bs=$h("%"),Be=$h("px"),IG=$h("vh"),_G=$h("vw"),iD={...Bs,parse:e=>Bs.parse(e)/100,transform:e=>Bs.transform(e*100)},Fc={test:xb("hsl","hue"),parse:i1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Bs.transform(qd(t))+", "+Bs.transform(qd(n))+", "+qd(fh.transform(i))+")"},fn={test:e=>Ha.test(e)||kw.test(e)||Fc.test(e),parse:e=>Ha.test(e)?Ha.parse(e):Fc.test(e)?Fc.parse(e):kw.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ha.transform(e):Fc.transform(e),getAnimatableNone:e=>{const t=fn.parse(e);return t.alpha=0,fn.transform(t)}},kG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LG(e){return isNaN(e)&&typeof e=="string"&&(e.match(Tb)?.length||0)+(e.match(kG)?.length||0)>0}const s1="number",o1="color",OG="var",VG="var(",sD="${}",NG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gh(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let o=0;const c=t.replace(NG,u=>(fn.test(u)?(i.color.push(o),s.push(o1),n.push(fn.parse(u))):u.startsWith(VG)?(i.var.push(o),s.push(OG),n.push(u)):(i.number.push(o),s.push(s1),n.push(parseFloat(u))),++o,sD)).split(sD);return{values:n,split:c,indexes:i,types:s}}function r1(e){return gh(e).values}function a1(e){const{split:t,types:n}=gh(e),i=t.length;return s=>{let o="";for(let a=0;a<i;a++)if(o+=t[a],s[a]!==void 0){const c=n[a];c===s1?o+=qd(s[a]):c===o1?o+=fn.transform(s[a]):o+=s[a]}return o}}const BG=e=>typeof e=="number"?0:fn.test(e)?fn.getAnimatableNone(e):e;function GG(e){const t=r1(e);return a1(e)(t.map(BG))}const Vr={test:LG,parse:r1,createTransformer:a1,getAnimatableNone:GG};function by(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function HG({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,o=0,a=0;if(!t)s=o=a=n;else{const c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;s=by(u,c,e+1/3),o=by(u,c,e),a=by(u,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function Tp(e,t){return n=>n>0?t:e}const Wt=(e,t,n)=>e+(t-e)*n,Ry=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},zG=[kw,Ha,Fc],UG=e=>zG.find(t=>t.test(e));function oD(e){const t=UG(e);if(!t)return!1;let n=t.parse(e);return t===Fc&&(n=HG(n)),n}const rD=(e,t)=>{const n=oD(e),i=oD(t);if(!n||!i)return Tp(e,t);const s={...n};return o=>(s.red=Ry(n.red,i.red,o),s.green=Ry(n.green,i.green,o),s.blue=Ry(n.blue,i.blue,o),s.alpha=Wt(n.alpha,i.alpha,o),Ha.transform(s))},Lw=new Set(["none","hidden"]);function WG(e,t){return Lw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function jG(e,t){return n=>Wt(e,t,n)}function Db(e){return typeof e=="number"?jG:typeof e=="string"?Eb(e)?Tp:fn.test(e)?rD:KG:Array.isArray(e)?l1:typeof e=="object"?fn.test(e)?rD:$G:Tp}function l1(e,t){const n=[...e],i=n.length,s=e.map((o,a)=>Db(o)(o,t[a]));return o=>{for(let a=0;a<i;a++)n[a]=s[a](o);return n}}function $G(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=Db(e[s])(e[s],t[s]));return s=>{for(const o in i)n[o]=i[o](s);return n}}function qG(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][i[o]],c=e.values[a]??0;n[s]=c,i[o]++}return n}const KG=(e,t)=>{const n=Vr.createTransformer(t),i=gh(e),s=gh(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Lw.has(e)&&!s.values.length||Lw.has(t)&&!i.values.length?WG(e,t):Wh(l1(qG(i,s),s.values),n):Tp(e,t)};function c1(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Wt(e,t,n):Db(e)(e,t)}const YG=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Gt.update(t,n),stop:()=>Or(t),now:()=>Nn.isProcessing?Nn.timestamp:gi.now()}},u1=(e,t,n=10)=>{let i="";const s=Math.max(Math.round(t/n),2);for(let o=0;o<s;o++)i+=Math.round(e(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},xp=2e4;function Ab(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<xp;)t+=n,i=e.next(t);return t>=xp?1/0:t}function QG(e,t=100,n){const i=n({...e,keyframes:[0,t]}),s=Math.min(Ab(i),xp);return{type:"keyframes",ease:o=>i.next(s*o).value/t,duration:Ns(s)}}const XG=5;function d1(e,t,n){const i=Math.max(t-XG,0);return WM(n-e(i),t-i)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ey=.001;function ZG({duration:e=Qt.duration,bounce:t=Qt.bounce,velocity:n=Qt.velocity,mass:i=Qt.mass}){let s,o,a=1-t;a=Lo(Qt.minDamping,Qt.maxDamping,a),e=Lo(Qt.minDuration,Qt.maxDuration,Ns(e)),a<1?(s=h=>{const f=h*a,p=f*e,m=f-n,w=Ow(h,a),S=Math.exp(-p);return Ey-m/w*S},o=h=>{const p=h*a*e,m=p*n+n,w=Math.pow(a,2)*Math.pow(h,2)*e,S=Math.exp(-p),E=Ow(Math.pow(h,2),a);return(-s(h)+Ey>0?-1:1)*((m-w)*S)/E}):(s=h=>{const f=Math.exp(-h*e),p=(h-n)*e+1;return-Ey+f*p},o=h=>{const f=Math.exp(-h*e),p=(n-h)*(e*e);return f*p});const c=5/e,u=eH(s,o,c);if(e=Vs(e),isNaN(u))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:e};{const h=Math.pow(u,2)*i;return{stiffness:h,damping:a*2*Math.sqrt(i*h),duration:e}}}const JG=12;function eH(e,t,n){let i=n;for(let s=1;s<JG;s++)i=i-e(i)/t(i);return i}function Ow(e,t){return e*Math.sqrt(1-t*t)}const tH=["duration","bounce"],nH=["stiffness","damping","mass"];function aD(e,t){return t.some(n=>e[n]!==void 0)}function iH(e){let t={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...e};if(!aD(e,nH)&&aD(e,tH))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,o=2*Lo(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Qt.mass,stiffness:s,damping:o}}else{const n=ZG(e);t={...t,...n,mass:Qt.mass},t.isResolvedFromDuration=!0}return t}function Dp(e=Qt.visualDuration,t=Qt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:u,damping:h,mass:f,duration:p,velocity:m,isResolvedFromDuration:w}=iH({...n,velocity:-Ns(n.velocity||0)}),S=m||0,E=h/(2*Math.sqrt(u*f)),T=a-o,F=Ns(Math.sqrt(u/f)),P=Math.abs(T)<5;i||(i=P?Qt.restSpeed.granular:Qt.restSpeed.default),s||(s=P?Qt.restDelta.granular:Qt.restDelta.default);let M;if(E<1){const z=Ow(F,E);M=j=>{const I=Math.exp(-E*F*j);return a-I*((S+E*F*T)/z*Math.sin(z*j)+T*Math.cos(z*j))}}else if(E===1)M=z=>a-Math.exp(-F*z)*(T+(S+F*T)*z);else{const z=F*Math.sqrt(E*E-1);M=j=>{const I=Math.exp(-E*F*j),A=Math.min(z*j,300);return a-I*((S+E*F*T)*Math.sinh(A)+z*T*Math.cosh(A))/z}}const U={calculatedDuration:w&&p||null,next:z=>{const j=M(z);if(w)c.done=z>=p;else{let I=z===0?S:0;E<1&&(I=z===0?Vs(S):d1(M,z,j));const A=Math.abs(I)<=i,_=Math.abs(a-j)<=s;c.done=A&&_}return c.value=c.done?a:j,c},toString:()=>{const z=Math.min(Ab(U),xp),j=u1(I=>U.next(z*I).value,z,30);return z+"ms "+j},toTransition:()=>{}};return U}Dp.applyToOptions=e=>{const t=QG(e,100,Dp);return e.ease=t.ease,e.duration=Vs(t.duration),e.type="keyframes",e};function Vw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:c,max:u,restDelta:h=.5,restSpeed:f}){const p=e[0],m={done:!1,value:p},w=A=>c!==void 0&&A<c||u!==void 0&&A>u,S=A=>c===void 0?u:u===void 0||Math.abs(c-A)<Math.abs(u-A)?c:u;let E=n*t;const T=p+E,F=a===void 0?T:a(T);F!==T&&(E=F-p);const P=A=>-E*Math.exp(-A/i),M=A=>F+P(A),U=A=>{const _=P(A),L=M(A);m.done=Math.abs(_)<=h,m.value=m.done?F:L};let z,j;const I=A=>{w(m.value)&&(z=A,j=Dp({keyframes:[m.value,S(m.value)],velocity:d1(M,A,m.value),damping:s,stiffness:o,restDelta:h,restSpeed:f}))};return I(0),{calculatedDuration:null,next:A=>{let _=!1;return!j&&z===void 0&&(_=!0,U(A),I(A)),z!==void 0&&A>=z?j.next(A-z):(!_&&U(A),m)}}}function sH(e,t,n){const i=[],s=n||Oo.mix||c1,o=e.length-1;for(let a=0;a<o;a++){let c=s(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||Zi:t;c=Wh(u,c)}i.push(c)}return i}function oH(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const o=e.length;if(vb(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=sH(t,i,s),u=c.length,h=f=>{if(a&&f<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(f<e[p+1]);p++);const m=hh(e[p],e[p+1],f);return c[p](m)};return n?f=>h(Lo(e[0],e[o-1],f)):h}function rH(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=hh(0,t,i);e.push(Wt(n,1,s))}}function aH(e){const t=[0];return rH(t,e.length-1),t}function lH(e,t){return e.map(n=>n*t)}function cH(e,t){return e.map(()=>t||JM).splice(0,e.length-1)}function Kd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=wG(i)?i.map(nD):nD(i),o={done:!1,value:t[0]},a=lH(n&&n.length===t.length?n:aH(t),e),c=oH(a,t,{ease:Array.isArray(s)?s:cH(t,s)});return{calculatedDuration:e,next:u=>(o.value=c(u),o.done=u>=e,o)}}const uH=e=>e!==null;function Fb(e,{repeat:t,repeatType:n="loop"},i,s=1){const o=e.filter(uH),c=s<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!c||i===void 0?o[c]:i}const dH={decay:Vw,inertia:Vw,tween:Kd,keyframes:Kd,spring:Dp};function h1(e){typeof e.type=="string"&&(e.type=dH[e.type])}class Pb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const hH=e=>e/100;class Mb extends Pb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==gi.now()&&this.tick(gi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;h1(t);const{type:n=Kd,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=t;let{keyframes:c}=t;const u=n||Kd;u!==Kd&&typeof c[0]!="number"&&(this.mixKeyframes=Wh(hH,c1(c[0],c[1])),c=[0,100]);const h=u({...t,keyframes:c});o==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=Ab(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:w,type:S,onUpdate:E,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const F=this.currentTime-h*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?F<0:F>s;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,U=i;if(p){const A=Math.min(this.currentTime,s)/c;let _=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&_--,_=Math.min(_,p+1),!!(_%2)&&(m==="reverse"?(L=1-L,w&&(L-=w/c)):m==="mirror"&&(U=a)),M=Lo(0,1,L)*c}const z=P?{done:!1,value:f[0]}:U.next(M);o&&(z.value=o(z.value));let{done:j}=z;!P&&u!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return I&&S!==Vw&&(z.value=Fb(f,this.options,T,this.speed)),E&&E(z.value),I&&this.finish(),z}then(t,n){return this.finished.then(t,n)}get duration(){return Ns(this.calculatedDuration)}get time(){return Ns(this.currentTime)}set time(t){t=Vs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(gi.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ns(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=YG,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(gi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function fH(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const za=e=>e*180/Math.PI,Nw=e=>{const t=za(Math.atan2(e[1],e[0]));return Bw(t)},gH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Nw,rotateZ:Nw,skewX:e=>za(Math.atan(e[1])),skewY:e=>za(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Bw=e=>(e=e%360,e<0&&(e+=360),e),lD=Nw,cD=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),uD=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),pH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:cD,scaleY:uD,scale:e=>(cD(e)+uD(e))/2,rotateX:e=>Bw(za(Math.atan2(e[6],e[5]))),rotateY:e=>Bw(za(Math.atan2(-e[2],e[0]))),rotateZ:lD,rotate:lD,skewX:e=>za(Math.atan(e[4])),skewY:e=>za(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Gw(e){return e.includes("scale")?1:0}function Hw(e,t){if(!e||e==="none")return Gw(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=pH,s=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=gH,s=c}if(!s)return Gw(t);const o=i[t],a=s[1].split(",").map(CH);return typeof o=="function"?o(a):a[o]}const mH=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Hw(n,t)};function CH(e){return parseFloat(e.trim())}const hu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fu=new Set(hu),dD=e=>e===du||e===Be,vH=new Set(["x","y","z"]),yH=hu.filter(e=>!vH.has(e));function wH(e){const t=[];return yH.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Ka={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Hw(t,"x"),y:(e,{transform:t})=>Hw(t,"y")};Ka.translateX=Ka.x;Ka.translateY=Ka.y;const Ya=new Set;let zw=!1,Uw=!1,Ww=!1;function f1(){if(Uw){const e=Array.from(Ya).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const s=wH(i);s.length&&(n.set(i,s),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([o,a])=>{i.getValue(o)?.set(a)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Uw=!1,zw=!1,Ya.forEach(e=>e.complete(Ww)),Ya.clear()}function g1(){Ya.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Uw=!0)})}function SH(){Ww=!0,g1(),f1(),Ww=!1}class Ib{constructor(t,n,i,s,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=s,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ya.add(this),zw||(zw=!0,Gt.read(g1),Gt.resolveKeyframes(f1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:s}=this;if(t[0]===null){const o=s?.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&n){const c=i.readValue(n,a);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=a),s&&o===void 0&&s.set(t[0])}fH(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ya.delete(this)}cancel(){this.state==="scheduled"&&(Ya.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bH=e=>e.startsWith("--");function RH(e,t,n){bH(t)?e.style.setProperty(t,n):e.style[t]=n}const EH=yb(()=>window.ScrollTimeline!==void 0),TH={};function xH(e,t){const n=yb(e);return()=>TH[t]??n()}const p1=xH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bd=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,hD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bd([0,.65,.55,1]),circOut:Bd([.55,0,1,.45]),backIn:Bd([.31,.01,.66,-.59]),backOut:Bd([.33,1.53,.69,.99])};function m1(e,t){if(e)return typeof e=="function"?p1()?u1(e,t):"ease-out":e1(e)?Bd(e):Array.isArray(e)?e.map(n=>m1(n,t)||hD.easeOut):hD[e]}function DH(e,t,n,{delay:i=0,duration:s=300,repeat:o=0,repeatType:a="loop",ease:c="easeOut",times:u}={},h=void 0){const f={[t]:n};u&&(f.offset=u);const p=m1(c,s);Array.isArray(p)&&(f.easing=p);const m={delay:i,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),e.animate(f,m)}function C1(e){return typeof e=="function"&&"applyToOptions"in e}function AH({type:e,...t}){return C1(e)&&p1()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class FH extends Pb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:s,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=t,vb(typeof t.type!="string");const h=AH(t);this.animation=DH(n,i,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const f=Fb(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):RH(n,i,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ns(Number(t))}get time(){return Ns(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Vs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&EH()?(this.animation.timeline=t,Zi):n(this)}}const v1={anticipate:QM,backInOut:YM,circInOut:ZM};function PH(e){return e in v1}function MH(e){typeof e.ease=="string"&&PH(e.ease)&&(e.ease=v1[e.ease])}const fD=10;class IH extends FH{constructor(t){MH(t),h1(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:s,element:o,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new Mb({...a,autoplay:!1}),u=Vs(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-fD).value,c.sample(u).value,fD),c.stop()}}const gD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vr.test(e)||e==="0")&&!e.startsWith("url("));function _H(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function kH(e,t,n,i){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],a=gD(s,t),c=gD(o,t);return!a||!c?!1:_H(e)||(n==="spring"||C1(n))&&i}function jw(e){e.duration=0,e.type}const LH=new Set(["opacity","clipPath","filter","transform"]),OH=yb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function VH(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return OH()&&n&&LH.has(n)&&(n!=="transform"||!h)&&!u&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}const NH=40;class BH extends Pb{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",keyframes:c,name:u,motionValue:h,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=gi.now();const m={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:o,repeatType:a,name:u,motionValue:h,element:f,...p},w=f?.KeyframeResolver||Ib;this.keyframeResolver=new w(c,(S,E,T)=>this.onKeyframesResolved(S,E,m,!T),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,i,s){this.keyframeResolver=void 0;const{name:o,type:a,velocity:c,delay:u,isHandoff:h,onUpdate:f}=i;this.resolvedAt=gi.now(),kH(t,o,a,c)||((Oo.instantAnimations||!u)&&f?.(Fb(t,i,n)),t[0]=t[t.length-1],jw(i),i.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>NH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},w=!h&&VH(m)?new IH({...m,element:m.motionValue.owner.current}):new Mb(m);w.finished.then(()=>this.notifyFinished()).catch(Zi),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),SH()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const GH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function HH(e){const t=GH.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}function y1(e,t,n=1){const[i,s]=HH(e);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const a=o.trim();return HM(a)?parseFloat(a):a}return Eb(s)?y1(s,t,n+1):s}function _b(e,t){return e?.[t]??e?.default??e}const w1=new Set(["width","height","top","left","right","bottom",...hu]),zH={test:e=>e==="auto",parse:e=>e},S1=e=>t=>t.test(e),b1=[du,Be,Bs,Rr,_G,IG,zH],pD=e=>b1.find(S1(e));function UH(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||UM(e):!0}const WH=new Set(["brightness","contrast","saturate","opacity"]);function jH(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Tb)||[];if(!i)return e;const s=n.replace(i,"");let o=WH.has(t)?1:0;return i!==n&&(o*=100),t+"("+o+s+")"}const $H=/\b([a-z-]*)\(.*?\)/gu,$w={...Vr,getAnimatableNone:e=>{const t=e.match($H);return t?t.map(jH).join(" "):e}},mD={...du,transform:Math.round},qH={rotate:Rr,rotateX:Rr,rotateY:Rr,rotateZ:Rr,scale:_g,scaleX:_g,scaleY:_g,scaleZ:_g,skew:Rr,skewX:Rr,skewY:Rr,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:fh,originX:iD,originY:iD,originZ:Be},kb={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...qH,zIndex:mD,fillOpacity:fh,strokeOpacity:fh,numOctaves:mD},KH={...kb,color:fn,backgroundColor:fn,outlineColor:fn,fill:fn,stroke:fn,borderColor:fn,borderTopColor:fn,borderRightColor:fn,borderBottomColor:fn,borderLeftColor:fn,filter:$w,WebkitFilter:$w},R1=e=>KH[e];function E1(e,t){let n=R1(e);return n!==$w&&(n=Vr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const YH=new Set(["auto","none","0"]);function QH(e,t,n){let i=0,s;for(;i<e.length&&!s;){const o=e[i];typeof o=="string"&&!YH.has(o)&&gh(o).values.length&&(s=e[i]),i++}if(s&&n)for(const o of t)e[o]=E1(n,s)}class XH extends Ib{constructor(t,n,i,s,o){super(t,n,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),Eb(h))){const f=y1(h,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!w1.has(i)||t.length!==2)return;const[s,o]=t,a=pD(s),c=pD(o);if(a!==c)if(dD(a)&&dD(c))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else Ka[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||UH(t[s]))&&i.push(s);i.length&&QH(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ka[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Ka[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function ZH(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const s=n?.[e]??i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const T1=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function x1(e){return zM(e)&&"offsetHeight"in e}const CD=30,JH=e=>!isNaN(parseFloat(e));class ez{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=gi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=gi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JH(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new wb);const i=this.events[t].add(n);return t==="change"?()=>{i(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=gi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>CD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,CD);return WM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qc(e,t){return new ez(e,t)}const{schedule:Lb}=t1(queueMicrotask,!1),as={x:!1,y:!1};function D1(){return as.x||as.y}function tz(e){return e==="x"||e==="y"?as[e]?null:(as[e]=!0,()=>{as[e]=!1}):as.x||as.y?null:(as.x=as.y=!0,()=>{as.x=as.y=!1})}function A1(e,t){const n=ZH(e),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[n,s,()=>i.abort()]}function vD(e){return!(e.pointerType==="touch"||D1())}function nz(e,t,n={}){const[i,s,o]=A1(e,n),a=c=>{if(!vD(c))return;const{target:u}=c,h=t(u,c);if(typeof h!="function"||!u)return;const f=p=>{vD(p)&&(h(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,s)};return i.forEach(c=>{c.addEventListener("pointerenter",a,s)}),o}const F1=(e,t)=>t?e===t?!0:F1(e,t.parentElement):!1,Ob=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,iz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sz(e){return iz.has(e.tagName)||e.tabIndex!==-1}const ep=new WeakSet;function yD(e){return t=>{t.key==="Enter"&&e(t)}}function Ty(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const oz=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=yD(()=>{if(ep.has(n))return;Ty(n,"down");const s=yD(()=>{Ty(n,"up")}),o=()=>Ty(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function wD(e){return Ob(e)&&!D1()}function rz(e,t,n={}){const[i,s,o]=A1(e,n),a=c=>{const u=c.currentTarget;if(!wD(c))return;ep.add(u);const h=t(u,c),f=(w,S)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),ep.has(u)&&ep.delete(u),wD(w)&&typeof h=="function"&&h(w,{success:S})},p=w=>{f(w,u===window||u===document||n.useGlobalTarget||F1(u,w.target))},m=w=>{f(w,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),x1(c)&&(c.addEventListener("focus",h=>oz(h,s)),!sz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function P1(e){return zM(e)&&"ownerSVGElement"in e}function az(e){return P1(e)&&e.tagName==="svg"}const Qn=e=>!!(e&&e.getVelocity),lz=[...b1,fn,Vr],cz=e=>lz.find(S1(e)),Vb=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class uz extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=x1(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dz({children:e,isPresent:t,anchorX:n,root:i}){const s=R.useId(),o=R.useRef(null),a=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=R.useContext(Vb);return R.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:p,right:m}=a.current;if(t||!o.current||!u||!h)return;const w=n==="left"?`left: ${p}`:`right: ${m}`;o.current.dataset.motionPopId=s;const S=document.createElement("style");c&&(S.nonce=c);const E=i??document.head;return E.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{E.contains(S)&&E.removeChild(S)}},[t]),B.jsx(uz,{isPresent:t,childRef:o,sizeRef:a,children:R.cloneElement(e,{ref:o})})}const hz=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:a,anchorX:c,root:u})=>{const h=gb(fz),f=R.useId();let p=!0,m=R.useMemo(()=>(p=!1,{id:f,initial:t,isPresent:n,custom:s,onExitComplete:w=>{h.set(w,!0);for(const S of h.values())if(!S)return;i&&i()},register:w=>(h.set(w,!1),()=>h.delete(w))}),[n,h,i]);return o&&p&&(m={...m}),R.useMemo(()=>{h.forEach((w,S)=>h.set(S,!1))},[n]),R.useEffect(()=>{!n&&!h.size&&i&&i()},[n]),a==="popLayout"&&(e=B.jsx(dz,{isPresent:n,anchorX:c,root:u,children:e})),B.jsx(Fm.Provider,{value:m,children:e})};function fz(){return new Map}function M1(e=!0){const t=R.useContext(Fm);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,o=R.useId();R.useEffect(()=>{if(e)return s(o)},[e]);const a=R.useCallback(()=>e&&i&&i(o),[o,i,e]);return!n&&i?[!1,a]:[!0]}const kg=e=>e.key||"";function SD(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const Ap=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:a=!1,anchorX:c="left",root:u})=>{const[h,f]=M1(a),p=R.useMemo(()=>SD(e),[e]),m=a&&!h?[]:p.map(kg),w=R.useRef(!0),S=R.useRef(p),E=gb(()=>new Map),[T,F]=R.useState(p),[P,M]=R.useState(p);GM(()=>{w.current=!1,S.current=p;for(let j=0;j<P.length;j++){const I=kg(P[j]);m.includes(I)?E.delete(I):E.get(I)!==!0&&E.set(I,!1)}},[P,m.length,m.join("-")]);const U=[];if(p!==T){let j=[...p];for(let I=0;I<P.length;I++){const A=P[I],_=kg(A);m.includes(_)||(j.splice(I,0,A),U.push(A))}return o==="wait"&&U.length&&(j=U),M(SD(j)),F(p),null}const{forceRender:z}=R.useContext(fb);return B.jsx(B.Fragment,{children:P.map(j=>{const I=kg(j),A=a&&!h?!1:p===P||m.includes(I),_=()=>{if(E.has(I))E.set(I,!0);else return;let L=!0;E.forEach(O=>{O||(L=!1)}),L&&(z?.(),M(S.current),a&&f?.(),i&&i())};return B.jsx(hz,{isPresent:A,initial:!w.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:o,root:u,onExitComplete:A?void 0:_,anchorX:c,children:j},I)})})},I1=R.createContext({strict:!1}),bD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xc={};for(const e in bD)Xc[e]={isEnabled:t=>bD[e].some(n=>!!t[n])};function gz(e){for(const t in e)Xc[t]={...Xc[t],...e[t]}}const pz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pz.has(e)}let _1=e=>!Fp(e);function mz(e){typeof e=="function"&&(_1=t=>t.startsWith("on")?!Fp(t):e(t))}try{mz(require("@emotion/is-prop-valid").default)}catch{}function Cz(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(_1(s)||n===!0&&Fp(s)||!t&&!Fp(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}const Pm=R.createContext({});function Mm(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ph(e){return typeof e=="string"||Array.isArray(e)}const Nb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bb=["initial",...Nb];function Im(e){return Mm(e.animate)||Bb.some(t=>ph(e[t]))}function k1(e){return!!(Im(e)||e.variants)}function vz(e,t){if(Im(e)){const{initial:n,animate:i}=e;return{initial:n===!1||ph(n)?n:void 0,animate:ph(i)?i:void 0}}return e.inherit!==!1?t:{}}function yz(e){const{initial:t,animate:n}=vz(e,R.useContext(Pm));return R.useMemo(()=>({initial:t,animate:n}),[RD(t),RD(n)])}function RD(e){return Array.isArray(e)?e.join(" "):e}const mh={};function wz(e){for(const t in e)mh[t]=e[t],Rb(t)&&(mh[t].isCSSVariable=!0)}function L1(e,{layout:t,layoutId:n}){return fu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!mh[e]||e==="opacity")}const Sz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bz=hu.length;function Rz(e,t,n){let i="",s=!0;for(let o=0;o<bz;o++){const a=hu[o],c=e[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=T1(c,kb[a]);if(!u){s=!1;const f=Sz[a]||a;i+=`${f}(${h}) `}n&&(t[a]=h)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}function Gb(e,t,n){const{style:i,vars:s,transformOrigin:o}=e;let a=!1,c=!1;for(const u in t){const h=t[u];if(fu.has(u)){a=!0;continue}else if(Rb(u)){s[u]=h;continue}else{const f=T1(h,kb[u]);u.startsWith("origin")?(c=!0,o[u]=f):i[u]=f}}if(t.transform||(a||n?i.transform=Rz(t,e.transform,n):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=o;i.transformOrigin=`${u} ${h} ${f}`}}const Hb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function O1(e,t,n){for(const i in t)!Qn(t[i])&&!L1(i,n)&&(e[i]=t[i])}function Ez({transformTemplate:e},t){return R.useMemo(()=>{const n=Hb();return Gb(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Tz(e,t){const n=e.style||{},i={};return O1(i,n,e),Object.assign(i,Ez(e,t)),i}function xz(e,t){const n={},i=Tz(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const Dz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Az={offset:"strokeDashoffset",array:"strokeDasharray"};function Fz(e,t,n=1,i=0,s=!0){e.pathLength=1;const o=s?Dz:Az;e[o.offset]=Be.transform(-i);const a=Be.transform(t),c=Be.transform(n);e[o.array]=`${a} ${c}`}function V1(e,{attrX:t,attrY:n,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...c},u,h,f){if(Gb(e,c,h),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:m}=e;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),s!==void 0&&Fz(p,s,o,a,!1)}const N1=()=>({...Hb(),attrs:{}}),B1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Pz(e,t,n,i){const s=R.useMemo(()=>{const o=N1();return V1(o,t,B1(i),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};O1(o,e.style,e),s.style={...o,...s.style}}return s}const Mz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zb(e){return typeof e!="string"||e.includes("-")?!1:!!(Mz.indexOf(e)>-1||/[A-Z]/u.test(e))}function Iz(e,t,n,{latestValues:i},s,o=!1){const c=(zb(e)?Pz:xz)(t,i,s,e),u=Cz(t,typeof e=="string",o),h=e!==R.Fragment?{...u,...c,ref:n}:{},{children:f}=t,p=R.useMemo(()=>Qn(f)?f.get():f,[f]);return R.createElement(e,{...h,children:p})}function ED(e){const t=[{},{}];return e?.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Ub(e,t,n,i){if(typeof t=="function"){const[s,o]=ED(i);t=t(n!==void 0?n:e.custom,s,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,o]=ED(i);t=t(n!==void 0?n:e.custom,s,o)}return t}function tp(e){return Qn(e)?e.get():e}function _z({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,s){return{latestValues:kz(n,i,s,e),renderState:t()}}function kz(e,t,n,i){const s={},o=i(e,{});for(const m in o)s[m]=tp(o[m]);let{initial:a,animate:c}=e;const u=Im(e),h=k1(e);t&&h&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),c===void 0&&(c=t.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const p=f?c:a;if(p&&typeof p!="boolean"&&!Mm(p)){const m=Array.isArray(p)?p:[p];for(let w=0;w<m.length;w++){const S=Ub(e,m[w]);if(S){const{transitionEnd:E,transition:T,...F}=S;for(const P in F){let M=F[P];if(Array.isArray(M)){const U=f?M.length-1:0;M=M[U]}M!==null&&(s[P]=M)}for(const P in E)s[P]=E[P]}}}return s}const G1=e=>(t,n)=>{const i=R.useContext(Pm),s=R.useContext(Fm),o=()=>_z(e,t,i,s);return n?o():gb(o)};function Wb(e,t,n){const{style:i}=e,s={};for(const o in i)(Qn(i[o])||t.style&&Qn(t.style[o])||L1(o,e)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const Lz=G1({scrapeMotionValuesFromProps:Wb,createRenderState:Hb});function H1(e,t,n){const i=Wb(e,t,n);for(const s in e)if(Qn(e[s])||Qn(t[s])){const o=hu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=e[s]}return i}const Oz=G1({scrapeMotionValuesFromProps:H1,createRenderState:N1}),Vz=Symbol.for("motionComponentSymbol");function Pc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Nz(e,t,n){return R.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Pc(n)&&(n.current=i))},[t])}const jb=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Bz="framerAppearId",z1="data-"+jb(Bz),U1=R.createContext({});function Gz(e,t,n,i,s){const{visualElement:o}=R.useContext(Pm),a=R.useContext(I1),c=R.useContext(Fm),u=R.useContext(Vb).reducedMotion,h=R.useRef(null);i=i||a.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=R.useContext(U1);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Hz(h.current,n,s,p);const m=R.useRef(!1);R.useInsertionEffect(()=>{f&&m.current&&f.update(n,c)});const w=n[z1],S=R.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return GM(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),S.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!S.current&&f.animationState&&f.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),S.current=!1),f.enteringChildren=void 0)}),f}function Hz(e,t,n,i){const{layoutId:s,layout:o,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:W1(e.parent)),e.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||c&&Pc(c),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:f,layoutScroll:u,layoutRoot:h})}function W1(e){if(e)return e.options.allowProjection!==!1?e.projection:W1(e.parent)}function xy(e,{forwardMotionProps:t=!1}={},n,i){n&&gz(n);const s=zb(e)?Oz:Lz;function o(c,u){let h;const f={...R.useContext(Vb),...c,layoutId:zz(c)},{isStatic:p}=f,m=yz(c),w=s(c,p);if(!p&&pb){Uz();const S=Wz(f);h=S.MeasureLayout,m.visualElement=Gz(e,w,f,i,S.ProjectionNode)}return B.jsxs(Pm.Provider,{value:m,children:[h&&m.visualElement?B.jsx(h,{visualElement:m.visualElement,...f}):null,Iz(e,c,Nz(w,m.visualElement,u),w,p,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=R.forwardRef(o);return a[Vz]=e,a}function zz({layoutId:e}){const t=R.useContext(fb).id;return t&&e!==void 0?t+"-"+e:e}function Uz(e,t){R.useContext(I1).strict}function Wz(e){const{drag:t,layout:n}=Xc;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function jz(e,t){if(typeof Proxy>"u")return xy;const n=new Map,i=(o,a)=>xy(o,a,e,t),s=(o,a)=>i(o,a);return new Proxy(s,{get:(o,a)=>a==="create"?i:(n.has(a)||n.set(a,xy(a,void 0,e,t)),n.get(a))})}function j1({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function $z({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qz(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Dy(e){return e===void 0||e===1}function qw({scale:e,scaleX:t,scaleY:n}){return!Dy(e)||!Dy(t)||!Dy(n)}function _a(e){return qw(e)||$1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function $1(e){return TD(e.x)||TD(e.y)}function TD(e){return e&&e!=="0%"}function Pp(e,t,n){const i=e-n,s=t*i;return n+s}function xD(e,t,n,i,s){return s!==void 0&&(e=Pp(e,s,i)),Pp(e,n,i)+t}function Kw(e,t=0,n=1,i,s){e.min=xD(e.min,t,n,i,s),e.max=xD(e.max,t,n,i,s)}function q1(e,{x:t,y:n}){Kw(e.x,t.translate,t.scale,t.originPoint),Kw(e.y,n.translate,n.scale,n.originPoint)}const DD=.999999999999,AD=1.0000000000001;function Kz(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let o,a;for(let c=0;c<s;c++){o=n[c],a=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ic(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,q1(e,a)),i&&_a(o.latestValues)&&Ic(e,o.latestValues))}t.x<AD&&t.x>DD&&(t.x=1),t.y<AD&&t.y>DD&&(t.y=1)}function Mc(e,t){e.min=e.min+t,e.max=e.max+t}function FD(e,t,n,i,s=.5){const o=Wt(e.min,e.max,s);Kw(e,t,n,o,i)}function Ic(e,t){FD(e.x,t.x,t.scaleX,t.scale,t.originX),FD(e.y,t.y,t.scaleY,t.scale,t.originY)}function K1(e,t){return j1(qz(e.getBoundingClientRect(),t))}function Yz(e,t,n){const i=K1(e,n),{scroll:s}=t;return s&&(Mc(i.x,s.offset.x),Mc(i.y,s.offset.y)),i}const PD=()=>({translate:0,scale:1,origin:0,originPoint:0}),_c=()=>({x:PD(),y:PD()}),MD=()=>({min:0,max:0}),tn=()=>({x:MD(),y:MD()}),Yw={current:null},Y1={current:!1};function Qz(){if(Y1.current=!0,!!pb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Yw.current=e.matches;e.addEventListener("change",t),t()}else Yw.current=!1}const Xz=new WeakMap;function Zz(e,t,n){for(const i in t){const s=t[i],o=n[i];if(Qn(s))e.addValue(i,s);else if(Qn(o))e.addValue(i,Qc(s,{owner:e}));else if(o!==s)if(e.hasValue(i)){const a=e.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,Qc(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const ID=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jz{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ib,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=gi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Gt.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Im(n),this.isVariantNode=k1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const w=p[m];u[m]!==void 0&&Qn(w)&&w.set(u[m])}}mount(t){this.current=t,Xz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Y1.current||Qz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Or(this.notifyUpdate),Or(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=fu.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Xc){const n=Xc[t];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<ID.length;i++){const s=ID[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,a=t[o];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=Zz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Qc(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(HM(i)||UM(i))?i=parseFloat(i):!cz(i)&&Vr.test(n)&&(i=E1(t,n)),this.setBaseTarget(t,Qn(i)?i.get():i)),Qn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=Ub(this.props,n,this.presenceContext?.custom);o&&(i=o[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Qn(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new wb),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Lb.render(this.render)}}class Q1 extends Jz{constructor(){super(...arguments),this.KeyframeResolver=XH}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function X1(e,{style:t,vars:n},i,s){const o=e.style;let a;for(a in t)o[a]=t[a];s?.applyProjectionStyles(o,i);for(a in n)o.setProperty(a,n[a])}function e4(e){return window.getComputedStyle(e)}class t4 extends Q1{constructor(){super(...arguments),this.type="html",this.renderInstance=X1}readValueFromInstance(t,n){if(fu.has(n))return this.projection?.isProjecting?Gw(n):mH(t,n);{const i=e4(t),s=(Rb(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return K1(t,n)}build(t,n,i){Gb(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Wb(t,n,i)}}const Z1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function n4(e,t,n,i){X1(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(Z1.has(s)?s:jb(s),t.attrs[s])}class i4 extends Q1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(fu.has(n)){const i=R1(n);return i&&i.default||0}return n=Z1.has(n)?n:jb(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return H1(t,n,i)}build(t,n,i){V1(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,s){n4(t,n,i,s)}mount(t){this.isSVGTag=B1(t.tagName),super.mount(t)}}const s4=(e,t)=>zb(e)?new i4(t):new t4(t,{allowProjection:e!==R.Fragment});function Lc(e,t,n){const i=e.getProps();return Ub(i,t,n!==void 0?n:i.custom,e)}const Qw=e=>Array.isArray(e);function o4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Qc(n))}function r4(e){return Qw(e)?e[e.length-1]||0:e}function a4(e,t){const n=Lc(e,t);let{transitionEnd:i={},transition:s={},...o}=n||{};o={...o,...i};for(const a in o){const c=r4(o[a]);o4(e,a,c)}}function l4(e){return!!(Qn(e)&&e.add)}function Xw(e,t){const n=e.getValue("willChange");if(l4(n))return n.add(t);if(!n&&Oo.WillChange){const i=new Oo.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function J1(e){return e.props[z1]}const c4=e=>e!==null;function u4(e,{repeat:t,repeatType:n="loop"},i){const s=e.filter(c4),o=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[o]}const d4={type:"spring",stiffness:500,damping:25,restSpeed:10},h4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),f4={type:"keyframes",duration:.8},g4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},p4=(e,{keyframes:t})=>t.length>2?f4:fu.has(e)?e.startsWith("scale")?h4(t[1]):d4:g4;function m4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const $b=(e,t,n,i={},s,o)=>a=>{const c=_b(i,e)||{},u=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-Vs(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:m=>{t.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:o?void 0:s};m4(c)||Object.assign(f,p4(e,f)),f.duration&&(f.duration=Vs(f.duration)),f.repeatDelay&&(f.repeatDelay=Vs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(jw(f),f.delay===0&&(p=!0)),(Oo.instantAnimations||Oo.skipAnimations)&&(p=!0,jw(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,p&&!o&&t.get()!==void 0){const m=u4(f.keyframes,c);if(m!==void 0){Gt.update(()=>{f.onUpdate(m),f.onComplete()});return}}return c.isSync?new Mb(f):new BH(f)};function C4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function eI(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...c}=t;i&&(o=i);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const f in c){const p=e.getValue(f,e.latestValues[f]??null),m=c[f];if(m===void 0||h&&C4(h,f))continue;const w={delay:n,..._b(o||{},f)},S=p.get();if(S!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===S&&!w.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const F=J1(e);if(F){const P=window.MotionHandoffAnimation(F,f,Gt);P!==null&&(w.startTime=P,E=!0)}}Xw(e,f),p.start($b(f,p,m,e.shouldReduceMotion&&w1.has(f)?{type:!1}:w,e,E));const T=p.animation;T&&u.push(T)}return a&&Promise.all(u).then(()=>{Gt.update(()=>{a&&a4(e,a)})}),u}function tI(e,t,n,i=0,s=1){const o=Array.from(e).sort((h,f)=>h.sortNodePosition(f)).indexOf(t),a=e.size,c=(a-1)*i;return typeof n=="function"?n(o,a):s===1?o*i:c-o*i}function Zw(e,t,n={}){const i=Lc(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(eI(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return v4(e,t,u,h,f,p,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[u,h]=c==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function v4(e,t,n=0,i=0,s=0,o=1,a){const c=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),c.push(Zw(u,t,{...a,delay:n+(typeof i=="function"?0:i)+tI(e.variantChildren,u,i,s,o)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function y4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(o=>Zw(e,o,n));i=Promise.all(s)}else if(typeof t=="string")i=Zw(e,t,n);else{const s=typeof t=="function"?Lc(e,t,n.custom):t;i=Promise.all(eI(e,s,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function nI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const w4=Bb.length;function iI(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?iI(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<w4;n++){const i=Bb[n],s=e.props[i];(ph(s)||s===!1)&&(t[i]=s)}return t}const S4=[...Nb].reverse(),b4=Nb.length;function R4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>y4(e,n,i)))}function E4(e){let t=R4(e),n=_D(),i=!0;const s=u=>(h,f)=>{const p=Lc(e,f,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:w,...S}=p;h={...h,...S,...w}}return h};function o(u){t=u(e)}function a(u){const{props:h}=e,f=iI(e.parent)||{},p=[],m=new Set;let w={},S=1/0;for(let T=0;T<b4;T++){const F=S4[T],P=n[F],M=h[F]!==void 0?h[F]:f[F],U=ph(M),z=F===u?P.isActive:null;z===!1&&(S=T);let j=M===f[F]&&M!==h[F]&&U;if(j&&i&&e.manuallyAnimateOnMount&&(j=!1),P.protectedKeys={...w},!P.isActive&&z===null||!M&&!P.prevProp||Mm(M)||typeof M=="boolean")continue;const I=T4(P.prevProp,M);let A=I||F===u&&P.isActive&&!j&&U||T>S&&U,_=!1;const L=Array.isArray(M)?M:[M];let O=L.reduce(s(F),{});z===!1&&(O={});const{prevResolvedValues:G={}}=P,N={...G,...O},Re=ie=>{A=!0,m.has(ie)&&(_=!0,m.delete(ie)),P.needsAnimating[ie]=!0;const se=e.getValue(ie);se&&(se.liveStyle=!1)};for(const ie in N){const se=O[ie],we=G[ie];if(w.hasOwnProperty(ie))continue;let H=!1;Qw(se)&&Qw(we)?H=!nI(se,we):H=se!==we,H?se!=null?Re(ie):m.add(ie):se!==void 0&&m.has(ie)?Re(ie):P.protectedKeys[ie]=!0}P.prevProp=M,P.prevResolvedValues=O,P.isActive&&(w={...w,...O}),i&&e.blockInitialAnimation&&(A=!1);const pe=j&&I;A&&(!pe||_)&&p.push(...L.map(ie=>{const se={type:F};if(typeof ie=="string"&&i&&!pe&&e.manuallyAnimateOnMount&&e.parent){const{parent:we}=e,H=Lc(we,ie);if(we.enteringChildren&&H){const{delayChildren:ee}=H.transition||{};se.delay=tI(we.enteringChildren,e,ee)}}return{animation:ie,options:se}}))}if(m.size){const T={};if(typeof h.initial!="boolean"){const F=Lc(e,Array.isArray(h.initial)?h.initial[0]:h.initial);F&&F.transition&&(T.transition=F.transition)}m.forEach(F=>{const P=e.getBaseTarget(F),M=e.getValue(F);M&&(M.liveStyle=!0),T[F]=P??null}),p.push({animation:T})}let E=!!p.length;return i&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(E=!1),i=!1,E?t(p):Promise.resolve()}function c(u,h){if(n[u].isActive===h)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,h)),n[u].isActive=h;const f=a(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:a,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=_D(),i=!0}}}function T4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!nI(t,e):!1}function Ma(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _D(){return{animate:Ma(!0),whileInView:Ma(),whileHover:Ma(),whileTap:Ma(),whileDrag:Ma(),whileFocus:Ma(),exit:Ma()}}class qr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class x4 extends qr{constructor(t){super(t),t.animationState||(t.animationState=E4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Mm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let D4=0;class A4 extends qr{constructor(){super(...arguments),this.id=D4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const F4={animation:{Feature:x4},exit:{Feature:A4}};function Ch(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function qh(e){return{point:{x:e.pageX,y:e.pageY}}}const P4=e=>t=>Ob(t)&&e(t,qh(t));function Yd(e,t,n,i){return Ch(e,t,P4(n),i)}const sI=1e-4,M4=1-sI,I4=1+sI,oI=.01,_4=0-oI,k4=0+oI;function si(e){return e.max-e.min}function L4(e,t,n){return Math.abs(e-t)<=n}function kD(e,t,n,i=.5){e.origin=i,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=si(n)/si(t),e.translate=Wt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=M4&&e.scale<=I4||isNaN(e.scale))&&(e.scale=1),(e.translate>=_4&&e.translate<=k4||isNaN(e.translate))&&(e.translate=0)}function Qd(e,t,n,i){kD(e.x,t.x,n.x,i?i.originX:void 0),kD(e.y,t.y,n.y,i?i.originY:void 0)}function LD(e,t,n){e.min=n.min+t.min,e.max=e.min+si(t)}function O4(e,t,n){LD(e.x,t.x,n.x),LD(e.y,t.y,n.y)}function OD(e,t,n){e.min=t.min-n.min,e.max=e.min+si(t)}function Xd(e,t,n){OD(e.x,t.x,n.x),OD(e.y,t.y,n.y)}function Ui(e){return[e("x"),e("y")]}const rI=({current:e})=>e?e.ownerDocument.defaultView:null,VD=(e,t)=>Math.abs(e-t);function V4(e,t){const n=VD(e.x,t.x),i=VD(e.y,t.y);return Math.sqrt(n**2+i**2)}class aI{constructor(t,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Fy(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=V4(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!S)return;const{point:E}=m,{timestamp:T}=Nn;this.history.push({...E,timestamp:T});const{onStart:F,onMove:P}=this.handlers;w||(F&&F(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,m)},this.handlePointerMove=(m,w)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ay(w,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(m,w)=>{this.end();const{onEnd:S,onSessionEnd:E,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=Fy(m.type==="pointercancel"?this.lastMoveEventInfo:Ay(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(m,F),E&&E(m,F)},!Ob(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=s||window;const c=qh(t),u=Ay(c,this.transformPagePoint),{point:h}=u,{timestamp:f}=Nn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=n;p&&p(t,Fy(u,this.history)),this.removeListeners=Wh(Yd(this.contextWindow,"pointermove",this.handlePointerMove),Yd(this.contextWindow,"pointerup",this.handlePointerUp),Yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Or(this.updatePoint)}}function Ay(e,t){return t?{point:t(e.point)}:e}function ND(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fy({point:e},t){return{point:e,delta:ND(e,lI(t)),offset:ND(e,N4(t)),velocity:B4(t,.1)}}function N4(e){return e[0]}function lI(e){return e[e.length-1]}function B4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=lI(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>Vs(t)));)n--;if(!i)return{x:0,y:0};const o=Ns(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function G4(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Wt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Wt(n,e,i.max):Math.min(e,n)),e}function BD(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function H4(e,{top:t,left:n,bottom:i,right:s}){return{x:BD(e.x,n,s),y:BD(e.y,t,i)}}function GD(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function z4(e,t){return{x:GD(e.x,t.x),y:GD(e.y,t.y)}}function U4(e,t){let n=.5;const i=si(e),s=si(t);return s>i?n=hh(t.min,t.max-i,e.min):i>s&&(n=hh(e.min,e.max-s,t.min)),Lo(0,1,n)}function W4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Jw=.35;function j4(e=Jw){return e===!1?e=0:e===!0&&(e=Jw),{x:HD(e,"left","right"),y:HD(e,"top","bottom")}}function HD(e,t,n){return{min:zD(e,t),max:zD(e,n)}}function zD(e,t){return typeof e=="number"?e:e[t]||0}const $4=new WeakMap;class q4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qh(p).point)},a=(p,m)=>{const{drag:w,dragPropagation:S,onDragStart:E}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tz(w),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ui(F=>{let P=this.getAxisMotionValue(F).get()||0;if(Bs.test(P)){const{projection:M}=this.visualElement;if(M&&M.layout){const U=M.layout.layoutBox[F];U&&(P=si(U)*(parseFloat(P)/100))}}this.originPoint[F]=P}),E&&Gt.postRender(()=>E(p,m)),Xw(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:E,onDrag:T}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:F}=m;if(S&&this.currentDirection===null){this.currentDirection=K4(F),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,F),this.updateAxis("y",m.point,F),this.visualElement.render(),T&&T(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ui(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new aI(t,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:i,contextWindow:rI(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&Gt.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!Lg(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(a=G4(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Pc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=H4(i.layoutBox,t):this.constraints=!1,this.elastic=j4(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ui(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=W4(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Pc(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=Yz(i,s.root,this.visualElement.getTransformPagePoint());let a=z4(s.layout.layoutBox,o);if(n){const c=n($z(a));this.hasMutatedConstraints=!!c,c&&(a=j1(c))}return a}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Ui(f=>{if(!Lg(f,n,this.currentDirection))return;let p=u&&u[f]||{};a&&(p={min:0,max:0});const m=s?200:1e6,w=s?40:1e7,S={type:"inertia",velocity:i?t[f]:0,bounceStiffness:m,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(f,S)});return Promise.all(h).then(c)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return Xw(this.visualElement,t),i.start($b(t,i,0,n,this.visualElement,!1))}stopAnimation(){Ui(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ui(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ui(n=>{const{drag:i}=this.getProps();if(!Lg(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[n];o.set(t[n]-Wt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Pc(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ui(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();s[a]=U4({min:u,max:u},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ui(a=>{if(!Lg(a,t,null))return;const c=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];c.set(Wt(u,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;$4.set(this.visualElement,this);const t=this.visualElement.current,n=Yd(t,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();Pc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Gt.read(i);const a=Ch(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ui(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=Jw,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:c}}}function Lg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function K4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Y4 extends qr{constructor(t){super(t),this.removeGroupControls=Zi,this.removeListeners=Zi,this.controls=new q4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const UD=e=>(t,n)=>{e&&Gt.postRender(()=>e(t,n))};class Q4 extends qr{constructor(){super(...arguments),this.removePointerDownListener=Zi}onPointerDown(t){this.session=new aI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:UD(t),onStart:UD(n),onMove:i,onEnd:(o,a)=>{delete this.session,s&&Gt.postRender(()=>s(o,a))}}}mount(){this.removePointerDownListener=Yd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const np={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _d={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const n=WD(e,t.target.x),i=WD(e,t.target.y);return`${n}% ${i}%`}},X4={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=Vr.parse(e);if(s.length>5)return i;const o=Vr.createTransformer(e),a=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,u=n.y.scale*t.y;s[0+a]/=c,s[1+a]/=u;const h=Wt(c,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),o(s)}};let Py=!1;class Z4 extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=t;wz(J4),o&&(n.group&&n.group.add(o),i&&i.register&&s&&i.register(o),Py&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),np.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:o}=this.props,{projection:a}=i;return a&&(a.isPresent=o,Py=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==o?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||Gt.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Lb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;Py=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cI(e){const[t,n]=M1(),i=R.useContext(fb);return B.jsx(Z4,{...e,layoutGroup:i,switchLayoutGroup:R.useContext(U1),isPresent:t,safeToRemove:n})}const J4={borderRadius:{..._d,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_d,borderTopRightRadius:_d,borderBottomLeftRadius:_d,borderBottomRightRadius:_d,boxShadow:X4};function e3(e,t,n){const i=Qn(e)?e:Qc(e);return i.start($b("",i,t,n)),i.animation}const t3=(e,t)=>e.depth-t.depth;class n3{constructor(){this.children=[],this.isDirty=!1}add(t){mb(this.children,t),this.isDirty=!0}remove(t){Cb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(t3),this.isDirty=!1,this.children.forEach(t)}}function i3(e,t){const n=gi.now(),i=({timestamp:s})=>{const o=s-n;o>=t&&(Or(i),e(o-t))};return Gt.setup(i,!0),()=>Or(i)}const uI=["TopLeft","TopRight","BottomLeft","BottomRight"],s3=uI.length,jD=e=>typeof e=="string"?parseFloat(e):e,$D=e=>typeof e=="number"||Be.test(e);function o3(e,t,n,i,s,o){s?(e.opacity=Wt(0,n.opacity??1,r3(i)),e.opacityExit=Wt(t.opacity??1,0,a3(i))):o&&(e.opacity=Wt(t.opacity??1,n.opacity??1,i));for(let a=0;a<s3;a++){const c=`border${uI[a]}Radius`;let u=qD(t,c),h=qD(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||$D(u)===$D(h)?(e[c]=Math.max(Wt(jD(u),jD(h),i),0),(Bs.test(h)||Bs.test(u))&&(e[c]+="%")):e[c]=h}(t.rotate||n.rotate)&&(e.rotate=Wt(t.rotate||0,n.rotate||0,i))}function qD(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const r3=dI(0,.5,XM),a3=dI(.5,.95,Zi);function dI(e,t,n){return i=>i<e?0:i>t?1:n(hh(e,t,i))}function KD(e,t){e.min=t.min,e.max=t.max}function zi(e,t){KD(e.x,t.x),KD(e.y,t.y)}function YD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function QD(e,t,n,i,s){return e-=t,e=Pp(e,1/n,i),s!==void 0&&(e=Pp(e,1/s,i)),e}function l3(e,t=0,n=1,i=.5,s,o=e,a=e){if(Bs.test(t)&&(t=parseFloat(t),t=Wt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let c=Wt(o.min,o.max,i);e===o&&(c-=t),e.min=QD(e.min,t,n,c,s),e.max=QD(e.max,t,n,c,s)}function XD(e,t,[n,i,s],o,a){l3(e,t[n],t[i],t[s],t.scale,o,a)}const c3=["x","scaleX","originX"],u3=["y","scaleY","originY"];function ZD(e,t,n,i){XD(e.x,t,c3,n?n.x:void 0,i?i.x:void 0),XD(e.y,t,u3,n?n.y:void 0,i?i.y:void 0)}function JD(e){return e.translate===0&&e.scale===1}function hI(e){return JD(e.x)&&JD(e.y)}function eA(e,t){return e.min===t.min&&e.max===t.max}function d3(e,t){return eA(e.x,t.x)&&eA(e.y,t.y)}function tA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function fI(e,t){return tA(e.x,t.x)&&tA(e.y,t.y)}function nA(e){return si(e.x)/si(e.y)}function iA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class h3{constructor(){this.members=[]}add(t){mb(this.members,t),t.scheduleRender()}remove(t){if(Cb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f3(e,t,n){let i="";const s=e.x.translate/t.x,o=e.y.translate/t.y,a=n?.z||0;if((s||o||a)&&(i=`translate3d(${s}px, ${o}px, ${a}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:m,skewX:w,skewY:S}=n;h&&(i=`perspective(${h}px) ${i}`),f&&(i+=`rotate(${f}deg) `),p&&(i+=`rotateX(${p}deg) `),m&&(i+=`rotateY(${m}deg) `),w&&(i+=`skewX(${w}deg) `),S&&(i+=`skewY(${S}deg) `)}const c=e.x.scale*t.x,u=e.y.scale*t.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const My=["","X","Y","Z"],g3=1e3;let p3=0;function Iy(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function gI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=J1(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(s||o))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&gI(i)}function pI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},c=t?.()){this.id=p3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(v3),this.nodes.forEach(b3),this.nodes.forEach(R3),this.nodes.forEach(y3)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new n3)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new wb),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=P1(a)&&!az(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),e){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;Gt.read(()=>{p=window.innerWidth}),e(a,()=>{const w=window.innerWidth;w!==p&&(p=w,this.root.updateBlockedByResize=!0,f&&f(),f=i3(m,250),np.hasAnimatedSinceResize&&(np.hasAnimatedSinceResize=!1,this.nodes.forEach(rA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||A3,{onLayoutAnimationStart:E,onLayoutAnimationComplete:T}=h.getProps(),F=!this.targetLayout||!fI(this.targetLayout,w),P=!p&&m;if(this.options.layoutRoot||this.resumeFrom||P||p&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={..._b(S,"layout"),onPlay:E,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(f,P)}else p||rA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Or(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E3),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(oA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(S3),this.nodes.forEach(m3),this.nodes.forEach(C3)):this.nodes.forEach(oA),this.clearAllSnapshots();const c=gi.now();Nn.delta=Lo(0,1e3/60,c-Nn.timestamp),Nn.timestamp=c,Nn.isProcessing=!0,wy.update.process(Nn),wy.preRender.process(Nn),wy.render.process(Nn),Nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(w3),this.sharedNodes.forEach(T3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!si(this.snapshot.measuredBox.x)&&!si(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!hI(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||_a(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),F3(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return tn();const c=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(P3))){const{scroll:h}=this.root;h&&(Mc(c.x,h.offset.x),Mc(c.y,h.offset.y))}return c}removeElementScroll(a){const c=tn();if(zi(c,a),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&zi(c,a),Mc(c.x,f.offset.x),Mc(c.y,f.offset.y))}return c}applyTransform(a,c=!1){const u=tn();zi(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ic(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),_a(f.latestValues)&&Ic(u,f.latestValues)}return _a(this.latestValues)&&Ic(u,this.latestValues),u}removeTransform(a){const c=tn();zi(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!_a(h.latestValues))continue;qw(h.latestValues)&&h.updateSnapshot();const f=tn(),p=h.measurePageBox();zi(f,p),ZD(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return _a(this.latestValues)&&ZD(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Nn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Xd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),O4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zi(this.target,this.layout.layoutBox),q1(this.target,this.targetDelta)):zi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Xd(this.relativeTargetOrigin,this.target,m.target),zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qw(this.parent.latestValues)||$1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Nn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;zi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;Kz(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=tn());const{target:w}=a;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YD(this.prevProjectionDelta.x,this.projectionDelta.x),YD(this.prevProjectionDelta.y,this.projectionDelta.y)),Qd(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!iA(this.projectionDelta.x,this.prevProjectionDelta.x)||!iA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_c(),this.projectionDelta=_c(),this.projectionDeltaWithTransform=_c()}setAnimationOrigin(a,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=_c();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=tn(),w=u?u.source:void 0,S=this.layout?this.layout.source:void 0,E=w!==S,T=this.getStack(),F=!T||T.members.length<=1,P=!!(E&&!F&&this.options.crossfade===!0&&!this.path.some(D3));this.animationProgress=0;let M;this.mixTargetDelta=U=>{const z=U/1e3;aA(p.x,a.x,z),aA(p.y,a.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x3(this.relativeTarget,this.relativeTargetOrigin,m,z),M&&d3(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=tn()),zi(M,this.relativeTarget)),E&&(this.animationValues=f,o3(f,h,this.latestValues,z,P,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Or(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{np.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Qc(0)),this.currentAnimation=e3(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(g3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=a;if(!(!c||!u||!h)){if(this!==a&&this.layout&&h&&mI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||tn();const p=si(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+p;const m=si(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+m}zi(c,u),Ic(c,f),Qd(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new h3),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Iy("z",a,h,this.animationValues);for(let f=0;f<My.length;f++)Iy(`rotate${My[f]}`,a,h,this.animationValues),Iy(`skew${My[f]}`,a,h,this.animationValues);a.render();for(const f in h)a.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);a.scheduleRender()}applyProjectionStyles(a,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=tp(c?.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=tp(c?.pointerEvents)||""),this.hasProjected&&!_a(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=f3(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),a.transform=p;const{x:m,y:w}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${w.origin*100}% 0`,h.animationValues?a.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:a.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in mh){if(f[S]===void 0)continue;const{correct:E,applyTo:T,isCSSVariable:F}=mh[S],P=p==="none"?f[S]:E(f[S],h);if(T){const M=T.length;for(let U=0;U<M;U++)a[T[U]]=P}else F?this.options.visualElement.renderState.vars[S]=P:a[S]=P}this.options.layoutId&&(a.pointerEvents=h===this?tp(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(sA),this.root.sharedNodes.clear()}}}function m3(e){e.updateLayout()}function C3(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:s}=e.options,o=t.source!==e.layout.source;s==="size"?Ui(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=si(p);p.min=n[f].min,p.max=p.min+m}):mI(s,t.layoutBox,n)&&Ui(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=si(n[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=_c();Qd(a,n,t.layoutBox);const c=_c();o?Qd(c,e.applyTransform(i,!0),t.measuredBox):Qd(c,n,t.layoutBox);const u=!hI(a);let h=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const w=tn();Xd(w,t.layoutBox,p.layoutBox);const S=tn();Xd(S,n,m.layoutBox),fI(w,S)||(h=!0),f.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=w,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function v3(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function y3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function w3(e){e.clearSnapshot()}function sA(e){e.clearMeasurements()}function oA(e){e.isLayoutDirty=!1}function S3(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function b3(e){e.resolveTargetDelta()}function R3(e){e.calcProjection()}function E3(e){e.resetSkewAndRotation()}function T3(e){e.removeLeadSnapshot()}function aA(e,t,n){e.translate=Wt(t.translate,0,n),e.scale=Wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function lA(e,t,n,i){e.min=Wt(t.min,n.min,i),e.max=Wt(t.max,n.max,i)}function x3(e,t,n,i){lA(e.x,t.x,n.x,i),lA(e.y,t.y,n.y,i)}function D3(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const A3={duration:.45,ease:[.4,0,.1,1]},cA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),uA=cA("applewebkit/")&&!cA("chrome/")?Math.round:Zi;function dA(e){e.min=uA(e.min),e.max=uA(e.max)}function F3(e){dA(e.x),dA(e.y)}function mI(e,t,n){return e==="position"||e==="preserve-aspect"&&!L4(nA(t),nA(n),.2)}function P3(e){return e!==e.root&&e.scroll?.wasRoot}const M3=pI({attachResizeListener:(e,t)=>Ch(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_y={current:void 0},CI=pI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_y.current){const e=new M3({});e.mount(window),e.setOptions({layoutScroll:!0}),_y.current=e}return _y.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),I3={pan:{Feature:Q4},drag:{Feature:Y4,ProjectionNode:CI,MeasureLayout:cI}};function hA(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=i[s];o&&Gt.postRender(()=>o(t,qh(t)))}class _3 extends qr{mount(){const{current:t}=this.node;t&&(this.unmount=nz(t,(n,i)=>(hA(this.node,i,"Start"),s=>hA(this.node,s,"End"))))}unmount(){}}class k3 extends qr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wh(Ch(this.node.current,"focus",()=>this.onFocus()),Ch(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fA(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=i[s];o&&Gt.postRender(()=>o(t,qh(t)))}class L3 extends qr{mount(){const{current:t}=this.node;t&&(this.unmount=rz(t,(n,i)=>(fA(this.node,i,"Start"),(s,{success:o})=>fA(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const eS=new WeakMap,ky=new WeakMap,O3=e=>{const t=eS.get(e.target);t&&t(e)},V3=e=>{e.forEach(O3)};function N3({root:e,...t}){const n=e||document;ky.has(n)||ky.set(n,{});const i=ky.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(V3,{root:e,...t})),i[s]}function B3(e,t,n){const i=N3(t);return eS.set(e,n),i.observe(e),()=>{eS.delete(e),i.unobserve(e)}}const G3={some:0,all:1};class H3 extends qr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:o}=t,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:G3[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=h?f:p;m&&m(u)};return B3(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(z3(t,n))&&this.startObserver()}unmount(){}}function z3({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const U3={inView:{Feature:H3},tap:{Feature:L3},focus:{Feature:k3},hover:{Feature:_3}},W3={layout:{ProjectionNode:CI,MeasureLayout:cI}},j3={...F4,...U3,...I3,...W3},Ls=jz(j3,s4),gA=e=>{let t;const n=new Set,i=(h,f)=>{const p=typeof h=="function"?h(t):h;if(!Object.is(p,t)){const m=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(w=>w(t,m))}},s=()=>t,c={setState:i,getState:s,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=t=e(i,s,c);return c},$3=e=>e?gA(e):gA,q3=e=>e;function K3(e,t=q3){const n=ae.useSyncExternalStore(e.subscribe,ae.useCallback(()=>t(e.getState()),[e,t]),ae.useCallback(()=>t(e.getInitialState()),[e,t]));return ae.useDebugValue(n),n}const Y3=e=>{const t=$3(e),n=i=>K3(t,i);return Object.assign(n,t),n},Q3=e=>Y3,pl=Q3()(e=>({currentDeportista:"",deportistas:[],setCurrentDeportista:t=>e({currentDeportista:t}),setDeportistas:t=>e({deportistas:t}),showModal:!1,setShowModal:t=>e({showModal:t}),editMode:!1,setEditMode:t=>e({editMode:t}),showConfirmDelete:!1,setShowConfirmDelete:t=>e({showConfirmDelete:t}),academia:"",setAcademia:t=>e({academia:t}),isLoggedIn:!1,setIsLoggedIn:t=>e({isLoggedIn:t})})),vI=()=>{const{currentDeportista:e,deportistas:t,setDeportistas:n,setCurrentDeportista:i,academia:s,setAcademia:o}=pl();return{deportistas:t,currentDeportista:e,addDeportista:u=>{n([...t,u])},setCurrentDeportista:i,editDeportista:u=>{n(t.map(h=>h.id==u.id?u:h))},academia:s,setAcademia:o}},yc=(e,t)=>{for(const n of t)if(e<=n)return{value:n,isTop:!1};return{value:t[t.length-1],isTop:!0}},X3=e=>e<=5?"PRINCIPIANTE":e<=12?"INTERMEDIO":"AVANZADO",Z3=(e,t,n)=>{if(e<=11)return yc(t,[28,30,32,34,36,38,40,42,44]);if(e<=13)return yc(t,[46,48,50,52,54,56,58,60,62]);if(e<=15)return yc(t,[48,50,52,54,56,58,60,63,66]);if(e<=17)return yc(t,[52,54,56,58,60,63,66,69,71]);if(n==="M")return yc(t,[51,54,57,60,63,67,71,75,80]);if(n==="F")return yc(t,[48,50,52,54,57,60,63,66,70])},J3=async(e,t,n,i)=>{const s=X3(n),o=Z3(e,t,i);let a="";return o?.isTop?a=`MÁS DE ${o?.value} KG`:a=`HASTA ${o?.value} KG`,{seniority:s,category:a}},eU=()=>{const[e,t]=R.useState(""),[n,i]=R.useState("");return{seniority:e,category:n,rank:async(o,a,c,u)=>{const{seniority:h,category:f}=await J3(o,a,c,u);t(h),i(f)}}},tU=()=>{};var pA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},nU=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[n++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=e[n++],a=e[n++],c=e[n++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return t.join("")},wI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const o=e[s],a=s+1<e.length,c=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,f=o>>2,p=(o&3)<<4|c>>4;let m=(c&15)<<2|h>>6,w=h&63;u||(w=64,a||(m=64)),i.push(n[f],n[p],n[m],n[w])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yI(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):nU(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const o=n[e.charAt(s++)],c=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,o==null||c==null||h==null||p==null)throw new iU;const m=o<<2|c>>4;if(i.push(m),h!==64){const w=c<<4&240|h>>2;if(i.push(w),p!==64){const S=h<<6&192|p;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class iU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sU=function(e){const t=yI(e);return wI.encodeByteArray(t,!0)},Mp=function(e){return sU(e).replace(/\./g,"")},oU=function(e){try{return wI.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=()=>rU().__FIREBASE_DEFAULTS__,lU=()=>{if(typeof process>"u"||typeof pA>"u")return;const e=pA.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},cU=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&oU(e[1]);return t&&JSON.parse(t)},qb=()=>{try{return tU()||aU()||lU()||cU()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},uU=e=>qb()?.emulatorHosts?.[e],dU=e=>{const t=uU(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},SI=()=>qb()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fU(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Mp(JSON.stringify(n)),Mp(JSON.stringify(a)),""].join(".")}const Zd={};function pU(){const e={prod:[],emulator:[]};for(const t of Object.keys(Zd))Zd[t]?e.emulator.push(t):e.prod.push(t);return e}function mU(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let mA=!1;function CU(e,t){if(typeof window>"u"||typeof document>"u"||!Kb(window.location.host)||Zd[e]===t||Zd[e]||mA)return;Zd[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=pU().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{mA=!0,a()},m}function f(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=mU(i),w=n("text"),S=document.getElementById(w)||document.createElement("span"),E=n("learnmore"),T=document.getElementById(E)||document.createElement("a"),F=n("preprendIcon"),P=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const M=m.element;c(M),f(T,E);const U=h();u(P,F),M.append(P,S,T,U),document.body.appendChild(M)}o?(S.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yU(){const e=qb()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wU(){return!yU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SU(){try{return typeof indexedDB=="object"}catch{return!1}}function bU(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="FirebaseError";class gu extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=RU,Object.setPrototypeOf(this,gu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bI.prototype.create)}}class bI{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,o=this.errors[t],a=o?EU(o,i):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new gu(s,c,i)}}function EU(e,t){return e.replace(TU,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const TU=/\{\$([^}]+)}/g;function Ip(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const o=e[s],a=t[s];if(CA(o)&&CA(a)){if(!Ip(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function CA(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(e){return e&&e._delegate?e._delegate:e}let vh=class{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new hU;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(AU(t))try{this.getOrInitializeService({instanceIdentifier:ka})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=ka){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ka){return this.instances.has(t)}getOptions(t=ka){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DU(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ka){return this.component?this.component.multipleInstances?t:ka:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DU(e){return e===ka?void 0:e}function AU(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new xU(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(lt||(lt={}));const PU={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},MU=lt.INFO,IU={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},_U=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=IU[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class RI{constructor(t){this.name=t,this._logLevel=MU,this._logHandler=_U,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PU[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...t),this._logHandler(this,lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...t),this._logHandler(this,lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...t),this._logHandler(this,lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...t),this._logHandler(this,lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...t),this._logHandler(this,lt.ERROR,...t)}}const kU=(e,t)=>t.some(n=>e instanceof n);let vA,yA;function LU(){return vA||(vA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OU(){return yA||(yA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EI=new WeakMap,tS=new WeakMap,TI=new WeakMap,Ly=new WeakMap,Yb=new WeakMap;function VU(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(Pr(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&EI.set(n,e)}).catch(()=>{}),Yb.set(t,e),t}function NU(e){if(tS.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});tS.set(e,t)}let nS={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return tS.get(e);if(t==="objectStoreNames")return e.objectStoreNames||TI.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function BU(e){nS=e(nS)}function GU(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Oy(this),t,...n);return TI.set(i,t.sort?t.sort():[t]),Pr(i)}:OU().includes(e)?function(...t){return e.apply(Oy(this),t),Pr(EI.get(this))}:function(...t){return Pr(e.apply(Oy(this),t))}}function HU(e){return typeof e=="function"?GU(e):(e instanceof IDBTransaction&&NU(e),kU(e,LU())?new Proxy(e,nS):e)}function Pr(e){if(e instanceof IDBRequest)return VU(e);if(Ly.has(e))return Ly.get(e);const t=HU(e);return t!==e&&(Ly.set(e,t),Yb.set(t,e)),t}const Oy=e=>Yb.get(e);function zU(e,t,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(e,t),c=Pr(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Pr(a.result),u.oldVersion,u.newVersion,Pr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const UU=["get","getKey","getAll","getAllKeys","count"],WU=["put","add","delete","clear"],Vy=new Map;function wA(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Vy.get(t))return Vy.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=WU.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||UU.includes(n)))return;const o=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Vy.set(t,o),o}BU(e=>({...e,get:(t,n,i)=>wA(t,n)||e.get(t,n,i),has:(t,n)=>!!wA(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($U(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function $U(e){return e.getComponent()?.type==="VERSION"}const iS="@firebase/app",SA="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new RI("@firebase/app"),qU="@firebase/app-compat",KU="@firebase/analytics-compat",YU="@firebase/analytics",QU="@firebase/app-check-compat",XU="@firebase/app-check",ZU="@firebase/auth",JU="@firebase/auth-compat",e5="@firebase/database",t5="@firebase/data-connect",n5="@firebase/database-compat",i5="@firebase/functions",s5="@firebase/functions-compat",o5="@firebase/installations",r5="@firebase/installations-compat",a5="@firebase/messaging",l5="@firebase/messaging-compat",c5="@firebase/performance",u5="@firebase/performance-compat",d5="@firebase/remote-config",h5="@firebase/remote-config-compat",f5="@firebase/storage",g5="@firebase/storage-compat",p5="@firebase/firestore",m5="@firebase/ai",C5="@firebase/firestore-compat",v5="firebase",y5="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="[DEFAULT]",w5={[iS]:"fire-core",[qU]:"fire-core-compat",[YU]:"fire-analytics",[KU]:"fire-analytics-compat",[XU]:"fire-app-check",[QU]:"fire-app-check-compat",[ZU]:"fire-auth",[JU]:"fire-auth-compat",[e5]:"fire-rtdb",[t5]:"fire-data-connect",[n5]:"fire-rtdb-compat",[i5]:"fire-fn",[s5]:"fire-fn-compat",[o5]:"fire-iid",[r5]:"fire-iid-compat",[a5]:"fire-fcm",[l5]:"fire-fcm-compat",[c5]:"fire-perf",[u5]:"fire-perf-compat",[d5]:"fire-rc",[h5]:"fire-rc-compat",[f5]:"fire-gcs",[g5]:"fire-gcs-compat",[p5]:"fire-fst",[C5]:"fire-fst-compat",[m5]:"fire-vertex","fire-js":"fire-js",[v5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Map,S5=new Map,oS=new Map;function bA(e,t){try{e.container.addComponent(t)}catch(n){No.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function kp(e){const t=e.name;if(oS.has(t))return No.debug(`There were multiple attempts to register component ${t}.`),!1;oS.set(t,e);for(const n of _p.values())bA(n,e);for(const n of S5.values())bA(n,e);return!0}function b5(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function R5(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new bI("app","Firebase",E5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=y5;function xI(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:sS,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Mr.create("bad-app-name",{appName:String(s)});if(n||(n=SI()),!n)throw Mr.create("no-options");const o=_p.get(s);if(o){if(Ip(n,o.options)&&Ip(i,o.config))return o;throw Mr.create("duplicate-app",{appName:s})}const a=new FU(s);for(const u of oS.values())a.addComponent(u);const c=new T5(n,i,a);return _p.set(s,c),c}function D5(e=sS){const t=_p.get(e);if(!t&&e===sS&&SI())return xI();if(!t)throw Mr.create("no-app",{appName:e});return t}function Oc(e,t,n){let i=w5[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),No.warn(a.join(" "));return}kp(new vh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="firebase-heartbeat-database",F5=1,yh="firebase-heartbeat-store";let Ny=null;function DI(){return Ny||(Ny=zU(A5,F5,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(yh)}catch(n){console.warn(n)}}}}).catch(e=>{throw Mr.create("idb-open",{originalErrorMessage:e.message})})),Ny}async function P5(e){try{const n=(await DI()).transaction(yh),i=await n.objectStore(yh).get(AI(e));return await n.done,i}catch(t){if(t instanceof gu)No.warn(t.message);else{const n=Mr.create("idb-get",{originalErrorMessage:t?.message});No.warn(n.message)}}}async function RA(e,t){try{const i=(await DI()).transaction(yh,"readwrite");await i.objectStore(yh).put(t,AI(e)),await i.done}catch(n){if(n instanceof gu)No.warn(n.message);else{const i=Mr.create("idb-set",{originalErrorMessage:n?.message});No.warn(i.message)}}}function AI(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=1024,I5=30;class _5{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L5(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=EA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>I5){const s=O5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){No.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=EA(),{heartbeatsToSend:n,unsentEntries:i}=k5(this._heartbeatsCache.heartbeats),s=Mp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return No.warn(t),""}}}function EA(){return new Date().toISOString().substring(0,10)}function k5(e,t=M5){const n=[];let i=e.slice();for(const s of e){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),TA(n)>t){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),TA(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class L5{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SU()?bU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return RA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return RA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function TA(e){return Mp(JSON.stringify({version:2,heartbeats:e})).length}function O5(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(e){kp(new vh("platform-logger",t=>new jU(t),"PRIVATE")),kp(new vh("heartbeat",t=>new _5(t),"PRIVATE")),Oc(iS,SA,e),Oc(iS,SA,"esm2020"),Oc("fire-js","")}V5("");var N5="firebase",B5="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oc(N5,B5,"app");var xA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,FI;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,A){function _(){}_.prototype=A.prototype,I.D=A.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(L,O,G){for(var N=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)N[Re-2]=arguments[Re];return A.prototype[O].apply(L,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,_){_||(_=0);var L=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)L[O]=A.charCodeAt(_++)|A.charCodeAt(_++)<<8|A.charCodeAt(_++)<<16|A.charCodeAt(_++)<<24;else for(O=0;16>O;++O)L[O]=A[_++]|A[_++]<<8|A[_++]<<16|A[_++]<<24;A=I.g[0],_=I.g[1],O=I.g[2];var G=I.g[3],N=A+(G^_&(O^G))+L[0]+3614090360&4294967295;A=_+(N<<7&4294967295|N>>>25),N=G+(O^A&(_^O))+L[1]+3905402710&4294967295,G=A+(N<<12&4294967295|N>>>20),N=O+(_^G&(A^_))+L[2]+606105819&4294967295,O=G+(N<<17&4294967295|N>>>15),N=_+(A^O&(G^A))+L[3]+3250441966&4294967295,_=O+(N<<22&4294967295|N>>>10),N=A+(G^_&(O^G))+L[4]+4118548399&4294967295,A=_+(N<<7&4294967295|N>>>25),N=G+(O^A&(_^O))+L[5]+1200080426&4294967295,G=A+(N<<12&4294967295|N>>>20),N=O+(_^G&(A^_))+L[6]+2821735955&4294967295,O=G+(N<<17&4294967295|N>>>15),N=_+(A^O&(G^A))+L[7]+4249261313&4294967295,_=O+(N<<22&4294967295|N>>>10),N=A+(G^_&(O^G))+L[8]+1770035416&4294967295,A=_+(N<<7&4294967295|N>>>25),N=G+(O^A&(_^O))+L[9]+2336552879&4294967295,G=A+(N<<12&4294967295|N>>>20),N=O+(_^G&(A^_))+L[10]+4294925233&4294967295,O=G+(N<<17&4294967295|N>>>15),N=_+(A^O&(G^A))+L[11]+2304563134&4294967295,_=O+(N<<22&4294967295|N>>>10),N=A+(G^_&(O^G))+L[12]+1804603682&4294967295,A=_+(N<<7&4294967295|N>>>25),N=G+(O^A&(_^O))+L[13]+4254626195&4294967295,G=A+(N<<12&4294967295|N>>>20),N=O+(_^G&(A^_))+L[14]+2792965006&4294967295,O=G+(N<<17&4294967295|N>>>15),N=_+(A^O&(G^A))+L[15]+1236535329&4294967295,_=O+(N<<22&4294967295|N>>>10),N=A+(O^G&(_^O))+L[1]+4129170786&4294967295,A=_+(N<<5&4294967295|N>>>27),N=G+(_^O&(A^_))+L[6]+3225465664&4294967295,G=A+(N<<9&4294967295|N>>>23),N=O+(A^_&(G^A))+L[11]+643717713&4294967295,O=G+(N<<14&4294967295|N>>>18),N=_+(G^A&(O^G))+L[0]+3921069994&4294967295,_=O+(N<<20&4294967295|N>>>12),N=A+(O^G&(_^O))+L[5]+3593408605&4294967295,A=_+(N<<5&4294967295|N>>>27),N=G+(_^O&(A^_))+L[10]+38016083&4294967295,G=A+(N<<9&4294967295|N>>>23),N=O+(A^_&(G^A))+L[15]+3634488961&4294967295,O=G+(N<<14&4294967295|N>>>18),N=_+(G^A&(O^G))+L[4]+3889429448&4294967295,_=O+(N<<20&4294967295|N>>>12),N=A+(O^G&(_^O))+L[9]+568446438&4294967295,A=_+(N<<5&4294967295|N>>>27),N=G+(_^O&(A^_))+L[14]+3275163606&4294967295,G=A+(N<<9&4294967295|N>>>23),N=O+(A^_&(G^A))+L[3]+4107603335&4294967295,O=G+(N<<14&4294967295|N>>>18),N=_+(G^A&(O^G))+L[8]+1163531501&4294967295,_=O+(N<<20&4294967295|N>>>12),N=A+(O^G&(_^O))+L[13]+2850285829&4294967295,A=_+(N<<5&4294967295|N>>>27),N=G+(_^O&(A^_))+L[2]+4243563512&4294967295,G=A+(N<<9&4294967295|N>>>23),N=O+(A^_&(G^A))+L[7]+1735328473&4294967295,O=G+(N<<14&4294967295|N>>>18),N=_+(G^A&(O^G))+L[12]+2368359562&4294967295,_=O+(N<<20&4294967295|N>>>12),N=A+(_^O^G)+L[5]+4294588738&4294967295,A=_+(N<<4&4294967295|N>>>28),N=G+(A^_^O)+L[8]+2272392833&4294967295,G=A+(N<<11&4294967295|N>>>21),N=O+(G^A^_)+L[11]+1839030562&4294967295,O=G+(N<<16&4294967295|N>>>16),N=_+(O^G^A)+L[14]+4259657740&4294967295,_=O+(N<<23&4294967295|N>>>9),N=A+(_^O^G)+L[1]+2763975236&4294967295,A=_+(N<<4&4294967295|N>>>28),N=G+(A^_^O)+L[4]+1272893353&4294967295,G=A+(N<<11&4294967295|N>>>21),N=O+(G^A^_)+L[7]+4139469664&4294967295,O=G+(N<<16&4294967295|N>>>16),N=_+(O^G^A)+L[10]+3200236656&4294967295,_=O+(N<<23&4294967295|N>>>9),N=A+(_^O^G)+L[13]+681279174&4294967295,A=_+(N<<4&4294967295|N>>>28),N=G+(A^_^O)+L[0]+3936430074&4294967295,G=A+(N<<11&4294967295|N>>>21),N=O+(G^A^_)+L[3]+3572445317&4294967295,O=G+(N<<16&4294967295|N>>>16),N=_+(O^G^A)+L[6]+76029189&4294967295,_=O+(N<<23&4294967295|N>>>9),N=A+(_^O^G)+L[9]+3654602809&4294967295,A=_+(N<<4&4294967295|N>>>28),N=G+(A^_^O)+L[12]+3873151461&4294967295,G=A+(N<<11&4294967295|N>>>21),N=O+(G^A^_)+L[15]+530742520&4294967295,O=G+(N<<16&4294967295|N>>>16),N=_+(O^G^A)+L[2]+3299628645&4294967295,_=O+(N<<23&4294967295|N>>>9),N=A+(O^(_|~G))+L[0]+4096336452&4294967295,A=_+(N<<6&4294967295|N>>>26),N=G+(_^(A|~O))+L[7]+1126891415&4294967295,G=A+(N<<10&4294967295|N>>>22),N=O+(A^(G|~_))+L[14]+2878612391&4294967295,O=G+(N<<15&4294967295|N>>>17),N=_+(G^(O|~A))+L[5]+4237533241&4294967295,_=O+(N<<21&4294967295|N>>>11),N=A+(O^(_|~G))+L[12]+1700485571&4294967295,A=_+(N<<6&4294967295|N>>>26),N=G+(_^(A|~O))+L[3]+2399980690&4294967295,G=A+(N<<10&4294967295|N>>>22),N=O+(A^(G|~_))+L[10]+4293915773&4294967295,O=G+(N<<15&4294967295|N>>>17),N=_+(G^(O|~A))+L[1]+2240044497&4294967295,_=O+(N<<21&4294967295|N>>>11),N=A+(O^(_|~G))+L[8]+1873313359&4294967295,A=_+(N<<6&4294967295|N>>>26),N=G+(_^(A|~O))+L[15]+4264355552&4294967295,G=A+(N<<10&4294967295|N>>>22),N=O+(A^(G|~_))+L[6]+2734768916&4294967295,O=G+(N<<15&4294967295|N>>>17),N=_+(G^(O|~A))+L[13]+1309151649&4294967295,_=O+(N<<21&4294967295|N>>>11),N=A+(O^(_|~G))+L[4]+4149444226&4294967295,A=_+(N<<6&4294967295|N>>>26),N=G+(_^(A|~O))+L[11]+3174756917&4294967295,G=A+(N<<10&4294967295|N>>>22),N=O+(A^(G|~_))+L[2]+718787259&4294967295,O=G+(N<<15&4294967295|N>>>17),N=_+(G^(O|~A))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+G&4294967295}i.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var _=A-this.blockSize,L=this.B,O=this.h,G=0;G<A;){if(O==0)for(;G<=_;)s(this,I,G),G+=this.blockSize;if(typeof I=="string"){for(;G<A;)if(L[O++]=I.charCodeAt(G++),O==this.blockSize){s(this,L),O=0;break}}else for(;G<A;)if(L[O++]=I[G++],O==this.blockSize){s(this,L),O=0;break}}this.h=O,this.o+=A},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var _=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=_&255,_/=256;for(this.u(I),I=Array(16),A=_=0;4>A;++A)for(var L=0;32>L;L+=8)I[_++]=this.g[A]>>>L&255;return I};function o(I,A){var _=c;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=A(I)}function a(I,A){this.h=A;for(var _=[],L=!0,O=I.length-1;0<=O;O--){var G=I[O]|0;L&&G==A||(_[O]=G,L=!1)}this.g=_}var c={};function u(I){return-128<=I&&128>I?o(I,function(A){return new a([A|0],0>A?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return T(h(-I));for(var A=[],_=1,L=0;I>=_;L++)A[L]=I/_|0,_*=4294967296;return new a(A,0)}function f(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return T(f(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(A,8)),L=p,O=0;O<I.length;O+=8){var G=Math.min(8,I.length-O),N=parseInt(I.substring(O,O+G),A);8>G?(G=h(Math.pow(A,G)),L=L.j(G).add(h(N))):(L=L.j(_),L=L.add(h(N)))}return L}var p=u(0),m=u(1),w=u(16777216);e=a.prototype,e.m=function(){if(E(this))return-T(this).m();for(var I=0,A=1,_=0;_<this.g.length;_++){var L=this.i(_);I+=(0<=L?L:4294967296+L)*A,A*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(E(this))return"-"+T(this).toString(I);for(var A=h(Math.pow(I,6)),_=this,L="";;){var O=U(_,A).g;_=F(_,O.j(A));var G=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=O,S(_))return G+L;for(;6>G.length;)G="0"+G;L=G+L}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function E(I){return I.h==-1}e.l=function(I){return I=F(this,I),E(I)?-1:S(I)?0:1};function T(I){for(var A=I.g.length,_=[],L=0;L<A;L++)_[L]=~I.g[L];return new a(_,~I.h).add(m)}e.abs=function(){return E(this)?T(this):this},e.add=function(I){for(var A=Math.max(this.g.length,I.g.length),_=[],L=0,O=0;O<=A;O++){var G=L+(this.i(O)&65535)+(I.i(O)&65535),N=(G>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);L=N>>>16,G&=65535,N&=65535,_[O]=N<<16|G}return new a(_,_[_.length-1]&-2147483648?-1:0)};function F(I,A){return I.add(T(A))}e.j=function(I){if(S(this)||S(I))return p;if(E(this))return E(I)?T(this).j(T(I)):T(T(this).j(I));if(E(I))return T(this.j(T(I)));if(0>this.l(w)&&0>I.l(w))return h(this.m()*I.m());for(var A=this.g.length+I.g.length,_=[],L=0;L<2*A;L++)_[L]=0;for(L=0;L<this.g.length;L++)for(var O=0;O<I.g.length;O++){var G=this.i(L)>>>16,N=this.i(L)&65535,Re=I.i(O)>>>16,pe=I.i(O)&65535;_[2*L+2*O]+=N*pe,P(_,2*L+2*O),_[2*L+2*O+1]+=G*pe,P(_,2*L+2*O+1),_[2*L+2*O+1]+=N*Re,P(_,2*L+2*O+1),_[2*L+2*O+2]+=G*Re,P(_,2*L+2*O+2)}for(L=0;L<A;L++)_[L]=_[2*L+1]<<16|_[2*L];for(L=A;L<2*A;L++)_[L]=0;return new a(_,0)};function P(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function M(I,A){this.g=I,this.h=A}function U(I,A){if(S(A))throw Error("division by zero");if(S(I))return new M(p,p);if(E(I))return A=U(T(I),A),new M(T(A.g),T(A.h));if(E(A))return A=U(I,T(A)),new M(T(A.g),A.h);if(30<I.g.length){if(E(I)||E(A))throw Error("slowDivide_ only works with positive integers.");for(var _=m,L=A;0>=L.l(I);)_=z(_),L=z(L);var O=j(_,1),G=j(L,1);for(L=j(L,2),_=j(_,2);!S(L);){var N=G.add(L);0>=N.l(I)&&(O=O.add(_),G=N),L=j(L,1),_=j(_,1)}return A=F(I,O.j(A)),new M(O,A)}for(O=p;0<=I.l(A);){for(_=Math.max(1,Math.floor(I.m()/A.m())),L=Math.ceil(Math.log(_)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),G=h(_),N=G.j(A);E(N)||0<N.l(I);)_-=L,G=h(_),N=G.j(A);S(G)&&(G=m),O=O.add(G),I=F(I,N)}return new M(O,I)}e.A=function(I){return U(this,I).h},e.and=function(I){for(var A=Math.max(this.g.length,I.g.length),_=[],L=0;L<A;L++)_[L]=this.i(L)&I.i(L);return new a(_,this.h&I.h)},e.or=function(I){for(var A=Math.max(this.g.length,I.g.length),_=[],L=0;L<A;L++)_[L]=this.i(L)|I.i(L);return new a(_,this.h|I.h)},e.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),_=[],L=0;L<A;L++)_[L]=this.i(L)^I.i(L);return new a(_,this.h^I.h)};function z(I){for(var A=I.g.length+1,_=[],L=0;L<A;L++)_[L]=I.i(L)<<1|I.i(L-1)>>>31;return new a(_,I.h)}function j(I,A){var _=A>>5;A%=32;for(var L=I.g.length-_,O=[],G=0;G<L;G++)O[G]=0<A?I.i(G+_)>>>A|I.i(G+_+1)<<32-A:I.i(G+_);return new a(O,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,FI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Ir=a}).apply(typeof xA<"u"?xA:typeof self<"u"?self:typeof window<"u"?window:{});var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PI,Gd,MI,ip,rS,II,_I,kI;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,b,x){return C==Array.prototype||C==Object.prototype||(C[b]=x.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof Og=="object"&&Og];for(var b=0;b<C.length;++b){var x=C[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function s(C,b){if(b)e:{var x=i;C=C.split(".");for(var V=0;V<C.length-1;V++){var Y=C[V];if(!(Y in x))break e;x=x[Y]}C=C[C.length-1],V=x[C],b=b(V),b!=V&&b!=null&&t(x,C,{configurable:!0,writable:!0,value:b})}}function o(C,b){C instanceof String&&(C+="");var x=0,V=!1,Y={next:function(){if(!V&&x<C.length){var re=x++;return{value:b(re,C[re]),done:!1}}return V=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(C){return C||function(){return o(this,function(b,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(C){var b=typeof C;return b=b!="object"?b:C?Array.isArray(C)?"array":b:"null",b=="array"||b=="object"&&typeof C.length=="number"}function h(C){var b=typeof C;return b=="object"&&C!=null||b=="function"}function f(C,b,x){return C.call.apply(C.bind,arguments)}function p(C,b,x){if(!C)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,V),C.apply(b,Y)}}return function(){return C.apply(b,arguments)}}function m(C,b,x){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function w(C,b){var x=Array.prototype.slice.call(arguments,1);return function(){var V=x.slice();return V.push.apply(V,arguments),C.apply(this,V)}}function S(C,b){function x(){}x.prototype=b.prototype,C.aa=b.prototype,C.prototype=new x,C.prototype.constructor=C,C.Qb=function(V,Y,re){for(var ve=Array(arguments.length-2),st=2;st<arguments.length;st++)ve[st-2]=arguments[st];return b.prototype[Y].apply(V,ve)}}function E(C){const b=C.length;if(0<b){const x=Array(b);for(let V=0;V<b;V++)x[V]=C[V];return x}return[]}function T(C,b){for(let x=1;x<arguments.length;x++){const V=arguments[x];if(u(V)){const Y=C.length||0,re=V.length||0;C.length=Y+re;for(let ve=0;ve<re;ve++)C[Y+ve]=V[ve]}else C.push(V)}}class F{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function P(C){return/^[\s\xa0]*$/.test(C)}function M(){var C=c.navigator;return C&&(C=C.userAgent)?C:""}function U(C){return U[" "](C),C}U[" "]=function(){};var z=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function j(C,b,x){for(const V in C)b.call(x,C[V],V,C)}function I(C,b){for(const x in C)b.call(void 0,C[x],x,C)}function A(C){const b={};for(const x in C)b[x]=C[x];return b}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(C,b){let x,V;for(let Y=1;Y<arguments.length;Y++){V=arguments[Y];for(x in V)C[x]=V[x];for(let re=0;re<_.length;re++)x=_[re],Object.prototype.hasOwnProperty.call(V,x)&&(C[x]=V[x])}}function O(C){var b=1;C=C.split(":");const x=[];for(;0<b&&C.length;)x.push(C.shift()),b--;return C.length&&x.push(C.join(":")),x}function G(C){c.setTimeout(()=>{throw C},0)}function N(){var C=we;let b=null;return C.g&&(b=C.g,C.g=C.g.next,C.g||(C.h=null),b.next=null),b}class Re{constructor(){this.h=this.g=null}add(b,x){const V=pe.get();V.set(b,x),this.h?this.h.next=V:this.g=V,this.h=V}}var pe=new F(()=>new K,C=>C.reset());class K{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,se=!1,we=new Re,H=()=>{const C=c.Promise.resolve(void 0);ie=()=>{C.then(ee)}};var ee=()=>{for(var C;C=N();){try{C.h.call(C.g)}catch(x){G(x)}var b=pe;b.j(C),100>b.h&&(b.h++,C.next=b.g,b.g=C)}se=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(C,b){this.type=C,this.g=this.target=b,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var C=!1,b=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const x=()=>{};c.addEventListener("test",x,b),c.removeEventListener("test",x,b)}catch{}return C}();function Ee(C,b){if(ne.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var x=this.type=C.type,V=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=b,b=C.relatedTarget){if(z){e:{try{U(b.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(b=null)}}else x=="mouseover"?b=C.fromElement:x=="mouseout"&&(b=C.toElement);this.relatedTarget=b,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:xe[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&Ee.aa.h.call(this)}}S(Ee,ne);var xe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),et=0;function We(C,b,x,V,Y){this.listener=C,this.proxy=null,this.src=b,this.type=x,this.capture=!!V,this.ha=Y,this.key=++et,this.da=this.fa=!1}function Ht(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function gt(C){this.src=C,this.g={},this.h=0}gt.prototype.add=function(C,b,x,V,Y){var re=C.toString();C=this.g[re],C||(C=this.g[re]=[],this.h++);var ve=Xt(C,b,V,Y);return-1<ve?(b=C[ve],x||(b.fa=!1)):(b=new We(b,this.src,re,!!V,Y),b.fa=x,C.push(b)),b};function _t(C,b){var x=b.type;if(x in C.g){var V=C.g[x],Y=Array.prototype.indexOf.call(V,b,void 0),re;(re=0<=Y)&&Array.prototype.splice.call(V,Y,1),re&&(Ht(b),C.g[x].length==0&&(delete C.g[x],C.h--))}}function Xt(C,b,x,V){for(var Y=0;Y<C.length;++Y){var re=C[Y];if(!re.da&&re.listener==b&&re.capture==!!x&&re.ha==V)return Y}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),Me={};function ut(C,b,x,V,Y){if(Array.isArray(b)){for(var re=0;re<b.length;re++)ut(C,b[re],x,V,Y);return null}return x=Zs(x),C&&C[ct]?C.K(b,x,h(V)?!!V.capture:!1,Y):ht(C,b,x,!1,V,Y)}function ht(C,b,x,V,Y,re){if(!b)throw Error("Invalid event type");var ve=h(Y)?!!Y.capture:!!Y,st=Rn(C);if(st||(C[Ae]=st=new gt(C)),x=st.add(b,x,V,ve,re),x.proxy)return x;if(V=je(),x.proxy=V,V.src=C,V.listener=x,C.addEventListener)me||(Y=ve),Y===void 0&&(Y=!1),C.addEventListener(b.toString(),V,Y);else if(C.attachEvent)C.attachEvent(Pt(b.toString()),V);else if(C.addListener&&C.removeListener)C.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return x}function je(){function C(x){return b.call(C.src,C.listener,x)}const b=qt;return C}function Rt(C,b,x,V,Y){if(Array.isArray(b))for(var re=0;re<b.length;re++)Rt(C,b[re],x,V,Y);else V=h(V)?!!V.capture:!!V,x=Zs(x),C&&C[ct]?(C=C.i,b=String(b).toString(),b in C.g&&(re=C.g[b],x=Xt(re,x,V,Y),-1<x&&(Ht(re[x]),Array.prototype.splice.call(re,x,1),re.length==0&&(delete C.g[b],C.h--)))):C&&(C=Rn(C))&&(b=C.g[b.toString()],C=-1,b&&(C=Xt(b,x,V,Y)),(x=-1<C?b[C]:null)&&kt(x))}function kt(C){if(typeof C!="number"&&C&&!C.da){var b=C.src;if(b&&b[ct])_t(b.i,C);else{var x=C.type,V=C.proxy;b.removeEventListener?b.removeEventListener(x,V,C.capture):b.detachEvent?b.detachEvent(Pt(x),V):b.addListener&&b.removeListener&&b.removeListener(V),(x=Rn(b))?(_t(x,C),x.h==0&&(x.src=null,b[Ae]=null)):Ht(C)}}}function Pt(C){return C in Me?Me[C]:Me[C]="on"+C}function qt(C,b){if(C.da)C=!0;else{b=new Ee(b,this);var x=C.listener,V=C.ha||C.src;C.fa&&kt(C),C=x.call(V,b)}return C}function Rn(C){return C=C[Ae],C instanceof gt?C:null}var ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zs(C){return typeof C=="function"?C:(C[ri]||(C[ri]=function(b){return C.handleEvent(b)}),C[ri])}function Ie(){le.call(this),this.i=new gt(this),this.M=this,this.F=null}S(Ie,le),Ie.prototype[ct]=!0,Ie.prototype.removeEventListener=function(C,b,x,V){Rt(this,C,b,x,V)};function Ke(C,b){var x,V=C.F;if(V)for(x=[];V;V=V.F)x.push(V);if(C=C.M,V=b.type||b,typeof b=="string")b=new ne(b,C);else if(b instanceof ne)b.target=b.target||C;else{var Y=b;b=new ne(V,C),L(b,Y)}if(Y=!0,x)for(var re=x.length-1;0<=re;re--){var ve=b.g=x[re];Y=qe(ve,V,!0,b)&&Y}if(ve=b.g=C,Y=qe(ve,V,!0,b)&&Y,Y=qe(ve,V,!1,b)&&Y,x)for(re=0;re<x.length;re++)ve=b.g=x[re],Y=qe(ve,V,!1,b)&&Y}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var C=this.i,b;for(b in C.g){for(var x=C.g[b],V=0;V<x.length;V++)Ht(x[V]);delete C.g[b],C.h--}}this.F=null},Ie.prototype.K=function(C,b,x,V){return this.i.add(String(C),b,!1,x,V)},Ie.prototype.L=function(C,b,x,V){return this.i.add(String(C),b,!0,x,V)};function qe(C,b,x,V){if(b=C.i.g[String(b)],!b)return!0;b=b.concat();for(var Y=!0,re=0;re<b.length;++re){var ve=b[re];if(ve&&!ve.da&&ve.capture==x){var st=ve.listener,vn=ve.ha||ve.src;ve.fa&&_t(C.i,ve),Y=st.call(vn,V)!==!1&&Y}}return Y&&!V.defaultPrevented}function pt(C,b,x){if(typeof C=="function")x&&(C=m(C,x));else if(C&&typeof C.handleEvent=="function")C=m(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:c.setTimeout(C,b||0)}function Tl(C){C.g=pt(()=>{C.g=null,C.i&&(C.i=!1,Tl(C))},C.l);const b=C.h;C.h=null,C.m.apply(null,b)}class aC extends le{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Tl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(C){le.call(this),this.h=C,this.g={}}S(Zr,le);var Jr=[];function ea(C){j(C.g,function(b,x){this.g.hasOwnProperty(x)&&kt(b)},C),C.g={}}Zr.prototype.N=function(){Zr.aa.N.call(this),ea(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=c.JSON.stringify,xl=c.JSON.parse,ta=class{stringify(C){return c.JSON.stringify(C,void 0)}parse(C){return c.JSON.parse(C,void 0)}};function xu(){}xu.prototype.h=null;function Du(C){return C.h||(C.h=C.i())}function Au(){}var Js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eo(){ne.call(this,"d")}S(eo,ne);function Fu(){ne.call(this,"c")}S(Fu,ne);var fs={},Pu=null;function $o(){return Pu=Pu||new Ie}fs.La="serverreachability";function Dl(C){ne.call(this,fs.La,C)}S(Dl,ne);function qo(C){const b=$o();Ke(b,new Dl(b))}fs.STAT_EVENT="statevent";function cf(C,b){ne.call(this,fs.STAT_EVENT,C),this.stat=b}S(cf,ne);function Nt(C){const b=$o();Ke(b,new cf(b,C))}fs.Ma="timingevent";function Cn(C,b){ne.call(this,fs.Ma,C),this.size=b}S(Cn,ne);function ln(C,b){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){C()},b)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function Mu(C,b,x,V,Y,re){C.info(function(){if(C.g)if(re)for(var ve="",st=re.split("&"),vn=0;vn<st.length;vn++){var ot=st[vn].split("=");if(1<ot.length){var Tn=ot[0];ot=ot[1];var yn=Tn.split("_");ve=2<=yn.length&&yn[1]=="type"?ve+(Tn+"="+ot+"&"):ve+(Tn+"=redacted&")}}else ve=null;else ve=re;return"XMLHTTP REQ ("+V+") [attempt "+Y+"]: "+b+`
`+x+`
`+ve})}function lC(C,b,x,V,Y,re,ve){C.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Y+"]: "+b+`
`+x+`
`+re+" "+ve})}function Ko(C,b,x,V){C.info(function(){return"XMLHTTP TEXT ("+b+"): "+na(C,x)+(V?" "+V:"")})}function uf(C,b){C.info(function(){return"TIMEOUT: "+b})}Pi.prototype.info=function(){};function na(C,b){if(!C.g)return b;if(!b)return null;try{var x=JSON.parse(b);if(x){for(C=0;C<x.length;C++)if(Array.isArray(x[C])){var V=x[C];if(!(2>V.length)){var Y=V[1];if(Array.isArray(Y)&&!(1>Y.length)){var re=Y[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ve=1;ve<Y.length;ve++)Y[ve]=""}}}}return ts(x)}catch{return b}}var Yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},to={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gs;function ps(){}S(ps,xu),ps.prototype.g=function(){return new XMLHttpRequest},ps.prototype.i=function(){return{}},gs=new ps;function Zn(C,b,x,V){this.j=C,this.i=b,this.l=x,this.R=V||1,this.U=new Zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zt}function Zt(){this.i=null,this.g="",this.h=!1}var Iu={},Al={};function ns(C,b,x){C.L=1,C.v=aa(mi(b)),C.m=x,C.P=!0,no(C,null)}function no(C,b){C.F=Date.now(),ia(C),C.A=mi(C.v);var x=C.A,V=C.R;Array.isArray(V)||(V=[String(V)]),Nu(x.i,"t",V),C.C=0,x=C.j.J,C.h=new Zt,C.g=xf(C.j,x?b:null,!C.m),0<C.O&&(C.M=new aC(m(C.Y,C,C.g),C.O)),b=C.U,x=C.g,V=C.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Jr[0]=Y.toString()),Y=Jr);for(var re=0;re<Y.length;re++){var ve=ut(x,Y[re],V||b.handleEvent,!1,b.h||b);if(!ve)break;b.g[ve.key]=ve}b=C.H?A(C.H):{},C.m?(C.u||(C.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,b)):(C.u="GET",C.g.ea(C.A,C.u,null,b)),qo(),Mu(C.i,C.u,C.A,C.l,C.R,C.m)}Zn.prototype.ca=function(C){C=C.target;const b=this.M;b&&ki(C)==3?b.j():this.Y(C)},Zn.prototype.Y=function(C){try{if(C==this.g)e:{const yn=ki(this.g);var b=this.g.Ba();const uo=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||vf(this.g)))){this.J||yn!=4||b==7||(b==8||0>=uo?qo(3):qo(2)),Qo(this);var x=this.g.Z();this.X=x;t:if(df(this)){var V=vf(this.g);C="";var Y=V.length,re=ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),ms(this);var ve="";break t}this.h.i=new c.TextDecoder}for(b=0;b<Y;b++)this.h.h=!0,C+=this.h.i.decode(V[b],{stream:!(re&&b==Y-1)});V.length=0,this.h.g+=C,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=x==200,lC(this.i,this.u,this.A,this.l,this.R,yn,x),this.o){if(this.T&&!this.K){t:{if(this.g){var st,vn=this.g;if((st=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(st)){var ot=st;break t}}ot=null}if(x=ot)Ko(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sa(this,x);else{this.o=!1,this.s=3,Nt(12),In(this),ms(this);break e}}if(this.P){x=!0;let _n;for(;!this.J&&this.C<ve.length;)if(_n=hf(this,ve),_n==Al){yn==4&&(this.s=4,Nt(14),x=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Iu){this.s=4,Nt(15),Ko(this.i,this.l,ve,"[Invalid Chunk]"),x=!1;break}else Ko(this.i,this.l,_n,null),sa(this,_n);if(df(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||ve.length!=0||this.h.h||(this.s=1,Nt(16),x=!1),this.o=this.o&&x,!x)Ko(this.i,this.l,ve,"[Invalid Chunked Response]"),In(this),ms(this);else if(0<ve.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),pa(Tn),Tn.M=!0,Nt(11))}}else Ko(this.i,this.l,ve,null),sa(this,ve);yn==4&&In(this),this.o&&!this.J&&(yn==4?Rf(this.j,this):(this.o=!1,ia(this)))}else fC(this.g),x==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),In(this),ms(this)}}}catch{}finally{}};function df(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function hf(C,b){var x=C.C,V=b.indexOf(`
`,x);return V==-1?Al:(x=Number(b.substring(x,V)),isNaN(x)?Iu:(V+=1,V+x>b.length?Al:(b=b.slice(V,V+x),C.C=V+x,b)))}Zn.prototype.cancel=function(){this.J=!0,In(this)};function ia(C){C.S=Date.now()+C.I,ff(C,C.I)}function ff(C,b){if(C.B!=null)throw Error("WatchDog timer not null");C.B=ln(m(C.ba,C),b)}function Qo(C){C.B&&(c.clearTimeout(C.B),C.B=null)}Zn.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(uf(this.i,this.A),this.L!=2&&(qo(),Nt(17)),In(this),this.s=2,ms(this)):ff(this,this.S-C)};function ms(C){C.j.G==0||C.J||Rf(C.j,C)}function In(C){Qo(C);var b=C.M;b&&typeof b.ma=="function"&&b.ma(),C.M=null,ea(C.U),C.g&&(b=C.g,C.g=null,b.abort(),b.ma())}function sa(C,b){try{var x=C.j;if(x.G!=0&&(x.g==C||_u(x.h,C))){if(!C.K&&_u(x.h,C)&&x.G==3){try{var V=x.Da.g.parse(b)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Y=V;if(Y[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<C.F)Gl(x),Nl(x);else break e;Uu(x),Nt(18)}}else x.za=Y[1],0<x.za-x.T&&37500>Y[2]&&x.F&&x.v==0&&!x.C&&(x.C=ln(m(x.Za,x),6e3));if(1>=Pl(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else co(x,11)}else if((C.K||x.g==C)&&Gl(x),!P(b))for(Y=x.Da.g.parse(b),b=0;b<Y.length;b++){let ot=Y[b];if(x.T=ot[0],ot=ot[1],x.G==2)if(ot[0]=="c"){x.K=ot[1],x.ia=ot[2];const Tn=ot[3];Tn!=null&&(x.la=Tn,x.j.info("VER="+x.la));const yn=ot[4];yn!=null&&(x.Aa=yn,x.j.info("SVER="+x.Aa));const uo=ot[5];uo!=null&&typeof uo=="number"&&0<uo&&(V=1.5*uo,x.L=V,x.j.info("backChannelRequestTimeoutMs_="+V)),V=x;const _n=C.g;if(_n){const Rs=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var re=V.h;re.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ml(re,re.h),re.h=null))}if(V.D){const ju=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;ju&&(V.ya=ju,Et(V.I,V.D,ju))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-C.F,x.j.info("Handshake RTT: "+x.R+"ms")),V=x;var ve=C;if(V.qa=Tf(V,V.J?V.ia:null,V.W),ve.K){Jn(V.h,ve);var st=ve,vn=V.L;vn&&(st.I=vn),st.B&&(Qo(st),ia(st)),V.g=ve}else Sf(V);0<x.i.length&&Bl(x)}else ot[0]!="stop"&&ot[0]!="close"||co(x,7);else x.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?co(x,7):Hu(x):ot[0]!="noop"&&x.l&&x.l.ta(ot),x.v=0)}}qo(4)}catch{}}var gf=class{constructor(C,b){this.g=C,this.map=b}};function io(C){this.l=C||10,c.PerformanceNavigationTiming?(C=c.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fl(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Pl(C){return C.h?1:C.g?C.g.size:0}function _u(C,b){return C.h?C.h==b:C.g?C.g.has(b):!1}function Ml(C,b){C.g?C.g.add(b):C.h=b}function Jn(C,b){C.h&&C.h==b?C.h=null:C.g&&C.g.has(b)&&C.g.delete(b)}io.prototype.cancel=function(){if(this.i=ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function ku(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let b=C.i;for(const x of C.g.values())b=b.concat(x.D);return b}return E(C.i)}function cC(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(u(C)){for(var b=[],x=C.length,V=0;V<x;V++)b.push(C[V]);return b}b=[],x=0;for(V in C)b[x++]=C[V];return b}function Il(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(u(C)||typeof C=="string"){var b=[];C=C.length;for(var x=0;x<C;x++)b.push(x);return b}b=[],x=0;for(const V in C)b[x++]=V;return b}}}function Lu(C,b){if(C.forEach&&typeof C.forEach=="function")C.forEach(b,void 0);else if(u(C)||typeof C=="string")Array.prototype.forEach.call(C,b,void 0);else for(var x=Il(C),V=cC(C),Y=V.length,re=0;re<Y;re++)b.call(void 0,V[re],x&&x[re],C)}var oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uC(C,b){if(C){C=C.split("&");for(var x=0;x<C.length;x++){var V=C[x].indexOf("="),Y=null;if(0<=V){var re=C[x].substring(0,V);Y=C[x].substring(V+1)}else re=C[x];b(re,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function cn(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof cn){this.h=C.h,ra(this,C.j),this.o=C.o,this.g=C.g,Xo(this,C.s),this.l=C.l;var b=C.i,x=new oo;x.i=b.i,b.g&&(x.g=new Map(b.g),x.h=b.h),so(this,x),this.m=C.m}else C&&(b=String(C).match(oa))?(this.h=!1,ra(this,b[1]||"",!0),this.o=Mi(b[2]||""),this.g=Mi(b[3]||"",!0),Xo(this,b[4]),this.l=Mi(b[5]||"",!0),so(this,b[6]||"",!0),this.m=Mi(b[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}cn.prototype.toString=function(){var C=[],b=this.j;b&&C.push(la(b,Ou,!0),":");var x=this.g;return(x||b=="file")&&(C.push("//"),(b=this.o)&&C.push(la(b,Ou,!0),"@"),C.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&C.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&C.push("/"),C.push(la(x,x.charAt(0)=="/"?dC:Vu,!0))),(x=this.i.toString())&&C.push("?",x),(x=this.m)&&C.push("#",la(x,_l)),C.join("")};function mi(C){return new cn(C)}function ra(C,b,x){C.j=x?Mi(b,!0):b,C.j&&(C.j=C.j.replace(/:$/,""))}function Xo(C,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);C.s=b}else C.s=null}function so(C,b,x){b instanceof oo?(C.i=b,mf(C.i,C.h)):(x||(b=la(b,hC)),C.i=new oo(b,C.h))}function Et(C,b,x){C.i.set(b,x)}function aa(C){return Et(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Mi(C,b){return C?b?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function la(C,b,x){return typeof C=="string"?(C=encodeURI(C).replace(b,pf),x&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function pf(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Ou=/[#\/\?@]/g,Vu=/[#\?:]/g,dC=/[#\?]/g,hC=/[#\?@]/g,_l=/#/g;function oo(C,b){this.h=this.g=null,this.i=C||null,this.j=!!b}function Ii(C){C.g||(C.g=new Map,C.h=0,C.i&&uC(C.i,function(b,x){C.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}e=oo.prototype,e.add=function(C,b){Ii(this),this.i=null,C=Cs(this,C);var x=this.g.get(C);return x||this.g.set(C,x=[]),x.push(b),this.h+=1,this};function ro(C,b){Ii(C),b=Cs(C,b),C.g.has(b)&&(C.i=null,C.h-=C.g.get(b).length,C.g.delete(b))}function ao(C,b){return Ii(C),b=Cs(C,b),C.g.has(b)}e.forEach=function(C,b){Ii(this),this.g.forEach(function(x,V){x.forEach(function(Y){C.call(b,Y,V,this)},this)},this)},e.na=function(){Ii(this);const C=Array.from(this.g.values()),b=Array.from(this.g.keys()),x=[];for(let V=0;V<b.length;V++){const Y=C[V];for(let re=0;re<Y.length;re++)x.push(b[V])}return x},e.V=function(C){Ii(this);let b=[];if(typeof C=="string")ao(this,C)&&(b=b.concat(this.g.get(Cs(this,C))));else{C=Array.from(this.g.values());for(let x=0;x<C.length;x++)b=b.concat(C[x])}return b},e.set=function(C,b){return Ii(this),this.i=null,C=Cs(this,C),ao(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[b]),this.h+=1,this},e.get=function(C,b){return C?(C=this.V(C),0<C.length?String(C[0]):b):b};function Nu(C,b,x){ro(C,b),0<x.length&&(C.i=null,C.g.set(Cs(C,b),E(x)),C.h+=x.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],b=Array.from(this.g.keys());for(var x=0;x<b.length;x++){var V=b[x];const re=encodeURIComponent(String(V)),ve=this.V(V);for(V=0;V<ve.length;V++){var Y=re;ve[V]!==""&&(Y+="="+encodeURIComponent(String(ve[V]))),C.push(Y)}}return this.i=C.join("&")};function Cs(C,b){return b=String(b),C.j&&(b=b.toLowerCase()),b}function mf(C,b){b&&!C.j&&(Ii(C),C.i=null,C.g.forEach(function(x,V){var Y=V.toLowerCase();V!=Y&&(ro(this,V),Nu(this,Y,x))},C)),C.j=b}function ca(C,b){const x=new Pi;if(c.Image){const V=new Image;V.onload=w(_i,x,"TestLoadImage: loaded",!0,b,V),V.onerror=w(_i,x,"TestLoadImage: error",!1,b,V),V.onabort=w(_i,x,"TestLoadImage: abort",!1,b,V),V.ontimeout=w(_i,x,"TestLoadImage: timeout",!1,b,V),c.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=C}else b(!1)}function is(C,b){const x=new Pi,V=new AbortController,Y=setTimeout(()=>{V.abort(),_i(x,"TestPingServer: timeout",!1,b)},1e4);fetch(C,{signal:V.signal}).then(re=>{clearTimeout(Y),re.ok?_i(x,"TestPingServer: ok",!0,b):_i(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Y),_i(x,"TestPingServer: error",!1,b)})}function _i(C,b,x,V,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),V(x)}catch{}}function ua(){this.g=new ta}function vs(C,b,x){const V=x||"";try{Lu(C,function(Y,re){let ve=Y;h(Y)&&(ve=ts(Y)),b.push(V+re+"="+encodeURIComponent(ve))})}catch(Y){throw b.push(V+"type="+encodeURIComponent("_badmap")),Y}}function Zo(C){this.l=C.Ub||null,this.j=C.eb||!1}S(Zo,xu),Zo.prototype.g=function(){return new lo(this.l,this.j)},Zo.prototype.i=function(C){return function(){return C}}({});function lo(C,b){Ie.call(this),this.D=C,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(lo,Ie),e=lo.prototype,e.open=function(C,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=b,this.readyState=1,ws(this)},e.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(b.body=C),(this.D||c).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},e.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}e.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var b=C.value?C.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!C.done}))&&(this.response=this.responseText+=b)}C.done?ys(this):ws(this),this.readyState==3&&Bu(this)}},e.Ra=function(C){this.g&&(this.response=this.responseText=C,ys(this))},e.Qa=function(C){this.g&&(this.response=C,ys(this))},e.ga=function(){this.g&&ys(this)};function ys(C){C.readyState=4,C.l=null,C.j=null,C.v=null,ws(C)}e.setRequestHeader=function(C,b){this.u.append(C,b)},e.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,C.push(x[0]+": "+x[1]),x=b.next();return C.join(`\r
`)};function ws(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Gu(C){let b="";return j(C,function(x,V){b+=V,b+=":",b+=x,b+=`\r
`}),b}function En(C,b,x){e:{for(V in x){var V=!1;break e}V=!0}V||(x=Gu(x),typeof C=="string"?x!=null&&encodeURIComponent(String(x)):Et(C,b,x))}function mt(C){Ie.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(mt,Ie);var kl=/^https?$/i,da=["POST","PUT"];e=mt.prototype,e.Ha=function(C){this.J=C},e.ea=function(C,b,x,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);b=b?b.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gs.g(),this.v=this.o?Du(this.o):Du(gs),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(b,String(C),!0),this.B=!1}catch(re){Cf(this,re);return}if(C=x||"",x=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Y in V)x.set(Y,V[Y]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const re of V.keys())x.set(re,V.get(re));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(x.keys()).find(re=>re.toLowerCase()=="content-type"),Y=c.FormData&&C instanceof c.FormData,!(0<=Array.prototype.indexOf.call(da,b,void 0))||V||Y||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ve]of x)this.g.setRequestHeader(re,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ha(this),this.u=!0,this.g.send(C),this.u=!1}catch(re){Cf(this,re)}};function Cf(C,b){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=b,C.m=5,Ll(C),Ss(C)}function Ll(C){C.A||(C.A=!0,Ke(C,"complete"),Ke(C,"error"))}e.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ke(this,"complete"),Ke(this,"abort"),Ss(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ol(this):this.bb())},e.bb=function(){Ol(this)};function Ol(C){if(C.h&&typeof a<"u"&&(!C.v[1]||ki(C)!=4||C.Z()!=2)){if(C.u&&ki(C)==4)pt(C.Ea,0,C);else if(Ke(C,"readystatechange"),ki(C)==4){C.h=!1;try{const ve=C.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var V;if(V=ve===0){var Y=String(C.D).match(oa)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),V=!kl.test(Y?Y.toLowerCase():"")}x=V}if(x)Ke(C,"complete"),Ke(C,"success");else{C.m=6;try{var re=2<ki(C)?C.g.statusText:""}catch{re=""}C.l=re+" ["+C.Z()+"]",Ll(C)}}finally{Ss(C)}}}}function Ss(C,b){if(C.g){ha(C);const x=C.g,V=C.v[0]?()=>{}:null;C.g=null,C.v=null,b||Ke(C,"ready");try{x.onreadystatechange=V}catch{}}}function ha(C){C.I&&(c.clearTimeout(C.I),C.I=null)}e.isActive=function(){return!!this.g};function ki(C){return C.g?C.g.readyState:0}e.Z=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(C){if(this.g){var b=this.g.responseText;return C&&b.indexOf(C)==0&&(b=b.substring(C.length)),xl(b)}};function vf(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function fC(C){const b={};C=(C.g&&2<=ki(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<C.length;V++){if(P(C[V]))continue;var x=O(C[V]);const Y=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const re=b[Y]||[];b[Y]=re,re.push(x)}I(b,function(V){return V.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(C,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[C]||b}function Vl(C){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fa("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fa("baseRetryDelayMs",5e3,C),this.cb=fa("retryDelaySeedMs",1e4,C),this.Wa=fa("forwardChannelMaxRetries",2,C),this.wa=fa("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new io(C&&C.concurrentRequestLimit),this.Da=new ua,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Vl.prototype,e.la=8,e.G=1,e.connect=function(C,b,x,V){Nt(0),this.W=C,this.H=b||{},x&&V!==void 0&&(this.H.OSID=x,this.H.OAID=V),this.F=this.X,this.I=Tf(this,null,this.W),Bl(this)};function Hu(C){if(yf(C),C.G==3){var b=C.U++,x=mi(C.I);if(Et(x,"SID",C.K),Et(x,"RID",b),Et(x,"TYPE","terminate"),ga(C,x),b=new Zn(C,C.j,b),b.L=2,b.v=aa(mi(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(b.v.toString(),"")}catch{}!x&&c.Image&&(new Image().src=b.v,x=!0),x||(b.g=xf(b.j,null),b.g.ea(b.v)),b.F=Date.now(),ia(b)}Ef(C)}function Nl(C){C.g&&(pa(C),C.g.cancel(),C.g=null)}function yf(C){Nl(C),C.u&&(c.clearTimeout(C.u),C.u=null),Gl(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&c.clearTimeout(C.s),C.s=null)}function Bl(C){if(!Fl(C.h)&&!C.s){C.s=!0;var b=C.Ga;ie||H(),se||(ie(),se=!0),we.add(b,C),C.B=0}}function gC(C,b){return Pl(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=b.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=ln(m(C.Ga,C,b),Wu(C,C.B)),C.B++,!0)}e.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Y=new Zn(this,this.j,C);let re=this.o;if(this.S&&(re?(re=A(re),L(re,this.S)):re=this.S),this.m!==null||this.O||(Y.H=re,re=null),this.P)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var V=this.i[x];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(b+=V,4096<b){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=wf(this,Y,b),x=mi(this.I),Et(x,"RID",C),Et(x,"CVER",22),this.D&&Et(x,"X-HTTP-Session-Id",this.D),ga(this,x),re&&(this.O?b="headers="+encodeURIComponent(String(Gu(re)))+"&"+b:this.m&&En(x,this.m,re)),Ml(this.h,Y),this.Ua&&Et(x,"TYPE","init"),this.P?(Et(x,"$req",b),Et(x,"SID","null"),Y.T=!0,ns(Y,x,null)):ns(Y,x,b),this.G=2}}else this.G==3&&(C?zu(this,C):this.i.length==0||Fl(this.h)||zu(this))};function zu(C,b){var x;b?x=b.l:x=C.U++;const V=mi(C.I);Et(V,"SID",C.K),Et(V,"RID",x),Et(V,"AID",C.T),ga(C,V),C.m&&C.o&&En(V,C.m,C.o),x=new Zn(C,C.j,x,C.B+1),C.m===null&&(x.H=C.o),b&&(C.i=b.D.concat(C.i)),b=wf(C,x,1e3),x.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Ml(C.h,x),ns(x,V,b)}function ga(C,b){C.H&&j(C.H,function(x,V){Et(b,V,x)}),C.l&&Lu({},function(x,V){Et(b,V,x)})}function wf(C,b,x){x=Math.min(C.i.length,x);var V=C.l?m(C.l.Na,C.l,C):null;e:{var Y=C.i;let re=-1;for(;;){const ve=["count="+x];re==-1?0<x?(re=Y[0].g,ve.push("ofs="+re)):re=0:ve.push("ofs="+re);let st=!0;for(let vn=0;vn<x;vn++){let ot=Y[vn].g;const Tn=Y[vn].map;if(ot-=re,0>ot)re=Math.max(0,Y[vn].g-100),st=!1;else try{vs(Tn,ve,"req"+ot+"_")}catch{V&&V(Tn)}}if(st){V=ve.join("&");break e}}}return C=C.i.splice(0,x),b.D=C,V}function Sf(C){if(!C.g&&!C.u){C.Y=1;var b=C.Fa;ie||H(),se||(ie(),se=!0),we.add(b,C),C.v=0}}function Uu(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=ln(m(C.Fa,C),Wu(C,C.v)),C.v++,!0)}e.Fa=function(){if(this.u=null,bf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=ln(m(this.ab,this),C)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Nl(this),bf(this))};function pa(C){C.A!=null&&(c.clearTimeout(C.A),C.A=null)}function bf(C){C.g=new Zn(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var b=mi(C.qa);Et(b,"RID","rpc"),Et(b,"SID",C.K),Et(b,"AID",C.T),Et(b,"CI",C.F?"0":"1"),!C.F&&C.ja&&Et(b,"TO",C.ja),Et(b,"TYPE","xmlhttp"),ga(C,b),C.m&&C.o&&En(b,C.m,C.o),C.L&&(C.g.I=C.L);var x=C.g;C=C.ia,x.L=1,x.v=aa(mi(b)),x.m=null,x.P=!0,no(x,C)}e.Za=function(){this.C!=null&&(this.C=null,Nl(this),Uu(this),Nt(19))};function Gl(C){C.C!=null&&(c.clearTimeout(C.C),C.C=null)}function Rf(C,b){var x=null;if(C.g==b){Gl(C),pa(C),C.g=null;var V=2}else if(_u(C.h,b))x=b.D,Jn(C.h,b),V=1;else return;if(C.G!=0){if(b.o)if(V==1){x=b.m?b.m.length:0,b=Date.now()-b.F;var Y=C.B;V=$o(),Ke(V,new Cn(V,x)),Bl(C)}else Sf(C);else if(Y=b.s,Y==3||Y==0&&0<b.X||!(V==1&&gC(C,b)||V==2&&Uu(C)))switch(x&&0<x.length&&(b=C.h,b.i=b.i.concat(x)),Y){case 1:co(C,5);break;case 4:co(C,10);break;case 3:co(C,6);break;default:co(C,2)}}}function Wu(C,b){let x=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(x*=2),x*b}function co(C,b){if(C.j.info("Error code "+b),b==2){var x=m(C.fb,C),V=C.Xa;const Y=!V;V=new cn(V||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ra(V,"https"),aa(V),Y?ca(V.toString(),x):is(V.toString(),x)}else Nt(2);C.G=0,C.l&&C.l.sa(b),Ef(C),yf(C)}e.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Ef(C){if(C.G=0,C.ka=[],C.l){const b=ku(C.h);(b.length!=0||C.i.length!=0)&&(T(C.ka,b),T(C.ka,C.i),C.h.i.length=0,E(C.i),C.i.length=0),C.l.ra()}}function Tf(C,b,x){var V=x instanceof cn?mi(x):new cn(x);if(V.g!="")b&&(V.g=b+"."+V.g),Xo(V,V.s);else{var Y=c.location;V=Y.protocol,b=b?b+"."+Y.hostname:Y.hostname,Y=+Y.port;var re=new cn(null);V&&ra(re,V),b&&(re.g=b),Y&&Xo(re,Y),x&&(re.l=x),V=re}return x=C.D,b=C.ya,x&&b&&Et(V,x,b),Et(V,"VER",C.la),ga(C,V),V}function xf(C,b,x){if(b&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=C.Ca&&!C.pa?new mt(new Zo({eb:x})):new mt(C.pa),b.Ha(C.J),b}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Df(){}e=Df.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Hl(){}Hl.prototype.g=function(C,b){return new ei(C,b)};function ei(C,b){Ie.call(this),this.g=new Vl(b),this.l=C,this.h=b&&b.messageUrlParams||null,C=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(C?C["X-WebChannel-Content-Type"]=b.messageContentType:C={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(C?C["X-WebChannel-Client-Profile"]=b.va:C={"X-WebChannel-Client-Profile":b.va}),this.g.S=C,(C=b&&b.Sb)&&!P(C)&&(this.g.m=C),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!P(b)&&(this.g.D=b,C=this.h,C!==null&&b in C&&(C=this.h,b in C&&delete C[b])),this.j=new bs(this)}S(ei,Ie),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){Hu(this.g)},ei.prototype.o=function(C){var b=this.g;if(typeof C=="string"){var x={};x.__data__=C,C=x}else this.u&&(x={},x.__data__=ts(C),C=x);b.i.push(new gf(b.Ya++,C)),b.G==3&&Bl(b)},ei.prototype.N=function(){this.g.l=null,delete this.j,Hu(this.g),delete this.g,ei.aa.N.call(this)};function Af(C){eo.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var b=C.__sm__;if(b){e:{for(const x in b){C=x;break e}C=void 0}(this.i=C)&&(C=this.i,b=b!==null&&C in b?b[C]:void 0),this.data=b}else this.data=C}S(Af,eo);function Ff(){Fu.call(this),this.status=1}S(Ff,Fu);function bs(C){this.g=C}S(bs,Df),bs.prototype.ua=function(){Ke(this.g,"a")},bs.prototype.ta=function(C){Ke(this.g,new Af(C))},bs.prototype.sa=function(C){Ke(this.g,new Ff)},bs.prototype.ra=function(){Ke(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,kI=function(){return new Hl},_I=function(){return $o()},II=fs,rS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yo.NO_ERROR=0,Yo.TIMEOUT=8,Yo.HTTP_ERROR=6,ip=Yo,to.COMPLETE="complete",MI=to,Au.EventType=Js,Js.OPEN="a",Js.CLOSE="b",Js.ERROR="c",Js.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Gd=Au,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,PI=mt}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});const DA="@firebase/firestore",AA="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new RI("@firebase/firestore");function Rc(){return ol.logLevel}function be(e,...t){if(ol.logLevel<=lt.DEBUG){const n=t.map(Qb);ol.debug(`Firestore (${pu}): ${e}`,...n)}}function Bo(e,...t){if(ol.logLevel<=lt.ERROR){const n=t.map(Qb);ol.error(`Firestore (${pu}): ${e}`,...n)}}function Zc(e,...t){if(ol.logLevel<=lt.WARN){const n=t.map(Qb);ol.warn(`Firestore (${pu}): ${e}`,...n)}}function Qb(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,LI(e,i,n)}function LI(e,t,n){let i=`FIRESTORE (${pu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Bo(i),new Error(i)}function yt(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||LI(t,s,i)}function Ue(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends gu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class G5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qn.UNAUTHENTICATED))}shutdown(){}}class H5{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z5{constructor(t){this.t=t,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let o=new Fo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Fo,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fo)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string",31837,{l:i}),new OI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new qn(t)}}class U5{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W5{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new U5(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j5{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,R5(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const i=o=>{o.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const s=o=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new FA(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new FA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=$5(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=t.charAt(s[o]%62))}return i}}function tt(e,t){return e<t?-1:e>t?1:0}function aS(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),o=t.charAt(i);if(s!==o)return By(s)===By(o)?tt(s,o):By(s)?1:-1}return tt(e.length,t.length)}const q5=55296,K5=57343;function By(e){const t=e.charCodeAt(0);return t>=q5&&t<=K5}function Jc(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="__name__";class Ms{constructor(t,n,i){n===void 0?n=0:n>t.length&&Ve(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Ve(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Ms.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ms?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const o=Ms.compareSegments(t.get(s),n.get(s));if(o!==0)return o}return tt(t.length,n.length)}static compareSegments(t,n){const i=Ms.isNumericId(t),s=Ms.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Ms.extractNumericId(t).compare(Ms.extractNumericId(n)):aS(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ir.fromString(t.substring(4,t.length-2))}}class It extends Ms{construct(t,n,i){return new It(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Se(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new It(n)}static emptyPath(){return new It([])}}const Y5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Ms{construct(t,n,i){return new Gn(t,n,i)}static isValidIdentifier(t){return Y5.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PA}static keyField(){return new Gn([PA])}static fromServerFormat(t){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Se(de.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new Se(de.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Se(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(i+=c,s++):(o(),s++)}if(o(),a)throw new Se(de.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gn(n)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.path=t}static fromPath(t){return new _e(It.fromString(t))}static fromName(t){return new _e(It.fromString(t).popFirst(5))}static empty(){return new _e(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return It.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _e(new It(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(e,t,n){if(!n)throw new Se(de.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Q5(e,t,n,i){if(t===!0&&i===!0)throw new Se(de.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function MA(e){if(!_e.isDocumentKey(e))throw new Se(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function IA(e){if(_e.isDocumentKey(e))throw new Se(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function NI(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function _m(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ve(12329,{type:typeof e})}function $s(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Se(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_m(e);throw new Se(de.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e,t){const n={typeString:e};return t&&(n.value=t),n}function Kh(e,t){if(!NI(e))throw new Se(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Se(de.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=-62135596800,kA=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(t){return Ot.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*kA);return new Ot(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<_A)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kA}_compareTo(t){return this.seconds===t.seconds?tt(this.nanoseconds,t.nanoseconds):tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Kh(t,Ot._jsonSchema))return new Ot(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-_A;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:mn("string",Ot._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(t){return new He(t)}static min(){return new He(new Ot(0,0))}static max(){return new He(new Ot(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=-1;function X5(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=He.fromTimestamp(i===1e9?new Ot(n+1,0):new Ot(n,i));return new Nr(s,_e.empty(),t)}function Z5(e){return new Nr(e.readTime,e.key,wh)}class Nr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Nr(He.min(),_e.empty(),wh)}static max(){return new Nr(He.max(),_e.empty(),wh)}}function J5(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=_e.comparator(e.documentKey,t.documentKey),n!==0?n:tt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(e){if(e.code!==de.FAILED_PRECONDITION||e.message!==eW)throw e;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new fe((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):fe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):fe.reject(n)}static resolve(t){return new fe((n,i)=>{n(t)})}static reject(t){return new fe((n,i)=>{i(t)})}static waitFor(t){return new fe((n,i)=>{let s=0,o=0,a=!1;t.forEach(c=>{++s,c.next(()=>{++o,a&&o===s&&n()},u=>i(u))}),a=!0,o===s&&n()})}static or(t){let n=fe.resolve(!1);for(const i of t)n=n.next(s=>s?fe.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(t,n){return new fe((i,s)=>{const o=t.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const h=u;n(t[h]).next(f=>{a[h]=f,++c,c===o&&i(a)},f=>s(f))}})}static doWhile(t,n){return new fe((i,s)=>{const o=()=>{t()===!0?n().next(()=>{o()},s):i()};o()})}}function nW(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}km.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=-1;function Lm(e){return e==null}function Lp(e){return e===0&&1/e==-1/0}function iW(e){return typeof e=="number"&&Number.isInteger(e)&&!Lp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="";function sW(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=LA(t)),t=oW(e.get(n),t);return LA(t)}function oW(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const o=e.charAt(s);switch(o){case"\0":n+="";break;case BI:n+="";break;default:n+=o}}return n}function LA(e){return e+BI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Kr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function GI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t,n){this.comparator=t,this.root=n||Bn.EMPTY}insert(t,n){return new jt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(t){return new jt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Vg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Vg(this.root,t,this.comparator,!1)}getReverseIterator(){return new Vg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Vg(this.root,t,this.comparator,!0)}}class Vg{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Bn{constructor(t,n,i,s,o){this.key=t,this.value=n,this.color=i??Bn.RED,this.left=s??Bn.EMPTY,this.right=o??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,o){return new Bn(t??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ve(27949);return t+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(t,n,i,s,o){return this}insert(t,n,i){return new Bn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.comparator=t,this.data=new jt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new VA(this.data.getIterator())}getIteratorFrom(t){return new VA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof bn)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new bn(this.comparator);return n.data=t,n}}class VA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this.fields=t,t.sort(Gn.comparator)}static empty(){return new Ei([])}unionWith(t){let n=new bn(Gn.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ei(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Jc(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new HI("Invalid base64 string: "+o):o}}(t);return new Un(n)}static fromUint8Array(t){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(t);return new Un(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const rW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=rW.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:sn(e.seconds),nanos:sn(e.nanos)}}function sn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Gr(e){return typeof e=="string"?Un.fromBase64String(e):Un.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="server_timestamp",UI="__type__",WI="__previous_value__",jI="__local_write_time__";function Jb(e){return(e?.mapValue?.fields||{})[UI]?.stringValue===zI}function Om(e){const t=e.mapValue.fields[WI];return Jb(t)?Om(t):t}function Sh(e){const t=Br(e.mapValue.fields[jI].timestampValue);return new Ot(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(t,n,i,s,o,a,c,u,h,f){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const Op="(default)";class bh{constructor(t,n){this.projectId=t,this.database=n||Op}static empty(){return new bh("","")}get isDefaultDatabase(){return this.database===Op}isEqual(t){return t instanceof bh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="__type__",lW="__max__",Ng={mapValue:{}},qI="__vector__",Vp="value";function Hr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jb(e)?4:uW(e)?9007199254740991:cW(e)?10:11:Ve(28295,{value:e})}function qs(e,t){if(e===t)return!0;const n=Hr(e);if(n!==Hr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sh(e).isEqual(Sh(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Br(s.timestampValue),c=Br(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,o){return Gr(s.bytesValue).isEqual(Gr(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,o){return sn(s.geoPointValue.latitude)===sn(o.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(o.geoPointValue.longitude)}(e,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return sn(s.integerValue)===sn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=sn(s.doubleValue),c=sn(o.doubleValue);return a===c?Lp(a)===Lp(c):isNaN(a)&&isNaN(c)}return!1}(e,t);case 9:return Jc(e.arrayValue.values||[],t.arrayValue.values||[],qs);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(OA(a)!==OA(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!qs(a[u],c[u])))return!1;return!0}(e,t);default:return Ve(52216,{left:e})}}function Rh(e,t){return(e.values||[]).find(n=>qs(n,t))!==void 0}function eu(e,t){if(e===t)return 0;const n=Hr(e),i=Hr(t);if(n!==i)return tt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(e.booleanValue,t.booleanValue);case 2:return function(o,a){const c=sn(o.integerValue||o.doubleValue),u=sn(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(e,t);case 3:return NA(e.timestampValue,t.timestampValue);case 4:return NA(Sh(e),Sh(t));case 5:return aS(e.stringValue,t.stringValue);case 6:return function(o,a){const c=Gr(o),u=Gr(a);return c.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=tt(c[h],u[h]);if(f!==0)return f}return tt(c.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,a){const c=tt(sn(o.latitude),sn(a.latitude));return c!==0?c:tt(sn(o.longitude),sn(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return BA(e.arrayValue,t.arrayValue);case 10:return function(o,a){const c=o.fields||{},u=a.fields||{},h=c[Vp]?.arrayValue,f=u[Vp]?.arrayValue,p=tt(h?.values?.length||0,f?.values?.length||0);return p!==0?p:BA(h,f)}(e.mapValue,t.mapValue);case 11:return function(o,a){if(o===Ng.mapValue&&a===Ng.mapValue)return 0;if(o===Ng.mapValue)return 1;if(a===Ng.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=aS(u[p],f[p]);if(m!==0)return m;const w=eu(c[u[p]],h[f[p]]);if(w!==0)return w}return tt(u.length,f.length)}(e.mapValue,t.mapValue);default:throw Ve(23264,{he:n})}}function NA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return tt(e,t);const n=Br(e),i=Br(t),s=tt(n.seconds,i.seconds);return s!==0?s:tt(n.nanos,i.nanos)}function BA(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=eu(n[s],i[s]);if(o)return o}return tt(n.length,i.length)}function tu(e){return lS(e)}function lS(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Br(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Gr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return _e.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=lS(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${lS(n.fields[a])}`;return s+"}"}(e.mapValue):Ve(61005,{value:e})}function sp(e){switch(Hr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Om(e);return t?16+sp(t):16;case 5:return 2*e.stringValue.length;case 6:return Gr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+sp(o),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Kr(i.fields,(o,a)=>{s+=o.length+sp(a)}),s}(e.mapValue);default:throw Ve(13486,{value:e})}}function GA(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function cS(e){return!!e&&"integerValue"in e}function eR(e){return!!e&&"arrayValue"in e}function HA(e){return!!e&&"nullValue"in e}function zA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function op(e){return!!e&&"mapValue"in e}function cW(e){return(e?.mapValue?.fields||{})[$I]?.stringValue===qI}function Jd(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Kr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Jd(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jd(e.arrayValue.values[n]);return t}return{...e}}function uW(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===lW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t){this.value=t}static empty(){return new fi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!op(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Jd(n)}setAll(t){let n=Gn.emptyPath(),i={},s=[];t.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=c.popLast()}a?i[c.lastSegment()]=Jd(a):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(t){const n=this.field(t.popLast());op(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qs(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];op(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Kr(n,(s,o)=>t[s]=o);for(const s of i)delete t[s]}clone(){return new fi(Jd(this.value))}}function KI(e){const t=[];return Kr(e.fields,(n,i)=>{const s=new Gn([n]);if(op(i)){const o=KI(i.mapValue).fields;if(o.length===0)t.push(s);else for(const a of o)t.push(s.child(a))}else t.push(s)}),new Ei(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t,n,i,s,o,a,c){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new Yn(t,0,He.min(),He.min(),He.min(),fi.empty(),0)}static newFoundDocument(t,n,i,s){return new Yn(t,1,n,He.min(),i,s,0)}static newNoDocument(t,n){return new Yn(t,2,n,He.min(),He.min(),fi.empty(),0)}static newUnknownDocument(t,n){return new Yn(t,3,n,He.min(),He.min(),fi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,n){this.position=t,this.inclusive=n}}function UA(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const o=t[s],a=e.position[s];if(o.field.isKeyField()?i=_e.comparator(_e.fromName(a.referenceValue),n.key):i=eu(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function WA(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qs(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t,n="asc"){this.field=t,this.dir=n}}function dW(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{}class pn extends YI{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new fW(t,n,i):n==="array-contains"?new mW(t,i):n==="in"?new CW(t,i):n==="not-in"?new vW(t,i):n==="array-contains-any"?new yW(t,i):new pn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new gW(t,i):new pW(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eu(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(eu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends YI{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new us(t,n)}matches(t){return QI(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QI(e){return e.op==="and"}function XI(e){return hW(e)&&QI(e)}function hW(e){for(const t of e.filters)if(t instanceof us)return!1;return!0}function uS(e){if(e instanceof pn)return e.field.canonicalString()+e.op.toString()+tu(e.value);if(XI(e))return e.filters.map(t=>uS(t)).join(",");{const t=e.filters.map(n=>uS(n)).join(",");return`${e.op}(${t})`}}function ZI(e,t){return e instanceof pn?function(i,s){return s instanceof pn&&i.op===s.op&&i.field.isEqual(s.field)&&qs(i.value,s.value)}(e,t):e instanceof us?function(i,s){return s instanceof us&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,c)=>o&&ZI(a,s.filters[c]),!0):!1}(e,t):void Ve(19439)}function JI(e){return e instanceof pn?function(n){return`${n.field.canonicalString()} ${n.op} ${tu(n.value)}`}(e):e instanceof us?function(n){return n.op.toString()+" {"+n.getFilters().map(JI).join(" ,")+"}"}(e):"Filter"}class fW extends pn{constructor(t,n,i){super(t,n,i),this.key=_e.fromName(i.referenceValue)}matches(t){const n=_e.comparator(t.key,this.key);return this.matchesComparison(n)}}class gW extends pn{constructor(t,n){super(t,"in",n),this.keys=e_("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class pW extends pn{constructor(t,n){super(t,"not-in",n),this.keys=e_("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function e_(e,t){return(t.arrayValue?.values||[]).map(n=>_e.fromName(n.referenceValue))}class mW extends pn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return eR(n)&&Rh(n.arrayValue,this.value)}}class CW extends pn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Rh(this.value.arrayValue,n)}}class vW extends pn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rh(this.value.arrayValue,n)}}class yW extends pn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!eR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Rh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(t,n=null,i=[],s=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.Te=null}}function jA(e,t=null,n=[],i=[],s=null,o=null,a=null){return new wW(e,t,n,i,s,o,a)}function tR(e){const t=Ue(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>uS(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Lm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>tu(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>tu(i)).join(",")),t.Te=n}return t.Te}function nR(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dW(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ZI(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!WA(e.startAt,t.startAt)&&WA(e.endAt,t.endAt)}function dS(e){return _e.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,n=null,i=[],s=[],o=null,a="F",c=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SW(e,t,n,i,s,o,a,c){return new Yh(e,t,n,i,s,o,a,c)}function iR(e){return new Yh(e)}function $A(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function t_(e){return e.collectionGroup!==null}function eh(e){const t=Ue(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),n.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new bn(Gn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Bp(o,i))}),n.has(Gn.keyField().canonicalString())||t.Ie.push(new Bp(Gn.keyField(),i))}return t.Ie}function Gs(e){const t=Ue(e);return t.Ee||(t.Ee=bW(t,eh(e))),t.Ee}function bW(e,t){if(e.limitType==="F")return jA(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Bp(s.field,o)});const n=e.endAt?new Np(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Np(e.startAt.position,e.startAt.inclusive):null;return jA(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function hS(e,t){const n=e.filters.concat([t]);return new Yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fS(e,t,n){return new Yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vm(e,t){return nR(Gs(e),Gs(t))&&e.limitType===t.limitType}function n_(e){return`${tR(Gs(e))}|lt:${e.limitType}`}function Ec(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>JI(s)).join(", ")}]`),Lm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>tu(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>tu(s)).join(",")),`Target(${i})`}(Gs(e))}; limitType=${e.limitType})`}function Nm(e,t){return t.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):_e.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(e,t)&&function(i,s){for(const o of eh(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,c,u){const h=UA(a,c,u);return a.inclusive?h<=0:h<0}(i.startAt,eh(i),s)||i.endAt&&!function(a,c,u){const h=UA(a,c,u);return a.inclusive?h>=0:h>0}(i.endAt,eh(i),s))}(e,t)}function RW(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function i_(e){return(t,n)=>{let i=!1;for(const s of eh(e)){const o=EW(s,t,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function EW(e,t,n){const i=e.field.isKeyField()?_e.comparator(t.key,n.key):function(o,a,c){const u=a.data.field(o),h=c.data.field(o);return u!==null&&h!==null?eu(u,h):Ve(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Kr(this.inner,(n,i)=>{for(const[s,o]of i)t(s,o)})}isEmpty(){return GI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW=new jt(_e.comparator);function Go(){return TW}const s_=new jt(_e.comparator);function Hd(...e){let t=s_;for(const n of e)t=t.insert(n.key,n);return t}function o_(e){let t=s_;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Ua(){return th()}function r_(){return th()}function th(){return new ml(e=>e.toString(),(e,t)=>e.isEqual(t))}const xW=new jt(_e.comparator),DW=new bn(_e.comparator);function nt(...e){let t=DW;for(const n of e)t=t.add(n);return t}const AW=new bn(tt);function FW(){return AW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lp(t)?"-0":t}}function a_(e){return{integerValue:""+e}}function PW(e,t){return iW(t)?a_(t):sR(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._=void 0}}function MW(e,t,n){return e instanceof Gp?function(s,o){const a={fields:{[UI]:{stringValue:zI},[jI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jb(o)&&(o=Om(o)),o&&(a.fields[WI]=o),{mapValue:a}}(n,t):e instanceof Eh?c_(e,t):e instanceof Th?u_(e,t):function(s,o){const a=l_(s,o),c=qA(a)+qA(s.Ae);return cS(a)&&cS(s.Ae)?a_(c):sR(s.serializer,c)}(e,t)}function IW(e,t,n){return e instanceof Eh?c_(e,t):e instanceof Th?u_(e,t):n}function l_(e,t){return e instanceof Hp?function(i){return cS(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class Gp extends Bm{}class Eh extends Bm{constructor(t){super(),this.elements=t}}function c_(e,t){const n=d_(t);for(const i of e.elements)n.some(s=>qs(s,i))||n.push(i);return{arrayValue:{values:n}}}class Th extends Bm{constructor(t){super(),this.elements=t}}function u_(e,t){let n=d_(t);for(const i of e.elements)n=n.filter(s=>!qs(s,i));return{arrayValue:{values:n}}}class Hp extends Bm{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function qA(e){return sn(e.integerValue||e.doubleValue)}function d_(e){return eR(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function _W(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Eh&&s instanceof Eh||i instanceof Th&&s instanceof Th?Jc(i.elements,s.elements,qs):i instanceof Hp&&s instanceof Hp?qs(i.Ae,s.Ae):i instanceof Gp&&s instanceof Gp}(e.transform,t.transform)}class kW{constructor(t,n){this.version=t,this.transformResults=n}}class ls{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ls}static exists(t){return new ls(void 0,t)}static updateTime(t){return new ls(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rp(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Gm{}function h_(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new oR(e.key,ls.none()):new Qh(e.key,e.data,ls.none());{const n=e.data,i=fi.empty();let s=new bn(Gn.comparator);for(let o of t.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Yr(e.key,i,new Ei(s.toArray()),ls.none())}}function LW(e,t,n){e instanceof Qh?function(s,o,a){const c=s.value.clone(),u=YA(s.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Yr?function(s,o,a){if(!rp(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=YA(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(f_(s)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function nh(e,t,n,i){return e instanceof Qh?function(o,a,c,u){if(!rp(o.precondition,a))return c;const h=o.value.clone(),f=QA(o.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Yr?function(o,a,c,u){if(!rp(o.precondition,a))return c;const h=QA(o.fieldTransforms,u,a),f=a.data;return f.setAll(f_(o)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(o,a,c){return rp(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(e,t,n)}function OW(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),o=l_(i.transform,s||null);o!=null&&(n===null&&(n=fi.empty()),n.set(i.field,o))}return n||null}function KA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Jc(i,s,(o,a)=>_W(o,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qh extends Gm{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends Gm{constructor(t,n,i,s,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function f_(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function YA(e,t,n){const i=new Map;yt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const o=e[s],a=o.transform,c=t.data.field(o.field);i.set(o.field,IW(a,c,n[s]))}return i}function QA(e,t,n){const i=new Map;for(const s of e){const o=s.transform,a=n.data.field(s.field);i.set(s.field,MW(o,a,t))}return i}class oR extends Gm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VW extends Gm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&LW(o,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=nh(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=nh(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=r_();return this.mutations.forEach(s=>{const o=t.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(s.key)?null:c;const u=h_(a,c);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(He.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&Jc(this.mutations,t.mutations,(n,i)=>KA(n,i))&&Jc(this.baseMutations,t.baseMutations,(n,i)=>KA(n,i))}}class rR{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){yt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return xW}();const o=t.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new rR(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,at;function HW(e){switch(e){case de.OK:return Ve(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ve(15467,{code:e})}}function g_(e){if(e===void 0)return Bo("GRPC error has no .code"),de.UNKNOWN;switch(e){case hn.OK:return de.OK;case hn.CANCELLED:return de.CANCELLED;case hn.UNKNOWN:return de.UNKNOWN;case hn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case hn.INTERNAL:return de.INTERNAL;case hn.UNAVAILABLE:return de.UNAVAILABLE;case hn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case hn.NOT_FOUND:return de.NOT_FOUND;case hn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case hn.ABORTED:return de.ABORTED;case hn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case hn.DATA_LOSS:return de.DATA_LOSS;default:return Ve(39323,{code:e})}}(at=hn||(hn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW=new Ir([4294967295,4294967295],0);function XA(e){const t=zW().encode(e),n=new FI;return n.update(t),new Uint8Array(n.digest())}function ZA(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ir([n,i],0),new Ir([s,o],0)]}class aR{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new zd(`Invalid padding: ${n}`);if(i<0)throw new zd(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new zd(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new zd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ir.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(Ir.fromNumber(i)));return s.compare(UW)===1&&(s=new Ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=XA(t),[i,s]=ZA(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new aR(o,s,n);return i.forEach(c=>a.insert(c)),a}insert(t){if(this.ge===0)return;const n=XA(t),[i,s]=ZA(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,n,i,s,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Xh.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Hm(He.min(),s,new jt(tt),Go(),nt())}}class Xh{constructor(t,n,i,s,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Xh(i,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class p_{constructor(t,n){this.targetId=t,this.Ce=n}}class m_{constructor(t,n,i=Un.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class JA{constructor(){this.ve=0,this.Fe=eF(),this.Me=Un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=nt(),n=nt(),i=nt();return this.Fe.forEach((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ve(38017,{changeType:o})}}),new Xh(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=eF()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WW{constructor(t){this.Ge=t,this.ze=new Map,this.je=Go(),this.Je=Bg(),this.He=Bg(),this.Ye=new jt(tt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Ve(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const o=s.target;if(dS(o))if(i===0){const a=new _e(o.path);this.et(n,a,Yn.newNoDocument(a,He.min()))}else yt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const c=this.ut(t),u=c?this.ct(c,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=Gr(i).toUint8Array()}catch(u){if(u instanceof HI)return Zc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new aR(a,s,o)}catch(u){return Zc(u instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.et(n,o,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((o,a)=>{const c=this.ot(a);if(c){if(o.current&&dS(c.target)){const u=new _e(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Yn.newNoDocument(u,t))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=nt();this.He.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(t));const s=new Hm(t,n,this.Ye,this.je,i);return this.je=Go(),this.Je=Bg(),this.He=Bg(),this.Ye=new jt(tt),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new JA,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new bn(tt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new bn(tt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||be("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new JA),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Bg(){return new jt(_e.comparator)}function eF(){return new jt(_e.comparator)}const jW={asc:"ASCENDING",desc:"DESCENDING"},$W={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qW={and:"AND",or:"OR"};class KW{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gS(e,t){return e.useProto3Json||Lm(t)?t:{value:t}}function zp(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function C_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function YW(e,t){return zp(e,t.toTimestamp())}function Hs(e){return yt(!!e,49232),He.fromTimestamp(function(n){const i=Br(n);return new Ot(i.seconds,i.nanos)}(e))}function lR(e,t){return pS(e,t).canonicalString()}function pS(e,t){const n=function(s){return new It(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function v_(e){const t=It.fromString(e);return yt(R_(t),10190,{key:t.toString()}),t}function mS(e,t){return lR(e.databaseId,t.path)}function Gy(e,t){const n=v_(t);if(n.get(1)!==e.databaseId.projectId)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new _e(w_(n))}function y_(e,t){return lR(e.databaseId,t)}function QW(e){const t=v_(e);return t.length===4?It.emptyPath():w_(t)}function CS(e){return new It(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function w_(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function tF(e,t,n){return{name:mS(e,t),fields:n.value.mapValue.fields}}function XW(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ve(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(yt(f===void 0||typeof f=="string",58123),Un.fromBase64String(f||"")):(yt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Un.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(h){const f=h.code===void 0?de.UNKNOWN:g_(h.code);return new Se(f,h.message||"")}(a);n=new m_(i,s,o,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Gy(e,i.document.name),o=Hs(i.document.updateTime),a=i.document.createTime?Hs(i.document.createTime):He.min(),c=new fi({mapValue:{fields:i.document.fields}}),u=Yn.newFoundDocument(s,o,a,c),h=i.targetIds||[],f=i.removedTargetIds||[];n=new ap(h,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Gy(e,i.document),o=i.readTime?Hs(i.readTime):He.min(),a=Yn.newNoDocument(s,o),c=i.removedTargetIds||[];n=new ap([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Gy(e,i.document),o=i.removedTargetIds||[];n=new ap([],o,s,null)}else{if(!("filter"in t))return Ve(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new GW(s,o),c=i.targetId;n=new p_(c,a)}}return n}function ZW(e,t){let n;if(t instanceof Qh)n={update:tF(e,t.key,t.value)};else if(t instanceof oR)n={delete:mS(e,t.key)};else if(t instanceof Yr)n={update:tF(e,t.key,t.data),updateMask:a6(t.fieldMask)};else{if(!(t instanceof VW))return Ve(16599,{Vt:t.type});n={verify:mS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(o,a){const c=a.transform;if(c instanceof Gp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Eh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Th)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Hp)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Ve(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:YW(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)}(e,t.precondition)),n}function JW(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map(n=>function(s,o){let a=s.updateTime?Hs(s.updateTime):Hs(o);return a.isEqual(He.min())&&(a=Hs(o)),new kW(a,s.transformResults||[])}(n,t))):[]}function e6(e,t){return{documents:[y_(e,t.path)]}}function t6(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=y_(e,s);const o=function(h){if(h.length!==0)return b_(us.create(h,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:Tc(m.field),direction:s6(m.dir)}}(f))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const c=gS(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function n6(e){let t=QW(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){yt(i===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let o=[];n.where&&(o=function(p){const m=S_(p);return m instanceof us&&XI(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(S){return new Bp(xc(S.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Lm(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,w=p.values||[];return new Np(w,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,w=p.values||[];return new Np(w,m)}(n.endAt)),SW(t,s,a,o,c,"F",u,h)}function i6(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function S_(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=xc(n.unaryFilter.field);return pn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=xc(n.unaryFilter.field);return pn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xc(n.unaryFilter.field);return pn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xc(n.unaryFilter.field);return pn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}}(e):e.fieldFilter!==void 0?function(n){return pn.create(xc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return us.create(n.compositeFilter.filters.map(i=>S_(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}}(n.compositeFilter.op))}(e):Ve(30097,{filter:e})}function s6(e){return jW[e]}function o6(e){return $W[e]}function r6(e){return qW[e]}function Tc(e){return{fieldPath:e.canonicalString()}}function xc(e){return Gn.fromServerFormat(e.fieldPath)}function b_(e){return e instanceof pn?function(n){if(n.op==="=="){if(zA(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NAN"}};if(HA(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zA(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NOT_NAN"}};if(HA(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tc(n.field),op:o6(n.op),value:n.value}}}(e):e instanceof us?function(n){const i=n.getFilters().map(s=>b_(s));return i.length===1?i[0]:{compositeFilter:{op:r6(n.op),filters:i}}}(e):Ve(54877,{filter:e})}function a6(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function R_(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t,n,i,s,o=He.min(),a=He.min(),c=Un.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new Fr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(t){this.yt=t}}function c6(e){const t=n6({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?fS(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.Cn=new d6}addToCollectionParentIndex(t,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(t,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return fe.resolve()}deleteFieldIndex(t,n){return fe.resolve()}deleteAllFieldIndexes(t){return fe.resolve()}createTargetIndexes(t,n){return fe.resolve()}getDocumentsMatchingTarget(t,n){return fe.resolve(null)}getIndexType(t,n){return fe.resolve(0)}getFieldIndexes(t,n){return fe.resolve([])}getNextCollectionGroupToUpdate(t){return fe.resolve(null)}getMinOffset(t,n){return fe.resolve(Nr.min())}getMinOffsetFromCollectionGroup(t,n){return fe.resolve(Nr.min())}updateCollectionGroup(t,n,i){return fe.resolve()}updateIndexEntries(t,n){return fe.resolve()}}class d6{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new bn(It.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new bn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E_=41943040;class di{static withCacheSize(t){return new di(t,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(E_,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new nu(0)}static cr(){return new nu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="LruGarbageCollector",h6=1048576;function sF([e,t],[n,i]){const s=tt(e,n);return s===0?tt(t,i):s}class f6{constructor(t){this.Ir=t,this.buffer=new bn(sF),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();sF(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g6{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){be(iF,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cu(n)?be(iF,"Ignoring IndexedDB error during garbage collection: ",n):await mu(n)}await this.Vr(3e5)})}}class p6{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return fe.resolve(km.ce);const i=new f6(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(nF)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nF):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,o,a,c,u,h;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(i=p,c=Date.now(),this.removeTargets(t,i,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),Rc()<=lt.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:p})))}}function m6(e,t){return new p6(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.changes=new ml(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Yn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&nh(i.mutation,s,Ei.empty(),Ot.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,nt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=nt()){const s=Ua();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(o=>{let a=Hd();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Ua();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,nt()))}populateOverlays(t,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(t,s).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(t,n,i,s){let o=Go();const a=th(),c=function(){return th()}();return n.forEach((u,h)=>{const f=i.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Yr)?o=o.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),nh(f.mutation,h,f.mutation.getFieldMask(),Ot.now())):a.set(h.key,Ei.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>c.set(h,new v6(f,a.get(h)??null))),c))}recalculateAndSaveOverlays(t,n){const i=th();let s=new jt((a,c)=>a-c),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=i.get(u)||Ei.empty();f=c.applyToLocalView(h,f),i.set(u,f);const p=(s.get(c.batchId)||nt()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,p=r_();f.forEach(m=>{if(!o.has(m)){const w=h_(n.get(m),i.get(m));w!==null&&p.set(m,w),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return fe.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return _e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):t_(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-o.size):fe.resolve(Ua());let c=wh,u=o;return a.next(h=>fe.forEach(h,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(t,h,o)).next(()=>this.computeViews(t,u,h,nt())).next(f=>({batchId:c,changes:o_(f)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new _e(n)).next(i=>{let s=Hd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const o=n.collectionGroup;let a=Hd();return this.indexManager.getCollectionParents(t,o).next(c=>fe.forEach(c,u=>{const h=function(p,m){return new Yh(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(f=>{f.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,o,s))).next(a=>{o.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Yn.newInvalidDocument(f)))});let c=Hd();return a.forEach((u,h)=>{const f=o.get(u);f!==void 0&&nh(f.mutation,h,Ei.empty(),Ot.now()),Nm(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Hs(s.createTime)}}(n)),fe.resolve()}getNamedQuery(t,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:c6(s.bundledQuery),readTime:Hs(s.readTime)}}(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.overlays=new jt(_e.comparator),this.qr=new Map}getOverlay(t,n){return fe.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Ua();return fe.forEach(n,s=>this.getOverlay(t,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,o)=>{this.St(t,n,o)}),fe.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),fe.resolve()}getOverlaysForCollection(t,n,i){const s=Ua(),o=n.length+1,a=new _e(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return fe.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let o=new jt((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let f=o.get(h.largestBatchId);f===null&&(f=Ua(),o=o.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=Ua(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=s)););return fe.resolve(c)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new BW(n,i));let o=this.qr.get(n);o===void 0&&(o=nt(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(t){return fe.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.Qr=new bn(Pn.$r),this.Ur=new bn(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Pn(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Pn(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new _e(new It([])),i=new Pn(n,t),s=new Pn(n,t+1),o=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new _e(new It([])),i=new Pn(n,t),s=new Pn(n,t+1);let o=nt();return this.Ur.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(t){const n=new Pn(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Pn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return _e.comparator(t.key,n.key)||tt(t.Yr,n.Yr)}static Kr(t,n){return tt(t.Yr,n.Yr)||_e.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bn(Pn.$r)}checkEmpty(t){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NW(o,n,i,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new Pn(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return fe.resolve(a)}lookupMutationBatch(t,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Zb:this.tr-1)}getAllMutationBatches(t){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Pn(n,0),s=new Pn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],a=>{const c=this.Xr(a.Yr);o.push(c)}),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new bn(tt);return n.forEach(s=>{const o=new Pn(s,0),a=new Pn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],c=>{i=i.add(c.Yr)})}),fe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let o=i;_e.isDocumentKey(o)||(o=o.child(""));const a=new Pn(new _e(o),0);let c=new bn(tt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Yr)),!0)},a),fe.resolve(this.ti(c))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return fe.forEach(n.mutations,s=>{const o=new Pn(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Pn(n,0),s=this.Zr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,fe.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t){this.ri=t,this.docs=function(){return new jt(_e.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(t,n){let i=Go();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Yn.newInvalidDocument(s))}),fe.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let o=Go();const a=n.path,c=new _e(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||J5(Z5(f),i)<=0||(s.has(f.key)||Nm(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(t,n,i,s){Ve(9500)}ii(t,n){return fe.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new T6(this)}getSize(t){return fe.resolve(this.size)}}class T6 extends C6{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),fe.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(t){this.persistence=t,this.si=new ml(n=>tR(n),nR),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new cR,this.targetCount=0,this.ai=nu.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),fe.resolve()}getLastRemoteSnapshotVersion(t){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return fe.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),fe.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new nu(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(t,n){return this.Pr(n),fe.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(t,n,i){let s=0;const o=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),fe.waitFor(o).next(()=>s)}getTargetCount(t){return fe.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return fe.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),fe.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(t,a))}),fe.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return fe.resolve(i)}containsKey(t,n){return fe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(t,n){this.ui={},this.overlays={},this.ci=new km(0),this.li=!1,this.li=!0,this.hi=new b6,this.referenceDelegate=t(this),this.Pi=new x6(this),this.indexManager=new u6,this.remoteDocumentCache=function(s){return new E6(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new l6(n),this.Ii=new w6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new S6,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new R6(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){be("MemoryPersistence","Starting transaction:",t);const s=new D6(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(t,n){return fe.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class D6 extends tW{constructor(t){super(),this.currentSequenceNumber=t}}class uR{constructor(t){this.persistence=t,this.Ri=new cR,this.Vi=null}static mi(t){return new uR(t)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),fe.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,i=>{const s=_e.fromPath(i);return this.gi(t,s).next(o=>{o||n.removeEntry(s,He.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Up{constructor(t,n){this.persistence=t,this.pi=new ml(i=>sW(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=m6(this,n)}static mi(t,n){return new Up(t,n)}Ei(){}di(t){return fe.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return fe.forEach(this.pi,(i,s)=>this.br(t,i,s).next(o=>o?fe.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(c=>{c||(i++,o.removeEntry(a,He.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),fe.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),fe.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),fe.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),fe.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=sp(t.data.value)),n}br(t,n,i){return fe.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return fe.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=nt(),s=nt();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new dR(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wU()?8:nW(vU())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const o={result:null};return this.ys(t,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(t,n,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new A6;return this.Ss(t,n,a).next(c=>{if(o.result=c,this.Vs)return this.bs(t,n,a,c.size)})}).next(()=>o.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(Rc()<=lt.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Ec(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(Rc()<=lt.DEBUG&&be("QueryEngine","Query:",Ec(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Rc()<=lt.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Ec(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gs(n))):fe.resolve())}ys(t,n){if($A(n))return fe.resolve(null);let i=Gs(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fS(n,null,"F"),i=Gs(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const a=nt(...o);return this.ps.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,c);return this.Cs(n,h,a,u.readTime)?this.ys(t,fS(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return $A(n)||s.isEqual(He.min())?fe.resolve(null):this.ps.getDocuments(t,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,s)?fe.resolve(null):(Rc()<=lt.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ec(n)),this.vs(t,a,n,X5(s,wh)).next(c=>c))})}Ds(t,n){let i=new bn(i_(t));return n.forEach((s,o)=>{Nm(t,o)&&(i=i.add(o))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(t,n,i){return Rc()<=lt.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Ec(n)),this.ps.getDocumentsMatchingQuery(t,n,Nr.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="LocalStore",P6=3e8;class M6{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new jt(tt),this.xs=new ml(o=>tR(o),nR),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new y6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function I6(e,t,n,i){return new M6(e,t,n,i)}async function x_(e,t){const n=Ue(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],c=[];let u=nt();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of o){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:c}))})})}function _6(e,t){const n=Ue(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){const p=h.batch,m=p.keys();let w=fe.resolve();return m.forEach(S=>{w=w.next(()=>f.getEntry(u,S)).next(E=>{const T=h.docVersions.get(S);yt(T!==null,48541),E.version.compareTo(T)<0&&(p.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),f.addEntry(E)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,i,t,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=nt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function D_(e){const t=Ue(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function k6(e,t){const n=Ue(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];t.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let w=m.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(p)!==null?w=w.withResumeToken(Un.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,i)),s=s.insert(p,w),function(E,T,F){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=P6?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,w,f)&&c.push(n.Pi.updateTargetData(o,w))});let u=Go(),h=nt();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(L6(o,a,t.documentUpdates).next(f=>{u=f.ks,h=f.qs})),!i.isEqual(He.min())){const f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(f)}return fe.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(n.Ms=s,o))}function L6(e,t,n){let i=nt(),s=nt();return n.forEach(o=>i=i.add(o)),t.getEntries(e,i).next(o=>{let a=Go();return n.forEach((c,u)=>{const h=o.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(He.min())?(t.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(c,u)):be(hR,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function O6(e,t){const n=Ue(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Zb),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function V6(e,t){const n=Ue(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(o=>o?(s=o,fe.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new Fr(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function vS(e,t,n){const i=Ue(e),s=i.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Cu(a))throw a;be(hR,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function oF(e,t,n){const i=Ue(e);let s=He.min(),o=nt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const p=Ue(u),m=p.xs.get(f);return m!==void 0?fe.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)}(i,a,Gs(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:He.min(),n?o:nt())).next(c=>(N6(i,RW(t),c),{documents:c,Qs:o})))}function N6(e,t,n){let i=e.Os.get(t)||He.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),e.Os.set(t,i)}class rF{constructor(){this.activeTargetIds=FW()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class B6{constructor(){this.Mo=new rF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rF,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="ConnectivityMonitor";class lF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(aF,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){be(aF,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg=null;function yS(){return Gg===null?Gg=function(){return 268435456+Math.round(2147483648*Math.random())}():Gg++,"0x"+Gg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="RestConnection",H6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z6{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Op?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,o){const a=yS(),c=this.zo(t,n.toUriEncodedString());be(Hy,`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,o);const{host:h}=new URL(c),f=Kb(h);return this.Jo(t,c,u,i,f).then(p=>(be(Hy,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Zc(Hy,`RPC '${t}' ${a} failed with error: `,p,"url: ",c,"request:",i),p})}Ho(t,n,i,s,o,a){return this.Go(t,n,i,s,o)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}zo(t,n){const i=H6[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class W6 extends z6{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,o){const a=yS();return new Promise((c,u)=>{const h=new PI;h.setWithCredentials(!0),h.listenOnce(MI.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ip.NO_ERROR:const p=h.getResponseJson();be($n,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),c(p);break;case ip.TIMEOUT:be($n,`RPC '${t}' ${a} timed out`),u(new Se(de.DEADLINE_EXCEEDED,"Request time out"));break;case ip.HTTP_ERROR:const m=h.getStatus();if(be($n,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const E=function(F){const P=F.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(P)>=0?P:de.UNKNOWN}(S.status);u(new Se(E,S.message))}else u(new Se(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Se(de.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{be($n,`RPC '${t}' ${a} completed.`)}});const f=JSON.stringify(s);be($n,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",f,i,15)})}T_(t,n,i){const s=yS(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=kI(),c=_I(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=o.join("");be($n,`Creating RPC '${t}' stream ${s}: ${f}`,u);const p=a.createWebChannel(f,u);this.I_(p);let m=!1,w=!1;const S=new U6({Yo:T=>{w?be($n,`Not sending because RPC '${t}' stream ${s} is closed:`,T):(m||(be($n,`Opening RPC '${t}' stream ${s} transport.`),p.open(),m=!0),be($n,`RPC '${t}' stream ${s} sending:`,T),p.send(T))},Zo:()=>p.close()}),E=(T,F,P)=>{T.listen(F,M=>{try{P(M)}catch(U){setTimeout(()=>{throw U},0)}})};return E(p,Gd.EventType.OPEN,()=>{w||(be($n,`RPC '${t}' stream ${s} transport opened.`),S.o_())}),E(p,Gd.EventType.CLOSE,()=>{w||(w=!0,be($n,`RPC '${t}' stream ${s} transport closed`),S.a_(),this.E_(p))}),E(p,Gd.EventType.ERROR,T=>{w||(w=!0,Zc($n,`RPC '${t}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),S.a_(new Se(de.UNAVAILABLE,"The operation could not be completed")))}),E(p,Gd.EventType.MESSAGE,T=>{if(!w){const F=T.data[0];yt(!!F,16349);const P=F,M=P?.error||P[0]?.error;if(M){be($n,`RPC '${t}' stream ${s} received error:`,M);const U=M.status;let z=function(A){const _=hn[A];if(_!==void 0)return g_(_)}(U),j=M.message;z===void 0&&(z=de.INTERNAL,j="Unknown error status: "+U+" with message "+M.message),w=!0,S.a_(new Se(z,j)),p.close()}else be($n,`RPC '${t}' stream ${s} received:`,F),S.u_(F)}}),E(c,II.STAT_EVENT,T=>{T.stat===rS.PROXY?be($n,`RPC '${t}' stream ${s} detected buffering proxy`):T.stat===rS.NOPROXY&&be($n,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function zy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(e){return new KW(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(t,n,i=1e3,s=1.5,o=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="PersistentStream";class F_{constructor(t,n,i,s,o,a,c,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A_(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(Bo(n.toString()),Bo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new Se(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return be(cF,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(be(cF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j6 extends F_{constructor(t,n,i,s,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=o}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=XW(this.serializer,t),i=function(o){if(!("targetChange"in o))return He.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?He.min():a.readTime?Hs(a.readTime):He.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=CS(this.serializer),n.addTarget=function(o,a){let c;const u=a.target;if(c=dS(u)?{documents:e6(o,u)}:{query:t6(o,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=C_(o,a.resumeToken);const h=gS(o,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(He.min())>0){c.readTime=zp(o,a.snapshotVersion.toTimestamp());const h=gS(o,a.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,t);const i=i6(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=CS(this.serializer),n.removeTarget=t,this.q_(n)}}class $6 extends F_{constructor(t,n,i,s,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=JW(t.writeResults,t.commitTime),i=Hs(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=CS(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>ZW(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{}class K6 extends q6{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(t,pS(n,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(de.UNKNOWN,o.toString())})}Ho(t,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(t,pS(n,i),s,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(de.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Y6{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bo(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="RemoteStore";class Q6{constructor(t,n,i,s,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Cl(this)&&(be(rl,"Restarting streams for network reachability change."),await async function(u){const h=Ue(u);h.Ea.add(4),await Zh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Um(h)}(this))})}),this.Ra=new Y6(i,s)}}async function Um(e){if(Cl(e))for(const t of e.da)await t(!0)}async function Zh(e){for(const t of e.da)await t(!1)}function P_(e,t){const n=Ue(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),mR(n)?pR(n):vu(n).O_()&&gR(n,t))}function fR(e,t){const n=Ue(e),i=vu(n);n.Ia.delete(t),i.O_()&&M_(n,t),n.Ia.size===0&&(i.O_()?i.L_():Cl(n)&&n.Ra.set("Unknown"))}function gR(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(He.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vu(e).Y_(t)}function M_(e,t){e.Va.Ue(t),vu(e).Z_(t)}function pR(e){e.Va=new WW({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),vu(e).start(),e.Ra.ua()}function mR(e){return Cl(e)&&!vu(e).x_()&&e.Ia.size>0}function Cl(e){return Ue(e).Ea.size===0}function I_(e){e.Va=void 0}async function X6(e){e.Ra.set("Online")}async function Z6(e){e.Ia.forEach((t,n)=>{gR(e,t)})}async function J6(e,t){I_(e),mR(e)?(e.Ra.ha(t),pR(e)):e.Ra.set("Unknown")}async function e9(e,t,n){if(e.Ra.set("Online"),t instanceof m_&&t.state===2&&t.cause)try{await async function(s,o){const a=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(e,t)}catch(i){be(rl,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Wp(e,i)}else if(t instanceof ap?e.Va.Ze(t):t instanceof p_?e.Va.st(t):e.Va.tt(t),!n.isEqual(He.min()))try{const i=await D_(e.localStore);n.compareTo(i)>=0&&await function(o,a){const c=o.Va.Tt(a);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.Ia.get(h);f&&o.Ia.set(h,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,h)=>{const f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(Un.EMPTY_BYTE_STRING,f.snapshotVersion)),M_(o,u);const p=new Fr(f.target,u,h,f.sequenceNumber);gR(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(e,n)}catch(i){be(rl,"Failed to raise snapshot:",i),await Wp(e,i)}}async function Wp(e,t,n){if(!Cu(t))throw t;e.Ea.add(1),await Zh(e),e.Ra.set("Offline"),n||(n=()=>D_(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{be(rl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Um(e)})}function __(e,t){return t().catch(n=>Wp(e,n,t))}async function Wm(e){const t=Ue(e),n=zr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Zb;for(;t9(t);)try{const s=await O6(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,n9(t,s)}catch(s){await Wp(t,s)}k_(t)&&L_(t)}function t9(e){return Cl(e)&&e.Ta.length<10}function n9(e,t){e.Ta.push(t);const n=zr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function k_(e){return Cl(e)&&!zr(e).x_()&&e.Ta.length>0}function L_(e){zr(e).start()}async function i9(e){zr(e).ra()}async function s9(e){const t=zr(e);for(const n of e.Ta)t.ea(n.mutations)}async function o9(e,t,n){const i=e.Ta.shift(),s=rR.from(i,t,n);await __(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Wm(e)}async function r9(e,t){t&&zr(e).X_&&await async function(i,s){if(function(a){return HW(a)&&a!==de.ABORTED}(s.code)){const o=i.Ta.shift();zr(i).B_(),await __(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Wm(i)}}(e,t),k_(e)&&L_(e)}async function uF(e,t){const n=Ue(e);n.asyncQueue.verifyOperationInProgress(),be(rl,"RemoteStore received new credentials");const i=Cl(n);n.Ea.add(3),await Zh(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Um(n)}async function a9(e,t){const n=Ue(e);t?(n.Ea.delete(2),await Um(n)):t||(n.Ea.add(2),await Zh(n),n.Ra.set("Unknown"))}function vu(e){return e.ma||(e.ma=function(n,i,s){const o=Ue(n);return o.sa(),new j6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(e.datastore,e.asyncQueue,{Xo:X6.bind(null,e),t_:Z6.bind(null,e),r_:J6.bind(null,e),H_:e9.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),mR(e)?pR(e):e.Ra.set("Unknown")):(await e.ma.stop(),I_(e))})),e.ma}function zr(e){return e.fa||(e.fa=function(n,i,s){const o=Ue(n);return o.sa(),new $6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:i9.bind(null,e),r_:r9.bind(null,e),ta:s9.bind(null,e),na:o9.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Wm(e)):(await e.fa.stop(),e.Ta.length>0&&(be(rl,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t,n,i,s,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,o){const a=Date.now()+i,c=new CR(t,n,a,s,o);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(de.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vR(e,t){if(Bo("AsyncQueue",`${t}: ${e}`),Cu(e))return new Se(de.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{static emptySet(t){return new Vc(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||_e.comparator(n.key,i.key):(n,i)=>_e.comparator(n.key,i.key),this.keyedMap=Hd(),this.sortedSet=new jt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Vc)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Vc;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(){this.ga=new jt(_e.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Ve(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class iu{constructor(t,n,i,s,o,a,c,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new iu(t,n,Vc.emptySet(n),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class c9{constructor(){this.queries=hF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Ue(n),o=s.queries;s.queries=hF(),o.forEach((a,c)=>{for(const u of c.Sa)u.onError(i)})})(this,new Se(de.ABORTED,"Firestore shutting down"))}}function hF(){return new ml(e=>n_(e),Vm)}async function O_(e,t){const n=Ue(e);let i=3;const s=t.query;let o=n.queries.get(s);o?!o.ba()&&t.Da()&&(i=2):(o=new l9,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=vR(a,`Initialization of query '${Ec(t.query)}' failed`);return void t.onError(c)}n.queries.set(s,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&yR(n)}async function V_(e,t){const n=Ue(e),i=t.query;let s=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(t);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=t.Da()?0:1:!o.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function u9(e,t){const n=Ue(e);let i=!1;for(const s of t){const o=s.query,a=n.queries.get(o);if(a){for(const c of a.Sa)c.Fa(s)&&(i=!0);a.wa=s}}i&&yR(n)}function d9(e,t,n){const i=Ue(e),s=i.queries.get(t);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(t)}function yR(e){e.Ca.forEach(t=>{t.next()})}var wS,fF;(fF=wS||(wS={})).Ma="default",fF.Cache="cache";class N_{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new iu(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=iu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==wS.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(t){this.key=t}}class G_{constructor(t){this.key=t}}class h9{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=i_(t),this.tu=new Vc(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new dF,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,p)=>{const m=s.get(f),w=Nm(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),E=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let T=!1;m&&w?m.data.isEqual(w.data)?S!==E&&(i.track({type:3,doc:w}),T=!0):this.su(m,w)||(i.track({type:2,doc:w}),T=!0,(u&&this.eu(w,u)>0||h&&this.eu(w,h)<0)&&(c=!0)):!m&&w?(i.track({type:0,doc:w}),T=!0):m&&!w&&(i.track({type:1,doc:m}),T=!0,(u||h)&&(c=!0)),T&&(w?(a=a.add(w),o=E?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),i.track({type:1,doc:f})}return{tu:a,iu:i,Cs:c,mutatedKeys:o}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((f,p)=>function(w,S){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:T})}};return E(w)-E(S)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(i),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new iu(this.query,t.tu,o,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=nt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new G_(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new B_(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=nt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return iu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wR="SyncEngine";class f9{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class g9{constructor(t){this.key=t,this.hu=!1}}class p9{constructor(t,n,i,s,o,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ml(c=>n_(c),Vm),this.Iu=new Map,this.Eu=new Set,this.du=new jt(_e.comparator),this.Au=new Map,this.Ru=new cR,this.Vu={},this.mu=new Map,this.fu=nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m9(e,t,n=!0){const i=$_(e);let s;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await H_(i,t,n,!0),s}async function C9(e,t){const n=$_(e);await H_(n,t,!0,!1)}async function H_(e,t,n,i){const s=await V6(e.localStore,Gs(t)),o=s.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await v9(e,t,o,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&P_(e.remoteStore,s),c}async function v9(e,t,n,i,s){e.pu=(p,m,w)=>async function(E,T,F,P){let M=T.view.ru(F);M.Cs&&(M=await oF(E.localStore,T.query,!1).then(({documents:I})=>T.view.ru(I,M)));const U=P&&P.targetChanges.get(T.targetId),z=P&&P.targetMismatches.get(T.targetId)!=null,j=T.view.applyChanges(M,E.isPrimaryClient,U,z);return pF(E,T.targetId,j.au),j.snapshot}(e,p,m,w);const o=await oF(e.localStore,t,!0),a=new h9(t,o.Qs),c=a.ru(o.documents),u=Xh.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(c,e.isPrimaryClient,u);pF(e,n,h.au);const f=new f9(t,n,a);return e.Tu.set(t,f),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function y9(e,t,n){const i=Ue(e),s=i.Tu.get(t),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!Vm(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await vS(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&fR(i.remoteStore,s.targetId),SS(i,s.targetId)}).catch(mu)):(SS(i,s.targetId),await vS(i.localStore,s.targetId,!0))}async function w9(e,t){const n=Ue(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fR(n.remoteStore,i.targetId))}async function S9(e,t,n){const i=A9(e);try{const s=await function(a,c){const u=Ue(a),h=Ot.now(),f=c.reduce((w,S)=>w.add(S.key),nt());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=Go(),E=nt();return u.Ns.getEntries(w,f).next(T=>{S=T,S.forEach((F,P)=>{P.isValidDocument()||(E=E.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(T=>{p=T;const F=[];for(const P of c){const M=OW(P,p.get(P.key).overlayedDocument);M!=null&&F.push(new Yr(P.key,M,KI(M.value.mapValue),ls.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,F,c)}).next(T=>{m=T;const F=T.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(w,T.batchId,F)})}).then(()=>({batchId:m.batchId,changes:o_(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new jt(tt)),h=h.insert(c,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await Jh(i,s.changes),await Wm(i.remoteStore)}catch(s){const o=vR(s,"Failed to persist write");n.reject(o)}}async function z_(e,t){const n=Ue(e);try{const i=await k6(n.localStore,t);t.targetChanges.forEach((s,o)=>{const a=n.Au.get(o);a&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?yt(a.hu,14607):s.removedDocuments.size>0&&(yt(a.hu,42227),a.hu=!1))}),await Jh(n,i,t)}catch(i){await mu(i)}}function gF(e,t,n){const i=Ue(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,a)=>{const c=a.view.va(t);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=Ue(a);u.onlineState=c;let h=!1;u.queries.forEach((f,p)=>{for(const m of p.Sa)m.va(c)&&(h=!0)}),h&&yR(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function b9(e,t,n){const i=Ue(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),o=s&&s.key;if(o){let a=new jt(_e.comparator);a=a.insert(o,Yn.newNoDocument(o,He.min()));const c=nt().add(o),u=new Hm(He.min(),new Map,new jt(tt),a,c);await z_(i,u),i.du=i.du.remove(o),i.Au.delete(t),SR(i)}else await vS(i.localStore,t,!1).then(()=>SS(i,t,n)).catch(mu)}async function R9(e,t){const n=Ue(e),i=t.batch.batchId;try{const s=await _6(n.localStore,t);W_(n,i,null),U_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Jh(n,s)}catch(s){await mu(s)}}async function E9(e,t,n){const i=Ue(e);try{const s=await function(a,c){const u=Ue(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(yt(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(i.localStore,t);W_(i,t,n),U_(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Jh(i,s)}catch(s){await mu(s)}}function U_(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function W_(e,t,n){const i=Ue(e);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(n?o.reject(n):o.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function SS(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||j_(e,i)})}function j_(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(fR(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),SR(e))}function pF(e,t,n){for(const i of n)i instanceof B_?(e.Ru.addReference(i.key,t),T9(e,i)):i instanceof G_?(be(wR,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||j_(e,i.key)):Ve(19791,{wu:i})}function T9(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(be(wR,"New document in limbo: "+n),e.Eu.add(i),SR(e))}function SR(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new _e(It.fromString(t)),i=e.fu.next();e.Au.set(i,new g9(n)),e.du=e.du.insert(n,i),P_(e.remoteStore,new Fr(Gs(iR(n.path)),i,"TargetPurposeLimboResolution",km.ce))}}async function Jh(e,t,n){const i=Ue(e),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((c,u)=>{a.push(i.pu(u,t,n).then(h=>{if((h||n)&&i.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(u.targetId)?.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(h){s.push(h);const f=dR.As(u.targetId,h);o.push(f)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const f=Ue(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>fe.forEach(h,m=>fe.forEach(m.Es,w=>f.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>fe.forEach(m.ds,w=>f.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!Cu(p))throw p;be(hR,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const w=f.Ms.get(m),S=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,E)}}}(i.localStore,o))}async function x9(e,t){const n=Ue(e);if(!n.currentUser.isEqual(t)){be(wR,"User change. New user:",t.toKey());const i=await x_(n.localStore,t);n.currentUser=t,function(o,a){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new Se(de.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Jh(n,i.Ls)}}function D9(e,t){const n=Ue(e),i=n.Au.get(t);if(i&&i.hu)return nt().add(i.key);{let s=nt();const o=n.Iu.get(t);if(!o)return s;for(const a of o){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function $_(e){const t=Ue(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=z_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=D9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=b9.bind(null,t),t.Pu.H_=u9.bind(null,t.eventManager),t.Pu.yu=d9.bind(null,t.eventManager),t}function A9(e){const t=Ue(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=R9.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=E9.bind(null,t),t}class jp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=zm(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return I6(this.persistence,new F6,t.initialUser,this.serializer)}Cu(t){return new T_(uR.mi,this.serializer)}Du(t){return new B6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jp.provider={build:()=>new jp};class F9 extends jp{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){yt(this.persistence.referenceDelegate instanceof Up,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new g6(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new T_(i=>Up.mi(i,n),this.serializer)}}class bS{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x9.bind(null,this.syncEngine),await a9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new c9}()}createDatastore(t){const n=zm(t.databaseInfo.databaseId),i=function(o){return new W6(o)}(t.databaseInfo);return function(o,a,c,u){return new K6(o,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,o,a,c){return new Q6(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,n=>gF(this.syncEngine,n,0),function(){return lF.v()?new lF:new G6}())}createSyncEngine(t,n){return function(s,o,a,c,u,h,f){const p=new p9(s,o,a,c,u,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const i=Ue(n);be(rl,"RemoteStore shutting down."),i.Ea.add(5),await Zh(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bS.provider={build:()=>new bS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Bo("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class P9{constructor(t,n,i,s,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=qn.UNAUTHENTICATED,this.clientId=Xb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{be(Ur,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(be(Ur,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=vR(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Uy(e,t){e.asyncQueue.verifyOperationInProgress(),be(Ur,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await x_(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function mF(e,t){e.asyncQueue.verifyOperationInProgress();const n=await M9(e);be(Ur,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>uF(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>uF(t.remoteStore,s)),e._onlineComponents=t}async function M9(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){be(Ur,"Using user provided OfflineComponentProvider");try{await Uy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zc("Error using user provided cache. Falling back to memory cache: "+n),await Uy(e,new jp)}}else be(Ur,"Using default OfflineComponentProvider"),await Uy(e,new F9(void 0));return e._offlineComponents}async function K_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(be(Ur,"Using user provided OnlineComponentProvider"),await mF(e,e._uninitializedComponentsProvider._online)):(be(Ur,"Using default OnlineComponentProvider"),await mF(e,new bS))),e._onlineComponents}function I9(e){return K_(e).then(t=>t.syncEngine)}async function Y_(e){const t=await K_(e),n=t.eventManager;return n.onListen=m9.bind(null,t.syncEngine),n.onUnlisten=y9.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=C9.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=w9.bind(null,t.syncEngine),n}function _9(e,t,n={}){const i=new Fo;return e.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,h){const f=new q_({next:m=>{f.Nu(),a.enqueueAndForget(()=>V_(o,p));const w=m.docs.has(c);!w&&m.fromCache?h.reject(new Se(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?h.reject(new Se(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new N_(iR(c.path),f,{includeMetadataChanges:!0,qa:!0});return O_(o,p)}(await Y_(e),e.asyncQueue,t,n,i)),i.promise}function k9(e,t,n={}){const i=new Fo;return e.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,h){const f=new q_({next:m=>{f.Nu(),a.enqueueAndForget(()=>V_(o,p)),m.fromCache&&u.source==="server"?h.reject(new Se(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new N_(c,f,{includeMetadataChanges:!0,qa:!0});return O_(o,p)}(await Y_(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="firestore.googleapis.com",vF=!0;class yF{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Se(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X_,this.ssl=vF}else this.host=t.host,this.ssl=t.ssl??vF;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=E_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<h6)throw new Se(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Q5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q_(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class jm{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Se(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yF(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new G5;switch(i.type){case"firstParty":return new W5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=CF.get(n);i&&(be("ComponentProvider","Removing Datastore"),CF.delete(n),i.terminate())}(this),Promise.resolve()}}function L9(e,t,n,i={}){e=$s(e,jm);const s=Kb(t),o=e._getSettings(),a={...o,emulatorOptions:e._getEmulatorOptions()},c=`${t}:${n}`;s&&(fU(`https://${c}`),CU("Firestore",!0)),o.host!==X_&&o.host!==c&&Zc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:c,ssl:s,emulatorOptions:i};if(!Ip(u,a)&&(e._setSettings(u),i.mockUserToken)){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=qn.MOCK_USER;else{h=gU(i.mockUserToken,e._app?.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Se(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qn(p)}e._authCredentials=new H5(new OI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new yu(this.firestore,t,this._query)}}class rn{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rn(this.firestore,t,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Kh(n,rn._jsonSchema))return new rn(t,i||null,new _e(It.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:mn("string",rn._jsonSchemaVersion),referencePath:mn("string")};class _r extends yu{constructor(t,n,i){super(t,n,iR(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rn(this.firestore,null,new _e(t))}withConverter(t){return new _r(this.firestore,t,this._path)}}function O9(e,t,...n){if(e=Vo(e),VI("collection","path",t),e instanceof jm){const i=It.fromString(t,...n);return IA(i),new _r(e,null,i)}{if(!(e instanceof rn||e instanceof _r))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(It.fromString(t,...n));return IA(i),new _r(e.firestore,null,i)}}function ef(e,t,...n){if(e=Vo(e),arguments.length===1&&(t=Xb.newId()),VI("doc","path",t),e instanceof jm){const i=It.fromString(t,...n);return MA(i),new rn(e,null,new _e(i))}{if(!(e instanceof rn||e instanceof _r))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(It.fromString(t,...n));return MA(i),new rn(e.firestore,e instanceof _r?e.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="AsyncQueue";class SF{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A_(this,"async_queue_retry"),this._c=()=>{const i=zy();i&&be(wF,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=zy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=zy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Cu(t))throw t;be(wF,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Bo("INTERNAL UNHANDLED ERROR: ",bF(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=CR.createAndSchedule(this,t,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Ve(47125,{Pc:bF(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function bF(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class wu extends jm{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new SF,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new SF(t),this._firestoreClient=void 0,await t}}}function V9(e,t){const n=typeof e=="object"?e:D5(),i=typeof e=="string"?e:Op,s=b5(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=dU("firestore");o&&L9(s,...o)}return s}function bR(e){if(e._terminated)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||N9(e),e._firestoreClient}function N9(e){const t=e._freezeSettings(),n=function(s,o,a,c){return new aW(s,o,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Q_(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new P9(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qi(Un.fromBase64String(t))}catch(n){throw new Se(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new qi(Un.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Kh(t,qi._jsonSchema))return qi.fromBase64String(t.bytes)}}qi._jsonSchemaVersion="firestore/bytes/1.0",qi._jsonSchema={type:mn("string",qi._jsonSchemaVersion),bytes:mn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Se(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Se(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Se(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return tt(this._lat,t._lat)||tt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(t){if(Kh(t,zs._jsonSchema))return new zs(t.latitude,t.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:mn("string",zs._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Kh(t,Us._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Us(t.vectorValues);throw new Se(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Us._jsonSchemaVersion="firestore/vectorValue/1.0",Us._jsonSchema={type:mn("string",Us._jsonSchemaVersion),vectorValues:mn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=/^__.*__$/;class G9{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Yr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Qh(t,this.data,n,this.fieldTransforms)}}class Z_{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Yr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function J_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:e})}}class ER{constructor(t,n,i,s,o,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ER({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return $p(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(J_(this.Ac)&&B9.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class H9{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||zm(t)}Cc(t,n,i,s=!1){return new ER({Ac:t,methodName:n,Dc:i,path:Gn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TR(e){const t=e._freezeSettings(),n=zm(e._databaseId);return new H9(e._databaseId,!!t.ignoreUndefinedProperties,n)}function z9(e,t,n,i,s,o={}){const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,s);xR("Data must be an object, but it was:",a,i);const c=ek(i,a);let u,h;if(o.merge)u=new Ei(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const p of o.mergeFields){const m=RS(t,p,n);if(!a.contains(m))throw new Se(de.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nk(f,m)||f.push(m)}u=new Ei(f),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new G9(new fi(c),u,h)}class qm extends RR{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof qm}}function U9(e,t,n,i){const s=e.Cc(1,t,n);xR("Data must be an object, but it was:",s,i);const o=[],a=fi.empty();Kr(i,(u,h)=>{const f=DR(t,u,n);h=Vo(h);const p=s.yc(f);if(h instanceof qm)o.push(f);else{const m=tf(h,p);m!=null&&(o.push(f),a.set(f,m))}});const c=new Ei(o);return new Z_(a,c,s.fieldTransforms)}function W9(e,t,n,i,s,o){const a=e.Cc(1,t,n),c=[RS(t,i,n)],u=[s];if(o.length%2!=0)throw new Se(de.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(RS(t,o[m])),u.push(o[m+1]);const h=[],f=fi.empty();for(let m=c.length-1;m>=0;--m)if(!nk(h,c[m])){const w=c[m];let S=u[m];S=Vo(S);const E=a.yc(w);if(S instanceof qm)h.push(w);else{const T=tf(S,E);T!=null&&(h.push(w),f.set(w,T))}}const p=new Ei(h);return new Z_(f,p,a.fieldTransforms)}function j9(e,t,n,i=!1){return tf(n,e.Cc(i?4:3,t))}function tf(e,t){if(tk(e=Vo(e)))return xR("Unsupported field value:",t,e),ek(e,t);if(e instanceof RR)return function(i,s){if(!J_(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const c of i){let u=tf(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(e,t)}return function(i,s){if((i=Vo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return PW(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ot.fromDate(i);return{timestampValue:zp(s.serializer,o)}}if(i instanceof Ot){const o=new Ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zp(s.serializer,o)}}if(i instanceof zs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qi)return{bytesValue:C_(s.serializer,i._byteString)};if(i instanceof rn){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lR(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Us)return function(a,c){return{mapValue:{fields:{[$I]:{stringValue:qI},[Vp]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return sR(c.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${_m(i)}`)}(e,t)}function ek(e,t){const n={};return GI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kr(e,(i,s)=>{const o=tf(s,t.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function tk(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ot||e instanceof zs||e instanceof qi||e instanceof rn||e instanceof RR||e instanceof Us)}function xR(e,t,n){if(!tk(n)||!NI(n)){const i=_m(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function RS(e,t,n){if((t=Vo(t))instanceof $m)return t._internalPath;if(typeof t=="string")return DR(e,t);throw $p("Field path arguments must be of type string or ",e,!1,void 0,n)}const $9=new RegExp("[~\\*/\\[\\]]");function DR(e,t,n){if(t.search($9)>=0)throw $p(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $m(...t.split("."))._internalPath}catch{throw $p(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $p(e,t,n,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Se(de.INVALID_ARGUMENT,c+e+u)}function nk(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(t,n,i,s,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new q9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(AR("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q9 extends ik{data(){return super.data()}}function AR(e,t){return typeof t=="string"?DR(e,t):t instanceof $m?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Se(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FR{}class Y9 extends FR{}function Q9(e,t,...n){let i=[];t instanceof FR&&i.push(t),i=i.concat(n),function(o){const a=o.filter(u=>u instanceof PR).length,c=o.filter(u=>u instanceof Km).length;if(a>1||a>0&&c>0)throw new Se(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Km extends Y9{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Km(t,n,i)}_apply(t){const n=this._parse(t);return sk(t._query,n),new yu(t.firestore,t.converter,hS(t._query,n))}_parse(t){const n=TR(t.firestore);return function(o,a,c,u,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Se(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){EF(p,f);const S=[];for(const E of p)S.push(RF(u,o,E));m={arrayValue:{values:S}}}else m=RF(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||EF(p,f),m=j9(c,a,p,f==="in"||f==="not-in");return pn.create(h,f,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function X9(e,t,n){const i=t,s=AR("where",e);return Km._create(s,i,n)}class PR extends FR{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new PR(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:us.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,o){let a=s;const c=o.getFlattenedFilters();for(const u of c)sk(a,u),a=hS(a,u)}(t._query,n),new yu(t.firestore,t.converter,hS(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function RF(e,t,n){if(typeof(n=Vo(n))=="string"){if(n==="")throw new Se(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t_(t)&&n.indexOf("/")!==-1)throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(It.fromString(n));if(!_e.isDocumentKey(i))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return GA(e,new _e(i))}if(n instanceof rn)return GA(e,n._key);throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(n)}.`)}function EF(e,t){if(!Array.isArray(e)||e.length===0)throw new Se(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sk(e,t){const n=function(s,o){for(const a of s)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Se(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Se(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Z9{convertValue(t,n="none"){switch(Hr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Gr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ve(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Kr(t,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(t){const n=t.fields?.[Vp].arrayValue?.values?.map(i=>sn(i.doubleValue));return new Us(n)}convertGeoPoint(t){return new zs(sn(t.latitude),sn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Om(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Sh(t));default:return null}}convertTimestamp(t){const n=Br(t);return new Ot(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=It.fromString(t);yt(R_(i),9688,{name:t});const s=new bh(i.get(1),i.get(3)),o=new _e(i.popFirst(5));return s.isEqual(n)||Bo(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(e,t,n){let i;return i=e?e.toFirestore(t):t,i}class Ud{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qa extends ik{constructor(t,n,i,s,o,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new lp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(AR("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:mn("string",Qa._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class lp extends Qa{data(t={}){return super.data(t)}}class Nc{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ud(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new lp(this._firestore,this._userDataWriter,i.key,i,new Ud(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new lp(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ud(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new lp(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ud(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:ej(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Nc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Xb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ej(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(e){e=$s(e,rn);const t=$s(e.firestore,wu);return _9(bR(t),e._key).then(n=>oj(t,e,n))}Nc._jsonSchemaVersion="firestore/querySnapshot/1.0",Nc._jsonSchema={type:mn("string",Nc._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};class ok extends Z9{constructor(t){super(),this.firestore=t}convertBytes(t){return new qi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function nj(e){e=$s(e,yu);const t=$s(e.firestore,wu),n=bR(t),i=new ok(t);return K9(e._query),k9(n,e._query).then(s=>new Nc(t,i,e,s))}function rk(e,t,n){e=$s(e,rn);const i=$s(e.firestore,wu),s=J9(e.converter,t);return MR(i,[z9(TR(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,ls.none())])}function ij(e,t,n,...i){e=$s(e,rn);const s=$s(e.firestore,wu),o=TR(s);let a;return a=typeof(t=Vo(t))=="string"||t instanceof $m?W9(o,"updateDoc",e._key,t,n,i):U9(o,"updateDoc",e._key,t),MR(s,[a.toMutation(e._key,ls.exists(!0))])}function sj(e){return MR($s(e.firestore,wu),[new oR(e._key,ls.none())])}function MR(e,t){return function(i,s){const o=new Fo;return i.asyncQueue.enqueueAndForget(async()=>S9(await I9(i),s,o)),o.promise}(bR(e),t)}function oj(e,t,n){const i=n.docs.get(t._key),s=new ok(e);return new Qa(e,s,t._key,i,new Ud(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){pu=s})(x5),kp(new vh("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),c=new wu(new z5(i.getProvider("auth-internal")),new j5(a,i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bh(h.options.projectId,f)}(a,s),a);return o={useFetchStreams:n,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Oc(DA,AA,t),Oc(DA,AA,"esm2020")})();const rj={apiKey:"AIzaSyCT-STfuZtyEbPftNfk7XYMapo-ICgSPsg",authDomain:"grandprix4-82e9c.firebaseapp.com",projectId:"grandprix4-82e9c",storageBucket:"grandprix4-82e9c.firebasestorage.app",messagingSenderId:"173027271796",appId:"1:173027271796:web:7d1cd9a80ddfd683ca5d21"},aj=xI(rj),Su=V9(aj),lj=async e=>{const t=ef(Su,"academias",e);return(await tj(t)).data()||null},cj=async(e,t)=>{await rk(ef(Su,"academias",t),{nombre:e,dni:t})},uj=async e=>{await rk(ef(Su,"deportistas",e.id),e)},dj=async e=>{await ij(ef(Su,"deportistas",e.id),{...e})},hj=async e=>(await nj(Q9(O9(Su,"deportistas"),X9("academia","==",e)))).docs.map(n=>n.data()),fj=async e=>{await sj(ef(Su,"deportistas",e))},Vn=[];for(let e=0;e<256;++e)Vn.push((e+256).toString(16).slice(1));function gj(e,t=0){return(Vn[e[t+0]]+Vn[e[t+1]]+Vn[e[t+2]]+Vn[e[t+3]]+"-"+Vn[e[t+4]]+Vn[e[t+5]]+"-"+Vn[e[t+6]]+Vn[e[t+7]]+"-"+Vn[e[t+8]]+Vn[e[t+9]]+"-"+Vn[e[t+10]]+Vn[e[t+11]]+Vn[e[t+12]]+Vn[e[t+13]]+Vn[e[t+14]]+Vn[e[t+15]]).toLowerCase()}let Wy;const pj=new Uint8Array(16);function mj(){if(!Wy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wy=crypto.getRandomValues.bind(crypto)}return Wy(pj)}const Cj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),TF={randomUUID:Cj};function vj(e,t,n){if(TF.randomUUID&&!e)return TF.randomUUID();e=e||{};const i=e.random??e.rng?.()??mj();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,gj(i)}const jy=({isComplete:e,text:t})=>B.jsxs(Ls.li,{layout:!0,className:"d-flex align-items-center mb-2",children:[B.jsx(Ap,{mode:"wait",children:B.jsx(Ls.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:e?B.jsx("i",{className:"bi bi-check-circle-fill text-success me-2",style:{fontSize:"1.2rem"}}):B.jsx("i",{className:"bi bi-x-circle-fill text-danger me-2",style:{fontSize:"1.2rem"}})},e?"check":"x")}),B.jsx("span",{className:e?"text-muted":"",style:{textDecoration:e?"line-through":"none"},children:t})]}),yj=()=>{const{addDeportista:e,currentDeportista:t,deportistas:n,editDeportista:i,academia:s}=vI(),{seniority:o,category:a,rank:c}=eU(),{setShowModal:u,editMode:h}=pl(),[f,p]=R.useState(t?n.find(A=>A.id==t):{nombre:"",apellido:"",edad:0,peso:0,sexo:"M",combates:0,academia:s,telefono:"",email:"",acudiente:""}),[m,w]=R.useState(!1),[S,E]=R.useState(!1),[T,F]=R.useState(!1),[P,M]=R.useState(!1),[U,z]=R.useState(!1);R.useEffect(()=>{const A=!isNaN(f.edad)&&f.edad>=18;w(A),A&&p(_=>({..._,acudiente:""}))},[f.edad]),R.useEffect(()=>{f.edad&&f.peso&&f.sexo&&c(f.edad,f.peso,f.combates,f.sexo)},[f.edad,f.peso,f.combates,f.sexo,c]),R.useEffect(()=>{p(t?n.find(A=>A.id==t):{nombre:"",apellido:"",edad:0,peso:0,sexo:"M",combates:0,academia:s,telefono:"",email:"",acudiente:""})},[t,n,s]),R.useEffect(()=>{const{nombre:A,apellido:_,edad:L,peso:O,combates:G,telefono:N,email:Re,acudiente:pe}=f,K=A.trim()!==""&&_.trim()!==""&&L>0&&O>0&&G>=0;F(K);const ie=/^\d{3} \d{3} \d{4}$/,se=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,we=!!N?.trim(),H=!!Re?.trim(),ee=we&&ie.test(N),le=H&&se.test(Re),ne=ee||le;M(ne);const Ee=!(L<18)||(pe?.trim()??"")!=="";z(Ee);const xe=!we||ie.test(N),ct=!H||se.test(Re);E(K&&ne&&Ee&&xe&&ct)},[f]);const j=A=>{const{name:_,value:L}=A.target;let O=L;if(!(_==="edad"&&L!==""&&(!/^\d+$/.test(L)||parseInt(L,10)>100))&&!(_==="combates"&&L!==""&&!/^\d+$/.test(L))&&!(_==="peso"&&L!==""&&!/^\d*\.?\d{0,2}$/.test(L))){if(_==="telefono"){const G=L.replace(/[^\d]/g,"");let N="";G.length>0&&(N=G.match(/.{1,3}/g)?.join(" ").substring(0,12)??"",G.length>6?N=`${G.substring(0,3)} ${G.substring(3,6)} ${G.substring(6,10)}`:G.length>3?N=`${G.substring(0,3)} ${G.substring(3,6)}`:N=G),O=N.trim()}p(G=>({...G,[_]:O}))}},I=()=>{const A={id:t||vj(),...f,categoria:a,seniority:o};h?(i(A),dj(A)):(e(A),uj(A)),u(!1)};return B.jsx(Ga,{className:"shadow-lg border-0",style:{borderRadius:"1rem",overflow:"hidden"},children:B.jsxs(Is,{className:"g-0",children:[B.jsxs(nn,{md:4,className:"p-4 bg-dark text-white d-flex flex-column justify-content-center",children:[B.jsxs("div",{className:"text-center",children:[B.jsx("div",{style:{fontSize:"6rem"},children:f.sexo==="F"?B.jsx("i",{className:"bi bi-person-standing-dress"}):B.jsx("i",{className:"bi bi-person-standing"})}),B.jsx("h3",{className:"mt-3 fw-bold",children:"Ficha del Deportista"}),B.jsx("p",{className:"text-white-50",children:"Completa el formulario para inscribir al atleta."})]}),B.jsxs("div",{className:"mt-4 text-center",children:[B.jsx(Ap,{children:o&&B.jsxs(Ls.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"mb-3",children:[B.jsx("span",{className:"text-uppercase fw-bold small",children:"Nivel"}),B.jsx("div",{className:"mt-1",children:B.jsx(_w,{bg:"success",className:"fs-6 px-3 py-2 shadow-sm",children:o})})]})}),B.jsx(Ap,{children:a&&B.jsxs(Ls.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,delay:.1},children:[B.jsx("span",{className:"text-uppercase fw-bold small",children:"Categoría"}),B.jsx("div",{className:"mt-1",children:B.jsx(_w,{bg:"info",text:"dark",className:"fs-6 px-3 py-2 shadow-sm",children:a})})]})})]})]}),B.jsx(nn,{md:8,children:B.jsx("div",{className:"p-sm-5 p-4",children:B.jsxs(Ge,{onSubmit:A=>A.preventDefault(),children:[B.jsx("h4",{className:"fw-bold",children:"Datos del deportista"}),B.jsx("hr",{className:"mt-0 mb-4"}),B.jsxs(Is,{className:"mb-3",children:[B.jsxs(Ge.Group,{as:nn,sm:"6",controlId:"formNombre",children:[B.jsx(Ge.Label,{children:"Nombre"}),B.jsx(Ge.Control,{type:"text",name:"nombre",value:f.nombre,onChange:j,placeholder:"Nombre del deportista"})]}),B.jsxs(Ge.Group,{as:nn,sm:"6",controlId:"formApellido",children:[B.jsx(Ge.Label,{children:"Apellido"}),B.jsx(Ge.Control,{type:"text",name:"apellido",value:f.apellido,onChange:j,placeholder:"Apellido del deportista"})]})]}),B.jsxs(Is,{className:"mb-3",children:[B.jsxs(Ge.Group,{as:nn,sm:"4",controlId:"formEdad",children:[B.jsx(Ge.Label,{children:"Edad"}),B.jsx(Ge.Control,{type:"number",name:"edad",value:f.edad,onChange:j,placeholder:"Edad",min:"0",max:"100"})]}),B.jsxs(Ge.Group,{as:nn,sm:"4",controlId:"formPeso",children:[B.jsx(Ge.Label,{children:"Peso (kg)"}),B.jsx(Ge.Control,{type:"text",name:"peso",value:f.peso,onChange:j,placeholder:"e.g. 65.50"})]}),B.jsxs(Ge.Group,{as:nn,sm:"4",controlId:"formCombates",children:[B.jsx(Ge.Label,{children:"Combates"}),B.jsx(Ge.Control,{type:"number",name:"combates",value:f.combates,onChange:j,placeholder:"Nº de combates",min:"0"})]})]}),B.jsxs(Is,{className:"mb-3",children:[B.jsxs(Ge.Group,{as:nn,sm:"6",controlId:"formAcademia",children:[B.jsx(Ge.Label,{children:"Academia"}),B.jsx(Ge.Control,{readOnly:!0,disabled:!0,type:"text",name:"academia",value:f.academia,onChange:j})]}),B.jsxs(Ge.Group,{as:nn,sm:"6",controlId:"formSexo",children:[B.jsx(Ge.Label,{children:"Sexo"}),B.jsxs(Ge.Select,{name:"sexo",value:f.sexo,onChange:j,children:[B.jsx("option",{value:"M",children:"MASCULINO"}),B.jsx("option",{value:"F",children:"FEMENINO"})]})]})]}),B.jsx("h4",{className:"fw-bold mt-5",children:"Datos de Contacto"}),B.jsx("hr",{className:"mt-0 mb-4"}),B.jsxs(Is,{className:"mb-3",children:[B.jsxs(Ge.Group,{as:nn,sm:"6",controlId:"formTelefono",children:[B.jsx(Ge.Label,{children:"Teléfono"}),B.jsx(Ge.Control,{type:"tel",name:"telefono",value:f.telefono,onChange:j,placeholder:"xxx xxx xxxx"})]}),B.jsxs(Ge.Group,{as:nn,sm:"6",controlId:"formEmail",children:[B.jsx(Ge.Label,{children:"Email"}),B.jsx(Ge.Control,{type:"email",name:"email",value:f.email,onChange:j,placeholder:"correo@ejemplo.com"})]})]}),B.jsx("fieldset",{disabled:m,children:B.jsxs(Ge.Group,{controlId:"formAcudiente",children:[B.jsx(Ge.Label,{children:"Nombre del acudiente"}),B.jsx(Ge.Control,{type:"text",name:"acudiente",value:f.acudiente,onChange:j,placeholder:m?"No requerido para mayores de edad":"Nombre completo del acudiente"}),m&&B.jsx(Ge.Text,{className:"text-muted",children:"No se requieren datos del acudiente para mayores de 18 años."})]})}),B.jsxs(Is,{className:"mt-5 align-items-center",children:[B.jsx(nn,{md:7,children:B.jsxs("ul",{className:"list-unstyled",children:[B.jsx(jy,{isComplete:T,text:"Datos del deportista"}),B.jsx(jy,{isComplete:P,text:"Información de contacto (teléfono o email)"}),B.jsx(jy,{isComplete:U,text:"Datos del acudiente (si es menor de edad)"})]})}),B.jsxs(nn,{md:5,className:"d-flex justify-content-end",children:[B.jsx(Xi,{onClick:()=>u(!1),variant:"light",type:"button",className:"me-3 px-4",children:"Cancelar"}),B.jsx(Xi,{onClick:I,variant:"success",type:"submit",disabled:!S,className:"px-4",children:"Guardar"})]})]})]})})})]})})};var al=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const i=t?this.allAsyncListeners:this.allSyncListeners;let s=i.get(e);return!s&&n&&(s=new Set,i.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const c=e.event;c instanceof Event&&(e.eventPath=c.composedPath())}const{frameworkOverrides:i}=this,s=c=>{const u=i?()=>i.wrapIncoming(c):c;t?this.dispatchAsync(u):u()},o=this.getListeners(n,t,!1);if((o?.size??0)>0){const c=new Set(o);for(const u of c)o?.has(u)&&s(()=>u(e))}const a=this.getGlobalListeners(t);if(a.size>0){const c=new Set(a);for(const u of c)s(()=>u(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function wj(e,t){return t}function ak(e){return e?.getLocaleTextFunc()??wj}function Sj(e,t,n,i){const s=t[n];return e.getLocaleTextFunc()(n,typeof s=="function"?s(i):s,i)}function Po(e){return e==null||e===""?null:e}function Ce(e){return e!=null&&e!==""}function Vt(e){return!Ce(e)}function ES(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function xh(e,t){const n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function bj(e,t,n=!1){const i=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function o(a,c){return a>c?1:a<c?-1:0}if(typeof e!="string"||!n)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var lk=new Set(["__proto__","constructor","prototype"]);function Rj(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(const n of Object.keys(e).filter(i=>!lk.has(i)))t(n,e[n])}}function oi(e,t,n=!0,i=!1){Ce(t)&&Rj(t,(s,o)=>{let a=e[s];a!==o&&(i&&a==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(a={},e[s]=a),xF(o)&&xF(a)&&!Array.isArray(a)?oi(a,o,n,i):(n||o!==void 0)&&(e[s]=o))})}function ih(e,t,n){if(!t||!e)return;if(!n)return e[t];const i=t.split(".");let s=e;for(let o=0;o<i.length;o++){if(s==null)return;s=s[i[o]]}return s}function xF(e){return typeof e=="object"&&e!==null}var IR=class La{static applyGlobalGridOptions(t){if(!La.gridOptions)return{...t};let n={};return oi(n,La.gridOptions,!0,!0),La.mergeStrategy==="deep"?oi(n,t,!0,!0):n={...n,...t},La.gridOptions.context&&(n.context=La.gridOptions.context),t.context&&(La.mergeStrategy==="deep"&&n.context&&oi(t.context,n.context,!0,!0),n.context=t.context),n}};IR.gridOptions=void 0;IR.mergeStrategy="shallow";var ck=IR;function Ej(e){return ck.gridOptions?.[e]}var uk={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1};function ds(e,t,n){n==null||typeof n=="string"&&n==""?dk(e,t):hs(e,t,n)}function hs(e,t,n){e.setAttribute(hk(t),n.toString())}function dk(e,t){e.removeAttribute(hk(t))}function hk(e){return`aria-${e}`}function ll(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Tj(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function xj(e){return e.getAttribute("aria-label")}function su(e,t){ds(e,"label",t)}function Dh(e,t){ds(e,"labelledby",t)}function fk(e,t){ds(e,"live",t)}function Dj(e,t){ds(e,"atomic",t)}function Aj(e,t){ds(e,"relevant",t)}function Fj(e,t){ds(e,"invalid",t)}function Pj(e,t){ds(e,"disabled",t)}function gk(e,t){ds(e,"hidden",t)}function TS(e,t){hs(e,"expanded",t)}function Mj(e,t){hs(e,"setsize",t)}function Ij(e,t){hs(e,"posinset",t)}function _j(e,t){hs(e,"rowcount",t)}function pk(e,t){hs(e,"rowindex",t)}function kj(e,t){hs(e,"rowspan",t)}function Lj(e,t){hs(e,"colcount",t)}function mk(e,t){hs(e,"colindex",t)}function Oj(e,t){hs(e,"colspan",t)}function Vj(e,t){hs(e,"sort",t)}function Nj(e){dk(e,"sort")}function xS(e,t){ds(e,"selected",t)}function Bj(e,t){ds(e,"controls",t)}function Gj(e,t){Bj(e,t.id),Dh(t,e.id)}function DF(e,t){ds(e,"owns",t)}function Ym(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var $y,qy,Ky,Yy,DS,AS,Qy;function vl(){return $y===void 0&&($y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),$y}function Ck(){return qy===void 0&&(qy=/(firefox)/i.test(navigator.userAgent)),qy}function vk(){return Ky===void 0&&(Ky=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Ky}function Xa(){return Yy===void 0&&(Yy=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Yy}function FS(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!Ck())?null:t.toString()}function Hj(){if(Qy!==void 0)return Qy;if(!document.body)return-1;let e=1e6;const t=Ck()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),Qy=e,e}function zj(){return AS==null&&yk(),AS}function yk(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(AS=n,DS=n===0)}function wk(){return DS==null&&yk(),DS}var Uj="[tabindex], input, select, button, textarea, [href]",Sk="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _R(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,Sk),o=Ks(e);return i&&!s&&o}function Ut(e,t,n={}){const{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||gk(e,!t)}function Wj(e,t,n={}){const{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||gk(e,!t)}function Ah(e,t){const n="disabled",i=t?o=>o.setAttribute(n,""):o=>o.removeAttribute(n);i(e);const s=e.querySelectorAll("input")??[];for(const o of s)i(o)}function Za(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function yl(e){const{height:t,width:n,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:o,borderLeftWidth:a,paddingTop:c,paddingRight:u,paddingBottom:h,paddingLeft:f,marginTop:p,marginRight:m,marginBottom:w,marginLeft:S,boxSizing:E}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(a||"0"),paddingTop:parseFloat(c||"0"),paddingRight:parseFloat(u||"0"),paddingBottom:parseFloat(h||"0"),paddingLeft:parseFloat(f||"0"),marginTop:parseFloat(p||"0"),marginRight:parseFloat(m||"0"),marginBottom:parseFloat(w||"0"),marginLeft:parseFloat(S||"0"),boxSizing:E}}function kR(e){const t=yl(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Fh(e){const t=yl(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function bk(e){const{height:t,marginBottom:n,marginTop:i}=yl(e);return Math.floor(t+n+i)}function qp(e){const{width:t,marginLeft:n,marginRight:i}=yl(e);return Math.floor(t+n+i)}function Rk(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:s,borderBottomWidth:o}=yl(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(s||0),bottom:t.bottom+(o||0)}}function Kp(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function Yp(e,t,n){n&&(t*=-1),e.scrollLeft=t}function Ai(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Ho(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ek(e){return!!e.offsetParent}function Ks(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!Ek(e)||window.getComputedStyle(e).visibility!=="visible")}function LR(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function cp(e){return()=>{const t=e();return t?Tk(t)||xk(t):!0}}function Tk(e){return e.clientWidth<e.scrollWidth}function xk(e){return e.clientHeight<e.scrollHeight}function Qp(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Ws(e,t)}function Ws(e,t){t=OR(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function sh(e,t){t=OR(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function OR(e){return typeof e=="number"?`${e}px`:e}function VR(e){return e instanceof Node||e instanceof HTMLElement}function Ti(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function Wo(e,t,n){const s=Ok(e).ResizeObserver,o=s?new s(n):null;return o?.observe(t),()=>o?.disconnect()}function jo(e,t){const n=Ok(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var Dk="data-ref",Xy;function AF(){return Xy??(Xy=document.createTextNode(" ")),Xy.cloneNode()}function an(e){const{attrs:t,children:n,cls:i,ref:s,role:o,tag:a}=e,c=document.createElement(a);if(i&&(c.className=i),s&&c.setAttribute(Dk,s),o&&c.setAttribute("role",o),t)for(const u of Object.keys(t))c.setAttribute(u,t[u]);if(n)if(typeof n=="string")c.textContent=n;else{let u=!0;for(const h of n)h&&(typeof h=="string"?(c.appendChild(document.createTextNode(h)),u=!1):typeof h=="function"?c.appendChild(h()):(u&&(c.appendChild(AF()),u=!1),c.append(an(h)),c.appendChild(AF())))}return c}var FF={};function NR(e,t){FF[t]||(e(),FF[t]=!0)}function cl(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function oh(e,...t){NR(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Bc(e,...t){NR(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var jj={pending:!1,funcs:[]},$j={pending:!1,funcs:[]};function PS(e,t="setTimeout",n){const i=t==="raf"?$j:jj;if(i.funcs.push(e),i.pending)return;i.pending=!0;const s=()=>{const o=i.funcs.slice();i.funcs.length=0,i.pending=!1,o.forEach(a=>a())};t==="raf"?jo(n,s):window.setTimeout(s,0)}function Hn(e,t,n){let i;return function(...s){const o=this;window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(o,s)},n)}}function PF(e,t){let n=0;return function(...i){const s=this,o=Date.now();o-n<t||(n=o,e.apply(s,i))}}function qj(e,t,n=100,i){const s=Date.now();let o=null,a=!1;const c=()=>{const u=Date.now()-s>n;(e()||u)&&(t(),a=!0,o!=null&&(window.clearInterval(o),o=null))};c(),a||(o=window.setInterval(c,10))}var Ak="https://www.ag-grid.com",ye="34.1.0",MF=2e3,IF=100,Fk="_version_",Pk=null,Gc=`${Ak}/javascript-data-grid`;function Kj(e){Pk=e}function Yj(e){Gc=e}function Mk(e,t,n){return Pk?.getConsoleMessage(e,t)??[Jj(e,t,n)]}function BR(e,t,n,i){e(`error #${t}`,...Mk(t,n,i))}function Qj(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function Xj(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=Qj(e)),t}function Xp(e){return e===void 0?"undefined":e===null?"null":e}function MS(e,t){return`${e}?${t.toString()}`}function Zj(e,t,n){const i=Array.from(t.entries()).sort((o,a)=>a[1].length-o[1].length);let s=MS(e,t);for(const[o,a]of i){if(o===Fk)continue;const c=s.length-n;if(c<=0)break;const u="...",h=c+u.length,f=a.length-h>IF?a.slice(0,a.length-h)+u:a.slice(0,IF)+u;t.set(o,f),s=MS(e,t)}return s}function Ik(e,t){const n=new URLSearchParams;if(n.append(Fk,ye),t)for(const o of Object.keys(t))n.append(o,Xj(t[o]));const i=`${Gc}/errors/${e}`,s=MS(i,n);return s.length<=MF?s:Zj(i,n,MF)}var Jj=(e,t,n)=>{const i=Ik(e,t);return`${n?n+` 
`:""}Visit ${i}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function ge(...e){BR(oh,e[0],e[1])}function vt(...e){BR(Bc,e[0],e[1])}function Wd(e,t,n){BR(Bc,e,t,n)}function e7(e,t){const n=t[0];return`error #${n} `+Mk(n,t[1],e).join(" ")}function js(...e){return e7(void 0,e)}function _k(e,t){return e.get("rowModelType")===t}function gn(e,t){return _k(e,"clientSide")}function wl(e,t){return _k(e,"serverSide")}function zn(e,t){return e.get("domLayout")===t}function Ja(e){return Jp(e)!==void 0}function kk(e){return typeof e.get("getRowHeight")=="function"}function t7(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Wr(e,t,n=!1,i){const{gos:s,environment:o}=e;if(i==null&&(i=o.getDefaultRowHeight()),kk(s)){if(n)return{height:i,estimated:!0};const u={node:t,data:t.data},h=s.getCallback("getRowHeight")(u);if(IS(h))return h===0&&ge(23),{height:Math.max(1,h),estimated:!1}}if(t.detail&&s.get("masterDetail"))return n7(s);const a=s.get("rowHeight");return{height:a&&IS(a)?a:i,estimated:!1}}function n7(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return IS(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function el(e){const{environment:t,gos:n}=e,i=n.get("rowHeight");if(!i||Vt(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(ge(24),t.getDefaultRowHeight())}function IS(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Lk(e,t,n){const i=t[e.getDomDataKey()];return i?i[n]:void 0}function ul(e,t,n,i){const s=e.getDomDataKey();let o=t[s];Vt(o)&&(o={},t[s]=o),o[n]=i}function Mn(e){const{gos:t,eGridDiv:n}=e;let i=null;const s=t.get("getDocument");return s&&Ce(s)?i=s():n&&(i=n.ownerDocument),i&&Ce(i)?i:document}function Ok(e){return Mn(e).defaultView||window}function Ph(e){return e.eGridDiv.getRootNode()}function $t(e){return Ph(e).activeElement}function GR(e){let t=null,n=null;try{t=Mn(e).fullscreenElement}catch{}finally{t||(t=Ph(e));const i=t.querySelector("body");i?n=i:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function i7(e){return GR(e)?.clientWidth??(window.innerWidth||-1)}function s7(e){return GR(e)?.clientHeight??(window.innerHeight||-1)}function o7(e,t,n){const s=e.getBoundingClientRect().height,o=i7(n)-2,a=s7(n)-2;if(!e.offsetParent)return;const u=Rk(e.offsetParent),{clientY:h,clientX:f}=t;let p=h-u.top-s/2,m=f-u.left-10;const w=Mn(n),S=w.defaultView||window,E=S.pageYOffset||w.documentElement.scrollTop,T=S.pageXOffset||w.documentElement.scrollLeft;o>0&&m+e.clientWidth>o+T&&(m=o+T-e.clientWidth),m<0&&(m=0),a>0&&p+e.clientHeight>a+E&&(p=a+E-e.clientHeight),p<0&&(p=0),e.style.left=`${m}px`,e.style.top=`${p}px`}function Vk(e){const t=$t(e);return t===null||t===Mn(e).body}function Hc(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function Nk(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||zn(e,"print"))}function _s(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function _S(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function Bk(e){return e.get("grandTotalRow")}function Gk(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Hk(e,t,n){return!!t.group&&!t.footer&&Gk(e,n)}function ou(e){const t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(NR(()=>ge(25,{id:i}),"getRowIdString"),i=String(i)),i}}function r7(e,t){const n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function a7(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function zc(e){return e?.checkboxes??!0}function up(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function Zp(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function Zy(e){return e?.hideDisabledCheckboxes??!1}function l7(e){return typeof e.get("rowSelection")!="string"}function jr(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function zk(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function c7(e){const t=zk(e);return t===!0||t==="enableSelection"}function u7(e){const t=zk(e);return t===!0||t==="enableDeselection"}function kS(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function Jp(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function em(e){return Jp(e)==="multiRow"}function d7(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function tm(e){const t=e.get("rowSelection");if(typeof t=="string"){const n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function Uk(e,t=!0){const n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function Mh(e){const t=tm(e);return t==="descendants"||t==="filteredDescendants"}function _F(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function h7(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function xi(e){return e.get("columnMenu")==="legacy"}function f7(e){return!xi(e)}function g7(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function p7(e,t,n){typeof e!="object"&&(e={});const i={...e};return n.forEach(s=>{const o=t[s];typeof o<"u"&&(i[s]=o)}),i}function m7(e,t){if(!e)return;const n={};let i=!1;if(Object.keys(e).forEach(a=>{n[a]=e[a],i=!0}),!i)return;const s={type:"gridOptionsChanged",options:n};t.dispatchEvent(s);const o={type:"componentStateChanged",...n};t.dispatchEvent(o)}function Pe(e,t){return e.addGridCommonParams(t)}function Wk(e){return e.get("treeData")?e.get("treeDataParentIdField")?"treeSelfRef":e.get("treeDataChildrenField")?"treeNested":"treePath":"group"}function dp(e,t){return e[t]??e.gridOptions?.[t]??Ej(t)??uk[t]}var jk="__ag_Grid_Stop_Propagation",C7=["touchstart","touchend","touchmove","touchcancel","scroll"],v7=["wheel"],Jy={};function dl(e){e[jk]=!0}function Mo(e){return e[jk]===!0}var $k=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof Jy[n]=="boolean")return Jy[n];const i=document.createElement(e[n]||"div");return n="on"+n,Jy[n]=n in i}})();function qk(e,t,n){let i=t;for(;i;){const s=Lk(e,i,n);if(s)return s;i=i.parentElement}return null}function y7(e,t){return!t||!e?!1:S7(t).indexOf(e)>=0}function w7(e){const t=[];let n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function S7(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():w7(t)}function b7(e,t,n,i){const s=Kk(n);let o;s!=null&&(o={passive:s}),e&&e.addEventListener&&e.addEventListener(t,n,i,o)}var Kk=e=>{const t=C7.includes(e),n=v7.includes(e);if(t)return!0;if(n)return!1},oe=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new al),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const i of Object.keys(t)){const s=t[i];s&&n.push(this._setupListener(e,i,s))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let i;return R7(e)?(e.__addEventListener(t,n),i=()=>(e.__removeEventListener(t,n),null)):(e instanceof HTMLElement?b7(this.beans.frameworkOverrides,e,t,n):e.addEventListener(t,n),i=()=>(e.removeEventListener(t,n),null)),this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const i=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}const o={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(o)};e.forEach(s=>this.setupGridOptionListener(s,i))}getLocaleTextFunc(){return ak(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function R7(e){return e.__addEventListener!==void 0}var E7=/[&<>"']/g,T7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bu(e){return e?.toString().toString()??null}function hp(e){return bu(e)?.replace(E7,t=>T7[t])??null}var x7={resizable:!0,sortable:!0},D7=0;function Yk(){return D7++}function $r(e){return e instanceof Sl}var Sl=class extends oe{constructor(e,t,n,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=Yk(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new al,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=hp(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:i}}=this;t?.initCol(this);const s=e.hide;s!==void 0?this.visible=!s:this.visible=!e.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(e,t,n){const i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=Ce(t)&&t.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Ce(n)&&n.indexOf(".")>=0&&!i}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,n.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const n=e.width,i=e.initialWidth;return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return Pe(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??x7[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return Pe(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Vt(this.sort)}isSorting(){return Ce(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return ge(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Pe(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Vt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(Vt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,n){const i=this.createColumnEvent(e,t);n&&oi(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Kn(e){return e instanceof fp}var fp=class extends oe{constructor(e,t,n,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=Yk(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)$r(t)?e(t):Kn(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){this.children&&this.children.forEach(t=>{$r(t)?e.push(t):Kn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const i=this.findChildrenRemovingPadding();for(let o=0,a=i.length;o<a;o++){const c=i[o];if(!c.isVisible())continue;const u=c.getColumnGroupShow();u==="open"?(e=!0,n=!0):u==="closed"?(t=!0,n=!0):(e=!0,t=!0)}const s=e&&t&&n;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{n.forEach(i=>{Kn(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},A7={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function kF(e,t,n){const i={},s=e.gos;return Object.assign(i,s.get("defaultColGroupDef")),Object.assign(i,t),s.validateColDef(i,n),i}var F7=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=ES(e);let n=0;for(;;){let i=e??t;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){const s=String(i);return e&&n>0&&ge(273,{providedId:e,usedId:s}),this.existingKeys[s]=!0,s}n++}}},nm=Object.freeze([]);function Ct(e){if(e?.length)return e[e.length-1]}function bl(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,s)=>n?n(i,t[s]):t[s]===i)}function Hg(e,t){if(e)for(const n of e)t(n)}function Ji(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function LF(e,t,n){for(let i=0;i<t.length;i++)Ji(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}var Qm="ag-Grid-AutoColumn",Qk="ag-Grid-SelectionColumn",Xk="ag-Grid-RowNumbersColumn";function Zk(e){const t=[],n=i=>{for(let s=0;s<i.length;s++){const o=i[s];$r(o)?t.push(o):Kn(o)&&n(o.getChildren())}};return n(e),t}function xo(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function im(e,t,n){const i={};if(!t)return;Io(null,t,o=>{i[o.getInstanceId()]=o}),n&&Io(null,n,o=>{i[o.getInstanceId()]=null});const s=Object.values(i).filter(o=>o!=null);e.context.destroyBeans(s)}function HR(e){return e.getId().startsWith(Qm)}function Qr(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(Qk)??!1}function kr(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(Xk)??!1}function P7(e){return Qr(e)||kr(e)}function sm(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function M7(e,t){return bl(e,t,(n,i)=>n.getColId()===i.getColId())}function I7(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function Uc(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function Jk(e,t){const n=e===t,i=e.getColDef()===t,s=e.getColId()==t;return n||i||s}var _7=(e,t)=>(n,i)=>{const s={value1:void 0,value2:void 0};let o=!1;return e&&(e[n]!==void 0&&(s.value1=e[n],o=!0),Ce(i)&&e[i]!==void 0&&(s.value2=e[i],o=!0)),!o&&t&&(t[n]!==void 0&&(s.value1=t[n]),Ce(i)&&t[i]!==void 0&&(s.value2=t[i])),s};function k7(e,t=null,n,i,s){const o=new F7,{existingCols:a,existingGroups:c,existingColKeys:u}=L7(i);o.addExistingKeys(u);const h=eL(e,t,0,n,a,o,c,s),{colGroupSvc:f}=e,p=f?.findMaxDepth(h,0)??0,m=f?f.balanceColumnTree(h,0,p,o):h;return Io(null,m,(S,E)=>{Kn(S)&&S.setupExpandable(),S.originalParent=E}),{columnTree:m,treeDepth:p}}function L7(e){const t=[],n=[],i=[];return e&&Io(null,e,s=>{if(Kn(s)){const o=s;n.push(o)}else{const o=s;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}function eL(e,t,n,i,s,o,a,c){if(!t)return[];const{colGroupSvc:u}=e,h=new Array(t.length);for(let f=0;f<h.length;f++){const p=t[f];u&&H7(p)?h[f]=u.createProvidedColumnGroup(i,p,n,s,o,a,c):h[f]=O7(e,i,p,s,o,c)}return h}function O7(e,t,n,i,s,o){const a=N7(n,i);a&&i?.splice(a.idx,1);let c=a?.column;if(c){const u=LS(e,n,c.getColId());c.setColDef(u,n,o),V7(e,c,u,o)}else{const u=s.getUniqueKey(n.colId,n.field),h=LS(e,n,u);c=new Sl(h,n,u,t),e.context.createBean(c)}return e.dataTypeSvc?.addColumnListeners(c),c}function tL(e,t,n,i,s,o,a,c){const{sortSvc:u,pinnedCols:h,colFlex:f}=e;n!==void 0&&t.setVisible(!n,c),u&&(u.updateColSort(t,i,c),s!==void 0&&u.setColSortIndex(t,s)),o!==void 0&&h?.setColPinned(t,o),a!==void 0&&f?.setColFlex(t,a)}function V7(e,t,n,i){tL(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);const s=t.getFlex();if(!(s!=null&&s>0))if(n.width!=null)t.setActualWidth(n.width,i);else{const o=t.getActualWidth();t.setActualWidth(o,i)}}function N7(e,t){if(t)for(let n=0;n<t.length;n++){const i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}function LS(e,t,n,i){const{gos:s,dataTypeSvc:o}=e,a={},c=s.get("defaultColDef");oi(a,c,!1,!0);const u=B7(e,a,t,n);u&&G7(e,u,a);const h=a.cellDataType;oi(a,t,!1,!0),h!==void 0&&(a.cellDataType=h);const f=s.get("autoGroupColumnDef"),p=_s(s);return t.rowGroup&&f&&p&&oi(a,{sort:f.sort,initialSort:f.initialSort},!1,!0),o&&(o.postProcess(a),o.validateColDef(a)),s.validateColDef(a,n,i),a}function B7(e,t,n,i){const s=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,i),o=n.type??s??t.type;return t.type=o,o?sm(o):void 0}function G7(e,t,n){if(!t.length)return;const i=Object.assign({},A7),s=e.gos.get("columnTypes")||{};for(const o of Object.keys(s)){const a=s[o];o in i?ge(34,{key:o}):(a.type&&ge(35),i[o]=a)}t.forEach(o=>{const a=i[o.trim()];a?oi(n,a,!1,!0):ge(36,{t:o})})}function H7(e){return e.children!==void 0}function Io(e,t,n){if(t)for(let i=0;i<t.length;i++){const s=t[i];Kn(s)&&Io(s,s.getChildren(),n),n(s,e)}}function nL(e,t){const n=[],i=[],s=[];return e.forEach(a=>{const c=a.getColDef().lockPosition;c==="right"?s.push(a):c==="left"||c===!0?n.push(a):i.push(a)}),t.get("enableRtl")?[...s,...i,...n]:[...n,...i,...s]}function iL(e,t){let n=!0;return Io(null,t,i=>{if(!Kn(i))return;const s=i,o=s.getColGroupDef();if(!(o&&o.marryChildren))return;const c=[];s.getLeafColumns().forEach(m=>{const w=e.indexOf(m);c.push(w)});const u=Math.max.apply(Math,c),h=Math.min.apply(Math,c),f=u-h,p=s.getLeafColumns().length-1;f>p&&(n=!1)}),n}function sL(e,t){if(!e||e.length==0)return;const n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}function oL(e,t,n){if(!t.length)return;const i=t.length===1?t[0]:null,s=sL(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:s??null,columns:t,column:i,source:n})}function z7(e,t,n){if(!t.length)return;const i=t.length===1?t[0]:null,s=sL(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:s,columns:t,column:i,source:n})}function U7(e,t,n,i){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function ru(e,t,n,i,s=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:n,source:i})}function cs(e,t,n){const{colModel:i,rowGroupColsSvc:s,pivotColsSvc:o,autoColSvc:a,selectionColSvc:c,colAnimation:u,visibleCols:h,pivotResultCols:f,environment:p,valueColsSvc:m,eventSvc:w,gos:S}=e,E=i.getColDefCols()??[],T=c?.getColumns();if(!E?.length&&!T?.length)return!1;if(t?.state&&!t.state.forEach)return ge(32),!1;const F=(z,j,I,A,_)=>{if(!z)return;const L=_7(j,t.defaultState),O=L("flex").value1;if(tL(e,z,L("hide").value1,L("sort").value1,L("sortIndex").value1,L("pinned").value1,O,n),O==null){const G=L("width").value1;if(G!=null){const N=z.getColDef().minWidth??p.getDefaultColumnMinWidth();N!=null&&G>=N&&z.setActualWidth(G,n)}}_||!z.isPrimary()||(m?.syncColumnWithState(z,n,L),s?.syncColumnWithState(z,n,L,I),o?.syncColumnWithState(z,n,L,A))},P=(z,j,I)=>{const A=rL(e,n),_=j.slice(),L={},O={},G=[],N=[],Re=[];let pe=0;const K=s?.columns.slice()??[],ie=o?.columns.slice()??[];z.forEach(H=>{const ee=H.colId;if(ee.startsWith(Qm)){G.push(H),Re.push(H);return}if(Qr(ee)){N.push(H),Re.push(H);return}const ne=I(ee);ne?(F(ne,H,L,O,!1),Ji(_,ne)):(Re.push(H),pe+=1)});const se=H=>F(H,null,L,O,!1);_.forEach(se),s?.sortColumns(OF.bind(s,L,K)),o?.sortColumns(OF.bind(o,O,ie)),i.refreshCols(!1);const we=(H,ee,le=[])=>{ee.forEach(ne=>{const me=H(ne.colId);Ji(le,me),F(me,ne,null,null,!0)}),le.forEach(se)};return we(H=>a?.getColumn(H)??null,G,a?.getColumns()?.slice()),we(H=>c?.getColumn(H)??null,N,c?.getColumns()?.slice()),j7(t,i,S),h.refresh(n),w.dispatchEvent({type:"columnEverythingChanged",source:n}),A(),{unmatchedAndAutoStates:Re,unmatchedCount:pe}};u?.start();let{unmatchedAndAutoStates:M,unmatchedCount:U}=P(t.state||[],E,z=>i.getColDefCol(z));if(M.length>0||Ce(t.defaultState)){const z=f?.getPivotResultCols()?.list??[];U=P(M,z,j=>f?.getPivotResultCol(j)??null).unmatchedCount}return u?.finish(),U===0}function W7(e,t){const{colModel:n,autoColSvc:i,selectionColSvc:s,eventSvc:o,gos:a}=e,c=n.getColDefCols();if(!c?.length)return;const u=n.getColDefColTree(),h=Zk(u),f=[];let p=1e3,m=1e3;const w=P=>{const M=aL(P);Vt(M.rowGroupIndex)&&M.rowGroup&&(M.rowGroupIndex=p++),Vt(M.pivotIndex)&&M.pivot&&(M.pivotIndex=m++),f.push(M)};i?.getColumns()?.forEach(w),s?.getColumns()?.forEach(w),h?.forEach(w),cs(e,{state:f},t);const S=i?.getColumns()??[],F=[...s?.getColumns()??[],...S,...c].map(P=>({colId:P.colId}));cs(e,{state:F,applyOrder:!0},t),o.dispatchEvent(Pe(a,{type:"columnsReset",source:t}))}function rL(e,t){const{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:s,colModel:o,sortSvc:a,eventSvc:c}=e,u={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:s?.columns.slice()??[]},h=om(e),f={};return h.forEach(p=>{f[p.colId]=p}),()=>{const p=(j,I,A,_)=>{const L=I.map(_),O=A.map(_);if(bl(L,O))return;const N=new Set(I);A.forEach(pe=>{N.delete(pe)||N.add(pe)});const Re=[...N];c.dispatchEvent({type:j,columns:Re,column:Re.length===1?Re[0]:null,source:t})},m=j=>{const I=[];return o.forAllCols(A=>{const _=f[A.getColId()];_&&j(_,A)&&I.push(A)}),I},w=j=>j.getColId();p("columnRowGroupChanged",u.rowGroupColumns,n?.columns??[],w),p("columnPivotChanged",u.pivotColumns,i?.columns??[],w);const E=m((j,I)=>{const A=j.aggFunc!=null,_=A!=I.isValueActive(),L=A&&j.aggFunc!=I.getAggFunc();return _||L});E.length>0&&U7(c,"columnValueChanged",E,t),ru(c,m((j,I)=>j.width!=I.getActualWidth()),!0,t),oL(c,m((j,I)=>j.pinned!=I.getPinned()),t),z7(c,m((j,I)=>j.hide==I.isVisible()),t);const U=m((j,I)=>j.sort!=I.getSort()||j.sortIndex!=I.getSortIndex());U.length>0&&a?.dispatchSortChangedEvents(t,U);const z=om(e);q7(h,z,t,o,c)}}function om(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:i}=e,s=t.getColDefCols();if(Vt(s)||!t.isAlive())return[];const o=n?.columns,a=i?.columns,c=[],u=f=>{const p=f.isRowGroupActive()&&o?o.indexOf(f):null,m=f.isPivotActive()&&a?a.indexOf(f):null,w=f.isValueActive()?f.getAggFunc():null,S=f.getSort()!=null?f.getSort():null,E=f.getSortIndex()!=null?f.getSortIndex():null;c.push({colId:f.getColId(),width:f.getActualWidth(),hide:!f.isVisible(),pinned:f.getPinned(),sort:S,sortIndex:E,aggFunc:w,rowGroup:f.isRowGroupActive(),rowGroupIndex:p,pivot:f.isPivotActive(),pivotIndex:m,flex:f.getFlex()??null})};t.forAllCols(f=>u(f));const h=new Map(t.getCols().map((f,p)=>[f.getColId(),p]));return c.sort((f,p)=>{const m=h.has(f.colId)?h.get(f.colId):-1,w=h.has(p.colId)?h.get(p.colId):-1;return m-w}),c}function aL(e){const t=(S,E)=>S??E??null,n=e.getColDef(),i=t(n.sort,n.initialSort),s=t(n.sortIndex,n.initialSortIndex),o=t(n.hide,n.initialHide),a=t(n.pinned,n.initialPinned),c=t(n.width,n.initialWidth),u=t(n.flex,n.initialFlex);let h=t(n.rowGroupIndex,n.initialRowGroupIndex),f=t(n.rowGroup,n.initialRowGroup);h==null&&(f==null||f==!1)&&(h=null,f=null);let p=t(n.pivotIndex,n.initialPivotIndex),m=t(n.pivot,n.initialPivot);p==null&&(m==null||m==!1)&&(p=null,m=null);const w=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:o,pinned:a,width:c,flex:u,rowGroup:f,rowGroupIndex:h,pivot:m,pivotIndex:p,aggFunc:w}}function j7(e,t,n){if(!e.applyOrder||!e.state)return;const i=[];e.state.forEach(s=>{s.colId!=null&&i.push(s.colId)}),$7(t.cols,i,t,n)}function $7(e,t,n,i){if(e==null)return;let s=[];const o={};t.forEach(c=>{if(o[c])return;const u=e.map[c];u&&(s.push(u),o[c]=!0)});let a=0;if(e.list.forEach(c=>{const u=c.getColId();if(o[u]!=null)return;u.startsWith(Qm)?s.splice(a++,0,c):s.push(c)}),s=nL(s,i),!iL(s,n.getColTree())){ge(39);return}e.list=s}function q7(e,t,n,i,s){const o={};t.forEach(f=>o[f.colId]=f);const a={};e.forEach(f=>{o[f.colId]&&(a[f.colId]=!0)});const c=e.filter(f=>a[f.colId]),u=t.filter(f=>a[f.colId]),h=[];u.forEach((f,p)=>{const m=c&&c[p];if(m&&m.colId!==f.colId){const w=i.getCol(m.colId);w&&h.push(w)}}),h.length&&s.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,finished:!0,source:n})}var OF=(e,t,n,i)=>{const s=e[n.getId()],o=e[i.getId()],a=s!=null,c=o!=null;if(a&&c)return s-o;if(a)return-1;if(c)return 1;const u=t.indexOf(n),h=t.indexOf(i),f=u>=0,p=h>=0;return f&&p?u-h:f?-1:1},K7=class extends oe{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Uc(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Uc(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:s,pivotColsSvc:o,valueColsSvc:a,visibleCols:c,eventSvc:u}=t,h=this.colDefs?rL(t,e):void 0;n?.expire();const f=this.colDefCols?.list,p=this.colDefCols?.tree,m=k7(t,this.colDefs,!0,p,e);im(t,this.colDefCols?.tree,m.columnTree);const w=m.columnTree,S=m.treeDepth,E=Zk(w),T={};E.forEach(F=>T[F.getId()]=F),this.colDefCols={tree:w,treeDepth:S,list:E,map:T},s?.extractCols(e,f),o?.extractCols(e,f),a?.extractCols(e,f),this.ready=!0,this.refreshCols(!0),c.refresh(e),u.dispatchEvent({type:"columnEverythingChanged",source:e}),h&&(this.changeEventsDispatching=!0,h(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:i,rowNumbersSvc:s,quickFilter:o,pivotResultCols:a,showRowGroupCols:c,rowAutoHeight:u,visibleCols:h,colViewport:f,eventSvc:p}=this.beans,m=this.selectCols(a,this.colDefCols);this.createColumnsForService([n,i,s],m);const w=t7(this.gos,this.showingPivotResult);(!e||w)&&this.restoreColOrder(m),this.positionLockedCols(m),c?.refresh(),o?.refreshCols(),this.setColSpanActive(),u?.setAutoHeightActive(m),h.clear(),f.clear(),!bl(t,this.cols.tree)&&p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const n of e)n&&(n.createColumns(t,i=>{this.lastOrder=i(this.lastOrder),this.lastPivotOrder=i(this.lastPivotOrder)}),n.addColumns(t))}selectCols(e,t){const n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;const{map:i,list:s,tree:o,treeDepth:a}=n??t;return this.cols={list:s.slice(),map:{...i},tree:o.slice(),treeDepth:a},n&&(n.list.some(u=>this.cols?.map[u.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:n}=this.beans,i=this.isPivotMode()&&!this.showingPivotResult,s=t?.isSelectionColumnEnabled(),o=n.get("rowNumbers"),a=e?.columns;return this.cols.list.filter(u=>{const h=HR(u);if(i){const f=a?.includes(u);return h||f||s&&Qr(u)||o&&kr(u)}else return h||u.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){cs(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=t.filter(p=>e.map[p.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}const i=p=>{const m=p.getOriginalParent();return m?m.getChildren().length>1?!0:i(m):!1};if(!n.some(p=>i(p))){const p=new Set(n);for(const m of e.list)p.has(m)||n.push(m);e.list=n;return}const s=new Map;for(let p=0;p<n.length;p++){const m=n[p];s.set(m,p)}const o=e.list.filter(p=>!s.has(p));if(o.length===0){e.list=n;return}const a=(p,m)=>{const w=m?m.getOriginalParent():p.getOriginalParent();if(!w)return null;let S=null,E=null;for(const T of w.getChildren())if(!(T===m||T===p)){if(T instanceof Sl){const F=s.get(T);if(F==null)continue;(S==null||S<F)&&(S=F,E=T);continue}T.forEachLeafColumn(F=>{const P=s.get(F);P!=null&&(S==null||S<P)&&(S=P,E=F)})}return E??a(p,w)},c=[],u=new Map;for(const p of o){const m=a(p,null);if(m==null){c.push(p);continue}const w=u.get(m);w===void 0?u.set(m,p):Array.isArray(w)?w.push(p):u.set(m,[w,p])}const h=new Array(e.list.length);let f=h.length-1;for(let p=c.length-1;p>=0;p--)h[f--]=c[p];for(let p=n.length-1;p>=0;p--){const m=n[p],w=u.get(m);if(w)if(Array.isArray(w))for(let S=w.length-1;S>=0;S--){const E=w[S];h[f--]=E}else h[f--]=w;h[f--]=m}e.list=h}positionLockedCols(e){e.list=nL(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);const{visibleCols:n,eventSvc:i}=this.beans;n.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=Uc(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){im(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){const{pivotResultCols:t,autoColSvc:n,selectionColSvc:i}=this.beans;Hg(this.colDefCols?.list,e),Hg(n?.columns?.list,e),Hg(i?.columns?.list,e),Hg(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;const{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let s=0;s<i.length;s++)if(Jk(i[s],e))return i[s];return this.beans.autoColSvc?.getColumn(e)??this.beans.selectionColSvc?.getColumn(e)??null}},lL=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},Ru=class extends oe{};function nf(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var sf=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.toggleCss(s,t));return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},Y7=0,De=null,At=class extends oe{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Y7++,this.cssManager=new sf(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach(t=>this.beans.environment.addGlobalCSS(t,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(Dk):null}applyElementsToComponent(e,t,n,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const s=this[t];if(s===De)this[t]=i??e;else{const o=n&&n[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(e,t){const n=[];for(const i of e.childNodes??[])n.push(i);n.forEach(i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,o=>{const a=o.getGui();if(a)for(const c of i.attributes??[])a.setAttribute(c.name,c.value)},t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const o=Array.prototype.slice.call(i.children);s.addItems(o)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)})}createComponentFromElement(e,t,n){const i=e.nodeName,s=this.getDataRefAttribute(e),o=i.indexOf("AG-")===0,a=o?this.componentSelectors.get(i):null;let c=null;if(a){const u=n&&s?n[s]:void 0;c=new a.component(u),c.setParentComponent(this),this.createBean(c,null,t)}else if(o)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,s,n,c),c}swapComponentForNode(e,t,n){const i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(n=>n.setAttribute("tabindex",t.toString()))}setTemplate(e,t,n){let i;typeof e=="string"||e==null?i=LR(e):i=an(e),this.setTemplateFromElement(i,t,n)}setTemplateFromElement(e,t,n,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let s=0;s<t.length;s++){const o=t[s];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),VR(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){const{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(e,t){const{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;Wj(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:n}=t;Ut(this.eGui,e,{skipAriaHidden:n});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}};function cL(e){return typeof e=="object"&&!!e.component}var it=class jd{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new jd(n=>{let i=t.length;const s=new Array(i);t.forEach((o,a)=>{o.then(c=>{s[a]=c,i--,i===0&&n(s)})})}):jd.resolve()}static resolve(t=null){return new jd(n=>n(t))}then(t){return new jd(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}};function Q7(e){return e?e.prototype&&"getGui"in e.prototype:!1}function uL(e,t,n,i){const{name:s}=n;let o,a,c,u,h,f;if(t){const p=t,m=p[s+"Selector"],w=m?m(i):null,S=E=>{typeof E=="string"?o=E:E!=null&&E!==!0&&(e.isFrameworkComponent(E)?c=E:a=E)};w?(S(w.component),u=w.params,h=w.popup,f=w.popupPosition):S(p[s])}return{compName:o,jsComp:a,fwComp:c,paramsFromSelector:u,popupFromSelector:h,popupPositionFromSelector:f}}var X7=class extends oe{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,i=!1){return this.getCompDetails(this.gridOptions,e,t,n,i)}getCompDetails(e,t,n,i,s=!1){const{name:o,cellRenderer:a}=t;let{compName:c,jsComp:u,fwComp:h,paramsFromSelector:f,popupFromSelector:p,popupPositionFromSelector:m}=uL(this.beans.frameworkOverrides,e,t,i),w,S;const E=M=>{const U=this.registry.getUserComponent(o,M);U&&(u=U.componentFromFramework?void 0:U.component,h=U.componentFromFramework?U.component:void 0,w=U.params,S=U.processParams)};if(c!=null&&E(c),u==null&&h==null&&n!=null&&E(n),u&&a&&!Q7(u)&&(u=this.agCompUtils?.adaptFunction(t,u)),!u&&!h){const{validation:M}=this.beans;s&&(c!==n||!n)?c?M?.isProvidedUserComp(c)||vt(50,{compName:c}):n?M||vt(260,{...this.gos.getModuleErrorParams(),propName:o,compName:n}):vt(216,{name:o}):n&&!M&&vt(146,{comp:n});return}const T=this.mergeParams(e,t,i,f,w,S),F=u==null,P=u??h;return{componentFromFramework:F,componentClass:P,params:T,type:t,popupFromSelector:p,popupPositionFromSelector:m,newAgStackInstance:()=>this.newAgStackInstance(P,F,T,t)}}newAgStackInstance(e,t,n,i){const s=!t;let o;s?o=new e:o=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(o);const a=o.init?.(n);return a==null?it.resolve(o):a.then(()=>o)}mergeParams(e,t,n,i=null,s,o){const a={...n,...s},c=e,u=c&&c[t.name+"Params"];if(typeof u=="function"){const h=u(n);oi(a,h)}else typeof u=="object"&&oi(a,u);return oi(a,i),o?o(a):a}},Z7={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},J7={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},e8={name:"headerComponent",optionalMethods:["refresh"]},t8={name:"innerHeaderComponent"},n8={name:"innerHeaderGroupComponent"},i8={name:"headerGroupComponent"},s8={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},o8={name:"loadingCellRenderer",cellRenderer:!0},r8={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},a8={name:"loadingOverlayComponent",optionalMethods:["refresh"]},l8={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},c8={name:"tooltipComponent"},zR={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},u8={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},d8={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},h8={name:"loadingCellRenderer",cellRenderer:!0},f8={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},g8={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function p8(e,t){return e.getCompDetailsFromGridOptions(J7,"agDragAndDropImage",t,!0)}function m8(e,t,n){return e.getCompDetails(t,e8,"agColumnHeader",n)}function C8(e,t,n){return e.getCompDetails(t,t8,void 0,n)}function v8(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,i8,"agColumnGroupHeader",t)}function y8(e,t,n){return e.getCompDetails(t,n8,void 0,n)}function w8(e,t){return e.getCompDetailsFromGridOptions(d8,void 0,t,!0)}function S8(e,t){return e.getCompDetailsFromGridOptions(h8,"agLoadingCellRenderer",t,!0)}function b8(e,t){return e.getCompDetailsFromGridOptions(f8,"agGroupRowRenderer",t,!0)}function R8(e,t){return e.getCompDetailsFromGridOptions(g8,"agDetailCellRenderer",t,!0)}function VF(e,t,n){return e.getCompDetails(t,s8,void 0,n)}function NF(e,t,n){return e.getCompDetails(t,o8,"agSkeletonCellRenderer",n,!0)}function dL(e,t,n){return e.getCompDetails(t,r8,"agCellEditor",n,!0)}function E8(e,t,n,i){const s=t.filter;return cL(s)&&(t={filter:s.component,filterParams:t.filterParams}),e.getCompDetails(t,zR,i,n,!0)}function T8(e,t,n){return e.getCompDetails(t,Z7,"agDateInput",n,!0)}function x8(e,t){return e.getCompDetailsFromGridOptions(a8,"agLoadingOverlay",t,!0)}function D8(e,t){return e.getCompDetailsFromGridOptions(l8,"agNoRowsOverlay",t,!0)}function A8(e,t){return e.getCompDetails(t.colDef,c8,"agTooltipComponent",t,!0)}function F8(e,t,n,i){return e.getCompDetails(t,u8,i,n)}function hL(e,t){return uL(e,t,zR)}function ew(e,t,n){return e.mergeParams(t,zR,n)}function Ih(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var fL=new Set,rm={},tl={},gp,gL=!1,pL=!1,P8=!1;function M8(e){const[t,n]=e.version.split(".")||[],[i,s]=gp.split(".")||[];return t===i&&n===s}function I8(e){gp||(gp=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(e.version?M8(e)||Bc(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${gp}.`)):Bc(t(`'${e.moduleName}' is incompatible.`)),e.validate){const n=e.validate();n.isValid||Bc(`${n.message}`)}}function _h(e,t,n=!1){n||(gL=!0),I8(e);const i=e.rowModels??["all"];fL.add(e);let s;t!==void 0?(pL=!0,tl[t]===void 0&&(tl[t]={}),s=tl[t]):s=rm,i.forEach(o=>{s[o]===void 0&&(s[o]={}),s[o][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(o=>_h(o,t,n))}function _8(e){delete tl[e]}function OS(e,t,n){const i=s=>!!rm[s]?.[e]||!!tl[t]?.[s]?.[e];return i(n)||i("all")}function UR(){return pL}function k8(e,t){const n=tl[e]??{};return[...Object.values(rm.all??{}),...Object.values(n.all??{}),...Object.values(rm[t]??{}),...Object.values(n[t]??{})]}function L8(){return new Set(fL)}function O8(e,t){const n=tl[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function V8(){return gL}function N8(){return P8}var B8=class{static register(e){_h(e,void 0)}static registerModules(e){e.forEach(t=>_h(t,void 0))}},G8=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];e.beanClasses.forEach(t=>{const n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{const{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}};function H8(e){return typeof e=="object"&&!!e.getComp}var z8=class extends G8{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){super.destroy(),_8(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}},U8=class extends oe{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new mL,this.rowValidations=new CL,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){const i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(this.edits.size===0)return e.data;const n=this.getEditRow(e),i=e.pinnedSibling,s=t&&i&&this.getEditRow(i);if(!n&&!s)return e.data;const o=Object.assign({},e.data),a=(c,u)=>c.forEach(({pendingValue:h},f)=>{h!==es&&(u[f.getColId()]=h)});return n&&a(n,o),s&&a(s,o),o}getEdit(e,t){const n=this._getEdit(e);return t&&n?{...n}:n}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((n,i)=>t.set(i,new Map(n))),t}setEditMap(e){this.edits.clear(),e.forEach((t,n)=>{const i=new Map;t.forEach((s,o)=>i.set(o,{...s})),this.edits.set(n,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const n={...this._getEdit(e),...t};return this.getEditRow(e.rowNode).set(e.column,n),n}clearEditValue(e){const{rowNode:t,column:n}=e;if(t)if(n){const i=this._getEdit(e);i&&(i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed")}else this.getEditRow(t)?.forEach(i=>{i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((n,i)=>{for(const s of n.keys())t.push({rowNode:i,column:s,...n.get(s)})}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:n,column:i}=e,{withOpenEditor:s}=t;if(n){const o=this.getEditRow(n,t);return o?i?s?this.getEdit(e)?.state==="editing":o.has(i)??!1:o.size!==0?s?Array.from(o.values()).some(({state:a})=>a==="editing"):!0:!1:!1}return s?this.getEditPositions().some(({state:o})=>o==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:es,sourceValue:this.beans.valueSvc.getValue(i,n,!0,"api"),state:"editing"}),this.edits.set(n,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},mL=class{constructor(){this.cellValidations=new Map}getCellValidation(e){const{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e||!e.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:n,column:i}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,t)}clearCellValidation(e){const{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},CL=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return!e||!e.rowNode?this.rowValidations.size>0:!!this.getRowValidation(e)}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function W8(e){const{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}function vL(e,t){const n=e.column===t.column,i=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return n&&i&&s}function j8(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Ce(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function $8(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function q8(e){let t=0,n;const{pinnedRowModel:i,rowModel:s,pageBounds:o}=e;return i?.getPinnedTopRowCount()?n="top":s.getRowCount()?(n=null,t=o.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function K8(e){let t,n=null;const{pinnedRowModel:i,pageBounds:s}=e,o=i?.getPinnedBottomRowCount(),a=i?.getPinnedTopRowCount();return o?(n="bottom",t=o-1):e.rowModel.getRowCount()?(n=null,t=s.getLastRow()):a&&(n="top",t=a-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function zo(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function $d(e,t){const n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;const i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function Y8(e,t,n){const{rowModel:i,pinnedRowModel:s}=e;let o;return o??(o=i?.getRowNode(t)),n?o??(o=s?.getPinnedRowById(t,n)):(o??(o=s?.getPinnedRowById(t,"top")),o??(o=s?.getPinnedRowById(t,"bottom"))),o}function am(e,t){const{rowIndex:n,rowPinned:i}=t,{pageBounds:s,pinnedRowModel:o,rowModel:a}=e;if(n===0)return i==="top"?null:i==="bottom"&&a.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:o?.isRowsToRender("top")?{rowIndex:o.getPinnedTopRowCount()-1,rowPinned:"top"}:null;const c=i?void 0:a.getRow(n);return yL(e,c,!0)??{rowIndex:n-1,rowPinned:i}}function BF(e,t){const{rowIndex:n,rowPinned:i}=t,{pageBounds:s,pinnedRowModel:o,rowModel:a}=e;if(Q8(e,t))return i==="bottom"?null:i==="top"&&a.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:o?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;const c=i?void 0:a.getRow(n);return yL(e,c)??{rowIndex:n+1,rowPinned:i}}function yL(e,t,n=!1){const{gos:i,rowRenderer:s}=e;if(!t?.sticky||!Nk(i))return;const o=s.getStickyTopRowCtrls(),a=s.getStickyBottomRowCtrls(),c=!a.some(p=>p.rowNode.rowIndex===t.rowIndex),u=c?o:a,h=(n?-1:1)*(c?-1:1);let f;for(let p=0;p<u.length;p++)if(u[p].rowNode.rowIndex===t.rowIndex){f=u[p+h];break}return f?{rowIndex:f.rowNode.rowIndex,rowPinned:null}:void 0}function Q8(e,t){const{rowPinned:n,rowIndex:i}=t,{pinnedRowModel:s,pageBounds:o}=e;return n==="top"?(s?.getPinnedTopRowCount()??0)-1<=i:n==="bottom"?(s?.getPinnedBottomRowCount()??0)-1<=i:o.getLastRow()<=i}function WR(e,t={}){const{rowIndex:n,rowId:i,rowCtrl:s,rowPinned:o}=t;if(s)return s;const{rowModel:a,rowRenderer:c}=e;let{rowNode:u}=t;return u||(i?u=Y8(e,i,o):n!=null&&(u=a.getRow(n))),c.getRowCtrls(u?[u]:[])?.[0]}function Lt(e,t={}){const{cellCtrl:n,colId:i,columnId:s,column:o}=t;if(n)return n;const a=e.colModel.getCol(i??s??VS(o)),c=t.rowCtrl??WR(e,t),u=c?.getCellCtrl(a)??void 0;if(u)return u;const h=t.rowNode??c?.rowNode;if(h)return e.rowRenderer.getCellCtrls([h],[a])?.[0]}function GF(e){const{editSvc:t}=e;t?.isBatchEditing()?Wc(e):t?.stopEditing(void 0,{source:"api"})}function X8(e,t,n){const{gos:i,popupSvc:s}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;const o=a=>{const c=a.relatedTarget;if(FS(c)===null){GF(t);return}let u=n.some(h=>h.contains(c))&&ML(i,c);u||(u=!!s&&(s.getActivePopups().some(h=>h.contains(c))||s.isElementWithinCustomPopup(c))),u||GF(t)};n.forEach(a=>e.addManagedElementListeners(a,{focusout:o}))}function VS(e){if(e)return typeof e=="string"?e:e.getColId()}var es=Symbol("unedited");function wL(e,t={}){const n=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of i){const o=s.comp?.getCellEditor();o&&n.push({ctrl:s,editor:Ih(o)})}return n}var Z8=(e,t={})=>wL(e,t).map(n=>n.editor);function J8(e,t,n,i,s,o){t.length===0&&n?.rowNode&&n?.column&&au(e,n,{key:i,event:s,cellStartedEdit:o});const{valueSvc:a,editSvc:c,editModelSvc:u}=e,{rowNode:h,column:f}=n??{};for(const p of t){const{rowNode:m,column:w}=p,S=Lt(e,p);if(!S){if(m&&w){const T=a.getValue(w,m,void 0,"api"),M=(n?.rowNode===m&&n?.column===w&&i||void 0)??c?.getCellDataValue(p,!1)??a.getValueForDisplay(w,m)?.value??T??es;u?.setEdit(p,{pendingValue:M,sourceValue:T,state:"editing"})}continue}const E=o&&h===S.rowNode&&S.column===f;au(e,{rowNode:h,column:S.column},{key:E?i:null,event:E?s:null,cellStartedEdit:E})}}function Lr({pendingValue:e,sourceValue:t}){return e===es&&(e=t),e!==t}function au(e,t,n){const{key:i,event:s,cellStartedEdit:o,silent:a}=n??{},c=Lt(e,t),u=c?.comp?.getCellEditor(),h=bL(e,t,i,o),f=e.editModelSvc?.getEdit(t);let p=i?.length===1?i:h.value;if(p===void 0&&(p=f?.sourceValue),e.editModelSvc?.setEdit(t,{editorValue:p,state:"editing"}),u){u.refresh?.(h);return}const m=t.column.getColDef(),w=dL(e.userCompFactory,m,h),S=w?.popupFromSelector!=null?w.popupFromSelector:!!m.cellEditorPopup,E=w?.popupPositionFromSelector!=null?w.popupPositionFromSelector:m.cellEditorPopupPosition;RL(w.params,s),c&&(c.editCompDetails=w,c.comp?.setEditDetails(w,S,E,e.gos.get("reactiveCustomComponents")),c?.rowCtrl?.refreshRow({suppressFlash:!0}),a||e.editSvc?.dispatchCellEvent(t,s,"cellEditingStarted"))}function SL(e){const t={editorValueExists:!1};return(e.getValidationErrors?.()?.length??0)>0?t:{editorValue:e.getValue(),editorValueExists:!0}}function bL(e,t,n,i){const{valueSvc:s,gos:o,editSvc:a}=e,c=Lt(e,t),u=t.rowNode?.rowIndex??void 0,h=a?.isBatchEditing(),f=e.colModel.getCol(t.column.getId()),{rowNode:p,column:m}=t,w=c.comp?.getCellEditor(),S=a?.getCellDataValue(t,!1)??(w?SL(w)?.editorValue:void 0),E=S===es?s.getValueForDisplay(f,p)?.value:S;return Pe(o,{value:E,eventKey:n??null,column:m,colDef:m.getColDef(),rowIndex:u,node:p,data:p.data,cellStartedEdit:i??!1,onKeyDown:c?.onKeyDown.bind(c),stopEditing:T=>{a.stopEditing(t,{source:h?"ui":"api",suppressNavigateAfterEdit:T}),lm(e,t)},eGridCell:c?.eGui,parseValue:T=>s.parseValue(f,p,T,c?.value),formatValue:c?.formatValue.bind(c),validate:()=>{a?.validateEdit()}})}function NS(e,t){const{editModelSvc:n}=e;n?.getEditMap().forEach((i,s)=>{i.forEach((o,a)=>{!t&&(o.state==="editing"||o.pendingValue===es)||!Lr(o)&&(o.state!=="editing"||t)&&n?.removeEdits({rowNode:s,column:a})})})}function e$(e,t){const n=t.comp?.getCellEditor();if(!n?.refresh)return;const{eventKey:i,cellStartedEdit:s}=t.editCompDetails.params,{column:o}=t,a=bL(e,t,i,s),c=o.getColDef(),u=dL(e.userCompFactory,c,a);n.refresh(RL(u.params,i))}function RL(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function Wa(e,t){e.editModelSvc?.getEditPositions().forEach(n=>{const i=Lt(e,n);if(!i)return;const s=i.comp.getCellEditor();if(!s)return;const{editorValue:o,editorValueExists:a}=SL(s);pp(e,n,t,o,void 0,!a)})}function pp(e,t,n,i,s,o){const{editModelSvc:a,valueSvc:c}=e;if(!a)return;const{rowNode:u,column:h}=t;if(!(u&&h))return;const p=!!Lt(e,t)?.comp?.getCellEditor();let m=a.getEdit(t,!0);m?.sourceValue||(m=a.setEdit(t,{sourceValue:c.getValue(h,u,void 0,"api"),pendingValue:es,state:p?"editing":"changed"})),a.setEdit(t,{editorValue:o?m.sourceValue:i,state:p?"editing":"changed"}),n&&t$(e,t)}function t$(e,t){const{editModelSvc:n}=e,i=n?.getEdit(t,!0);n?.setEdit(t,{pendingValue:i?.editorValue})}function Wc(e,t,n){t||(t=e.editModelSvc?.getEditPositions()),t.forEach(i=>lm(e,i,n))}function lm(e,t,n){const{editSvc:i,editModelSvc:s}=e,{rowNode:o,column:a}=t,c=Lt(e,t);if(!c){s?.hasEdits(t)&&o&&a&&s?.setEdit(t,{state:"changed"});return}const{comp:u}=c;if(u&&!u.getCellEditor())return;const h=u?.getCellEditor()?.getValidationErrors?.(),f=s?.getCellValidationModel();h?.length?f?.setCellValidation(t,{errorMessages:h}):f?.clearCellValidation(t),s?.getEdit(t)&&s?.setEdit(t,{state:"changed"}),u?.setEditDetails(),u?.refreshEditStyles(!1,!1),c?.refreshCell({force:!0,suppressFlash:!0});const p=s?.getEdit(t);p?.state==="changed"&&!n?.silent&&i?.dispatchCellEvent(t,n?.event,"cellEditingStopped",{valueChanged:Lr(p),newValue:p?.pendingValue,oldValue:p?.sourceValue})}function hl(e){const t=wL(e),n=new mL,{ariaAnnounce:i,localeSvc:s,editModelSvc:o,gos:a}=e,c=a.get("editType")==="fullRow",h=ak(s)("ariaValidationErrorPrefix","Cell Editor Validation");for(const p of t){const{ctrl:m,editor:w}=p,{rowNode:S,column:E}=m,T=w.getValidationErrors?.()??[],F=w.getValidationElement?.(!1)||!w.isPopup?.()&&m.eGui;if(F){const P=T!=null&&T.length>0,M=P?T.join(". "):"";Fj(F,P),P&&i.announceValue(`${h} ${T}`,"editorValidation"),F instanceof HTMLInputElement?F.setCustomValidity(M):F.classList.toggle("invalid",P)}T?.length>0&&n.setCellValidation({rowNode:S,column:E},{errorMessages:T})}Wa(e,!1),o?.setCellValidationModel(n);const f=new Set;for(const{ctrl:p}of t)f.add(p.rowCtrl);if(c){const p=n$(e);o?.setRowValidationModel(p)}for(const p of f.values()){p.rowEditStyleFeature?.applyRowStyles();for(const m of p.getAllCellCtrls())m.tooltipFeature?.refreshTooltip(!0),m.editorTooltipFeature?.refreshTooltip(!0),m.editStyleFeature?.applyCellStyles?.()}}var n$=e=>{const t=new CL,n=e.gos.get("getFullRowEditValidationErrors"),i=e.editModelSvc?.getEditMap();if(!i)return t;for(const s of i.keys()){const o=i.get(s);if(!o)continue;const a=[],{rowIndex:c,rowPinned:u}=s;for(const f of o.keys()){const p=o.get(f);if(!p)continue;const{editorValue:m,pendingValue:w,sourceValue:S}=p,E=m??(w===es?void 0:w)??S;a.push({column:f,colId:f.getColId(),rowIndex:c,rowPinned:u,oldValue:S,newValue:E})}const h=n?.({editorsState:a})??[];h.length>0&&t.setRowValidation({rowNode:s},{errorMessages:h})}return t};function i$(e){hl(e);const t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;const n=[];return t.forEach((i,s)=>{i.forEach(({errorMessages:o},a)=>{n.push({column:a,rowIndex:s.rowIndex,rowPinned:s.rowPinned,messages:o??null})})}),n}var s$="ag-column-first",o$="ag-column-last";function EL(e,t,n,i){return Vt(e)?[]:a$(e.headerClass,e,t,n,i)}function TL(e,t,n){e.toggleCss(s$,n.isColAtEdge(t,"first")),e.toggleCss(o$,n.isColAtEdge(t,"last"))}function r$(e,t,n,i){return Pe(t,{colDef:e,column:n,columnGroup:i})}function a$(e,t,n,i,s){if(Vt(e))return[];let o;if(typeof e=="function"){const a=r$(t,n,i,s);o=e(a)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function of(e){return!!(e.rowPinned&&e.pinnedSibling)}function Wi(e,t,n,i){const s=t==="top";if(!n)return Wi(e,t,s?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){const u=s?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return Wi(e,t,n,s?e.getPinnedTopRow(u-1):e.getPinnedBottomRow(u-1))}let o=!1,a=!1;const c=[];return e.forEachPinnedRow(t,u=>{if(u===n&&!o){o=!0,c.push(u);return}if(o&&u===i){a=!0,c.push(u);return}o&&!a&&c.push(u)}),c}var Z={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},BS=!1,cm=0;function l$(e){cm>0||(e.addEventListener("keydown",um),e.addEventListener("mousedown",um))}function c$(e){cm>0||(e.removeEventListener("keydown",um),e.removeEventListener("mousedown",um))}function um(e){const t=BS,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(BS=n)}function u$(e){const t=Mn(e);return l$(t),cm++,()=>{cm--,c$(t)}}function d$(){return BS}function h$(e,t,n){t.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===Z.TAB){const s=i.shiftKey;Rl(e,n,!1,s)||lu(e,s)&&i.preventDefault()}}})}function jc(e,t,n=!1){const i=Uj;let s=Sk;t&&(s+=", "+t),n&&(s+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(u=>Ks(u)),a=Array.prototype.slice.apply(e.querySelectorAll(s));return a.length?((u,h)=>u.filter(f=>h.indexOf(f)===-1))(o,a):o}function fl(e,t=!1,n=!1,i=!1){const s=jc(e,i?".ag-tab-guard":null,n),o=t?Ct(s):s[0];return o?(o.focus({preventScroll:!0}),!0):!1}function Rl(e,t,n,i){const s=jc(t,n?':not([tabindex="-1"])':null),o=$t(e);let a;n?a=s.findIndex(u=>u.contains(o)):a=s.indexOf(o);const c=a+(i?-1:1);return c<0||c>=s.length?null:s[c]}function xL(e,t=5){let n=0;for(;e&&FS(e)===null&&++n<=t;)e=e.parentElement;return FS(e)===null?null:e}function f$(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function nl(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()}function Xm(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()}function lu(e,t,n=!1){const i=e.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(t)?!0:((n||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function g$(e,t,n,{rowNode:i,column:s},o){return Pe(e.gos,{type:n,node:i,data:i.data,value:o,column:s,colDef:s.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function p$(e,t=!1){return e===Z.DELETE?!0:!t&&e===Z.BACKSPACE?vk():!1}var m$=class extends oe{constructor(e,t,n,i){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case Z.ENTER:this.onEnterKeyDown(e);break;case Z.F2:this.onF2KeyDown(e);break;case Z.ESCAPE:this.onEscapeKeyDown(e);break;case Z.TAB:this.onTabKeyDown(e);break;case Z.BACKSPACE:case Z.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Z.DOWN:case Z.UP:case Z.RIGHT:case Z.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){const{cellCtrl:n,beans:i}=this;if(!i.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const s=n.getFocusedCellPosition();i.navigation?.navigateToNextCell(e,t,s,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const i=t.extendLatestRangeInDirection(e);i&&(e.key===Z.LEFT||e.key===Z.RIGHT?n?.ensureColumnVisible(i.column):n?.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:n,beans:i,rowNode:s}=this,{gos:o,rangeSvc:a,eventSvc:c,editSvc:u}=i;if(c.dispatchEvent({type:"keyShortcutChangedCellStart"}),p$(e,o.get("enableCellEditingOnBackspace"))&&!u?.isEditing(n,{withOpenEditor:!0})){if(a&&jr(o))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const{column:h}=n,f=this.beans.valueSvc.getDeleteValue(h,s);s.setDataValue(h,f,"cellClear")}}else u?.isEditing(n,{withOpenEditor:!0})||i.editSvc?.startEditing(n,{startedEdit:!0,event:t});c.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:n}=this,{editSvc:i,navigation:s}=n,o=i?.isEditing(t),a=t.rowNode,c=i?.isRowEditing(a),u=h=>{i?.startEditing(h,{startedEdit:!0,event:e})&&e.preventDefault()};if(o||c){if(this.isCtrlEnter(e)){i?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(hl(n),i?.checkNavWithValidation(void 0,e)==="block-stop")return;i?.isEditing(t,{withOpenEditor:!0})?i?.stopEditing(t,{event:e}):c&&!t.isCellEditable()?i?.stopEditing({rowNode:a},{event:e}):u(t)}else if(n.gos.get("enterNavigatesVertically")){const h=e.shiftKey?Z.UP:Z.DOWN;s?.navigateToNextCell(null,h,t.cellPosition,!1)}else{if(i?.hasValidationErrors())return;i?.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),u(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===Z.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(hl(this.beans),n?.checkNavWithValidation(void 0,e)==="block-stop")||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)==="block-stop"&&n.revertSingleCellEdit(t),n?.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){const n=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:s}=this;if(n||i?.isEditing(s,{withOpenEditor:!0}))return;if(e.key===Z.SPACE)this.onSpaceKeyDown(e);else if(i?.isCellEditable(s,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(s))return;i?.startEditing(s,{startedEdit:!0,event:e,source:"api"}),!s.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&Ja(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,i,"spaceKey"),e.preventDefault()}};function DL(e,t,n){if(n===0)return!1;const i=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(i,s)<=n}function HF({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var C$=class extends oe{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!Mo(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:n,editSvc:i,editModelSvc:s,frameworkOverrides:o}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:c}=this,{column:u,cellPosition:h}=c;n&&a&&n.getCellRangeCount(h)>1&&n.intersectLastRange(!0);const f=c.createEvent(e,"cellClicked");t.dispatchEvent(f);const p=u.getColDef();if(p.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{p.onCellClicked(f)})},0),s?.getState(c)!=="editing"){const m=i?.isEditing(),w=s?.getCellValidationModel().getCellValidationMap().size??0,S=s?.getRowValidationModel().getRowValidationMap().size??0;if(m&&(w>0||S>0))return;i?.shouldStartEditing(c,e)?i?.startEditing(c,{event:e}):i?.shouldStopEditing(c,e)&&i?.stopEditing(c)}}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:i}=this,{eventSvc:s,frameworkOverrides:o,editSvc:a,editModelSvc:c}=n,u=t.getColDef(),h=i.createEvent(e,"cellDoubleClicked");if(s.dispatchEvent(h),typeof u.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{u.onCellDoubleClicked(h)})},0),a?.shouldStartEditing(this.cellCtrl,e)&&this.beans.editModelSvc?.getState(this.cellCtrl)!=="editing"){const f=a?.isEditing(),p=c?.getCellValidationModel().getCellValidationMap().size??0,m=c?.getRowValidationModel().getRowValidationMap().size??0;if(f&&(p>0||m>0))return;a?.startEditing(i,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:n,shiftKey:i}=e,s=e.target,{cellCtrl:o,beans:a}=this,{eventSvc:c,rangeSvc:u,rowNumbersSvc:h,focusSvc:f,gos:p,editSvc:m}=a;if(this.isRightClickInExistingRange(e))return;const w=u&&!u.isEmpty(),S=this.containsWidget(s),{cellPosition:E,column:T}=o,F=kr(T);if(h&&F&&!h.handleMouseDownOnCell(E,e)){u&&e.preventDefault(),e.stopImmediatePropagation();return}if(!i||!w){const P=m?.isEditing(o),U=p.get("enableCellTextSelection")&&e.defaultPrevented,z=(vl()||U)&&!P&&!_R(s)&&!S;o.focusCell(z,e)}if(i&&w&&!f.isCellFocused(E)){e.preventDefault();const P=f.getFocusedCell();if(P){const{column:M,rowIndex:U,rowPinned:z}=P;m?.isEditing(P)&&m?.stopEditing(P),f.setFocusedCell({column:M,rowIndex:U,rowPinned:z,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!S){if(u){F&&e.preventDefault();const P=HF(this.beans,e)&&F;if(i)u.extendLatestRangeToCell(E);else if(!P){const M=t||n;u.setRangeToCell(E,M)}}c.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=HF(this.beans,e);if(n&&i)return!0}return!1}containsWidget(e){return Za(e,"ag-selection-checkbox",3)||Za(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}},v$=class extends oe{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();bl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),i=[];if(n===1)i.push(e);else{let s=e;const o=e.getPinned();for(let a=0;s&&a<n&&(i.push(s),s=this.beans.visibleCols.getColAfter(s),!(!s||Vt(s)||o!==s.getPinned()));a++);}return i}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Ct(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=t.bodyWidth;return n+i+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const n=el(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},y$="ag-cell",w$="ag-cell-auto-height",S$="ag-cell-normal-height",b$="ag-cell-focus",R$="ag-cell-first-right-pinned",E$="ag-cell-last-left-pinned",T$="ag-cell-not-inline-editing",x$="ag-cell-wrap-text",dm="cellCtrl";function AL(e,t){return qk(e,t,dm)}var D$=0,$c=class extends oe{constructor(e,t,n,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:s}=e;this.instanceId=s+"-"+D$++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:e}=this;this.positionFeature=new v$(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this,e),this.mouseListener=new C$(this,e,this.column),this.keyboardListener=new m$(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&jr(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),kr(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),hl(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,i,s,o,a){this.comp=e,this.eGui=t,this.printLayout=s,a??(a=this),this.addDomData(a),this.addFeatures(),a.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,a),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()?this.editSvc?.startEditing(this,{startedEdit:!0,source:"api"}):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(c=>c()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:s}=e,o=t.getColDef(),a=this.createCellRendererParams();a.deferRender=!0;const c=NF(n,o,a);if(i.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let u;const h=new it(f=>{u=f});return this.addManagedListeners(s,{bodyScrollEnd:()=>u()}),{loadingComp:c,onReady:h}}return{loadingComp:c,onReady:it.resolve()}}showValue(e,t){const{beans:n,column:i,rowNode:s,rangeFeature:o}=this,{userCompFactory:a}=n;let c=this.getValueToDisplay(),u;const h=s.stub&&s.groupData?.[i.getId()]==null,f=i.getColDef();if(h||this.isCellRenderer()){const p=this.createCellRendererParams();!h||kr(i)?u=VF(a,f,p):u=NF(a,f,p)}if(!u&&!h&&n.findSvc?.isMatch(s,i)){const p=this.createCellRendererParams();u=VF(a,{...i.getColDef(),cellRenderer:"agFindCellRenderer"},p)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(s,{checkSiblings:!0})){const p=this.editSvc.prepDetailsDuringBatch(this,{compDetails:u,valueToDisplay:c});p&&(p.compDetails?u=p.compDetails:p.valueToDisplay&&(c=p.valueToDisplay))}this.comp.setRenderDetails(u,c,e),!t&&o&&jo(n,()=>o?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&of(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,i=Zp(t),s=Qr(this.column);return n==="custom"&&i!=="selectionColumn"&&s?!1:e.checkboxSelection||s&&typeof t=="object"&&zc(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||s}onPopupEditorClosed(){const{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){const{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:i,comp:s,eGui:o,beans:{valueSvc:a,gos:c,editSvc:u}}=this;return Pe(c,{value:e,valueFormatted:t,getValue:()=>a.getValueForDisplay(n,i).value,setValue:f=>u?.setDataValue({rowNode:i,column:n},f)||a.setValue(i,n,f),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:s.getParentOfValue(),registerRowDragger:(f,p,m,w)=>this.registerRowDragger(f,p,w),setTooltip:(f,p)=>{c.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(f,p),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell({force:e,suppressFlash:t,newData:n}={}){if(this.suppressRefreshCell)return;const i=this.column.getColDef(),s=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,o=e||s||n,a=!!this.comp,c=this.updateAndFormatValue(a),u=o||c;if(a){if(u){this.showValue(!!n,!1);const h=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!t&&!h&&i.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.editStyleFeature?.applyCellStyles?.(),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted,{value:i,valueFormatted:s}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=i,this.valueFormatted=s,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;ul(this.beans.gos,t,dm,this),e.addDestroyFunc(()=>ul(this.beans.gos,t,dm,null))}createEvent(e,t){const{rowNode:n,column:i,value:s,beans:o}=this;return g$(o,e,t,{rowNode:n,column:i},s)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;TL(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);mk(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){const n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:n},comp:i}=this;if(!i||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;const s=()=>{if(!this.isAlive())return;const o=i.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(s,0);return}s()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(kr(this.column)&&(e=!0),Ti(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(R$,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(E$,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){const{beans:t}=this;if(Xm(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const n=this.isCellFocused(),i=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(b$,n),n&&e&&e.forceBrowserFocus){let s=this.comp.getFocusableElement();if(i){const o=jc(s,null,!0);o.length&&(s=o[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Po(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(y$,!0),e.toggleCss(T$,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(w$,t),e.toggleCss(S$,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(x$,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains($t(this.beans))??!1}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}))}createRowDragComp(e,t,n){const i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},FL="__ag_grid_instance";function PL(e,t){t[FL]=e.gridInstanceId}function kh(e,t){return ML(e,t.target)}function ML(e,t){let n=t;for(;n;){const i=n[FL];if(Ce(i))return i===e.gridInstanceId;n=n.parentElement}return!1}function A$(e,t){return AL(e,t.target)?.getFocusedCellPosition()??null}function zF(e,t){const n=zn(e.gos,"normal"),i=t;let s,o;i.clientX!=null||i.clientY!=null?(s=i.clientX,o=i.clientY):(s=i.x,o=i.y);const{pageFirstPixel:a}=e.pageBounds.getCurrentPagePixelRange();if(o+=a,n){const c=e.ctrlsSvc.getScrollFeature(),u=c.getVScrollPosition(),h=c.getHScrollPosition();s+=h.left,o+=u.top}return{x:s,y:o}}var F$=class extends oe{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){const n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragSvc.addDragSource(n)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:n}=this,i=t.find(s=>s.dragSource===e);i&&(n.removeDragSource(i.params),Ji(t,i))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:n}=this;e.forEach(i=>t.removeDragSource(i.params)),e.length=0,n.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),e.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){this.dragSource?.onDragStopped?.();const{lastDropTarget:t}=this;if(t?.onDragStop){const n=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t}=this;e?.onDragCancelled?.(),t?.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){const n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const s=this.dropTargets.filter(f=>this.isMouseOnDropTarget(e,f)),o=this.findCurrentDropTarget(e,s),{lastDropTarget:a,dragSource:c,dragAndDropImageComp:u,dragItem:h}=this;if(o!==a){if(this.leaveLastTargetIfExists(e,n,i,t),a!==null&&o===null&&c?.onGridExit?.(h),a===null&&o!==null&&c?.onGridEnter?.(h),this.enterDragTargetIfExists(o,e,n,i,t),o&&u){const{comp:f,promise:p}=u;f?f.setIcon(o.getIconName?o.getIconName():null,!1):p.then(m=>{m&&m.setIcon(o.getIconName?o.getIconName():null,!1)})}this.lastDropTarget=o}else if(o&&o.onDragging){const f=this.createDropTargetEvent(o,e,n,i,t);o.onDragging(f)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let i=!1;const s=(c,u)=>{for(const h of u){const{width:f,height:p,left:m,right:w,top:S,bottom:E}=h.getBoundingClientRect();if(f===0||p===0)return!1;const T=c.clientX>=m&&c.clientX<w,F=c.clientY>=S&&c.clientY<E;if(!T||!F)return!1}return!0};for(const c of n)if(s(e,c)){i=!0;break}const{eElement:o,type:a}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:i&&t.isInterestedIn(a,o)}findCurrentDropTarget(e,t){const n=t.length;if(n===0)return null;if(n===1)return t[0];const s=Ph(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const a of t)if(this.getAllContainersFromDropTarget(a).flatMap(u=>u).indexOf(o)!==-1)return a;return null}enterDragTargetIfExists(e,t,n,i,s){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,n,i,s);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,n,i){const{lastDropTarget:s}=this;if(!s)return;if(s.onDragLeave){const a=this.createDropTargetEvent(s,e,t,n,i);s.onDragLeave(a)}const o=this.getDragAndDropImageComponent();o&&o.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const n=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return n.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime?.clientX,n=e.clientX;return t===n?null:t>n?"left":"right"}getVerticalDirection(e){const t=this.eventLastTime?.clientY,n=e.clientY;return t===n?null:t>n?"up":"down"}createDropTargetEvent(e,t,n,i,s){const o=e.getContainer(),a=o.getBoundingClientRect(),{dragItem:c,dragSource:u,gos:h}=this,f=t.clientX-a.left,p=t.clientY-a.top;return Pe(h,{event:t,x:f,y:p,vDirection:i,hDirection:n,dragSource:u,fromNudge:s,dragItem:c,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&o7(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;if(e){const{comp:t}=e;if(t){const n=t.getGui();this.dragAndDropImageParent?.removeChild(n),this.destroyBean(t)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:n}=this;if(!e)return;const i=p8(n,Pe(t,{dragSource:e}));if(!i)return;const s=i.newAgStackInstance();this.dragAndDropImageComp={promise:s},s.then(o=>{!o||!this.isAlive()||(this.processDragAndDropImageComponent(o),this.dragAndDropImageComp.comp=o)})}processDragAndDropImageComponent(e){const{dragSource:t,environment:n}=this;if(!t)return;const i=e.getGui();i.style.setProperty("position","absolute"),i.style.setProperty("z-index","9999"),PL(this.gos,i),n.applyThemeClasses(i),e.setIcon(null,!1);let{dragItemName:s}=t;typeof s=="function"&&(s=s()),e.setLabel(s||""),i.style.top="20px",i.style.left="20px";const o=GR(this.beans);this.dragAndDropImageParent=o,o?o.appendChild(i):ge(54)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}},P$=class extends oe{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,n=t.find(i=>i.dragSource===e);n&&(this.removeListener(n),Ji(t,n))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:s}=e;n.addEventListener("mousedown",t);let o=null;const a=this.gos.get("suppressTouch");i&&!a&&(o=c=>{_R(c.target)||(s&&c.stopPropagation(),this.onTouchStart(e,c))},n.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!i})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const n=t.touches[0];this.touchLastTime=n,this.touchStart=n;const i=u=>this.onTouchMove(u,e.eElement),s=u=>this.onTouchUp(u,e.eElement),o=u=>{u.cancelable&&u.preventDefault()},a=t.target,c=[{target:Ph(this.beans),type:"touchmove",listener:o,options:{passive:!1}},{target:a,type:"touchmove",listener:i,options:{passive:!0}},{target:a,type:"touchend",listener:s,options:{passive:!0}},{target:a,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){const n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const i=h=>this.onMouseMove(h,e.eElement),s=h=>this.onMouseUp(h,e.eElement),o=h=>h.preventDefault(),a=h=>{h.key===Z.ESCAPE&&this.cancelDrag(e.eElement)},c=Ph(this.beans),u=[{target:c,type:"mousemove",listener:i},{target:c,type:"mouseup",listener:s},{target:c,type:"contextmenu",listener:o},{target:c,type:"keydown",listener:a}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:n,type:i,listener:s,options:o}=t;n.addEventListener(i,s,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:n,type:i,listener:s,options:o}=t;n.removeEventListener(i,s,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:n}=this.currentDragParams,i=Ce(n)?n:4;return DL(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:n}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){vl()&&Mn(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,n=t.get("enableCellTextSelection"),i=e.type==="mousemove",s=o=>!!o.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button");return n&&i&&e.cancelable&&kh(t,e)&&!s(e)}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach(t=>t()),e.length=0}};function IL(e,t){return e+"_"+t}function on(e){return e instanceof Lh}var Lh=class extends oe{constructor(e,t,n,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return IL(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{on(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Ct(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren?.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{$r(t)?e.push(t):on(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{$r(t)?e.push(t):on(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(on(n)&&!n.displayedChildren?.length)return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},GS="row-group-",jR="t-",$R="b-",M$=0,gl=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=M$++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:n,eventSvc:i}=this.beans,s=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,s,t);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=e;const c=this.sibling.createDataChangedEvent(e,s,t);this.sibling.__localEventService?.dispatchEvent(c)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});const a=this.pinnedSibling;a&&(a.data=e,a.__localEventService?.dispatchEvent(a.createDataChangedEvent(e,s,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:a}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(vt(13),null):this.rowPinned==="top"?jR+this.rowIndex:this.rowPinned==="bottom"?$R+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:n}=this.beans,i=n?.createDaemonNode?.(this),s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));const o=this.createDataChangedEvent(e,s,!1);this.__localEventService?.dispatchEvent(o)}setId(e){const t=ou(this.beans.gos);if(t)if(this.data){const n=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(GS)&&vt(14,{groupPrefix:GS})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){const{colModel:i,valueSvc:s,gos:o,editSvc:a}=this.beans,c=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!c)return!1;const u=s.getValueForDisplay(c,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:p},data:m,rowIndex:w,rowPinned:S}=this;return p.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:w,rowPinned:S,column:c,colDef:c.colDef,data:m,node:this,oldValue:u,newValue:t,value:t,source:n}),!1}if(a){const p=a.setDataValue({rowNode:this,column:c},t,n);if(p!=null)return p}const h=s.setValue(this,c,t,n);this.dispatchCellChangedEvent(c,t,u);const f=this.pinnedSibling;return f&&h&&f.dispatchCellChangedEvent(c,t,u),h}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){const i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(e){this.childrenAfterGroup?.forEach(t=>t.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new al),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e),this.__localEventService||(this.__localEventService=new al),this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);const n=this.frameworkEventListenerService?.wrap(e,t)??t;this.__localEventService.addEventListener(e,n)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){this.__localEventService?.removeEventListener(e,t),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(ge(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){return this.childStore?this.childStore.getFirstNode():this.childrenAfterSort?.[0]??null}};function I$(e,t,n){return Pe(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var _$=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced","childStore"]);function k$(e,t){const n=new gl(t);return Object.keys(e).forEach(i=>{_$.has(i)||(n[i]=e[i])}),n.oldRowTop=null,n}var _L={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},L$=new Set(Object.values(_L));function wr(e,t){const n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;const i=n.create(n.refreshed),s=n;return s.created=!0,s.promise=i,i}function O$(e,t,n,i,s,o){return t.refresh?.({...n,model:i,source:o}),e().then(a=>{if(a){const{filter:c,filterParams:u}=a;kL(c,u,i,s,o)}})}function kL(e,t,n,i,s){e?.refresh?.({...t,model:n,state:i,source:s})}function LL(e,t,n){const i=e();i?.created&&i.promise.then(s=>{const o=t();kL(s,i.filterParams,o,n()??{model:o},"ui")})}function UF(e,t,n,i,s,o){let a,c=!1,u;switch(e){case"apply":{const h=i();u=h?.model??null,a={state:h?.state,model:u},c=!0;break}case"clear":{a={model:null};break}case"reset":{a={model:null},c=!0,u=null;break}case"cancel":{a={model:n()};break}}s(a),c?o(u):LL(t,n,i)}function Fn(e,t){return e[t]??null}function V$(e){return{tag:"div",cls:e}}var N$=class extends At{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(V$(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const n=this.buttons;if(this.buttons=e,n===e)return;const i=this.getGui();Ai(i);let s;this.destroyListeners();const o=document.createDocumentFragment(),a=this.className,c=({type:h,label:f})=>{const p=F=>{this.dispatchLocalEvent({type:h,event:F})};["apply","clear","reset","cancel"].includes(h)||ge(75);const m=h==="apply",S=an({tag:"button",attrs:{type:m&&t?"submit":"button"},ref:`${h}FilterButton`,cls:`ag-button ag-standard-button ${a}-button${m?" "+a+"-apply-button":""}`,children:f});this.activateTabIndex([S]),m&&(s=S);const E=F=>{F.key===Z.ENTER&&(F.preventDefault(),p(F))},T=this.listeners;S.addEventListener("click",p),T.push(()=>S.removeEventListener("click",p)),S.addEventListener("keydown",E),T.push(()=>S.removeEventListener("keydown",E)),o.append(S)};e.forEach(h=>c(h)),this.eApply=s;const u=this.validationTooltipFeature;s&&!u?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!s&&u&&(this.validationTooltipFeature=this.destroyBean(u)),i.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){const n=this.eApply;n&&(Ah(n,e===!1),this.validationMessage=t??null,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){this.listeners.forEach(e=>e()),this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},B$={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function Ar(e,t,n){return Sj(e,B$,t,n)}function qR(e,t){const{debounceMs:n}=e;return Zm(e)?(n!=null&&ge(71),0):n??t}function Zm(e){return(e.buttons?.indexOf("apply")??-1)>=0}var G$=class extends At{constructor(e,t,n,i,s,o){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=i,this.isGlobalButtons=s,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,n=t,i=n.useForm,s=i?"form":"div";this.setTemplate({tag:s,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:a})=>{o===this.column&&this.resetButtonsPanel(a,this.params)},filterStateChanged:({column:o,state:a})=>{o===this.column&&this.eButtons?.updateValidity(a.valid!==!1)},filterAction:({column:o,action:a,event:c})=>{o===this.column&&this.afterAction(a,c)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const a=this.params;this.resetButtonsPanel(a,a,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){const{buttons:i,readOnly:s}=t??{},{buttons:o,readOnly:a,useForm:c}=e;if(!n&&s===a&&xh(i,o))return;const u=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let h=this.eButtons;if(u){const f=o.map(p=>{const m=`${p}Filter`;return{type:p,label:Ar(this,m)}});if(this.applyActive=Zm(this.params),!h){h=this.createBean(new N$),this.appendChild(h.getGui());const p=this.column,m=w=>({event:S})=>{this.updateModel(p,w),this.afterAction(w,S)};h?.addManagedListeners(h,{apply:m("apply"),clear:m("clear"),reset:m("reset"),cancel:m("cancel")}),this.eButtons=h}h.updateButtons(f,c)}else this.applyActive=!1,h&&(Ho(h.getGui()),this.eButtons=this.destroyBean(h))}close(e){const t=this.hidePopup;if(!t)return;const n=e,i=n&&n.key;let s;(i===Z.ENTER||i===Z.SPACE)&&(s={keyboardEvent:n}),t(s),this.hidePopup=null}afterAction(e,t){const{params:n,applyActive:i}=this,s=n?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),s&&i&&this.close(t);break}case"reset":{s&&i&&this.close();break}case"cancel":{s&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===Z.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply"),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},H$={tag:"div",cls:"ag-filter"},z$=class extends At{constructor(e,t,n){super(H$),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??it.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:n,beans:{colFilter:i}}=this,s=i.getFilterUiForDisplay(t)??null;this.wrapper=s,s?.then(o=>{if(!o)return;const{isHandler:a,comp:c}=o;let u;if(a){const h=!!this.enableGlobalButtonCheck,f=this.createBean(new G$(t,o,i,i.updateModel.bind(i),h&&i.isGlobalButtons,h));this.comp=f,u=f.getGui()}else u=c.getGui(),Ce(u)||ge(69,{guiFromFilter:u});this.appendChild(u),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()}):c.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:n}=e;(t==="api"||t==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Ai(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},KR="T",U$=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${KR}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function ks(e,t){return e.toString().padStart(t,"0")}function Di(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>ks(s,2)).join(n);return t&&(i+=KR+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>ks(s,2)).join(":")),i}function zg(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),ks(e.getDate(),2),ks(e.getHours(),2),`:${ks(e.getMinutes(),2)}`,`:${ks(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,ks(e.getDate(),2)].map(String):null}var tw=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function HS(e,t){if(t==null)return Di(e,!1);const n=ks(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>ks(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${tw(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${tw(e.getDate())}`,DD:()=>ks(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${tw(e.getDay())}`,d:()=>`${e.getDay()}`},a=new RegExp(Object.keys(o).join("|"),"g");return t.replace(a,c=>c in o?o[c]():c)}function mp(e,t=!1){return!!pi(e,t)}function W$(e){return!!e&&mp(e,!0)&&!!e.match(U$)?.[1]}function pi(e,t=!1){if(!e)return null;const[n,i]=e.split(KR);if(!n)return null;const s=n.split("-").map(m=>parseInt(m,10));if(s.filter(m=>!isNaN(m)).length!==3)return null;const[o,a,c]=s,u=new Date(o,a-1,c);if(u.getFullYear()!==o||u.getMonth()!==a-1||u.getDate()!==c)return null;if(!i||i==="00:00:00")return u;const[h,f,p]=i.split(":").map(m=>parseInt(m,10));if(h>=0&&h<24)u.setHours(h);else if(t)return null;if(f>=0&&f<60)u.setMinutes(f);else if(t)return null;if(p>=0&&p<60)u.setSeconds(p);else if(t)return null;return u}var WF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},jF=["january","february","march","april","may","june","july","august","september","october","november","december"];function j$(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}function $F(e){return e instanceof Date&&!isNaN(e.getTime())}var zS={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:$F}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{const i=e.dateParser(n);return n==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&$F(e.dateParser(t))}),dateTime:e=>zS.date(e),dateTimeString:e=>zS.dateString(e),object:()=>{},text:()=>{}},US={number:()=>({comparator:j$}),boolean:({t:e})=>({valueFormatter:t=>Ce(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:n=>{const i=e(n);return Ce(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,i)=>{if(n==="NaN")return t("invalidDate","Invalid Date");if(i===1&&n!=null){const s=jF[Number(n)-1];return t(s,WF[s])}return n??t("blanks","(Blanks)")},treeListPathGetter:n=>zg(n,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:i=>{const s=e(i);return Ce(s)?s:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>zg(t.dateParser(i??void 0),!1),treeListFormatter:(i,s)=>{if(s===1&&i!=null){const o=jF[Number(i)-1];return n(o,WF[o])}return i??n("blanks","(Blanks)")}}),dateTime:e=>{const t=US.date(e);return t.treeListPathGetter=zg,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,n=US.dateString(e);return n.treeListPathGetter=i=>zg(t(i??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{const i=e(n);return Ce(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function $$(e,t,n,i,s,o,a){let c=t,u=n;const h=e==="agSetColumnFilter";!u&&i.baseDataType==="object"&&!h&&(u=({column:w,node:S})=>s({column:w,node:S,value:o.valueSvc.getValue(w,S)}));const p=(h?US:zS)[i.baseDataType],m=p({dataTypeDefinition:i,formatValue:s,t:a});return c=typeof t=="object"?{...m,...t}:m,{filterParams:c,filterValueGetter:u}}var q$={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},K$={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function Y$(e,t=!1){return(t?K$:q$)[e??"text"]}var OL="ag-resizer-wrapper",Sr=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),Q$={tag:"div",cls:OL,children:[Sr("eTopLeft","topLeft"),Sr("eTop","top"),Sr("eTopRight","topRight"),Sr("eRight","right"),Sr("eBottomRight","bottomRight"),Sr("eBottom","bottom"),Sr("eBottomLeft","bottomLeft"),Sr("eLeft","left")]},X$=class extends oe{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:n}=this.offsetParent,i=n/2-this.getWidth()/2,s=t/2-this.getHeight()/2;this.offsetElement(i,s,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:n,minWidth:i,width:s,minHeight:o,height:a,x:c,y:u}=this.config;this.offsetParent||this.setOffsetParent();let h=0,f=0;const p=Ks(this.element);if(p){const m=this.findBoundaryElement(),w=window.getComputedStyle(m);if(w.minWidth!=null){const S=m.offsetWidth-this.element.offsetWidth;f=parseInt(w.minWidth,10)-S}if(w.minHeight!=null){const S=m.offsetHeight-this.element.offsetHeight;h=parseInt(w.minHeight,10)-S}}if(this.minHeight=o||h,this.minWidth=i||f,s&&this.setWidth(s),a&&this.setHeight(a),(!s||!a)&&this.refreshSize(),t)this.center(e);else if(c||u)this.offsetElement(c,u,e);else if(p&&n){let m=this.boundaryEl,w=!0;if(m||(m=this.findBoundaryElement(),w=!1),m){const S=parseFloat(m.style.top),E=parseFloat(m.style.left);w?this.offsetElement(isNaN(E)?0:E,isNaN(S)?0:S,e):this.setPosition(E,S)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const i=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,n=this.element;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)sh(n,e),e=bk(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?sh(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,a=e?0:s.top;let c=0;if(t){const h=this.element.parentElement;if(h){const{bottom:f}=h.getBoundingClientRect();c=f-i.bottom}}return n+a-o-c}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:n}=this.config;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ws(t,e),e=qp(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,o=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Ws(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0,n){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupSvc?.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=Wo(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:n,isTop:i,anywhereWithin:s,topBuffer:o}=e,a=t.clientX-this.dragStartPosition.x,c=t.clientY-this.dragStartPosition.y,u=this.shouldSkipX(t,!!n,!!s,a)?0:a,h=this.shouldSkipY(t,!!i,o,c)?0:c;return{movementX:u,movementY:h}}shouldSkipX(e,t,n,i){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.x:s.left;let u=c<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=a.right;return u?!0:(t?u=i<0&&e.clientX>c+o.left||i>0&&e.clientX<c+o.left:n?u=i<0&&e.clientX>a.right||i>0&&e.clientX<c+o.left:u=i<0&&e.clientX>a.right||i>0&&e.clientX<a.right,u)}shouldSkipY(e,t,n=0,i){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.y:s.top;let u=c<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=a.bottom;return u?!0:(t?u=i<0&&e.clientY>c+o.top+n||i>0&&e.clientY<c+o.top:u=i<0&&e.clientY>a.bottom||i>0&&e.clientY<a.bottom,u)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(an(Q$)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${OL}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,n=0;for(let i=0;i<e.length;i++){const s=e[i],o=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let a=this.minHeight||0,c=this.minWidth||0;if(o){const u=window.getComputedStyle(s);u.minHeight&&(a=parseInt(u.minHeight,10)),u.minWidth&&(c=parseInt(u.minWidth,10))}else a=s.offsetHeight,c=s.offsetWidth;t+=a,n+=c}return{height:t,width:n}}applySizeToSiblings(e){let t=null;const n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){const s=n[i];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:s,isBottom:o,isLeft:a}=this.currentResizer,c=s||a,u=o||i,{movementX:h,movementY:f}=this.calculateMouseMovement({e,isLeft:a,isTop:i}),p=this.position.x,m=this.position.y;let w=0,S=0;if(c&&h){const E=a?-1:1,T=this.getWidth(),F=T+h*E;let P=!1;a&&(w=T-F,(p+w<=0||F<=this.minWidth)&&(P=!0,w=0)),P||this.setWidth(F)}if(u&&f){const E=i?-1:1,T=this.getHeight(),F=T+f*E;let P=!1;i?(S=T-F,(m+S<=0||F<=this.minHeight)&&(P=!0,S=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&T<F&&this.getMinSizeOfSiblings().height+F>this.element.parentElement.offsetHeight&&(P=!0),P||this.setHeight(F)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&w||S)&&this.offsetElement(p+w,m+S)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:n}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+s,n+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Z$="ag-focus-managed",Eu=class extends oe{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;const i=Rl(this.beans,this.eFocusable,!1,n.shiftKey);i&&(i.focus(),n.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(Z$),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||Mo(t))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){dl(t);return}t.key===Z.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},J$=class extends At{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Eu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new X$(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,n=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,n);const s=t.state,o=this.state;return this.state=s,(s.model!==o.model||s.state!==o.state)&&this.setModelIntoUi(s.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=Zm(e),this.setupApplyDebounced()}doesFilterPass(e){ge(283);const{getHandler:t,model:n,column:i}=this.params;return t().doesFilterPass({...e,model:n,handlerParams:this.beans.colFilter.getHandlerParams(i)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return ge(284),this.params.model!=null}setupApplyDebounced(){const e=qR(this.params,this.defaultDebounceMs),t=Hn(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return ge(285),this.params.model}setModel(e){ge(286);const{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:n}=this,i=!this.areModelsEqual(t.model,n.model);return i&&t.onAction("apply",e),i}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const n=this.getModelFromUi(),i={model:n,state:this.getState(),valid:this.canApply(n)};this.state=i;const s=this.params;s.onStateChange(i),s.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:s.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:n}=this;if(!t)return;const i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return Ar(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function eq(e){return!!e.operator}function tq(e,t,n){if(t==null)return null;let i=null;const{compName:s,jsComp:o,fwComp:a}=hL(e,t);return s?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:o==null&&a==null&&t.filter===!0&&(i=n()),i}var Cp={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},YR=class extends oe{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?Cp.AUTO_HEIGHT:t.print?Cp.PRINT:Cp.NORMAL;this.view.updateLayoutClasses(n,t)}},br="Viewport",qF="fakeVScrollComp",nw=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],KF=100,iw=150,nq=class extends oe{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Hn(this,()=>this.lastScrollSource[1]=null,iw),this.resetLastVScrollDebounced=Hn(this,()=>this.lastScrollSource[0]=null,iw)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,br)});for(const e of nw){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?Hn(this,this.onVScroll.bind(this,br),KF):this.onVScroll.bind(this,br),i=t?Hn(this,this.onVScroll.bind(this,qF),KF):this.onVScroll.bind(this,qF);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...nw,br]){if(this.lastScrollSource[1]===t)continue;const n=this.getViewportForSource(t);Yp(n,e,this.enableRtl)}}getViewportForSource(e){return e===br?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const i=Kp(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===br?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===br?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},iw)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Xa()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=kR(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const n of nw)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(br)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),Yp(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,i=n.getRowCount();let s=-1;for(let o=0;o<i;o++){const a=n.getRow(o);if(typeof e=="function"){if(a&&e(a)){s=o;break}}else if(e===a||e===a.data){s=o;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t,n=0){if(zn(this.gos,"print"))return;const{rowModel:i}=this.beans,s=i.getRowCount();if(typeof e!="number"||e<0||e>=s){ge(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:a,rowContainerHeight:c,rowRenderer:u}=this.beans;o.wrapIncoming(()=>{const h=this.ctrlsSvc.getGridBodyCtrl(),f=i.getRow(e);let p,m,w=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:S,stickyBottomHeight:E}=h,T=f.rowTop,F=f.rowHeight,P=a.getPixelOffset(),M=f.rowTop-P,U=M+f.rowHeight,z=this.getVScrollPosition(),j=c.divStretchOffset,I=z.top+j,A=z.bottom+j,_=A-I,L=c.getScrollPositionForPixel(M),O=c.getScrollPositionForPixel(U-_),G=Math.min((L+O)/2,M),N=I+S>M,Re=A-E<U;let pe=null;t==="top"?pe=L-S:t==="bottom"?pe=O+E:t==="middle"?pe=G:N?pe=L-S:Re&&(O-L>_?pe=L-S:pe=O+E),pe!==null&&(this.setVerticalScrollPosition(pe),u.redraw({afterScroll:!0})),p=T!==f.rowTop||F!==f.rowHeight,m=S!==h.stickyTopHeight||E!==h.stickyBottomHeight,w++}while((p||m)&&w<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(f?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const S=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const E=this.getVScrollPosition().top;S!==E&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){this.clearRetryListenerFncs.forEach(e=>e()),this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:i}=this.beans,s=n.getCol(e);if(!s||s.isPinned()||!this.visibleCols.isColDisplayed(s))return;const o=this.getPositionedHorizontalScroll(s,t);i.wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl;let c=(a?n:i)||s,u=a?i:n;t!=="auto"&&(c=t==="start",u=t==="end");const h=t==="middle";if(c||u||h){const{colLeft:f,colMiddle:p,colRight:m}=this.getColumnBounds(e);return h?p-o/2:c?a?m:f:a?f-o:m-o}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:s}=this.getColumnBounds(e),o=this.enableRtl,a=o?t>s:n<s,c=o?n<i:t>i;return{columnBeforeStart:a,columnAfterEnd:c}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,i=e.getActualWidth(),s=e.getLeft(),o=t?-1:1,a=t?n-s:s,c=a+i*o,u=a+i/2*o;return{colLeft:a,colMiddle:u,colRight:c}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},QR=class extends oe{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=zn(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,i=t.bodyWidth,s=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let a;e?a=i+s+o:(a=i,this.addSpacer&&(this.gos.get("enableRtl")?s:o)===0&&n.verticalScrollShowing&&(a+=n.getScrollbarWidth())),this.callback(a)}},iq=class extends oe{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,i=()=>{jo(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=kR(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function XR(e,t,n,i,s,o){if(n==null&&t==null)return;const a={},c={},u=(h,f)=>{h.split(" ").forEach(p=>{p.trim()!=""&&f(p)})};if(n){const h=Object.keys(n);for(let f=0;f<h.length;f++){const p=h[f],m=n[p];let w;typeof m=="string"?w=e?e.evaluate(m,i):!0:typeof m=="function"&&(w=m(i)),u(p,S=>{w?a[S]=!0:c[S]=!0})}}t&&o&&Object.keys(t).forEach(h=>u(h,f=>{a[f]||(c[f]=!0)})),o&&Object.keys(c).forEach(o),Object.keys(a).forEach(s)}function YF(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var sq=class extends oe{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const n=this.gos,i=a=>{typeof a=="string"?e.push(a):Array.isArray(a)&&a.forEach(c=>e.push(c))},s=n.get("rowClass");s&&i(s);const o=n.getCallback("getRowClass");if(o){const a={data:t.data,node:t,rowIndex:t.rowIndex},c=o(a);i(c)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){const{gos:i,expressionSvc:s}=this.beans,o=Pe(i,{data:e.data,node:e,rowIndex:e.rowIndex});XR(s,void 0,i.get("rowClassRules"),o,t,n)}processStylesFromGridOptions(e){const t=this.gos,n=t.get("rowStyle"),i=t.getCallback("getRowStyle");let s;if(i){const o={data:e.data,node:e,rowIndex:e.rowIndex};s=i(o)}if(s||n)return Object.assign({},n,s)}},oq=0,hm="renderedRow",fm=class extends oe{constructor(e,t,n,i,s){super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=s,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+oq++,this.rowId=hp(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=YF(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=hp(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,i){const{context:s,focusSvc:o}=this.beans;i=nf(this,s,i);const a={rowComp:e,element:t,containerType:n,compBean:i};this.allRowGuis.push(a),this.updateGui(n,a),this.initialiseRowComp(a);const c=this.rowNode,u=this.rowType==="FullWidthLoading"||c.stub,h=!c.data&&this.beans.rowModel.getType()==="infinite";!u&&!h&&!c.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const f=this.fullWidthGui?.element;f&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(c.rowIndex,c.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>f.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=t)}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),Ja(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(s=>n.toggleCss(s,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&TS(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),ul(t,e.element,hm,this),e.compBean.addDestroyFunc(()=>ul(t,e.element,hm,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=hp(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(PS(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(PS(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:i}}=this,s=!!e||!i.isPinningLeft(),o=!!t,a=!!n||!i.isPinningRight();return s&&o&&a}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),s=Hk(this.gos,this.rowNode,i);e?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new $c(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){const i={list:[],map:{}},s=(h,f,p)=>{p!=null?i.list.splice(p,0,f):i.list.push(f),i.map[h]=f},o=[];for(const h of t){const f=h.getInstanceId();let p=e.map[f];p&&!this.isCorrectCtrlForSpan(p)&&(p.destroy(),p=void 0),p||(p=this.getNewCellCtrl(h)),p&&s(f,p)}for(const h of e.list){const f=h.column.getInstanceId();if(i.map[f]!=null)continue;!this.isCellEligibleToBeRemoved(h,n)?o.push([f,h]):h.destroy()}if(o.length)for(const[h,f]of o){const p=i.list.findIndex(w=>w.column.getLeft()>f.column.getLeft()),m=p===-1?void 0:Math.max(p-1,0);s(h,f,m)}const{focusSvc:a,visibleCols:c}=this.beans,u=a.getFocusedCell();if(u&&u.column.getPinned()==n){const h=u.column.getInstanceId();if(!i.map[h]&&c.allCols.includes(u.column)){const p=this.createFocusedCellCtrl();if(p){const m=i.list.findIndex(S=>S.column.getLeft()>p.column.getLeft()),w=m===-1?void 0:Math.max(m-1,0);s(h,p,w)}}}return i}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;const i=t?.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const s=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(e,t){const{column:s}=e;if(s.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:a}=this.beans,c=a?.isEditing(e),u=e.isCellFocused();return c||u?!(o.allCols.indexOf(s)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||zn(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Ce(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),s=n.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=s}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=s}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(a,c)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,c).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),s=e(this.rightGui,"right");return t&&n&&i&&s}addListeners(){const{beans:e,gos:t,rowNode:n}=this,{expansionSvc:i,eventSvc:s,context:o,rowSpanSvc:a}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...i?.getRowExpandedListeners(this)??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(s,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),a&&this.addManagedListeners(a,{spannedCellsUpdated:({pinned:c})=>{c&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){this.allRowGuis.forEach(u=>{this.addRowDraggerToRow(u)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged()),cellChanged:e=>this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell(e)),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",n=t==="above",i=t==="inside",s=t==="below",a=this.gos.get("treeData")&&(s||n),c=this.rowNode.uiLevel.toString();this.allRowGuis.forEach(u=>{const h=u.rowComp;h.toggleCss("ag-row-highlight-above",n),h.toggleCss("ag-row-highlight-inside",i),h.toggleCss("ag-row-highlight-below",s),h.toggleCss("ag-row-highlight-indent",a),a?u.element.style.setProperty("--ag-row-highlight-level",c):u.element.style.removeProperty("--ag-row-highlight-level")})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.toggleCss("ag-row-dragging",e))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Po(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:i}=t;if(!(n.element===e.target))return;const a=this.rowNode,{focusSvc:c,navigation:u}=this.beans,h=c.getFocusedCell(),f={rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:h?.column??i};u?.navigateToNextCell(e,e.key,f,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Mo(e))return;const t=this.allRowGuis.find(c=>c.element.contains(e.target)),n=t?t.element:null,i=n===e.target,s=$t(this.beans);let o=!1;n&&s&&(o=n.contains(s)&&s.classList.contains("ag-cell"));let a=null;!i&&!o&&(a=Rl(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&i||!a)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(t=>Ks(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(n=>{Ti(n.element,"tabindex",t)})}onFullWidthRowFocused(e){const t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{const o=this.beans.colModel.getCol(e?.column)?.pinned;o?i=o==="right"?this.rightGui?.element:this.leftGui?.element:i=this.centerGui?.element}i&&(i.classList.toggle("ag-full-width-focus",n),n&&e?.forceBrowserFocus&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};return e.list.forEach(i=>{i!==t&&(n.list.push(i),n.map[i.column.getInstanceId()]=i)}),n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:n}=this;return Pe(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){Mo(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Za(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:n,focusSvc:i}=this.beans;n?.removeAllCellRanges();const s=this.findFullWidthInfoForEvent(e);if(!s)return;const{rowGui:o,column:a}=s,c=o.element,u=e.target;let h=e.defaultPrevented||vl();c&&c.contains(u)&&_R(u)&&(h=!1),i.setFocusedCell({rowIndex:t.rowIndex,column:a,rowPinned:t.rowPinned,forceBrowserFocus:h})}onRowClick(e){if(Mo(e)||this.lastMouseDownOnDragger)return;const{eventSvc:n,selectionSvc:i}=this.beans;n.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),i?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:n,rowNode:i}=this,s=Pe(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,c,u,h)=>this.addFullWidthRowDragging(a,c,u,h),setTooltip:(a,c)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(a,c)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return R8(o,s);case"FullWidthGroup":{const{value:a,valueFormatted:c}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return s.value=a,s.valueFormatted=c,b8(o,s)}case"FullWidthLoading":return S8(o,s);default:return w8(o,s)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",i){const{rowDragSvc:s,context:o}=this.beans;if(!s||!this.isFullWidth())return;const a=s.createRowDragComp(()=>n,this.rowNode,void 0,e,t,i);this.createBean(a,o),this.addDestroyFunc(()=>{this.destroyBean(a,o)})}onUiLevelChanged(){const e=YF(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(n,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(n=>n.rowComp.toggleCss("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.toggleCss("ag-row-last",t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(t=>{this.allRowGuis.forEach(n=>n.rowComp.toggleCss(t,!0))})}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:i,beans:s}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(o.push("ag-row-pinned"),s.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&o.push("ag-row-pinned-source"),i.isSelected()&&o.push("ag-row-selected"),i.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),i.stub&&o.push("ag-row-loading"),n&&o.push("ag-full-width-row"),s.expansionSvc?.addExpandedCss(o,i),i.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:a}=s;return a&&(a.processClassesFromGridOptions(o,i),a.preProcessRowClassRules(o,i)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),n&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:i,beans:s,gos:o}=this;n.addManagedListeners(t,{pointerenter:a=>{a.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:a=>{a.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(i,{mouseEnter:()=>{!s.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(n=>n.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),s=kk(this.gos)?Wr(this.beans,this.rowNode).height:void 0,o=s?`${Math.min(n,s)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${t}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&Hc(this.gos)&&!t.sticky)if(t.rowTop!=null){const s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.toggleCss("ag-opacity-zero",!0));this.fullWidthGui?.element.contains($t(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>(t.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Ce(e)){const t=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,s=this.applyPaginationOffset(i);n=t.isRowPinned()?s:this.beans.rowContainerHeight.getRealPixelPosition(s)}return n+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let n=null;return this.getAllCellCtrls().forEach(i=>{i.column==e&&(n=i)}),n!=null||t||this.getAllCellCtrls().forEach(i=>{i?.getColSpanningList().indexOf(e)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(t===null)return;const n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,s=n+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.toggleCss("ag-row-even",i),o.rowComp.toggleCss("ag-row-odd",!i),pk(o.element,s)})}};function VL(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function WS(e,t,n,i,s){const o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const a=Pe(e,{event:t,editing:s,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(o&&o(a))}function rq(e){const{pinnedRowModel:t,rowModel:n}=e,[i,s]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],o=i?null:"top";let a,c;s?(a=null,c=n.getRowCount()-1):(a="bottom",c=t?.getPinnedBottomRowCount()??-1);const{visibleCols:u,rangeSvc:h}=e,f=u.allCols;!h||!f?.length||h.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:c,rowEndPinned:a})}var aq=65,lq=67,cq=86,uq=68,dq=90,hq=89;function fq(e){const{keyCode:t}=e;let n;switch(t){case aq:n=Z.A;break;case lq:n=Z.C;break;case cq:n=Z.V;break;case uq:n=Z.D;break;case dq:n=Z.Z;break;case hq:n=Z.Y;break;default:n=e.code}return n}var gq=class extends oe{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",$k("touchstart")?"touchstart":"mousedown"].forEach(n=>{const i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!kh(this.gos,t)||Mo(t))return;const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,i,n)):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:AL(t,e),rowCtrl:qk(t,e,hm)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){const i=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!WS(this.gos,n,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,i),VL(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:i}=e,{focusSvc:s,navigation:o}=this.beans,c=s.getFocusedCell()?.column;if(!WS(this.gos,n,i,c,!1)){const h=n.key;if(t==="keydown")switch(h){case Z.PAGE_HOME:case Z.PAGE_END:case Z.PAGE_UP:case Z.PAGE_DOWN:o?.handlePageScrollingKey(n,!0);break;case Z.LEFT:case Z.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case Z.UP:case Z.DOWN:e.onKeyboardNavigate(n);break;case Z.TAB:e.onTabKeyDown(n);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!kh(this.gos,e))return;const n=fq(e),{clipboardSvc:i,undoRedo:s}=this.beans;if(n===Z.A)return this.onCtrlAndA(e);if(n===Z.C)return this.onCtrlAndC(i,e);if(n===Z.D)return this.onCtrlAndD(i,e);if(n===Z.V)return this.onCtrlAndV(i,e);if(n===Z.X)return this.onCtrlAndX(i,e);if(n===Z.Y)return this.onCtrlAndY(s);if(n===Z.Z)return this.onCtrlAndZ(s,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:i},gos:s}=this;n&&jr(s)&&t.isRowsToRender()?rq(this.beans):i&&i?.selectAllRowNodes({source:"keyboardSelectAll",selectAll:Uk(s)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},NL=class extends oe{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},Ug=e=>e.topRowCtrls,Wg=e=>e.getStickyTopRowCtrls(),jg=e=>e.getStickyBottomRowCtrls(),$g=e=>e.bottomRowCtrls,qg=e=>e.allRowCtrls,sw=e=>e.getCtrls("top"),ow=e=>e.getCtrls("center"),rw=e=>e.getCtrls("bottom"),pq={center:{type:"center",name:"center-cols",getRowCtrls:qg,getSpannedRowCtrls:ow},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:qg,getSpannedRowCtrls:ow},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:qg,getSpannedRowCtrls:ow},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:qg},topCenter:{type:"center",name:"floating-top",getRowCtrls:Ug,getSpannedRowCtrls:sw},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Ug,getSpannedRowCtrls:sw},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Ug,getSpannedRowCtrls:sw},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:Ug},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Wg},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Wg},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Wg},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Wg},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:jg},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:jg},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:jg},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:jg},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:$g,getSpannedRowCtrls:rw},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:$g,getSpannedRowCtrls:rw},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:$g,getSpannedRowCtrls:rw},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:$g}};function BL(e){return`ag-${rf(e).name}-viewport`}function vp(e){const t=rf(e);return t.container??`ag-${t.name}-container`}function mq(e){return`ag-${rf(e).name}-spanned-cells-container`}function rf(e){return pq[e]}var Cq=["topCenter","topLeft","topRight"],vq=["bottomCenter","bottomLeft","bottomRight"],yq=["center","left","right"],wq=["center","left","right","fullWidth"],Sq=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],bq=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Rq=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],GL=["stickyTopCenter","stickyTopLeft","stickyTopRight"],HL=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Eq=[...GL,"stickyTopFullWidth",...HL,"stickyBottomFullWidth"],Tq=[...Cq,...vq,...yq,...GL,...HL],xq=class extends oe{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=rf(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new iq(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new gq(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:o}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(bq,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers(Rq,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(wq,()=>this.createManagedBean(new NL(this.eContainer,this.name==="center"?i:void 0))),o&&this.forContainers(Tq,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(Sq,()=>this.createManagedBean(new QR(c=>this.comp.setContainerWidth(`${c}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(Eq.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const n=this.gos.get("ensureDomOrder"),i=zn(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Fh(this.eViewport)}getCenterViewportScrollLeft(){return Kp(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Wo(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Ek(this.eViewport)}getViewportScrollLeft(){return Kp(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Tk(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Yp(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=zn(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||n,o=t.filter(a=>{const c=a.isFullWidth();return this.options.fullWidth?!s&&c:s||!c});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},Dq="ag-force-vertical-scroll",Aq="ag-selectable",Fq="ag-column-moving",Pq=class extends oe{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,i,s,o,a){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=o,this.eStickyBottom=a,this.eCenterColsViewport=n.querySelector(`.${BL("center")}`),this.eFullWidthContainer=n.querySelector(`.${vp("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${vp("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${vp("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new YR(this.comp)),this.scrollFeature=this.createManagedBean(new nq(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,o,a]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=t&&e.getScrollbarWidth()||0,i=wk()?16:0,s=`calc(100% + ${n+i}px)`;jo(this.beans,()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let n=this.gos.get("treeData");if(!n){const i=t.isPivotMode();n=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{const{target:i}=n,s=Za(i,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:n=>{const{target:i,relatedTarget:s}=n,o=t.contains(s),a=Za(s,"ag-root",t);Za(i,"ag-root",t)||(!o||a)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(Fq,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(Aq,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?Dq:null,n=zn(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&xk(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const i=()=>{const s=n&&Hc(this.gos)&&!e.stretching,o=s?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,s)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:i,eBottom:s,beans:{popupSvc:o,touchSvc:a}}=this,c=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:c}),a?.mockBodyContextMenu(this,c),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const u=this.onStickyWheel.bind(this);for(const f of[t,n,i,s])this.addManagedElementListeners(f,{wheel:u});const h=this.onHorizontalWheel.bind(this);for(const f of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(f).eContainer,{wheel:h});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&kh(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();const{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),i=e?.getPinnedBottomTotalHeight(),s=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),a=s-o,c=n?a+n:0,u=i?a+i:0;this.comp.setTopHeight(c),this.comp.setBottomHeight(u),this.comp.setTopInvisible(c<=0),this.comp.setBottomInvisible(u<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,i=e?.getPinnedBottomTotalHeight()??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,a=i+o;n.setStickyBottomBottom(`${a}px`)}},zL=class extends At{constructor(e,t){super(),this.direction=t,this.eViewport=De,this.eContainer=De,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",vk()||Xa())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=wk(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),jo(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;qj(()=>Ks(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Mq={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Iq=class extends zL{constructor(){super(Mq,"horizontal"),this.eLeftSpacer=De,this.eRightSpacer=De,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new QR(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=i),Ws(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let s=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(s+=i),Ws(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=n?0:i===0&&t?16:i,a=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),sh(this.getGui(),o),sh(this.eViewport,o),sh(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(a,100):a()}getScrollPosition(){return Kp(this.eViewport,this.enableRtl)}setScrollPosition(e){Ks(this.eViewport)||this.attemptSettingScrollPosition(e),Yp(this.eViewport,e,this.enableRtl)}},_q={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},kq=class extends zL{constructor(){super(_q,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new NL(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,s=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),Ws(this.getGui(),s),Ws(this.eViewport,s),Ws(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const n=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Ks(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function Os(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function ZR(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const i of n){if(!i)continue;const s=i.getGroupRowCount()||0;for(let o=0;o<s;o++){const a=i.getGroupRowCtrlAtIndex(o),c=t[o];if(a){const u=Lq(e,a);(c==null||u>c)&&(t[o]=u)}}}return t}function Lq(e,t){let i=e.colModel.isPivotMode()?Vq(e):WL(e);const s=t.getHeaderCellCtrls();for(const o of s){const{column:a}=o,c=a.getAutoHeaderHeight();c!=null&&c>i&&a.isAutoHeaderHeight()&&(i=c)}return i}function JR(e){let n=e.colModel.isPivotMode()?Oq(e):af(e);return e.colModel.forAllCols(i=>{const s=i.getAutoHeaderHeight();s!=null&&s>n&&i.isAutoHeaderHeight()&&(n=s)}),n}function af(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function UL(e){return e.gos.get("floatingFiltersHeight")??af(e)}function WL(e){return e.gos.get("groupHeaderHeight")??af(e)}function Oq(e){return e.gos.get("pivotHeaderHeight")??af(e)}function Vq(e){return e.gos.get("pivotGroupHeaderHeight")??WL(e)}var Nq=class extends oe{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:i}=this,{headerNavigation:s,touchSvc:o,ctrlsSvc:a}=i;s&&this.createManagedBean(new Eu(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();const c=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:c}),o?.mockHeaderContextMenu(this,c),a.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>jo(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const n=ZR(e).reduce((o,a)=>o+a,0),i=JR(e);if(e.filterManager?.hasFloatingFilters()&&(t+=UL(e)),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;const s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const n=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?"LEFT":"RIGHT",{beans:s}=this,{headerNavigation:o,focusSvc:a}=s;(o.navigateHorizontally(i,!0,e)||!n&&a.focusOverlay(!1)||lu(s,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case Z.LEFT:t="LEFT";case Z.RIGHT:{Ce(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case Z.UP:t="UP";case Z.DOWN:{Ce(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:i}=this;!t&&n.contains($t(i))||n.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){const{menuSvc:i,ctrlsSvc:s}=this.beans;if(!e&&!n||!i?.isHeaderContextMenuEnabled())return;const{target:o}=e??t;(o===this.eGui||o===s.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,e,n)}},eE=class extends oe{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Ct(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),i=Ce(this.columnOrGroup.getOldLeft());t?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:i}=this.beans;if(!zn(n,"print")||e.getPinned()==="left")return t;const o=i.getColsLeftWidth();if(e.getPinned()==="right"){const a=i.bodyWidth;return o+a+t}return o+t}setLeft(e){if(Ce(e)&&(this.eCell.style.left=`${e}px`),on(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&Oj(this.ariaEl,t.length)}}},Bq=0,jL="headerCtrl",tE=class extends oe{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+Bq++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),s=i&&i.suppressHeaderKeyboardEvent;if(!Ce(s))return!1;const o=Pe(this.gos,{colDef:i,column:n,headerRowIndex:t,event:e});return!!s(o)}getWrapperHasFocus(){return $t(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if(typeof t=="function"){const i=this.getHeaderClassParams();n=t(i)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:i}=e,{beans:s}=this,o=p=>{if(!this.isAlive()||!i.isAlive())return;const{paddingTop:m,paddingBottom:w,borderBottomWidth:S,borderTopWidth:E}=yl(this.eGui),T=m+w+S+E,P=t.offsetHeight+T;if(p<5){const M=Mn(s),U=!M||!M.contains(t),z=P==0;if(U||z){PS(()=>o(p+1),"raf",s);return}}this.setColHeaderHeight(this.column,P)};let a=!1,c;const u=()=>{const p=this.column.isAutoHeaderHeight();p&&!a&&h(),!p&&a&&f()},h=()=>{a=!0,o(0),this.comp.toggleCss("ag-header-cell-auto-height",!0),c=Wo(this.beans,t,()=>o(0))},f=()=>{a=!1,c&&c(),this.comp.toggleCss("ag-header-cell-auto-height",!1),c=void 0};u(),i.addDestroyFunc(()=>f()),i.addManagedListeners(this.column,{widthChanged:()=>a&&o(0)}),i.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>o(0))}}),n&&n(u)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:i}=this;!e||!t||!i||(TL(e,t,n.visibleCols),mk(i,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=nl(this.beans);this.eGui&&Ti(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=$t(this.beans),n=e.key===Z.LEFT||e.key===Z.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),!n))return;const s=e.key===Z.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const o=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(o,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let i=e.key===Z.LEFT!==t.get("enableRtl");const s=n.getPinned(),o=t.get("enableRtl");return s&&o!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case Z.PAGE_DOWN:case Z.PAGE_UP:case Z.PAGE_HOME:case Z.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=jL,{eGui:n,gos:i}=this;ul(i,n,t,this),e.addDestroyFunc(()=>ul(i,n,t,null))}focus(e){const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const i=e??t,{menuSvc:s,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&i.preventDefault(),s?.isHeaderContextMenuEnabled(n)&&s.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Gq=class extends tE{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,n,i,s){this.comp=e;const{rowCtrl:o,column:a,beans:c}=this,{colResize:u,context:h,colHover:f,rangeSvc:p}=c,m=nf(this,h,s);this.setGui(t,m),this.updateState(),this.setupWidth(m),this.setupMovingCss(m),this.setupMenuClass(m),this.setupSortableClass(m),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:S=>this.setRefreshFunction("measuring",S),compBean:m}),this.addColumnHoverListener(m),this.setupFilterClass(m),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(m),this.setupSelectAll(m),this.setupUserComp(),this.refreshAria(),u?this.resizeFeature=m.createManagedBean(u.createResizeFeature(o.pinned,a,n,e,this)):Ut(n,!1),f?.createHoverFeature(m,[a],t),p?.createRangeHighlightFeature(m,a,e),m.createManagedBean(new eE(a,t,c)),m.createManagedBean(new Eu(t,{shouldStopEventPropagation:S=>this.shouldStopEventPropagation(S),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(m),m.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),m.addManagedListeners(a,{colDefChanged:()=>this.refresh()}),m.addManagedListeners(a,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const w=()=>this.checkDisplayName();m.addManagedEventListeners({columnValueChanged:w,columnRowGroupChanged:w,columnPivotChanged:w,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),m.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return Pe(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return m8(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:i}=this.beans;return Pe(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||xi(this.gos)),showColumnMenu:(o,a)=>{e?.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:a})},showColumnMenuAfterMouseClick:(o,a)=>{e?.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:a})},showFilter:o=>{e?.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t?.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,a)=>{t?.setSortForColumn(this.column,o,!!a,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,a)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,a)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===Z.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===Z.ENTER&&this.onEnterKeyDown(e),e.key===Z.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();QF(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),d$()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),n=EL(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(s=>{i.has(s)?i.delete(s):this.comp.toggleCss(s,!0)}),i.forEach(s=>this.comp.toggleCss(s,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:n,beans:i}=this,s=ZR(this.beans),o=s.reduce((m,w)=>m+=w,0)===0;if(n.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:a,isSpanningTotal:c}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",a>0);const u=JR(i);if(a===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${u}px`);return}n.toggleCss("ag-header-span-total",c);const h=(this.column.getFirstRealParent()?.getLevel()??-1)+1,f=s.length-h;let p=0;for(let m=0;m<f;m++)p+=s[s.length-1-m];e.style.setProperty("top",`${-p}px`),e.style.setProperty("height",`${u+p}px`)}refreshAriaSort(){if(this.sortable){const e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Tj(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!xi(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains($t(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return QF(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function QF(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var Hq=0,aw=class extends oe{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=Hq++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";n==="group"?i="ag-header-row-group":n==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=zn(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=nf(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=zn(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=ZR(this.beans);for(let s=0;s<t.length;s++){if(s===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[s]};e+=t[s]}const n=JR(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;const i=UL(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);const n=i=>{const{focusSvc:s,visibleCols:o}=this.beans;return s.isHeaderWrapperFocused(i)?o.isVisible(i.column):!1};if(e)for(const[i,s]of e)n(s)?this.ctrlsById.set(i,s):this.destroyBean(s);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(n&&(s=n.get(i),n.delete(i)),s&&s.column!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":s=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:s=this.createBean(new Gq(e,this));break}t.set(i,s)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];return["left",null,"right"].forEach(t=>{e.push(...this.getComponentsToRender(t))}),e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const n=this.allCtrls.find(s=>s.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},zq=class extends oe{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:i,colModel:s,colMoves:o}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const a=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const c=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(c,this),s.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:n,visibleCols:i}=this.beans;let s=0;const o=t.getFocusHeaderToUseAfterRefresh(),a=()=>{const p=i.headerGroupRowCount;s=p;const m=this.groupsRowCtrls.length;if(m!==p){if(m>p){for(let w=p;w<m;w++)this.destroyBean(this.groupsRowCtrls[w]);this.groupsRowCtrls.length=p;return}for(let w=m;w<p;w++){const S=this.createBean(new aw(w,this.pinned,"group"));this.groupsRowCtrls.push(S)}}},c=()=>{const p=s++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new aw(p,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==p&&this.columnsRowCtrl.setRowIndex(p)},u=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const p=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){p();return}e||p();const m=s++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==m&&this.filtersRowCtrl.setRowIndex(m):this.filtersRowCtrl=this.createBean(new aw(m,this.pinned,"filter"))},h=this.getAllCtrls();a(),c(),u();const f=this.getAllCtrls();this.comp.setCtrls(f),this.restoreFocusOnHeader(t,o),h.length!==f.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=n=>n?.getHeaderCellCtrls().find(i=>i.column===e);if($r(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const i=t(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){const s=this.getAllCtrls()[e];return s?s.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new QR(e=>this.comp.setCenterWidth(`${e}px`),!0))}},Uq=class extends oe{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(ZF(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){ZF(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(xi(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&$r(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Xa()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!xi(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!xi(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return xi(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,i){const{positionBy:s,onClosedCallback:o}=t,a=t.column;if(s==="button"){const{buttonElement:c}=t;e?.showMenuAfterButtonClick(a,c,n,o,i)}else if(s==="mouse"){const{mouseEvent:c}=t;e?.showMenuAfterMouseEvent(a,c,n,o,i)}else if(a){const c=this.beans,u=c.ctrlsSvc;u.getScrollFeature().ensureColumnVisible(a,"auto"),jo(c,()=>{const h=u.getHeaderRowContainerCtrl(a.getPinned())?.getHeaderCtrlForColumn(a);h&&e?.showMenuAfterButtonClick(a,h.getAnchorElementForMenu(i),n,o,i)})}}};function XF(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}function ZF(e){const{enterpriseMenuFactory:t,filterMenuFactory:n,gos:i}=e;return t&&xi(i)?t:n}var nE=class extends At{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Jm=class extends nE{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},$L=class extends At{constructor(){super()}},Wq={tag:"span",cls:"ag-overlay-loading-center",attrs:{"aria-live":"polite","aria-atomic":"true"}},jq=class extends $L{init(){const e=Po(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??Wq),!e){const t=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},$q={tag:"span",cls:"ag-overlay-no-rows-center"},qq=class extends $L{init(){const e=Po(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??$q),!e){const t=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}};function Kq(e,t,n){const i=Yi(e,t,n);if(i){const{className:o}=i;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return i}const s=an({tag:"span"});return s.appendChild(i),s}function Yi(e,t,n){let i=null;e==="smallDown"?ge(262):e==="smallLeft"?ge(263):e==="smallRight"&&ge(264);const s=n&&n.getColDef().icons;if(s&&(i=s[e]),t.gos&&!i){const o=t.gos.get("icons");o&&(i=o[e])}if(i){let o;if(typeof i=="function")o=i();else if(typeof i=="string")o=i;else{ge(38,{iconName:e});return}if(typeof o=="string")return LR(o);if(VR(o))return o;ge(133,{iconName:e});return}else{const o=t.registry.getIcon(e);return o||t.validation?.validateIcon(e),an({tag:"span",cls:`ag-icon ag-icon-${o??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var Yq=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",Qq={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},Xq=class extends At{constructor(){super(),this.dragSource=null,this.eIcon=De,this.eLabel=De,this.eGhost=De,this.registerCSS(Yq)}postConstruct(){const e=t=>Kq(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(Qq),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:n,dragSource:i,dropIconMap:s,gos:o}=this;Ai(n);let a=null;e||(e=i?.getDefaultIconName?i.getDefaultIconName():"notAllowed"),a=s[e],n.classList.toggle("ag-shake-left-to-right",t),!(a===s.hide&&o.get("suppressDragLeaveHidesColumns"))&&a&&n.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},Zq=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",Jq=class extends At{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(Zq)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Ai(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(Ut(t,!1),ll(t,"presentation")):(Ut(t,!0),ll(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Qp(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Ah(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},qL=class extends Jq{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||xj(e)!==null?Dh(e,""):Dh(e,t??"")}setAriaLabel(e){return su(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Ws(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function eK(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var ja=class extends qL{constructor(e,t,n="text",i="input"){super(e,e?.template??eK(i),[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=De,this.eWrapper=De,this.eInput=De}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:n,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:s,inputWidth:o}=this.config;s!=null&&this.setInputName(s),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,Ti(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return Qp(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Ti(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return su(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Ah(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Ti(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Ti(this.eInput,"autocomplete",t)}return this}},iE=class extends ja{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},sE={selector:"AG-CHECKBOX",component:iE},tK=".ag-checkbox-cell{height:100%}",nK={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},iK=class extends At{constructor(){super(nK,[sE]),this.eCheckbox=De,this.registerCSS(tK)}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),fk(i,"polite"),this.addManagedListeners(i,{click:s=>{if(dl(s),t.isDisabled())return;const o=t.getValue();this.onCheckboxChanged(o)},dblclick:s=>{dl(s)}}),this.addManagedElementListeners(e.eGridCell,{keydown:s=>{if(s.key===Z.SPACE&&!t.isDisabled()){e.eGridCell===$t(n)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),s.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:i,column:s,node:o}=e;if(o.group&&s)if(typeof i=="boolean")t=i;else{const p=s.getColId();p.startsWith(Qm)?t=i==null||i===""?void 0:i==="true":o.aggData&&o.aggData[p]!==void 0?t=i??void 0:n=!1}else t=i??void 0;const{eCheckbox:a}=this;if(!n){a.setDisplayed(!1);return}a.setValue(t);const c=e.disabled??!s?.isCellEditable(o);a.setDisabled(c);const u=this.getLocaleTextFunc(),h=Ym(u,t),f=c?h:`${u("ariaToggleCellValue","Press SPACE to toggle cell value")} (${h})`;a.setInputAriaLabel(f)}onCheckboxChanged(e){const{params:t}=this,{column:n,node:i,value:s}=t;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:i.rowIndex,rowPinned:i.rowPinned,state:"changed",oldValue:s,newValue:s}],{update:!0});const o=i.setDataValue(n,e,"renderer");this.beans.editSvc?.stopEditing({rowNode:i,column:n},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"}),o||this.updateCheckbox(t)}},JF=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:n,order:i}=this;t.has(e)||(t.add(e),n.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Ji(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:n,queued:i}=this;e.clear(),i.clear(),t.clear(),n.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,i=e?.getSortOptions()??[],s=rK(this.order);if(this.order.sort((a,c)=>(a.pinnedSibling?.rowIndex??0)-(c.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,i)??this.order,!s)return;const o=Bk(n);o==="bottom"||o==="pinnedBottom"?this.order.push(s):this.order.unshift(s)}hide(e){const{all:t,visible:n}=this;t.forEach(i=>e(i)?n.delete(i):n.add(i)),this.order=Array.from(n),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function KL(e){if(e.level===-1)return!0;const t=e.parent;return t?.childrenAfterSort?.some(n=>n==e)?KL(t):!1}function lw(e,t){const{gos:n,rowModel:i,filterManager:s}=e;return wl(n)?!i.getRowNode(t.id):s?.isAnyFilterPresent()?!KL(t):n.get("pivotMode")?!t.group:!1}function sK(e){return!!e.footer&&e.level===-1}function oK(e){return!!e.pinnedSibling&&sK(e.pinnedSibling)}function rK(e){const t=e.findIndex(oK);if(t>-1)return e.splice(t,1)?.[0]}var eP=class extends oe{postConstruct(){const{gos:e,beans:t}=this;this.top=new JF(t,"top"),this.bottom=new JF(t,"bottom");const n=s=>lw(t,s.pinnedSibling),i=()=>{const s=e.get("isRowPinned");s&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,s(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:s})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(o=>o.hide(n)),this.refreshRowPositions(),s||this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(lK),this.refreshRowPositions()},rowNodeDataChanged:({node:s})=>{(e.get("isRowPinnable")?.(s)??!0)||this.pinRow(s,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(s=>s.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:s})=>{this._grandTotalPinned=s==="pinnedBottom"?"bottom":s==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const n=[];t.forEach(i=>n.push(i)),n.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,uK(this.beans);return}const i=e.rowPinned??e.pinnedSibling?.rowPinned;if(i!=null&&t!=null&&t!=i){const a=e.rowPinned?e:e.pinnedSibling,c=e.rowPinned?e.pinnedSibling:e;this.pinRow(a,null,n),this.pinRow(c,t,n);return}const o=n&&cK(this.beans,e,n);if(o){o.forEach(a=>this.pinRow(a,t));return}if(t==null){const a=e.rowPinned?e:e.pinnedSibling,c=this.findPinnedRowNode(a);if(!c)return;c.delete(a);const u=a.pinnedSibling;cw(a),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(u)}else{const a=tP(this.beans,e,t),c=this.getContainer(t);c.add(a),lw(this.beans,e)&&c.hide(u=>lw(this.beans,u.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const n=i=>{if(i.rowHeightEstimated){const s=Wr(this.beans,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return nP(this.top)}getPinnedBottomTotalHeight(){return nP(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const n=[];return this.forEachPinnedRow(t,i=>n.push(i.pinnedSibling.id)),n};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,n)=>{for(const i of e[n]){const s=this.beans.rowModel.getRowNode(i);s?this.pinRow(s,n):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const n=new Set;e.forEachQueued(i=>{const s=this.beans.rowModel.getRowNode(i);s&&n.add(s)});for(const i of n)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){const{gos:e,beans:t,_grandTotalPinned:n}=this,i=t.rowModel;if(!gn(e))return;const s=i.rootNode?.sibling;if(!s)return;const o=s.pinnedSibling,a=o&&this.findPinnedRowNode(o);if(n){if(a&&a.floating!==n&&(a.delete(o),cw(o)),!a||a.floating!==n){const c=tP(t,s,n);this.getContainer(n).add(c)}}else{if(!a)return;a.delete(o),cw(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=n=>aK(this.beans,n);return e==null?this.forContainers(t):t(this.getContainer(e))}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function aK(e,t){let n=0;t.forEach((i,s)=>{i.setRowTop(n),(i.rowHeightEstimated||i.rowHeight==null)&&i.setRowHeight(Wr(e,i).height),i.setRowIndex(s),n+=i.rowHeight})}function tP(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;const i=k$(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=n;const s=n==="top"?jR:$R;return i.id=`${s}${n}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function cw(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function lK(e){const t=new Set;e.forEach(n=>{n.group&&t.add(n)}),t.forEach(n=>e.delete(n))}function cK(e,t,n){const{rowSpanSvc:i}=e,s=(n&&i?.isCellSpanning(n,t))??!1;if(n&&s)return i?.getCellSpan(n,t)?.spannedNodes}function nP(e){const t=e.size();if(t===0)return 0;const n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}function uK({gos:e,rowModel:t}){gn(e)&&t.refreshModel({step:"map"})}var iP=class extends oe{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=n=>{n.setRowHeight(n.rowHeight,!0)};kd(this.pinnedBottomRows,t),kd(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const n=i=>{if(i.rowHeightEstimated){const s=Wr(this.beans,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return kd(this.pinnedBottomRows,n),t=0,kd(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}const i=ou(this.gos),s=t==="top"?jR:$R,o=new Set(n.order),a=[],c=new Set;let u=0,h=-1;for(const f of e){const p=i?.({data:f,level:0,rowPinned:t})??s+this.nextId++;if(c.has(p)){ge(96,{id:p,data:f});continue}h++,c.add(p),a.push(p);const m=rh(n,p);if(m!==void 0)m.data!==f&&m.updateData(f),u+=this.setRowTopAndRowIndex(m,u,h),o.delete(p);else{const w=new gl(this.beans);w.id=p,w.data=f,w.rowPinned=t,u+=this.setRowTopAndRowIndex(w,u,h),n.cache[p]=w,n.order.push(p)}}o.forEach(f=>{rh(n,f)?.clearRowTopAndRowIndex(),delete n.cache[f]}),n.order=a}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(Wr(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return sP(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return sP(this.pinnedBottomRows)}getPinnedTopRowCount(){return $S(this.pinnedTopRows)}getPinnedBottomRowCount(){return $S(this.pinnedBottomRows)}getPinnedTopRow(e){return jS(this.pinnedTopRows,e)}getPinnedBottomRow(e){return jS(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return rh(this.getCache(t),e)}forEachPinnedRow(e,t){return kd(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function sP(e){const t=$S(e);if(t===0)return 0;const n=jS(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function rh(e,t){return e.cache[t]}function jS(e,t){return rh(e,e.order[t])}function kd(e,t){e.order.forEach((n,i)=>{const s=rh(e,n);s&&t(s,i)})}function $S(e){return e.order.length}var dK=class extends oe{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const n=e.get("enableRowPinning"),i=Bk(e),o=!!n||(i==="pinnedBottom"||i==="pinnedTop"),a=o?this.inner instanceof iP:this.inner instanceof eP;this.inner&&a&&this.destroyBean(this.inner),(a||!this.inner)&&(this.inner=this.createManagedBean(o?new eP:new iP))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},hK="ROOT_NODE_ID",fK=class extends oe{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}getRowNode(e){return this.allNodesMap[e]}extractRowData(){return this.rootNode?.allLeafChildren?.map(e=>e.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=hK,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=e?.map((t,n)=>this.createRowNode(t,n))??[]}setImmutableRowData(e,t){const n=ou(this.gos),i=!this.gos.get("suppressMaintainUnsortedOrder"),s=e.changedRowNodes,o=new Set,a=this.rootNode,c=a.allLeafChildren,u=c.length;let h=!1,f=!1,p=!1,m=!1;for(let S=0,E=-1,T=t.length;S<T;S++){const F=t[S];let P=this.getRowNode(n({data:F,level:0}));if(!P)h=!0,P=this.createRowNode(F,-1),s.add(P);else{if(i){const M=P.sourceRowIndex;m||(m=M<=E||h),E=M}P.data!==F&&(p=!0,P.updateData(F),s.update(P))}o.add(P)}const w=[];for(let S=0;S<u;S++){const E=c[S];o.has(E)||(f=!0,E.isSelected()&&w.push(E),E.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(E.pinnedSibling,null),this.rowNodeDeleted(E),s.remove(E))}if(h||f||m){const S=new Array(o.size);let E=0;if(!i)for(let F=0;F<u;++F){const P=c[F];o.delete(P)&&(P.sourceRowIndex=E,S[E++]=P)}for(const F of o)F.sourceRowIndex=E,S[E++]=F;a.allLeafChildren=S;const T=a.sibling;T&&(T.allLeafChildren=S),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=m)}(h||f||m||p)&&(this.deselectNodes(w),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,n=this.allNodesMap;n[t]===e&&delete n[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const n={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[],s=ou(this.gos);return this.executeRemove(s,e,n,i),this.executeUpdate(s,e,n,i),this.executeAdd(e,n),this.deselectNodes(i),n}executeAdd(e,t){const n=e.add;if(!n?.length)return;let i=this.rootNode.allLeafChildren,s=i.length;if(typeof e.addIndex=="number"&&(s=this.sanitizeAddIndex(e.addIndex),s>0&&this.gos.get("treeData")&&this.gos.get("getDataPath"))){for(let p=0;p<i.length;p++)if(i[p]?.rowIndex==s-1){s=p+1;break}}const o=n.length,a=t.changedRowNodes,c=new Array(o);for(let f=0;f<o;f++){const p=this.createRowNode(n[f],s+f);a.add(p),c[f]=p}const u=this.rootNode;if(s<i.length){const f=i.slice(0,s),p=i.slice(s,i.length),m=f.length+c.length;for(let w=0,S=p.length;w<S;++w)p[w].sourceRowIndex=m+w;i=[...f,...c,...p],t.rowsInserted=!0}else i=i.concat(c);u.allLeafChildren=i;const h=u.sibling;h&&(h.allLeafChildren=i),t.rowNodeTransaction.add=c}executeRemove(e,t,{changedRowNodes:n,rowNodeTransaction:i},s){const{remove:o}=t;if(!o?.length)return;const a={};o.forEach(h=>{const f=this.lookupRowNode(e,h);f&&(f.isSelected()&&s.push(f),f.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(f.pinnedSibling,null),f.clearRowTopAndRowIndex(),a[f.id]=!0,delete this.allNodesMap[f.id],i.remove.push(f),n.remove(f))});const c=this.rootNode;c.allLeafChildren=c.allLeafChildren?.filter(h=>!a[h.id])??null,c.allLeafChildren?.forEach((h,f)=>{h.sourceRowIndex=f});const u=c.sibling;u&&(u.allLeafChildren=c.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:n,rowNodeTransaction:i},s){const{update:o}=t;o?.length&&o.forEach(a=>{const c=this.lookupRowNode(e,a);c&&(c.updateData(a),!c.selectable&&c.isSelected()&&s.push(c),i.update.push(c),n.update(c))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselectNodes(e){const t="rowDataChanged",n=this.beans.selectionSvc,i=e.length>0;i&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),i&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const n=new gl(this.beans);return n.parent=this.rootNode,n.level=0,n.group=!1,n.expanded=!1,n.sourceRowIndex=t,n.setDataAndId(e,String(this.nextId)),this.allNodesMap[n.id]&&ge(2,{nodeId:n.id}),this.allNodesMap[n.id]=n,this.nextId++,n}lookupRowNode(e,t){let n;if(e){const i=e({data:t,level:0});if(n=this.allNodesMap[i],!n)return vt(4,{id:i}),null}else if(n=this.rootNode?.allLeafChildren?.find(i=>i.data===t),!n)return vt(5,{data:t}),null;return n||null}},gK={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},pK=class extends At{constructor(){super(gK,[sE]),this.eCheckbox=De}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,i=t.isSelected(),s=Ym(e,i),[o,a]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],c=e(o,a);n.setValue(i,!0),n.setInputAriaLabel(`${c} (${s})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:dl,click:i=>{dl(i),this.beans.selectionSvc?.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:s})=>{const o=typeof i=="object"?Zy(i):void 0,a=typeof s=="object"?Zy(s):void 0;o!==a&&this.onSelectableChanged()}),kS(this.gos)||typeof this.getIsVisible()=="function"){const i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:n,gos:i}=this,s=t.selectable,o=this.getIsVisible();let a;if(typeof o=="function"){const p=n?.callbackParams;if(!e)a=o({...p,node:t,data:t.data});else{const m=e.createColumnFunctionCallbackParams(t);a=o({...p,...m})}}else a=o??!1;const c=s&&!a||!s&&a,u=s||a,h=i.get("rowSelection"),f=h&&typeof h!="string"?!Zy(h):!!e?.getColDef().showDisabledCheckboxes;if(this.setVisible(u&&(c?f:!0)),this.setDisplayed(u&&(c?f:!0)),u&&this.eCheckbox.setDisabled(c),n?.removeHidden){this.setDisplayed(u);return}}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?zc(t):this.column?.getColDef()?.checkboxSelection}},mK=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:n,pinnedRowModel:i}=this;return t??(t=n.getRowNode(e)),i?.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const n=t[0].id===this.rootId,i=t.findIndex(s=>s.id===e.id);if(i>-1){const s=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),n?{keep:s,discard:o}:{keep:o,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){const n=this.getRoot();if(n==null){const s=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&s.push(o)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}const i=this.getNodesInRange(n,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(s=>s.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}getNodesInRange(e,t){const{pinnedRowModel:n,rowModel:i}=this;if(!n?.isManual())return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return Wi(n,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const s=Wi(n,"bottom",void 0,e),o=i.getRowCount(),a=i.getRow(o-1);return(i.getNodesInRangeForSelection(t,a)??[]).concat(s)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return Wi(n,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const s=Wi(n,"top",t,void 0),o=Wi(n,"bottom",void 0,e),a=i.getRow(0),c=i.getRow(i.getRowCount()-1);return s.concat(i.getNodesInRangeForSelection(a,c)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return Wi(n,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const s=Wi(n,"top",e,void 0),o=Wi(n,"bottom",void 0,t),a=i.getRow(0),c=i.getRow(i.getRowCount()-1);return s.concat(i.getNodesInRangeForSelection(a,c)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return Wi(n,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const s=Wi(n,"bottom",void 0,t),o=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,o)??[]).concat(s)}return null}},CK=class extends oe{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains($t(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new iE);this.cbSelectAll=t,t.addCss("ag-header-select-all"),ll(t.getGui(),"presentation"),this.showOrHideSelectAll();const n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:s})=>{const o=a=>typeof a=="string"||!a||a.mode==="singleRow"?void 0:a.selectAll;o(i)!==o(s)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,i=t.getSelectAllState(e);n.setValue(i);const s=t.hasNodesToSelect(e);n.setDisabled(!s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:s}=this,o=i.getValue(),a=Ym(t,o),c=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",s?`${c} (${a})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return em(this.gos)?!0:(ge(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:n}=this.beans;return gn(t)||wl(t)?!0:(ge(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");const i={source:n,selectAll:t},s=this.beans.selectionSvc;e?s.selectAllRowNodes(i):s.deselectAllRowNodes(i)}isCheckboxSelection(){const{column:e,gos:t,beans:n}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return YL(n,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=Uk(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function YL({gos:e,selectionColSvc:t},n){const i=e.get("rowSelection"),s=n.getColDef(),{headerCheckboxSelection:o}=s;let a=!1;if(typeof i=="object"){const u=Qr(n),h=HR(n);(Zp(i)==="autoGroupColumn"&&h||u&&t?.isSelectionColumnEnabled())&&(a=up(i))}else typeof o=="function"?a=o(Pe(e,{column:n,colDef:s})):a=!!o;return a}var vK=class extends oe{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new mK(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const n=kS(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=kS(e),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new pK}createSelectAllFeature(e){if(YL(this.beans,e))return new CK(e)}isMultiSelect(){return em(this.gos)}onRowCtrlSelected(e,t,n){const i=!!e.rowNode.isSelected();e.forEachGui(n,s=>{s.rowComp.toggleCss("ag-row-selected",i);const o=s.element;xS(o,i),o.contains($t(this.beans))&&t(s)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected();if(!e.selectable)return;const i=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(i,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!of(e)||!Ja(this.gos)}updateRowSelectable(e,t){const n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(Mh(this.gos)){const s=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:s??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let i=0;i<e.childrenAfterGroup.length;i++){const s=e.childrenAfterGroup[i];let o=s.isSelected();if(!s.selectable){const a=this.calculateSelectedFromChildren(s);if(a===null)continue;o=a}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,i="api"){const s=!e.selectable&&t,o=e.__selected===t;if(s||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const a=e.sibling;a&&a.footer&&a.__localEventService&&a.dispatchRowEvent("rowSelected");const c=e.pinnedSibling;return c&&c.rowPinned&&c.__localEventService&&c.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...I$(e,this.gos,"rowSelected"),event:n||null,source:i}),!0}isCellCheckboxSelection(e,t){const n=this.gos.get("rowSelection");if(n&&typeof n!="string"){const i=Qr(e)&&zc(n);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,i){const{gos:s,selectionCtx:o}=this,a=e.isSelected(),c=Mh(s),u=c7(s),h=u7(s),f=this.isMultiSelect(),p=i==="rowClicked";if(p&&!(u||h))return null;if(t&&n&&f){const m=o.getRoot();if(m)if(m.isSelected()){const w=o.isInRange(e)?o.truncate(e):o.extend(e,c);return{deselect:w.discard,select:w.keep,reset:!1}}else{const w=o.extend(e,c);return{select:[],deselect:w.keep,reset:!1}}else return null}else if(t&&f){const m=o.selectAll?this.beans.rowModel.getRow(0):void 0,w=o.getRoot(m),S=o.isInRange(e)?o.truncate(e):o.extend(e,c);return{select:S.keep,deselect:S.discard,reset:o.selectAll||!!(w&&!w.isSelected())}}else if(n){if(p){const m=!a;return m&&!u||!m&&!h?null:(o.setRoot(e),{node:e,newValue:m,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!a,clearSelection:!f}}else{o.setRoot(e);const m=d7(s),w=tm(s)==="filteredDescendants",S=p&&(!m||!u);if(w&&a===void 0&&gn(s))return{node:e,newValue:!1,clearSelection:!f||S};if(p){const E=a?!m:u;return E===a&&!S||E&&!u||!E&&!h?null:{node:e,newValue:E,clearSelection:!f||S,keepDescendants:e.group&&c}}return{node:e,newValue:!a,clearSelection:!f||S}}}},yK=class extends iE{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},El=class extends ja{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const n=this.eInput;return n.value!==e&&(n.value=Ce(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{VL(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{const i=n.clipboardData?.getData("text");i&&i.split("").some(s=>!e.test(s))&&n.preventDefault()}})}},eC={selector:"AG-INPUT-TEXT-FIELD",component:El},wK=class extends ja{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},SK={selector:"AG-INPUT-TEXT-AREA",component:wK},oE=class extends El{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=parseFloat(e.value),a=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==a&&this.setValue(a)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:n,max:i,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){$t(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const n=this.precision;if(n==null)return e;if(t){const s=parseFloat(e).toFixed(n);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=n)return e;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Ti(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Ti(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Ti(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(Ce(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);const s=this.normalizeValue(n);i=n!=s}if(i)return t(n)}return e(n)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},bK={selector:"AG-INPUT-NUMBER-FIELD",component:oE},RK=class extends El{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=vl();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){$t(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Di(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,Ti(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Di(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,Ti(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Ti(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return pi(this.getValue())??void 0}setDate(e,t){this.setValue(Di(e??null,this.includeTime),t)}},QL={selector:"AG-INPUT-DATE-FIELD",component:RK},EK=class extends At{constructor(e="default",t=!1){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case Z.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case Z.DOWN:case Z.UP:e.preventDefault(),this.navigate(t);break;case Z.PAGE_DOWN:case Z.PAGE_UP:case Z.PAGE_HOME:case Z.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===Z.DOWN;let n;const{itemEls:i,highlightedEl:s}=this;if(!s)n=i[t?0:i.length-1];else{let a=i.indexOf(s)+(t?1:-1);a=Math.min(Math.max(a,0),i.length-1),n=i[a]}this.highlightItem(n)}navigateToPage(e){const{itemEls:t,highlightedEl:n}=this;if(!n||t.length===0)return;const i=t.indexOf(n),s=this.options.length-1,o=t[0].clientHeight,a=Math.floor(this.getGui().clientHeight/o);let c=-1;e===Z.PAGE_HOME?c=0:e===Z.PAGE_END?c=s:e===Z.PAGE_DOWN?c=Math.min(i+a,s):e===Z.PAGE_UP&&(c=Math.max(i-a,0)),c!==-1&&this.highlightItem(t[c])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:n}=e,i=n??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{Ho(e)}),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){const e=this.getGui();ll(e,this.options.length===0?"presentation":"listbox")}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");this.refreshAriaRole(),e.forEach((t,n)=>{Ij(t,n+1),Mj(t,e.length)})}renderOption(e,t){const n=an({tag:"div",cls:`ag-list-item ag-${this.cssIdentifier}-list-item`,attrs:{role:"option"}}),i=an({tag:"span",children:t});n.appendChild(i),this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:s=>{s.preventDefault(),s.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>i.scrollWidth>i.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const n=this.options.findIndex(i=>i.value===e);if(n!==-1){const i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Ks(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),xS(e,!0);const t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:s,offsetHeight:o}=e;(s+o>n+i||s<n)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;!e||!Ks(e)||(e.classList.remove(this.activeClass),xS(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},TK=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",xK={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},DK=class extends qL{constructor(e){if(super(e,e?.template||xK,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=De,this.eWrapper=De,this.eDisplayField=De,this.eIcon=De,this.registerCSS(TK),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:s,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),s!=null&&this.setPickerMinWidth(s),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:n,inputWidth:i}=this.config;if(n){const s=Yi(n,this.beans);s&&this.eIcon.appendChild(s)}i!=null&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),TS(e,!1),this.ariaRole&&ll(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Z.UP:case Z.DOWN:case Z.ENTER:case Z.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Z.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:s=!0},maxPickerHeight:o,minPickerWidth:a,maxPickerWidth:c,variableWidth:u,beans:h,eWrapper:f}=this,p={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{const E=Vk(h);this.beforeHidePicker(),E&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:f};e.style.position="absolute";const m=h.popupSvc,w=m.addPopup(p);u?(a&&(e.style.minWidth=a),e.style.width=OR(qp(f)),c&&(e.style.maxWidth=c)):Qp(e,c??qp(f));const S=o??`${kR(m.getPopupParent())}px`;return e.style.setProperty("max-height",S),this.alignPickerToComponent(),w.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:i},eWrapper:s,pickerComponent:o}=this,a=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:s,ePopup:o.getGui(),position:"under",alignSide:a,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();TS(t,e);const n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return Qp(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},AK=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",rE=class extends DK{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(AK)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:cp(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new EK("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),Gj(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===Z.TAB&&this.hidePicker(),t){case Z.ENTER:case Z.UP:case Z.DOWN:case Z.PAGE_UP:case Z.PAGE_DOWN:case Z.PAGE_HOME:case Z.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case Z.ESCAPE:super.onKeyDown(e);break;case Z.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,n){const{listComponent:i,config:{placeholder:s},eDisplayField:o,tooltipFeature:a}=this;if(this.value===e||!i)return this;if(n||i.setValue(e,!0),i.getValue()===this.getValue())return this;let u=i.getDisplayValue();return u==null&&s&&(u=s),o.textContent=u,a?.setTooltipAndRefresh(u??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},FK={selector:"AG-SELECT",component:rE},qc={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},XL=class extends oe{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:a,focusInnerElement:c,onFocusIn:u,onFocusOut:h,shouldStopEventPropagation:f,onTabKeyDown:p,handleKeyDown:m,isEmpty:w,eFocusableElement:S}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=c,this.eFocusableElement=S,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!a,this.providedFocusIn=u,this.providedFocusOut=h,this.providedShouldStopEventPropagation=f,this.providedOnTabKeyDown=p,this.providedHandleKeyDown=m,this.providedIsEmpty=w}postConstruct(){this.createManagedBean(new Eu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():jc(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=Mn(this.beans),n=jc(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let s,o;e?(s=0,o=i):(s=i+1,o=n.length);const a=n.slice(s,o),c=this.gos.get("tabIndex");a.sort((u,h)=>{const f=parseInt(u.getAttribute("tabindex")||"0"),p=parseInt(h.getAttribute("tabindex")||"0");return p===c?1:f===c?-1:f===0?1:p===0?-1:f-p}),a[e?a.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=jc(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return Rl(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},PK=class extends oe{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,s=[t,n],o={setTabIndex:T=>{s.forEach(F=>T!=null?F.setAttribute("tabindex",T):F.removeAttribute("tabindex"))}};this.addTabGuards(t,n);const{focusTrapActive:a=!1,onFocusIn:c,onFocusOut:u,focusInnerElement:h,handleKeyDown:f,onTabKeyDown:p,shouldStopEventPropagation:m,isEmpty:w,forceFocusOutWhenTabGuardsAreEmpty:S,isFocusableContainer:E}=e;this.tabGuardCtrl=this.createManagedBean(new XL({comp:o,focusTrapActive:a,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:c,onFocusOut:u,focusInnerElement:h,handleKeyDown:f,onTabKeyDown:p,shouldStopEventPropagation:m,isEmpty:w,forceFocusOutWhenTabGuardsAreEmpty:S,isFocusableContainer:E}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Mn(this.beans).createElement("div"),n=e==="top"?qc.TAB_GUARD_TOP:qc.TAB_GUARD_BOTTOM;return t.classList.add(qc.TAB_GUARD,n),ll(t,"presentation"),t}addTabGuards(e,t){const n=this.eFocusableElement;n.insertAdjacentElement("afterbegin",e),n.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Ai(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){VR(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Ho(e),Ho(t),super.destroy()}},MK=class extends At{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new PK(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,n){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,n)}},Oa=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new al,this.preventMouseClick=t;const n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchmove",i,{passive:!0}),e.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",n,{passive:!0}),e.removeEventListener("touchmove",i,{passive:!0}),e.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;const i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!DL(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},IK=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!n,this.tickDown=e.clientY>i.bottom-s&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},ZL=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${Ak}/${this.frameworkName}-data-grid`,Yj(this.baseDocLink)}setInterval(e,t){return new it(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let s={};if(typeof i=="object"?s=i:typeof i=="boolean"&&(s={capture:i}),s.passive==null){const o=Kk(t);o!=null&&(s.passive=o)}e.addEventListener(t,n,s)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}};function _K(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var kK=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],oP=Object.fromEntries(kK.map((e,t)=>[e,t]));function LK(e,t){const n=(e.beanName?oP[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?oP[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function OK(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var VK=class extends oe{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:i,ctrlsSvc:s}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),PL(this.gos,t),this.createManagedBean(new YR(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=Wo(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),s.register("gridCtrl",this)}isDetailGrid(){return xL(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){const{visibleCols:s,focusSvc:o}=this.beans,a=s.allCols,c=Ct(a);if(o.focusGridView({column:c,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:i,visibleCols:s}=this.beans,o=s.allCols;if(e){if(n.length>1)return this.focusContainer(Ct(n),e);const a=Ct(o);if(i.focusGridView({column:a,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||nl(this.beans)){if(i.focusGridView({column:o[0],backwards:e}))return!0;for(let a=1;a<n.length;a++)if(fl(n[a].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||n<0||n>=t.length)return;const s=t[n];s.setAllowFocus?.(!0),setTimeout(()=>{s.setAllowFocus?.(!1)})}isFocusable(){const e=this.beans;return!Xm(e)||!nl(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const n=$t(this.beans),i=e.findIndex(o=>o.getGui().contains(n)),s=i+(t?-1:1);return{indexWithFocus:i,nextIndex:s}}focusContainer(e,t){e.setAllowFocus?.(!0);const n=fl(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Oe=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},rP={dispatchEvent:"CommunityCore",...Oe("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...Oe("GridState",{getState:0,setState:0}),...Oe("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...Oe("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...Oe("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...Oe("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...Oe("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...Oe("ValueCache",{expireValueCache:0}),...Oe("CellApi",{getCellValue:0}),...Oe("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...Oe("Sort",{onSortChanged:0}),...Oe("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...Oe("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...Oe("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...Oe("HighlightChanges",{flashCells:0}),...Oe("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...Oe("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...Oe("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...Oe("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...Oe("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...Oe("ColumnResize",{setColumnWidths:0}),...Oe("ColumnHover",{isColumnHovered:0}),...Oe("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...Oe("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...Oe("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...Oe("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...Oe("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...Oe("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...Oe("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...Oe("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...Oe("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...Oe("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Oe("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Oe("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...Oe("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Oe("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Oe("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Oe("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Oe("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Oe("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Oe("ContextMenu",{showContextMenu:0}),...Oe("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...Oe("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Oe("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...Oe("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...Oe("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Oe("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Oe("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Oe("StatusBar",{getStatusPanel:0})},uw={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},NK=(e,t)=>e.eventSvc.dispatchEvent(t),JL=class{};Reflect.defineProperty(JL,"name",{value:"GridApi"});var BK=class extends oe{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new JL,this.fns={...uw,dispatchEvent:NK},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(rP))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:n,beans:i}=this;n!==uw&&(n[e]=i?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:i}=this;if(!t)ge(26,{fnName:e,preDestroyLink:i});else{const s=rP[e];n.assertModuleRegistered(s,`api.${e}`)&&ge(27,{fnName:e,module:s})}}destroy(){super.destroy(),this.fns=uw,this.beans=null}};function GK(e){return e.context.getGridId()}function HK(e){e.gridDestroySvc.destroy()}function zK(e){return e.gridDestroySvc.destroyCalled}function UK(e,t){return e.gos.get(t)}function WK(e,t,n){eO(e,{[t]:n})}function eO(e,t){e.gos.updateGridOptions({options:t})}function jK(e,t){const n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var $K={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},qK=class extends At{constructor(e,t,n){super($K),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Yi("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:n,eCell:i,gos:s}=this,o=n.getColDef().dndSourceOnRowDrag,a=e.dataTransfer;if(a.setDragImage(i,0,0),o){const c=Pe(s,{rowNode:t,dragEvent:e});o(c)}else try{const c=JSON.stringify(t.data);a.setData("application/json",c),a.setData("text/plain",c)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function KK(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function YK(e,t){const n=e.dragAndDrop?.findExternalZone(t);n&&e.dragAndDrop?.removeDropTarget(n)}function QK(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function XK(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function ZK(e,t){const n=e.rowDropHighlightSvc;if(!n)return;const i=t?.row;let s=t?.dropIndicatorPosition;s!=="above"&&s!=="below"&&s!=="inside"&&(s="none");const o=i?.rowIndex;o==null||s==="none"?n.clear():n.set(i,s)}var JK=class extends oe{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},eY={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},tY=class extends At{constructor(e,t,n,i,s,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=s,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,rowNode:t,column:n,gos:i}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate(eY),this.getGui().appendChild(Yi("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const s=i.get("rowDragManaged")?new iY(this,t,n):new nY(this,t,n);this.createManagedBean(s,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const n=this.beans.selectionSvc?.getSelectedNodes()??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);const n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{const i=this.getDragItem(),s=i.rowNodes?.length||1,o=this.getRowDragText(this.column);return o?o(i,s):s===1?this.cellValueFn():`${s} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},tO=class extends oe{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e,t=!1){const n={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,n);else{let i=!t,s=!1;const{column:o,rowNode:a,parent:c}=this;if(o){const u=o.getColDef().rowDrag;s=typeof u=="function",i=(t?!!u:o.isRowDrag(a))||c.isCustomGui()}s?(c.setDisplayed(!0,n),c.setVisible(i&&!t,n)):(c.setDisplayed(i,n),c.setVisible(!t,n))}}},nY=class extends tO{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},iY=class extends tO{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:n}=this.beans,i=e.rowDragFeature,s=i&&i.shouldPreventRowMove(),o=n.get("suppressRowDrag"),a=t.hasExternalDropZones(),c=s&&!a||o;this.setDisplayedOrVisible(c,this.rowNode.footer)}},Oh=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:i}=e;if(i)for(let s=0;s<i.length;++s)this.depthFirstSearchChangedPath(i[s],t);t(n)}depthFirstSearchEverything(e,t,n){const i=e.childrenAfterGroup;if(i)for(let s=0,o=i.length;s<o;++s){const a=i[s];a.childrenAfterGroup?this.depthFirstSearchEverything(a,t,n):n&&t(a)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){const s=this.mapToItems[n.id],o=this.mapToItems[n.parent.id];o.children||(o.children=[]),o.children.push(s),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(s=>n[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(s=>!n[s.getId()])}},sY=class extends oe{constructor(e){super(),this.eContainer=null,this.lastDraggingEvent=null,this.autoScrollService=null,this.makeGroupThrottleTimer=null,this.makeGroupThrottleTarget=null,this.makeGroupThrottled=!1,this.makeGroupThrottleCallback=()=>{this.makeGroupThrottleTimer=null;const t=this.lastDraggingEvent;t&&(this.makeGroupThrottled=!0,this.doManagedDrag(t,!1),this.makeGroupExpanded(this.makeGroupThrottleTarget))},this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:n}=this.beans;gn(t)&&(this.clientSideRowModel=e),n.whenReady(this,i=>{const s=i.gridBodyCtrl;let o=0;const a=()=>s.scrollFeature.getVScrollPosition().top;this.autoScrollService=new IK({scrollContainer:s.eBodyViewport,scrollAxis:"y",getVerticalPosition:a,setVerticalPosition:c=>s.scrollFeature.setVerticalScrollPosition(c),onScrollCallback:()=>{const c=a();if(o!==c){o=c;const u=this.lastDraggingEvent;u&&this.onDragging(u)}}})})}destroy(){super.destroy(),this.eContainer=null,this.lastDraggingEvent=null,this.makeGroupThrottleClear();const e=this.autoScrollService;e&&(this.autoScrollService=null,e?.ensureCleared())}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:n}=this.beans;return!!((e?.columns??[]).length||t?.isAnyFilterPresent()||n?.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=[...this.beans.selectionSvc?.getSelectedNodes()??[]].sort((s,o)=>s.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(o));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.autoScrollService&&(this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e,this.gos.get("rowDragManaged")&&this.doManagedDrag(e,!0),this.autoScrollService.check(e.event))}doManagedDrag(e,t){const{dragAndDrop:n,gos:i}=this.beans,s=this.isFromThisGrid(e);if(!(i.get("rowDragManaged")&&this.shouldPreventRowMove()))if(i.get("suppressMoveWhenRowDragging")||!s){if(n.isDropZoneWithinThisGrid(e)){const a=this.managedRowsDrop(e,t),c=a?.target,u=this.beans.rowDropHighlightSvc;c&&a.rows.length?u.set(c,a.position):u.clear()}}else{const a=this.managedRowsDrop(e,t);a&&this.dropRows(a)}}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(Ct(t.split("-")),10)}managedRowsDrop(e,t){const{rowNode:n,rowNodes:i}=e.dragItem,o=i?.length&&(n??i[0]);if(!o)return this.makeGroupThrottleClear(),null;const{beans:a,gos:c,clientSideRowModel:u}=this,h=u.rootNode,f=zF(a,e).y;let p=u.getRowIndexAtPixel(f),m=u.getRow(p)??null;const w=o!==m;let S=m?(f-m.rowTop-m.rowHeight/2)/m.rowHeight||0:1;const E=this.isFromThisGrid(e),F=Wk(c)!=="group"&&E;let P=null;if(F&&m?.footer){P=m.sibling??h;const O=ah(u,-1,m)??ah(u,1,m);S=O&&O.rowIndex>m.rowIndex?-.5:.5,m=O??null}let M=S<0,U=!1;if(E&&m){if(w){if(U=i.indexOf(m)>=0,U){const O=oY(u,p<o.rowIndex,i);O?.parent===m.parent&&(m=O,p=m.rowIndex)}}else{if(Math.abs(S)<=.5)return this.makeGroupThrottleClear(),null;U=!0}(U||!F&&Math.abs(p-o.rowIndex)===1)&&(M=p<o.rowIndex)}const z=this.makeGroupThrottleTarget;z!==null&&z!==m&&this.makeGroupThrottleClear(),m?.expanded&&m.childrenAfterSort?.length&&(this.makeGroupThrottled=!0,this.makeGroupThrottleTarget=m),P===null&&F&&(!m||S>=.5&&m.rowIndex===a.pageBounds.getLastRow()?P=h:this.targetShouldBeParent(m,S,U,i)&&(this.makeGroupThrottled&&(P=m),t&&(P===null||!m.expanded)&&(this.makeGroupThrottleTarget=m,this.makeGroupThrottleStart())),P??(P=m?.parent??h));let j=!1;if(P!==null){if(P===m&&P!==h){j=!0;const O=P.expanded?ah(u,1,m):null;O?.parent===P&&(m=O,j=!1,M=!0)}if(m&&!j){let O=m;for(;O&&O!==h&&O!==P;)m=O,O=O.parent}aY(i,P)&&(P=null)}if(!P&&U&&(F||o===m))return null;const I=j?"inside":M?"above":"below",A={api:this.beans.gridApi,context:this.beans.gridOptions.context,draggingEvent:e,sameGrid:E,position:I,source:o,target:m,newParent:P,rows:i};let _=!1;const L=c.get("isRowValidDropPosition");if(L){const O=L(A);O?typeof O=="object"&&(O.rows!==void 0&&(A.rows=O.rows??nm),O.newParent!==void 0&&(A.newParent=O.newParent),O.target!==void 0&&(A.target=O.target),O.position&&(_=!0,A.position=O.position)):A.rows=nm}return(!A.newParent||!A.rows.length)&&!_&&(A.position=M?"above":"below"),A}makeGroupThrottleStart(){this.makeGroupThrottleTimer===null&&(this.makeGroupThrottleTimer=window.setTimeout(this.makeGroupThrottleCallback,this.gos.get("rowDragInsertDelay")))}makeGroupExpanded(e){e&&!e.expanded&&e.childrenAfterSort?.length&&e.isExpandable()&&e.setExpanded(!0,this.lastDraggingEvent?.event,!0)}makeGroupThrottleClear(){this.makeGroupThrottled=!1,this.makeGroupThrottleTarget=null;const e=this.makeGroupThrottleTimer;e!==null&&(this.makeGroupThrottleTimer=null,clearTimeout(e))}targetShouldBeParent(e,t,n,i){const s=e?.rowIndex;if(n||s===null)return!1;const o=.25;if(t<-.5+o)return!1;if(t<.5-o)return!0;let a,c=s+1;const u=this.clientSideRowModel;do a=u.getRow(c++);while(a&&a.footer);const h=e.childrenAfterGroup;if(a&&a.parent===e&&h?.length){const f=new Set(i);for(const p of h)if(p.rowIndex!==null&&!f.has(p))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){ge(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e)){ge(56);return}let n={getContainer:e.getContainer};e.fromGrid?n=e:(e.onDragEnter&&(n.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",s))}),e.onDragLeave&&(n.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",s))}),e.onDragging&&(n.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",s))}),e.onDragStop&&(n.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",s))}),e.onDragCancel&&(n.onDragCancel=s=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",s))}));const i={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...n};t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),s=this.onDragging.bind(this),o=this.onDragStop.bind(this),a=this.onDragCancel.bind(this);let c;return e?c={getContainer:t,onDragEnter:e.onDragEnter?u=>{n(u),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",u))}:n,onDragLeave:e.onDragLeave?u=>{i(u),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",u))}:i,onDragging:e.onDragging?u=>{s(u),e.onDragging(this.draggingToRowDragEvent("rowDragMove",u))}:s,onDragStop:e.onDragStop?u=>{o(u),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",u))}:o,onDragCancel:e.onDragCancel?u=>{a(u),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",u))}:a,fromGrid:!0}:c={getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:s,onDragStop:o,onDragCancel:a,fromGrid:!0},c}draggingToRowDragEvent(e,t){const n=this.beans,{pageBounds:i,rowModel:s,gos:o}=n,a=zF(this.beans,t).y,c=a>i.getCurrentPagePixelRange().pageLastPixel;let u=-1,h;return c||(u=s.getRowIndexAtPixel(a),h=s.getRow(u)),Pe(o,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:u,overNode:h,y:a,vDirection:t.vDirection})}dispatchGridEvent(e,t){const n=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.beans.rowDropHighlightSvc.clear(),this.makeGroupThrottleClear()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:n}=this.beans;if(n.get("rowDragManaged")&&(n.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)){const i=this.managedRowsDrop(e,!1);i&&this.dropRows(i),this.beans.rowDropHighlightSvc.clear()}this.makeGroupThrottleClear()}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:n}=this.beans;n.get("rowDragManaged")&&(n.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.beans.rowDropHighlightSvc.clear(),this.makeGroupThrottleClear()}stopDragging(e){this.autoScrollService?.ensureCleared(),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!1)})}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}dropRows(e){return e.sameGrid?this.moveRows(e):this.addRows(e)}addRows({position:e,target:t,rows:n}){const i=ou(this.gos),s=this.clientSideRowModel,o=n.filter(({data:c,rowPinned:u})=>!s.getRowNode(i?.({data:c,level:0,rowPinned:u})??c.id)).map(({data:c})=>c);if(o.length===0)return!1;const a=t?aP(t)+(e==="above"?0:1):void 0;return s.updateRowData({add:o,addIndex:a}),!0}refreshModelAfterDrop(){this.clientSideRowModel.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Oh(!1,this.clientSideRowModel.rootNode),rowNodesOrderChanged:!0})}moveRows({position:e,target:t,rows:n,newParent:i}){let s=!1;const o=this.clientSideRowModel,a=new Set;for(const f of n){if(f.footer||f.rowTop===null&&f!==o.getRowNode(f.id))continue;if(i&&f.parent!==i){if(rY(f,i))continue;f.treeParent=i,s=!0}const p=nO(f);p&&a.add(p)}if(!s&&a.size===0)return!1;const c=this.beans.focusSvc,u=c.getFocusedCell(),h=u&&$d(this.beans,u);return a.size&&this.reorderLeafChildren(a,...this.getMoveRowsBounds(a,t,e==="above"))&&(s=!0),s?(this.refreshModelAfterDrop(),h?h.focusCell():c.clearFocusedCell(),!0):!1}getMoveRowsBounds(e,t,n){const i=this.clientSideRowModel.rootNode?.allLeafChildren.length??0;let s=aP(t);s<0||s>=i?s=i:n||++s;let o=s,a=Math.min(s,i-1);for(const c of e){const u=c.sourceRowIndex;u<o&&(o=u),u>a&&(a=u)}return[o,s,a]}reorderLeafChildren(e,t,n,i){let s=!1;const o=this.clientSideRowModel.rootNode?.allLeafChildren;if(!e.size||!o)return!1;let a=t;for(let u=t;u<n;++u){const h=o[u];e.has(h)||(h.sourceRowIndex!==a&&(h.sourceRowIndex=a,o[a]=h,s=!0),++a)}let c=i;for(let u=i;u>=n;--u){const h=o[u];e.has(h)||(h.sourceRowIndex!==c&&(h.sourceRowIndex=c,o[c]=h,s=!0),--c)}for(const u of e)u.sourceRowIndex!==a&&(u.sourceRowIndex=a,o[a]=u,s=!0),++a;return s}},oY=(e,t,n)=>t?ah(e,-1,n[0]):ah(e,1,Ct(n)),ah=(e,t,n)=>{if(n){const i=e.getRowCount();let s=n.rowIndex+t;for(;s>=0&&s<i;){const o=e.getRow(s);if(!o||!o.footer)return o;s+=t}}},rY=(e,t)=>{let n=t;for(;n;){if(n===e)return!0;n=n.parent}return!1},aY=(e,t)=>{for(let n=0,i=e.length;n<i;++n)if(e[n].parent!==t)return!1;return!0},aP=e=>{const t=nO(e);return t!==void 0?t.sourceRowIndex:-1},nO=e=>{for(;e;){if(e.sourceRowIndex>=0)return e;const t=e.childrenAfterGroup;if(!t?.length)return;e=t[0]}},lY=class extends oe{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const n=t.createManagedBean(new sY(e)),i=this.beans.dragAndDrop;i.addDropTarget(n),t.addDestroyFunc(()=>i.removeDropTarget(n)),this.rowDragFeature=n}createRowDragComp(e,t,n,i,s,o){return new tY(e,t,n,i,s,o)}createRowDragCompForRow(e,t){if(jr(this.gos))return;const n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,i,s,o){const a=this.gos;return a.get("rowDragManaged")&&(!gn(a)||a.get("pagination"))?void 0:this.createRowDragComp(n,e,t,i,s,o)}},cY=class extends oe{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row;!e||e.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position)}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const n=e!==this.row,i=e.uiLevel,s=t!==this.position,o=i!==this.uiLevel;(n||s||o)&&(n&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}},iO={moduleName:"Drag",version:ye,beans:[P$]},uY={moduleName:"DragAndDrop",version:ye,dynamicBeans:{dndSourceComp:qK},icons:{rowDrag:"grip"}},sO={moduleName:"SharedDragAndDrop",version:ye,beans:[F$],dependsOn:[iO],userComponents:{agDragAndDropImage:Xq},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},dY={moduleName:"RowDrag",version:ye,beans:[cY,lY],apiFunctions:{addRowDropZone:KK,removeRowDropZone:YK,getRowDropZoneParams:QK,getRowDropPositionIndicator:XK,setRowDropPositionIndicator:ZK},dependsOn:[sO]},hY={moduleName:"HorizontalResize",version:ye,beans:[JK],dependsOn:[iO]},fY=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",gY=class extends oe{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){e(),t();return}const s=o=>{for(;o.length;){const a=o.pop();a&&a()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),s(n)},0),window.setTimeout(()=>{t(),s(i)},200)})}};function pY(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function mY(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var CY=class extends oe{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function vY(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,s)=>{const o=e.indexOf(i),a=e.indexOf(s);return o-a})}function yY(e){const t=[...e];return e.forEach(n=>{let i=null,s=n.getParent();for(;s!=null&&s.getDisplayedLeafColumns().length===1;)i=s,s=s.getParent();i!=null&&(!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach(c=>{t.includes(c)||t.push(c)})}),t}function wY(e,t,n,i){const s=i.allCols;let o=null,a=null;for(let c=0;c<e.length;c++){const u=e[c],h=n.getProposedColumnOrder(t,u);if(!n.doesOrderPassRules(h))continue;const f=h.filter(m=>s.includes(m));if(a===null)a=f;else if(!bl(f,a))break;const p=bY(h);(o===null||p<o.fragCount)&&(o={move:u,fragCount:p})}return o}function oO(e){const{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:s,fakeEvent:o,pinned:a,gos:c,colModel:u,colMoves:h,visibleCols:f}=e;let{allMovingColumns:p}=e;t&&(p=yY(p));const m=p.slice();vY(u.getCols(),m);const w=EY({movingCols:m,draggingRight:n,xPosition:i,pinned:a,gos:c,colModel:u,visibleCols:f}),S=SY(m,u);if(w.length===0)return;const E=w[0];if(S!==null&&(t||!s)&&!o&&(!n&&E>=S||n&&E<=S))return;const F=wY(w,m,h,f);if(!F)return;const P=F.move;if(!(P>u.getCols().length-m.length))return{columns:m,toIndex:P}}function rO(e){const{columns:t,toIndex:n}=oO(e)||{},{finished:i,colMoves:s}=e;return!t||n==null?null:(s.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function SY(e,t){const n=t.getCols(),i=e.map(u=>n.indexOf(u)).sort((u,h)=>u-h),s=i[0];return Ct(i)-s!==i.length-1?null:s}function bY(e){function t(i){const s=[];let o=i.getOriginalParent();for(;o!=null;)s.push(o),o=o.getOriginalParent();return s}let n=0;for(let i=0;i<e.length-1;i++){let s=t(e[i]),o=t(e[i+1]);[s,o]=s.length>o.length?[s,o]:[o,s],s.forEach(a=>{o.indexOf(a)===-1&&n++})}return n}function RY(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function EY(e){const{movingCols:t,draggingRight:n,xPosition:i,pinned:s,gos:o,colModel:a,visibleCols:c}=e;if(o.get("suppressMovableColumns")||t.some(M=>M.getColDef().suppressMovable))return[];const h=RY(c,s),f=a.getCols(),p=h.filter(M=>t.includes(M)),m=h.filter(M=>!t.includes(M)),w=f.filter(M=>!t.includes(M));let S=0,E=i;if(n){let M=0;p.forEach(U=>M+=U.getActualWidth()),E-=M}if(E>0){for(let M=0;M<m.length;M++){const U=m[M];if(E-=U.getActualWidth(),E<0)break;S++}n&&S++}let T;if(S>0){const M=m[S-1];T=w.indexOf(M)+1}else T=w.indexOf(m[0]),T===-1&&(T=0);const F=[T],P=(M,U)=>M-U;if(n){let M=T+1;const U=f.length-1;for(;M<=U;)F.push(M),M++;F.sort(P)}else{let M=T;const U=f.length-1;let z=f[M];for(;M<=U&&h.indexOf(z)<0;)M++,F.push(M),z=f[M];M=T-1;const j=0;for(;M>=j;)F.push(M),M--;F.sort(P).reverse()}return F}function qS(e){const{pinned:t,fromKeyboard:n,gos:i,ctrlsSvc:s,useHeaderRow:o,skipScrollPadding:a}=e;let c=s.getHeaderRowContainerCtrl(t)?.eViewport,{x:u}=e;return c?(n&&(u-=c.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(c=c.querySelector(".ag-header-row")),u=c.clientWidth-u),t==null&&!a&&(u+=s.get("center").getCenterViewportScrollLeft()),u):0}function dw(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var lP=7,KS=100,Kg=KS/2,TY=5,xY=100,DY=class extends oe{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Ce(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},i=n?.columns??[];for(const s of i){const o=s.getPinned();if(s.getColDef().lockPinned){if(o==e)return"move";continue}const a=n?.containerType;if(a===e||!e)return"move";if(e&&(!o||a!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const s=t.visibleState,o=(n||[]).filter(a=>s[a.getId()]&&!a.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){const{gos:s,ctrlsSvc:o}=this.beans,a=s.get("suppressMoveWhenColumnDragging");if(i&&!a){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&Vt(e.hDirection))return;const c=qS({x:e.x,pinned:this.pinned,gos:s,ctrlsSvc:o});t||this.checkCenterForScrolling(c),a?this.handleColumnDragWhileSuppressingMovement(e,t,n,c,i):this.handleColumnDragWhileAllowingMovement(e,t,n,c,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;const i=e.filter(s=>!s.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,i,s){const o=this.getAllMovingColumns(e,!0);if(s){const a=this.isAttemptingToPin(o);a&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:c,xPosition:u}=this.getNormalisedXPositionInfo(o,a)||{};if(c==null||u==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:u,fromEnter:t,fakeEvent:n,fromLeft:c})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,s){const o=this.getAllMovingColumns(e),a=this.normaliseDirection(e.hDirection)==="right",c=e.dragSource.type===1,u=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:c,xPosition:i,fromLeft:a,fromEnter:t,fakeEvent:n}),h=rO({...u,finished:s});h&&(this.lastMovedInfo=h)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;const s=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(s):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:s,fromEnter:o,fakeEvent:a}=e,{gos:c,colModel:u,colMoves:h,visibleCols:f}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:s,xPosition:i,pinned:this.pinned,fromEnter:o,fakeEvent:a,gos:c,colModel:u,colMoves:h,visibleCols:f}}highlightHoveredColumn(e,t){const{gos:n,colModel:i}=this.beans,s=n.get("enableRtl"),o=i.getCols().filter(f=>f.isVisible()&&f.getPinned()===this.pinned);let a=null,c=null,u=null;for(const f of o){if(c=f.getActualWidth(),a=this.getNormalisedColumnLeft(f,0,s),a!=null){const p=a+c;if(a<=t&&p>=t){u=f;break}}a=null,c=null}if(u)e.indexOf(u)!==-1&&(u=null);else{for(let f=o.length-1;f>=0;f--){const p=o[f],m=o[f].getParent();if(!m){u=p;break}const w=m?.getDisplayedLeafColumns();if(w.length){u=Ct(w);break}}if(!u)return;a=this.getNormalisedColumnLeft(u,0,s),c=u.getActualWidth()}if(this.lastHighlightedColumn?.column!==u&&this.clearHighlighted(),u==null||a==null||c==null)return;let h;t-a<c/2!==s?h=0:h=1,cP(u,h),this.lastHighlightedColumn={column:u,position:h}}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:i}=this.beans,s=n.get("enableRtl"),{firstMovingCol:o,column:a,position:c}=this.getColumnMoveAndTargetInfo(e,t,s);if(!o||!a||c==null)return;const u=i.allCols,h=u.indexOf(o),f=u.indexOf(a),p=c===0!==s,m=h<f||h===f&&!p;let w=0;if(p?m&&(w-=1):m||(w+=1),f+w===h)return;const S=u[f+w];if(!S)return;const E=this.getNormalisedColumnLeft(S,20,s);return{fromLeft:m,xPosition:E}}getColumnMoveAndTargetInfo(e,t,n){const i=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:o}=AY(e);if(!s||!o||i.column||!t)return{firstMovingCol:s,...i};const c=this.getPinDirection()==="left";return{firstMovingCol:s,position:c?1:0,column:c!==n?s:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:i,ctrlsSvc:s}=this.beans,o=e.getLeft();if(o==null)return null;const a=e.getActualWidth();return qS({x:n?o+a-t:o+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:s})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>lP;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:s,fromLeft:o}=e,a=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:o,fromEnter:i,fakeEvent:s}),{columns:c,toIndex:u}=oO(a)||{};c&&u!=null&&(this.lastMovedInfo={columns:c,toIndex:u}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(cP(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();let s,o;this.gos.get("enableRtl")?(s=e<n+Kg,o=e>i-Kg):(o=e<n+Kg,s=e>i-Kg),this.needToMoveRight=s,this.needToMoveLeft=o,o||s?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),xY),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*TY,e>KS&&(e=KS);let t=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:i,dragAndDrop:s,gos:o}=this.beans;if(this.failedMoveAttempts<=lP+1||!i)return;if(s.getDragAndDropImageComponent()?.setIcon("pinned",!1),!o.get("suppressMoveWhenColumnDragging")){const a=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(a,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){const i=(e||[]).filter(a=>!a.getColDef().lockPinned);if(!i.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:s,dragAndDrop:o}=this.beans;return s?.setColsPinned(i,t,"uiColumnDragged"),n&&o.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function cP(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function AY(e){const t=e.length;let n,i;for(let s=0;s<t;s++){if(!n){const o=e[s];o.getLeft()!=null&&(n=o)}if(!i){const o=e[t-1-s];o.getLeft()!=null&&(i=o)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var FY=class extends oe{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,i=>{let s;const o=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":s=[[o,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":s=[[o,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:s=[[o,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=s}),this.moveColumnFeature=this.createManagedBean(new DY(n)),this.bodyDropPivotTarget=this.createManagedBean(new CY(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},PY=class extends oe{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const i=this.beans.colModel.getCols();if(!i)return;const s=i[e];this.moveColumns([s],t,n)}moveColumns(e,t,n,i=!0){const{colModel:s,colAnimation:o,visibleCols:a,eventSvc:c}=this.beans,u=s.getCols();if(!u)return;if(t>u.length-e.length){ge(30,{toIndex:t});return}o?.start();const h=s.getColsForKeys(e);this.doesMovePassRules(h,t)&&(LF(s.getCols(),h,t),a.refresh(n),c.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,toIndex:t,finished:i,source:n})),o?.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;return!(!iL(e,t.getColTree())||!(s=>{const o=h=>h?h==="left"||h===!0?-1:1:0,a=n.get("enableRtl");let c=a?1:-1,u=!0;return s.forEach(h=>{const f=o(h.getColDef().lockPosition);a?f>c&&(u=!1):f<c&&(u=!1),c=f}),u})(e))}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return LF(i,e,t),i}createBodyDropTarget(e,t){return new FY(e,t)}moveHeader(e,t,n,i,s){const{ctrlsSvc:o,gos:a,colModel:c,visibleCols:u,focusSvc:h}=this.beans,f=t.getBoundingClientRect(),p=f.left,m=on(n),w=m?f.width:n.getActualWidth(),S=e==="left"!==a.get("enableRtl"),E=qS({x:S?p-20:p+w+20,pinned:i,fromKeyboard:!0,gos:a,ctrlsSvc:o}),T=h.focusedHeader;rO({allMovingColumns:m?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:E,pinned:i,fromEnter:!1,fakeEvent:!1,gos:a,colModel:c,colMoves:this,visibleCols:u,finished:!0});let F;if(m){const P=n.getDisplayedLeafColumns();F=S?P[0]:Ct(P)}else F=n;if(o.getScrollFeature().ensureColumnVisible(F,"auto"),(!s.isAlive()||a.get("ensureDomOrder"))&&T){let P;if(m){const M=n.getGroupId(),U=n.getLeafColumns();if(!U.length)return;const z=U[0].getParent();if(!z)return;P=MY(z,M)}else P=n;P&&h.focusHeaderPosition({headerPosition:{...T,column:P}})}}setDragSourceForHeader(e,t,n){const{gos:i,colModel:s,dragAndDrop:o,visibleCols:a}=this.beans;let c=!i.get("suppressDragLeaveHidesColumns");const u=on(t),h=u?t.getProvidedColumnGroup().getLeafColumns():[t],p={type:1,eElement:e,getDefaultIconName:()=>c?"hide":"notAllowed",getDragItem:u?()=>_Y(t,a.allCols):()=>IY(t),dragItemName:n,onDragStarted:()=>{c=!i.get("suppressDragLeaveHidesColumns"),dw(h,!0)},onDragStopped:()=>dw(h,!1),onDragCancelled:()=>dw(h,!1),onGridEnter:m=>{if(c){const{columns:w=[],visibleState:S}=m??{},E=u?F=>!S||S[F.getColId()]:()=>!0,T=w.filter(F=>!F.getColDef().lockVisible&&E(F));s.setColsVisible(T,!0,"uiColumnMoved")}},onGridExit:m=>{if(c){const w=m?.columns?.filter(S=>!S.getColDef().lockVisible)||[];s.setColsVisible(w,!1,"uiColumnMoved")}}};return o.addDragSource(p,!0),p}};function MY(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function IY(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function _Y(e,t){const n=e.getProvidedColumnGroup().getLeafColumns(),i={};n.forEach(c=>i[c.getId()]=c.isVisible());const s=[];t.forEach(c=>{n.indexOf(c)>=0&&(s.push(c),Ji(n,c))}),n.forEach(c=>s.push(c));const o=[],a=e.getLeafColumns();for(const c of s)a.indexOf(c)!==-1&&o.push(c);return{columns:s,columnsInSplit:o,visibleState:i,containerType:o[0]?.pinned}}var kY={moduleName:"ColumnMove",version:ye,beans:[PY,gY],apiFunctions:{moveColumnByIndex:pY,moveColumns:mY},dependsOn:[sO],css:[fY]},LY=class extends oe{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;e.forEach(o=>this.cloneItemIntoDummy(o,n)),i.appendChild(n);const s=n.offsetWidth;return i.removeChild(n),t=t??this.gos.get("autoSizePadding"),s+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(n=>{const i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const i=document.createElement("div"),s=i.classList;["ag-header-cell","ag-header-group-cell"].some(c=>n.classList.contains(c))?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(u=>a.classList.contains(u))){for(let u=0;u<a.classList.length;u++){const h=a.classList[u];h!="ag-row-position-absolute"&&s.add(h)}break}a=a.parentElement}i.appendChild(n),t.appendChild(i)}},aO={moduleName:"AutoWidth",version:ye,beans:[LY]};function OY(e,t,n=!0,i="api"){e.colResize?.setColumnWidths(t,!1,n,i)}var VY=class extends oe{constructor(e,t,n,i){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:s,groupAfterStartWidth:o,groupAfterRatios:a}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=a,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const i=this.normaliseDragChange(t),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)}getInitialValues(e){const t=u=>u.reduce((h,f)=>h+f.getActualWidth(),0),n=(u,h)=>u.map(f=>f.getActualWidth()/h),i=this.getColumnsToResize(),s=t(i),o=n(i,s),a={columnsToResize:i,resizeStartWidth:s,resizeRatios:o};let c=null;if(e&&(c=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),c){const u=c.getDisplayedLeafColumns(),h=a.groupAfterColumns=u.filter(p=>p.isResizable()),f=a.groupAfterStartWidth=t(h);a.groupAfterRatios=n(h,f)}else a.groupAfterColumns=void 0,a.groupAfterStartWidth=void 0,a.groupAfterRatios=void 0;return a}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){const{columnsToResize:s,resizeStartWidth:o,resizeRatios:a,groupAfterColumns:c,groupAfterStartWidth:u,groupAfterRatios:h}=e,f=[];if(f.push({columns:s,ratios:a,width:t}),c){const p=t-o;f.push({columns:c,ratios:h,width:u-p})}this.beans.colResize?.resizeColumnSets({resizeSets:f,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},NY=class extends oe{constructor(e,t,n,i,s){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=s}postConstruct(){const e=[];let t,n;const i=()=>{if(Ut(this.eResize,t),!t)return;const{horizontalResizeSvc:a,colAutosize:c}=this.beans,u=a.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(u),n&&c&&e.push(c.addColumnAutosize(this.eResize,this.column))},s=()=>{e.forEach(a=>a()),e.length=0},o=()=>{const a=this.column.isResizable(),c=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==t||c!==n)&&(t=a,n=c,s(),i())};o(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:n,lastResizeAmount:i,resizeStartWidth:s,beans:o}=this,a=this.normaliseResizeAmount(t),c=s+a,u=[{key:n,newWidth:c}],{pinnedCols:h,ctrlsSvc:f,colResize:p}=o;if(this.column.getPinned()){const m=h?.leftWidth??0,w=h?.rightWidth??0,S=Fh(f.getGridBodyCtrl().eBodyViewport)-50;if(m+w+(a-i)>S)return}this.lastResizeAmount=a,p?.setColumnWidths(u,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},BY=class extends oe{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,i){const s=[],{colModel:o,gos:a,visibleCols:c}=this.beans;e.forEach(u=>{const h=o.getColDefCol(u.key)||o.getCol(u.key);if(!h)return;if(s.push({width:u.newWidth,ratios:[1],columns:[h]}),a.get("colResizeDefault")==="shift"&&(t=!t),t){const p=c.getColAfter(h);if(!p)return;const m=h.getActualWidth()-u.newWidth,w=p.getActualWidth()+m;s.push({width:w,ratios:[1],columns:[p]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:n,source:i})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(f=>GY(f)))){if(n){const f=t&&t.length>0?t[0].columns:null;ru(this.eventSvc,f,n,i)}return}const o=[],a=[];t.forEach(f=>{const{width:p,columns:m,ratios:w}=f,S={},E={};m.forEach(P=>a.push(P));let T=!0,F=0;for(;T;){if(F++,F>1e3){vt(31);break}T=!1;const P=[];let M=0,U=p;m.forEach((j,I)=>{if(E[j.getId()])U-=S[j.getId()];else{P.push(j);const _=w[I];M+=_}});const z=1/M;P.forEach((j,I)=>{const A=I===P.length-1;let _;A?_=U:(_=Math.round(w[I]*p*z),U-=_);const L=j.getMinWidth(),O=j.getMaxWidth();_<L?(_=L,E[j.getId()]=!0,T=!0):O>0&&_>O&&(_=O,E[j.getId()]=!0,T=!0),S[j.getId()]=_})}m.forEach(P=>{const M=S[P.getId()];P.getActualWidth()!==M&&(P.setActualWidth(M,i),o.push(P))})});const c=o.length>0;let u=[];if(c){const{colFlex:f,visibleCols:p,colViewport:m}=this.beans;u=f?.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0})??[],p.setLeftValues(i),p.updateBodyWidths(),m.checkViewportColumns()}const h=a.concat(u);(c||n)&&ru(this.eventSvc,h,n,i,u)}resizeHeader(e,t,n){if(!e.isResizable())return;const i=e.getActualWidth(),s=e.getMinWidth(),o=e.getMaxWidth(),a=Math.min(Math.max(i+t,s),o);this.setColumnWidths([{key:e,newWidth:a}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,i,s){return new NY(e,t,n,i,s)}createGroupResizeFeature(e,t,n,i){return new VY(e,t,n,i)}};function GY(e){const{columns:t,width:n}=e;let i=0,s=0,o=!0;t.forEach(u=>{const h=u.getMinWidth();i+=h||0;const f=u.getMaxWidth();f>0?s+=f:o=!1});const a=n>=i,c=!o||n<=s;return a&&c}var HY={moduleName:"ColumnResize",version:ye,beans:[BY],apiFunctions:{setColumnWidths:OY},dependsOn:[hY,aO]},zY=class extends oe{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},UY=class extends tE{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,n,i,s){const{column:o,beans:a}=this,{context:c,colNames:u,colHover:h,rangeSvc:f,colResize:p}=a;this.comp=e,s=nf(this,c,s),this.setGui(t,s),this.displayName=u.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:s}),this.setupUserComp(),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const m=this.rowCtrl.pinned,w=o.getProvidedColumnGroup().getLeafColumns();h?.createHoverFeature(s,w,t),f?.createRangeHighlightFeature(s,o,e),s.createManagedBean(new eE(o,t,a)),s.createManagedBean(new zY(e,o)),p?this.resizeFeature=s.createManagedBean(p.createGroupResizeFeature(e,n,m,o)):e.setResizableDisplayed(!1),s.createManagedBean(new Eu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,w),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return Pe(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=Ct(t)===e;if(!n&&!i)return;const s=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(u=>u.column.isMoving());let a=!1,c=!1;if(o){const u=this.beans.gos.get("enableRtl"),h=s===1,f=s===0;n&&(u?c=h:a=f),i&&(u?a=f:c=h)}this.comp.toggleCss("ag-header-highlight-before",a),this.comp.toggleCss("ag-header-highlight-after",c)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const i=n.getInitialValues(t);n.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:i}=this.beans,s=this.column,o=s.getProvidedColumnGroup(),a=Pe(n,{displayName:this.displayName,columnGroup:s,setExpanded:u=>{e.setColumnGroupOpened(o,u,"gridInitializing")},setTooltip:(u,h)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(u,h)},showColumnMenu:(u,h)=>i?.showMenuAfterButtonClick(o,u,"columnMenu",h),showColumnMenuAfterMouseClick:(u,h)=>i?.showMenuAfterMouseEvent(o,u,"columnMenu",h),eGridHeader:this.eGui}),c=v8(t,a);c&&this.comp.setUserCompDetails(c)}addHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=EL(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text")),n.forEach(i=>this.comp.toggleCss(i,!0))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());i.forEach(o=>{e.addManagedListeners(o,{movingChanged:s})}),s()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===Z.ENTER){const n=this.column,i=!n.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function WY(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function jY(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function $Y(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function qY(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function KY(e){return e.colGroupSvc?.getColumnGroupState()??[]}function YY(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function QY(e){e.colGroupSvc?.resetColumnGroupState("api")}function XY(e){return e.visibleCols.treeLeft}function ZY(e){return e.visibleCols.treeCenter}function JY(e){return e.visibleCols.treeRight}function eQ(e){return e.visibleCols.getAllTrees()}function tQ(e,t){for(let n=0;n<t.length;n++){const i=e.indexOf(t[n]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var nQ=class extends oe{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:n,colModel:i,colGroupSvc:s,colViewport:o,selectionColSvc:a}=this.beans;t||this.buildTrees(i,s),s?.updateOpenClosedVisibility(),this.leftCols=hw(this.treeLeft),this.centerCols=hw(this.treeCenter),this.rightCols=hw(this.treeRight),a?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(c=>c.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){const i=n.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}n=n.getParent()}}return e}updateBodyWidths(){const e=xo(this.centerCols),t=xo(this.leftCols),n=xo(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,i){let s,o;this.gos.get("enableRtl")?(s=t?t[0]:null,o=n?Ct(n):null):(s=t?Ct(t):null,o=n?n[0]:null),e.getCols().forEach(a=>{a.setLastLeftPinned(a===s,i),a.setFirstRightPinned(a===o,i)})}buildTrees(e,t){const n=e.getColsToShow(),i=n.filter(u=>u.getPinned()=="left"),s=n.filter(u=>u.getPinned()=="right"),o=n.filter(u=>u.getPinned()!="left"&&u.getPinned()!="right"),a=new lL,c=u=>t?t.createColumnGroups(u):u.columns;this.treeLeft=c({columns:i,idCreator:a,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=c({columns:s,idCreator:a,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=c({columns:o,idCreator:a,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],i=[],s=[];for(const o of t){const a=o.getPinned();a?a===!0||a==="left"?n.push(o):s.push(o):i.push(o)}this.ariaOrderColumns=n.concat(i).concat(s)}getAriaColIndex(e){let t;return on(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{on(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),s=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(o=>{if(s){let a=xo(o);o.forEach(c=>{a-=c.getActualWidth(),c.setLeft(a,e)})}else{let a=0;o.forEach(c=>{c.setLeft(a,e),a+=c.getActualWidth()})}tQ(i,o)}),i.forEach(o=>{o.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,i){const s=[];let o=null;for(let a=0;a<t.length;a++){const c=t[a],u=t.length-a,h=Math.min(c.getColSpan(e),u),f=[c];if(h>1){const m=h-1;for(let w=1;w<=m;w++)f.push(t[a+w]);a+=m}let p;n?(p=!1,f.forEach(m=>{n(m)&&(p=!0)})):p=!0,p&&(s.length===0&&o&&(i&&i(c))&&s.push(o),s.push(c)),o=c}return s}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};il(this.treeCenter,!1,e),il(this.treeLeft,!1,e),il(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const i=this[t[n]];if(i.length)return e?Ct(i):i[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return xo(this.leftCols)}getDisplayedColumnsRightWidth(){return xo(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const i=t==="first";let s;if(on(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;s=i?o[0]:Ct(o)}else s=e;return(i?n[0]:Ct(n))===s}};function il(e,t,n){if(e)for(let i=0;i<e.length;i++){const s=e[i];if(on(s)){const o=t?s.getDisplayedChildren():s.getChildren();il(o,t,n)}n(s)}}function hw(e){const t=[];return il(e,!0,n=>{$r(n)&&t.push(n)}),t}var iQ=class extends oe{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return Io(null,t,n=>{Kn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];Io(null,t,i=>{if(Kn(i)){const s=i.getColGroupDef(),o={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};n.push(o)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:i,visibleCols:s,eventSvc:o}=this.beans;if(!n.getColTree().length)return;i?.start();const c=[];e.forEach(u=>{const h=u.groupId,f=u.open,p=this.getProvidedColGroup(h);p&&p.isExpanded()!==f&&(p.setExpanded(f),c.push(p))}),s.refresh(t,!0),c.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:c.length===1?c[0]:void 0,columnGroups:c}),i?.finish()}setColumnGroupOpened(e,t,n){let i;Kn(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return Io(null,this.beans.colModel.getColTree(),n=>{Kn(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=t==="After"?Ct(i):i[0],o=`getCol${t}`;for(;;){const a=this.beans.visibleCols[o](s);if(!a)return null;const c=this.getColGroupAtLevel(a,n);if(c!==e)return c}}getColGroupAtLevel(e,t){let n=e.getParent(),i,s;for(;i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),!(i+s<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();il(e,!1,t=>{on(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(on(e))return e;const n=this.beans.visibleCols.getAllTrees(),i=typeof t=="number";let s=null;return il(n,!1,o=>{if(on(o)){const a=o;let c;i?c=e===a.getGroupId()&&t===a.getPartId():c=e===a.getGroupId(),c&&(s=a)}}),s}createColumnGroups(e){const{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:s,isStandaloneStructure:o}=e,a=this.mapOldGroupsById(s),c=[];let u=t;for(;u.length;){const h=u;u=[];let f=0;const p=m=>{const w=f;f=m;const S=h[w],T=(on(S)?S.getProvidedColumnGroup():S).getOriginalParent();if(T==null){for(let P=w;P<m;P++)c.push(h[P]);return}const F=this.createColumnGroup(T,n,a,i,o);for(let P=w;P<m;P++)F.addChild(h[P]);u.push(F)};for(let m=1;m<h.length;m++){const w=h[m],E=(on(w)?w.getProvidedColumnGroup():w).getOriginalParent(),T=h[f],P=(on(T)?T.getProvidedColumnGroup():T).getOriginalParent();E!==P&&p(m)}f<h.length&&p(h.length)}return o||this.setupParentsIntoCols(c,null),c}createProvidedColumnGroup(e,t,n,i,s,o,a){const c=s.getUniqueKey(t.groupId||null,null),u=kF(this.beans,t,c),h=new fp(u,c,!1,n);this.createBean(h);const f=this.findExistingGroup(t,o);f&&o.splice(f.idx,1);const p=f?.group;p&&h.setExpanded(p.isExpanded());const m=eL(this.beans,u.children,n+1,e,i,s,o,a);return h.setChildren(m),h}balanceColumnTree(e,t,n,i){const s=[];for(let o=0;o<e.length;o++){const a=e[o];if(Kn(a)){const c=a,u=this.balanceColumnTree(c.getChildren(),t+1,n,i);c.setChildren(u),s.push(c)}else{let c,u;for(let h=t;h<n;h++){const f=i.getUniqueKey(null,null),p=kF(this.beans,null,f),m=new fp(p,f,!0,h);this.createBean(m),u&&u.setChildren([m]),u=m,c||(c=u)}if(c&&u)if(s.push(c),e.some(f=>Kn(f))){u.setChildren([a]);continue}else{u.setChildren(e);break}s.push(a)}}return s}findDepth(e){let t=0,n=e;for(;n&&n[0]&&Kn(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let i=0;i<e.length;i++){const s=e[i];if(Kn(s)){const o=s,a=this.findMaxDepth(o.getChildren(),t+1);n<a&&(n=a)}}return n}balanceTreeForAutoCols(e,t){const n=[];return e.forEach(i=>{let s=i;for(let o=t-1;o>=0;o--){const a=new fp(null,`FAKE_PATH_${i.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([s]),s.originalParent=a,s=a}t===0&&(i.originalParent=null),n.push(s)}),n}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){const s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}createColumnGroup(e,t,n,i,s){const o=e.getGroupId(),a=t.getInstanceIdForKey(o),c=IL(o,a);let u=n[c];return u&&u.getProvidedColumnGroup()!==e&&(u=null),Ce(u)?u.reset():(u=new Lh(e,o,a,i),s||this.createBean(u)),u}mapOldGroupsById(e){const t={},n=i=>{i.forEach(s=>{if(on(s)){const o=s;t[s.getUniqueId()]=o,n(o.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,on(n)){const i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}},sQ={moduleName:"ColumnGroup",version:ye,dynamicBeans:{headerGroupCellCtrl:UY},beans:[iQ],apiFunctions:{getAllDisplayedColumnGroups:eQ,getCenterDisplayedColumnGroups:ZY,getColumnGroup:jY,getColumnGroupState:KY,getDisplayNameForColumnGroup:qY,getLeftDisplayedColumnGroups:XY,getProvidedColumnGroup:$Y,getRightDisplayedColumnGroups:JY,resetColumnGroupState:QY,setColumnGroupOpened:WY,setColumnGroupState:YY}},oQ={tag:"div",cls:"ag-skeleton-container"},rQ=class extends At{constructor(){super(oQ)}init(t){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>Dh(t.eParentOfValue)),Dh(t.eParentOfValue,n),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const n=t("ariaSkeletonCellLoadingFailed","Row failed to load");su(this.getGui(),n)}setupLoading(t){const n=an({tag:"div",cls:"ag-skeleton-effect"}),i=t.node.rowIndex;if(i!=null){const a=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${a}%`}this.getGui().appendChild(n);const s=this.getLocaleTextFunc(),o=t.deferRender?s("ariaDeferSkeletonCellLoading","Cell is loading"):s("ariaSkeletonCellLoading","Row data is loading");su(this.getGui(),o)}refresh(t){return!1}},aQ={moduleName:"CheckboxCellRenderer",version:ye,userComponents:{agCheckboxCellRenderer:iK}},lQ={moduleName:"SkeletonCellRenderer",version:ye,userComponents:{agSkeletonCellRenderer:rQ}};function cQ(e,t){const n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function uQ(e){return e.colModel.getColumnDefs()}function dQ(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function hQ(e,t){return e.colModel.getColDefCol(t)}function fQ(e){return e.colModel.getColDefCols()}function gQ(e,t){return cs(e,t,"api")}function pQ(e){return om(e)}function mQ(e){W7(e,"api")}function CQ(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function vQ(e){return e.visibleCols.isPinningLeft()}function yQ(e){return e.visibleCols.isPinningRight()}function wQ(e,t){return e.visibleCols.getColAfter(t)}function SQ(e,t){return e.visibleCols.getColBefore(t)}function bQ(e,t,n){e.colModel.setColsVisible(t,n,"api")}function RQ(e,t,n){e.pinnedCols?.setColsPinned(t,n,"api")}function EQ(e){return e.colModel.getCols()}function TQ(e){return e.visibleCols.leftCols}function xQ(e){return e.visibleCols.centerCols}function DQ(e){return e.visibleCols.rightCols}function AQ(e){return e.visibleCols.allCols}function FQ(e){return e.colViewport.getViewportColumns()}function YS(e,t){if(!e)return;const n=e,i={};return Object.keys(n).forEach(s=>{if(t&&t.indexOf(s)>=0||lk.has(s))return;const o=n[s];typeof o=="object"&&o!==null&&o.constructor===Object?i[s]=YS(o):i[s]=o}),i}var PQ=class extends oe{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,i){const s=e.slice();t?s.sort((c,u)=>n.indexOf(c)-n.indexOf(u)):n&&s.sort((c,u)=>i.indexOf(c)-i.indexOf(u));const o=this.rowGroupColsSvc?.columns,a=this.pivotColsSvc?.columns;return this.buildColumnDefs(s,o,a)}buildColumnDefs(e,t=[],n=[]){const i=[],s={};return e.forEach(o=>{const a=this.createDefFromColumn(o,t,n);let c=!0,u=a,h=o.getOriginalParent(),f=null;for(;h;){let p=null;if(h.isPadding()){h=h.getOriginalParent();continue}const m=s[h.getGroupId()];if(m){m.children.push(u),c=!1;break}if(p=this.createDefFromGroup(h),p&&(p.children=[u],s[p.groupId]=p,u=p,h=h.getOriginalParent()),h!=null&&f===h){c=!1;break}f=h}c&&i.push(u)}),i}createDefFromGroup(e){const t=YS(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){const i=YS(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},MQ=class extends oe{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth;if(!n)return[];const{visibleCols:i}=this.beans,s=i.centerCols;let o=-1;if(e.resizingCols){const S=new Set(e.resizingCols);for(let E=s.length-1;E>=0;E--)if(S.has(s[E])){o=E;break}}let a=!1;const c=s.map((S,E)=>{const T=S.getFlex(),F=T!=null&&T>0&&E>o;return a||(a=F),{col:S,isFlex:F,flex:Math.max(0,T??0),initialSize:S.getActualWidth(),min:S.getMinWidth(),max:S.getMaxWidth(),targetSize:0}});if(!a)return[];let u=c.length,h=c.reduce((S,E)=>S+E.flex,0),f=n;const p=(S,E)=>{S.frozenSize=E,S.col.setActualWidth(E,t),f-=E,h-=S.flex,u-=1},m=S=>S.frozenSize!=null;for(const S of c)S.isFlex||p(S,S.initialSize);for(;u>0;){const S=Math.round(h<1?f*h:f);let E,T=0,F=0;for(const U of c){if(m(U))continue;E=U,F+=S*(U.flex/h);const z=F-T,j=Math.round(z);U.targetSize=j,T+=j}E&&(E.targetSize+=S-T);let P=0;for(const U of c){if(m(U))continue;const z=U.targetSize,j=Math.min(Math.max(z,U.min),U.max);P+=j-z,U.violationType=j===z?void 0:j<z?"max":"min",U.targetSize=j}const M=P===0?"all":P>0?"min":"max";for(const U of c)m(U)||(M==="all"||U.violationType===M)&&p(U,U.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();const w=c.filter(S=>S.isFlex&&!S.violationType).map(S=>S.col);if(e.fireResizedEvent){const S=c.filter(T=>T.initialSize!==T.frozenSize).map(T=>T.col),E=c.filter(T=>T.flex).map(T=>T.col);ru(this.eventSvc,S,!0,t,E)}return w}initCol(e){const{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},IQ=["dateTimeString","dateString","text","number","boolean","date"],_Q=class extends oe{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===Z.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,s)=>{const o=t.getColDefCol(n),a=o?.getColDef();if(!o||!a)return 0;const c=i==null?"":e({column:o,node:null,value:i}),u=s==null?"":e({column:o,node:null,value:s});return c===u?0:c>u?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},n={},i=f=>p=>{const{column:m,node:w,value:S}=p;let E=m.getColDef().valueFormatter;return E===f.groupSafeValueFormatter&&(E=f.valueFormatter),this.beans.valueSvc.formatValue(m,w,S,E)};for(const f of Object.keys(e)){const p=e[f],m={...p,groupSafeValueFormatter:hP(p,this.gos)};t[f]=m,n[f]=i(m)}const s=this.gos.get("dataTypeDefinitions")??{},o={};for(const f of Object.keys(s)){const p=s[f],m=this.processDataTypeDefinition(p,s,[f],e);m&&(t[f]=m,p.dataTypeMatcher&&(o[f]=p.dataTypeMatcher),n[f]=i(m))}const{valueParser:a,valueFormatter:c}=e.object,{valueParser:u,valueFormatter:h}=t.object;this.hasObjectValueParser=u!==a,this.hasObjectValueFormatter=h!==c,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const n={...e};for(const i of IQ)delete n[i],n[i]=e[i]??t[i].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,i){let s;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=i[o];const c=t[o];if(a&&c&&(a=c),!dP(e,a,o))return;s=uP(a,e)}else{if(n.includes(o)){ge(44);return}const a=t[o];if(!dP(e,a,o))return;const c=this.processDataTypeDefinition(a,t,[...n,o],i);if(!c)return;s=uP(c,e)}return{...s,groupSafeValueFormatter:hP(s,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t;const{field:s}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[i];if(!o){ge(47,{cellDataType:i});return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,n),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!gn(n))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(fw(t,i))return!1;const s=t.type===null?e.type:t.type;if(s){const o=n.get("columnTypes")??{};if(sm(s).some(c=>{const u=o[c.trim()];return u&&fw(u,i)}))return!1}return!fw(e,i)}inferCellDataType(e,t){if(!e)return;let n;const i=this.getInitialData();if(i){const o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=ih(i,e,o)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](n))??"object"}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.beans.rowModel.rootNode?.allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[s]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:a}=o;a&&(s?.(),this.isPendingInference=!1,this.processColumnsPendingInference(a,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const i={},s={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const a=this.columnStateUpdatesPendingInference[o],c=this.colModel.getCol(o);if(!c)return;const u=c.getColDef();if(!this.resetColDefIntoCol(c,"cellDataTypeInferred"))return;const h=c.getColDef();if(t&&h.type&&h.type!==u.type){const f=LQ(c,a);f.rowGroup&&f.rowGroupIndex==null&&(i[o]=f),f.pivot&&f.pivotIndex==null&&(s[o]=f),n.push(f)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,s)),n.length&&cs(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:i,pivotColsSvc:s}=this.beans;return i?.restoreColumnOrder(n,e),s?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const i=LS(this.beans,n,e.getColId());return e.setColDef(i,n,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){const t=n=>ge(48,{property:n});if(e.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:n,beans:i,formatValueFuncs:s}=this,o=n[t];i.colFilter?.setColDefPropsForDataType(e,o,s[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,i){const s=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:s});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>pi(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Di(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>pi(n)??void 0,dateFormatter:n=>Di(n??null,t)??void 0,valueParser:n=>mp(String(n.newValue))?n.newValue:null,valueFormatter:n=>mp(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&mp(n)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:ES(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&W$(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>ES(t.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function uP(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...sm(e.columnTypes),...sm(t.columnTypes)]),n}function dP(e,t,n){return t?t.baseDataType!==e.baseDataType?(ge(46),!1):!0:(ge(45,{parentCellDataType:n}),!1)}function hP(e,t){if(e.valueFormatter)return n=>{if(n.node?.group){const i=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&i!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter({...n,value:n.value.toNumber()});if("value"in n.value)return e.valueFormatter({...n,value:n.value.value})}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function kQ(e,t,n,i){if(!t[n])return!1;const s=e[n];return s===null?(t[n]=!1,!1):i===void 0?!!s:s===i}function fw(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>kQ(e,t,n,i))}function LQ(e,t){const n=aL(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}var OQ={moduleName:"DataType",version:ye,beans:[_Q],dependsOn:[aQ]},VQ={moduleName:"ColumnFlex",version:ye,beans:[MQ]},lO={moduleName:"ColumnApi",version:ye,beans:[PQ],apiFunctions:{getColumnDef:cQ,getDisplayNameForColumn:dQ,getColumn:hQ,getColumns:fQ,applyColumnState:gQ,getColumnState:pQ,resetColumnState:mQ,isPinning:CQ,isPinningLeft:vQ,isPinningRight:yQ,getDisplayedColAfter:wQ,getDisplayedColBefore:SQ,setColumnsVisible:bQ,setColumnsPinned:RQ,getAllGridColumns:EQ,getDisplayedLeftColumns:TQ,getDisplayedCenterColumns:xQ,getDisplayedRightColumns:DQ,getAllDisplayedColumns:AQ,getAllDisplayedVirtualColumns:FQ,getColumnDefs:uQ}};function NQ(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}var BQ=class extends oe{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:s}=this.beans;return n&&s?s.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){const i=t?.getColGroupDef();return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,s){const o=e.headerValueGetter;if(o){const a=Pe(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:s});return typeof o=="function"?o(a):typeof o=="string"?this.beans.expressionSvc?.evaluate(o,a)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return NQ(e.field)}return""}},GQ=class extends oe{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){const{visibleCols:i}=this,s=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const a=i.bodyWidth;this.viewportLeft=a-t-e,this.viewportRight=a-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||HQ(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,o=t<i&&n<i,a=t>s&&n>s;return!o&&!a}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const a=o.getLeft();return Ce(a)&&a>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,s=i.centerCols;return i.getColsForRow(e,s,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const n=i=>{const s=new Set,o={};for(const a of i){let c=a.getParent();const u=a.isSpanHeaderHeight();for(;c&&!s.has(c);){if(u&&c.isPadding()){c=c.getParent();continue}const f=c.getProvidedColumnGroup().getLevel();o[f]??(o[f]=[]),o[f].push(c),s.add(c),c=c.getParent()}}return o};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){const e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function HQ(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var zQ=class extends oe{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(s){const o=t(s),a=typeof o;if(a==="string"||a==="number"||a==="boolean"){this.eGui=LR("<span>"+o+"</span>");return}if(o==null){this.eGui=an({tag:"span"});return}this.eGui=o}}return n}},UQ={moduleName:"CellRendererFunction",version:ye,beans:[zQ]},WQ=class extends oe{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:i,selectors:s}=e;if(n){const o=(a,c,u,h)=>{this.agGridDefaults[a]=c,(u||h)&&(this.agGridDefaultOverrides[a]={params:u,processParams:h})};for(const a of Object.keys(n)){let c=n[a];if(H8(c)&&(c=c.getComp(this.beans)),typeof c=="object"){const{classImp:u,params:h,processParams:f}=c;o(a,u,h,f)}else o(a,c)}}if(i){this.dynamicBeans??(this.dynamicBeans={});for(const o of Object.keys(i))this.dynamicBeans[o]=i[o]}if(s?.forEach(o=>{this.selectors[o.selector]=o}),t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){const n=(c,u,h,f)=>({componentFromFramework:u,component:c,params:h,processParams:f}),{frameworkOverrides:i}=this.beans,s=i.frameworkComponent(t,this.gos.get("components"));if(s!=null)return n(s,!0);const o=this.jsComps[t];if(o){const c=i.isFrameworkComponent(o);return n(o,c)}const a=this.agGridDefaults[t];if(a){const c=this.agGridDefaultOverrides[t];return n(a,!1,c?.params,c?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(js(279,{name:e}));const i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.beans.validation?.missingDynamicBean(e)??js(256));return}return new i(...n)}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},jQ=23,$Q=class extends oe{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===jQ&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},qQ=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',aE=typeof window!="object"||!window?.document?.fonts?.forEach,cu=(e,t,n,i,s,o)=>{if(aE)return;i&&(e=`@layer ${CSS.escape(i)} { ${e} }`);let a=Kc.map.get(t);if(a||(a=[],Kc.map.set(t,a)),a.find(f=>f.css===e))return;const c=document.createElement("style");o&&c.setAttribute("nonce",o),c.dataset.agGlobalCss=n,c.textContent=e;const u={css:e,el:c,priority:s};let h;for(const f of a){if(f.priority>s)break;h=f}if(h){h.el.insertAdjacentElement("afterend",c);const f=a.indexOf(h);a.splice(f+1,0,u)}else t.insertBefore(c,t.querySelector(":not(title, meta)")),a.push(u)},cO=(e,t,n)=>{cu(qQ,e,"core",t,0,n),Array.from(L8()).sort((i,s)=>i.moduleName.localeCompare(s.moduleName)).forEach(i=>i.css?.forEach(s=>cu(s,e,`module-${i.moduleName}`,t,0,n)))},KQ=e=>{Kc.grids.add(e)},YQ=e=>{if(Kc.grids.delete(e),Kc.grids.size===0){Kc.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},fP,Kc=(fP=typeof window=="object"?window:{}).agStyleInjectionState??(fP.agStyleInjectionState={map:new WeakMap,grids:new Set}),Ys=e=>new uO(e),xr="$default",QQ=0,uO=class{constructor({feature:e,params:t,modeParams:n={},css:i,cssImports:s}){this.feature=e,this.css=i,this.cssImports=s,this.modeParams={[xr]:{...n[xr]??{},...t??{}},...n}}use(e,t,n){let i=this._inject;if(i==null){let{css:s}=this;if(s){const o=`ag-theme-${this.feature??"part"}-${++QQ}`;typeof s=="function"&&(s=s()),s=`:where(.${o}) {
${s}
}
`;for(const a of this.cssImports??[])s=`@import url(${JSON.stringify(a)});
${s}`;i={css:s,class:o}}else i=!1;this._inject=i}return i&&e&&cu(i.css,e,i.class,t,1,n),i?i.class:!1}},XQ=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),dO=e=>`--ag-${XQ(e)}`,Qs=e=>`var(${dO(e)})`,ZQ=(e,t,n)=>Math.max(t,Math.min(n,e)),JQ=e=>{const t=new Map;return n=>{const i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},Ps=e=>({ref:"accentColor",mix:e}),ji=e=>({ref:"foregroundColor",mix:e}),Ki=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),eX=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),hi={ref:"backgroundColor"},Dc={ref:"foregroundColor"},Do={ref:"accentColor"},gm={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:ji(.15),chromeBackgroundColor:Ki(.02),browserColorScheme:"light"},tX={...gm,textColor:Dc,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:hi,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Do,rangeSelectionBackgroundColor:Ps(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Ps(.5),rangeHeaderHighlightColor:eX(.08),rowNumbersSelectedColor:Ps(.5),rowHoverColor:Ps(.08),columnHoverColor:Ps(.05),selectedRowBackgroundColor:Ps(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:hi,borderWidth:1,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:hi,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:ji(.7),focusShadow:{spread:3,color:Ps(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:ji(.1),iconButtonActiveColor:Do,iconButtonActiveBackgroundColor:Ps(.28),iconButtonActiveIndicatorColor:Do,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Do,toggleButtonOffBackgroundColor:Ki(.3),toggleButtonSwitchBackgroundColor:hi,toggleButtonSwitchInset:2,menuBorder:{color:ji(.2)},menuBackgroundColor:Ki(.03),menuTextColor:Ki(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:ji(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Do},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:ji(.2)},panelBackgroundColor:hi,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},columnDropCellBackgroundColor:ji(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:ji(.13)},selectCellBackgroundColor:ji(.07),selectCellBorder:{color:ji(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:hi,filterPanelApplyButtonBackgroundColor:Do,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Dc,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Dc,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:ji(.15),statusBarLabelColor:Dc,statusBarLabelFontWeight:500,statusBarValueColor:Dc,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"backgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"backgroundColor"},pinnedRowTextColor:{ref:"textColor"}},nX=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",hO={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},iX={...hO,cellBatchEditTextColor:"#f3d0b3"},sX=()=>Ys({feature:"batchEditStyle",params:hO,css:nX}),oX=sX(),rX=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",aX={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},lX=()=>Ys({feature:"buttonStyle",params:{...aX,buttonBackgroundColor:hi,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Do}},css:rX}),cX=lX(),uX=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",dX=()=>Ys({feature:"columnDropStyle",css:uX}),fO=dX(),hX=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],fX=JQ(e=>(e=e.toLowerCase(),hX.find(t=>e.endsWith(t.toLowerCase()))??"length")),tC=e=>typeof e=="object"&&e?.ref?Qs(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,lE=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=Qs(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Qs(e.onto):"transparent"}, ${t} ${ZQ(e.mix*100,0,100)}%)`}return!1},gX=tC,kc=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:` ${Qs(n)} `)})`:e&&"ref"in e?Qs(e.ref):!1,pX=tC,QS=(e,t)=>typeof e=="string"?e:e===!0?QS({},t):e===!1?t==="columnBorder"?QS({color:"transparent"},t):"none":e&&"ref"in e?Qs(e.ref):gO(e.style??"solid")+" "+kc(e.width??{ref:"borderWidth"})+" "+lE(e.color??{ref:"borderColor"}),mX=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Qs(e.ref):[kc(e.offsetX??0),kc(e.offsetY??0),kc(e.radius??0),kc(e.spread??0),lE(e.color??{ref:"foregroundColor"})].join(" "),gO=tC,pO=e=>typeof e=="string"?e.includes(",")?e:gP(e):e&&"googleFont"in e?pO(e.googleFont):e&&"ref"in e?Qs(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),gP(t))).join(", "):!1,gP=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),CX=tC,mO=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?mO({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Qs(e.ref):!1,vX=(e,t)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&vt(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Qs(e.ref):!1,yX={color:lE,colorScheme:gX,length:kc,scale:pX,border:QS,borderStyle:gO,shadow:mX,image:mO,fontFamily:pO,fontWeight:CX,duration:vX},wX=(e,t)=>{const n=fX(e);return yX[n](t,e)},SX=()=>new CO().withPart(cX).withPart(fO).withPart(oX),CO=class vO{constructor(t=[]){this.parts=t}withPart(t){return typeof t=="function"&&(t=t()),t instanceof uO?new vO([...this.parts,t]):(Wd(259,{part:t},"Invalid part"),this)}withoutPart(t){return this.withPart(Ys({feature:t}))}withParams(t,n=xr){return this.withPart(Ys({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:i,loadThemeGoogleFonts:s}){if(aE)return;RX(),cO(t,n,i);const o=bX(this);if(o.length>0)for(const a of o)s&&TX(a,i);for(const a of this.parts)a.use(t,n,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=pP(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const n={[xr]:{...tX}};for(const i of pP(this.parts))for(const s of Object.keys(i.modeParams)){const o=i.modeParams[s];if(o){const a=n[s]??(n[s]={}),c=new Set;for(const u of Object.keys(o)){const h=o[u];h!==void 0&&(a[u]=h,c.add(u))}if(s===xr)for(const u of Object.keys(n)){const h=n[u];if(u!==xr)for(const f of c)delete h[f]}}}this._paramsCache=t=n}return t}_getPerGridCss(t){const n="##SELECTOR##";let i=this._paramsCssCache;if(!i){let s="",o="";const a=this._getModeParams();for(const u of Object.keys(a)){const h=a[u];if(u!==xr){const p=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(u):u}"]) & {
`;s+=p,o+=p}for(const f of Object.keys(h).sort()){const p=h[f],m=wX(f,p);if(m===!1)vt(107,{key:f,value:p});else{const w=dO(f),S=w.replace("--ag-","--ag-inherited-");s+=`	${w}: var(${S}, ${m});
`,o+=`	${S}: var(${w});
`}}u!==xr&&(s+=`}
`,o+=`}
`)}let c=`${n} {
${s}}
`;c+=`:has(> ${n}):not(${n}) {
${o}}
`,this._paramsCssCache=i=c}return i.replaceAll(n,`:where(.${t})`)}},pP=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const n=[];for(const i of e)(!i.feature||t.get(i.feature)===i)&&n.push(i);return n},bX=e=>{const t=new Set,n=o=>{if(Array.isArray(o))o.forEach(n);else{const a=o?.googleFont;typeof a=="string"&&t.add(a)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(n),Array.from(t).sort()},mP=!1,RX=()=>{if(!mP){mP=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},EX=new Set,TX=async(e,t)=>{EX.add(e);const n=`@import url('https://${xX}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;cu(n,document.head,`googleFont:${e}`,void 0,0,t)},xX="fonts.googleapis.com",DX='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',AX=()=>Ys({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:hi,checkboxUncheckedBorderColor:Ki(.3),checkboxCheckedBackgroundColor:Do,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:hi,checkboxIndeterminateBackgroundColor:Ki(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:hi,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:DX}),FX=AX(),yO=()=>({...gm,...iX,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Ki(.05),rowHoverColor:Ps(.15),selectedRowBackgroundColor:Ps(.2),menuBackgroundColor:Ki(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Dc,findMatchColor:hi,findActiveMatchColor:hi,checkboxUncheckedBorderColor:Ki(.4),toggleButtonOffBackgroundColor:Ki(.4),rowBatchEditBackgroundColor:Ki(.1)}),PX=()=>({...yO(),backgroundColor:"#1f2836"}),MX=()=>Ys({feature:"colorScheme",params:gm,modeParams:{light:gm,dark:yO(),"dark-blue":PX()}}),IX=MX(),wO={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},SO={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},_X=(e={})=>{let t="";for(const n of[...Object.keys(wO),...Object.keys(SO)]){const i=kX(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},kX=(e,t=1.5)=>{const n=SO[e];if(n)return n;const i=wO[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},LX=(e={})=>Ys({feature:"iconSet",css:()=>_X(e)}),OX=LX(),VX=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',NX=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",BX={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},GX=()=>Ys({feature:"inputStyle",params:{...BX,inputBackgroundColor:hi,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Do},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Ki(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>VX+NX}),HX=GX(),zX='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',UX={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},WX=()=>Ys({feature:"tabStyle",params:{...UX,tabBarBorder:!0,tabBarBackgroundColor:ji(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:hi},css:zX}),jX=WX(),$X=()=>SX().withPart(FX).withPart(IX).withPart(OX).withPart(jX).withPart(HX).withPart(fO).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),bO=$X(),qX={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},KX={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},YX={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},CP={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},vP={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},yP={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},gw={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},wP={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0},QX=0,XX=class extends oe{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++QX}`,this.globalCSS=[]}wireBeans(e){const{eGridDiv:t,gridOptions:n}=e;this.eGridDiv=t,this.eStyleContainer=n.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=n.themeCssLayer,this.styleNonce=n.styleNonce}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(CP),this.getSizeEl(vP),this.getSizeEl(yP),this.getSizeEl(gw),this.getSizeEl(wP),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>YQ(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(wP)}getRowBorderWidth(){return this.getCSSVariablePixelValue(gw)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(CP)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(vP)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(qX)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(KX),n=this.getCSSVariablePixelValue(YX);return e-1+n*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(yP)}applyThemeClasses(e){const{gridTheme:t}=this;let n="";if(t)n=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let i=this.eGridDiv;for(;i;){let s=!1;for(const o of Array.from(i.classList))o.startsWith("ag-theme-")&&(s=!0,n=n?`${n} ${o}`:o);s&&this.mutationObserver.observe(i,{attributes:!0,attributeFilter:["class"]}),i=i.parentElement}}for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&e.classList.remove(i);if(n){const i=e.className;e.className=i+(i?" ":"")+n}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const i=`${n}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),n):t!=""?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?cu(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const n=t.offsetWidth;return n===pw?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=an({tag:"div",cls:"ag-measurement-container"}),this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=an({tag:"div"});const{border:i,noWarn:s}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${pw}px)`)):t.style.width=`var(${e.cssName}, ${pw}px)`,n.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!s&&ge(9,{variable:e});const a=Wo(this.beans,t,()=>{const c=this.measureSizeEl(e);c==="detached"||c==="no-styles"||(this.lastKnownValues.set(e,c),c!==o&&(o=c,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>a()),t}fireGridStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(gw);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:n,gridTheme:i}=this,s=e.get("theme");let o;if(s==="legacy")o=void 0;else{const a=s??bO;a instanceof CO?o=a:vt(240,{theme:a})}if(o!==i){if(o){KQ(this),cO(this.eStyleContainer,this.cssLayer,this.styleNonce);for(const[c,u]of n)cu(c,this.eStyleContainer,u,this.cssLayer,0,this.styleNonce);n.length=0}this.gridTheme=o,o?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let a=this.eParamsStyle;if(!a){a=this.eParamsStyle=an({tag:"style"});const c=this.gos.get("styleNonce");c&&a.setAttribute("nonce",c),t.appendChild(a)}aE||(a.textContent=o?._getPerGridCss(this.paramsClass)||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}o&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&vt(s?106:239)}},pw=15538,ZX=class extends oe{constructor(){super(...arguments),this.beanName="eventSvc",this.globalSvc=new al}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalSvc.dispatchEvent(Pe(this.gos,e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(Pe(this.gos,e))}};function RO(e,t,n){const i=e.visibleCols.headerGroupRowCount;if(n>=i)return{column:t,headerRowIndex:n};let s=t.getParent();for(;s&&s.getProvidedColumnGroup().getLevel()>n;)s=s.getParent();const o=t.isSpanHeaderHeight();return!s||o&&s.isPadding()?{column:t,headerRowIndex:i}:{column:s,headerRowIndex:s.getProvidedColumnGroup().getLevel()}}var JX=class extends oe{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const t=Mn(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:i,colGroupSvc:s,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(n=i.getCol(e),n||(n=s?.getColumnGroup(e)??null)):n=e,!n)return null;const c=o.getHeaderRowContainerCtrl()?.getAllCtrls(),u=Ct(c||[]).type==="filter",h=Os(this.beans)-1;let f=-1,p=n;for(;p;)f++,p=p.getParent();let m=f;return t&&u&&m===h-1&&m++,m===-1?null:{headerRowIndex:m,column:n}}navigateVertically(e,t){const{focusSvc:n,visibleCols:i}=this.beans,{focusedHeader:s}=n;if(!s)return!1;const{headerRowIndex:o}=s,a=s.column,c=Os(this.beans),u=this.getHeaderRowType(o),h=i.headerGroupRowCount;let{headerRowIndex:f,column:p,headerRowIndexWithoutSpan:m}=e==="UP"?eZ(u,a,o):tZ(a,o,h),w=!1;return f<0&&(f=0,p=a,w=!0),f>=c?(f=-1,this.currentHeaderRowWithoutSpan=-1):m!==void 0&&(this.currentHeaderRowWithoutSpan=m),!w&&!p?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:f,column:p},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){const{focusSvc:i,gos:s}=this.beans,o={...i.focusedHeader};let a,c;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==s.get("enableRtl")?(c="Before",a=this.findHeader(o,c)):(c="After",a=this.findHeader(o,c));const u=s.getCallback("tabToNextHeader");if(t&&u){const h=i.focusHeaderPositionFromUserFunc({userFunc:u,headerPosition:a,direction:c});if(h){const{headerRowIndex:f}=i.focusedHeader||{};f!=null&&f!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=f)}return h}return a||!t?i.focusHeaderPosition({headerPosition:a,direction:c,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,c,n)}focusNextHeaderRow(e,t,n){const i=this.beans,s=e.headerRowIndex;let o=null,a;const c=Os(i),u=this.beans.visibleCols.allCols;if(t==="Before"){if(s<=0)return!1;o=Ct(u),a=s-1,this.currentHeaderRowWithoutSpan-=1}else o=u[0],a=s+1,this.currentHeaderRowWithoutSpan<c?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:h,headerRowIndex:f}=RO(this.beans,o,a);return f>=c&&(f=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:h,headerRowIndex:f},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(on(e)){const i=e.getDisplayedLeafColumns();n=t==="Before"?Ct(i):i[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){const{colGroupSvc:n,visibleCols:i}=this.beans;let s=e.column;if(s instanceof Lh){const u=s.getDisplayedLeafColumns();s=t==="Before"?u[0]:u[u.length-1]}const o=t==="Before"?i.getColBefore(s):i.getColAfter(s);if(!o)return;const a=i.headerGroupRowCount;if(e.headerRowIndex>=a)return{headerRowIndex:e.headerRowIndex,column:o};const c=n?.getColGroupAtLevel(o,e.headerRowIndex);return c?c.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:c??o}:{headerRowIndex:o instanceof Sl&&o.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function eZ(e,t,n){const i=n-1;if(e!=="filter"){const s=t instanceof Sl&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>i||s&&o.isPadding());)o=o.getParent();if(o)return s?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:o,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function tZ(e,t,n){const i=t+1,s={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof Lh){if(i>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:i};let a=e.getDisplayedChildren()[0];if(a instanceof Lh&&a.isPadding()){const u=a.getDisplayedLeafColumns()[0];u.isSpanHeaderHeight()&&(a=u)}s.column=a,a instanceof Sl&&a.isSpanHeaderHeight()&&(s.headerRowIndex=n,s.headerRowIndexWithoutSpan=i)}return s}var nZ=class extends oe{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(u$(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy($t(this.beans),jL)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=$t(this.beans);return this.isDomDataPresentInHierarchy(e,dm)?!0:this.isDomDataPresentInHierarchy(e,hm)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(Lk(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:i}=e,s={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return o&&(s.isFullWidthCell=o.isFullWidth()),s}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:a}=e,c=this.colModel.getCol(t);if(!c){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:Po(i),column:c};const u=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...u,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:s,preventScrollOnBrowserFocus:o,sourceEvent:a}),this.previousCellFocusParams=u}isCellFocused(e){return this.focusedCell==null?!1:vL(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:i}}=e,{column:s,headerRowIndex:o}=this.focusedHeader;return t===s&&n===o&&i==s.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),nl(this.beans))return!1;const{direction:t,fromTab:n,allowUserOverride:i,event:s,fromCell:o,rowWithoutSpanValue:a}=e;let{headerPosition:c}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(c);if(i){const u=this.focusedHeader,h=Os(this.beans);if(n){const f=this.gos.getCallback("tabToNextHeader");f&&(c=this.getHeaderPositionFromUserFunc({userFunc:f,direction:t,currentPosition:u,headerPosition:c,headerRowCount:h}))}else{const f=this.gos.getCallback("navigateToNextHeader");if(f&&s){const p={key:s.key,previousHeaderPosition:u,nextHeaderPosition:c,headerRowCount:h,event:s};c=f(p)}}}return c?this.focusProvidedHeaderPosition({headerPosition:c,direction:t,event:s,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(e){if(nl(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:i,event:s}=e,o=this.focusedHeader,a=Os(this.beans),c=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:o,headerPosition:n,headerRowCount:a});return!!c&&this.focusProvidedHeaderPosition({headerPosition:c,direction:i,event:s})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:i,headerPosition:s,headerRowCount:o}=e,c=t({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:s,headerRowCount:o});return c===!0?i:c===!1?null:c}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:s,event:o}=e,{column:a,headerRowIndex:c}=t,{filterManager:u,ctrlsSvc:h,headerNavigation:f}=this.beans;if(c===-1)return u?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});f?.scrollToColumn(a,n);const m=h.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(t.headerRowIndex,a,o)||!1;return f&&m&&(s!=null||i)&&(f.currentHeaderRowWithoutSpan=s??-1),m}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=RO(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;const t=Os(this.beans)-1,n=Ct(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Po(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&fl(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:n=!0,event:i}=e;if(this.overlays?.isExclusive())return n&&this.focusOverlay(t);if(Xm(this.beans))return t&&!nl(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:lu(this.beans,t);const s=t?K8(this.beans):q8(this.beans);if(s){const o=e.column??this.focusedHeader?.column,{rowIndex:a,rowPinned:c}=s,u=zo(this.beans,s);if(!o||!u||a==null)return!1;if(o.isSuppressNavigable(u)){const h=this.gos.get("enableRtl");let f;return!i||i.key===Z.TAB?f=h?Z.LEFT:Z.RIGHT:f=i.key,this.beans.navigation?.navigateToNextCell(null,f,{rowIndex:a,column:o,rowPinned:c||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:a,column:o,rowPinned:c}),t&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t)||(this.setFocusedCell({rowIndex:a,column:o,rowPinned:Po(c),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:a,rowPinned:c,column:o})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Os(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},iZ=class extends oe{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:zj();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},sZ=class extends oe{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},yp=new Set(["gridPreDestroyed","fillStart","pasteStart"]),oZ=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],cE=oZ.reduce((e,t)=>(e[t]=g7(t),e),{}),Ld=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),rZ={tag:"span",cls:"ag-sort-indicator-container",children:[Ld("Order","order"),Ld("Asc","ascending-icon"),Ld("Desc","descending-icon"),Ld("Mixed","mixed-icon"),Ld("None","none-icon")]},uE=class extends At{constructor(e){super(),this.eSortOrder=De,this.eSortAsc=De,this.eSortDesc=De,this.eSortMixed=De,this.eSortNone=De,e||this.setTemplate(rZ)}attachCustomElements(e,t,n,i,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;const i=Yi(e,this.beans,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:n,column:i,gos:s,beans:o}=this,a=o.sortSvc.getDisplaySortForColumn(i);if(e&&Ut(e,a==="asc",{skipAriaHidden:!0}),t&&Ut(t,a==="desc",{skipAriaHidden:!0}),n){const c=!i.getColDef().unSortIcon&&!s.get("unSortIcon"),u=a==null;Ut(n,!c&&u,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const i=t.getColDef().showRowGroup;_s(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:n}=this;if(e){const i=t.sortSvc.getDisplaySortForColumn(n)==="mixed";Ut(e,i,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const i=n.getColumnsWithSortingOrdered(),s=n.getDisplaySortIndexForColumn(t)??-1,o=i.some(c=>n.getDisplaySortIndexForColumn(c)??!1),a=s>=0&&o;Ut(e,a,{skipAriaHidden:!0}),s>=0?e.textContent=(s+1).toString():Ai(e)}},aZ={selector:"AG-SORT-INDICATOR",component:uE},Vh=["asc","desc",null],lZ=class extends oe{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}progressSortFromEvent(e,t){const i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);const{gos:s,showRowGroupCols:o}=this.beans,a=_s(s);let c=[e];if(a&&e.getColDef().showRowGroup){const p=o?.getSourceColumnsForGroupColumn?.(e)?.filter(m=>m.isSortable());p&&(c=[e,...p])}c.forEach(f=>this.setColSort(f,t,i));const u=(n||s.get("alwaysMultiSort"))&&!s.get("suppressMultiSort"),h=[];if(!u){const f=this.clearSortBarTheseColumns(c,i);h.push(...f)}this.updateSortIndex(e),h.push(...c),this.dispatchSortChangedEvents(i,h)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:i}=this.beans,s=_s(t),o=i?.getShowRowGroupCol(e.getId()),a=s&&o||e,c=this.getColumnsWithSortingOrdered();n.forAllCols(f=>this.setColSortIndex(f,null));const u=c.filter(f=>s&&f.getColDef().showRowGroup?!1:f!==a);(a.getSort()?[...u,a]:u).forEach((f,p)=>this.setColSortIndex(f,p))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSort()&&n.push(i),this.setColSort(i,void 0,t))}),n}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??Vh,n=t.indexOf(e.getSort()),i=n<0,s=n==t.length-1;return i||s?t[0]:t[n+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans;let s=[];if(t.forAllCols(h=>{h.getSort()&&s.push(h)}),t.isPivotMode()){const h=_s(e);s=s.filter(f=>{const p=!!f.getAggFunc(),m=!f.isPrimary(),w=h?n?.getShowRowGroupCol(f.getId()):f.getColDef().showRowGroup;return p||m||w})}const o=i?.columns.filter(h=>!!h.getSort())??[],a={};s.forEach((h,f)=>a[h.getId()]=f),s.sort((h,f)=>{const p=h.getSortIndex(),m=f.getSortIndex();if(p!=null&&m!=null)return p-m;if(p==null&&m==null){const w=a[h.getId()],S=a[f.getId()];return w>S?1:-1}else return m==null?-1:1});const c=_s(e)&&!!o.length;c&&(s=[...new Set(s.map(h=>n?.getShowRowGroupCol(h.getId())??h))]);const u=new Map;return s.forEach((h,f)=>u.set(h,f)),c&&o.forEach(h=>{const f=n.getShowRowGroupCol(h.getId());u.set(h,u.get(f))}),u}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=_s(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every(a=>a.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let i=0;e.addManagedListeners(t,{movingChanged:()=>{i=Date.now()}}),n&&e.addManagedElementListeners(n,{click:o=>{const a=t.isMoving(),u=Date.now()-i<50;a||u||this.progressSortFromEvent(t,o)}});const s=()=>{const o=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",o==="asc"),e.toggleCss("ag-header-cell-sorted-desc",o==="desc"),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){const u=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(h=>t.getSort()==h.getSort());e.toggleCss("ag-header-cell-sorted-mixed",u)}};e.addManagedEventListeners({sortChanged:s,columnRowGroupChanged:s})}initCol(e){const{sort:t,initialSort:n,sortIndex:i,initialSortIndex:s}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(n==="asc"||n==="desc")&&(e.sort=n),i!==void 0?i!==null&&(e.sortIndex=i):s!==null&&(e.sortIndex=s)}updateColSort(e,t,n){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new uE(e)}getSortIndicatorSelector(){return aZ}},Yc={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},cZ=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),uZ={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Yc[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Yc[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Yc[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",spanRows:"CellSpan"},dZ=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:n})=>n?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,n)=>n.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const n=t.headerValueGetter;return typeof n=="function"||typeof n=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return js(262);if(t.smallLeft)return js(263);if(t.smallRight)return js(264)}return null}},sortingOrder:{validate:t=>{const n=t.sortingOrder;if(Array.isArray(n)&&n.length>0){const i=n.filter(s=>!Vh.includes(s));if(i.length>0)return`sortingOrder must be an array with elements from [${Vh.map(Xp).join()}], currently it includes [${i.map(Xp).join()}]`}else if(!Array.isArray(n)||n.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${n}`;return null}},type:{validate:t=>{const n=t.type;return n instanceof Array?n.some(s=>typeof s!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof n=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:n})=>n?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:n,cellSelection:i,suppressRowTransform:s,enableCellSpan:o,rowDragEntireRow:a,enableCellTextSelection:c})=>typeof n=="object"&&n?.mode==="singleRow"&&n?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":s?"colDef.spanRows is not supported with suppressRowTransform.":o?a?"colDef.spanRows is not supported with rowDragEntireRow.":c?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}),hZ={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0},fZ=()=>Object.keys(hZ),gZ=()=>({objectName:"colDef",allProperties:fZ(),docsUrl:"column-properties/",deprecations:cZ(),validations:dZ()}),pZ=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],mZ=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers"],CZ=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],EO=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],vZ=["theme","rowSelection"],yZ=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],TO=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows"],wZ=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],SZ=()=>[...CZ,...mZ,...pZ,...EO,...wZ,...TO,...yZ,...vZ],bZ=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function Fs(e,t,n){return typeof t=="number"||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var RZ={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"SharedRowGrouping",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},EZ=()=>{const e={autoSizePadding:{validate({autoSizePadding:n}){return Fs("autoSizePadding",n,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return Fs("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return Fs("cacheOverflowSize",n,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:n=>{const i=n.domLayout,s=["autoHeight","normal","print"];return i&&!s.includes(i)?`domLayout must be one of [${s.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,pinnedTopRowData:i,pinnedBottomRowData:s}){return n&&(i||s)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinnable:i,pinnedTopRowData:s,pinnedBottomRowData:o}){return i&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinned:i,pinnedTopRowData:s,pinnedBottomRowData:o}){return i&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return js(262);if(n.smallLeft)return js(263);if(n.smallRight)return js(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return Fs("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return Fs("keepDetailRowsCount",n,1)}},paginationPageSize:{validate({paginationPageSize:n}){return Fs("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{const i=n.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:n}){return Fs("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:n=>{const i=n.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return Fs("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:n=>{const i=n.sortingOrder;if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>!Vh.includes(o));if(s.length>0)return`sortingOrder must be an array with elements from [${Vh.map(Xp).join()}], currently it includes [${s.map(Xp).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:n=>{const i=n.rowModelType??"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:s,treeDataParentIdField:o,getDataPath:a,getRowId:c}=n;if(!s&&!o&&!a)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(s){if(a)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!c)return"getRowId callback not provided, tree data with parent id cannot be built.";if(a)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const s=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:s}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return Fs("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return Fs("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:n,showOpenedGroup:i}){return n?.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":n?.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:n=>{const i=n.renderingMode,s=["default","legacy"];return i&&!s.includes(i)?`renderingMode must be one of [${s.join()}], currently it's ${i}`:null}}},t={};return TO.forEach(n=>{t[n]={expectedType:"boolean"}}),EO.forEach(n=>{t[n]={expectedType:"number"}}),oi(t,e),t},TZ=()=>({objectName:"gridOptions",allProperties:[...SZ(),...Object.values(cE)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:bZ(),validations:EZ()}),xZ=0,DZ=0,AZ=class extends oe{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=DZ++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new al,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const i=yp.has(t);if(i&&!e||!i&&e||!FZ(t))return;const s=(o,a)=>{const c=cE[o],u=this.gridOptions[c];typeof u=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>u(a))};if(this.gridReadyFired)s(t,n);else if(t==="gridReady"){s(t,n),this.gridReadyFired=!0;for(const o of this.queueEvents)s(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??uk[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Ce(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addGridCommonParams(n)))}updateGridOptions({options:e,force:t,source:n="api"}){const i={id:xZ++,properties:[]},s=[],{gridOptions:o,validation:a}=this;for(const c of Object.keys(e)){const u=e[c];a?.warnOnInitialPropertyUpdate(n,c);const h=t||typeof u=="object"&&n==="api",f=o[c];if(h||f!==u){o[c]=u;const p={type:c,currentValue:u,previousValue:f,changeSet:i,source:n};s.push(p)}}this.validateGridOptions(this.gridOptions),i.properties=s.map(c=>c.type),s.forEach(c=>{cl(this,`Updated property ${c.type} from`,c.previousValue," to ",c.currentValue),this.propEventSvc.dispatchEvent(c)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const n of Object.keys(e)){const i=e[n];if(i==null||i===!1)continue;let s=t[n];typeof s=="function"&&(s=s(e,this.gridOptions,this.beans)),s&&this.assertModuleRegistered(s,n)}}validateGridOptions(e){this.validateOptions(e,RZ),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,uZ),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return n||vt(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:UR(),rowModelType:this.get("rowModelType"),isUmd:N8()}}isModuleRegistered(e){return OS(e,this.gridId,this.get("rowModelType"))}};function FZ(e){return!!cE[e]}function xO(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var PZ=xO(!0),MZ=xO(!1),IZ=class extends At{constructor(){super(...arguments),this.eFilter=De,this.eFilterButton=De,this.eSortIndicator=De,this.eMenu=De,this.eLabel=De,this.eText=De,this.eSortOrder=De,this.eSortAsc=De,this.eSortDesc=De,this.eSortMixed=De,this.eSortNone=De,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const n={...e};oi(n,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const n=e.template;return n?n?.trim?n.trim():n:t?PZ:MZ}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:i,userCompFactory:s}=this.beans,o=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),n?.setupForHeader(this),this.setMenu(),this.setupSort(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(s,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=C8(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=bu(t))}addInIcon(e,t,n){const i=Yi(e,this.beans,n);i&&t.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Ho(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:n}=this,i=xi(e);this.addInIcon(i?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!i);const s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:n,beans:i,eMenu:s,eFilterButton:o}=this,a=t.column,c=xi(n);if(e&&!c){if(i.menuSvc?.isFilterMenuInHeaderEnabled(a))return t.showFilter(o??s??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(s??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:i,eSortOrder:s,eSortAsc:o,eSortDesc:a,eSortMixed:c,eSortNone:u}=this;i.attachCustomElements(s,o,a,c,u)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const n=()=>{const i=t.column.isFilterActive();Ut(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,i){if(!e)return Ho(t),!1;const s=this.params.column;return this.addInIcon(i,t,s),this.addManagedListeners(s,{filterChanged:n}),n(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},_Z={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},kZ=class extends At{constructor(){super(_Z),this.agOpened=De,this.agClosed=De,this.agLabel=De,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&ge(89)}workOutInnerHeaderGroupComponent(e,t){const n=y8(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:i}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const s=u=>{if(Mo(u))return;const h=!n.isExpanded();i.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),h,"uiColumnExpanded")};this.addTouchAndClickListeners(i,t,s),this.addTouchAndClickListeners(i,e,s);const o=u=>{dl(u)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:s}),this.updateIconVisibility();const a=n.getProvidedColumnGroup(),c=this.updateIconVisibility.bind(this);this.addManagedListeners(a,{expandedChanged:c,expandableChanged:c})}addTouchAndClickListeners(e,t,n){e.touchSvc?.setupForHeaderGroupElement(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const i=n.isExpanded();Ut(e,i),Ut(t,!i)}else Ut(e,!1),Ut(t,!1)}addInIcon(e,t){const n=Yi(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:n}=this;Ut(t,!1),Ut(n,!1);return}}setupLabel(e){const{displayName:t,columnGroup:n}=e,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Ce(t)&&!i&&(this.agLabel.textContent=bu(t)),this.toggleCss("ag-sticky-label",!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},LZ={moduleName:"ColumnHeaderComp",version:ye,userComponents:{agColumnHeader:IZ},icons:{menu:"menu",menuAlt:"menu-alt"}},OZ={moduleName:"ColumnGroupHeaderComp",version:ye,userComponents:{agColumnGroupHeader:kZ},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},VZ=class extends oe{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&ge(92)}createTask(e,t,n,i,s=!1){this.verify();let o=n;i&&this.batchFrameworkComps&&(o="f1");const a={task:e,index:t,createOrder:++this.taskCount,deferred:s};this.addTaskToList(this[o],a),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:n,f1:i,destroyTasks:s,beans:o}=this,{ctrlsSvc:a,frameworkOverrides:c}=o,u=t.list,h=n.list,f=i.list,p=Date.now();let m=0;const w=e<=0,S=a.getScrollFeature();for(;w||m<e;){if(!S.scrollGridIfNeeded()){let T;if(u.length)this.sortTaskList(t),T=u.pop().task;else if(h.length)this.sortTaskList(n),T=h.pop().task;else if(f.length)c.wrapOutgoing(()=>{for(;(w||m<e)&&!S.scrollGridIfNeeded();){if(f.length)this.sortTaskList(i),T=f.pop().task,T();else break;m=Date.now()-p}}),T=()=>{};else if(s.length)T=s.pop();else break;T()}m=Date.now()-p}u.length||h.length||f.length||s.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);jo(this.beans,e)}isQueueEmpty(){return!this.ticking}},NZ={moduleName:"AnimationFrame",version:ye,beans:[VZ]},BZ=class extends oe{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Xa())return;const t=(n,i,s)=>{const{rowCtrl:o,cellCtrl:a}=e.getControlsForEventTarget(s?.target??null);a?.column&&a.dispatchCellContextMenuEvent(s??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,s,o,a)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Xa()||$k("dblclick"))return!1;const i=Date.now(),s=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,s})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:n,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:s,eMenu:o,eFilterButton:a}=e,c=new Oa(e.getGui(),!0),u=e.shouldSuppressMenuHide(),h=u&&Ce(o)&&s.enableMenu,f=h?new Oa(o,!0):c;if(s.enableMenu||i?.isHeaderContextMenuEnabled(s.column)){const p=h?"tap":"longTap",m=w=>s.showColumnMenuAfterMouseClick(w.touchStart);e.addManagedListeners(f,{[p]:m})}if(s.enableSorting){const p=m=>{const w=m.touchStart.target;u&&(o?.contains(w)||a?.contains(w))||n?.progressSort(s.column,!1,"uiColumnSorted")};e.addManagedListeners(c,{tap:p})}if(s.enableFilterButton&&a){const p=new Oa(a,!0);e.addManagedListeners(p,{tap:()=>s.showFilter(a)}),e.addDestroyFunc(()=>p.destroy())}e.addDestroyFunc(()=>c.destroy()),h&&e.addDestroyFunc(()=>f.destroy())}setupForHeaderGroup(e){const t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const n=new Oa(t.eGridHeader,!0),i=s=>t.showColumnMenuAfterMouseClick(s.touchStart);e.addManagedListeners(n,{longTap:i}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){const i=new Oa(t,!0);e.addManagedListeners(i,{tap:n}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,n){if(!Xa())return;const i=new Oa(t),s=o=>{kh(this.gos,o.touchEvent)&&n(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(i,{longTap:s}),e.addDestroyFunc(()=>i.destroy())}},GZ={moduleName:"Touch",version:ye,beans:[BZ]},HZ=class extends oe{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===Z.UP,i=e===Z.DOWN,s=e===Z.LEFT;let o,a;const{pageBounds:c,gos:u,visibleCols:h,pinnedRowModel:f}=this.beans,{rowPinned:p}=t;if(n||i)p&&f?n?a=0:a=p==="top"?f.getPinnedTopRowCount()-1:f.getPinnedBottomRowCount()-1:a=n?c.getFirstRow():c.getLastRow(),o=t.column;else{const m=u.get("enableRtl");a=t.rowIndex,o=(s!==m?h.allCols:[...h.allCols].reverse()).find(S=>this.isCellGoodToFocusOn({rowIndex:a,rowPinned:null,column:S}))}return o?{rowIndex:a,rowPinned:p,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case Z.UP:n=this.getCellAbove(n);break;case Z.DOWN:n=this.getCellBelow(n);break;case Z.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case Z.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,ge(8,{key:e});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:i,rowModel:s}=this.beans;switch(e.rowPinned){case"top":n=i?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(e.rowIndex);break;default:n=s.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,n=BF(this.beans,t);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,n=am(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,i=t.allCols;let s=e.rowIndex,o=e.rowPinned,a=t.getColAfter(e.column);if(!a){a=i[0];const c=BF(this.beans,e);if(Vt(c)||!c.rowPinned&&!(n?.isRowInPage(c.rowIndex)??!0))return null;s=c?c.rowIndex:null,o=c?c.rowPinned:null}return{rowIndex:s,column:a,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:n,pagination:i}=t,s=n.allCols;let o=e.rowIndex,a=e.rowPinned,c=n.getColBefore(e.column);if(!c){c=Ct(s);const u=am(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Vt(u)||!u.rowPinned&&!(i?.isRowInPage(u.rowIndex)??!0))return null;o=u?u.rowIndex:null,a=u?u.rowPinned:null}return{rowIndex:o,column:c,rowPinned:a}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const i=e.createColumnFunctionCallbackParams(t);return n(i)}return!1}};function zZ(e){return e.focusSvc.getFocusedCell()}function UZ(e){return e.focusSvc.clearFocusedCell()}function WZ(e,t,n,i){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function jZ(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function $Z(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function qZ(e,t,n=!1){const i=e.headerNavigation?.getHeaderPositionForColumn(t,n);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var KZ=class extends oe{constructor(){super(),this.beanName="navigation",this.onPageDown=PF(this.onPageDown,100),this.onPageUp=PF(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,a=A$(this.gos,e);let c=!1;switch(n){case Z.PAGE_HOME:case Z.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),c=!0);break;case Z.LEFT:case Z.RIGHT:case Z.UP:case Z.DOWN:if(!a)return!1;s&&!i&&!o&&(this.onCtrlUpDownLeftRight(n,a),c=!0);break;case Z.PAGE_DOWN:case Z.PAGE_UP:!s&&!i&&(c=this.handlePageUpDown(n,a,t));break}return c&&e.preventDefault(),c}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===Z.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:i,focusColumn:s,isAsync:o,rowPinned:a}){const{scrollFeature:c}=this.gridBodyCon;Ce(n)&&!n.isPinned()&&c.ensureColumnVisible(n),Ce(e)&&c.ensureIndexVisible(e,t),o||c.ensureIndexVisible(i);const{focusSvc:u,rangeSvc:h}=this.beans;u.setFocusedCell({rowIndex:i,column:s,rowPinned:a,forceBrowserFocus:!0}),h?.setRangeToCell({rowIndex:i,rowPinned:a,column:s})}onPageDown(e){const t=this.beans,n=mw(t),i=this.getViewportHeight(),{pageBounds:s,rowModel:o,rowAutoHeight:a}=t,c=s.getPixelOffset(),u=n.top+i,h=o.getRowIndexAtPixel(u+c);a?.active?this.navigateToNextPageWithAutoHeight(e,h):this.navigateToNextPage(e,h)}onPageUp(e){const t=this.beans,n=mw(t),{pageBounds:i,rowModel:s,rowAutoHeight:o}=t,a=i.getPixelOffset(),c=n.top,u=s.getRowIndexAtPixel(c+a);o?.active?this.navigateToNextPageWithAutoHeight(e,u,!0):this.navigateToNextPage(e,u,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:i,rowModel:s}=this.beans,o=this.getViewportHeight(),a=i.getFirstRow(),c=i.getLastRow(),u=i.getPixelOffset(),h=s.getRow(e.rowIndex),f=n?h?.rowHeight-o-u:o-u,p=h?.rowTop+f;let m=s.getRowIndexAtPixel(p+u);if(m===e.rowIndex){const S=n?-1:1;t=m=e.rowIndex+S}let w;n?(w="bottom",m<a&&(m=a),t<a&&(t=a)):(w="top",m>c&&(m=c),t>c&&(t=c)),this.isRowTallerThanView(s.getRow(m))&&(t=m,w="top"),this.navigateTo({scrollIndex:t,scrollType:w,scrollColumn:null,focusIndex:m,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,i=this.getViewportHeight(),{pageBounds:s,rowModel:o}=this.beans,a=s.getLastRow();let c=0,u=e.rowIndex;for(;u>=0&&u<=a;){const h=o.getRow(u);if(h){const f=h.rowHeight??0;if(c+f>i)break;c+=f}u+=n}return Math.max(0,Math.min(u,a))}getViewportHeight(){const e=this.beans,t=mw(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:i,rowPinned:s}=n,o=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:o,focusIndex:i,focusColumn:o,rowPinned:s})}onHomeOrEndKey(e){const t=e===Z.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:s}=this.beans,o=n.allCols,a=t?i.getFirstRow():i.getLastRow(),c=s.getRow(a);if(!c)return;const u=(t?o:[...o].reverse()).find(h=>!h.isSuppressNavigable(c));u&&this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:u,focusIndex:a,focusColumn:u})}onTabKeyDown(e,t){const n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t),s=this.beans,{ctrlsSvc:o,pageBounds:a,focusSvc:c,gos:u}=s;if(i!==!1){i?t.preventDefault():i===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:h,rowPinned:f}=e.getRowPosition();(f?h===0:h===a.getFirstRow())&&(u.get("headerHeight")===0||nl(s)?lu(s,!0,!0):(t.preventDefault(),c.focusPreviousFromFirstCell(t)))}else e instanceof $c&&e.focusCell(!0),(!n&&c.focusOverlay(!1)||lu(s,n))&&t.preventDefault()}tabToNextCell(e,t){const n=this.beans,{focusSvc:i,rowRenderer:s}=n,o=i.getFocusedCell();if(!o)return!1;let a=$d(n,o);return!a&&(a=s.getRowByPosition(o),!a||!a.isFullWidth())?!1:!!this.tabToNextCellCommon(a,e,t,"api")}tabToNextCellCommon(e,t,n,i="ui"){const{editSvc:s,focusSvc:o}=this.beans;let a;const c=e instanceof $c?e:e.getAllCellCtrls()?.[0];return s?.isEditing()?a=s?.moveToNextCell(c,t,n,i):a=this.moveToNextCellNotEditing(e,t,n),a===null?a:a||!!o.focusedHeader}moveToNextCellNotEditing(e,t,n){const i=this.beans.visibleCols.allCols;let s;if(e instanceof fm){if(s={...e.getRowPosition(),column:t?i[0]:Ct(i)},this.gos.get("embedFullWidthRows")&&n){const a=e.findFullWidthInfoForEvent(n);a&&(s.column=a.column)}}else s=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(s,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof $c)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return Ce(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:i}){let s=e;const o=this.beans,{cellNavigation:a,gos:c,focusSvc:u,rowRenderer:h,rangeSvc:f}=o;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=a.getNextTabbedCell(s,t);const p=c.getCallback("tabToNextCell");if(Ce(p)){const E=p({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:s||null});if(E===!0)s=e;else{if(E===!1)return!1;s={rowIndex:E.rowIndex,column:E.column,rowPinned:E.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const S=Os(o);return u.focusHeaderPosition({headerPosition:{headerRowIndex:S+s.rowIndex,column:s.column},fromCell:!0}),null}const m=c.get("editType")==="fullRow";if(n&&(!m||i)&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const w=$d(o,s);if(!w){const S=h.getRowByPosition(s);if(!S||!S.isFullWidth()||n)continue;return{...S.getRowPosition(),column:s?.column}}if(!a.isSuppressNavigable(w.column,w.rowNode))return w.setFocusedCellPosition(s),f?.setRangeToCell(s),w}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:i}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,n,i){let s=n,o=!1;const a=this.beans,{cellNavigation:c,focusSvc:u,gos:h}=a;for(;s&&(s===n||!this.isValidNavigateCell(s));)h.get("enableRtl")?t===Z.LEFT&&(s=this.getLastCellOfColSpan(s)):t===Z.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=c.getNextCellToFocus(t,s),o=Vt(s);if(o&&e&&e.key===Z.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){const p=h.getCallback("navigateToNextCell");if(Ce(p)){const w=p({key:t,previousCellPosition:n,nextCellPosition:s||null,event:e});Ce(w)?s={rowPinned:w.rowPinned,rowIndex:w.rowIndex,column:w.column}:s=null}}if(!s)return;if(s.rowIndex<0){const p=Os(a);u.focusHeaderPosition({headerPosition:{headerRowIndex:p+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}const f=this.getNormalisedPosition(s);f?this.focusPosition(f):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const n=$d(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:i,focusSvc:s,eventSvc:o}=this.beans,a=n.allCols,c=i.getRowByPosition(e);if(!c||!c.isFullWidth())return!1;const u=s.getFocusedCell(),h={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Ct(a):a[0])};this.focusPosition(h);const f=t??(u!=null&&j8(h,u));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:h.column,isFullWidthCell:!0,fromBelow:f}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!zo(this.beans,e)}getLastCellOfColSpan(e){const t=$d(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Ct(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Nk(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),i=t&&n?.sticky,{scrollFeature:s}=this.gridBodyCon;!i&&Vt(e.rowPinned)&&s.ensureIndexVisible(e.rowIndex),e.column.isPinned()||s.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function mw(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var YZ={moduleName:"KeyboardNavigation",version:ye,beans:[KZ,HZ,JX],apiFunctions:{getFocusedCell:zZ,clearFocusedCell:UZ,setFocusedCell:WZ,setFocusedHeader:qZ,tabToNextCell:jZ,tabToPreviousCell:$Z}},QZ=class extends oe{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},XZ=class extends oe{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(e,t){const{rowModel:n}=this.beans,i=n.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;const s=n.getRowBounds(t);s&&(s.rowIndex=t),this.bottomRowBounds=s,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},ZZ=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",JZ=class extends oe{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&(Ut(n,t),Ws(n,e))}},eJ=class extends oe{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,i=zn(e,"print"),s=i?0:t.getColsLeftWidth(),o=i?0:t.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,n.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=Fh(e);if(t<=50)return;const n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:s,hasLockedPinned:o}=n;let a=s;!a.length&&!o||(i&&(a=i({columns:a,viewportWidth:t})),!(!a||!a.length)&&(a=a.filter(c=>!kr(c)),this.setColsPinned(a,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new JZ(e,t)}setColsPinned(e,t,n){const{colModel:i,colAnimation:s,visibleCols:o,gos:a}=this.beans;if(!i.cols||!e?.length)return;if(zn(a,"print")){ge(37);return}s?.start();let c;t===!0||t==="left"?c="left":t==="right"?c="right":c=null;const u=[];e.forEach(h=>{if(!h)return;const f=i.getCol(h);f&&f.getPinned()!==c&&(this.setColPinned(f,c),u.push(f))}),u.length&&(o.refresh(n),oL(this.eventSvc,u,n)),s?.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const n=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;const s=()=>{const o=n?this.leftWidth:this.rightWidth;if(o==null)return;const a=o==0,c=e.hidden!==a,u=this.gos.get("enableRtl"),h=t.getScrollbarWidth(),p=t.verticalScrollShowing&&(u&&n||!u&&i)?o+h:o;e.comp.setPinnedContainerWidth(`${p}px`),e.comp.setDisplayed(!a),c&&(e.hidden=a,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:s,rightPinnedWidthChanged:s,scrollVisibilityChanged:s,scrollbarWidthChanged:s})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:i,rightWidth:s}=this,o=Fh(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+s+e>o)if(o>i+s)e=o-i-s;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,n=this.leftWidth??0,i=t+n;let s=!1;if(i<e)return{columns:[],hasLockedPinned:s};const{visibleCols:o}=this.beans,a=[...o.leftCols],c=[...o.rightCols];let u=0,h=0;const f=0,p=[];let m=i-f-e;for(;(h<a.length||u<c.length)&&m>0;){if(u<c.length){const w=c[u++];if(w.colDef.lockPinned){s=!0;continue}m-=w.getActualWidth(),p.push(w)}if(h<a.length&&m>0){const w=a[h++];if(w.colDef.lockPinned){s=!0;continue}m-=w.getActualWidth(),p.push(w)}}return{columns:p,hasLockedPinned:s}}},tJ={moduleName:"PinnedColumn",version:ye,beans:[eJ],css:[ZZ]},nJ=class extends oe{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Hn(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Mn(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),fk(n,"polite"),Aj(n,"additions text"),Dj(n,!0),e.eGridDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}​`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Ai(e),e.parentElement?.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},iJ={moduleName:"Aria",version:ye,beans:[nJ]};function sJ(e){e.overlays?.showLoadingOverlay()}function oJ(e){e.overlays?.showNoRowsOverlay()}function rJ(e){e.overlays?.hideOverlay()}var aJ=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",lJ={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},DO=class extends At{constructor(){super(lJ),this.eOverlayWrapper=De,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(aJ)}handleKeyDown(e){if(e.key!==Z.TAB||e.defaultPrevented||Mo(e))return;const t=this.beans;if(Rl(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=t.focusSvc.focusGridView({column:Ct(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=lu(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:s,PRINT:o}=Cp;n.toggle(i,t.autoHeight),n.toggle(s,t.normal),n.toggle(o,t.print)}postConstruct(){this.createManagedBean(new YR(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){const s=$t(this.beans);s&&!Vk(this.beans)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!!s){if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,i)){const o=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:a})=>{o.refresh?.(Pe(this.gos,{...a??{}}))})}n&&this.isGridFocused()&&fl(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Ai(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=$t(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},cJ={selector:"AG-OVERLAY-WRAPPER",component:DO},uJ=class extends oe{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=gn(this.gos),this.isServerSide=!this.isClientSide&&wl(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){ge(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return cJ}getOverlayWrapperCompClass(){return DO}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:n,beans:{gos:i,colModel:s,rowModel:o}}=this;let a=this.gos.get("loading");a!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&a===void 0&&!i.get("suppressLoadingOverlay")&&(a=!i.get("columnDefs")||!s.ready||!i.get("rowData")&&t),a?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!i.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!n&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(x8(this.beans.userCompFactory,Pe(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(D8(this.beans.userCompFactory,Pe(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){const i=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(i,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;this.state===2?t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0:this.wrapperPadding!==0&&(t=0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},dJ={moduleName:"Overlay",version:ye,userComponents:{agLoadingOverlay:jq,agNoRowsOverlay:qq},apiFunctions:{showLoadingOverlay:sJ,showNoRowsOverlay:oJ,hideOverlay:rJ},beans:[uJ]},hJ=class extends oe{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=Hj(),cl(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;cl(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},fJ=400,gJ=class extends oe{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},n=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},i=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{jr(this.gos)?n():i()}),jr(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:s})=>{(!s&&i||s&&!i)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const i=n.getShowRowGroupCols();i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=zn(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new pJ(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){const n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onCellFocusChanged(e){if(e&&e.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(n=>t.onFlashCells(n,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(t=>{const n=u=>{this.getAllCellCtrls().forEach(h=>{h.column===t&&u(h)})},i=()=>{n(u=>u.onLeftChanged())},s=()=>{n(u=>u.onWidthChanged())},o=()=>{n(u=>u.onFirstRightPinnedChanged())},a=()=>{n(u=>u.onLastLeftPinnedChanged())},c=()=>{n(u=>u.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",s),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",a),t.__addEventListener("colDefChanged",c),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",s),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",a),t.__removeEventListener("colDefChanged",c)})})}onDomLayoutChanged(){const e=zn(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach(n=>{const i=n.getCellCtrl(e,!0)?.eGui;i&&t.push(i)}),t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){const{pinnedRowModel:i,beans:s,printLayout:o}=this,a=Object.fromEntries(e.map(u=>[u.rowNode.id,u]));i?.forEachPinnedRow(t,(u,h)=>{const f=e[h];f&&i.getPinnedRowById(f.rowNode.id,t)===void 0&&(f.destroyFirstPass(),f.destroySecondPass()),u.id in a&&n?(e[h]=a[u.id],delete a[u.id]):e[h]=new fm(u,s,!1,!1,o)});const c=(t==="top"?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;e.length=c}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=i=>{const s=i[e.rowIndex];s&&s.rowNode===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){e?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&Hc(this.gos),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:a}=this;if(o){o.checkStickyRows();const c=o.extraTopHeight+o.extraBottomHeight;c&&this.updateContainerHeights(c)}this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(js(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:Os(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Pe(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:n}=this.beans;let i=e;for(i.rowPinned==null&&t&&n&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=am(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});const s=this.getRowByPosition(i);if(s?.isAlive())return{...s.getRowPosition(),column:e.column};i=am(this.beans,i)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){const s=t[i].getAllCellCtrls(),o=s.length;for(let a=0;a<o;a++)e.push(s[a])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:i}={}){const s={force:n,newData:!1,suppressFlash:i};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(s);this.refreshFullWidth(e)}refreshRows(e={}){this.getRowCtrls(e.rowNodes).forEach(t=>t.refreshRow(e)),this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=XS(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{const s=i.rowNode;return ZS(s,t)})}getCellCtrls(e,t){let n;Ce(t)&&(n={},t.forEach(s=>{const o=this.colModel.getCol(s);Ce(o)&&(n[o.getId()]=!0)}));const i=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(o=>{const a=o.column.getId();n&&!n[a]||i.push(o)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const i=n.rowNode;t[i.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{const i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:i}=e;let s;const o=this.stickyRowFeature;o&&(s=t?.getFocusCellToUseAfterRefresh()||void 0);const a=this.firstRenderedRow,c=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let u=!1;if(o){u=o.checkStickyRows();const f=o.extraTopHeight+o.extraBottomHeight;f&&this.updateContainerHeights(f)}const h=this.firstRenderedRow!==a||this.lastRenderedRow!==c;if(!(i&&!u&&!h)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!u),s!=null)){const f=t?.getFocusCellToUseAfterRefresh();s!=null&&f==null&&(n?.flushAllFrames(),this.restoreFocusedCell(s))}}removeRowCompsNotToDraw(e,t){const n={};e.forEach(o=>n[o]=!0);const s=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!n[o]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=[];for(let a=this.firstRenderedRow;a<=this.lastRenderedRow;a++)t.push(a);const n=this.beans.pagination,i=this.beans.focusSvc?.getFocusedCell()?.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);const s=a=>{const c=a.rowNode.rowIndex;c==null||c===i||(c<this.firstRenderedRow||c>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(a)&&t.push(c)};for(const a of Object.values(this.rowCtrlsByRowIndex))s(a);if(e)for(const a of Object.values(e))s(a);t.sort((a,c)=>a-c);const o=[];for(let a=0;a<t.length;a++){const c=t[a],u=this.rowModel.getRow(c);u&&!u.sticky&&o.push(c)}return o}recycleRows(e,t=!1,n=!1){const i=this.calculateIndexesToDraw(e);if((this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t),i.forEach(s=>{this.createOrUpdateRowCtrl(s,e,t,n)}),e){const{animationFrameSvc:s}=this.beans;s?.active&&n&&!this.printLayout?s.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const n=t.rowNode.rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=XS(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const i=n.rowNode;return!(t!=null&&!ZS(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.rowModel.getRow(e),Ce(s)&&Ce(t)&&t[s.id]&&s.alreadyRendered&&(o=t[s.id],t[s.id]=null)),!o)if(s||(s=this.rowModel.getRow(e)),Ce(s))o=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const n=[];if(e){for(const i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){const s=i.instanceId;this.zombieRowCtrls[s]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[s]})}else i.destroySecondPass()}}t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>n.forEach(i=>i()),fJ))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=el(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let i,s;if(!n.isRowsToRender())i=0,s=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),s=t.getLastRow();else{const f=this.getRowBufferInPixels(),p=this.ctrlsSvc.getScrollFeature(),m=this.gos.get("suppressRowVirtualisation");let w=!1,S,E;do{const U=t.getPixelOffset(),{pageFirstPixel:z,pageLastPixel:j}=t.getCurrentPagePixelRange(),I=e.divStretchOffset,A=p.getVScrollPosition(),_=A.top,L=A.bottom;m?(S=z+I,E=j+I):(S=Math.max(_+U-f,z)+I,E=Math.min(L+U+f,j)+I),this.firstVisibleVPixel=Math.max(_+U,z)+I,this.lastVisibleVPixel=Math.min(L+U,j)+I,w=this.ensureAllRowsInRangeHaveHeightsCalculated(S,E)}while(w);let T=n.getRowIndexAtPixel(S),F=n.getRowIndexAtPixel(E);const P=t.getFirstRow(),M=t.getLastRow();T<P&&(T=P),F>M&&(F=M),i=T,s=F}const o=zn(this.gos,"normal"),a=this.gos.get("suppressMaxRenderedRowRestriction"),c=Math.max(this.getRowBuffer(),500);o&&!a&&s-i>c&&(s=i+c);const u=i!==this.firstRenderedRow,h=s!==this.lastRenderedRow;(u||h)&&(this.firstRenderedRow=i,this.lastRenderedRow=s,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:s}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,jo(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:s,rowModel:o}=this,a=o.ensureRowHeightsValid(e,t,s.getFirstRow(),s.getLastRow());return(a||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||a||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const i=e.rowNode,s=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),o=this.editSvc?.isEditing(e),a=i.detail;return s||o||a?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){const i=this.cachedRowCtrls?.getRow(e)??null;if(i)return i;const s=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new fm(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},pJ=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Ji(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],Ji(this.entriesList,e)}getEntries(){return this.entriesList}};function XS(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(n=>{const i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}function ZS(e,t){const n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var mJ=class extends oe{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=_s(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=_s(e))}doFullSort(e,t){const n=e.map((i,s)=>({currentPos:s,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,n){const i=t.rowNode,s=n.rowNode;for(let o=0,a=e.length;o<a;o++){const c=e[o],u=c.sort==="desc",h=this.getValue(i,c.column),f=this.getValue(s,c.column);let p;const m=this.getComparator(c,i);if(m?p=m(h,f,i,s,u):p=bj(h,f,this.isAccentedSort),!isNaN(p)&&p!==0)return c.sort==="asc"?p:p*-1}return t.currentPos-n.currentPos}getComparator(e,t){const n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;const s=!t.group&&n.getColDef().field;if(!s)return;const o=this.beans.colModel.getColDefCol(s);if(o)return o.getColDef().comparator}getValue(e,t){const{valueSvc:n,colModel:i,showRowGroupCols:s,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(t,e,!1);if(e.rowGroupColumn===t){if(Gk(o,i.isPivotActive())){const h=e.allLeafChildren?.[0];return h?n.getValue(t,h,!1):void 0}const u=s?.getShowRowGroupCol(t.getId());return u?e.groupData?.[u.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return n.getValue(t,e,!1)}};function CJ(e){e.sortSvc?.onSortChanged("api")}var AO={moduleName:"Sort",version:ye,beans:[lZ,mJ],apiFunctions:{onSortChanged:CJ},userComponents:{agSortIndicator:uE},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},vJ=class extends oe{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),cl(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Uc(e.source))}}};function yJ(e){e.valueCache?.expire()}function wJ(e,t){const{colKey:n,rowNode:i,useFormatter:s}=t,o=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(Vt(o))return null;const a=e.valueSvc.getValueForDisplay(o,i,s);return s?a.valueFormatted??bu(a.value):a.value}var SJ="paste",bJ=class extends oe{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;gn(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if(e.source===SJ||t.get("suppressChangeDetection"))return;const i=e.node,s=[i],o=this.clientSideRowModel,a=o?.rootNode;if(a&&!i.isRowPinned()){const c=t.get("aggregateOnlyChangedColumns"),u=new Oh(c,a);u.addParentNode(i.parent,[e.column]),o.doAggregate(u),u.forEachChangedNodeDepthFirst(h=>{s.push(h),h.sibling&&s.push(h.sibling)})}n.refreshCells({rowNodes:s})}},RJ=class extends oe{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);vt(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return vt(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},EJ=class extends oe{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){const i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},TJ={moduleName:"ValueCache",version:ye,beans:[EJ],apiFunctions:{expireValueCache:yJ}},xJ={moduleName:"Expression",version:ye,beans:[RJ]},DJ={moduleName:"ChangeDetection",version:ye,beans:[bJ]},AJ={moduleName:"CellApi",version:ye,apiFunctions:{getCellValue:wJ}},Yg={checkSiblings:!0},FJ=class extends oe{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEdit=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEdit=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=wl(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,n=!1,i=!1,s="ui"){const{showRowGroupColValueSvc:o}=this.beans,a=!e&&t.group,c=e?.colDef.showRowGroup,u=!this.isTreeData||t.footer;if(o&&u&&(a||c)){const E=o.getGroupValue(t,e);if(E==null)return{value:null,valueFormatted:null};if(!n)return{value:E.value,valueFormatted:null};const T=o.formatAndPrefixGroupColValue(E,e,i);return{value:E.value,valueFormatted:T}}if(!e)return{value:t.key,valueFormatted:null};const h=t.leafGroup&&this.colModel.isPivotMode(),f=t.group&&t.expanded&&!t.footer&&!h,p=this.gos.get("groupSuppressBlankHeader")||!t.sibling,m=f&&!p,w=this.getValue(e,t,m,s),S=n&&!(i&&e.colDef.useValueFormatterForExport===!1);return{value:w,valueFormatted:S?this.formatValue(e,t,w):null}}getValue(e,t,n=!1,i="ui"){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),o=s.field,a=e.getColId();let c=t.data;if(this.hasEdit&&i==="ui"){const E=this.editSvc;if(E.isRowEditing(t,Yg)&&(c=E.getRowDataValue(t,Yg)),E.isEditing()){const T=E.getCellDataValue({rowNode:t,column:e},!0);if(T!==void 0)return T}}let u;const h=s.showRowGroup;if(typeof h=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(h)??-1)>t.level)return null;const f=typeof h!="string"||!t.group,p=t.groupData&&a in t.groupData,m=!n&&t.aggData&&t.aggData[a]!==void 0,w=this.isSsrm&&n&&!!s.aggFunc,S=this.isSsrm&&t.footer&&t.field&&(s.showRowGroup===!0||s.showRowGroup===t.field);if(this.isTreeData&&m)u=t.aggData[a];else if(this.isTreeData&&s.valueGetter)u=this.executeValueGetter(s.valueGetter,c,e,t);else if(this.isTreeData&&o&&c)u=ih(c,o,e.isFieldContainsDots());else if(p)u=t.groupData[a];else if(m)u=t.aggData[a];else if(s.valueGetter&&!w){if(!f)return u;u=this.executeValueGetter(s.valueGetter,c,e,t)}else if(S)u=ih(c,t.field,e.isFieldContainsDots());else if(o&&c&&!w){if(!f)return u;u=ih(c,o,e.isFieldContainsDots())}if(this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){const E=u.substring(1);u=this.executeValueGetter(E,c,e,t)}return u}parseValue(e,t,n,i){const s=e.getColDef(),o=s.valueParser;if(Ce(o)){const a=Pe(this.gos,{node:t,data:t?.data,oldValue:i,newValue:n,colDef:s,column:e});return typeof o=="function"?o(a):this.expressionSvc?.evaluate(o,a)}return n}getDeleteValue(e,t){return Ce(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,n,i,s=!0){const{expressionSvc:o}=this.beans;let a=null,c;const u=e.getColDef();if(i?c=i:s&&(c=u.valueFormatter),c){let h=t?t.data:null;if(t){const p={rowNode:t};if(this.hasEdit){const m=this.editSvc;m.isEditing(p,Yg)&&(h=m.getRowDataValue(t,Yg))}}const f=Pe(this.gos,{value:n,node:t,data:h,colDef:u,column:e});typeof c=="function"?a=c(f):a=o?o.evaluate(c,f):null}else if(u.refData)return u.refData[n]||"";return a==null&&Array.isArray(n)&&(a=n.join(", ")),a}setValue(e,t,n,i){const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;Vt(e.data)&&(e.data={});const{field:o,valueSetter:a}=s.getColDef();if(Vt(o)&&Vt(a))return ge(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,n))return ge(135),!1;const c=Pe(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e,void 0,i),newValue:n,colDef:s.getColDef(),column:s});c.newValue=n;let u;if(Ce(a)?typeof a=="function"?u=a(c):u=this.expressionSvc?.evaluate(a,c):u=this.setValueUsingField(e.data,o,n,s.isFieldContainsDots()),u===void 0&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const h=this.getValue(s,e);return this.dispatchCellValueChangedEvent(e,c,h,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,c,h,i),!0}dispatchCellValueChangedEvent(e,t,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let s=!1;if(!i)s=e[t]===n,s||(e[t]=n);else{const o=t.split(".");let a=e;for(;o.length>0&&a;){const c=o.shift();o.length===0?(s=a[c]===n,s||(a[c]=n)):a=a[c]}}return!s}executeValueGetterWithValueCache(e,t,n,i){const s=n.getColId(),o=this.valueCache.getValue(i,s);if(o!==void 0)return o;const a=this.executeValueGetterWithoutValueCache(e,t,n,i);return this.valueCache.setValue(i,s,a),a}executeValueGetterWithoutValueCache(e,t,n,i){const s=Pe(this.gos,{data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});let o;return typeof e=="function"?o=e(s):o=this.expressionSvc?.evaluate(e,s),o}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){const n=this.getValue(e,t),i=e.getColDef().keyCreator;let s=n;if(i){const o=Pe(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});s=i(o)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&ge(121)),s}},PJ={moduleName:"CommunityCore",version:ye,beans:[sZ,BK,WQ,X7,hJ,nQ,ZX,AZ,K7,XZ,QZ,gJ,FJ,nZ,XX,iZ,$Q,vJ,BQ,GQ],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:GK,destroy:HK,isDestroyed:zK,getGridOption:UK,setGridOption:WK,updateGridOptions:eO,isModuleRegistered:jK},dependsOn:[OQ,kY,HY,AO,LZ,sQ,OZ,dJ,DJ,NZ,YZ,tJ,iJ,GZ,UQ,VQ,xJ,lQ]};function JS(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:s}=e;let o=(n??[]).map((u,h)=>({value:u,relevance:MJ(t,u),idx:h}));if(o.sort((u,h)=>u.relevance-h.relevance),i&&(o=o.filter(u=>u.relevance<Math.max(u.value.length,t.length))),o.length>0&&s&&s>0){const h=o[0].relevance*s;o=o.filter(f=>h-f.relevance<0)}const a=[],c=[];for(const u of o)a.push(u.value),c.push(u.idx);return{values:a,indices:c}}function MJ(e,t){e.length<t.length&&([e,t]=[t,e]);let n=[],i=[];const s=e.length,o=t.length;for(let c=0;c<=o;c++)n[c]=c;let a=0;for(let c=1;c<=s;c++){i[0]=c;for(let u=1;u<=o;u++){const h=e[c-1],f=t[u-1];if(h.toLocaleLowerCase()===f.toLocaleLowerCase())++a,h===f&&++a,c>1&&u>1&&e[c-2].toLocaleLowerCase()===t[u-2].toLocaleLowerCase()&&(++a,e[c-2]===t[u-2]&&++a),c<s/2-10&&++a,i[u]=n[u-1];else{const p=i[u-1],m=n[u],w=n[u-1];i[u]=1+Math.min(p,m,w)}}[n,i]=[i,n]}return n[o]/(a+1)}var FO={AdvancedFilter:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},Cw=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],IJ={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:Cw,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...Cw,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...Cw,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},_J={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function kJ(e,t){const n=[];return(Array.isArray(e)?e:[e]).forEach(i=>{const s=IJ[i];s?s.forEach(o=>{const a=_J[o];(!a||a===t)&&n.push(o)}):n.push(i)}),n}var PO=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,LJ=e=>{const t=e.map(i=>`import { ${lh(i)} } from '${FO[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>lh(i,!0)).join(", ")} ]); 

For more info see: ${Gc}/modules/`};function lh(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function OJ(e,t){const n=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let i="";return!globalThis?.agCharts&&n.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>FO[o])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function MO({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var SP=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:i,rowModelType:s,additionalText:o,isUmd:a})=>{const c=kJ(t,s),u=typeof e=="string"?e:GJ[e];if(a)return OJ(u,c);const h=c.filter(m=>m==="IntegratedCharts"||m==="Sparklines"),f=h.length>0?`${h.map(m=>lh(m)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${u} as ${c.length>1?"one of "+c.map(m=>lh(m)).join(", "):lh(c[0])} is not registered${n?" for gridId: "+i:""}. ${f} Check if you have registered the module:
`}
${LJ(c)}`+(o?` 

${o}`:"")},bP=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,VJ=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,NJ={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${VJ(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${i?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})=>{const s=[],o=[...Object.keys(n??[]).filter(c=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(c)),...Object.keys(i??[]).filter(c=>!!i[c])],a=JS({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),a.length>0&&s.push(`         Did you mean: [${a.slice(0,3)}]?
`),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Gc}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const n=JS({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:SP,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Gc}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>bP("IntegratedChartsModule"),258:()=>bP("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:i,rowModelType:s})=>SP({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Yc[t],gridId:i,gridScoped:n,rowModelType:s}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Gc}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>PO(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:MO,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler()`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`};function BJ(e,t){const n=NJ[e];if(!n)return[`Missing error text for error id ${e}!`];const i=n(t),o=`
See ${Ik(e,t)}`;return Array.isArray(i)?i.concat(o):[i,o]}var GJ={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},RP=new WeakMap,EP=new WeakMap,HJ=1,zJ=class{create(e,t,n,i,s,o){const a=ck.applyGlobalGridOptions(t),c=a.gridId??String(HJ++),u=this.getRegisteredModules(s,c,a.rowModelType),h=this.createBeansList(a.rowModelType,u,c),f=this.createProvidedBeans(e,a,s);if(!h)return;const m={providedBeanInstances:f,beanClasses:h,gridId:c,beanInitComparator:LK,beanDestroyComparator:OK,derivedBeans:[_K],destroyCallback:()=>{EP.delete(S),RP.delete(e),o?.()}},w=new z8(m);this.registerModuleFeatures(w,u),n(w),w.getBean("syncSvc").start(),i?.(w);const S=w.getBean("gridApi");return RP.set(e,S),EP.set(S,e),S}getRegisteredModules(e,t,n){return _h(PJ,void 0,!0),e?.modules?.forEach(i=>_h(i,t)),k8(t,TP(n))}registerModuleFeatures(e,t){const n=e.getBean("registry"),i=e.getBean("apiFunctionSvc");t.forEach(s=>{n.registerModule(s);const o=s.apiFunctions;o&&Object.keys(o).forEach(c=>{i?.addFunction(c,o[c])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;Vt(i)&&(i=new ZL);const s={gridOptions:t,eGridDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(s,n.providedBeanInstances),s}createBeansList(e,t,n){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},s=TP(e),o=i[s];if(!o){Wd(201,{rowModelType:s},`Unknown rowModelType ${s}.`);return}if(!V8()){Wd(272,void 0,PO());return}if(!e){const c=Object.entries(i).filter(([u,h])=>OS(h,n,u));if(c.length==1){const[u,h]=c[0];if(u!==s){const f={moduleName:h,rowModelType:u};Wd(275,f,MO(f));return}}}if(!OS(o,n,s)){Wd(200,{reasonOrId:`rowModelType = '${s}'`,moduleName:o,gridScoped:UR(),gridId:n,rowModelType:s},`Missing module ${o}Module for rowModelType ${s}.`);return}const a=new Set;return t.forEach(c=>c.beans?.forEach(u=>a.add(u))),Array.from(a)}};function TP(e){return e??"clientSide"}function Xs(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function nC(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function IO(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var UJ=class extends oe{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(i,s,o)=>t({key:i,defaultValue:s,variableValues:o});const n=e.get("localeText");return(i,s,o)=>{let a=n&&n[i];if(a&&o&&o.length){let c=0;for(;!(c>=o.length||a.indexOf("${variable}")===-1);)a=a.replace("${variable}",o[c++])}return a??s}}};function WJ(e,t=!1){const n=[],i=[],s=[],o=[],a=[],c=[],u=[],h=[],f=[];let p=0;for(let m=0;m<e.length;m++){const{colId:w,sort:S,sortIndex:E,rowGroup:T,rowGroupIndex:F,aggFunc:P,pivot:M,pivotIndex:U,pinned:z,hide:j,width:I,flex:A}=e[m];f.push(w),S&&(n[E??p++]={colId:w,sort:S}),T&&(i[F??0]=w),typeof P=="string"&&s.push({colId:w,aggFunc:P}),M&&(o[U??0]=w),z&&(z==="right"?c:a).push(w),j&&u.push(w),(A!=null||I)&&h.push({colId:w,flex:A??void 0,width:I})}return{sort:n.length?{sortModel:n}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:o}:void 0,columnPinning:a.length||c.length?{leftColIds:a,rightColIds:c}:void 0,columnVisibility:u.length?{hiddenColIds:u}:void 0,columnSizing:h.length?{columnSizingModel:h}:void 0,columnOrder:f.length?{orderedColIds:f}:void 0}}function jJ(e){const t=[];return e.forEach(({groupId:n,open:i})=>{i&&t.push(n)}),t.length?{openColumnGroupIds:t}:void 0}var $J=class{wrap(e,t,n,i){const s=this.createWrapper(e,i);return t?.forEach(o=>{this.createMethod(s,o,!0)}),n?.forEach(o=>{this.createMethod(s,o,!1)}),s}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&ge(49,{methodName:t}),null)}}},qJ={tag:"div",cls:"ag-tooltip"},KJ=class extends nE{constructor(){super(qJ)}init(e){const{value:t}=e,n=this.getGui();n.textContent=bu(t);const i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${i}-tooltip`)}},YJ=1e3,QJ=1e3,xP=100,DP,Qg=!1,XJ=class extends oe{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Xa()&&(Qg?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},xP):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,n=this.tooltipCtrl.getGui(),i=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&i?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Qg)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-DP<YJ}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Ce(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const n=t.getRowNode?.(),i=Pe(this.gos,{location:t.getLocation?.()??"UNKNOWN",colDef:t.getColDef?.(),column:t.getColumn?.(),rowIndex:t.getRowIndex?.(),node:n,data:n?.data,value:e,valueFormatted:t.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()??{}});this.state=2,this.tooltipInstanceCount++;const s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);A8(this.userCompFactory,i)?.newAgStackInstance().then(s)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),DP=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Mn(this.beans),{keydown:a=>{i.contains(a?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=$t(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?QJ:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Qg=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},xP)}unlockService(){Qg=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function vw(e){return e.get("tooltipShowMode")==="whenTruncated"}var ZJ=class extends oe{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const n="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(n,e):i.removeAttribute(n))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){this.tooltipManager==null&&(this.tooltipManager=this.createBean(new XJ(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}};function JJ(e,t){if(typeof e!="number")return"";const n=t(),i=n("thousandSeparator",","),s=n("decimalSeparator",".");return e.toString().replace(".",s).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var eee=class extends oe{getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},tee=class{constructor(e){const{colModel:t,rowGroupColsSvc:n,colNames:i,valueSvc:s,gos:o,processCellCallback:a,processHeaderCallback:c,processGroupHeaderCallback:u,processRowGroupCallback:h}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=i,this.valueSvc=s,this.gos=o,this.processCellCallback=a,this.processHeaderCallback=c,this.processGroupHeaderCallback=u,this.processRowGroupCallback=h}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,s){const o=t===0&&Hk(this.gos,s,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||s.group)&&(e.isRowGroupDisplayed(s.rowGroupColumn?.getColId()??"")||o))return{value:this.processRowGroupCallback(Pe(this.gos,{column:e,node:s}))??""};if(this.processCellCallback)return{value:this.processCellCallback(Pe(this.gos,{accumulatedRowIndex:n,column:e,node:s,value:this.valueSvc.getValueForDisplay(e,s,void 0,void 0).value,type:i,parseValue:m=>this.valueSvc.parseValue(e,s,m,this.valueSvc.getValue(e,s,void 0)),formatValue:m=>this.valueSvc.formatValue(e,s,m)??m}))??""};const a=this.gos.get("treeData"),c=this.valueSvc,u=s.level===-1&&s.footer,h=e.colDef.showRowGroup===!0&&(s.group||a);if(!u&&(o||h)){let m="",w=s;for(;w&&w.level!==-1;){const{value:S,valueFormatted:E}=c.getValueForDisplay(o?void 0:e,w,!0,!0);m=` -> ${E??S??""}${m}`,w=w.parent}return{value:m,valueFormatted:m}}const{value:f,valueFormatted:p}=c.getValueForDisplay(e,s,!0,!0);return{value:f??"",valueFormatted:p}}getHeaderName(e,t){return e?e(Pe(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function nee(e,t){const n=document.defaultView||window;if(!n){ge(52);return}const i=document.createElement("a"),s=n.URL.createObjectURL(t);i.setAttribute("href",s),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(s)},0)}var iee={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},ui="clientSide",ni="serverSide",wc="infinite",see={onGroupExpandedOrCollapsed:[ui],refreshClientSideRowModel:[ui],isRowDataEmpty:[ui],forEachLeafNode:[ui],forEachNodeAfterFilter:[ui],forEachNodeAfterFilterAndSort:[ui],resetRowHeights:[ui],applyTransaction:[ui],applyTransactionAsync:[ui],flushAsyncTransactions:[ui],getBestCostNodeSelection:[ui],getServerSideSelectionState:[ni],setServerSideSelectionState:[ni],applyServerSideTransaction:[ni],applyServerSideTransactionAsync:[ni],applyServerSideRowData:[ni],retryServerSideLoads:[ni],flushServerSideAsyncTransactions:[ni],refreshServerSide:[ni],getServerSideGroupLevelState:[ni],refreshInfiniteCache:[wc],purgeInfiniteCache:[wc],getInfiniteRowCount:[wc],isLastRowIndexKnown:[wc,ni],expandAll:[ui,ni],collapseAll:[ui,ni],onRowHeightChanged:[ui,ni],setRowCount:[wc,ni],getCacheBlockState:[wc,ni]},oee={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function ree(e,t,n){const i=oee[e];if(i){const{version:o,new:a,old:c,message:u}=i,h=c??e;return(...f)=>{const p=a?`Please use ${a} instead. `:"";return oh(`Since ${o} api.${h} is deprecated. ${p}${u??""}`),t.apply(t,f)}}const s=see[e];return s?(...o)=>{const a=n.rowModel.getType();if(!s.includes(a)){Bc(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,o)}:t}var aee={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},lee={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},cee={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},uee=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),dee=class extends oe{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,Kj(this)}warnOnInitialPropertyUpdate(e,t){e==="api"&&iee[t]&&ge(22,{key:t})}processGridOptions(e){this.processOptions(e,TZ())}validateApiFunction(e,t){return ree(e,t,this.beans)}missingUserComponent(e,t,n,i){const s=Yc[t];s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):ge(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})}missingDynamicBean(e){const t=aee[e];return t?js(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){fee.has(e)&&ge(10,{eventType:e})}validateIcon(e){if(uee.has(e)&&ge(43,{iconName:e}),lee[e])return;const t=cee[e];if(t){vt(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:UR(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}ge(134,{iconName:e})}isProvidedUserComp(e){return!!Yc[e]}validateColDef(e){this.processOptions(e,gZ())}processOptions(e,t){const{validations:n,deprecations:i,allProperties:s,propertyExceptions:o,objectName:a,docsUrl:c}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],s,a,c);const u=new Set;Object.keys(e).forEach(f=>{const p=i[f];if(p){const{message:P,version:M}=p;u.add(`As of v${M}, ${String(f)} is deprecated. ${P??""}`)}const m=e[f];if(m==null||m===!1)return;const w=n[f];if(!w)return;const{dependencies:S,validate:E,supportedRowModels:T,expectedType:F}=w;if(F){const P=typeof m;if(P!==F){u.add(`${String(f)} should be of type '${F}' but received '${P}' (${m}).`);return}}if(T){const P=this.gridOptions.rowModelType??"clientSide";if(!T.includes(P)){u.add(`${String(f)} is not supported with the '${P}' row model. It is only valid with: ${T.join(", ")}.`);return}}if(S){const P=this.checkForRequiredDependencies(f,S,e);if(P){u.add(P);return}}if(E){const P=E(e,this.gridOptions,this.beans);if(P){u.add(P);return}}}),u.size>0&&u.forEach(f=>{oh(f)})}checkForRequiredDependencies(e,t,n){const s=Object.entries(t).filter(([o,a])=>{const c=n[o];return!a.required.includes(c)});return s.length===0?null:s.map(([o,a])=>`'${String(e)}' requires '${o}' to be one of [${a.required.map(c=>c===null?"null":c===void 0?"undefined":c).join(", ")}]. ${a.reason??""}`).join(`
           `)}checkProperties(e,t,n,i,s){const o=["__ob__","__v_skip","__metadata__"],a=hee(Object.getOwnPropertyNames(e),[...o,...t,...n],n),c=Object.keys(a);for(const u of c){const h=a[u];let f=`invalid ${i} property '${u}' did you mean any of these: ${h.slice(0,8).join(", ")}.`;n.includes("context")&&(f+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),oh(f)}if(c.length>0&&s){const u=this.beans.frameworkOverrides.getDocLink(s);oh(`to see all the valid ${i} properties please check: ${u}`)}}getConsoleMessage(e,t){return BJ(e,t)}};function hee(e,t,n){const i={},s=e.filter(o=>!t.some(a=>a===o));return s.length>0&&s.forEach(o=>i[o]=JS({inputValue:o,allSuggestions:n}).values),i}var fee=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),gee={moduleName:"Validation",version:ye,beans:[dee]};function _O(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var pee=class extends oe{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const n=(i,s)=>{i.hasChildren()&&e&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{const a=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,c=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return a||c}):i.childrenAfterFilter=i.childrenAfterGroup,_O(i)};if(this.doingTreeDataFiltering()){const i=(o,a)=>{if(o.childrenAfterGroup)for(let c=0;c<o.childrenAfterGroup.length;c++){const u=o.childrenAfterGroup[c],h=a||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?i(o.childrenAfterGroup[c],h):n(u,h)}n(o,a)},s=o=>i(o,!1);t.executeFromRootNode(s)}else{const i=s=>n(s,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},mee=class extends tE{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,n,i,s){this.comp=e;const o=nf(this,this.beans.context,s);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const a=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:a}),o.addManagedEventListeners({filterSwitched:({column:c})=>{c===this.column&&a()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return Pe(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Yi("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Eu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();su(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if($t(t)===this.eGui)return;const s=Rl(t,this.eGui,null,e.shiftKey);if(s){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Z.UP:case Z.DOWN:case Z.LEFT:case Z.RIGHT:if(t)return;dl(e);case Z.ENTER:t&&fl(this.eGui)&&e.preventDefault();break;case Z.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Za(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){const s=this.lastFocusEvent,o=!!(s&&s.key===Z.TAB);if(s&&o){const a=s.shiftKey;fl(this.eGui,a)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new eE(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!xi(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:n,gos:i}=this,s=o=>{if(o?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;const a=this.comp.getFloatingFilterComp();a&&a.then(c=>{if(c){if(i.get("enableFilterHandlers")){const f=o;let p="filter";f?.afterFloatingFilter?p="ui":f?.afterDataChange?p="dataChanged":o?.source==="api"&&(p="api"),this.updateFloatingFilterParams(this.userCompDetails,p);return}const u=t?.getCurrentFloatingFilterParentModel(n),h=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;c.onParentModelChanged(u,h)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:s}),t?.isFilterActive(n)&&s(null)}setupWidth(e){const t=()=>{const n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.beans.colFilter,s=this.active?i?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!s?this.updateCompDetails(e,s,n):o.then(a=>{!a||i?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,n):this.updateFloatingFilterParams(s,"colDef")})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let n=e.params;this.comp.getFloatingFilterComp()?.then(i=>{typeof i?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(n={...n,model:Fn(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),i.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function Cee(e,t){const n=e.colModel.getCol(t);if(!n){vt(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function vee(e){e.menuSvc?.hidePopupMenu()}var yee={moduleName:"SharedMenu",version:ye,beans:[Uq],apiFunctions:{showColumnMenu:Cee,hidePopupMenu:vee}},Xg=0,wee=200,See=class extends oe{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:n,column:i,node:s,event:o}=e,a=t.getBoundingClientRect(),c=this.getParentRect();this.setAlignedTo(t,n);let u=!1;const h=()=>{const f=this.keepXYWithinBounds(n,a.top-c.top,0),p=n.clientWidth>0?n.clientWidth:200;u||(n.style.minWidth=`${p}px`,u=!0);const w=c.right-c.left-p;let S;return this.gos.get("enableRtl")?(S=T(),S<0&&(S=E(),this.setAlignedStyles(n,"left")),S>w&&(S=0,this.setAlignedStyles(n,"right"))):(S=E(),S>w&&(S=T(),this.setAlignedStyles(n,"right")),S<0&&(S=0,this.setAlignedStyles(n,"left"))),{x:S,y:f};function E(){return a.right-c.left-2}function T(){return a.left-c.left-p}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:h,postProcessCallback:()=>this.callPostProcessPopup("subMenu",n,t,o instanceof MouseEvent?o:void 0,i,s)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,eventSource:o,alignSide:a="left",position:c="over",column:u,rowNode:h,type:f}=e,p=o.getBoundingClientRect(),m=this.getParentRect();this.setAlignedTo(o,t);const w=()=>{let S=p.left-m.left;a==="right"&&(S-=t.offsetWidth-p.width);let E;return c==="over"?(E=p.top-m.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,p,m,e.nudgeY||0)==="under"?E=p.top-m.top+p.height:E=p.top-t.offsetHeight-(i||0)*2-m.top),{x:S,y:E}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,updatePosition:w,postProcessCallback:()=>this.callPostProcessPopup(f,t,o,null,u,h)})}shouldRenderUnderOrAbove(e,t,n,i){const s=n.bottom-t.bottom,o=t.top-n.top,a=e.offsetHeight+i;return s>a?"under":o>a||o>s?"above":"under"}setAlignedStyles(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const i=this.popupList[n],{alignedToElement:s}=i;!s||(["right","left","over","above","under"].forEach(a=>{s.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const n=this.getPopupIndex(t);if(n!==-1){const i=this.popupList[n];i.alignedToElement=e}}callPostProcessPopup(e,t,n,i,s,o){const a=this.gos.getCallback("postProcessPopup");a&&a({column:s,rowNode:o,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){const{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:s,skipObserver:o,updatePosition:a}=e,c={width:0,height:0},u=(h=!1)=>{let{x:f,y:p}=a();h&&t.clientWidth===c.width&&t.clientHeight===c.height||(c.width=t.clientWidth,c.height=t.clientHeight,i&&(f+=i),s&&(p+=s),n&&(f=this.keepXYWithinBounds(t,f,1),p=this.keepXYWithinBounds(t,p,0)),t.style.left=`${f}px`,t.style.top=`${p}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!o){const h=Wo(this.beans,t,()=>u(!0));setTimeout(()=>h(),wee)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){const e=Mn(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Rk(t)}keepXYWithinBounds(e,t,n){const i=n===0,s=i?"clientHeight":"clientWidth",o=i?"top":"left",a=i?"height":"width",c=i?"scrollTop":"scrollLeft",u=Mn(this.beans),h=u.documentElement,f=this.getPopupParent(),p=e.getBoundingClientRect(),m=f.getBoundingClientRect(),w=u.documentElement.getBoundingClientRect(),S=f===u.body,E=Math.ceil(p[a]);let F=S?(i?bk:qp)(h)+h[c]:f[s];S&&(F-=Math.abs(w[o]-m[o]));const P=F-E;return Math.min(Math.max(t,0),Math.abs(P))}addPopup(e){const t=Mn(this.beans),{eChild:n,ariaLabel:i,ariaOwns:s,alwaysOnTop:o,positionCallback:a,anchorToElement:c}=e;if(!t)return ge(122),{hideFunc:()=>{}};const u=this.getPopupIndex(n);if(u!==-1)return{hideFunc:this.popupList[u].hideFunc};this.initialisePopupPosition(n);const h=this.createPopupWrapper(n,!!o,i,s),f=this.addEventListenersToPopup({...e,wrapperEl:h});return a&&a(),this.addPopupToPopupList(n,h,f,c),{hideFunc:f}}initialisePopupPosition(e){const n=this.getPopupParent().getBoundingClientRect();Ce(e.style.top)||(e.style.top=`${n.top*-1}px`),Ce(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n,i){const s=this.getPopupParent(),{environment:o,gos:a}=this.beans,c=an({tag:"div"});return o.applyThemeClasses(c),c.classList.add("ag-popup"),e.classList.add(a.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||ll(e,"dialog"),n?su(e,n):i&&(e.id||(e.id=`popup-component-${Xg}`),DF(i,e.id)),c.appendChild(e),s.appendChild(c),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),c}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const n of this.popupList)t.applyThemeClasses(n.wrapper)}}addEventListenersToPopup(e){const t=this.beans,n=Mn(t),i=this.getPopupParent(),{wrapperEl:s,eChild:o,closedCallback:a,afterGuiAttached:c,closeOnEsc:u,modal:h,ariaOwns:f}=e;let p=!1;const m=T=>{if(!s.contains($t(t)))return;T.key===Z.ESCAPE&&!Mo(T)&&E({keyboardEvent:T})},w=T=>E({mouseEvent:T}),S=T=>E({touchEvent:T}),E=(T={})=>{const{mouseEvent:F,touchEvent:P,keyboardEvent:M,forceHide:U}=T;!U&&(this.isEventFromCurrentPopup({mouseEvent:F,touchEvent:P},o)||p)||(p=!0,i.removeChild(s),n.removeEventListener("keydown",m),n.removeEventListener("mousedown",w),n.removeEventListener("touchstart",S),n.removeEventListener("contextmenu",w),this.eventSvc.removeEventListener("dragStarted",w),a&&a(F||P||M),this.removePopupFromPopupList(o,f))};return c&&c({hidePopup:E}),window.setTimeout(()=>{u&&n.addEventListener("keydown",m),h&&(n.addEventListener("mousedown",w),this.eventSvc.addEventListener("dragStarted",w),n.addEventListener("touchstart",S),n.addEventListener("contextmenu",w))},0),E}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:Xg,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),Xg=Xg+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,i.isAnchored=!0,s}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&DF(t,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:s}=e,o=i.getBoundingClientRect(),a=p=>parseInt(p.substring(0,p.length-1),10),c=(p,m)=>{const w=n[p]-o[p],S=a(s.style[p]);return{initialDiff:w,lastDiff:w,initial:S,last:S,direction:m}},u=c("top",0),h=c("left",1),f=this.beans.frameworkOverrides;return new it(p=>{f.wrapIncoming(()=>{f.setInterval(()=>{const m=t.getBoundingClientRect(),w=i.getBoundingClientRect();if(w.top==0&&w.left==0&&w.height==0&&w.width==0){e.hidePopup();return}const E=(T,F)=>{const P=a(s.style[F]);T.last!==P&&(T.initial=P,T.last=P);const M=m[F]-w[F];if(M!=T.lastDiff){const U=this.keepXYWithinBounds(s,T.initial+T.initialDiff-M,T.direction);s.style[F]=`${U}px`,T.last=U}T.lastDiff=M};E(u,"top"),E(h,"left")},200).then(m=>{p(()=>{m!=null&&window.clearInterval(m)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:n,touchEvent:i}=e,s=n||i;if(!s)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let a=o;a<this.popupList.length;a++){const c=this.popupList[a];if(y7(c.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const t=Mn(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){const t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,s=this.getWrapper(e);if(!s||i<=1||!t.contains(e))return;const o=[],a=[];for(const m of n)m!==s&&(m.classList.contains("ag-always-on-top")?a.push(m):o.push(m));const c=[],u=a.length,p=s.classList.contains("ag-always-on-top")||!u?[...o,...a,s]:[...o,s,...a];for(let m=0;m<=i;m++){const w=p[m];if(n[m]===p[m]||w===s)continue;w.querySelectorAll("div").forEach(E=>{E.scrollTop!==0&&c.push([E,E.scrollTop])}),m===0?t.insertAdjacentElement("afterbegin",w):p[m-1].insertAdjacentElement("afterend",w)}for(;c.length;){const m=c.pop();m[0].scrollTop=m[1]}}},iC={moduleName:"Popup",version:ye,beans:[See]},bee=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function Ree(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function Eee(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function Tee(e,t){const n=e.colModel.getColDefCol(t);if(n)return e.colFilter?.destroyFilter(n,"api")}function xee(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function Dee(e){return e.filterManager?.getFilterModel()??{}}function Aee(e,t,n){const{gos:i,colModel:s,colFilter:o}=e;n&&!i.get("enableFilterHandlers")&&(ge(288),n=!1);const a=s.getColDefCol(t);return a?o?.getModelForColumn(a,n)??null:null}function Fee(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function Pee(e,t){const n=e.colModel.getCol(t);if(!n){vt(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function Mee(e){e.menuSvc?.hideFilterMenu()}function Iee(e,t){const n=e.colModel.getCol(t);if(!n){vt(12,{colKey:t});return}return e.colFilter?.getHandler(n,!0)}function _ee(e,t){const{colModel:n,colFilter:i,gos:s}=e;if(!s.get("enableFilterHandlers")){ge(287);return}const{colId:o,action:a}=t;if(o){const c=n.getColById(o);c&&i?.updateModel(c,a)}else i?.updateAllModels(a)}var kee={filterHandler:()=>({doesFilterPass:()=>!0})},Lee=class extends oe{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={..._L},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...e.get("initialState")?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api"){const{colModel:n,dataTypeSvc:i,filterManager:s}=this.beans;if(i?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const o=[],a=this.getModel(!0);if(e){const c=new Set(Object.keys(e));this.allColumnFilters.forEach((u,h)=>{const f=e[h];o.push(this.setModelOnFilterWrapper(u,f)),c.delete(h)}),c.forEach(u=>{const h=n.getColDefCol(u)||n.getCol(u);if(!h){ge(62,{colId:u});return}if(!h.isFilterAllowed()){ge(63,{colId:u});return}const f=this.getOrCreateFilterWrapper(h,!0);if(!f){ge(64,{colId:u});return}o.push(this.setModelOnFilterWrapper(f,e[u],!0))})}else this.model={},this.allColumnFilters.forEach(c=>{o.push(this.setModelOnFilterWrapper(c,null))});it.all(o).then(()=>{const c=this.getModel(!0),u=[];this.allColumnFilters.forEach((h,f)=>{const p=a?a[f]:null,m=c?c[f]:null;xh(p,m)||u.push(h.column)}),u.length>0&&s?.onFilterChanged({columns:u,source:t})})}getModel(e){const t={},{allColumnFilters:n,initialModel:i,beans:{colModel:s}}=this;if(n.forEach((o,a)=>{const c=this.getModelFromFilterWrapper(o);Ce(c)&&(t[a]=c)}),!e)for(const o of Object.keys(i)){const a=i[o];Ce(a)&&!n.has(o)&&s.getCol(o)?.isFilterAllowed()&&(t[o]=a)}return t}setState(e,t,n="api"){if(this.state.clear(),t)for(const i of Object.keys(t)){const s=t[i];this.state.set(i,{model:Fn(this.model,i),state:s})}this.setModel(e,n)}getState(){const e=this.state;if(!e.size)return;const t={};let n=!1;return e.forEach((i,s)=>{const o=i.state;o!=null&&(n=!0,t[s]=o)}),n?t:void 0}getModelFromFilterWrapper(e){const n=e.column.getColId();if(e.isHandler)return Fn(this.model,n);const i=e.filter;return i?typeof i.getModel!="function"?(ge(66),null):i.getModel():Fn(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=h=>h?h.isFilterActive?h.isFilterActive():(ge(67),!1):!1,{colModel:t,gos:n}=this.beans,i=!!_S(n),s=h=>{if(!h.isPrimary())return!0;const p=!t.isPivotActive();return!h.isValueActive()||!p?!1:t.isPivotMode()?!0:i},o=[],a=[],c=(h,f,p)=>{f&&(s(h)?o.push(p):a.push(p))},u=[];return this.allColumnFilters.forEach(h=>{const f=h.column,p=f.getColId();if(h.isHandler)u.push(it.resolve().then(()=>{c(f,this.isHandlerActive(f),{colId:p,isHandler:!0,handler:h.handler,handlerParams:h.handlerParams})}));else{const m=wr(h);m&&u.push(m.then(w=>{c(f,e(w),{colId:p,isHandler:!1,comp:w})}))}}),it.all(u).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=a})}updateFilterFlagInColumns(e,t){const n=[];return this.allColumnFilters.forEach(i=>{const s=i.column;if(i.isHandler)n.push(it.resolve().then(()=>{this.setColFilterActive(s,this.isHandlerActive(s),e,t)}));else{const o=wr(i);o&&n.push(o.then(a=>{this.setColFilterActive(s,a.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),it.all(n)}doFiltersPass(e,t,n){const{data:i,aggData:s}=e,o=n?this.activeAggregateFilters:this.activeColumnFilters,a=n?s:i,c=this.model;for(let u=0;u<o.length;u++){const h=o[u],{colId:f,isHandler:p}=h;if(f!==t)if(p){const{handler:m,handlerParams:w}=h;if(!m.doesFilterPass({node:e,data:a,model:Fn(c,f),handlerParams:w}))return!1}else{const m=h.comp;if(typeof m.doesFilterPass!="function"){vt(91);continue}if(!m.doesFilterPass({node:e,data:a}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:n}=this.beans,i=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:n}=e,i=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(s=>{const{column:o,isHandler:a}=s;i!==o.getColId()&&(a&&s.handler.onAnyFilterChanged?.(),wr(s,a)?.then(c=>{typeof c?.onAnyFilterChanged=="function"&&c.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(n=>{const i=n.isHandler;i&&n.handler.onNewRowsLoaded?.();const s=wr(n,i);s&&t.push(s.then(o=>{o.onNewRowsLoaded?.()}))}),it.all(t).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:n,colModel:i}=this.beans;return(s,o)=>{const a=o?i.getCol(o):e;return a?n.getValue(a,s,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);const n=t?.filter;return n?n.isFilterActive():Fn(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=Ce(Fn(this.model,e.getColId()));if(t)return t;const n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?wr(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const n=wr(t);return n?n.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const n=this.getOrCreateFilterWrapper(e,t);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return h7(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":Y$(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,i,s,o){const a=()=>{const h=this.createFilterCompParams(e,s,o),f=i(h,s);return E8(this.beans.userCompFactory,t,f,n)},c=a();return c?{compDetails:c,createFilterUi:h=>(h?a():c).newAgStackInstance()}:null}createFilterInstance(e,t,n,i){const s=this.beans.selectableFilter;s?.isSelectable(t)&&(t=s.getFilterDef(e,t));const{handler:o,handlerParams:a,handlerGenerator:c}=this.createHandler(e,t,n)??{},u=this.createFilterComp(e,t,n,i,!!o,"init");if(!u)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:c,handlerParams:a};const{compDetails:h,createFilterUi:f}=u;return this.isGlobalButtons&&(h.params?.buttons?.length||ge(281,{colId:e.getColId()})),{compDetails:h,handler:o,handlerGenerator:c,handlerParams:a,createFilterUi:f}}createBaseFilterParams(e,t){const{filterManager:n,rowModel:i}=this.beans;return Pe(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:s=>n?.doesRowPassOtherFilters(e.getColId(),s)??!0,rowModel:i})}createFilterCompParams(e,t,n,i){const s=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,i);if(o.filterChangedCallback=s,o.filterModifiedCallback=i?()=>{}:a=>this.filterModified(e,a),t){const a=o,c=e.getColId(),u=Fn(this.model,c);a.model=u,a.state=this.state.get(c)??{model:u},a.onModelChange=(h,f)=>{this.updateStoredModel(c,h),this.refreshHandlerAndUi(e,h,"ui").then(()=>{s({...f,source:"columnFilter"})})},a.onStateChange=h=>{this.updateState(e,h),this.updateOrRefreshFilterUi(e)},a.onAction=(h,f,p)=>{this.updateModel(e,h,f),this.dispatchLocalEvent({type:"filterAction",column:e,action:h,event:p})},a.getHandler=()=>this.getHandler(e,!0),a.onUiChange=h=>this.filterUiChanged(e,h),a.source=n}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){const i=t(),s={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(n),s}createFilterWrapper(e){const{compDetails:t,handler:n,handlerGenerator:i,handlerParams:s,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),c=>c),a=e.getColId();if(n)return delete this.initialModel[a],n.init?.({...s,source:"init",model:Fn(this.model,a)}),{column:e,isHandler:!0,handler:n,handlerGenerator:i,handlerParams:s,filterUi:this.createFilterUiForHandler(t,o)};if(o){const c={column:e,filterUi:null,isHandler:!1};return c.filterUi=this.createFilterUiLegacy(t,o,u=>{c.filter=u??void 0}),c}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t){const{gos:n,frameworkOverrides:i,registry:s}=this.beans;let o;const a=p=>{const m=p.filter;if(cL(m)){const w=m.handler;return w||(o=m.doesFilterPass,o?()=>({doesFilterPass:o}):void 0)}return typeof m=="string"?m:void 0},c=n.get("enableFilterHandlers")?a(e):void 0,u=p=>()=>this.createBean(s.createDynamicBean(p,!0));let h,f;if(typeof c=="string"){const p=n.get("filterHandlers")?.[c];p!=null?h=p:L$.has(c)&&(h=u(c),f=c)}else h=c;if(!h){let p;const{compName:m,jsComp:w,fwComp:S}=hL(i,e);m?p=m:w==null&&S==null&&e.filter===!0&&(p=t),f=this.handlerMap[p],f&&(h=u(f))}if(h)return{filterHandler:h,handlerNameOrCallback:o??f}}createHandler(e,t,n){let i=this.createHandlerFunc(t,n);if(!i){const h=this.gos;if(!h.get("enableFilterHandlers"))return;gn(h)&&ge(277,{colId:e.getColId()}),i=kee}const s=ew(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:a}=i,{handler:c,handlerParams:u}=this.createHandlerFromFunc(e,a,s);return{handler:c,handlerParams:u,handlerGenerator:o??a}}createHandlerFromFunc(e,t,n){const i=e.getColDef(),s=t(Pe(this.gos,{column:e,colDef:i})),o=this.createHandlerParams(e,n);return{handler:s,handlerParams:o}}createHandlerParams(e,t){const n=e.getColDef(),i=e.getColId(),s=this.filterChangedCallbackFactory(e);return Pe(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>this.beans.filterManager?.doesRowPassOtherFilters(i,o)??!0,onModelChange:(o,a)=>{this.updateStoredModel(i,o),this.refreshHandlerAndUi(e,o,"handler").then(()=>{s({...a,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:n,groupFilter:i}=this.beans;this.allColumnFilters.forEach((o,a)=>{let c;o.column.isPrimary()?c=t.getColDefCol(a):c=t.getCol(a),!(c&&c===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(a))});const s=i&&e.every(o=>i.isGroupFilter(o));e.length>0&&!s&&n?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:n,frameworkOverrides:i,selectableFilter:s}=this.beans,o=m=>{const w=this.getOrCreateFilterUi(e);w?.then(S=>{m(Ih(S))})},a=e.getColDef(),c=s?.isSelectable(a)?s.getFilterDef(e,a):a,u=tq(i,c,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",h=this.gos.get("enableFilterHandlers"),f=ew(n,c,this.createFilterCompParams(e,h,"init",!0)),p=Pe(this.gos,{column:e,filterParams:f,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});if(h){const m=p,w=e.getColId(),S=this.filterChangedCallbackFactory(e);m.onUiChange=E=>this.floatingFilterUiChanged(e,E),m.model=Fn(this.model,w),m.onModelChange=(E,T)=>{this.updateStoredModel(w,E),this.refreshHandlerAndUi(e,E,"floating",!0).then(()=>{S({...T,source:"columnFilter"})})},m.getHandler=()=>this.getHandler(e,!0),m.source="init"}return F8(n,a,p,u)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,i){if(e.isHandler){const s=t.getColId();delete this.initialModel[s],this.state.delete(s);const o=e.filterUi,a=this.createFilterUiForHandler(n,i);e.filterUi=a,o?.created&&o.promise.then(c=>{this.destroyBean(c),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:"paramsUpdated",column:e.column})})}else this.destroyFilter(t,"paramsUpdated")}destroyFilter(e,t="api"){const n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],i&&this.disposeFilterWrapper(i,t).then(s=>{s&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1;const{column:i,isHandler:s,filterUi:o}=e,a=i.getColId();s&&(n=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[a],this.state.delete(a));const c=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(a),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(o){if(o.created)return o.promise.then(u=>(n=s?n:!!u?.isFilterActive(),this.destroyBean(u),c(),n));c()}return it.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){const n=this.allColumnFilters.get(e);if(!n)return;const i=this.beans,s=n.column,o=s.getColDef(),a=s.isFilterAllowed(),c=this.getDefaultFilter(s),u=i.selectableFilter,h=u?.isSelectable(o)?u.getFilterDef(s,o):o,f=a?this.createHandlerFunc(h,this.getDefaultFilter(s)):void 0,p=!!f,m=n.isHandler;if(m!=p){this.destroyFilter(s,"paramsUpdated");return}const{compDetails:w,createFilterUi:S}=(a?this.createFilterComp(s,h,c,T=>T,p,"colDef"):null)??{compDetails:null,createFilterUi:null},E=w?.params??ew(i.userCompFactory,h,this.createFilterCompParams(s,p,"colDef"));if(m){const T=f?.handlerNameOrCallback??f?.filterHandler,F=Fn(this.model,e);if(n.handlerGenerator!=T){const P=n.handler,{handler:M,handlerParams:U}=this.createHandlerFromFunc(s,f.filterHandler,E);n.handler=M,n.handlerParams=U,n.handlerGenerator=T,delete this.model[e],M.init?.({...U,source:"init",model:null}),this.destroyBean(P),F!=null&&this.beans.filterManager?.onFilterChanged({columns:[s],source:t})}else{const P=this.createHandlerParams(s,w?.params);n.handlerParams=P,n.handler.refresh?.({...P,source:"colDef",model:F})}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,w)||!n.filterUi||!w){this.destroyFilterUi(n,s,w,S);return}n.filterUi.filterParams=E,wr(n,m)?.then(T=>{(T?.refresh?T.refresh(E):!0)===!1?this.destroyFilterUi(n,s,w,S):this.dispatchLocalEvent({type:"filterParamsChanged",column:s,params:E})})}refreshHandlerAndUi(e,t,n,i){const s=this.cachedFilter(e);if(!s)return i&&this.getOrCreateFilterWrapper(e,!0),it.resolve();if(!s.isHandler)return it.resolve();const{filterUi:o,handler:a,handlerParams:c}=s;return O$(()=>{if(o){const{created:u,filterParams:h}=o;if(u)return o.promise.then(f=>f?{filter:f,filterParams:h}:void 0);o.refreshed=!0}return it.resolve(void 0)},a,c,t,this.state.get(e.getColId())??{model:t},n)}setColumnFilterWrapper(e,t){const n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const n=this.getOrCreateFilterUi(t);return n?new Promise(i=>{n.then(s=>{i(Ih(s))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:i,model:s}=this,o=e.getColId(),a=i.get(o);return a?a.model??null:Fn(s,o)}const n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{};const i=new Promise(s=>{n=s});return this.columnModelUpdates.push({key:e,model:t,resolve:n}),i}return new Promise(n=>{this.setModelForColumnLegacy(e,t).then(i=>n(i))})}getStateForColumn(e){return this.state.get(e)??{model:Fn(this.model,e)}}setModelForColumnLegacy(e,t){const n=this.beans.colModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n,!0):null;return i?this.setModelOnFilterWrapper(i,t):it.resolve()}setColDefPropsForDataType(e,t,n){const i=e.filter,s=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof s!="string")return;let o,a;const c=this.beans,{filterParams:u,filterValueGetter:h}=e;s==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:a}=c.multiFilter?.getParamsForDataType(u,h,t,n)??{}:{filterParams:o,filterValueGetter:a}=$$(s,u,h,t,n,c,this.getLocaleTextFunc()),e.filterParams=o,a&&(e.filterValueGetter=a)}setColFilterActive(e,t,n,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,i)}setModelOnFilterWrapper(e,t,n){return new it(i=>{if(e.isHandler){const o=e.column,a=o.getColId(),c=this.model[a];if(this.updateStoredModel(a,t),n&&t===c){i();return}this.refreshHandlerAndUi(o,t,"api").then(()=>i());return}const s=wr(e);if(s){s.then(o=>{if(typeof o?.setModel!="function"){ge(65),i();return}(o.setModel(t)||it.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){Ce(t)?this.model[e]=t:delete this.model[e];const n=this.state.get(e),i={model:t,state:n?.state};this.state.set(e,i)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(n=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:n,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,n){const i=e.getColId(),s=()=>this.cachedFilter(e)?.filterUi;UF(t,s,()=>Fn(this.model,i),()=>this.state.get(i),o=>this.updateState(e,o),o=>s()?.filterParams?.onModelChange(o,n))}updateAllModels(e,t){const n=[];this.allColumnFilters.forEach((i,s)=>{const o=this.beans.colModel.getColDefCol(s);o&&UF(e,()=>i.filterUi,()=>Fn(this.model,s),()=>this.state.get(s),a=>this.updateState(o,a),a=>{this.updateStoredModel(s,a),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),n.push(this.refreshHandlerAndUi(o,a,"ui"))})}),n.length&&it.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();LL(()=>this.cachedFilter(e)?.filterUi,()=>Fn(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:n}=this;for(const s of n)if(s.source==="COLUMN_MENU")return!1;let i=!1;for(const s of e.keys()){const o=e.get(s);if(o.valid===!1)return!1;(o.model??null)!==Fn(t,s)&&(i=!0)}return i}hasUnappliedModel(e){const{model:t,state:n}=this;return(n.get(e)?.model??null)!==Fn(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function Oee(e){return!!e.filterManager?.isAnyFilterPresent()}function Vee(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var Nee=class extends oe{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,n="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,n)}setFilterModel(e,t="api",n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){_S(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):it.resolve()).then(()=>{const s={source:t,type:"filterChanged",columns:i};n&&oi(s,n),this.eventSvc.dispatchEvent(s),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!_S(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){ge(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},Bee=class extends oe{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,i){e&&!e.isColumn||this.showPopup(e,s=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:s})},n,t.target,xi(this.gos),i)}showMenuAfterButtonClick(e,t,n,i){if(e&&!e.isColumn)return;let s=-1,o="left";const a=xi(this.gos);!a&&this.gos.get("enableRtl")&&(s=1,o="right");const c=a?void 0:4*s,u=a?void 0:4;this.showPopup(e,h=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:h,nudgeX:c,nudgeY:u,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},n,t,a,i)}showPopup(e,t,n,i,s,o){const a=e?this.createBean(new z$(e,"COLUMN_MENU")):void 0;if(this.activeMenu=a,!a?.hasFilter()||!e){vt(57);return}const c=an({tag:"div",cls:`ag-menu${s?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(c,{keydown:E=>this.trapFocusWithin(E,c)}),c.appendChild(a?.getGui());let u;const h=()=>a?.afterGuiDetached(),f=f7(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,p=E=>{XF(e,!1,"contextMenu");const T=E instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),T&&i&&Ks(i)&&xL(i)?.focus({preventScroll:!0}),h(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),o?.()},m=this.getLocaleTextFunc(),w=s&&n!=="columnFilter"?m("ariaLabelColumnMenu","Column Menu"):m("ariaLabelColumnFilter","Column Filter"),S=this.popupSvc?.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:p,positionCallback:()=>t(c),anchorToElement:f,ariaLabel:w});S&&(this.hidePopup=u=S.hideFunc),a.afterInit().then(()=>{t(c),a.afterGuiAttached({container:n,hidePopup:u})}),XF(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==Z.TAB||e.defaultPrevented||Rl(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),fl(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Gee=class extends oe{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,n){if(!t)return;const i=e.getColDef(),{selectableFilter:s,valueSvc:o}=this.beans,a=n??s?.getFilterValueGetter(e.getColId())??i.filterValueGetter;return a?this.executeFilterValueGetter(a,t.data,e,t,i):o.getValue(e,t)}executeFilterValueGetter(e,t,n,i,s){const{expressionSvc:o,valueSvc:a}=this.beans,c=Pe(this.gos,{data:t,node:i,column:n,colDef:s,getValue:a.getValueCallback.bind(a,i)});return typeof e=="function"?e(c):o?.evaluate(e,c)}},Hee={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},zee=class extends At{constructor(){super(Hee,[eC]),this.eFloatingFilterText=De}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const n=e,i=n.getHandler();if(i.getModelAsString){const s=i.getModelAsString(n.model);this.eFloatingFilterText.setValue(s)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},dE=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t=="string")return;const n=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(o=>t[o]!=null)?!0:(ge(72,{keys:s}),!1);if(!n.every(i)){this.filterOptions=e.filter(s=>s===t)||[];return}this.customFilterOptions[t.displayKey]=t})}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const n=t[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;ge(73)}else ge(74)}getCustomOption(e){return this.customFilterOptions[e]}};function ch(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function pm(e){return e==null||typeof e=="string"&&e.trim().length===0}function Uee(e){return e==="AND"||e==="OR"?e:"AND"}function Wee(e,t,n){if(e==null)return;const{predicate:i}=e;if(i!=null&&!t.some(s=>s==null))return i(t,n)}function jee(e,t){let n=e.length;return n>t&&(e.splice(t),ge(78),n=t),n}function Nh(e,t){const n=t.getCustomOption(e);if(n){const{numberOfInputs:s}=n;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var hE=class extends J${constructor(e,t,n){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new dE;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=Uee(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{const i=n===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let o;if(n){const a=e,c=t;o=this.areSimpleModelsEqual(a,c)}else{const a=e,c=t;o=a.operator===c.operator&&bl(a.conditions,c.conditions,(u,h)=>this.areSimpleModelsEqual(u,h))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),it.resolve();if(e.operator){const i=e;let s=i.conditions;s==null&&(s=[],ge(77));const o=jee(s,this.maxNumConditions),a=this.getNumConditions();if(o<a)this.removeConditionsAndOperators(o);else if(o>a)for(let u=a;u<o;u++)this.createJoinOperatorPanel(),this.createOption();const c=i.operator==="OR";this.eJoinAnds.forEach(u=>u.setValue(!c,!0)),this.eJoinOrs.forEach(u=>u.setValue(c,!0)),s.forEach((u,h)=>{this.eTypes[h].setValue(u.type,!0),this.setConditionIntoUi(u,h)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),it.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(ge(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(ge(80),n=1),n>t&&(ge(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){const e=this.getGui(),t=this.createManagedBean(new rE);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){const e=an({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),n=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const i=this.eJoinPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){const i=this.createManagedBean(new yK);e.push(i);const s="ag-filter-condition-operator";return i.addCss(s),i.addCss(`${s}-${n}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach(n=>{e.addOption(n)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);const i=e+1,s=n-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,s)=>{const o=this.isConditionDisabled(s,e);i.setDisabled(o||this.filterListOptions.length<=1),s===1&&(Ah(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((i,s)=>{Ut(i,this.isConditionBodyVisible(s))});const n=(t??this.getJoinOperator())==="OR";this.eJoinAnds.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOrs.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,s,o,a)=>{this.setElementDisplayed(i,s<a),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:n,eConditionBodies:i,eJoinPanels:s,eJoinAnds:o,eJoinOrs:a}=this;this.removeComponents(n,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);const c=Math.max(e-1,0);this.removeElements(s,c,t),this.removeComponents(o,c,t),this.removeComponents(a,c,t)}removeElements(e,t,n){ch(e,t,n).forEach(s=>Ho(s))}removeComponents(e,t,n){ch(e,t,n).forEach(s=>{Ho(s.getGui()),this.destroyBean(s)})}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){const n=this.getInputs(0)[0];n instanceof ja&&this.isConditionBodyVisible(0)?t=n.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,n=-1,i=!1;const s=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,n=a);else{const c=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),u=a<t;(c||u)&&(this.removeConditionsAndOperators(a,1),i=!0,u&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}getPlaceholderText(e,t){let n=this.translate(e);if(typeof this.filterPlaceholder=="function"){const i=this.eTypes[t].getValue(),s=this.translate(i);n=this.filterPlaceholder({filterOptionKey:i,filterOption:s,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,n,i,s)=>{if(!(t instanceof ja))return;const o=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",a=n===0&&s>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,i)),t.setInputAriaLabel(a)})}setElementValue(e,t,n){e instanceof ja&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof At&&Ut(e.getGui(),t)}setElementDisabled(e,t){e instanceof At&&Ah(e.getGui(),t)}attachElementOnChange(e,t){e instanceof ja&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){const n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){const i=Nh(t,this.optionsFactory),s=this.getInputs(e);for(let o=0;o<s.length;o++){const a=s[o];a!=null&&n(a,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return Nh(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),t)}updateJoinOperatorsDisabled(){const e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,s,o)=>{o===t&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},kO=class{constructor(e,t,n,i,s,o){this.alive=!0,this.context=e,this.eParent=s;const a=T8(t,n,i);a&&a.newAgStackInstance().then(c=>{if(!this.alive){e.destroyBean(c);return}if(this.dateComp=c,!c)return;s.appendChild(c.getGui()),c?.afterGuiAttached?.();const{tempValue:u,disabled:h}=this;u&&c.setDate(u),h!=null&&c.setDisabled?.(h),o?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){Ut(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},fE=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function LO(e,t){const{dateFrom:n,dateTo:i,type:s}=e||{};return[n&&pi(n)||null,i&&pi(i)||null].slice(0,Nh(s,t))}var AP=1e3,FP=1/0,$ee=class extends hE{constructor(){super("dateFilter",LO,fE),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=AP,this.maxValidYear=FP,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(u,h)=>{const f=e[u];if(f!=null)if(isNaN(f))ge(82,{param:u});else return f==null?h:Number(f);return h},n=t("minValidYear",AP),i=t("maxValidYear",FP);this.minValidYear=n,this.maxValidYear=i,n>i&&ge(83);const{minValidDate:s,maxValidDate:o}=e,a=s instanceof Date?s:pi(s);this.minValidDate=a;const c=o instanceof Date?o:pi(o);this.maxValidDate=c,a&&c&&a>c&&ge(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:n,gos:i},params:s}=this,o=new kO(n,t,s.colDef,Pe(i,{onDateChanged:()=>this.onUiChanged(),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>o.destroy()),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=an({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,i){const s=an({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(s),e.appendChild(s),n.push(this.createDateCompWrapper(s))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),ch(this.eConditionPanelsFrom,e,t),ch(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){ch(e,t,n).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:n,minValidYear:i,maxValidYear:s}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>s)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,s,o)=>{s!==e||!t||i>=o||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=Di(i[0])),i.length>1&&(n.dateTo=Di(i[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...n}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,s,o)=>{i<o&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},OO=class extends oe{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,n=new dE;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:n}=t,i=[];if(n){const a=t;i.push(...a.conditions??[])}else i.push(t);const s=n&&n==="OR"?"some":"every",o=this.params.getValue(e.node);return i[s](a=>this.individualConditionPasses(e,a,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:n,maxNumConditions:i}}=e;if(t==null)return;let o=eq(t)?t.conditions:[t];const a=n?.map(f=>typeof f=="string"?f:f.displayKey)??this.defaultOptions;if(!(!o||o.every(f=>a.find(p=>p===f.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let u=!1;const h=this.filterType;if((o&&!o.every(f=>f.filterType===h)||t.filterType!==h)&&(o=o.map(f=>({...f,filterType:h})),u=!0),typeof i=="number"&&o&&o.length>i&&(o=o.slice(0,i),u=!0),u){const f=o.length>1?{...t,filterType:h,conditions:o}:{...o[0],filterType:h};this.params={...e,model:f},e.onModelChange(f);return}}individualConditionPasses(e,t,n){const i=this.optionsFactory,s=this.mapValuesFromModel(t,i),o=i.getCustomOption(t.type),a=Wee(o,s,n);return a??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,n,t,e))}},VO=class extends OO{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:s,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(s)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){const i=n.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";const s=this.comparator(),o=e[0]!=null?s(e[0],t):0;switch(i){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const a=s(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&a<=0:o>0&&a<0}case"blank":return pm(t);case"notBlank":return!pm(t);default:return ge(76,{filterModelType:i}),!0}}},NO={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},qee={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},gE=class extends oe{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){const n=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?Ar(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,c=(o.conditions??[]).map(h=>this.getModelAsString(h,t)),u=o.operator==="AND"?"andCondition":"orCondition";return c.join(` ${Ar(this,u)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?Ar(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(e.type,e.type);{const o=e,a=this.optionsFactory.getCustomOption(o.type),{displayKey:c,displayName:u,numberOfInputs:h}=a||{};return c&&u&&h===0?n(c,u):this.conditionToString(o,i,o.type==="inRange"||h===2,c,u)}}}updateParams(e){const{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,i,s,o){let a;const c=this.getTypeKey(e);return c&&(a=Ar(this,c)),s&&o&&(a=this.getLocaleTextFunc()(s,o)),a!=null?t?`${a} ${Ar(this,"filterSummaryInRangeValues",[n(),i()])}`:`${a} ${n()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},BO=class extends gE{constructor(e,t){super(e,t,n=>{const{dataTypeSvc:i,valueSvc:s}=this.beans,o=t.column,c=i?.getDateFormatterFunction(o)?.(n??void 0);return s.formatValue(o,null,c)}),this.filterTypeKeys=NO}conditionToString(e,t,n,i,s){const{type:o}=e,a=pi(e.dateFrom),c=pi(e.dateTo),u=this.filterParams.inRangeFloatingFilterDateFormat,h=t?this.formatValue.bind(this):m=>HS(m,u),f=()=>a!==null?h(a):"null",p=()=>c!==null?h(c):"null";if(t){const m=this.conditionForToolPanel(o,n,f,p,i,s);if(m!=null)return m}return n?`${f()}-${p()}`:a!=null?h(a):`${o}`}};function Kee(e,t){const n=t;return n<e?-1:n>e?1:0}var Yee=class extends VO{constructor(){super(LO,fE),this.filterType="date",this.FilterModelFormatterClass=BO}comparator(){return this.params.filterParams.comparator??Kee}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},GO=class extends At{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const n=e;return this.isTypeEditable(n.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const n=e;this.onModelUpdated(n.model)}}setParams(e){const t=new dE;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(n);this.setEditable(i)}refresh(e){this.params=e;const t=e,n=this.reactive;if((!n||t.source==="colDef")&&this.updateParams(e),n){const{source:i,model:s}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(s)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){const t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Qee={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},Xee=class extends GO{constructor(){super(Qee,[eC]),this.eReadOnlyText=De,this.eDateWrapper=De,this.FilterModelFormatterClass=BO,this.filterType="date",this.defaultOptions=fE}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const n=e?pi(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Ut(this.eDateWrapper,e),Ut(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const n=t.model,i=Di(e),s=i==null?null:{...n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:i};t.onModelChange(s,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=qR(e,this.defaultDebounceMs);return Pe(this.gos,{onDateChanged:Hn(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:i}=this;this.dateComp=new kO(e,t,i.column.getColDef(),this.getDateComponentParams(),n,s=>{s.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},Zee={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},Jee=class extends At{constructor(){super(Zee,[eC]),this.eDateInput=De,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&vl();const{minValidYear:i,maxValidYear:s,minValidDate:o,maxValidDate:a,buttons:c,includeTime:u,colDef:h}=e.filterParams||{},f=this.beans.dataTypeSvc,p=u??f?.getDateIncludesTimeFlag?.(h.cellDataType)??!1;if(n?p?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&i&&ge(85),a&&s&&ge(86),o&&a){const[m,w]=[o,a].map(S=>S instanceof Date?S:pi(S));m&&w&&m.getTime()>w.getTime()&&ge(87)}o?o instanceof Date?t.min=HS(o):t.min=o:i&&(t.min=`${i}-01-01`),a?a instanceof Date?t.max=HS(a):t.max=a:s&&(t.max=`${s}-12-31`),this.isApply=e.location==="floatingFilter"&&!!c?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return pi(this.eDateInput.getValue())}setDate(e){const t=this.params.filterParams.colDef.cellDataType,n=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(Di(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},pE=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function eb(e){const{allowedCharPattern:t}=e??{};return t??null}function tb(e){return e==null||isNaN(e)?null:e}function HO(e,t){const{filter:n,filterTo:i,type:s}=e||{};return[tb(n),tb(i)].slice(0,Nh(s,t))}var ete=class extends hE{constructor(){super("numberFilter",HO,pE),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,n){const{numberFormatter:i}=this.params,s=!n&&i?i(t??null):t;super.setElementValue(e,s)}createEValue(){const e=eb(this.params),t=an({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){const s=this.createManagedBean(i?new El({allowedCharPattern:i}):new oE);s.addCss(`ag-filter-${n}`),s.addCss("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeEValues(e,t){const n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(n,i,s,o)=>{i<o&&t.push(tb(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=Po(e);t!=null&&t.trim()===""&&(t=null);const n=this.params.numberParser;return n?n(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},zO=class extends gE{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=NO}conditionToString(e,t,n,i,s){const{filter:o,filterTo:a,type:c}=e,u=this.formatValue.bind(this);if(t){const h=this.conditionForToolPanel(c,n,()=>u(o),()=>u(a),i,s);if(h!=null)return h}return n?`${u(o)}-${u(a)}`:o!=null?u(o):`${c}`}},tte=class extends VO{constructor(){super(HO,pE),this.filterType="number",this.FilterModelFormatterClass=zO}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},UO=class extends oe{constructor(e){super(),this.params=e,this.eInput=De,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new El(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const n=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:n}=this;n.setInputAriaLabel(e),t!==void 0&&n.setAutoComplete(t)}};function WO(e){const t=e?.trim();return t===""?e:t}function jO(e,t){const{filter:n,filterTo:i,type:s}=e||{};return[n||null,i||null].slice(0,Nh(s,t))}var nte={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},$O=class extends GO{constructor(){super(...arguments),this.eFloatingFilterInputContainer=De,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(nte)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:i,readOnly:s}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Zm(e.filterParams),!s){const o=qR(e.filterParams,i),a=Hn(this,this.syncUpWithParentFilter.bind(this),o);n.setValueChangedListener(a)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,n=t.getValue();Ai(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){const t=e.key===Z.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:i,params:s,lastType:o}=this;let a=i.getValue();if(s.filterParams.trimInput&&(a=WO(a),i.setValue(a,!0)),n){const c=s,u=c.model,h=this.convertValue(a),f=h==null?null:{...u??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:h};c.onModelChange(f,{afterFloatingFilter:!0})}else s.parentFilterInstance(c=>{c?.onFloatingFilterChanged(o||null,a||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},ite=class extends oe{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new oE),this.eTextInput=this.createManagedBean(new El),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},ste=class extends $O{constructor(){super(...arguments),this.FilterModelFormatterClass=zO,this.filterType="number",this.defaultOptions=pE}updateParams(e){eb(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=eb(e.filterParams),this.allowedCharPattern?this.createManagedBean(new UO({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new ite)}convertValue(e){return e?Number(e):null}},mE=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],ote=class extends hE{constructor(){super("textFilter",jO,mE),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const n=[];return this.forEachPositionInput(e,(i,s,o,a)=>{if(s<a){let c=Po(i.getValue());t&&this.params.trimInput&&(c=WO(c)??null,i.setValue(c,!0)),n.push(c)}}),n}createEValue(){const e=an({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,n,"to"),e}createFromToElement(e,t,n){const i=this.createManagedBean(new El);i.addCss(`ag-filter-${n}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){const n=o=>this.removeComponents(o,e,t),{eValuesFrom:i,eValuesTo:s}=this;n(i),n(s)}},qO=class extends gE{constructor(){super(...arguments),this.filterTypeKeys=qee}conditionToString(e,t,n,i,s){const{filter:o,filterTo:a,type:c}=e;if(t){const u=f=>()=>Ar(this,"filterSummaryTextQuote",[f]),h=this.conditionForToolPanel(c,n,u(o),u(a),i,s);if(h!=null)return h}return n?`${o}-${a}`:o!=null?`${o}`:`${c}`}},rte=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{const i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},ate=e=>e,lte=e=>e==null?null:e.toString().toLowerCase(),cte=class extends OO{constructor(){super(jO,mE),this.filterType="text",this.FilterModelFormatterClass=qO}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??rte,this.formatter=t.textFormatter??(t.caseSensitive?ate:lte)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){const s=e.map(m=>this.formatter(m))||[],o=this.formatter(t),{api:a,colDef:c,column:u,context:h,filterParams:{textFormatter:f}}=this.params;if(n.type==="blank")return pm(t);if(n.type==="notBlank")return!pm(t);const p={api:a,colDef:c,column:u,context:h,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:f};return s.some(m=>this.matcher({...p,filterText:m}))}},ute=class extends $O{constructor(){super(...arguments),this.FilterModelFormatterClass=qO,this.filterType="text",this.defaultOptions=mE}createFloatingFilterInputService(){return this.createManagedBean(new UO)}};function dte(e){return!!e.quickFilter?.isFilterPresent()}function hte(e){return e.quickFilter?.getText()}function fte(e){e.quickFilter?.resetCache()}var gte=class extends oe{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){const{autoColSvc:e,colModel:t,gos:n,pivotResultCols:i}=this.beans,s=t.isPivotMode(),o=e?.getColumns(),a=t.getColDefCols();let c=(s&&!n.get("applyQuickFilterBeforePivotOrAgg")?i?.getPivotResultCols()?.list:a)??[];o&&(c=c.concat(o)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?c:c.filter(u=>u.isVisible()||u.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Ce(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){ge(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{const i=this.getTextForColumn(n,e);return Ce(i)&&i.indexOf(t)>=0})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);const{quickFilterParts:i,matcher:s}=this;return s(i,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t);const i=e.getColDef();if(i.getQuickFilterText){const s=Pe(this.gos,{value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(s)}return Ce(n)?n.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach(n=>{const i=this.getTextForColumn(n,e);Ce(i)&&t.push(i)}),t.join(`
`)}},pte={moduleName:"ClientSideRowModelFilter",version:ye,rowModels:["clientSide"],beans:[pee]},CE={moduleName:"FilterCore",version:ye,beans:[Nee],apiFunctions:{isAnyFilterPresent:Oee,onFilterChanged:Vee},css:[bee],dependsOn:[pte]},KO={moduleName:"FilterValue",version:ye,beans:[Gee]},sC={moduleName:"ColumnFilter",version:ye,beans:[Lee,Bee],dynamicBeans:{headerFilterCellCtrl:mee},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:Ree,getColumnFilterInstance:Eee,destroyFilter:Tee,setFilterModel:xee,getFilterModel:Dee,getColumnFilterModel:Aee,setColumnFilterModel:Fee,showColumnFilter:Pee,hideColumnFilter:Mee,getColumnFilterHandler:Iee,doFilterAction:_ee},dependsOn:[CE,iC,KO,yee]},mte={moduleName:"CustomFilter",version:ye,userComponents:{agReadOnlyFloatingFilter:zee},dependsOn:[sC]},Cte={moduleName:"TextFilter",version:ye,dependsOn:[sC],userComponents:{agTextColumnFilter:{classImp:ote,params:{useForm:!0}},agTextColumnFloatingFilter:ute},dynamicBeans:{agTextColumnFilterHandler:cte}},vte={moduleName:"NumberFilter",version:ye,dependsOn:[sC],userComponents:{agNumberColumnFilter:{classImp:ete,params:{useForm:!0}},agNumberColumnFloatingFilter:ste},dynamicBeans:{agNumberColumnFilterHandler:tte}},yte={moduleName:"DateFilter",version:ye,dependsOn:[sC],userComponents:{agDateColumnFilter:{classImp:$ee,params:{useForm:!0}},agDateInput:Jee,agDateColumnFloatingFilter:Xee},dynamicBeans:{agDateColumnFilterHandler:Yee}},wte={moduleName:"QuickFilterCore",version:ye,rowModels:["clientSide"],beans:[gte],dependsOn:[CE,KO]},Ste={moduleName:"QuickFilter",version:ye,apiFunctions:{isQuickFilterPresent:dte,getQuickFilter:hte,resetQuickFilter:fte},dependsOn:[wte]},bte={moduleName:"ExternalFilter",version:ye,dependsOn:[CE]},Rte=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",yw=(e,t,n)=>{const{editModelSvc:i}=e,s=i?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,o=i?.getRowValidationModel().getRowValidation(t)?.errorMessages,a=s||o;return a&&a.length?a.join(n("tooltipValidationErrorSeparator",". ")):void 0},Ete=class extends oe{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,i){e&&t.destroyBean(e);const s=vw(this.gos),{column:o,eGui:a}=t,c=o.getColDef();!i&&s&&!c.headerComponent&&(i=cp(()=>a.querySelector(".ag-header-cell-text")));const u={getColumn:()=>o,getColDef:()=>o.getColDef(),getGui:()=>a,getLocation:()=>"header",getTooltipValue:()=>n??o.getColDef().headerTooltip,shouldDisplayTooltip:i};let h=this.createTooltipFeature(u);return h&&(h=t.createBean(h),t.setRefreshFunction("tooltip",()=>h.refreshTooltip())),h}setupHeaderGroupTooltip(e,t,n,i){e&&t.destroyBean(e);const s=vw(this.gos),{column:o,eGui:a}=t,c=o.getColGroupDef();!i&&s&&!c?.headerGroupComponent&&(i=cp(()=>a.querySelector(".ag-header-group-text")));const u={getColumn:()=>o,getGui:()=>a,getLocation:()=>"headerGroup",getTooltipValue:()=>n??(c&&c.headerTooltip),shouldDisplayTooltip:i};c&&(u.getColDef=()=>c);const h=this.createTooltipFeature(u);return h&&t.createBean(h)}enableCellTooltipFeature(e,t,n){const{beans:i}=this,{gos:s,editSvc:o}=i,{column:a,rowNode:c}=e;let u="cell";const h=()=>{const w=!!!o?.isEditing(e)&&yw(i,e,this.getLocaleTextFunc());if(w)return u="cellEditor",w;u="cell";const S=a.getColDef(),E=c.data;if(S.tooltipField&&Ce(E))return ih(E,S.tooltipField,a.isTooltipFieldContainsDots());const T=S.tooltipValueGetter;return T?T(Pe(s,{location:"cell",colDef:a.getColDef(),column:a,rowIndex:e.cellPosition.rowIndex,node:c,data:c.data,value:e.value,valueFormatted:e.valueFormatted})):null},f=vw(s);n||(f&&!e.isCellRenderer()?n=()=>{const m=!!o?.isEditing(e);if(!m&&yw(i,e,this.getLocaleTextFunc()))return!0;if(!a.isTooltipEnabled())return!1;const E=cp(()=>{const T=e.eGui;return T.children.length===0?T:T.querySelector(".ag-cell-value")});return!m&&E()}:n=()=>!o?.isEditing(e));const p={getColumn:()=>a,getColDef:()=>a.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>c,getGui:()=>e.eGui,getLocation:()=>u,getTooltipValue:t!=null?()=>t:h,getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:n};return this.createTooltipFeature(p,i)}setupFullWidthRowTooltip(e,t,n,i){const s={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},o=this.beans,a=o.context;e&&t.destroyBean(e,a);const c=this.createTooltipFeature(s,o);if(c)return t.createBean(c,a)}setupCellEditorTooltip(e,t){const{beans:n}=this,{context:i}=n,s=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!s)return;const o={getGui:()=>s,getTooltipValue:()=>yw(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{const{editModelSvc:c}=n,u=c?.getRowValidationModel()?.getRowValidationMap(),h=c?.getCellValidationModel()?.getCellValidationMap(),f=!!u&&u.size>0,p=!!h&&h.size>0;return f||p}},a=this.createTooltipFeature(o,n);if(a)return e.createBean(a,i)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Ce(t.tooltipField)||Ce(t.tooltipValueGetter)||Ce(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},YO={moduleName:"Tooltip",version:ye,beans:[Ete],dynamicBeans:{tooltipFeature:ZJ},userComponents:{agTooltipComponent:KJ},dependsOn:[iC],css:[Rte]},Ac=class{constructor(e){this.cellValueChanges=e}},ww=class extends Ac{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},Tte=10,PP=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Tte,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},xte=class extends oe{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&vL(this.activeCellEdit,t),i=this.activeRowEdit!==null&&$8(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:a,column:c,oldValue:u,value:h}=e,f={rowPinned:o,rowIndex:a,columnId:c.getColId(),newValue:h,oldValue:u};this.cellValueChanges.push(f)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new PP(n),this.redoStack=new PP(n),this.addListeners();const i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:s=>{s.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,s=>{this.gridBodyCtrl=s.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});const s=this.undoRedo(n,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:s})}redo(e){const{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});const s=this.undoRedo(i,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:s})}undoRedo(e,t,n,i,s){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,a=>a[i],s),o instanceof ww?this.processRange(o.ranges||[o[n]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{const{rowIndex:s,rowPinned:o,columnId:a}=i,c={rowIndex:s,rowPinned:o},u=zo(this.beans,c);u.displayed&&u.setDataValue(a,t(i),n)})}processRange(e){let t;const n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((i,s)=>{if(!i)return;const o=i.startRow,a=i.endRow;s===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const c={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnStart:i.startColumn,columns:i.columns};n.addCellRange(c)})}processCell(e){const t=e[0],{rowIndex:n,rowPinned:i}=t,s={rowIndex:n,rowPinned:i},o=zo(this.beans,s),a={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a)}setLastFocusedCell(e){const{rowIndex:t,columnId:n,rowPinned:i}=e,{colModel:s,focusSvc:o,rangeSvc:a}=this.beans,c=s.getCol(n);if(!c)return;const{scrollFeature:u}=this.gridBodyCtrl;u.ensureIndexVisible(t),u.ensureColumnVisible(c);const h={rowIndex:t,column:c,rowPinned:i};o.setFocusedCell({...h,forceBrowserFocus:!0}),a?.setRangeToCell(h)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Ac(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const n=new Ac(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Ac(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new ww(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:n}=this.beans;t&&jr(n)?e=new ww(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Ac(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this[e]=!0}stopBigChange(e,t){if(!this[e]||(this[e]=!1,t?.length===0))return;const n=new Ac(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},Dte=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}",Ate={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},Fte=class extends Jm{constructor(){super(Ate,[sE]),this.eEditor=De}initialiseEditor(e){const t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),n=Ym(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},oC=class extends Jm{constructor(e){super(),this.cellEditorInput=e,this.eEditor=De}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:n}=this,{cellStartedEdit:i,eventKey:s,suppressPreventDefault:o}=e;n.getInputElement().setAttribute("title",""),t.init(n,e);let a,c=!0;i?(this.focusAfterAttached=!0,s===Z.BACKSPACE||s===Z.DELETE?a="":s&&s.length===1?o?c=!1:a=s:(a=t.getStartValue(),s!==Z.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=t.getStartValue()),c&&a!=null&&n.setStartValue(a),this.addGuiEventListener("keydown",u=>{const{key:h}=u;(h===Z.PAGE_UP||h===Z.PAGE_DOWN)&&u.preventDefault()})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;vl()||t.getFocusableElement().focus();const n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},Pte={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Mte=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Pte}getAgComponents(){return[QL]}init(e,t){this.eEditor=e,this.params=t;const{min:n,max:i,step:s,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:n}=this,{min:i,max:s,getValidationErrors:o}=n;let a=[];const c=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){const u=i instanceof Date?i:new Date(i);if(t<u){const h=u.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${h}`,[h]))}}if(s){const u=s instanceof Date?s:new Date(s);if(t>u){const h=u.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${h}`,[h]))}}}return a.length||(a=null),o?o({value:t,cellEditorParams:n,internalErrors:a}):a}getValue(){const{eEditor:e,params:t}=this,n=e.getDate();return!Ce(n)&&!Ce(t.value)?t.value:n??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Di(e,this.includeTime??!1)}},Ite=class extends oC{constructor(){super(new Mte(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},_te={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},kte=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return _te}getAgComponents(){return[QL]}init(e,t){this.eEditor=e,this.params=t;const{min:n,max:i,step:s,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,n=e.getInputElement().value,i=this.formatDate(this.parseDate(n??void 0)),{min:s,max:o,getValidationErrors:a}=t;let c=[];if(i){const u=new Date(i),h=this.getLocaleTextFunc();if(s){const f=new Date(s);if(u<f){const p=f.toLocaleDateString();c.push(h("minDateValidation",`Date must be after ${p}`,[p]))}}if(o){const f=new Date(o);if(u>f){const p=f.toLocaleDateString();c.push(h("maxDateValidation",`Date must be before ${p}`,[p]))}}}return c.length||(c=null),a?a({value:this.getValue(),cellEditorParams:t,internalErrors:c}):c}getValue(){const{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!Ce(n)&&!Ce(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return Di(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):pi(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Di(e??null,this.includeTime??!1)??void 0}},Lte=class extends oC{constructor(){super(new kte(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Ote={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},Vte=class extends Jm{constructor(){super(Ote,[SK]),this.eEditor=De}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:n,eventKey:i,value:s,maxLength:o,cols:a,rows:c}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute("title",""),t.setMaxLength(o||200).setCols(a||60).setRows(c||10);let u;n?(this.focusAfterAttached=!0,i===Z.BACKSPACE||i===Z.DELETE?u="":i&&i.length===1?u=i:(u=s.toString(),i!==Z.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,u=s.toString()),u!=null&&t.setValue(u,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===Z.LEFT||t===Z.UP||t===Z.RIGHT||t===Z.DOWN||e.shiftKey&&t===Z.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:n}=t,i=e.getValue();return!Ce(i)&&!Ce(n)?n:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getLocaleTextFunc(),s=this.getValue();let o=[];return typeof s=="string"&&t!=null&&s.length>t&&o.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:s,internalErrors:o,cellEditorParams:e}):o}},Nte={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},Bte=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Nte}getAgComponents(){return[bK]}init(e,t){this.eEditor=e,this.params=t;const{max:n,min:i,precision:s,step:o}=t;n!=null&&e.setMax(n),i!=null&&e.setMin(i),s!=null&&e.setPrecision(s),o!=null&&e.setStep(o);const a=e.getInputElement();t.preventStepping?e.addManagedElementListeners(a,{keydown:this.preventStepping}):t.showStepperButtons&&a.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:n,getValidationErrors:i}=e,o=this.eEditor.getInputElement().valueAsNumber,a=this.getLocaleTextFunc();let c=[];return typeof o=="number"&&(t!=null&&o<t&&c.push(a("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&o>n&&c.push(a("maxValueValidation",`Must be less than or equal to ${n}.`,[String(n)]))),c.length||(c=null),i?i({value:o,cellEditorParams:e,internalErrors:c}):c}preventStepping(e){(e.key===Z.UP||e.key===Z.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();if(!Ce(n)&&!Ce(t.value))return t.value;let i=t.parseValue(n);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){vl()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},Gte=class extends oC{constructor(){super(new Bte(()=>this.getLocaleTextFunc()))}},Hte={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},zte=class extends Jm{constructor(){super(Hte,[FK]),this.eEditor=De,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:n,gos:i}=this,{values:s,value:o,eventKey:a}=e;if(Vt(s)){ge(58);return}this.startedByEnter=a!=null?a===Z.ENTER:!1;let c=!1;s.forEach(p=>{const m={value:p},w=n.formatValue(e.column,null,p),S=w!=null;m.text=S?w:p,t.addOption(m),c=c||o===p}),c?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:h,valueListMaxHeight:f}=e;u!=null&&t.setPickerGap(u),f!=null&&t.setPickerMaxHeight(f),h!=null&&t.setPickerMaxWidth(h),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:n}=e,i=this.getValue();let s=[];if(t&&!t.includes(i)){const o=this.getLocaleTextFunc();s.push(o("invalidSelectionValidation","Invalid selection."))}else s=null;return n?n({value:i,internalErrors:s,cellEditorParams:e}):s}},Ute={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},Wte=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Ute}getAgComponents(){return[eC]}init(e,t){this.eEditor=e,this.params=t;const n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getValue(),s=this.getLocaleTextFunc();let o=[];return t!=null&&typeof i=="string"&&i.length>t&&o.push(s("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:i,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();return!Ce(n)&&!Ce(t.value)?t.value:t.parseValue(n)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eEditor,t=e.getValue(),n=Ce(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},MP=class extends oC{constructor(){super(new Wte(()=>this.getLocaleTextFunc()))}};function jte(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function $te(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function QO(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function XO(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function qte(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Kte(e){e.undoRedo?.undo("api")}function Yte(e){e.undoRedo?.redo("api")}function Qte(e){const t=e.editModelSvc?.getEditMap(),n=[];return t?.forEach((i,s)=>{const{rowIndex:o,rowPinned:a}=s;i.forEach((c,u)=>{const{editorValue:h,pendingValue:f,sourceValue:p,state:m}=c,w=Lr(c);let S=h??f;S===es&&(S=void 0);const E={newValue:S,oldValue:p,state:m,column:u,colId:u.getColId(),colKey:u.getColId(),rowIndex:o,rowPinned:a};(m==="editing"||m==="changed"&&w)&&n.push(E)})}),n}function Xte(e,t=!1){const{editSvc:n}=e;n?.isBatchEditing()?(t?e.editModelSvc?.getEditPositions().forEach(i=>{i.state==="editing"&&n.revertSingleCellEdit(i)}):Wa(e,!0),Wc(e)):n?.stopEditing(void 0,{cancel:t,source:"api"})}function Zte(e,t){const n=Lt(e,t);return e.editSvc?.isEditing(n)??!1}function Jte(e,t){const{key:n,colKey:i,rowIndex:s,rowPinned:o}=t,{editSvc:a,colModel:c}=e,u=c.getCol(i);if(!u){ge(12,{colKey:i});return}const f=zo(e,{rowIndex:s,rowPinned:o||null});if(!f){ge(290,{rowIndex:s,rowPinned:o});return}if(!u.isCellEditable(f))return;o==null&&XO(e,s),QO(e,i),a?.startEditing({rowNode:f,column:u},{event:n?new KeyboardEvent("keydown",{key:n}):void 0,source:"api"})}function ene(e){return e.editSvc?.validateEdit()||null}function tne(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function nne(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var ine={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},sne=class extends nE{constructor(e){super(ine),this.params=e}postConstruct(){ul(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,n=i=>{WS(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},mm=(e,t=!1)=>{if(e!==void 0)return Lr(e)||t&&e.state==="editing"};function ZO(e,t,n=!1){return mm(e.editModelSvc?.getEdit(t),n)}function JO(e,t){const{editModelSvc:n}=e,{column:i,rowNode:s}=t;if(e.gos.get("groupTotalRow")&&!s?.footer)return!1;for(const o of s?.allLeafChildren??[])if(mm(n?.getEdit({rowNode:o,column:i}))||mm(n?.getEdit({rowNode:o.pinnedSibling,column:i})))return!0}function eV(e,{rowNode:t,column:n}){if(t=t.pinnedSibling,!!t)return mm(e.editModelSvc?.getEdit({rowNode:t,column:n}))}var one=class extends oe{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){const{cellCtrl:e,editSvc:t,beans:n}=this;if(t?.isBatchEditing()&&t.isEditing()){const s=ZO(n,e)||JO(n,e)||eV(n,e);this.applyBatchingStyle(s)}else this.applyBatchingStyle(!1);const i=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},rne=class extends oe{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){const{rowCtrl:e,editModelSvc:t,beans:n}=this;let i=e.rowNode,s=t?.getEditRow(i);const o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:i});if(!s&&i.pinnedSibling&&(i=i.pinnedSibling,s=t?.getEditRow(i)),s){const a=Array.from(s.keys()).some(c=>{const u={rowNode:i,column:c};return ZO(n,u,!0)||JO(n,u)||eV(n,u)});this.applyStyle(o,a);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){const n=this.editSvc?.isBatchEditing()??!1,i=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:s})=>{s.toggleCss("ag-row-editing",i&&t),s.toggleCss("ag-row-batch-edit",i&&t&&n),s.toggleCss("ag-row-inline-editing",t),s.toggleCss("ag-row-not-inline-editing",!t),s.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},ane=({rowModel:e,pinnedRowModel:t,editModelSvc:n},i)=>{const s=new Set;return e.forEachNode(o=>i.has(o)&&s.add(o)),t?.forEachPinnedRow("top",o=>i.has(o)&&s.add(o)),t?.forEachPinnedRow("bottom",o=>i.has(o)&&s.add(o)),i.forEach(o=>{s.has(o)||n.removeEdits({rowNode:o})}),s},lne=({editModelSvc:e},t,n)=>{t.forEach(i=>e?.getEditRow(i)?.forEach((s,o)=>!n.has(o)&&e.removeEdits({rowNode:i,column:o})))},cne=e=>()=>{const t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0),i=new Set(n.keys());lne(e,ane(e,i),t)},une=new Set(["undo","redo"]),tV={paste:"ui",rangeSvc:"ui",fillHandle:"api",cellClear:"api"},dne=new Set(Object.keys(tV)),hne=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),Zg={cancel:!0,source:"api"},fne={cancel:!1,source:"api"},Sc={checkSiblings:!0},Od={force:!0,suppressFlash:!0},gne=class extends oe{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,Zg),this.createStrategy(i)});const t=cne(e),n=()=>{const i=this.model.getCellValidationModel().getCellValidationMap().size>0,s=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||s?this.stopEditing(void 0,Zg):this.isEditing()&&(this.isBatchEditing()?Wc(e,this.model.getEditPositions()):this.stopEditing(void 0,fne)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowGroupOpened:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,Zg)):(this.stopEditing(void 0,Zg),this.batch=!1)}createStrategy(e){const{beans:t,gos:n,strategy:i}=this,s=e??n.get("editType")??"singleCell";if(i){if(i.beanName===s)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(s,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,i="ui"){return this.strategy??(this.strategy=this.createStrategy()),this.strategy?.shouldStart(e,t,n,i)??null}shouldStopEditing(e,t,n="ui"){return this.strategy?.shouldStop(e,t,n)??null}shouldCancelEditing(e,t,n="ui"){return this.strategy?.shouldCancel(e,t,n)??null}validateEdit(){return i$(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??Sc)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:n=!0,event:i=null,source:s="ui",ignoreEventKey:o=!1}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const a=Lt(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const c=this.shouldStartEditing?.(e,i,n,s);if(c===!1&&s!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,s)&&this.stopEditing(void 0,{source:s}),c&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start(e,i,s,o)}stopEditing(e,t){const{event:n,cancel:i,source:s="ui",suppressNavigateAfterEdit:o}=t||{},{beans:a,model:c}=this;if(dne.has(s))return this.isBatchEditing()?(this.bulkRefresh(e),!1):this.stopEditing(e,{...t,source:tV[s]});if(!(this.isEditing(e)||this.isBatchEditing()&&c.hasEdits(e,Sc))||!this.strategy)return!1;const h=Lt(a,e);h&&(h.onEditorAttachedFuncs=[]);let f=c.getEditMap(!0),p=!1;const m=!i&&!!this.shouldStopEditing(e,n,s),w=i&&!!this.shouldCancelEditing(e,n,s);if(m||w){Wa(a,!0);const S=c.getEditMap();this.processEdits(S,i),this.strategy?.stop(i,n),this.bulkRefresh(void 0,f),f=S,p||(p=m)}else if(n instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){const S=n.key,E=S===Z.ENTER,T=S===Z.ESCAPE,F=S===Z.TAB;(E||F||T)&&(E||F?Wa(a,!0):T&&this.revertSingleCellEdit(h),this.isBatchEditing()?this.strategy?.cleanupEditors():Wc(a,c.getEditPositions(),{event:n}),n.preventDefault(),this.bulkRefresh(e,f,{suppressFlash:!0}),f=c.getEditMap())}else Wa(a,!0),f=c.getEditMap();return p&&e&&this.model.removeEdits(e),!o&&h&&this.navigateAfterEdit(n instanceof KeyboardEvent&&n.shiftKey,h.cellPosition),NS(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),w&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(f.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),p&&m&&this.dispatchBatchEvent("batchEditingStopped",f)),p}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?Z.UP:Z.DOWN;this.beans.navigation?.navigateToNextCell(null,i,t,!1)}}processEdits(e,t=!1){const n=Array.from(e.keys()),{beans:i}=this,s=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const a of n){const c=e.get(a);for(const u of c.keys()){const h=c.get(u),f={rowNode:a,column:u},p=Lt(i,f),m=Lr(h),w=p?.comp?.getCellEditor()?.isCancelAfterEnd?.();!t&&!w&&m&&!s&&(this.setNodeDataValue(a,u,h.pendingValue)||o.push(f)),p?.refreshCell(Od)}}o.forEach(a=>{this.model.clearEditValue(a)})}setNodeDataValue(e,t,n,i){const{beans:s}=this,o=Lt(s,{rowNode:e,column:t});o&&(o.suppressRefreshCell=!0);const a=e.setDataValue(t,n,"commit");return o&&(o.suppressRefreshCell=!1),i&&o?.refreshCell(Od),a}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh(),this.beans.rowRenderer.refreshCells(Od)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;const{pendingValue:i,sourceValue:s}=n,{rowIndex:o,rowPinned:a,data:c}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:a,column:t,source:"api",data:c,newValue:i,oldValue:s,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){const{beans:i,gos:s}=this,{editModelSvc:o,rowModel:a}=i;gn(s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&o?.getEditMap(!1)?.forEach((c,u)=>{for(const h of c.keys())this.refCell({rowNode:u,column:h},c.get(h),n)}))}refCell({rowNode:e,column:t},n,i={}){const{beans:s,gos:o}=this,a=new Set([e]),c=new Set,u=e.pinnedSibling;u&&a.add(u);const h=e.sibling;h&&c.add(h);let f=e.parent;for(;f;)f.sibling?.footer&&o.get("groupTotalRow")||!f.parent&&f.sibling&&o.get("grandTotalRow")?c.add(f.sibling):c.add(f),f=f.parent;a.forEach(p=>this.dispatchEditValuesChanged({rowNode:p,column:t},n)),a.forEach(p=>Lt(s,{rowNode:p,column:t})?.refreshCell(i)),c.forEach(p=>Lt(s,{rowNode:p,column:t})?.refreshCell(i))}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:n}=e;if(n.group){if(this.gos.get("treeData")){if(!n.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.strategy??(this.strategy=this.createStrategy()),this.strategy?.isCellEditable(e,t)??!1}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,n=!0){if(this.hasValidationErrors(e)){const i=Lt(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),n&&(!i?.hasBrowserFocus()&&i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(i&&this.revertSingleCellEdit(i),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){const n=Lt(this.beans,e);n?.comp?.getCellEditor()&&(Wc(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),au(this.beans,e,{silent:!0}),hl(this.beans),n?.refreshCell(Od),n.rowCtrl.rowEditStyleFeature?.applyRowStyles(),t&&(n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){hl(this.beans);const t=Lt(this.beans,e);t&&(t.refreshCell(Od),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let n=!1;return e?.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,n,i="ui"){let s;const o=this.isEditing(),a=o&&this.checkNavWithValidation(void 0,n)==="block-stop";return e instanceof $c&&o&&(s=this.strategy?.moveToNextEditingCell(e,t,n,i,a)),s===null||(s=s||!!this.beans.focusSvc.focusedHeader,s===!1&&!a&&this.stopEditing()),s}getCellDataValue({rowNode:e,column:t},n=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t});const s=e.pinnedSibling;if(s){const a=this.model.getEdit({rowNode:s,column:t});a&&(i=a)}const o=n?i?.editorValue??i?.pendingValue:i?.pendingValue;return o===es||!i?this.valueSvc.getValue(t,e,!0,"api"):o}getRowDataValue(e,t){return this.model.getEditRowDataValue(e,t)}addStopEditingWhenGridLosesFocus(e){X8(this,this.beans,e)}createPopupEditorWrapper(e){return new sne(e)}setDataValue(e,t,n){if((!this.isEditing()||n==="commit")&&!hne.has(n))return;const{beans:i}=this;this.strategy??(this.strategy=this.createStrategy());const s=this.isBatchEditing()?"ui":"api";if(!n||une.has(n))return pp(i,e,!0,t),this.setNodeDataValue(e.rowNode,e.column,t,!0);const o=this.model.getEdit(e);if(o){if(o.pendingValue===t)return!1;if(o.sourceValue!==t)return pp(i,e,!0,t),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0;if(o.sourceValue===t)return i.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,{...o,pendingValue:t}),!0}return pp(i,e,!0,t),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0}handleColDefChanged(e){e$(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,Sc))return;const{rowNode:i,column:s}=e,{compDetails:o,valueToDisplay:a}=t;if(o){const{params:u}=o;return u.data=this.model.getEditRowDataValue(i,Sc),{compDetails:o}}const c=this.model.getEditRow(e.rowNode,Sc);if(a!==void 0&&c?.has(s))return{valueToDisplay:this.valueSvc.getValue(s,i)}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,n,i){this.strategy?.dispatchCellEvent(e,t,n,i)}dispatchRowEvent(e,t){this.strategy?.dispatchRowEvent(e,t)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Pe(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){if(!n||n.length===0)return;const{beans:i,rangeSvc:s,valueSvc:o}=this;Wa(i,!0);const a=this.model.getEditMap(!0),c=a.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),n.forEach(h=>{if(s?.forEachRowInRange(h,f=>{const p=zo(i,f);if(p===void 0)return;const m=a.get(p)??new Map;for(const w of h.columns)if(w&&this.isCellEditable({rowNode:p,column:w},"api")){const S=o.getValue(w,p,!0,"api");let E=o.parseValue(w,p??null,c,S);Number.isNaN(E)&&(E=null),m.set(w,{editorValue:void 0,pendingValue:E,sourceValue:S,state:"changed"})}m.size>0&&a.set(p,m)}),this.setEditMap(a),this.batch){this.cleanupEditors(),NS(i),this.bulkRefresh();return}this.stopEditing(void 0,{source:"api"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(a)})}),this.bulkRefresh();const u=Lt(i,{rowNode:e,column:t});u&&u.focusCell(!0)}createCellStyleFeature(e,t){return new one(e,t)}createRowStyleFeature(e,t){return new rne(e,t)}setEditingCells(e,t){const{beans:n}=this,{colModel:i,valueSvc:s}=n,o=new Map;e.forEach(({colId:a,column:c,colKey:u,rowIndex:h,rowPinned:f,newValue:p,state:m})=>{const w=a?i.getCol(a):u?i.getCol(u):c;if(!w)return;const S=zo(n,{rowIndex:h,rowPinned:f});if(!S)return;const E=s.getValue(w,S,!0,"api");if(!Lr({pendingValue:p,sourceValue:E})&&m!=="editing")return;let T=o.get(S);T||(T=new Map,o.set(S,T)),p===void 0&&(p=es),T.set(w,{editorValue:void 0,pendingValue:p,sourceValue:E,state:m??"changed"})}),this.setEditMap(o,t)}onCellFocused(e){const t=Lt(this.beans,e);if(!t||!this.isEditing(t,Sc))return;const n=this.model.getEdit(t);if(!n||!Lr(n))return;const s=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(s,"pendingChange")}allowedFocusTargetOnValidation(e){return Lt(this.beans,e)}},nV=class extends oe{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const n=e.previousParams,{editSvc:i,beans:s}=this,o=e.type==="cellFocused"?e.sourceEvent:null;n&&(t=Lt(s,n));const{gos:a,editModelSvc:c}=s,u=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){const{column:h,rowIndex:f,rowPinned:p}=e,m={column:h,rowNode:zo(s,{rowIndex:f,rowPinned:p})},w=a.get("invalidEditValueMode")==="block";if(w)return;const S=!w,E=!!c?.getCellValidationModel().hasCellValidation(m),T=S&&E;(n||u?i.stopEditing(void 0,{cancel:T,source:u&&S?"api":void 0,event:o}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}isCellEditable({rowNode:e,column:t},n="ui"){return t.isColumnFunc(e,t.getColDef().editable)}stop(e,t){const n=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};if(n.forEach(o=>{if(i.all.push(o),(this.model.getCellValidationModel().getCellValidation(o)?.errorMessages?.length??0)>0){i.fail.push(o);return}i.pass.push(o)}),e)return n.forEach(o=>{lm(this.beans,o),this.model.stop(o)}),!0;const s=this.processValidationResults(i);return s.destroy.length>0&&s.destroy.forEach(o=>{lm(this.beans,o,{event:t}),this.model.stop(o)}),s.keep.length>0&&s.keep.forEach(o=>{const a=Lt(this.beans,o);this.editSvc?.cellEditingInvalidCommitBlocks()||a&&this.editSvc.revertSingleCellEdit(a)}),!0}cleanupEditors({rowNode:e}={},t){Wa(this.beans,!1);const n=this.model.getEditPositions(),i=[];e?n.forEach(s=>{!e||s.rowNode===e||i.push(s)}):n.forEach(s=>{i.push(s)}),Wc(this.beans,i),NS(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){const t=e.comp,n=t?.getCellEditor();if(n?.focusIn)n.focusIn();else{const i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e=this.model.getEditPositions(),t,n,i,s=!1){const o=i instanceof KeyboardEvent&&!s&&i.key||void 0;J8(this.beans,e,t,o,i,n)}dispatchCellEvent(e,t,n,i){const s=Lt(this.beans,e);s&&this.eventSvc.dispatchEvent({...s.createEvent(t??null,n),...i})}dispatchRowEvent(e,t){const n=WR(this.beans,e);n&&this.eventSvc.dispatchEvent(n.createRowEvent(t))}shouldStart({column:e},t,n,i="ui"){if(t instanceof KeyboardEvent&&(t.key===Z.TAB||t.key===Z.ENTER||t.key===Z.F2||t.key===Z.BACKSPACE&&n))return!0;if(t?.shiftKey&&this.beans.rangeSvc?.getCellRanges().length!=0)return!1;const o=e?.getColDef(),a=this.deriveClickCount(o),c=t?.type;return c==="click"&&t?.detail===1&&a===1||c==="dblclick"&&t?.detail===2&&a===2?!0:i==="api"?n??!1:!1}shouldStop(e,t,n="ui"){const i=this.editSvc.isBatchEditing();return i&&n==="api"?!0:i&&n==="ui"?!1:n==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===Z.ENTER:null}shouldCancel(e,t,n="ui"){const i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===Z.ESCAPE||i&&n==="api"||n==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const n=[];if(e.forEach((i,s)=>{i.forEach((o,a)=>{o.state==="editing"&&n.push({...o,rowNode:s,column:a})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),n.length>0){const i=n.at(-1),s=i.pendingValue===es?void 0:i.pendingValue;this.start(i,new KeyboardEvent("keydown",{key:s}),"api");const o=Lt(this.beans,i);o&&this.setFocusInOnEditor(o)}}deriveClickCount(e){const{gos:t}=this.beans;return t.get("suppressClickEdit")===!0?0:t.get("singleClickEdit")===!0||e?.singleClickEdit?1:2}destroy(){this.cleanupEditors(),super.destroy()}},pne=class extends nV{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}isCellEditable(e,t="ui"){const n=super.isCellEditable(e,t);return n===!0||t==="ui"?n:this.beans.colModel.getCols().some(s=>super.isCellEditable({rowNode:e.rowNode,column:s},t))}shouldStop(e,t,n="ui"){const{rowNode:i}=e||{};if(!WR(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,n);return o!==null?o:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e,t,n="ui",i){const{rowNode:s}=e;this.rowNode!==s&&super.cleanupEditors(e),this.dispatchRowEvent({rowNode:s},"rowEditingStarted"),this.startedRows.push(s);const o=this.beans.visibleCols.allCols,a=[];o.forEach(c=>{if(!c.isCellEditable(s))return;const u={rowNode:s,column:c};a.push(u),this.model.hasEdits(u)||this.model.start(u)}),this.rowNode=s,this.setupEditors(a,e,!0,t,i)}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){const{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;const i=[];return e||this.model.getEditMap().forEach((s,o)=>{if(!(!s||s.size===0)){for(const a of s.values())if(Lr(a)){i.push(o);break}}}),hl(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:n})==="block-stop"?!1:(super.stop(e,t),i.forEach(s=>this.dispatchRowEvent({rowNode:s},"rowValueChanged")),this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0)}onCellFocusChanged(e){const{rowIndex:t}=e,n=e.previousParams;if(n?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;const i=Lt(this.beans,n);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t),this.startedRows.forEach(n=>this.dispatchRowEvent({rowNode:n},"rowEditingStopped")),this.startedRows.length=0}moveToNextEditingCell(e,t,n,i="ui",s=!1){const o=e.cellPosition;let a;this.model.suspend(!0);try{a=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const c=a.cellPosition,u=e.isCellEditable(),h=a.isCellEditable(),f=c&&o.rowIndex===c.rowIndex&&o.rowPinned===c.rowPinned;u&&this.setFocusOutOnEditor(e),this.restoreEditors();const p=this.gos.get("suppressStartEditOnTab");return h&&!s?p?a.focusCell(!0,n):(a.comp?.getCellEditor()||au(this.beans,a,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(a),a.focusCell(!1,n)):(h&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,n)),!f&&!s&&(this.cleanupEditors(a,!0),p?a.focusCell(!0,n):this.editSvc.startEditing(a,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:n},i)=>{if(n!=="editing")return;const s=Lt(this.beans,{rowNode:t,column:i});s&&!s.comp?.getCellEditor()&&au(this.beans,s,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},mne=class extends nV{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,n="ui"){const i=super.shouldStop(e,t,n);if(i!==null)return i;const{rowNode:s,column:o}=e||{};return(!this.rowNode||!this.column)&&s&&o?null:this.rowNode!==s||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e,t,n="ui",i){(this.rowNode!==e.rowNode||this.column!==e.column)&&super.cleanupEditors(),this.rowNode=e.rowNode,this.column=e.column,this.model.start(e),this.setupEditors([e],e,!0,t,i)}dispatchRowEvent(e,t){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:n}=this.beans,{rowIndex:i,column:s,rowPinned:o}=e,a=zo(this.beans,{rowIndex:i,rowPinned:o}),c=VS(s),u=t.getCol(c),h=e.previousParams;if(h){const f=VS(h.column);if(h?.rowIndex===i&&f===c&&h?.rowPinned===o)return}n?.isEditing({rowNode:a,column:u},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,i="ui",s=!1){const o=e.cellPosition;let a;const c=this.beans.gos.get("editType")==="fullRow";c&&this.model.suspend(!0),s||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:n}));try{a=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0})}finally{c&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const u=a.cellPosition,h=e.isCellEditable(),f=a.isCellEditable(),p=u&&o.rowIndex===u.rowIndex&&o.rowPinned===u.rowPinned;h&&!s&&this.setFocusOutOnEditor(e);const m=this.gos.get("suppressStartEditOnTab");return!p&&!s&&(super.cleanupEditors(a,!0),m?a.focusCell(!0,n):this.editSvc.startEditing(a,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),f&&!s?(a.focusCell(!1,n),m?a.focusCell(!0,n):a.comp?.getCellEditor()||(au(this.beans,a,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(a))):(f&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,n)),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},Xr={moduleName:"EditCore",version:ye,beans:[U8,gne],apiFunctions:{getEditingCells:Qte,getCellEditorInstances:Z8,startEditingCell:Jte,stopEditing:Xte,isEditing:Zte,validateEdit:ene},dynamicBeans:{singleCell:mne,fullRow:pne},dependsOn:[iC,YO],css:[Dte]},Cne={moduleName:"UndoRedoEdit",version:ye,beans:[xte],apiFunctions:{undoCellEditing:Kte,redoCellEditing:Yte,getCurrentUndoSize:tne,getCurrentRedoSize:nne},dependsOn:[Xr]},vne={moduleName:"TextEditor",version:ye,userComponents:{agCellEditor:MP,agTextCellEditor:MP},dependsOn:[Xr]},yne={moduleName:"NumberEditor",version:ye,userComponents:{agNumberCellEditor:{classImp:Gte}},dependsOn:[Xr]},wne={moduleName:"DateEditor",version:ye,userComponents:{agDateCellEditor:Ite,agDateStringCellEditor:Lte},dependsOn:[Xr]},Sne={moduleName:"CheckboxEditor",version:ye,userComponents:{agCheckboxCellEditor:Fte},dependsOn:[Xr]},bne={moduleName:"SelectEditor",version:ye,userComponents:{agSelectCellEditor:zte},dependsOn:[Xr]},Rne={moduleName:"LargeTextEditor",version:ye,userComponents:{agLargeTextCellEditor:Vte},dependsOn:[Xr]},Ene={moduleName:"CustomEditor",version:ye,dependsOn:[Xr]},Tne=class extends oe{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Uc(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),I7(e))}createColumns(e,t){const n=()=>{im(this.beans,this.columns?.tree),this.columns=null},i=e.treeDepth,o=(this.columns?.treeDepth??-1)==i,a=this.generateSelectionCols();if(M7(a,this.columns?.list??[])&&o)return;n();const{colGroupSvc:u}=this.beans,h=u?.findDepth(e.tree)??0,f=u?.balanceTreeForAutoCols(a,h)??[];this.columns={list:a,tree:f,treeDepth:h,map:{}},t(m=>{if(!m)return null;const w=m.filter(S=>!Qr(S));return[...a,...w]})}updateColumns(e){const t=Uc(e.source);this.columns?.list.forEach(n=>{const i=this.createSelectionColDef(e.currentValue);n.setColDef(i,null,t),cs(this.beans,{state:[{...i,colId:n.getColId()}]},t)})}getColumn(e){return this.columns?.list.find(t=>Jk(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!Ja(e))return!1;const i=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;const s=!!zc(n),o=up(n);return s||o}createSelectionColDef(e){const{gos:t}=this.beans,n=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),{rowSpan:s,spanRows:o,...a}=n??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(c,u,h,f){const p=h.isSelected(),m=f.isSelected();return p===m?0:p?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...a,colId:Qk,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const n=new Sl(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){const i=t&&typeof t!="string"?zc(t):void 0,s=e&&typeof e!="string"?zc(e):void 0,o=i!==s,a=t&&typeof t!="string"?up(t):void 0,c=e&&typeof e!="string"?up(e):void 0,u=a!==c,h=Zp(e),f=Zp(t);(o||u||h!==f)&&this.beans.colModel.refreshAll(n)}destroy(){im(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,n){if(!this.columns?.list.length)return;const i=e.length+t.length+n.length;if(i===0)return;const s=this.columns.list[0];if(!s.isVisible())return;const o=()=>{let u;switch(s.pinned){case"left":case!0:u=e;break;case"right":u=n;break;default:u=t}u&&Ji(u,s)};(this.beans.rowNumbersSvc?.getColumn(Xk)?2:1)===i&&o()}};function xne(e,t){if(!t.nodes.every(a=>a.rowPinned&&!of(a)?(ge(59),!1):a.id===void 0?(ge(60),!1):!0))return;const{nodes:i,source:s,newValue:o}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:s??"api",newValue:o})}function Dne(e,t,n="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function Ane(e,t,n="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function Fne(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function Pne(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function Mne(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function Ine(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function _ne(e){return e.selectionSvc?.getSelectedNodes()??[]}function kne(e){return e.selectionSvc?.getSelectedRows()??[]}var Lne=class extends vK{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=Jp(e),this.groupSelectsDescendants=Mh(e),this.groupSelectsFiltered=tm(e)==="filteredDescendants",this.masterSelectsDetail=_F(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=Mh(e),n=Jp(e),i=tm(e)==="filteredDescendants";this.masterSelectsDetail=_F(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;const i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);return i==null?0:(this.selectionCtx.selectAll=!1,"select"in i?(i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n)):this.setNodesSelected({nodes:[i.node],newValue:i.newValue,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:n}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:i,event:s,source:o,keepDescendants:a=!1}){if(!Ja(this.gos)&&e)return ge(132),0;if(i.length===0)return 0;if(i.length>1&&!this.isMultiSelect())return ge(130),0;let c=0;for(let u=0;u<i.length;u++){const h=i[u],f=bc(h),p=this.groupSelectsFiltered&&f.group;if(f.rowPinned&&!of(f)){ge(59);continue}if(f.id===void 0){ge(60);continue}p||this.selectRowNode(f,e,s,o)&&(this.detailSelection.delete(f.id),c++),this.groupSelectsDescendants&&f.childrenAfterGroup?.length&&(c+=this.selectChildren(f,e,o))}return n||(i.length===1&&o==="api"&&this.selectionCtx.setRoot(bc(i[0])),e&&(t||!this.isMultiSelect())&&(c+=this.clearOtherNodes(bc(i[0]),a,o)),c>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),c}selectRange(e,t,n){let i=0;return e.forEach(s=>{const o=bc(s);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n){const i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((n,i)=>{e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:n,rowModel:i}=this.beans;if(!gn(n))return!1;const s=i.rootNode;if(!s)return!1;t||(t=new Oh(!0,s),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(a=>{if(a!==s){const c=this.calculateSelectedFromChildren(a);o=this.selectRowNode(a,c===null?!1:c,void 0,e)||o}}),o}clearOtherNodes(e,t,n){const i=new Map;let s=0;return this.selectedNodes.forEach(o=>{const a=o.id==e.id;if((t?!Vne(e,o):!0)&&!a){const u=this.selectedNodes.get(o.id);s+=this.setNodesSelected({nodes:[u],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(o=>{const a=this.calculateSelectedFromChildren(o);this.selectRowNode(o,a===null?!1:a,void 0,n)}),s}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new gl(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!gn(e))return;const n=t.getTopLevelNodes();if(n===null)return;const i=[];function s(o){for(let a=0,c=o.length;a<c;a++){const u=o[a];u.isSelected()?i.push(u):u.group&&u.childrenAfterGroup&&s(u.childrenAfterGroup)}}return s(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const n=gn(this.gos);let i=!1;const s=o=>{const a=this.selectRowNode(bc(o),!1,void 0,e);i||(i=a)};if(t==="currentPage"||t==="filtered"){if(!n){vt(102);return}this.getNodesToSelect(t).forEach(s)}else this.selectedNodes.forEach(s),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);i||(i=o)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return iV(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],n=s=>t.push(s);if(e==="currentPage")return this.forEachNodeOnPage(s=>{if(!s.group){n(s);return}if(!s.expanded&&!s.footer){const o=a=>{n(a),a.childrenAfterFilter?.forEach(o)};o(s);return}this.groupSelectsDescendants||n(s)}),t;const i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(n),t):(i.forEachNode(n),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:n}=this.beans,i=t.getFirstRow(),s=t.getLastRow();for(let o=i;o<=s;o++){const a=n.getRow(o);a&&e(a)}}selectAllRowNodes(e){const{gos:t,selectionCtx:n}=this;if(!Ja(t)){ge(132);return}if(l7(t)&&!em(t)){ge(130);return}if(!this.canSelectAll())return;const{source:i,selectAll:s}=e;let o=!1;if(this.getNodesToSelect(s).forEach(a=>{const c=this.selectRowNode(bc(a),!0,void 0,i);o||(o=c)}),n.selectAll=!0,gn(t)&&this.groupSelectsDescendants){const a=this.updateGroupsFromChildrenSelections(i);o||(o=a)}o&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||(e=[]),!Array.isArray(e)){vt(103);return}const i=new Set(e),s=[];this.beans.rowModel.forEachNode(o=>{i.has(o.id)&&s.push(o)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:s,source:t})}canSelectAll(){const{gos:e}=this.beans;return!!gn(e)}updateSelectable(e){const{gos:t,rowModel:n}=this.beans;if(!Ja(t))return;const i="selectableChanged",s=e!==void 0,o=gn(t)&&this.groupSelectsDescendants,a=[],c=u=>{if(s&&!u.group)return;if(o&&u.group){const f=u.childrenAfterGroup?.some(p=>p.selectable)??!1;this.setRowSelectable(u,f,!0);return}!this.updateRowSelectable(u,!0)&&u.isSelected()&&a.push(u)};if(o){if(e===void 0){const u=n.rootNode;e=u?new Oh(!1,u):void 0}e?.forEachChangedNodeDepthFirst(c,!s,!s)}else n.forEachNode(c);a.length&&this.setNodesSelected({nodes:a,newValue:!1,source:i}),!s&&o&&this.updateGroupsFromChildrenSelections?.(i)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const n=e.detailNode?.detailGridInfo?.api;if(!n)return;const i=One(n);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){const o=this.detailSelection.get(e.id)??new Set;for(const a of n.getSelectedNodes())o.add(a.id);this.detailSelection.set(e.id,o)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!em(t)){ge(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{const i=this.detailSelection.get(e.id);if(i){const s=[];for(const o of i){const a=n.getRowNode(o);a&&s.push(a)}n.setNodesSelected({nodes:s,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function bc(e){return of(e)?e.pinnedSibling:e.footer?e.sibling:e}function One(e){let t=0,n=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&n++}),iV(t,n)}function iV(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function Vne(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}var Nne={moduleName:"SharedRowSelection",version:ye,beans:[Tne],apiFunctions:{setNodesSelected:xne,selectAll:Dne,deselectAll:Ane,selectAllFiltered:Fne,deselectAllFiltered:Pne,selectAllOnCurrentPage:Mne,deselectAllOnCurrentPage:Ine,getSelectedNodes:_ne,getSelectedRows:kne}},Bne={moduleName:"RowSelection",version:ye,rowModels:["clientSide","infinite","viewport"],beans:[Lne],dependsOn:[Nne]};function Gne(e){e.expansionSvc?.expandAll(!0)}function Hne(e){e.expansionSvc?.expandAll(!1)}function zne(e){const t=Xs(e),n=IO(e);t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function Une(e,t,n){const i=IO(e);if(i){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){vt(238);return}i.setRowCount(t,n);return}vt(28);return}const s=nC(e);if(s){s.setRowCount(t,n);return}}function Wne(e){return wl(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function jne(e){return e.rowModel.isLastRowIndexKnown()}var $ne={moduleName:"CsrmSsrmSharedApi",version:ye,apiFunctions:{expandAll:Gne,collapseAll:Hne,onRowHeightChanged:zne}},qne={moduleName:"SsrmInfiniteSharedApi",version:ye,apiFunctions:{setRowCount:Une,getCacheBlockState:Wne,isLastRowIndexKnown:jne}},Kne=class extends oe{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{if(!i){vt(18),t||vt(20);return}if(this.isGridApi(i))return i;const s=i;return"current"in s?s.current?.api:(s.api||vt(19),s.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":ge(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach(n=>{let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){const t=e.column;let n=null;const i=this.beans,{colResize:s,ctrlsSvc:o,colModel:a}=i;if(t&&(n=a.getColDefCol(t.getColId())),t&&!n)return;const c=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const p=e.api.getColumnState().map(m=>({colId:m.colId}));cs(i,{state:p,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const p=e.api.getColumnState().map(m=>({colId:m.colId,hide:m.hide}));cs(i,{state:p},"alignedGridChanged")}break;case"columnPinned":{const p=e.api.getColumnState().map(m=>({colId:m.colId,pinned:m.pinned}));cs(i,{state:p},"alignedGridChanged")}break;case"columnResized":{const f=e,p={};c.forEach(m=>{p[m.getId()]={key:m.getColId(),newWidth:m.getActualWidth()}}),f.flexColumns?.forEach(m=>{p[m.getId()]&&delete p[m.getId()]}),s?.setColumnWidths(Object.values(p),!1,f.finished,"alignedGridChanged");break}}const h=o.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(f=>{f.setGridOption("alwaysShowVerticalScroll",h)})}},Yne={moduleName:"AlignedGrids",version:ye,beans:[Kne],dependsOn:[lO]},Qne=class extends fK{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},Sw=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function Xne(e){if(Vt(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let n=0;n<t.length;n++){const i=t[n],s=n===0,o=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.lastChild!==o&&(i.lastChild=o,i.dispatchRowEvent("lastChildChanged")),i.childIndex!==n&&(i.childIndex=n,i.dispatchRowEvent("childIndexChanged"))}}function sV(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),Xne(e)}var Zne=class extends oe{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,n=t.sortSvc.getSortOptions(),i=Ce(n)&&n.length>0,s=i&&!!e.changedRowNodes&&this.gos.get("deltaSort"),o=n.some(({column:a})=>_s(t.gos)?a.isPrimary()&&a.isRowGroupActive():!!a.getColDef().showRowGroup);this.sort(t,n,i,s,e.changedRowNodes,e.changedPath,o)}sort(e,t,n,i,s,o,a){const{gos:c,colModel:u,rowGroupColsSvc:h,rowNodeSorter:f,rowRenderer:p,showRowGroupCols:m}=e,w=c.get("groupMaintainOrder"),S=u.getCols().some(M=>M.isRowGroupActive()),E=u.isPivotMode(),T=c.getCallback("postSortRows");let F=!1;const P=M=>{const U=E&&M.leafGroup,z=w&&S&&!M.leafGroup&&!a;let j;if(z){const A=h?.columns?.[M.level+1]?.getSort()===null,_=M.childrenAfterAggFilter.slice(0);if(M.childrenAfterSort&&!A){const L={};M.childrenAfterSort.forEach((O,G)=>{L[O.id]=G}),_.sort((O,G)=>(L[O.id]??0)-(L[G.id]??0))}j=_}else!n||U?j=M.childrenAfterAggFilter.slice(0):i&&s?j=Jne(f,M,s,o,t):j=f.doFullSort(M.childrenAfterAggFilter,t);if(F||(F=M.childrenAfterSort?.[0]!==j[0]),M.childrenAfterSort=j,sV(M),T){const I={nodes:M.childrenAfterSort};T(I)}};if(o?.forEachChangedNodeDepthFirst(P),F&&this.gos.get("groupHideOpenParents")){const M=m?.getShowRowGroupCols();M?.length&&p.refreshCells({columns:M,force:!0})}}};function Jne(e,t,n,i,s){const o=t.childrenAfterAggFilter,a=t.childrenAfterSort;if(!a)return e.doFullSort(o,s);const c=new Set,u=[],{updates:h,adds:f}=n;for(let m=0,w=o.length;m<w;++m){const S=o[m];h.has(S)||f.has(S)||i&&!i.canSkip(S)?u.push({currentPos:u.length,rowNode:S}):c.add(S.id)}const p=a.filter(m=>c.has(m.id)).map((m,w)=>({currentPos:w,rowNode:m}));return u.sort((m,w)=>e.compareRowNodes(s,m,w)),eie(e,s,u,p)}function eie(e,t,n,i){const s=[];let o=0,a=0;const c=n.length,u=i.length;for(;o<c&&a<u;){const h=n[o],f=i[a],p=e.compareRowNodes(t,h,f);let m;p<0?(m=h,++o):(m=f,++a),s.push(m.rowNode)}for(;o<c;)s.push(n[o++].rowNode);for(;a<u;)s.push(i[a++].rowNode);return s}var tie=class extends oe{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=Hn(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(i=>!!i);const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new gl(this.beans);const n=this.getNewNodeManager();this.nodeManager=n,n.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;return Wk(e)==="treeNested"&&t.csrmChildrenTreeNodeSvc||t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:t})=>[...t])];this.addManagedPropertyListeners(e,t=>{const n=t.changeSet?.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,i){let s,o=!1;do{s=!1;const a=this.getRowIndexAtPixel(e),c=this.getRowIndexAtPixel(t),u=Math.max(a,n),h=Math.min(c,i);for(let f=u;f<=h;f++){const p=this.getRow(f);if(p.rowHeightEstimated){const m=Wr(this.beans,p);p.setRowHeight(m.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}onPropChange(e){if(!this.rootNode)return;const t=this.gos,n=new Set(e),i={step:"nothing",changedProps:n},s=n.has("rowData"),o=this.nodeManager,a=this.getNewNodeManager(),c=o!==a||s&&n.has("treeData")&&t.get("treeData")||n.has("treeDataChildrenField")&&t.get("treeData");let u;if((c||s)&&(u=t.get("rowData"),u!=null&&!Array.isArray(u)&&(u=null,ge(1))),c&&(s||(u=o?.extractRowData()??u),o!==a&&(o?.deactivate(),this.nodeManager=a),a.activate(this.rootNode)),u)if(!c&&!this.isEmpty()&&u.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate"))i.keepRenderedRows=!0,i.animate=!this.gos.get("suppressAnimationFrame"),i.changedRowNodes=new Sw,a.setImmutableRowData(i,u);else{i.rowDataUpdated=!0,i.newData=!0;const{selectionSvc:f,pinnedRowModel:p}=this.beans;f?.reset("rowDataChanged"),p?.isManual()&&p.reset(),this.rowNodesCountReady=!0,a.setNewRowData(u)}if(i.rowDataUpdated)i.step="group";else if(i.step==="nothing"){for(const{refreshProps:h,step:f}of this.orderedStages)if(e.some(p=>h.has(p))){i.step=f;break}}i.step!=="nothing"&&this.refreshModel(i)}setRowTopAndRowIndex(){const{beans:e,rowsToDisplay:t}=this,n=e.environment.getDefaultRowHeight();let i=0;const s=new Set,o=zn(this.gos,"normal");for(let a=0,c=t.length;a<c;++a){const u=t[a];if(u.id!=null&&s.add(u.id),u.rowHeight==null){const h=Wr(e,u,o,n);u.setRowHeight(h.height,h.estimated)}u.setRowTop(i),u.setRowIndex(a),i+=u.rowHeight}return s}clearRowTopAndRowIndex(e,t){const n=e.active,i=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},s=o=>{if(o!==null&&(i(o),i(o.detailNode),i(o.sibling),o.hasChildren()&&o.childrenAfterGroup)){const a=o.level==-1;n&&!a&&!o.expanded||o.childrenAfterGroup.forEach(s)}};s(this.rootNode)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const n=e.childrenAfterSort,i=e.sibling&&e.sibling.displayed?1:0;return(n?n.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;const{childrenAfterSort:s}=t,o=c=>{let u=s[c];if(this.gos.get("groupHideOpenParents"))for(;u.expanded&&u.childrenAfterSort&&u.childrenAfterSort.length>0;)u=u.childrenAfterSort[0];return u.rowIndex},{footerSvc:a}=this.beans;return a?a.getTopDisplayIndex(n,e,s,o):o(e)}getTopLevelIndexFromDisplayedIndex(e){const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let s=this.getRow(e);for(s.footer&&(s=s.sibling);s.parent&&s.parent!==t;)s=s.parent;const o=t.childrenAfterSort?.findIndex(a=>a===s);return o===-1?e:o??e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=Hc(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=Hc(this.gos),i=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=Hc(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new Oh(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:n,rowDataUpdated:i}=e;return!(!t||n||!i||t.removals.size||t.adds.size)}refreshModel(e){if(!this.rootNode)return;const t=this.beans;let n=!!e.rowDataUpdated;const i=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&n));if(this.started&&n&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.rowDataUpdatedPending||(this.rowDataUpdatedPending=n),!this.started||this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.rowDataUpdated=n=!0),this.isRefreshingModel=!0,t.masterDetailSvc?.refreshModel(e),n&&e.step!=="group"&&t.colFilter?.refreshModel(),e.step){case"group":(this.doRowGrouping(e)||n)&&t.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}));case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(e.changedRowNodes,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1;const s=[],o=Mh(this.gos);return this.forEachNodeAfterFilterAndSort(a=>{if(i)return;if(n&&(a===t||a===e)&&(i=!0,a.group&&o)){s.push(...a.allLeafChildren);return}if(!n){if(a!==t&&a!==e)return;n=!0}if(!a.group||!o){s.push(a);return}}),s}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let n=0,i=t.length-1;if(e<=0)return 0;if(Ct(t).rowTop<=e)return t.length-1;let o=-1,a=-1;for(;;){const c=Math.floor((n+i)/2),u=t[c];if(this.isRowInPixel(u,e)||(u.rowTop<e?n=c+1:u.rowTop>e&&(i=c-1),o===n&&a===i))return c;o=n,a=i}}isRowInPixel(e,t){const n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode?.allLeafChildren?.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t=!1,n=!1){const{colModel:i,rowGroupColsSvc:s}=this.beans;if(!i.isPivotMode())return;if(!s?.columns.length){e(this.rootNode,0);return}const o=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,a=>a.leafGroup?null:a[o])}depthFirstSearchRowNodes(e,t=!1,n=o=>o.childrenAfterGroup,i=this.rootNode,s=0){let o=s;if(!i)return o;const a=i===this.rootNode;a||e(i,o++);const{footerSvc:c}=this.beans;if(i.hasChildren()&&!i.footer){const u=n(i);if(u){o=c?.addTotalRows(o,i,e,t,a,"top")??o;for(const h of u)o=this.depthFirstSearchRowNodes(e,t,n,h,o);return c?.addTotalRows(o,i,e,t,a,"bottom")??o}}return o}doAggregate(e){const t=this.rootNode;t&&this.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(n=>{n.childrenAfterSort=n.childrenAfterAggFilter.slice(0),sV(n)})}doRowGrouping(e){const t=this.rootNode,n=this.groupStage?.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,rowNodesOrderChanged:!!e.rowNodesOrderChanged,afterColumnsChanged:!!e.afterColumnsChanged});if(n!==void 0)return n;const i=t.sibling;return t.childrenAfterGroup=t.allLeafChildren,i&&(i.childrenAfterGroup=t.childrenAfterGroup),t.updateHasChildren(),!1}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(t=>{t.childrenAfterFilter=t.childrenAfterGroup,_O(t)},!0)}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){const t=this.nodeManager.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(GS)===0?this.groupStage?.getNode(e):void 0}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const n=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();const e=[],t=[],n=new Sw;let i=!1;this.rowDataTransactionBatch?.forEach(s=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:o,rowsInserted:a}=this.nodeManager.updateRowData(s.rowDataTransaction,n);a&&(i=!0),t.push(o),s.callback&&e.push(s.callback.bind(null,o))}),this.commitTransactions(i,n),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const t=new Sw,{rowNodeTransaction:n,rowsInserted:i}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(i,t),n}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let n;if(e)n=e.execute({rowNode:t});else{n=t?.childrenAfterSort??[];for(const i of n)i.setUiLevel(0)}this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=nm,this.rowsToDisplay=nm}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function nie(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function iie(e,t){const n=Xs(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function sie(e){return Xs(e)?.isEmpty()??!0}function oie(e,t){Xs(e)?.forEachLeafNode(t)}function rie(e,t){Xs(e)?.forEachNodeAfterFilter(t)}function aie(e,t){Xs(e)?.forEachNodeAfterFilterAndSort(t)}function lie(e){if(e.rowAutoHeight?.active){ge(3);return}Xs(e)?.resetRowHeights()}function cie(e,t){return e.frameworkOverrides.wrapIncoming(()=>Xs(e)?.updateRowData(t))}function uie(e,t,n){e.frameworkOverrides.wrapIncoming(()=>Xs(e)?.batchUpdateRowData(t,n))}function die(e){e.frameworkOverrides.wrapIncoming(()=>Xs(e)?.flushAsyncTransactions())}function hie(e){return e.selectionSvc?.getBestCostNodeSelection()}var fie={moduleName:"ClientSideRowModel",version:ye,rowModels:["clientSide"],beans:[Qne,tie,Zne],dependsOn:[AO]},gie={moduleName:"ClientSideRowModelApi",version:ye,apiFunctions:{onGroupExpandedOrCollapsed:nie,refreshClientSideRowModel:iie,isRowDataEmpty:sie,forEachLeafNode:oie,forEachNodeAfterFilter:rie,forEachNodeAfterFilterAndSort:aie,resetRowHeights:lie,applyTransaction:cie,applyTransactionAsync:uie,flushAsyncTransactions:die,getBestCostNodeSelection:hie},dependsOn:[$ne]},pie=class extends oe{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:n,columnKeys:i,skipRowGroups:s,exportRowNumbers:o}=t,a=this.getColumnsToExport({allColumns:n,skipRowGroups:s,columnKeys:i,exportRowNumbers:o});return[this.prepareSession(a),this.prependContent(t),this.exportColumnGroups(t,a),this.exportHeaders(t,a),this.processPinnedTopRows(t,a),this.processRows(t,a),this.processPinnedBottomRows(t,a),this.appendContent(t)].reduce((c,u)=>u(c),e).parse()}processRow(e,t,n,i){const s=t.shouldRowBeSkipped||(()=>!1),a=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!a,u=this.colModel.isPivotMode()?i.leafGroup:!i.group,h=!!i.footer,f=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&r7(this.gos,i);if(!u&&!h&&(t.skipRowGroups||f||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!u&&!h||s(Pe(this.gos,{node:i})))return;const w=e.onNewBodyRow(i);if(n.forEach((S,E)=>{w.onColumn(S,E,i)}),t.getCustomContentBelowRow){const S=t.getCustomContentBelowRow(Pe(this.gos,{node:i}));S&&e.addCustomContent(S)}}appendContent(e){return t=>{const n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{const n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){const i=new lL,{colGroupSvc:s}=this.beans,o=s?s.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){const i=n.onNewHeaderRow();t.forEach((s,o)=>{i.onColumn(s,o,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedTopRow(s.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{const i=this.rowModel,s=gn(this.gos),o=wl(this.gos),a=!s&&e.onlySelected,c=this.processRow.bind(this,n,e,t),{exportedRows:u="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(h=>h.rowPinned==null).sort((h,f)=>h.rowIndex-f.rowIndex).map(h=>i.getRow(h.rowIndex)).forEach(c),n;if(this.colModel.isPivotMode())return s?i.forEachPivotNode(c,!0,u==="filteredAndSorted"):o?i.forEachNodeAfterFilterAndSort(c,!0):i.forEachNode(c),n;if(e.onlySelectedAllPages||a){const h=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(h),h.forEach(c)}else u==="all"?i.forEachNode(c):s||o?i.forEachNodeAfterFilterAndSort(c,!0):i.forEachNode(c);return n}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;const i=t.getSortOptions(),s=(o,a)=>o.rowIndex!=null&&a.rowIndex!=null?o.rowIndex-a.rowIndex:o.level===a.level?o.parent?.id===a.parent?.id?n.compareRowNodes(i,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:a,currentPos:a.rowIndex??-1}):s(o.parent,a.parent):o.level>a.level?s(o.parent,a):s(o,a.parent);e.sort(s)}processPinnedBottomRows(e,t){return n=>{const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedBottomRow(s.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:i=!1,columnKeys:s}=e,{colModel:o,gos:a,visibleCols:c}=this,u=o.isPivotMode(),h=m=>Qr(m)?!1:!kr(m)||i;if(s&&s.length)return o.getColsForKeys(s).filter(h);const f=a.get("treeData");let p=[];return t&&!u?p=o.getCols():p=c.allCols,p=p.filter(m=>h(m)&&(n&&!f?!HR(m):!0)),p}recursivelyAddHeaderGroups(e,t,n){const i=[];e.forEach(s=>{const o=s;o.getChildren&&o.getChildren().forEach(a=>i.push(a))}),e.length>0&&on(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){const i=e.onNewHeaderGroupingRow();let s=0;t.forEach(o=>{const a=o;let c;n?c=n(Pe(this.gos,{columnGroup:a})):c=this.beans.colNames.getDisplayNameForColumnGroup(a,"header");const u=a.getLeafColumns().reduce((h,f,p,m)=>{let w=Ct(h);return f.getColumnGroupShow()==="open"?(!w||w[1]!=null)&&(w=[p],h.push(w)):w&&w[1]==null&&(w[1]=p-1),p===m.length-1&&w&&w[1]==null&&(w[1]=p),h},[]);i.onColumn(a,c||"",s++,a.getLeafColumns().length-1,u)})}},mie={moduleName:"SharedExport",version:ye,beans:[pie]},IP=`\r
`,Cie=class extends tee{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,IP),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(ge(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=IP),this.isFirstLine=!1}},vie=class extends eee{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){ge(51);return}const t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(Pe(this.gos,{})):t.fileName;nee(this.getFileName(s),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:s,gos:o}=this,{processCellCallback:a,processHeaderCallback:c,processGroupHeaderCallback:u,processRowGroupCallback:h,suppressQuotes:f,columnSeparator:p}=e;return new Cie({colModel:t,colNames:n,valueSvc:s,gos:o,processCellCallback:a||void 0,processHeaderCallback:c||void 0,processGroupHeaderCallback:u||void 0,processRowGroupCallback:h||void 0,suppressQuotes:f||!1,columnSeparator:p||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function yie(e,t){return e.csvCreator?.getDataAsCsv(t)}function wie(e,t){e.csvCreator?.exportDataAsCsv(t)}var Sie={moduleName:"CsvExport",version:ye,beans:[vie],apiFunctions:{getDataAsCsv:yie,exportDataAsCsv:wie},dependsOn:[mie]},bie=class extends oe{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){const t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:n,beans:i,rowNodes:s}=this;for(let o=0;o<e;o++){const a=n+o,c=new gl(i);c.setRowHeight(t),c.uiLevel=0,c.setRowIndex(a),c.setRowTop(t*a),s.push(c)}}getBlockStateJson(){const{id:e,startRow:t,endRow:n,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:i}}}setDataAndId(e,t,n){Ce(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Vt(this.params.datasource.getRows)){ge(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:n,params:{sortModel:i,filterModel:s},gos:o}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:i,filterModel:s,context:Pe(o,{}).context}}forEachNode(e,t,n){this.rowNodes.forEach((i,s)=>{this.startRow+s<n&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){const{rowNodes:t,beans:n}=this;t.forEach((s,o)=>{const a=e.rowData?e.rowData[o]:void 0;!s.id&&s.alreadyRendered&&a&&(t[o]=new gl(n),t[o].setRowIndex(s.rowIndex),t[o].setRowTop(s.rowTop),t[o].setRowHeight(s.rowHeight),s.clearRowTopAndRowIndex()),this.setDataAndId(t[o],a,this.startRow+o)});const i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},Rie=2,Eie=class extends oe{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const n=Math.floor(e/this.params.blockSize);let i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){const t=this.params,n=this.createBean(new bie(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(cl(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(a=>a!=e),n=(a,c)=>c.lastAccessed-a.lastAccessed;t.sort(n);const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,o=Rie-1;t.forEach((a,c)=>{const u=a.state==="needsLoading"&&c>=o,h=i?c>=s:!1;if(u||h){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:n,endRow:i}=e;return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:n,overflowSize:i}=this.params,o=(e.id+1)*n+i;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,Ce(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(n,i)=>n.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const n=[];let i=-1,s=!1;const o={value:0};let a=!1;return this.getBlocksInOrder().forEach(u=>{if(!a){if(s&&i+1!==u.id){a=!0;return}i=u.id,u.forEachNode(h=>{const f=h===e||h===t;(s||f)&&n.push(h),f&&(s=!s)},o,this.rowCount)}}),a||s?[]:n}},Tie=class extends oe{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=el(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=el(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!xh(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;ou(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:i,eventSvc:s,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:n?.getSortModel()??[],rowNodeBlockLoader:i,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:el(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new Eie(this.cacheParams)),s.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}};function xie(e){nC(e)?.refreshCache()}function Die(e){nC(e)?.purgeCache()}function Aie(e){return nC(e)?.getRowCount()}var Fie=class extends oe{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=a7(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Hn(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ji(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){cl(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){cl(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},Pie={moduleName:"InfiniteRowModelCore",version:ye,rowModels:["infinite"],beans:[Tie,Fie]},Mie={moduleName:"InfiniteRowModel",version:ye,apiFunctions:{refreshInfiniteCache:xie,purgeInfiniteCache:Die,getInfiniteRowCount:Aie},dependsOn:[Pie,qne]},Iie="↑",_ie="↓",kie={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},Lie=class extends At{constructor(){super(kie),this.eValue=De,this.eDelta=De,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const n=Math.abs(t),i=e.formatValue(n),s=Ce(i)?i:n,o=t>=0,a=this.eDelta;o?a.textContent=Iie+s:a.textContent=_ie+s,a.classList.toggle("ag-value-change-delta-up",o),a.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Ai(this.eDelta)}refresh(e,t=!1){const{value:n,valueFormatted:i}=e,{eValue:s,lastValue:o,beans:a}=this;if(n===o||(Ce(i)?s.textContent=i:Ce(n)?s.textContent=n:Ai(s),a.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;const c=n&&typeof n=="object"&&"toNumber"in n?n.toNumber():n,u=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(c===u)return!1;if(typeof c=="number"&&typeof u=="number"){const h=c-u;this.showDelta(e,h)}return o&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},Oie=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",Vie={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},Nie=class extends At{constructor(){super(Vie),this.eCurrent=De,this.refreshCount=0,this.registerCSS(Oie)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:n}=this,i=an({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=n.textContent,this.getGui().insertBefore(i,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;if(Vt(n)&&(n=""),n===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;const i=this.eCurrent;return Ce(e.valueFormatted)?i.textContent=e.valueFormatted:Ce(e.value)?i.textContent=n:Ai(i),!0}},Bie=class extends oe{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,n=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){const s=this.animations[t];s.delete(e);const o=Date.now(),a=o+n,c=o+n+i,u={phase:"flash",flashEndTime:a,fadeEndTime:c};s.set(e,u);const h=`ag-cell-${t}`,f=`${h}-animation`,{comp:p,eGui:{style:m}}=e;p.toggleCss(h,!0),p.toggleCss(f,!1),m.removeProperty("transition"),m.removeProperty("transition-delay"),this.nextAnimationTime&&a+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),n)}),this.nextAnimationTime=a)}advanceAnimations(){const e=Date.now();let t=null;for(const n of Object.keys(this.animations)){const i=this.animations[n],s=`ag-cell-${n}`,o=`${s}-animation`;for(const[a,c]of i){if(!a.isAlive()||!a.comp){i.delete(a);continue}const{phase:u,flashEndTime:h,fadeEndTime:f}=c,p=u==="flash"?h:f;if(!(e+15>=p)){t=Math.min(p,t??1/0);continue}const{comp:w,eGui:{style:S}}=a;switch(u){case"flash":w.toggleCss(s,!1),w.toggleCss(o,!0),S.transition=`background-color ${f-h}ms`,S.transitionDelay=`${h-e}ms`,t=Math.min(f,t??1/0),c.phase="fade";break;case"fade":w.toggleCss(s,!1),w.toggleCss(o,!1),S.removeProperty("transition"),S.removeProperty("transition-delay"),i.delete(a);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const n=W8(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function Gie(e,t={}){const{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(i=>n.flashCell(i,t))})}var Hie={moduleName:"HighlightChanges",version:ye,beans:[Bie],userComponents:{agAnimateShowChangeCellRenderer:Lie,agAnimateSlideCellRenderer:Nie},apiFunctions:{flashCells:Gie}};function zie(e){return e.stateSvc?.getState()??{}}function Uie(e,t,n){return e.stateSvc?.setState(t,n)}function _P(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=Wie(e)}return e.version=ye,e}function Wie(e){return e.cellSelection=jie(e,"rangeSelection"),e}function jie(e,t){if(e&&typeof e=="object")return e[t]}var $ie=class extends oe{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Hn(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Hn(this,()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},0),this.onRowSelectedDebounced=Hn(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=gn(this.gos);const e=_P(this.gos.get("initialState")??{}),t=e.partialColumnState;delete e.partialColumnState,this.cachedState=e;const n=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,()=>n(()=>this.setupStateOnGridReady(e)));const[i,s,o]=this.addManagedEventListeners({newColumnsLoaded:({source:a})=>{a==="gridInitializing"&&(i(),n(()=>this.setupStateOnColumnsInitialised(e,!!t)))},rowCountReady:()=>{s?.(),n(()=>this.setupStateOnRowCountReady(e))},firstDataRendered:()=>{o?.(),n(()=>this.setupStateOnFirstDataRendered(e))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const n=_P(e);delete n.partialColumnState,this.cachedState=n,this.startSuppressEvents();const i="api",s=t?new Set(t):void 0;this.setGridReadyState(n,i,s),this.setColumnsInitialisedState(n,i,!1,s),this.setRowCountState(n,i,s),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(n,i,s),this.stopSuppressEvents(i)})}setGridReadyState(e,t,n){t==="api"&&!n?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,n,i){this.setColumnState(e,t,n,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const n=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:n("aggregation"),columnMoved:n("columnOrder"),columnPinned:n("columnPinning"),columnResized:n("columnSizing"),columnVisible:n("columnVisibility"),columnPivotChanged:n("pivot"),columnPivotModeChanged:n("pivot"),columnRowGroupChanged:n("rowGroup"),sortChanged:n("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,n){const{filter:i,rowGroupExpansion:s,rowSelection:o,pagination:a}=e,c=(h,f)=>!n?.has(h)&&(f||t==="api");c("filter",i)&&this.setFilterState(i),c("rowGroupExpansion",s)&&this.setRowGroupExpansionState(s,t),c("rowSelection",o)&&this.setRowSelectionState(o,t),c("pagination",a)&&this.setPaginationState(a,t);const u=this.updateCachedState.bind(this);u("filter",this.getFilterState()),u("rowGroupExpansion",this.getRowGroupExpansionState()),u("rowSelection",this.getRowSelectionState()),u("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),n=()=>{this.updateRowGroupExpansionStateTimer=0,t("rowGroupExpansion",this.getRowGroupExpansionState())},i=()=>t("filter",this.getFilterState()),{gos:s,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:i,rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:n,columnRowGroupChanged:n,rowDataUpdated:()=>{(s.get("groupDefaultExpanded")!==0||s.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(n)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&t("pagination",this.getPaginationState())}}),o&&this.addManagedListeners(o,{filterStateChanged:i})}setFirstDataRenderedState(e,t,n){const{scroll:i,cellSelection:s,focusedCell:o,columnOrder:a,rowPinning:c}=e,u=(p,m)=>!n?.has(p)&&(m||t==="api");u("focusedCell",o)&&this.setFocusedCellState(o),u("cellSelection",s)&&this.setCellSelectionState(s),u("scroll",i)&&this.setScrollState(i),u("rowPinning",c)&&this.setRowPinningState(c),this.setColumnPivotState(!!a?.orderedColIds,t);const h=this.updateCachedState.bind(this);h("sideBar",this.getSideBarState()),h("focusedCell",this.getFocusedCellState());const f=this.getRangeSelectionState();h("rangeSelection",f),h("cellSelection",f),h("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this);this.addManagedEventListeners({cellFocused:()=>t("focusedCell",this.getFocusedCellState()),cellSelectionChanged:n=>{if(n.finished){const i=this.getRangeSelectionState();t("rangeSelection",i),t("cellSelection",i)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return WJ(om(e),e.colModel.isPivotMode())}setColumnState(e,t,n,i){const{sort:s,rowGroup:o,aggregation:a,pivot:c,columnPinning:u,columnVisibility:h,columnSizing:f,columnOrder:p}=e,m=(L,O)=>!i?.has(L)&&(O||t==="api"),w={},S=L=>{let O=w[L];return O||(O={colId:L},w[L]=O,O)},E={},T=m("sort",s);T&&s?.sortModel.forEach(({colId:L,sort:O},G)=>{const N=S(L);N.sort=O,N.sortIndex=G}),(T||!n)&&(E.sort=null,E.sortIndex=null);const F=m("rowGroup",o);F&&o?.groupColIds.forEach((L,O)=>{const G=S(L);G.rowGroup=!0,G.rowGroupIndex=O}),(F||!n)&&(E.rowGroup=null,E.rowGroupIndex=null);const P=m("aggregation",a);P&&a?.aggregationModel.forEach(({colId:L,aggFunc:O})=>{S(L).aggFunc=O}),(P||!n)&&(E.aggFunc=null);const M=m("pivot",c);M&&(c?.pivotColIds.forEach((L,O)=>{const G=S(L);G.pivot=!0,G.pivotIndex=O}),this.gos.updateGridOptions({options:{pivotMode:!!c?.pivotMode},source:t})),(M||!n)&&(E.pivot=null,E.pivotIndex=null);const U=m("columnPinning",u);U&&(u?.leftColIds.forEach(L=>{S(L).pinned="left"}),u?.rightColIds.forEach(L=>{S(L).pinned="right"})),(U||!n)&&(E.pinned=null);const z=m("columnVisibility",h);z&&h?.hiddenColIds.forEach(L=>{S(L).hide=!0}),(z||!n)&&(E.hide=null);const j=m("columnSizing",f);j&&f?.columnSizingModel.forEach(({colId:L,flex:O,width:G})=>{const N=S(L);N.flex=O??null,N.width=G}),(j||!n)&&(E.flex=null);const I=p?.orderedColIds,A=!!I?.length&&!i?.has("columnOrder"),_=A?I.map(L=>S(L)):Object.values(w);_.length&&(this.columnStates=_,cs(this.beans,{state:_,applyOrder:A,defaultState:E},t))}setColumnPivotState(e,t){const n=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const s=this.beans,{pivotResultCols:o,colGroupSvc:a}=s;if(o?.isPivotResultColsPresent()){if(n){const c=[];for(const u of n)o.getPivotResultCol(u.colId)&&c.push(u);cs(s,{state:c,applyOrder:e},t)}i&&a?.setColumnGroupState(i,t)}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return jJ(t)}setColumnGroupState(e,t,n){const i=this.beans.colGroupSvc;if(!i||n?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const s=new Set(e.columnGroup?.openColumnGroupIds),a=i.getColumnGroupState().map(({groupId:c})=>{const u=s.has(c);return u&&s.delete(c),{groupId:c,open:u}});s.forEach(c=>{a.push({groupId:c,open:!0})}),a.length&&(this.columnGroupStates=a),i.setColumnGroupState(a,t)}getFilterState(){const e=this.beans.filterManager;let t=e?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const n=e?.getFilterState(),i=e?.getAdvFilterModel()??void 0;return t||i||n?{filterModel:t,columnFilterState:n,advancedFilterModel:i}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:n,columnFilterState:i,advancedFilterModel:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(n!==void 0||i!==void 0)&&t?.setFilterState(n??null,i??null,"columnFilter"),s!==void 0&&t?.setAdvFilterModel(s??null,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map(t=>{const{id:n,type:i,startRow:s,endRow:o,columns:a,startColumn:c}=t;return{id:n,type:i,startRow:s,endRow:o,colIds:a.map(u=>u.getColId()),startColId:c.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:n,colModel:i,visibleCols:s}=this.beans;if(!jr(t)||!n)return;const o=[];e?.cellRanges.forEach(a=>{const c=[];if(a.colIds.forEach(h=>{const f=i.getCol(h);f&&c.push(f)}),!c.length)return;let u=i.getCol(a.startColId);if(!u){const h=s.allCols,f=new Set(c);u=h.find(p=>f.has(p))}o.push({...a,columns:c,startColumn:u})}),n.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:n}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:s,animationFrameSvc:o,ctrlsSvc:a}=this.beans;i.wrapIncoming(()=>{a.get("center").setCenterViewportScrollLeft(n),a.getScrollFeature()?.setVerticalScrollPosition(t),s.redraw({afterScroll:!0}),o?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:n}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:i,rowIndex:s,rowPinned:o}=e;t.setFocusedCell({column:n.getCol(i),rowIndex:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const n=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!i))return{page:n,pageSize:i}}setPaginationState(e,t){const{pagination:n,gos:i}=this.beans;if(!n)return;const{pageSize:s,page:o}=e??{page:0,pageSize:i.get("paginationPageSize")},a=t==="gridInitializing";s&&!i.get("paginationAutoPageSize")&&n.setPageSize(s,a?"initialState":"pageSizeSelector"),typeof o=="number"&&(a?n.setPage(o):n.goToPage(o))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const n=[];return t.forEachNode(({expanded:i,id:s})=>{i&&s&&n.push(s)}),n.length?{expandedRowGroupIds:n}:void 0}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t){const n=this.beans.expansionSvc;if(!n)return;const i=e?.expandedRowGroupIds??[];let s;if(t==="api"){const o=this.getRowGroupExpansionState()?.expandedRowGroupIds;if(o?.length){const a=new Set(o);for(const c of i)a.delete(c);s=Array.from(a)}}n.expandRows(i,s)}updateColumnState(e){const t=this.getColumnState();let n=!1;const i=this.cachedState;for(const s of Object.keys(t)){const o=t[s];xh(o,i[s])||(n=!0)}this.cachedState={...i,...t},n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const n=this.cachedState[e];this.setCachedStateValue(e,t),xh(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;e.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},qie={moduleName:"GridState",version:ye,beans:[$ie],apiFunctions:{getState:zie,setState:Uie}};function Kie(e){return e.rowModel.isLastRowIndexKnown()}function Yie(e){return e.pagination?.getPageSize()??100}function Qie(e){return e.pagination?.getCurrentPage()??0}function Xie(e){return e.pagination?.getTotalPages()??1}function Zie(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function Jie(e){e.pagination?.goToNextPage()}function ese(e){e.pagination?.goToPreviousPage()}function tse(e){e.pagination?.goToFirstPage()}function nse(e){e.pagination?.goToLastPage()}function ise(e,t){e.pagination?.goToPage(t)}var sse=class extends oe{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,n=()=>{const i=Math.max(el(t),1),s=Math.floor(e/i);t.pagination.setPageSize(s,"autoCalculated")};this.isBodyRendered?Hn(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Vd="paginationPageSizeSelector",ose={tag:"span",cls:"ag-paging-page-size"},rse=class extends At{constructor(){super(ose),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Vd,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Ai(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Vd)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){const s=this.gos.exists("paginationPageSize"),o=this.gos.get(Vd)!==!0;ge(94,{pageSizeSet:s,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||ge(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Vd}),e.unshift("")}const i=String(n?"":t);this.selectPageSizeComp?(bl(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),s=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new rE).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Vd);return!Array.isArray(t)||!t?.length?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},ase={selector:"AG-PAGE-SIZE-SELECTOR",component:rse},lse=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",cse=class extends MK{constructor(){super(),this.btFirst=De,this.btPrevious=De,this.btNext=De,this.btLast=De,this.lbRecordCount=De,this.lbFirstRowOnPage=De,this.lbLastRowOnPage=De,this.lbCurrent=De,this.lbTotal=De,this.pageSizeComp=De,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(lse)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[ase]);const{btFirst:t,btPrevious:n,btNext:i,btLast:s}=this;this.activateTabIndex([t,n,i,s]),t.insertAdjacentElement("afterbegin",Yi(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",Yi(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",Yi(e?"previous":"next",this.beans)),s.insertAdjacentElement("afterbegin",Yi(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):f$(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===Z.ENTER||i.key===Z.SPACE)&&(i.preventDefault(),n())}})}),h$(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):JJ(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){Pj(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=e?n:null,s=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let a,c;this.isZeroPagesToDisplay()?a=c=0:(a=o*s+1,c=a+o-1,e&&c>i&&(c=i));const u=a+o-1,h=!e&&n<u,f=this.formatNumber(a);this.lbFirstRowOnPage.textContent=f;let p;const m=this.getLocaleTextFunc();h?p=m("pageLastRowUnknown","?"):p=this.formatNumber(c),this.lbLastRowOnPage.textContent=p;const S=t>0?s+1:0,E=this.formatNumber(S);this.lbCurrent.textContent=E;let T,F;if(e)T=this.formatNumber(t),F=this.formatNumber(i);else{const P=m("more","more");T=P,F=P}this.lbTotal.textContent=T,this.lbRecordCount.textContent=F,this.announceAriaStatus(f,p,F,E,T)}announceAriaStatus(e,t,n,i,s){const o=this.getLocaleTextFunc(),a=o("page","Page"),c=o("to","to"),u=o("of","of"),h=`${e} ${c} ${t} ${u} ${n}`,f=`${a} ${i} ${u} ${s}`;h!==this.ariaRowStatus&&(this.ariaRowStatus=h,this.ariaAnnounce?.announceValue(h,"paginationRow")),f!==this.ariaPageStatus&&(this.ariaPageStatus=f,this.ariaAnnounce?.announceValue(f,"paginationPage"))}},use={selector:"AG-PAGINATION",component:cse},dse=class extends oe{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return use}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:n}=this.beans;n?.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Ce(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Ce(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Ce(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Ce(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const n=this.pageSize,i=t-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();const s=this.currentPage,o=n*s;let a=n*(s+1)-1;if(a>i&&(a=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),a===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const c=e.getTopLevelRowDisplayedIndex(a+1);this.bottomDisplayedRowIndex=c-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:n}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},hse={moduleName:"Pagination",version:ye,beans:[dse,sse],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:Kie,paginationGetPageSize:Yie,paginationGetCurrentPage:Qie,paginationGetTotalPages:Xie,paginationGetRowCount:Zie,paginationGoToNextPage:Jie,paginationGoToPreviousPage:ese,paginationGoToFirstPage:tse,paginationGoToLastPage:nse,paginationGoToPage:ise},dependsOn:[iC]};function fse(e,t={}){const n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function oV(e,t,n,i,s){t&&(i&&t.parent&&t.parent.level!==-1&&oV(e,t.parent,n,i,s),t.setExpanded(n,void 0,s))}function gse(e,t){return e.rowModel.getRowNode(t)}function pse(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function mse(e){return e.rowRenderer.getRenderedNodes()}function Cse(e,t,n){e.rowModel.forEachNode(t,n)}function vse(e){return e.rowRenderer.firstRenderedRow}function yse(e){return e.rowRenderer.lastRenderedRow}function wse(e,t){return e.rowModel.getRow(t)}function Sse(e){return e.rowModel.getRowCount()}var bse={moduleName:"RowApi",version:ye,apiFunctions:{redrawRows:fse,setRowNodeExpanded:oV,getRowNode:gse,addRenderedRowListener:pse,getRenderedNodes:mse,forEachNode:Cse,getFirstDisplayedRowIndex:vse,getLastDisplayedRowIndex:yse,getDisplayedRowAtIndex:wse,getDisplayedRowCount:Sse}},Rse={moduleName:"ScrollApi",version:ye,apiFunctions:{getVerticalPixelRange:jte,getHorizontalPixelRange:$te,ensureColumnVisible:QO,ensureIndexVisible:XO,ensureNodeVisible:qte}};function Ese(e,t,n){if(!t)return;const i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,s=`aria-${t}`;n===null?i.removeAttribute(s):i.setAttribute(s,n)}function Tse(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function xse(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function Dse(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function Ase(e){e.animationFrameSvc?.flushAllFrames()}function Fse(e){return{rowHeight:el(e),headerHeight:af(e)}}function Pse(e,t={}){const n=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(o=>{const a=o.getCellRenderer();a!=null&&n.push(Ih(a))}),t.columns?.length)return n;const i=[],s=XS(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(o=>{if(s&&!ZS(o.rowNode,s)||!o.isFullWidth())return;const a=o.getFullWidthCellRenderers();for(let c=0;c<a.length;c++){const u=a[c];u!=null&&i.push(Ih(u))}}),[...i,...n]}var Mse={moduleName:"RenderApi",version:ye,apiFunctions:{setGridAriaProperty:Ese,refreshCells:Tse,refreshHeader:xse,isAnimationFrameQueueEmpty:Dse,flushAllAnimationFrames:Ase,getSizesForCurrentTheme:Fse,getCellRendererInstances:Pse}};function Ise(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function rV({colAutosize:e,visibleCols:t},n,i){Array.isArray(n)?e?.autoSizeCols({colKeys:n,skipHeader:i,source:"api"}):e?.autoSizeCols({colKeys:n.colIds??t.allCols,skipHeader:n.skipHeader,defaultMaxWidth:n.defaultMaxWidth,defaultMinWidth:n.defaultMinWidth,columnLimits:n.columnLimits,source:"api"})}function _se(e,t){t&&typeof t=="object"?rV(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var kse=class extends oe{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:s,defaultMaxWidth:o,defaultMinWidth:a,columnLimits:c=[],source:u="api"}=e,{animationFrameSvc:h,renderStatus:f,colModel:p,autoWidthCalc:m,visibleCols:w}=this.beans;if(h?.flushAllFrames(),this.timesDelayed<5&&f&&!f.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});return}this.timesDelayed=0;const S=[];let E=-1;const T=Object.fromEntries(c.map(({colId:M,maxWidth:U,minWidth:z})=>[M,{maxWidth:U,minWidth:z}])),F=n??this.gos.get("skipHeaderOnAutoSize"),P=i??F;for(;E!==0;){E=0;const M=[];t.forEach(U=>{if(!U||P7(U))return;const z=p.getCol(U);if(!z||S.indexOf(z)>=0)return;const j=m.getPreferredWidthForColumn(z,F);if(j>0){const I=T[z.colId]??{};I.minWidth??(I.minWidth=a),I.maxWidth??(I.maxWidth=o);const A=Lse(z,j,I);z.setActualWidth(A,u),S.push(z),E++}M.push(z)}),M.length&&w.refresh(u)}P||this.autoSizeColumnGroupsByColumns(t,u,s),ru(this.eventSvc,S,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){const{colModel:i,ctrlsSvc:s}=this.beans,o=new Set;i.getColsForKeys(e).forEach(h=>{let f=h.getParent();for(;f&&f!=n;)f.isPadding()||o.add(f),f=f.getParent()});let c;const u=[];for(const h of o){for(const f of s.getHeaderRowContainerCtrls())if(c=f.getHeaderCtrlForColumn(h),c)break;c&&c.resizeLeafColumnsToFit(t)}return u}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}const t=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:t,...e})}addColumnAutosize(e,t){const n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",i);const s=new Oa(e);return s.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}}addColumnGroupResize(e,t,n){const i=this.gos.get("skipHeaderOnAutoSize"),s=()=>{const o=[];t.getDisplayedLeafColumns().forEach(c=>{c.getColDef().suppressAutoSize||o.push(c.getColId())}),o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",s),()=>e.removeEventListener("dblclick",s)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:n,scrollVisibleSvc:i}=this.beans,s=n.getGridBodyCtrl(),a=s.isVerticalScrollShowing()?i.getScrollbarWidth():0,u=Fh(s.eGridBody)-a;if(u>0){this.sizeColumnsToFit(u,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):ge(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}const s={};i&&i?.columnLimits?.forEach(({key:w,...S})=>{s[typeof w=="string"?w:w.getColId()]=S});const o=this.beans.visibleCols.allCols;if(e<=0||!o.length||e===xo(o)&&o.every(S=>{if(S.colDef.suppressSizeToFit)return!0;const E=s?.[S.getId()],T=E?.minWidth??i?.defaultMinWidth,F=E?.maxWidth??i?.defaultMaxWidth,P=S.getActualWidth();return(T==null||P>=T)&&(F==null||P<=F)}))return;const c=[],u=[];o.forEach(w=>{w.getColDef().suppressSizeToFit===!0?u.push(w):c.push(w)});const h=c.slice(0);let f=!1;const p=w=>{Ji(c,w),u.push(w)};for(c.forEach(w=>{w.resetActualWidth(t);const S=s?.[w.getId()],E=S?.minWidth??i?.defaultMinWidth,T=S?.maxWidth??i?.defaultMaxWidth,F=w.getActualWidth();typeof E=="number"&&F<E?w.setActualWidth(E,t,!0):typeof T=="number"&&F>T&&w.setActualWidth(T,t,!0)});!f;){f=!0;const w=e-xo(u);if(w<=0)c.forEach(S=>{const E=s?.[S.getId()]?.minWidth??i?.defaultMinWidth;if(typeof E=="number"){S.setActualWidth(E,t,!0);return}S.setActualWidth(S.minWidth,t)});else{const S=w/xo(c);let E=w;for(let T=c.length-1;T>=0;T--){const F=c[T],P=s?.[F.getId()],M=P?.minWidth??i?.defaultMinWidth,U=P?.maxWidth??i?.defaultMaxWidth,z=F.getMinWidth(),j=F.getMaxWidth(),I=typeof M=="number"&&M>z?M:z,A=typeof U=="number"&&U<j?U:j;let _=Math.round(F.getActualWidth()*S);_<I?(_=I,p(F),f=!1):_>A?(_=A,p(F),f=!1):T===0&&(_=E),F.setActualWidth(_,t,!0),E-=_}}}h.forEach(w=>{w.fireColumnWidthChangedEvent(t)});const m=this.beans.visibleCols;m.setLeftValues(t),m.updateBodyWidths(),!n&&ru(this.eventSvc,h,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:s}=e,o=n?.map(({colId:a,minWidth:c,maxWidth:u})=>({key:a,minWidth:c,maxWidth:u}));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;const{colIds:t,skipHeader:n,defaultMaxWidth:i,defaultMinWidth:s,columnLimits:o}=e;setTimeout(()=>{const a={skipHeader:n,source:"autosizeColumns",defaultMaxWidth:i,defaultMinWidth:s,columnLimits:o};t?this.autoSizeCols({colKeys:t,...a}):this.autoSizeAllColumns(a)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function Lse(e,t,n={}){const i=n.minWidth??e.getMinWidth();t<i&&(t=i);const s=n.maxWidth??e.getMaxWidth();return t>s&&(t=s),t}var Ose={moduleName:"ColumnAutoSize",version:ye,beans:[kse],apiFunctions:{sizeColumnsToFit:Ise,autoSizeColumns:rV,autoSizeAllColumns:_se},dependsOn:[aO]},Vse=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function Nse(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function Bse(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function Gse(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function Hse(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function zse(e,t,n){return e.pinnedRowModel?.forEachPinnedRow(t,n)}var Use={moduleName:"PinnedRow",version:ye,beans:[dK],css:[Vse],apiFunctions:{getPinnedTopRowCount:Nse,getPinnedBottomRowCount:Bse,getPinnedTopRow:Gse,getPinnedBottomRow:Hse,forEachPinnedRow:zse},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},Wse=class extends $c{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,i,s,o,a){this.eWrapper=n,super.setComp(e,t,n,i,s,o,a),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){this.rowNode.rowIndex!=null&&pk(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){kj(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(Xm(t)){this.focusedCellPosition=void 0;return}const n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},jse=class extends fm{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(e=>e.refreshAriaRowIndex())}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new Wse(t,this,this.beans)}isCorrectCtrlForSpan(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},$se=class extends oe{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,n=`${e}Ctrls`,i=this[n],s=i.size,o=this.getAllRelevantRowControls(e),a=new Map;let c=!1;for(const h of o)h.isAlive()&&t?.forEachSpannedColumn(h.rowNode,(f,p)=>{if(a.has(p.firstNode))return;const m=i.get(p.firstNode);if(m){a.set(p.firstNode,m),i.delete(p.firstNode);return}c=!0;const w=new jse(p.firstNode,this.beans,!1,!1,!1);a.set(p.firstNode,w)});this[n]=a;const u=a.size===s;if(!(!c&&u)){for(const h of i.values())h.destroyFirstPass(!0),h.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,n=t?.getCellSpanByPosition(e);if(!n)return;const i=`${aV(e.rowPinned)}Ctrls`,s=this[i].get(n.firstNode);if(s)return s.getAllCellCtrls().find(o=>o.column===e.column)}getCtrls(e){const t=`${e}Ctrls`;return[...this[t].values()]}destroyRowCtrls(e){const t=`${e}Ctrls`;for(const n of this[t].values())n.destroyFirstPass(!0),n.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},aV=e=>e??"center",qse=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;return this.spannedNodes.forEach(n=>{n!==this.lastNode&&(t+=n.rowHeight)}),e-t}},Kse=class extends oe{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:n,pinnedRowModel:i,rowModel:s,valueSvc:o,pagination:a}}=this,{colDef:c}=t,u=this[`${e}ValueNodeMap`],h=new Map,f=n.getCallback("isFullWidthRow"),p=c.equals,m=c.spanRows,w=typeof m=="function";let S=null,E=null,T;const F=(M,U)=>{S=M,E=null,T=U},P=M=>{const U=!M.isExpandable()&&!M.group&&!M.detail&&(f?!f({rowNode:M}):!0);if(M.rowIndex==null||!U){F(null,null);return}if(S==null||M.level!==S.level||M.footer||E&&M.rowIndex-1!==E?.getLastNode().rowIndex){F(M,o.getValue(t,M));return}const z=o.getValue(t,M);if(w){const j=Pe(n,{valueA:T,nodeA:S,valueB:z,nodeB:M,column:t,colDef:c});if(!m(j)){F(M,z);return}}else if(p?!p(T,z):T!==z){F(M,z);return}if(!E){const j=u?.get(S);j?.firstNode===S?(j.reset(),E=j):E=new qse(t,S),h.set(S,E)}E.addSpannedNode(M),h.set(M,E)};switch(e){case"center":s.forEachDisplayedNode?.(M=>{(!a||a.isRowInPage(M.rowIndex))&&P(M)});break;case"top":i?.forEachPinnedRow("top",P);break;case"bottom":i?.forEachPinnedRow("bottom",P);break}this[`${e}ValueNodeMap`]=h}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${aV(e.rowPinned)}ValueNodeMap`].get(e)}},Yse=class extends oe{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Hn(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Hn(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const n=this.createManagedBean(new Kse(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:n}=this.beans,i=e.column,s=e.rowIndex,o=this.spanningColumns.get(i);if(!o)return;let a;switch(e.rowPinned){case"top":a=t?.getPinnedTopRow(s);break;case"bottom":a=t?.getPinnedBottomRow(s);break;default:a=n.getRow(s)}if(a)return o.getCellSpan(a)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[n,i]of this.spanningColumns)if(i.isCellSpanning(e)){const s=i.getCellSpan(e);t(n,s)}}destroy(){super.destroy(),this.spanningColumns.clear()}},Qse={moduleName:"CellSpan",version:ye,beans:[Yse,$se]},Xse=class extends oe{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,n=e.colDef,i=n.cellClassRules,s=this.getCellClassParams(e,n);XR(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,s,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=i}applyUserStyles(){const e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let i;if(typeof n=="function"){const s=this.getCellClassParams(e,t);i=n(s)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,n=e.colDef,i=this.getCellClassParams(e,n);this.staticClasses.forEach(o=>t.toggleCss(o,!1));const s=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=s,s.forEach(o=>t.toggleCss(o,!0))}getCellClassParams(e,t){const{value:n,rowNode:i}=this.cellCtrl;return Pe(this.beans.gos,{value:n,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},Zse=class extends oe{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,i){XR(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){const{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e,t){return new Xse(e,t)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(s=>{n(s)})}},Jse={moduleName:"CellStyle",version:ye,beans:[Zse]},eoe={moduleName:"RowStyle",version:ye,beans:[sq]};function toe(e,t){return!!e.colHover?.isHovered(t)}var noe=class extends oe{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=n=>{const{beans:i,gos:s,element:o,columns:a}=this,c=i.colHover;n??!!s.get("columnHoverHighlight")?this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:c.setMouseOver.bind(c,a),mouseout:c.clearMouseOver.bind(c)}):(this.destroyManagedListeners.forEach(h=>h()),this.destroyManagedListeners=[])}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},ioe="ag-column-hover",soe=class extends oe{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){const i=()=>{const s=this.isHovered(n);t.toggleCss("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;const n=this.isHovered(e);t.toggleCss(ioe,n)}addHeaderFilterColumnHoverListener(e,t,n,i){this.createHoverFeature(e,[n],i);const s=()=>{const o=this.isHovered(n);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:s}),s()}createHoverFeature(e,t,n){e.createManagedBean(new noe(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},ooe={moduleName:"ColumnHover",version:ye,beans:[soe],apiFunctions:{isColumnHovered:toe}},roe=class extends oe{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addEventListener(e,t){const n=this.wrapSvc?.wrap(e,t)??t,i=!yp.has(e),s=i?this.asyncListeners:this.syncListeners;s.has(e)||s.set(e,new Set),s.get(e).add(n),this.eventSvc.addEventListener(e,n,i)}removeEventListener(e,t){const n=this.wrapSvc?.unwrap(e,t)??t,s=!!this.asyncListeners.get(e)?.delete(n);s||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeEventListener(e,n,s)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,n=(o,a)=>{yp.has(o)&&t(o,a)},i=(o,a)=>{yp.has(o)||t(o,a)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:i});const s=this.eventSvc;s.addGlobalListener(n,!1),s.addGlobalListener(i,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:n,globalListenerPairs:i}=this,s=n?.unwrapGlobal(e)??e;if(i.has(s)){const{syncListener:a,asyncListener:c}=i.get(s);t.removeGlobalListener(a,!1),t.removeGlobalListener(c,!0),i.delete(e)}else this.syncGlobalListeners.delete(s),t.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(s=>this.eventSvc.removeEventListener(i,s,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventSvc.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:i})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function aoe(e,t,n){e.apiEventSvc?.addEventListener(t,n)}function loe(e,t,n){e.apiEventSvc?.removeEventListener(t,n)}function coe(e,t){e.apiEventSvc?.addGlobalListener(t)}function uoe(e,t){e.apiEventSvc?.removeGlobalListener(t)}var doe={moduleName:"EventApi",version:ye,apiFunctions:{addEventListener:aoe,addGlobalListener:coe,removeEventListener:loe,removeGlobalListener:uoe},beans:[roe]},hoe={moduleName:"Locale",version:ye,beans:[UJ]},foe=class extends oe{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Hn(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:n,pinnedRowModel:i}=this.beans,s=e.autoHeightCols;let o=!1;const a=c=>{const u=c.__autoHeights;let h=Wr(this.beans,c).height;for(const f of s){let p=u?.[f.getColId()];const m=n?.getCellSpan(f,c);if(m){if(m.getLastNode()!==c)continue;if(p=n?.getCellSpan(f,c)?.getLastNodeAutoHeight(),!p)return}if(p==null){if(this.colSpanSkipCell(f,c))continue;return}h=Math.max(p,h)}h!==c.rowHeight&&(c.setRowHeight(h),o=!0)};i?.forEachPinnedRow?.("top",a),i?.forEachPinnedRow?.("bottom",a),t.forEachDisplayedNode?.(a),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,n){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}const i=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:n,colViewport:i,visibleCols:s}=this.beans;if(!n.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=s.getLeftColsForRow(t);break;case"right":o=s.getRightColsForRow(t);break;case null:o=i.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const i=t.parentElement,{rowNode:s,column:o}=e,a=this.beans,c=f=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!n.isAlive())return;const{paddingTop:p,paddingBottom:m,borderBottomWidth:w,borderTopWidth:S}=yl(i),E=p+m+w+S,F=t.offsetHeight+E;if(f<5){const P=Mn(a),M=!P||!P.contains(t),U=F==0;if(M||U){window.setTimeout(()=>c(f+1),0);return}}this.setRowAutoHeight(s,F,o)},u=()=>c(0);u();const h=Wo(a,t,u);return n.addDestroyFunc(()=>{h(),this.setRowAutoHeight(s,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:n}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(n).filter(s=>s.isAutoHeight())),t.length!==0){if(!n.__autoHeights)return!1;for(const i of t){const s=n.__autoHeights[i.getColId()];if(!s||n.rowHeight<s)return!1}}return!0}},goe={moduleName:"RowAutoHeight",version:ye,beans:[foe]},poe={moduleName:"AllCommunity",version:ye,dependsOn:[fie,Sie,Mie,gee,vne,yne,wne,Sne,bne,Rne,Ene,Cne,Cte,vte,yte,mte,Ste,bte,qie,Yne,hse,lO,bse,Rse,Mse,Ose,dY,Use,Bne,TJ,Jse,ooe,eoe,doe,AJ,Hie,YO,hoe,goe,uY,gie,Qse]},Xn=ae.createContext({}),lV=ae.createContext("default"),lf=(e,t,n,i)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let a,c,u=!1;return o.then(h=>{if(u){t.destroyBean(h);return}a=h,c=a.getGui(),n.appendChild(c),kP(i,a)}),()=>{u=!0,a&&(c?.parentElement?.removeChild(c),t.destroyBean(a),i&&kP(i,void 0))}},kP=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const n=e;n.current=t}},$i=(...e)=>e.filter(n=>n!=null&&n!=="").join(" "),Qi=class cV{constructor(...t){this.classesMap={},t.forEach(n=>{this.classesMap[n]=!0})}setClass(t,n){if(!!this.classesMap[t]==n)return this;const s=new cV;return s.classesMap={...this.classesMap},s.classesMap[t]=n,s}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},Tu=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,n=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===n()},nb=ae.version?.split(".")[0],uV=nb==="16"||nb==="17";function moe(){return nb==="19"}var wp=!1;function Coe(e){return wp||setTimeout(()=>wp=!1,0),wp=!0,e()}var Bh=(e,t)=>{!uV&&e&&!wp?Ba.flushSync(t):t()},voe=e=>{uV?e():ae.startTransition(e)};function yoe(e,t,n){return ae.useSyncExternalStore?ae.useSyncExternalStore(e,t):n}function Cm(e,t,n){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(n||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const i=[],s=[],o=new Map,a=new Map;for(let c=0;c<t.length;c++){const u=t[c];a.set(u.instanceId,u)}for(let c=0;c<e.length;c++){const u=e[c];o.set(u.instanceId,u),a.has(u.instanceId)&&i.push(u)}for(let c=0;c<t.length;c++){const u=t[c],h=u.instanceId;o.has(h)||s.push(u)}return i.length===e.length&&s.length===0?e:i.length===0&&s.length===t.length?t:i.length===0?s:s.length===0?i:[...i,...s]}var dV=R.forwardRef((e,t)=>{const{registry:n,context:i}=R.useContext(Xn),s=R.useRef(null),o=R.useRef(null),a=R.useRef(null),c=R.useRef(null),u=R.useRef(null),h=R.useRef(),[f,p]=R.useState(),[m,w]=R.useState(),[S,E]=R.useState(),[T,F]=R.useState(()=>new Qi),[P,M]=R.useState(()=>new Qi("ag-hidden")),[U,z]=R.useState(()=>new Qi("ag-hidden")),[j,I]=R.useState(()=>new Qi("ag-invisible"));R.useImperativeHandle(t,()=>({refresh(){return!1}})),R.useLayoutEffect(()=>lf(f,i,o.current),[f]);const A=R.useCallback(ie=>{if(s.current=ie,!ie){h.current=i.destroyBean(h.current);return}const se={setInnerRenderer:(H,ee)=>{p(H),E(ee)},setChildCount:H=>w(H),toggleCss:(H,ee)=>F(le=>le.setClass(H,ee)),setContractedDisplayed:H=>z(ee=>ee.setClass("ag-hidden",!H)),setExpandedDisplayed:H=>M(ee=>ee.setClass("ag-hidden",!H)),setCheckboxVisible:H=>I(ee=>ee.setClass("ag-invisible",!H)),setCheckboxSpacing:H=>I(ee=>ee.setClass("ag-group-checkbox-spacing",H))},we=n.createDynamicBean("groupCellRendererCtrl",!0);we&&(h.current=i.createBean(we),h.current.init(se,ie,a.current,c.current,u.current,dV,e))},[]),_=R.useMemo(()=>`ag-cell-wrapper ${T.toString()}`,[T]),L=R.useMemo(()=>`ag-group-expanded ${P.toString()}`,[P]),O=R.useMemo(()=>`ag-group-contracted ${U.toString()}`,[U]),G=R.useMemo(()=>`ag-group-checkbox ${j.toString()}`,[j]),N=f?.componentFromFramework,Re=N?f.componentClass:void 0,pe=f==null&&S!=null,K=bu(S);return ae.createElement("span",{className:_,ref:A,...e.colDef?{}:{role:h.current?.getCellAriaRole()}},ae.createElement("span",{className:L,ref:c}),ae.createElement("span",{className:O,ref:u}),ae.createElement("span",{className:G,ref:a}),ae.createElement("span",{className:"ag-group-value",ref:o},pe?K:N?ae.createElement(Re,{...f.params}):null),ae.createElement("span",{className:"ag-group-child-count"},m))}),LP=dV,vE=R.createContext({setMethods:()=>{}}),woe=e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:i,setMethods:s}=e,[{key:o,...a},c]=R.useState(t);return R.useEffect(()=>{n(u=>c(u))},[]),ae.createElement(vE.Provider,{value:{setMethods:s}},ae.createElement(i,{key:o,...a}))},Soe=R.memo(woe),boe=0;function OP(){return`agPortalKey_${++boe}`}var hV=class{constructor(e,t,n,i){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!i,this.statelessComponent=this.isStateless(this.reactComponent),this.key=OP(),this.portalKey=OP(),this.instanceCreated=this.isStatelessComponent()?it.resolve(!1):new it(s=>{this.resolveInstanceCreated=s})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n){setTimeout(()=>this.callMethod(e,t));return}const i=n[e];if(i)return i.apply(n,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new it(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=sb.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return R.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function rC(e,t,n){e.forEach(i=>{const s=t[i];s&&(n[i]=s)})}var Fi=class extends hV{constructor(){super(...arguments),this.awaitUpdateCallback=new it(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Soe}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new it(i=>{setTimeout(()=>{i()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,rC(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new it(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Roe=class extends Fi{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Eoe=class extends Fi{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Toe=class extends Fi{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:i}=this;return e.label=t,e.icon=n,e.shake=i,e}},xoe=class extends Fi{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new it(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new it(n=>{this.resolveFilterPassCallback=n});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Doe=class extends Fi{constructor(){super(...arguments),this.awaitSetMethodsCallback=new it(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function fV(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||it.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Aoe=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){rC(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),fV(this.floatingFilterParams,e)}},Foe=class extends Fi{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),fV(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Poe=class extends Fi{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Moe=class extends Fi{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ioe=class extends Fi{refresh(e){this.sourceParams=e,this.refreshProps()}},_oe=class extends Fi{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},koe=class extends Fi{refresh(e){this.sourceParams=e,this.refreshProps()}},Loe=class extends Fi{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ooe=class extends Fi{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function yE(){ge(231)}var Voe=1e3,Noe=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||Voe}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Bh(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},Boe=({ctrl:e})=>{const t=e.isAlive(),{context:n}=R.useContext(Xn),i=t?e.column.getColId():void 0,[s,o]=R.useState(),[a,c]=R.useState(),u=R.useRef(),h=R.useRef(null),f=R.useRef(null),p=R.useRef(null),m=R.useRef(),w=R.useRef();t&&!w.current&&(w.current=new sf(()=>h.current));const S=R.useCallback(P=>{if(h.current=P,u.current=P?n.createBean(new Ru):n.destroyBean(u.current),!P||!e.isAlive())return;const M=()=>{const z=e.getSelectAllGui();z&&(f.current?.insertAdjacentElement("afterend",z),u.current.addDestroyFunc(()=>z.remove()))},U={setWidth:z=>{h.current&&(h.current.style.width=z)},toggleCss:(z,j)=>w.current.toggleCss(z,j),setUserStyles:z=>c(z),setAriaSort:z=>{h.current&&(z?Vj(h.current,z):Nj(h.current))},setUserCompDetails:z=>o(z),getUserCompInstance:()=>m.current||void 0,refreshSelectAllGui:M,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(U,P,f.current,p.current,u.current),M()},[]);R.useLayoutEffect(()=>lf(s,n,p.current,m),[s]),R.useEffect(()=>{e.setDragSource(h.current)},[s]);const E=R.useMemo(()=>!!(s?.componentFromFramework&&Tu(s.componentClass)),[s]),T=s?.componentFromFramework,F=s?.componentClass;return ae.createElement("div",{ref:S,style:a,className:"ag-header-cell","col-id":i,role:"columnheader"},ae.createElement("div",{ref:f,className:"ag-header-cell-resize",role:"presentation"}),ae.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},T?E?ae.createElement(F,{...s.params}):ae.createElement(F,{...s.params,ref:m}):null))},Goe=R.memo(Boe),Hoe=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){rC(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},zoe=({ctrl:e})=>{const{context:t,gos:n}=R.useContext(Xn),[i,s]=R.useState(),[o,a]=R.useState(()=>new Qi("ag-header-cell","ag-floating-filter")),[c,u]=R.useState(()=>new Qi),[h,f]=R.useState(()=>new Qi("ag-floating-filter-button","ag-hidden")),[p,m]=R.useState("false"),[w,S]=R.useState(),[,E]=R.useState(1),T=R.useRef(),F=R.useRef(null),P=R.useRef(null),M=R.useRef(null),U=R.useRef(null),z=R.useRef(),j=R.useRef(),I=H=>{H!=null&&z.current&&z.current(H)},A=R.useCallback(H=>{if(F.current=H,T.current=H?t.createBean(new Ru):t.destroyBean(T.current),!H)return;j.current=new it(le=>{z.current=le});const ee={toggleCss:(le,ne)=>a(me=>me.setClass(le,ne)),setUserStyles:le=>s(le),addOrRemoveBodyCssClass:(le,ne)=>u(me=>me.setClass(le,ne)),setButtonWrapperDisplayed:le=>{f(ne=>ne.setClass("ag-hidden",!le)),m(le?"false":"true")},setWidth:le=>{F.current&&(F.current.style.width=le)},setCompDetails:le=>S(le),getFloatingFilterComp:()=>j.current?j.current:null,setMenuIcon:le=>U.current?.appendChild(le)};e.setComp(ee,H,U.current,P.current,T.current)},[]);R.useLayoutEffect(()=>lf(w,t,P.current,I),[w]);const _=R.useMemo(()=>o.toString(),[o]),L=R.useMemo(()=>c.toString(),[c]),O=R.useMemo(()=>h.toString(),[h]),G=R.useMemo(()=>!!(w&&w.componentFromFramework&&Tu(w.componentClass)),[w]),N=R.useMemo(()=>n.get("reactiveCustomComponents"),[]),Re=R.useMemo(()=>n.get("enableFilterHandlers"),[]),[pe,K]=R.useState();R.useEffect(()=>{if(w?.componentFromFramework)if(N){const H=Re?Hoe:Aoe,ee=new H(w.params,()=>E(le=>le+1));I(ee),K(ee)}else yE()},[w]);const ie=pe?.getProps(),se=w?.componentFromFramework,we=w?.componentClass;return ae.createElement("div",{ref:A,style:i,className:_,role:"gridcell"},ae.createElement("div",{ref:P,className:L,role:"presentation"},se?N?ie&&ae.createElement(vE.Provider,{value:{setMethods:H=>pe.setMethods(H)}},ae.createElement(we,{...ie})):ae.createElement(we,{...w.params,ref:G?()=>{}:I}):null),ae.createElement("div",{ref:M,"aria-hidden":p,className:O,role:"presentation"},ae.createElement("button",{ref:U,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Uoe=R.memo(zoe),Woe=({ctrl:e})=>{const{context:t}=R.useContext(Xn),[n,i]=R.useState(),[s,o]=R.useState(()=>new Qi),[a,c]=R.useState(()=>new Qi),[u,h]=R.useState("false"),[f,p]=R.useState(),[m,w]=R.useState(),S=R.useMemo(()=>e.column.getUniqueId(),[]),E=R.useRef(),T=R.useRef(null),F=R.useRef(null),P=R.useRef(null),M=R.useRef(),U=R.useCallback(L=>{if(T.current=L,E.current=L?t.createBean(new Ru):t.destroyBean(E.current),!L)return;const O={setWidth:G=>{T.current&&(T.current.style.width=G)},toggleCss:(G,N)=>o(Re=>Re.setClass(G,N)),setUserStyles:G=>i(G),setHeaderWrapperHidden:G=>{const N=P.current;N&&(G?N.style.setProperty("display","none"):N.style.removeProperty("display"))},setHeaderWrapperMaxHeight:G=>{const N=P.current;N&&(G!=null?N.style.setProperty("max-height",`${G}px`):N.style.removeProperty("max-height"),N.classList.toggle("ag-header-cell-comp-wrapper-limited-height",G!=null))},setUserCompDetails:G=>w(G),setResizableDisplayed:G=>{c(N=>N.setClass("ag-hidden",!G)),h(G?"false":"true")},setAriaExpanded:G=>p(G),getUserCompInstance:()=>M.current||void 0};e.setComp(O,L,F.current,P.current,E.current)},[]);R.useLayoutEffect(()=>lf(m,t,P.current),[m]),R.useEffect(()=>{T.current&&e.setDragSource(T.current)},[m]);const z=R.useMemo(()=>!!(m?.componentFromFramework&&Tu(m.componentClass)),[m]),j=R.useMemo(()=>"ag-header-group-cell "+s.toString(),[s]),I=R.useMemo(()=>"ag-header-cell-resize "+a.toString(),[a]),A=m?.componentFromFramework,_=m?.componentClass;return ae.createElement("div",{ref:U,style:n,className:j,"col-id":S,role:"columnheader","aria-expanded":f},ae.createElement("div",{ref:P,className:"ag-header-cell-comp-wrapper",role:"presentation"},A?z?ae.createElement(_,{...m.params}):ae.createElement(_,{...m.params,ref:M}):null),ae.createElement("div",{ref:F,"aria-hidden":u,className:I}))},joe=R.memo(Woe),$oe=({ctrl:e})=>{const{context:t}=R.useContext(Xn),{topOffset:n,rowHeight:i}=R.useMemo(()=>e.getTopAndHeight(),[]),[s,o]=R.useState(e.getAriaRowIndex()),a=e.headerRowClass,[c,u]=R.useState(()=>i+"px"),[h,f]=R.useState(()=>n+"px"),p=R.useRef([]),[m,w]=R.useState(()=>e.getUpdatedHeaderCtrls()),S=R.useRef(),E=R.useRef(null),T=R.useCallback(M=>{if(E.current=M,S.current=M?t.createBean(new Ru):t.destroyBean(S.current),!M)return;const U={setHeight:z=>u(z),setTop:z=>f(z),setHeaderCtrls:(z,j,I)=>{const A=p.current,_=Cm(A,z,j);_!==A&&(p.current=_,Bh(I,()=>w(_)))},setWidth:z=>{E.current&&(E.current.style.width=z)},setRowIndex:z=>{o(z)}};e.setComp(U,S.current,!1)},[]),F=R.useMemo(()=>({height:c,top:h}),[c,h]),P=R.useCallback(M=>{switch(e.type){case"group":return ae.createElement(joe,{ctrl:M,key:M.instanceId});case"filter":return ae.createElement(Uoe,{ctrl:M,key:M.instanceId});default:return ae.createElement(Goe,{ctrl:M,key:M.instanceId})}},[]);return ae.createElement("div",{ref:T,className:a,role:"row",style:F,"aria-rowindex":s},m.map(P))},qoe=R.memo($oe),Koe=({pinned:e})=>{const[t,n]=R.useState(!0),[i,s]=R.useState([]),{context:o}=R.useContext(Xn),a=R.useRef(null),c=R.useRef(null),u=R.useRef(),h=e==="left",f=e==="right",p=!h&&!f,m=R.useCallback(E=>{if(a.current=E,u.current=E?o.createBean(new zq(e)):o.destroyBean(u.current),!E)return;const T={setDisplayed:n,setCtrls:F=>s(F),setCenterWidth:F=>{c.current&&(c.current.style.width=F)},setViewportScrollLeft:F=>{a.current&&(a.current.scrollLeft=F)},setPinnedContainerWidth:F=>{a.current&&(a.current.style.width=F,a.current.style.minWidth=F,a.current.style.maxWidth=F)}};u.current.setComp(T,a.current)},[]),w=t?"":"ag-hidden",S=()=>i.map(E=>ae.createElement(qoe,{ctrl:E,key:E.instanceId}));return h?ae.createElement("div",{ref:m,className:"ag-pinned-left-header "+w,"aria-hidden":!t,role:"rowgroup"},S()):f?ae.createElement("div",{ref:m,className:"ag-pinned-right-header "+w,"aria-hidden":!t,role:"rowgroup"},S()):p?ae.createElement("div",{ref:m,className:"ag-header-viewport "+w,role:"presentation",tabIndex:-1},ae.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},S())):null},bw=R.memo(Koe),Yoe=()=>{const[e,t]=R.useState(()=>new Qi),[n,i]=R.useState(),{context:s}=R.useContext(Xn),o=R.useRef(null),a=R.useRef(),c=R.useCallback(f=>{if(o.current=f,a.current=f?s.createBean(new Nq):s.destroyBean(a.current),!f)return;const p={toggleCss:(m,w)=>t(S=>S.setClass(m,w)),setHeightAndMinHeight:m=>i(m)};a.current.setComp(p,f,f)},[]),u=R.useMemo(()=>"ag-header "+e.toString(),[e]),h=R.useMemo(()=>({height:n,minHeight:n}),[n]);return ae.createElement("div",{ref:c,className:u,style:h,role:"presentation"},ae.createElement(bw,{pinned:"left"}),ae.createElement(bw,{pinned:null}),ae.createElement(bw,{pinned:"right"}))},Qoe=R.memo(Yoe),Xoe=(e,t)=>{R.useEffect(()=>{const n=t.current;if(n){const i=n.parentElement;if(i){const s=document.createComment(e);return i.insertBefore(s,n),()=>{i.removeChild(s)}}}},[e])},Na=Xoe,Zoe=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new it(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){rC(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Joe=e=>{const t=R.useRef(e),n=R.useRef(),i=R.useRef(!1),s=R.useRef(!1),[,o]=R.useState(0);i.current&&(s.current=!0),R.useEffect(()=>(i.current||(n.current=t.current(),i.current=!0),o(a=>a+1),()=>{s.current&&n.current?.()}),[])},ere=e=>{const[t,n]=R.useState(),i=R.useContext(Xn),{context:s,popupSvc:o,gos:a,editSvc:c}=i,{editDetails:u,cellCtrl:h,eParentCell:f}=e;return Joe(()=>{const{compDetails:p}=u,m=a.get("stopEditingWhenCellsLoseFocus"),w=s.createBean(c.createPopupEditorWrapper(p.params)),S=w.getGui();if(e.jsChildComp){const z=e.jsChildComp.getGui();z&&S.appendChild(z)}const{column:E,rowNode:T}=h,F={column:E,rowNode:T,type:"popupCellEditor",eventSource:f,ePopup:S,position:u.popupPosition,keepWithinBounds:!0},P=o?.positionPopupByComponent.bind(o,F),M=o?.addPopup({modal:m,eChild:S,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:f,positionCallback:P,ariaOwns:f}),U=M?M.hideFunc:void 0;return n(w),e.jsChildComp?.afterGuiAttached?.(),()=>{U?.(),s.destroyBean(w)}}),R.useLayoutEffect(()=>()=>{h.isCellFocused()&&t?.getGui().contains($t(i))&&f.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?sb.createPortal(e.wrappedContent,t.getGui()):null},VP=R.memo(ere),tre=(e,t,n)=>{const{compProxy:i}=e;n(i);const s=i.getProps(),o=Tu(t);return ae.createElement(vE.Provider,{value:{setMethods:a=>i.setMethods(a)}},o?ae.createElement(t,{...s}):ae.createElement(t,{...s,ref:a=>i.setRef(a)}))},NP=(e,t,n)=>e.compProxy?tre(e,t,n):ae.createElement(t,{...e.compDetails.params,ref:n}),nre=(e,t,n,i,s)=>{const o=e.compDetails,a=o.componentClass,c=o.componentFromFramework&&!e.popup,u=o.componentFromFramework&&e.popup,h=!o.componentFromFramework&&e.popup;return c?NP(e,a,t):u?ae.createElement(VP,{editDetails:e,cellCtrl:i,eParentCell:n,wrappedContent:NP(e,a,t)}):h&&s?ae.createElement(VP,{editDetails:e,cellCtrl:i,eParentCell:n,jsChildComp:s}):null},ire=(e,t,n,i,s,o)=>{const{context:a}=R.useContext(Xn),c=R.useCallback(()=>{const u=s.current;if(!u)return;const h=u.getGui();h&&h.parentElement&&h.parentElement.removeChild(h),a.destroyBean(u),s.current=void 0},[]);R.useEffect(()=>{const u=e!=null,h=e?.compDetails&&!e.compDetails.componentFromFramework,f=t&&n==null;if(!(u&&h&&!f)){c();return}const m=e.compDetails;if(s.current){const S=s.current,T=S.refresh!=null&&e.force==!1?S.refresh(m.params):!1;if(T===!0||T===void 0)return;c()}m.newAgStackInstance().then(S=>{if(!S)return;const E=S.getGui();if(!E)return;(t?n:o.current).appendChild(E),s.current=S})},[e,t,i]),R.useEffect(()=>c,[])},gV=ire,sre=({cellCtrl:e,parent:t})=>{const n=R.useRef(),i=R.useMemo(()=>{const{loadingComp:s}=e.getDeferLoadingCellRenderer();return s?{value:void 0,compDetails:s,force:!1}:void 0},[e]);if(gV(i,!1,void 0,1,n,t),i?.compDetails?.componentFromFramework){const s=i.compDetails.componentClass;return ae.createElement(s,{...i.compDetails.params})}return ae.createElement(ae.Fragment,null)},ore=({cellCtrl:e,printLayout:t,editingCell:n})=>{const i=R.useContext(Xn),{context:s}=i,{column:{colIdSanitised:o},instanceId:a}=e,c=R.useRef(),[u,h]=R.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[f,p]=R.useState(),[m,w]=R.useState(1),[S,E]=R.useState(),[T,F]=R.useState(!1),[P,M]=R.useState(!1),[U,z]=R.useState(!1),[j,I]=R.useState(),A=R.useMemo(()=>e.isForceWrapper(),[e]),_=R.useMemo(()=>e.getCellAriaRole(),[e]),L=R.useRef(null),O=R.useRef(null),G=R.useRef(null),N=R.useRef(),Re=R.useRef(),pe=R.useRef(),K=R.useRef([]),ie=R.useRef(),[se,we]=R.useState(0),H=R.useCallback(Ae=>{ie.current=Ae,we(Me=>Me+1)},[]),ee=u!=null&&(T||U||P)&&(f==null||!!f.popup),le=A||ee,ne=R.useCallback(Ae=>{if(Re.current=Ae,Ae){const Me=Ae.isCancelBeforeStart&&Ae.isCancelBeforeStart();setTimeout(()=>{Me?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(Ae))})}},[e]),me=R.useRef();me.current||(me.current=new sf(()=>L.current)),gV(u,le,ie.current,se,N,L);const Ee=R.useRef();R.useLayoutEffect(()=>{const Ae=Ee.current,Me=u;if(Ee.current=u,Ae==null||Ae.compDetails==null||Me==null||Me.compDetails==null)return;const ut=Ae.compDetails,ht=Me.compDetails;if(ut.componentClass!=ht.componentClass||G.current?.refresh==null)return;G.current.refresh(ht.params)!=!0&&w(Rt=>Rt+1)},[u]),R.useLayoutEffect(()=>{if(!(f&&!f.compDetails.componentFromFramework))return;const Me=f.compDetails,ut=f.popup===!0,ht=Me.newAgStackInstance();return ht.then(je=>{if(!je)return;const Rt=je.getGui();ne(je),ut||((A?pe:L).current?.appendChild(Rt),je.afterGuiAttached&&je.afterGuiAttached()),I(je)}),()=>{ht.then(je=>{const Rt=je.getGui();e.disableEditorTooltipFeature(),s.destroyBean(je),ne(void 0),I(void 0),Rt?.parentElement?.removeChild(Rt)})}},[f]);const xe=R.useCallback(Ae=>{if(pe.current=Ae,!Ae){K.current.forEach(ut=>ut()),K.current=[];return}const Me=ut=>{if(ut){const ht=ut.getGui();Ae.insertAdjacentElement("afterbegin",ht),K.current.push(()=>{s.destroyBean(ut),Ho(ht)})}return ut};if(T){const ut=e.createSelectionCheckbox();Me(ut)}U&&Me(e.createDndSource()),P&&Me(e.createRowDragComp())},[e,s,U,P,T]),ct=R.useCallback(()=>{const Ae=!e.isCellSpanning()||O.current,Me=L.current;if(c.current=Me?s.createBean(new Ru):s.destroyBean(c.current),!Me||!Ae||!e)return;const ut={toggleCss:(je,Rt)=>me.current.toggleCss(je,Rt),setUserStyles:je=>E(je),getFocusableElement:()=>L.current,setIncludeSelection:je=>F(je),setIncludeRowDrag:je=>M(je),setIncludeDndSource:je=>z(je),getCellEditor:()=>Re.current||null,getCellRenderer:()=>G.current??N.current,getParentOfValue:()=>ie.current??pe.current??L.current,setRenderDetails:(je,Rt,kt)=>{const Pt=()=>{h(qt=>qt?.compDetails!==je||qt?.value!==Rt||qt?.force!==kt?{value:Rt,compDetails:je,force:kt}:qt)};if(je?.params?.deferRender&&!e.rowNode.group){const{loadingComp:qt,onReady:Rn}=e.getDeferLoadingCellRenderer();if(qt){h({value:void 0,compDetails:qt,force:!1}),Rn.then(()=>voe(Pt));return}}Pt()},setEditDetails:(je,Rt,kt,Pt)=>{if(je){let qt;je.componentFromFramework&&(Pt?qt=new Zoe(je.params,()=>w(Rn=>Rn+1)):yE()),p({compDetails:je,popup:Rt,popupPosition:kt,compProxy:qt}),Rt||h(void 0)}else e.hasBrowserFocus()&&ut.getFocusableElement().focus({preventScroll:!0}),p(Rn=>{Rn?.compProxy&&(Re.current=void 0)})},refreshEditStyles:(je,Rt)=>{if(!L.current)return;const{current:kt}=me;kt.toggleCss("ag-cell-value",!le),kt.toggleCss("ag-cell-inline-editing",!!je&&!Rt),kt.toggleCss("ag-cell-popup-editing",!!je&&!!Rt),kt.toggleCss("ag-cell-not-inline-editing",!je||!!Rt)}},ht=pe.current||void 0;e.setComp(ut,Me,O.current??void 0,ht,t,n,c.current)},[]),et=R.useCallback(Ae=>{L.current=Ae,ct()},[]),We=R.useCallback(Ae=>{O.current=Ae,ct()},[]),Ht=R.useMemo(()=>!!(u?.compDetails?.componentFromFramework&&Tu(u.compDetails.componentClass)),[u]);R.useLayoutEffect(()=>{if(!L.current)return;const{current:Ae}=me;Ae.toggleCss("ag-cell-value",!le),Ae.toggleCss("ag-cell-inline-editing",!!f&&!f.popup),Ae.toggleCss("ag-cell-popup-editing",!!f&&!!f.popup),Ae.toggleCss("ag-cell-not-inline-editing",!f||!!f.popup)});const gt=()=>{const{compDetails:Ae,value:Me}=u;if(!Ae)return Me?.toString?.()??Me;if(Ae.componentFromFramework){const ut=Ae.componentClass;return ae.createElement(R.Suspense,{fallback:ae.createElement(sre,{cellCtrl:e,parent:L})},Ht?ae.createElement(ut,{...Ae.params,key:m}):ae.createElement(ut,{...Ae.params,key:m,ref:G}))}},_t=()=>{const Ae=()=>u==null?null:le?ae.createElement("span",{role:"presentation",id:`cell-${a}`,className:"ag-cell-value",ref:H},gt()):gt(),Me=ut=>nre(ut,ne,L.current,e,j);return f!=null?f.popup?ae.createElement(ae.Fragment,null,Ae(),Me(f)):Me(f):Ae()},Xt=()=>ae.createElement("div",{ref:et,style:S,role:_,"col-id":o},le?ae.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:xe},_t()):_t());return e.isCellSpanning()?ae.createElement("div",{ref:We,className:"ag-spanned-cell-wrapper",role:"presentation"},Xt()):Xt()},rre=R.memo(ore),are=({rowCtrl:e,containerType:t})=>{const{context:n,gos:i,editSvc:s}=R.useContext(Xn),o=R.useContext(lV)==="default",a=R.useRef(),c=R.useRef(e.getDomOrder()),u=e.isFullWidth(),h=e.rowNode.displayed,[f,p]=R.useState(()=>h?e.rowNode.getRowIndexString():null),[m,w]=R.useState(()=>e.rowId),[S,E]=R.useState(()=>e.businessKey),[T,F]=R.useState(()=>e.rowStyles),P=R.useRef(null),[M,U]=R.useState(()=>null),[z,j]=R.useState(),[I,A]=R.useState(()=>h?e.getInitialRowTop(t):void 0),[_,L]=R.useState(()=>h?e.getInitialTransform(t):void 0),O=R.useRef(null),G=R.useRef(),N=R.useRef(!1),[Re,pe]=R.useState(0);R.useEffect(()=>{if(N.current||!z||Re>10)return;const We=O.current?.firstChild;We?(e.setupDetailRowAutoHeight(We),N.current=!0):pe(Ht=>Ht+1)},[z,Re]);const K=R.useRef();K.current||(K.current=new sf(()=>O.current));const ie=R.useRef(()=>{}),se=R.useCallback(We=>(ie.current=We,()=>{ie.current=()=>{}}),[]),we=yoe(se,()=>P.current,[]),H=o?we:M,ee=R.useCallback(We=>{if(O.current=We,a.current=We?n.createBean(new Ru):n.destroyBean(a.current),!We){e.unsetComp(t);return}if(!e.isAlive())return;const Ht={setTop:A,setTransform:L,toggleCss:(gt,_t)=>K.current.toggleCss(gt,_t),setDomOrder:gt=>c.current=gt,setRowIndex:p,setRowId:w,setRowBusinessKey:E,setUserStyles:F,setCellCtrls:(gt,_t)=>{const Xt=P.current,Ae=Cm(Xt,gt,c.current);Ae!==Xt&&(P.current=Ae,o?ie.current():Bh(_t,()=>U(Ae)))},showFullWidth:gt=>j(gt),getFullWidthCellRenderer:()=>G.current,refreshFullWidth:gt=>xe.current?(j(_t=>({..._t,params:gt()})),!0):!G.current||!G.current.refresh?!1:G.current.refresh(gt())};e.setComp(Ht,We,t,a.current)},[]);R.useLayoutEffect(()=>lf(z,n,O.current,G),[z]);const le=R.useMemo(()=>{const We={top:I,transform:_};return Object.assign(We,T),We},[I,_,T]),ne=u&&z?.componentFromFramework,me=!u&&H!=null,Ee=R.useMemo(()=>!!(z?.componentFromFramework&&Tu(z.componentClass)),[z]),xe=R.useRef(!1);R.useEffect(()=>{xe.current=Ee&&!!z&&!!i.get("reactiveCustomComponents")},[Ee,z]);const ct=()=>H?.map(We=>ae.createElement(rre,{cellCtrl:We,editingCell:s?.isEditing(We,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:We.instanceId})),et=()=>{const We=z.componentClass;return Ee?ae.createElement(We,{...z.params}):ae.createElement(We,{...z.params,ref:G})};return ae.createElement("div",{ref:ee,role:"row",style:le,"row-index":f,"row-id":m,"row-business-key":S},me?ct():ne?et():null)},BP=R.memo(are),lre=({name:e})=>{const{context:t,gos:n}=R.useContext(Xn),i=R.useMemo(()=>rf(e),[e]),s=R.useRef(null),o=R.useRef(null),a=R.useRef(null),c=R.useRef([]),u=R.useRef([]),[h,f]=R.useState(()=>[]),p=!!n.get("enableCellSpan")&&!!i.getSpannedRowCtrls,m=R.useRef([]),w=R.useRef([]),[S,E]=R.useState(()=>[]),T=R.useRef(!1),F=R.useRef(),P=R.useMemo(()=>$i("ag-viewport",BL(e)),[e]),M=R.useMemo(()=>$i(vp(e)),[e]),U=R.useMemo(()=>$i("ag-spanning-container",mq(e)),[e]),z=i.type==="center"||p,j=z?s:o;Na(" AG Row Container "+e+" ",j);const I=R.useCallback(()=>{const pe=!z||s.current!=null,K=o.current!=null,ie=!p||a.current!=null;return pe&&K&&ie},[]),A=R.useCallback(()=>s.current==null&&o.current==null&&a.current==null,[]),_=R.useCallback(()=>{if(A()&&(F.current=t.destroyBean(F.current)),I()){const pe=se=>{const we=Cm(u.current,c.current,T.current);we!==u.current&&(u.current=we,Bh(se,()=>f(we)))},K=se=>{const we=Cm(w.current,m.current,T.current);we!==w.current&&(w.current=we,Bh(se,()=>E(we)))},ie={setHorizontalScroll:se=>{s.current&&(s.current.scrollLeft=se)},setViewportHeight:se=>{s.current&&(s.current.style.height=se)},setRowCtrls:({rowCtrls:se,useFlushSync:we})=>{const H=!!we&&c.current.length>0&&se.length>0;c.current=se,pe(H)},setSpannedRowCtrls:(se,we)=>{const H=!!we&&m.current.length>0&&se.length>0;m.current=se,K(H)},setDomOrder:se=>{T.current!=se&&(T.current=se,pe(!1))},setContainerWidth:se=>{o.current&&(o.current.style.width=se)},setOffsetTop:se=>{o.current&&(o.current.style.transform=`translateY(${se})`)}};F.current=t.createBean(new xq(e)),F.current.setComp(ie,o.current,a.current??void 0,s.current)}},[I,A]),L=R.useCallback(pe=>{o.current=pe,_()},[_]),O=R.useCallback(pe=>{a.current=pe,_()},[_]),G=R.useCallback(pe=>{s.current=pe,_()},[_]),N=()=>ae.createElement("div",{className:M,ref:L,role:"rowgroup"},h.map(pe=>ae.createElement(BP,{rowCtrl:pe,containerType:i.type,key:pe.instanceId})));if(!z)return N();const Re=()=>ae.createElement("div",{className:U,ref:O,role:"rowgroup"},S.map(pe=>ae.createElement(BP,{rowCtrl:pe,containerType:i.type,key:pe.instanceId})));return ae.createElement("div",{className:P,ref:G,role:"presentation"},N(),p?Re():null)},cre=R.memo(lre),ure=()=>{const e=R.useContext(Xn),{context:t,overlays:n}=e,[i,s]=R.useState(""),[o,a]=R.useState(0),[c,u]=R.useState(0),[h,f]=R.useState("0px"),[p,m]=R.useState("0px"),[w,S]=R.useState("100%"),[E,T]=R.useState("0px"),[F,P]=R.useState("0px"),[M,U]=R.useState("100%"),[z,j]=R.useState(!0),[I,A]=R.useState(!0),[_,L]=R.useState(null),[O,G]=R.useState(""),[N,Re]=R.useState(null),[pe,K]=R.useState("ag-layout-normal"),ie=R.useRef();ie.current||(ie.current=new sf(()=>se.current));const se=R.useRef(null),we=R.useRef(null),H=R.useRef(null),ee=R.useRef(null),le=R.useRef(null),ne=R.useRef(null),me=R.useRef(null),Ee=R.useRef([]),xe=R.useRef([]);Na(" AG Grid Body ",se),Na(" AG Pinned Top ",we),Na(" AG Sticky Top ",H),Na(" AG Middle ",ne),Na(" AG Pinned Bottom ",me);const ct=R.useCallback(Pt=>{if(se.current=Pt,!Pt){Ee.current=t.destroyBeans(Ee.current),xe.current.forEach(qe=>qe()),xe.current=[];return}if(!t)return;const qt=(qe,pt)=>{qe.appendChild(pt),xe.current.push(()=>qe.removeChild(pt))},Rn=qe=>{const pt=t.createBean(new qe);return Ee.current.push(pt),pt},ri=(qe,pt,Tl)=>{qt(qe,document.createComment(Tl)),qt(qe,Rn(pt).getGui())};ri(Pt,Iq," AG Fake Horizontal Scroll ");const Zs=n?.getOverlayWrapperCompClass();Zs&&ri(Pt,Zs," AG Overlay Wrapper "),le.current&&ri(le.current,kq," AG Fake Vertical Scroll ");const Ie={setRowAnimationCssOnBodyViewport:s,setColumnCount:qe=>{se.current&&Lj(se.current,qe)},setRowCount:qe=>{se.current&&_j(se.current,qe)},setTopHeight:a,setBottomHeight:u,setStickyTopHeight:f,setStickyTopTop:m,setStickyTopWidth:S,setTopInvisible:j,setBottomInvisible:A,setColumnMovingCss:(qe,pt)=>ie.current.toggleCss(qe,pt),updateLayoutClasses:K,setAlwaysVerticalScrollClass:L,setPinnedTopBottomOverflowY:G,setCellSelectableCss:(qe,pt)=>Re(pt?qe:null),setBodyViewportWidth:qe=>{ne.current&&(ne.current.style.width=qe)},registerBodyViewportResizeListener:qe=>{if(ne.current){const pt=Wo(e,ne.current,qe);xe.current.push(()=>pt())}},setStickyBottomHeight:T,setStickyBottomBottom:P,setStickyBottomWidth:U,setGridRootRole:qe=>Pt.setAttribute("role",qe)},Ke=t.createBean(new Pq);Ee.current.push(Ke),Ke.setComp(Ie,Pt,ne.current,we.current,me.current,H.current,ee.current)},[]),et=R.useMemo(()=>$i("ag-root","ag-unselectable",pe),[pe]),We=R.useMemo(()=>$i("ag-body-viewport",i,pe,_,N),[i,pe,_,N]),Ht=R.useMemo(()=>$i("ag-body",pe),[pe]),gt=R.useMemo(()=>$i("ag-floating-top",z?"ag-invisible":null,N),[N,z]),_t=R.useMemo(()=>$i("ag-sticky-top",N),[N]),Xt=R.useMemo(()=>$i("ag-sticky-bottom",E==="0px"?"ag-invisible":null,N),[N,E]),Ae=R.useMemo(()=>$i("ag-floating-bottom",I?"ag-invisible":null,N),[N,I]),Me=R.useMemo(()=>({height:o,minHeight:o,overflowY:O}),[o,O]),ut=R.useMemo(()=>({height:h,top:p,width:w}),[h,p,w]),ht=R.useMemo(()=>({height:E,bottom:F,width:M}),[E,F,M]),je=R.useMemo(()=>({height:c,minHeight:c,overflowY:O}),[c,O]),Rt=Pt=>ae.createElement(cre,{name:Pt,key:`${Pt}-container`}),kt=({section:Pt,children:qt,className:Rn,style:ri})=>ae.createElement("div",{ref:Pt,className:Rn,role:"presentation",style:ri},qt.map(Rt));return ae.createElement("div",{ref:ct,className:et},ae.createElement(Qoe,null),kt({section:we,className:gt,style:Me,children:["topLeft","topCenter","topRight","topFullWidth"]}),ae.createElement("div",{className:Ht,ref:le,role:"presentation"},kt({section:ne,className:We,children:["left","center","right","fullWidth"]})),kt({section:H,className:_t,style:ut,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),kt({section:ee,className:Xt,style:ht,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),kt({section:me,className:Ae,style:je,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},dre=R.memo(ure),hre=(e,t)=>{const{children:n,eFocusableElement:i,onTabKeyDown:s,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:c}=e,{context:u}=R.useContext(Xn),h=R.useRef(null),f=R.useRef(null),p=R.useRef(),m=F=>{const P=F==null?void 0:parseInt(F,10).toString();[h,f].forEach(M=>{P===void 0?M.current?.removeAttribute("tabindex"):M.current?.setAttribute("tabindex",P)})};R.useImperativeHandle(t,()=>({forceFocusOutOfContainer(F){p.current?.forceFocusOutOfContainer(F)}}));const w=R.useCallback(()=>{const F=h.current,P=f.current;if(!F&&!P){p.current=u.destroyBean(p.current);return}if(F&&P){const M={setTabIndex:m};p.current=u.createBean(new XL({comp:M,eTopGuard:F,eBottomGuard:P,eFocusableElement:i,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:U=>o.focusInnerElement(U),isEmpty:c}))}},[]),S=R.useCallback(F=>{h.current=F,w()},[w]),E=R.useCallback(F=>{f.current=F,w()},[w]),T=F=>{const P=F==="top"?qc.TAB_GUARD_TOP:qc.TAB_GUARD_BOTTOM;return ae.createElement("div",{className:`${qc.TAB_GUARD} ${P}`,role:"presentation",ref:F==="top"?S:E})};return ae.createElement(ae.Fragment,null,T("top"),n,T("bottom"))},fre=R.forwardRef(hre),gre=R.memo(fre),pre=({context:e})=>{const[t,n]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(null),[c,u]=R.useState(null),[h,f]=R.useState(!1),[p,m]=R.useState(),w=R.useRef(),S=R.useRef(null),E=R.useRef(),[T,F]=R.useState(null),P=R.useRef(()=>{}),M=R.useRef(),U=R.useRef([]),z=R.useCallback(()=>{},[]),j=R.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);Na(" AG Grid ",S);const I=R.useCallback(N=>{if(S.current=N,w.current=N?e.createBean(new VK):e.destroyBean(w.current),!N||e.isDestroyed())return;const Re=w.current;P.current=Re.focusInnerElement.bind(Re);const pe={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:K=>{if(!K&&M.current?.isDisplayed()){M.current.forceFocusOutOfContainer(K);return}E.current?.forceFocusOutOfContainer(K)},updateLayoutClasses:s,getFocusableContainers:()=>{const K=[],ie=S.current?.querySelector(".ag-root");return ie&&K.push({getGui:()=>ie}),U.current.forEach(se=>{se.isDisplayed()&&K.push(se)}),K},setCursor:a,setUserSelect:u};Re.setComp(pe,N,N),f(!0)},[]);R.useEffect(()=>{const N=w.current,Re=S.current;if(!p||!j||!N||!T||!Re||e.isDestroyed())return;const pe=[],{watermarkSelector:K,paginationSelector:ie,sideBarSelector:se,statusBarSelector:we,gridHeaderDropZonesSelector:H}=N.getOptionalSelectors(),ee=[];if(H){const ne=e.createBean(new H.component),me=ne.getGui();Re.insertAdjacentElement("afterbegin",me),ee.push(me),pe.push(ne)}if(se){const ne=e.createBean(new se.component),me=ne.getGui(),Ee=T.querySelector(".ag-tab-guard-bottom");Ee&&(Ee.insertAdjacentElement("beforebegin",me),ee.push(me)),pe.push(ne),U.current.push(ne)}const le=ne=>{const me=e.createBean(new ne),Ee=me.getGui();return Re.insertAdjacentElement("beforeend",Ee),ee.push(Ee),pe.push(me),me};if(we&&le(we.component),ie){const ne=le(ie.component);M.current=ne,U.current.push(ne)}return K&&le(K.component),()=>{e.destroyBeans(pe),ee.forEach(ne=>{ne.parentElement?.removeChild(ne)})}},[p,T,j]);const A=R.useMemo(()=>$i("ag-root-wrapper",t,i),[t,i]),_=R.useMemo(()=>$i("ag-root-wrapper-body","ag-focus-managed",i),[i]),L=R.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:o??""}),[c,o]),O=R.useCallback(N=>{E.current=N,m(N!==null)},[]),G=R.useCallback(()=>!w.current?.isFocusable(),[]);return ae.createElement("div",{ref:I,className:A,style:L,role:"presentation"},ae.createElement("div",{className:_,ref:F,role:"presentation"},h&&T&&j&&ae.createElement(Xn.Provider,{value:j},ae.createElement(gre,{ref:O,eFocusableElement:T,onTabKeyDown:z,gridCtrl:w.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:G},ae.createElement(dre,null)))))},mre=R.memo(pre),Cre=class extends oe{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},pV={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},vre={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...pV},mV=new Set(Object.keys(vre)),yre=new Set(Object.keys(pV)),CV=e=>{const t=R.useRef(),n=R.useRef(null),i=R.useRef(null),s=R.useRef([]),o=R.useRef([]),a=R.useRef(e),c=R.useRef(),u=R.useRef(),h=R.useRef(!1),[f,p]=R.useState(void 0),[,m]=R.useState(0),w=R.useCallback(F=>{if(n.current=F,!F){s.current.forEach(O=>O()),s.current.length=0;return}const P=e.modules||[];i.current||(i.current=new Noe(()=>m(O=>O+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),s.current.push(()=>{i.current?.destroy(),i.current=null}));const M=p7(e.gridOptions,e,Object.keys(e).filter(O=>!mV.has(O))),U=()=>{if(h.current){const O=()=>c.current?.shouldQueueUpdates()?void 0:o.current.shift();let G=O();for(;G;)G(),G=O()}},z=new Rre(U);c.current=z;const j=new Cre,I={providedBeanInstances:{frameworkCompWrapper:new Sre(i.current,M),renderStatus:j},modules:P,frameworkOverrides:z,setThemeOnGridDiv:!0},A=O=>{p(O),O.createBean(j),s.current.push(()=>{O.destroy()}),O.getBean("ctrlsSvc").whenReady({addDestroyFunc:G=>{s.current.push(G)}},()=>{if(O.isDestroyed())return;const G=t.current;G&&e.passGridApi?.(G)})},_=O=>{O.getBean("ctrlsSvc").whenReady({addDestroyFunc:G=>{s.current.push(G)}},()=>{o.current.forEach(G=>G()),o.current.length=0,h.current=!0})},L=new zJ;M.gridId??(M.gridId=u.current),t.current=L.create(F,M,A,_,I),s.current.push(()=>{t.current=void 0}),t.current&&(u.current=t.current.getGridId())},[]),S=R.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),E=R.useCallback(F=>{h.current&&!c.current?.shouldQueueUpdates()?F():o.current.push(F)},[]);R.useEffect(()=>{const F=wre(a.current,e);a.current=e,E(()=>{t.current&&m7(F,t.current)})},[e]);const T=!ae.useSyncExternalStore||dp(e,"renderingMode")==="legacy"?"legacy":"default";return ae.createElement("div",{style:S,className:e.className,ref:w},ae.createElement(lV.Provider,{value:T},f&&!f.isDestroyed()?ae.createElement(mre,{context:f}):null,i.current?.getPortals()??null))};function wre(e,t){const n={};return Object.keys(t).forEach(i=>{if(mV.has(i)){yre.has(i)&&ge(274,{prop:i});return}const s=t[i];e[i]!==s&&(n[i]=s)}),n}var Sre=class extends $J{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const n=this.gridOptions;if(dp(n,"reactiveCustomComponents")){const a=(c=>{switch(c){case"filter":return dp(n,"enableFilterHandlers")?Doe:xoe;case"floatingFilterComponent":return dp(n,"enableFilterHandlers")?Poe:Foe;case"dateComponent":return Eoe;case"dragAndDropImageComponent":return Toe;case"loadingOverlayComponent":return Ioe;case"noRowsOverlayComponent":return koe;case"statusPanel":return Loe;case"toolPanel":return Ooe;case"menuItem":return _oe;case"cellRenderer":return Roe;case"innerHeaderComponent":return Moe}})(t.name);if(a)return new a(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":yE();break}const s=!t.cellRenderer&&t.name!=="toolPanel";return new hV(e,this.parent,t,s)}},bre=R.forwardRef((e,t)=>{const n=R.useContext(Xn),{registry:i,context:s,gos:o,rowModel:a}=n,[c,u]=R.useState(()=>new Qi),[h,f]=R.useState(()=>new Qi),[p,m]=R.useState(),[w,S]=R.useState(),E=R.useRef(),T=R.useRef(null),F=R.useRef(),P=R.useMemo(()=>O8(e.api.getGridId(),p?.rowModelType??"clientSide"),[e]),M=R.useMemo(()=>c.toString()+" ag-details-row",[c]),U=R.useMemo(()=>h.toString()+" ag-details-grid",[h]);t&&R.useImperativeHandle(t,()=>({refresh(){return E.current?.refresh()??!1}})),e.template&&ge(230);const z=R.useCallback(I=>{if(T.current=I,!I){E.current=s.destroyBean(E.current),F.current?.();return}const A={toggleCss:(L,O)=>u(G=>G.setClass(L,O)),toggleDetailGridCss:(L,O)=>f(G=>G.setClass(L,O)),setDetailGrid:L=>m(L),setRowData:L=>S(L),getGui:()=>T.current},_=i.createDynamicBean("detailCellRendererCtrl",!0);if(_&&(s.createBean(_),_.init(A,e),E.current=_,o.get("detailRowAutoHeight"))){const L=()=>{if(T.current==null)return;const O=T.current.clientHeight;O!=null&&O>0&&setTimeout(()=>{e.node.setRowHeight(O),(gn(o)||wl(o))&&a.onRowHeightChanged()},0)};F.current=Wo(n,I,L),L()}},[]),j=R.useCallback(I=>{E.current?.registerDetailWithMaster(I)},[]);return ae.createElement("div",{className:M,ref:z},p&&ae.createElement(CV,{className:U,...p,modules:P,rowData:w,passGridApi:j}))}),Rre=class extends ZL{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:LP,agGroupRowRenderer:LP,agDetailCellRenderer:bre},this.wrapIncoming=(t,n)=>n==="ensureVisible"?Coe(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return moe()}},Ere=class extends R.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return ae.createElement(CV,{...this.props,passGridApi:this.setGridApi})}};const Tre=()=>{const{deportistas:e,setCurrentDeportista:t,academia:n}=vI(),{setShowModal:i,setShowConfirmDelete:s,setEditMode:o,setDeportistas:a}=pl(),[c,u]=R.useState(""),[h,f]=R.useState(!0),[p,m]=R.useState(null),w=R.useMemo(()=>({width:"100%",height:"500px"}),[]),S=R.useMemo(()=>({height:"100%",width:"100%"}),[]),[E]=R.useState([{headerName:"Nombre",field:"nombre",filter:!0,floatingFilter:!0,minWidth:150},{headerName:"Apellido",field:"apellido",filter:!0,floatingFilter:!0,minWidth:150},{headerName:"Edad",field:"edad",filter:"agNumberColumnFilter",minWidth:100},{headerName:"Peso (kg)",field:"peso",filter:"agNumberColumnFilter",minWidth:120},{headerName:"Categoría",field:"categoria",filter:!0,floatingFilter:!0,minWidth:200},{headerName:"Seniority",field:"seniority",filter:!0,floatingFilter:!0,minWidth:150},{headerName:"Acciones",cellRenderer:P=>{const{data:M}=P;return B.jsxs("div",{className:"d-flex justify-content-center align-items-center h-100",children:[B.jsx(Xi,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>{t(M.id),o(!0),i(!0)},children:B.jsx("i",{className:"bi bi-pencil-square"})}),B.jsx(Xi,{variant:"outline-danger",size:"sm",onClick:()=>{t(M.id),s(!0)},children:B.jsx("i",{className:"bi bi-trash-fill"})})]})},minWidth:120,cellStyle:{textAlign:"center"}}]),T=R.useMemo(()=>({sortable:!0,suppressMovable:!0}),[]),F=P=>{m(P.api)};return R.useEffect(()=>{if(!p)return;const P=()=>{window.innerWidth>1270&&p.sizeColumnsToFit()};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[p]),R.useEffect(()=>{n?(async()=>{f(!0);const M=await hj(n);a(M),f(!1)})():f(!1)},[n,a]),h?B.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"500px"},children:B.jsx(Am,{animation:"border",variant:"dark",style:{width:40,height:40}})}):B.jsxs("div",{style:w,children:[B.jsxs(Is,{className:"mb-3",children:[B.jsx(nn,{md:8,className:"mb-2 mb-md-0",children:B.jsx(Ge.Group,{children:B.jsxs(Tr,{children:[B.jsx(Tr.Text,{children:B.jsx("i",{className:"bi bi-search"})}),B.jsx(Ge.Control,{type:"text",placeholder:"Búsqueda rápida...",value:c,onChange:P=>u(P.target.value)})]})})}),B.jsx(nn,{md:4,className:"d-flex justify-content-md-end",children:B.jsxs(Xi,{variant:"success",className:"w-100 w-md-auto",onClick:()=>{t(""),o(!1),i(!0)},children:[B.jsx("i",{className:"bi bi-plus-circle me-2"}),"Añadir Deportista"]})})]}),B.jsx("div",{style:S,children:B.jsx(Ere,{rowData:e,columnDefs:E,defaultColDef:T,pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,25,50],quickFilterText:c,domLayout:"autoHeight",theme:bO,onGridReady:F})})]})},xre=()=>{const{showConfirmDelete:e,setShowConfirmDelete:t,deportistas:n,currentDeportista:i,setDeportistas:s}=pl(),[o,a]=R.useState(!1),c=()=>{t(!1)},u=async()=>{try{a(!0),await fj(i),s(n.filter(h=>h.id!=i))}catch(h){console.error(h),bt.error("Error al eliminar el estudiante")}finally{t(!1),a(!1)}};return B.jsxs(To,{show:e,onHide:c,backdrop:"static",contentClassName:"border-0 shadow-lg rounded-4",children:[B.jsx(To.Header,{className:"bg-danger bg-gradient text-white border-0 rounded-top-4",children:B.jsxs("div",{className:"d-flex align-items-center w-100",children:[B.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-2 me-3"}),B.jsxs("div",{children:[B.jsx(To.Title,{className:"fs-4 fw-bold mb-0",children:"Confirmar eliminación"}),B.jsx("div",{className:"small text-white-50",children:"Esta acción no se puede deshacer"})]})]})}),o?B.jsxs(B.Fragment,{children:[B.jsx(To.Body,{className:"py-5 d-flex justify-content-center align-items-center",children:B.jsx(Am,{animation:"border",variant:"danger",style:{width:48,height:48}})}),B.jsx(To.Footer,{className:"border-0 d-flex justify-content-center gap-2 pb-4"})]}):B.jsxs(B.Fragment,{children:[B.jsx(To.Body,{className:"py-4",children:B.jsx(Is,{className:"justify-content-center",children:B.jsxs(nn,{xs:12,className:"text-center",children:[B.jsx("i",{className:"bi bi-person-x-fill text-danger fs-1 mb-3"}),B.jsx("h5",{className:"fw-semibold mb-3",children:"¿Estás seguro de que deseas eliminar este estudiante?"}),B.jsx("p",{className:"text-secondary mb-0",children:"Esta acción eliminará permanentemente el registro del estudiante seleccionado."})]})})}),B.jsxs(To.Footer,{className:"border-0 d-flex justify-content-center gap-2 pb-4",children:[B.jsxs(Xi,{variant:"outline-secondary",onClick:c,className:"px-4 rounded-pill",children:[B.jsx("i",{className:"bi bi-x-circle me-2"}),"Cancelar"]}),B.jsxs(Xi,{variant:"danger",onClick:u,className:"px-4 rounded-pill",children:[B.jsx("i",{className:"bi bi-trash-fill me-2"}),"Eliminar"]})]})]})]})},GP=async e=>{localStorage.setItem("academia",e),localStorage.setItem("isLoggedIn","true")},Dre=()=>{localStorage.removeItem("academia"),localStorage.removeItem("isLoggedIn")},Are=()=>localStorage.getItem("isLoggedIn")==="true",Fre=()=>localStorage.getItem("academia"),Pre=()=>{const{showModal:e,setShowModal:t,setIsLoggedIn:n,setAcademia:i,academia:s}=pl(),o=()=>{Dre(),n(!1),i("")};return B.jsx(B.Fragment,{children:B.jsxs(yM,{id:"inscripcion-container",className:"py-4",children:[B.jsx(Ga,{className:"mb-4 shadow-sm border-0",style:{background:"#000",color:"#fff"},children:B.jsx(Ga.Body,{children:B.jsxs(Is,{className:"align-items-center",children:[B.jsx(nn,{xs:"auto",children:B.jsx("div",{style:{background:"#fff",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:B.jsx("i",{className:"bi bi-person-plus-fill",style:{fontSize:32,color:"#000"}})})}),B.jsxs(nn,{children:[B.jsxs("h2",{className:"fw-bold mb-1",style:{color:"#fff",letterSpacing:1},children:["Bienvenido, ",s]}),B.jsx("div",{className:"text-white",style:{fontSize:16},children:"Desde aquí puede administrar las inscripciones de sus deportistas."})]}),B.jsx(nn,{xs:"auto",children:B.jsxs(Xi,{variant:"danger",onClick:o,children:[B.jsx("i",{className:"bi bi-box-arrow-right me-2"}),"Cerrar Sesión"]})})]})})}),B.jsx(Tre,{}),B.jsx(To,{show:e,onHide:()=>t(!1),size:"xl",backdrop:"static",children:B.jsx(To.Body,{children:B.jsx(yj,{})})}),B.jsx(xre,{})]})})},Mre=()=>{const{setAcademia:e,setIsLoggedIn:t}=pl(),[n,i]=R.useState(""),[s,o]=R.useState(!1),[a,c]=R.useState(!1),[u,h]=R.useState(!1),[f,p]=R.useState(!1),[m,w]=R.useState(""),S=async T=>{T.preventDefault(),o(!0);const F=await lj(n);if(F){const P=F.nombre;e(P),t(!0),await GP(P)}else c(!0);o(!1)},E=async T=>{try{o(!0),T.preventDefault();const F=new FormData(T.target),P=F.get("academia"),M=F.get("dni");await cj(P,M),w(P),p(!0)}catch(F){console.error(F),bt.error("Ocurrió un error al registrar la academia")}finally{o(!1)}};return R.useEffect(()=>{if(f&&m){const T=setTimeout(async()=>{e(m),t(!0),await GP(m)},2e3);return()=>clearTimeout(T)}},[f,m,e,t]),s?B.jsx("div",{className:"d-flex align-items-center justify-content-center min-vh-100",children:B.jsx(Am,{animation:"border",variant:"dark",style:{width:40,height:40}})}):f?B.jsx(Ls.div,{className:"d-flex align-items-center justify-content-center min-vh-100 p-3",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{background:"rgba(255, 255, 255, 0.9)"},children:B.jsx(Ga,{className:"text-center shadow-lg border-success w-100",style:{borderWidth:"2px",maxWidth:"400px"},children:B.jsxs(Ga.Body,{className:"p-5",children:[B.jsx(Ls.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20},children:B.jsx("i",{className:"bi bi-check-circle-fill text-success",style:{fontSize:"4rem"}})}),B.jsx("h4",{className:"mt-3 fw-bold text-dark",children:"¡Academia registrada!"}),B.jsx("p",{className:"mb-0 text-muted",children:"Redirigiendo al sistema de inscripciones..."})]})})}):B.jsx("div",{className:"d-flex align-items-center justify-content-center min-vh-100 p-3",children:B.jsx(Ga,{className:"shadow-lg border-0 w-100",style:{maxWidth:600,background:"#fff"},children:B.jsxs(Ga.Body,{className:"p-4 p-sm-5",children:[B.jsxs("div",{className:"text-center mb-4",children:[B.jsx("i",{className:"bi bi-trophy-fill",style:{fontSize:48,color:"#000"}}),B.jsx("h2",{className:"fw-bold mt-2 mb-0",style:{color:"#000"},children:"GrandPrix 4"}),B.jsx("h6",{className:"fw-bold mt-2 mb-0",style:{color:"#000"},children:"Sistema de inscripciones"}),B.jsx("hr",{}),B.jsx("div",{className:"text-muted mb-2",style:{fontSize:16},children:u?"Registrar academia":"Acceso exclusivo para profesores"}),B.jsx("hr",{})]}),u?B.jsx(Ls.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:B.jsxs(Ge,{onSubmit:E,children:[B.jsxs(Ge.Group,{className:"mb-4",children:[B.jsx(Ge.Label,{className:"fw-semibold",style:{color:"#000"},children:"Documento de identidad"}),B.jsxs(Tr,{children:[B.jsx(Tr.Text,{style:{background:"#fff",borderRight:0},children:B.jsx("i",{className:"bi bi-person-circle",style:{color:"#000"}})}),B.jsx(Ge.Control,{name:"dni",type:"text",placeholder:"Ej: 12345678",value:n,readOnly:!0,onChange:T=>i(T.target.value)})]})]}),B.jsxs(Ge.Group,{className:"mb-4",children:[B.jsx(Ge.Label,{className:"fw-semibold",style:{color:"#000"},children:"Nombre de la academia"}),B.jsxs(Tr,{children:[B.jsx(Tr.Text,{style:{background:"#fff",borderRight:0},children:B.jsx("i",{className:"bi bi-bank2",style:{color:"#000"}})}),B.jsx(Ge.Control,{name:"academia",type:"text",placeholder:"Nombre de la academia"})]})]}),B.jsx(Xi,{variant:"dark",type:"submit",className:"w-100",children:"Registrar Academia"})]})}):B.jsxs(Ge,{onSubmit:S,children:[B.jsxs(Ge.Group,{className:"mb-4",children:[B.jsx(Ge.Label,{className:"fw-semibold",style:{color:"#000"},children:"Documento de identidad"}),B.jsxs(Tr,{children:[B.jsx(Tr.Text,{style:{background:"#fff",borderRight:0},children:B.jsx("i",{className:"bi bi-person-circle",style:{color:"#000"}})}),B.jsx(Ge.Control,{type:"text",placeholder:"Ej: 12345678",onChange:T=>i(T.target.value)}),B.jsx(Xi,{variant:"dark",type:"submit",children:"Ingresar"})]})]}),a&&B.jsx(Ls.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:B.jsxs(EB,{variant:"warning",className:"d-flex align-items-start gap-3 shadow-sm border-0",style:{background:"#fffbe6"},children:[B.jsx("div",{className:"pt-1",children:B.jsx("i",{className:"bi bi-exclamation-triangle-fill",style:{fontSize:28,color:"#f0ad4e"}})}),B.jsxs("div",{className:"flex-grow-1",children:[B.jsx("div",{className:"fw-semibold mb-1",style:{color:"#b8860b",fontSize:16},children:"Documento no registrado"}),B.jsx("div",{className:"mb-2",style:{fontSize:14,color:"#6c5c1a"},children:"Este documento de identidad no está registrado en el sistema. Por favor, haga click en el siguiente botón para registrar su academia y asociarla con este documento de identidad."}),B.jsxs(Xi,{variant:"success",className:"fw-semibold px-4 py-1",onClick:()=>h(!0),children:[B.jsx("i",{className:"bi bi-plus-circle me-2"}),"Registrar academia"]})]})]})})]})]})})})},Ire={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},HP=({children:e})=>B.jsx(Ls.div,{variants:Ire,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3,ease:"easeInOut"},children:e});B8.registerModules([poe]);function _re(){const{isLoggedIn:e,setIsLoggedIn:t,setAcademia:n}=pl();return R.useEffect(()=>{if(Are()){const s=Fre();t(!0),s&&n(s)}},[t,n]),B.jsxs(Ls.div,{id:"app-container",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[B.jsx(Ap,{mode:"wait",children:e?B.jsx(HP,{children:B.jsx(Pre,{})},"inscripcion"):B.jsx(HP,{children:B.jsx(Mre,{})},"login")}),B.jsx(M2,{position:"top-center"})]})}QN.createRoot(document.getElementById("root")).render(B.jsx(R.StrictMode,{children:B.jsx(_re,{})}));
